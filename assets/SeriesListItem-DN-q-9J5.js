import{d as y,r as w,e as j,j as e,L as u,I as n,s as S,S as z,B as m}from"./index-D_FLfjBw.js";import{M as I}from"./MasteryBar-OxNLaxF2.js";import{P as D}from"./ProgressBar-uuvsF9ns.js";const B=({series:s,completedCount:d,dueCount:c,onStartSeriesStudy:f,masteryLevel:g,nextUpDeckId:l,onGenerateAllQuestions:o})=>{var p;const{aiGenerationStatus:b,decks:x}=y(),r=(s.levels||[]).reduce((a,i)=>{var t;return a+(((t=i==null?void 0:i.deckIds)==null?void 0:t.length)||0)},0),v=d>=r&&r>0,N=((p=b.currentTask)==null?void 0:p.seriesId)===s.id,k=w.useMemo(()=>{const a=new Set((s.levels||[]).flatMap(t=>(t==null?void 0:t.deckIds)||[]));return Object.values(x).filter(t=>a.has(t.id)).some(t=>{var h;return(t.type===j.Quiz||t.type===j.Learning)&&(((h=t.questions)==null?void 0:h.length)||0)===0})},[s.levels,x]);return e.jsx(u,{href:`/series/${s.id}`,className:"block bg-surface rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border border-transparent hover:border-primary",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[e.jsxs("div",{className:"flex items-center mb-1",children:[e.jsx(n,{name:"layers",className:"w-5 h-5 mr-2 text-purple-500 dark:text-purple-400"}),e.jsx("h3",{className:"text-xl font-bold text-text break-words",children:s.name})]}),s.description&&e.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-text-muted mt-1 truncate",title:S(s.description),dangerouslySetInnerHTML:{__html:s.description}})]}),v&&e.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 text-green-500 dark:text-green-400 bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-full",children:[e.jsx(n,{name:"check-circle",className:"w-4 h-4"}),e.jsx("span",{className:"text-sm font-semibold",children:"Completed"})]})]}),r>0&&e.jsxs("div",{className:"mt-3 space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[e.jsx("span",{className:"font-medium text-text-muted",children:"Completion"}),e.jsxs("span",{className:"font-semibold text-text-muted",children:[d," / ",r]})]}),e.jsx(D,{current:d,total:r})]}),e.jsx("div",{children:e.jsx(I,{level:g})})]}),e.jsx("div",{className:"mt-4 pt-4 border-t border-border/50 flex justify-end gap-2",children:N?e.jsxs("div",{className:"flex items-center text-text-muted",children:[e.jsx(z,{size:"sm"}),e.jsx("span",{className:"ml-2 text-sm font-semibold",children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[l&&e.jsxs(u,{href:`/decks/${l}/study?seriesId=${s.id}`,passAs:m,variant:"primary",size:"sm",onClick:a=>{a.stopPropagation()},children:[e.jsx(n,{name:"laptop",className:"w-4 h-4 mr-2"}),"Continue"]}),k&&c===0&&!l&&o&&e.jsxs(m,{variant:"secondary",size:"sm",onClick:a=>{a.preventDefault(),a.stopPropagation(),o(s.id)},children:[e.jsx(n,{name:"zap",className:"w-4 h-4 mr-2"}),"Generate Questions"]}),e.jsxs(m,{variant:"secondary",size:"sm",onClick:a=>{a.preventDefault(),a.stopPropagation(),f(s.id)},disabled:c===0,children:[e.jsx(n,{name:"zap",className:"w-4 h-4 mr-2"}),"Study Due (",c,")"]})]})})]})})};export{B as S};
