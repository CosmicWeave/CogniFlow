var Oh=(a,d)=>()=>(d||a((d={exports:{}}).exports,d),d.exports);var vg=Oh((bg,Ga)=>{(function(){const d=document.createElement("link").relList;if(d&&d.supports&&d.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))v(p);new MutationObserver(p=>{for(const c of p)if(c.type==="childList")for(const f of c.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&v(f)}).observe(document,{childList:!0,subtree:!0});function o(p){const c={};return p.integrity&&(c.integrity=p.integrity),p.referrerPolicy&&(c.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?c.credentials="include":p.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function v(p){if(p.ep)return;p.ep=!0;const c=o(p);fetch(p.href,c)}})();var no=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wa(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function Rh(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var d=a.default;if(typeof d=="function"){var o=function v(){return this instanceof v?Reflect.construct(d,arguments,this.constructor):d.apply(this,arguments)};o.prototype=d.prototype}else o={};return Object.defineProperty(o,"__esModule",{value:!0}),Object.keys(a).forEach(function(v){var p=Object.getOwnPropertyDescriptor(a,v);Object.defineProperty(o,v,p.get?p:{enumerable:!0,get:function(){return a[v]}})}),o}var tc={exports:{}},Ua={},rc={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rd;function zh(){if(Rd)return ut;Rd=1;var a=Symbol.for("react.element"),d=Symbol.for("react.portal"),o=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),c=Symbol.for("react.provider"),f=Symbol.for("react.context"),x=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),m=Symbol.for("react.memo"),T=Symbol.for("react.lazy"),S=Symbol.iterator;function E(w){return w===null||typeof w!="object"?null:(w=S&&w[S]||w["@@iterator"],typeof w=="function"?w:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,b={};function D(w,N,B){this.props=w,this.context=N,this.refs=b,this.updater=B||k}D.prototype.isReactComponent={},D.prototype.setState=function(w,N){if(typeof w!="object"&&typeof w!="function"&&w!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,w,N,"setState")},D.prototype.forceUpdate=function(w){this.updater.enqueueForceUpdate(this,w,"forceUpdate")};function I(){}I.prototype=D.prototype;function O(w,N,B){this.props=w,this.context=N,this.refs=b,this.updater=B||k}var z=O.prototype=new I;z.constructor=O,C(z,D.prototype),z.isPureReactComponent=!0;var M=Array.isArray,R=Object.prototype.hasOwnProperty,G={current:null},Q={key:!0,ref:!0,__self:!0,__source:!0};function ne(w,N,B){var H,U={},X=null,he=null;if(N!=null)for(H in N.ref!==void 0&&(he=N.ref),N.key!==void 0&&(X=""+N.key),N)R.call(N,H)&&!Q.hasOwnProperty(H)&&(U[H]=N[H]);var oe=arguments.length-2;if(oe===1)U.children=B;else if(1<oe){for(var ye=Array(oe),Ie=0;Ie<oe;Ie++)ye[Ie]=arguments[Ie+2];U.children=ye}if(w&&w.defaultProps)for(H in oe=w.defaultProps,oe)U[H]===void 0&&(U[H]=oe[H]);return{$$typeof:a,type:w,key:X,ref:he,props:U,_owner:G.current}}function V(w,N){return{$$typeof:a,type:w.type,key:N,ref:w.ref,props:w.props,_owner:w._owner}}function ee(w){return typeof w=="object"&&w!==null&&w.$$typeof===a}function ae(w){var N={"=":"=0",":":"=2"};return"$"+w.replace(/[=:]/g,function(B){return N[B]})}var $=/\/+/g;function K(w,N){return typeof w=="object"&&w!==null&&w.key!=null?ae(""+w.key):N.toString(36)}function _(w,N,B,H,U){var X=typeof w;(X==="undefined"||X==="boolean")&&(w=null);var he=!1;if(w===null)he=!0;else switch(X){case"string":case"number":he=!0;break;case"object":switch(w.$$typeof){case a:case d:he=!0}}if(he)return he=w,U=U(he),w=H===""?"."+K(he,0):H,M(U)?(B="",w!=null&&(B=w.replace($,"$&/")+"/"),_(U,N,B,"",function(Ie){return Ie})):U!=null&&(ee(U)&&(U=V(U,B+(!U.key||he&&he.key===U.key?"":(""+U.key).replace($,"$&/")+"/")+w)),N.push(U)),1;if(he=0,H=H===""?".":H+":",M(w))for(var oe=0;oe<w.length;oe++){X=w[oe];var ye=H+K(X,oe);he+=_(X,N,B,ye,U)}else if(ye=E(w),typeof ye=="function")for(w=ye.call(w),oe=0;!(X=w.next()).done;)X=X.value,ye=H+K(X,oe++),he+=_(X,N,B,ye,U);else if(X==="object")throw N=String(w),Error("Objects are not valid as a React child (found: "+(N==="[object Object]"?"object with keys {"+Object.keys(w).join(", ")+"}":N)+"). If you meant to render a collection of children, use an array instead.");return he}function xe(w,N,B){if(w==null)return w;var H=[],U=0;return _(w,H,"","",function(X){return N.call(B,X,U++)}),H}function je(w){if(w._status===-1){var N=w._result;N=N(),N.then(function(B){(w._status===0||w._status===-1)&&(w._status=1,w._result=B)},function(B){(w._status===0||w._status===-1)&&(w._status=2,w._result=B)}),w._status===-1&&(w._status=0,w._result=N)}if(w._status===1)return w._result.default;throw w._result}var re={current:null},fe={transition:null},ie={ReactCurrentDispatcher:re,ReactCurrentBatchConfig:fe,ReactCurrentOwner:G};function P(){throw Error("act(...) is not supported in production builds of React.")}return ut.Children={map:xe,forEach:function(w,N,B){xe(w,function(){N.apply(this,arguments)},B)},count:function(w){var N=0;return xe(w,function(){N++}),N},toArray:function(w){return xe(w,function(N){return N})||[]},only:function(w){if(!ee(w))throw Error("React.Children.only expected to receive a single React element child.");return w}},ut.Component=D,ut.Fragment=o,ut.Profiler=p,ut.PureComponent=O,ut.StrictMode=v,ut.Suspense=g,ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ie,ut.act=P,ut.cloneElement=function(w,N,B){if(w==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+w+".");var H=C({},w.props),U=w.key,X=w.ref,he=w._owner;if(N!=null){if(N.ref!==void 0&&(X=N.ref,he=G.current),N.key!==void 0&&(U=""+N.key),w.type&&w.type.defaultProps)var oe=w.type.defaultProps;for(ye in N)R.call(N,ye)&&!Q.hasOwnProperty(ye)&&(H[ye]=N[ye]===void 0&&oe!==void 0?oe[ye]:N[ye])}var ye=arguments.length-2;if(ye===1)H.children=B;else if(1<ye){oe=Array(ye);for(var Ie=0;Ie<ye;Ie++)oe[Ie]=arguments[Ie+2];H.children=oe}return{$$typeof:a,type:w.type,key:U,ref:X,props:H,_owner:he}},ut.createContext=function(w){return w={$$typeof:f,_currentValue:w,_currentValue2:w,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},w.Provider={$$typeof:c,_context:w},w.Consumer=w},ut.createElement=ne,ut.createFactory=function(w){var N=ne.bind(null,w);return N.type=w,N},ut.createRef=function(){return{current:null}},ut.forwardRef=function(w){return{$$typeof:x,render:w}},ut.isValidElement=ee,ut.lazy=function(w){return{$$typeof:T,_payload:{_status:-1,_result:w},_init:je}},ut.memo=function(w,N){return{$$typeof:m,type:w,compare:N===void 0?null:N}},ut.startTransition=function(w){var N=fe.transition;fe.transition={};try{w()}finally{fe.transition=N}},ut.unstable_act=P,ut.useCallback=function(w,N){return re.current.useCallback(w,N)},ut.useContext=function(w){return re.current.useContext(w)},ut.useDebugValue=function(){},ut.useDeferredValue=function(w){return re.current.useDeferredValue(w)},ut.useEffect=function(w,N){return re.current.useEffect(w,N)},ut.useId=function(){return re.current.useId()},ut.useImperativeHandle=function(w,N,B){return re.current.useImperativeHandle(w,N,B)},ut.useInsertionEffect=function(w,N){return re.current.useInsertionEffect(w,N)},ut.useLayoutEffect=function(w,N){return re.current.useLayoutEffect(w,N)},ut.useMemo=function(w,N){return re.current.useMemo(w,N)},ut.useReducer=function(w,N,B){return re.current.useReducer(w,N,B)},ut.useRef=function(w){return re.current.useRef(w)},ut.useState=function(w){return re.current.useState(w)},ut.useSyncExternalStore=function(w,N,B){return re.current.useSyncExternalStore(w,N,B)},ut.useTransition=function(){return re.current.useTransition()},ut.version="18.3.1",ut}var zd;function Qa(){return zd||(zd=1,rc.exports=zh()),rc.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fd;function Fh(){if(Fd)return Ua;Fd=1;var a=Qa(),d=Symbol.for("react.element"),o=Symbol.for("react.fragment"),v=Object.prototype.hasOwnProperty,p=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function f(x,g,m){var T,S={},E=null,k=null;m!==void 0&&(E=""+m),g.key!==void 0&&(E=""+g.key),g.ref!==void 0&&(k=g.ref);for(T in g)v.call(g,T)&&!c.hasOwnProperty(T)&&(S[T]=g[T]);if(x&&x.defaultProps)for(T in g=x.defaultProps,g)S[T]===void 0&&(S[T]=g[T]);return{$$typeof:d,type:x,key:E,ref:k,props:S,_owner:p.current}}return Ua.Fragment=o,Ua.jsx=f,Ua.jsxs=f,Ua}var Pd;function Ph(){return Pd||(Pd=1,tc.exports=Fh()),tc.exports}var r=Ph(),L=Qa();const $a=Wa(L);var so={},nc={exports:{}},yr={},sc={exports:{}},ac={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ld;function Lh(){return Ld||(Ld=1,function(a){function d(fe,ie){var P=fe.length;fe.push(ie);e:for(;0<P;){var w=P-1>>>1,N=fe[w];if(0<p(N,ie))fe[w]=ie,fe[P]=N,P=w;else break e}}function o(fe){return fe.length===0?null:fe[0]}function v(fe){if(fe.length===0)return null;var ie=fe[0],P=fe.pop();if(P!==ie){fe[0]=P;e:for(var w=0,N=fe.length,B=N>>>1;w<B;){var H=2*(w+1)-1,U=fe[H],X=H+1,he=fe[X];if(0>p(U,P))X<N&&0>p(he,U)?(fe[w]=he,fe[X]=P,w=X):(fe[w]=U,fe[H]=P,w=H);else if(X<N&&0>p(he,P))fe[w]=he,fe[X]=P,w=X;else break e}}return ie}function p(fe,ie){var P=fe.sortIndex-ie.sortIndex;return P!==0?P:fe.id-ie.id}if(typeof performance=="object"&&typeof performance.now=="function"){var c=performance;a.unstable_now=function(){return c.now()}}else{var f=Date,x=f.now();a.unstable_now=function(){return f.now()-x}}var g=[],m=[],T=1,S=null,E=3,k=!1,C=!1,b=!1,D=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,O=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function z(fe){for(var ie=o(m);ie!==null;){if(ie.callback===null)v(m);else if(ie.startTime<=fe)v(m),ie.sortIndex=ie.expirationTime,d(g,ie);else break;ie=o(m)}}function M(fe){if(b=!1,z(fe),!C)if(o(g)!==null)C=!0,je(R);else{var ie=o(m);ie!==null&&re(M,ie.startTime-fe)}}function R(fe,ie){C=!1,b&&(b=!1,I(ne),ne=-1),k=!0;var P=E;try{for(z(ie),S=o(g);S!==null&&(!(S.expirationTime>ie)||fe&&!ae());){var w=S.callback;if(typeof w=="function"){S.callback=null,E=S.priorityLevel;var N=w(S.expirationTime<=ie);ie=a.unstable_now(),typeof N=="function"?S.callback=N:S===o(g)&&v(g),z(ie)}else v(g);S=o(g)}if(S!==null)var B=!0;else{var H=o(m);H!==null&&re(M,H.startTime-ie),B=!1}return B}finally{S=null,E=P,k=!1}}var G=!1,Q=null,ne=-1,V=5,ee=-1;function ae(){return!(a.unstable_now()-ee<V)}function $(){if(Q!==null){var fe=a.unstable_now();ee=fe;var ie=!0;try{ie=Q(!0,fe)}finally{ie?K():(G=!1,Q=null)}}else G=!1}var K;if(typeof O=="function")K=function(){O($)};else if(typeof MessageChannel<"u"){var _=new MessageChannel,xe=_.port2;_.port1.onmessage=$,K=function(){xe.postMessage(null)}}else K=function(){D($,0)};function je(fe){Q=fe,G||(G=!0,K())}function re(fe,ie){ne=D(function(){fe(a.unstable_now())},ie)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(fe){fe.callback=null},a.unstable_continueExecution=function(){C||k||(C=!0,je(R))},a.unstable_forceFrameRate=function(fe){0>fe||125<fe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<fe?Math.floor(1e3/fe):5},a.unstable_getCurrentPriorityLevel=function(){return E},a.unstable_getFirstCallbackNode=function(){return o(g)},a.unstable_next=function(fe){switch(E){case 1:case 2:case 3:var ie=3;break;default:ie=E}var P=E;E=ie;try{return fe()}finally{E=P}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(fe,ie){switch(fe){case 1:case 2:case 3:case 4:case 5:break;default:fe=3}var P=E;E=fe;try{return ie()}finally{E=P}},a.unstable_scheduleCallback=function(fe,ie,P){var w=a.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?w+P:w):P=w,fe){case 1:var N=-1;break;case 2:N=250;break;case 5:N=1073741823;break;case 4:N=1e4;break;default:N=5e3}return N=P+N,fe={id:T++,callback:ie,priorityLevel:fe,startTime:P,expirationTime:N,sortIndex:-1},P>w?(fe.sortIndex=P,d(m,fe),o(g)===null&&fe===o(m)&&(b?(I(ne),ne=-1):b=!0,re(M,P-w))):(fe.sortIndex=N,d(g,fe),C||k||(C=!0,je(R))),fe},a.unstable_shouldYield=ae,a.unstable_wrapCallback=function(fe){var ie=E;return function(){var P=E;E=ie;try{return fe.apply(this,arguments)}finally{E=P}}}}(ac)),ac}var Ud;function Uh(){return Ud||(Ud=1,sc.exports=Lh()),sc.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bd;function Bh(){if(Bd)return yr;Bd=1;var a=Qa(),d=Uh();function o(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var v=new Set,p={};function c(e,t){f(e,t),f(e+"Capture",t)}function f(e,t){for(p[e]=t,e=0;e<t.length;e++)v.add(t[e])}var x=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),g=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,T={},S={};function E(e){return g.call(S,e)?!0:g.call(T,e)?!1:m.test(e)?S[e]=!0:(T[e]=!0,!1)}function k(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function C(e,t,n,s){if(t===null||typeof t>"u"||k(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function b(e,t,n,s,l,h,A){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=h,this.removeEmptyString=A}var D={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){D[e]=new b(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];D[t]=new b(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){D[e]=new b(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){D[e]=new b(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){D[e]=new b(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){D[e]=new b(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){D[e]=new b(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){D[e]=new b(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){D[e]=new b(e,5,!1,e.toLowerCase(),null,!1,!1)});var I=/[\-:]([a-z])/g;function O(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(I,O);D[t]=new b(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(I,O);D[t]=new b(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(I,O);D[t]=new b(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){D[e]=new b(e,1,!1,e.toLowerCase(),null,!1,!1)}),D.xlinkHref=new b("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){D[e]=new b(e,1,!1,e.toLowerCase(),null,!0,!0)});function z(e,t,n,s){var l=D.hasOwnProperty(t)?D[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(C(t,n,l,s)&&(n=null),s||l===null?E(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):l.mustUseProperty?e[l.propertyName]=n===null?l.type===3?!1:"":n:(t=l.attributeName,s=l.attributeNamespace,n===null?e.removeAttribute(t):(l=l.type,n=l===3||l===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var M=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),G=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),ne=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),ee=Symbol.for("react.provider"),ae=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),K=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),xe=Symbol.for("react.memo"),je=Symbol.for("react.lazy"),re=Symbol.for("react.offscreen"),fe=Symbol.iterator;function ie(e){return e===null||typeof e!="object"?null:(e=fe&&e[fe]||e["@@iterator"],typeof e=="function"?e:null)}var P=Object.assign,w;function N(e){if(w===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);w=t&&t[1]||""}return`
`+w+e}var B=!1;function H(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(ve){var s=ve}Reflect.construct(e,[],t)}else{try{t.call()}catch(ve){s=ve}e.call(t.prototype)}else{try{throw Error()}catch(ve){s=ve}e()}}catch(ve){if(ve&&s&&typeof ve.stack=="string"){for(var l=ve.stack.split(`
`),h=s.stack.split(`
`),A=l.length-1,J=h.length-1;1<=A&&0<=J&&l[A]!==h[J];)J--;for(;1<=A&&0<=J;A--,J--)if(l[A]!==h[J]){if(A!==1||J!==1)do if(A--,J--,0>J||l[A]!==h[J]){var te=`
`+l[A].replace(" at new "," at ");return e.displayName&&te.includes("<anonymous>")&&(te=te.replace("<anonymous>",e.displayName)),te}while(1<=A&&0<=J);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?N(e):""}function U(e){switch(e.tag){case 5:return N(e.type);case 16:return N("Lazy");case 13:return N("Suspense");case 19:return N("SuspenseList");case 0:case 2:case 15:return e=H(e.type,!1),e;case 11:return e=H(e.type.render,!1),e;case 1:return e=H(e.type,!0),e;default:return""}}function X(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case G:return"Portal";case V:return"Profiler";case ne:return"StrictMode";case K:return"Suspense";case _:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ae:return(e.displayName||"Context")+".Consumer";case ee:return(e._context.displayName||"Context")+".Provider";case $:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case xe:return t=e.displayName||null,t!==null?t:X(e.type)||"Memo";case je:t=e._payload,e=e._init;try{return X(e(t))}catch{}}return null}function he(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return X(t);case 8:return t===ne?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function oe(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Ie(e){var t=ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var l=n.get,h=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(A){s=""+A,h.call(this,A)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(A){s=""+A},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ze(e){e._valueTracker||(e._valueTracker=Ie(e))}function qe(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=ye(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Ee(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function y(e,t){var n=t.checked;return P({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function de(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=oe(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ue(e,t){t=t.checked,t!=null&&z(e,"checked",t,!1)}function W(e,t){ue(e,t);var n=oe(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Y(e,t.type,n):t.hasOwnProperty("defaultValue")&&Y(e,t.type,oe(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function q(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Y(e,t,n){(t!=="number"||Ee(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var be=Array.isArray;function Ne(e,t,n,s){if(e=e.options,t){t={};for(var l=0;l<n.length;l++)t["$"+n[l]]=!0;for(n=0;n<e.length;n++)l=t.hasOwnProperty("$"+e[n].value),e[n].selected!==l&&(e[n].selected=l),l&&s&&(e[n].defaultSelected=!0)}else{for(n=""+oe(n),t=null,l=0;l<e.length;l++){if(e[l].value===n){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function ce(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(o(91));return P({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Ae(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(o(92));if(be(n)){if(1<n.length)throw Error(o(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:oe(n)}}function Fe(e,t){var n=oe(t.value),s=oe(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function Me(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Ue(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function st(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Ue(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ye,ft=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ye=Ye||document.createElement("div"),Ye.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ye.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Ct(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ur=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(e){ur.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),bt[t]=bt[e]})});function ht(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||bt.hasOwnProperty(e)&&bt[e]?(""+t).trim():t+"px"}function Cr(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,l=ht(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,l):e[n]=l}}var Dr=P({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vt(e,t){if(t){if(Dr[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(o(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(o(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(o(61))}if(t.style!=null&&typeof t.style!="object")throw Error(o(62))}}function ir(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rt=null;function Yr(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Pr=null,Pe=null,Le=null;function Ke(e){if(e=Na(e)){if(typeof Pr!="function")throw Error(o(280));var t=e.stateNode;t&&(t=yi(t),Pr(e.stateNode,e.type,t))}}function et(e){Pe?Le?Le.push(e):Le=[e]:Pe=e}function ot(){if(Pe){var e=Pe,t=Le;if(Le=Pe=null,Ke(e),t)for(e=0;e<t.length;e++)Ke(t[e])}}function _e(e,t){return e(t)}function Nt(){}var xt=!1;function kt(e,t,n){if(xt)return e(t,n);xt=!0;try{return _e(e,t,n)}finally{xt=!1,(Pe!==null||Le!==null)&&(Nt(),ot())}}function jt(e,t){var n=e.stateNode;if(n===null)return null;var s=yi(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(o(231,t,typeof n));return n}var Dt=!1;if(x)try{var Xt={};Object.defineProperty(Xt,"passive",{get:function(){Dt=!0}}),window.addEventListener("test",Xt,Xt),window.removeEventListener("test",Xt,Xt)}catch{Dt=!1}function Kr(e,t,n,s,l,h,A,J,te){var ve=Array.prototype.slice.call(arguments,3);try{t.apply(n,ve)}catch(Te){this.onError(Te)}}var $t=!1,Yn=null,Lr=!1,Ts=null,Va={onError:function(e){$t=!0,Yn=e}};function vo(e,t,n,s,l,h,A,J,te){$t=!1,Yn=null,Kr.apply(Va,arguments)}function Jt(e,t,n,s,l,h,A,J,te){if(vo.apply(this,arguments),$t){if($t){var ve=Yn;$t=!1,Yn=null}else throw Error(o(198));Lr||(Lr=!0,Ts=ve)}}function Zr(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Ja(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Is(e){if(Zr(e)!==e)throw Error(o(188))}function Ya(e){var t=e.alternate;if(!t){if(t=Zr(e),t===null)throw Error(o(188));return t!==e?null:e}for(var n=e,s=t;;){var l=n.return;if(l===null)break;var h=l.alternate;if(h===null){if(s=l.return,s!==null){n=s;continue}break}if(l.child===h.child){for(h=l.child;h;){if(h===n)return Is(l),e;if(h===s)return Is(l),t;h=h.sibling}throw Error(o(188))}if(n.return!==s.return)n=l,s=h;else{for(var A=!1,J=l.child;J;){if(J===n){A=!0,n=l,s=h;break}if(J===s){A=!0,s=l,n=h;break}J=J.sibling}if(!A){for(J=h.child;J;){if(J===n){A=!0,n=h,s=l;break}if(J===s){A=!0,s=h,n=l;break}J=J.sibling}if(!A)throw Error(o(189))}}if(n.alternate!==s)throw Error(o(190))}if(n.tag!==3)throw Error(o(188));return n.stateNode.current===n?e:t}function Kn(e){return e=Ya(e),e!==null?wr(e):null}function wr(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=wr(e);if(t!==null)return t;e=e.sibling}return null}var Zn=d.unstable_scheduleCallback,As=d.unstable_cancelCallback,Ka=d.unstable_shouldYield,Za=d.unstable_requestPaint,Tt=d.unstable_now,Xn=d.unstable_getCurrentPriorityLevel,Ms=d.unstable_ImmediatePriority,es=d.unstable_UserBlockingPriority,ts=d.unstable_NormalPriority,Sn=d.unstable_LowPriority,Os=d.unstable_IdlePriority,rs=null,br=null;function Xa(e){if(br&&typeof br.onCommitFiberRoot=="function")try{br.onCommitFiberRoot(rs,e,void 0,(e.current.flags&128)===128)}catch{}}var kr=Math.clz32?Math.clz32:ns,ei=Math.log,ti=Math.LN2;function ns(e){return e>>>=0,e===0?32:31-(ei(e)/ti|0)|0}var ss=64,yt=4194304;function Ur(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Nn(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,l=e.suspendedLanes,h=e.pingedLanes,A=n&268435455;if(A!==0){var J=A&~l;J!==0?s=Ur(J):(h&=A,h!==0&&(s=Ur(h)))}else A=n&~l,A!==0?s=Ur(A):h!==0&&(s=Ur(h));if(s===0)return 0;if(t!==0&&t!==s&&(t&l)===0&&(l=s&-s,h=t&-t,l>=h||l===16&&(h&4194240)!==0))return t;if((s&4)!==0&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-kr(t),l=1<<n,s|=e[n],t&=~l;return s}function dn(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Rs(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,h=e.pendingLanes;0<h;){var A=31-kr(h),J=1<<A,te=l[A];te===-1?((J&n)===0||(J&s)!==0)&&(l[A]=dn(J,t)):te<=t&&(e.expiredLanes|=J),h&=~J}}function _n(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function as(){var e=ss;return ss<<=1,(ss&4194240)===0&&(ss=64),e}function fn(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function is(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-kr(t),e[t]=n}function wo(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var l=31-kr(n),h=1<<l;t[l]=0,s[l]=-1,e[l]=-1,n&=~h}}function zs(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-kr(n),l=1<<s;l&t|e[s]&t&&(e[s]|=t),n&=~l}}var mt=0;function ua(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var Fs,os,ri,ls,cs,Br=!1,En=[],Ht=null,or=null,jr=null,Cn=new Map,us=new Map,We=[],ni="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ds(e,t){switch(e){case"focusin":case"focusout":Ht=null;break;case"dragenter":case"dragleave":or=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Cn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":us.delete(t.pointerId)}}function Xr(e,t,n,s,l,h){return e===null||e.nativeEvent!==h?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:h,targetContainers:[l]},t!==null&&(t=Na(t),t!==null&&os(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function si(e,t,n,s,l){switch(t){case"focusin":return Ht=Xr(Ht,e,t,n,s,l),!0;case"dragenter":return or=Xr(or,e,t,n,s,l),!0;case"mouseover":return jr=Xr(jr,e,t,n,s,l),!0;case"pointerover":var h=l.pointerId;return Cn.set(h,Xr(Cn.get(h)||null,e,t,n,s,l)),!0;case"gotpointercapture":return h=l.pointerId,us.set(h,Xr(us.get(h)||null,e,t,n,s,l)),!0}return!1}function Dn(e){var t=gs(e.target);if(t!==null){var n=Zr(t);if(n!==null){if(t=n.tag,t===13){if(t=Ja(n),t!==null){e.blockedOn=t,cs(e.priority,function(){ri(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function en(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=tt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);rt=s,n.target.dispatchEvent(s),rt=null}else return t=Na(n),t!==null&&os(t),e.blockedOn=n,!1;t.shift()}return!0}function qr(e,t,n){en(e)&&n.delete(t)}function Ps(){Br=!1,Ht!==null&&en(Ht)&&(Ht=null),or!==null&&en(or)&&(or=null),jr!==null&&en(jr)&&(jr=null),Cn.forEach(qr),us.forEach(qr)}function Tn(e,t){e.blockedOn===t&&(e.blockedOn=null,Br||(Br=!0,d.unstable_scheduleCallback(d.unstable_NormalPriority,Ps)))}function i(e){function t(l){return Tn(l,e)}if(0<En.length){Tn(En[0],e);for(var n=1;n<En.length;n++){var s=En[n];s.blockedOn===e&&(s.blockedOn=null)}}for(Ht!==null&&Tn(Ht,e),or!==null&&Tn(or,e),jr!==null&&Tn(jr,e),Cn.forEach(t),us.forEach(t),n=0;n<We.length;n++)s=We[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<We.length&&(n=We[0],n.blockedOn===null);)Dn(n),n.blockedOn===null&&We.shift()}var u=M.ReactCurrentBatchConfig,j=!0;function F(e,t,n,s){var l=mt,h=u.transition;u.transition=null;try{mt=1,we(e,t,n,s)}finally{mt=l,u.transition=h}}function Z(e,t,n,s){var l=mt,h=u.transition;u.transition=null;try{mt=4,we(e,t,n,s)}finally{mt=l,u.transition=h}}function we(e,t,n,s){if(j){var l=tt(e,t,n,s);if(l===null)Wo(e,t,s,Se,n),ds(e,s);else if(si(l,e,t,n,s))s.stopPropagation();else if(ds(e,s),t&4&&-1<ni.indexOf(e)){for(;l!==null;){var h=Na(l);if(h!==null&&Fs(h),h=tt(e,t,n,s),h===null&&Wo(e,t,s,Se,n),h===l)break;l=h}l!==null&&s.stopPropagation()}else Wo(e,t,s,null,n)}}var Se=null;function tt(e,t,n,s){if(Se=null,e=Yr(s),e=gs(e),e!==null)if(t=Zr(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Ja(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Se=e,null}function dt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Xn()){case Ms:return 1;case es:return 4;case ts:case Sn:return 16;case Os:return 536870912;default:return 16}default:return 16}}var nt=null,It=null,Mt=null;function da(){if(Mt)return Mt;var e,t=It,n=t.length,s,l="value"in nt?nt.value:nt.textContent,h=l.length;for(e=0;e<n&&t[e]===l[e];e++);var A=n-e;for(s=1;s<=A&&t[n-s]===l[h-s];s++);return Mt=l.slice(e,1<s?1-s:void 0)}function Ls(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function fs(){return!0}function ai(){return!1}function er(e){function t(n,s,l,h,A){this._reactName=n,this._targetInst=l,this.type=s,this.nativeEvent=h,this.target=A,this.currentTarget=null;for(var J in e)e.hasOwnProperty(J)&&(n=e[J],this[J]=n?n(h):h[J]);return this.isDefaultPrevented=(h.defaultPrevented!=null?h.defaultPrevented:h.returnValue===!1)?fs:ai,this.isPropagationStopped=ai,this}return P(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=fs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=fs)},persist:function(){},isPersistent:fs}),t}var In={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fa=er(In),hs=P({},In,{view:0,detail:0}),bo=er(hs),ha,ma,ms,Us=P({},hs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bs,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ms&&(ms&&e.type==="mousemove"?(ha=e.screenX-ms.screenX,ma=e.screenY-ms.screenY):ma=ha=0,ms=e),ha)},movementY:function(e){return"movementY"in e?e.movementY:ma}}),pa=er(Us),ko=P({},Us,{dataTransfer:0}),jo=er(ko),So=P({},hs,{relatedTarget:0}),ga=er(So),No=P({},In,{animationName:0,elapsedTime:0,pseudoElement:0}),_o=er(No),Eo=P({},In,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ii=er(Eo),Co=P({},In,{data:0}),oi=er(Co),Do={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},To={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Io={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ao(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Io[e])?!!t[e]:!1}function Bs(){return Ao}var Mo=P({},hs,{key:function(e){if(e.key){var t=Do[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Ls(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?To[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bs,charCode:function(e){return e.type==="keypress"?Ls(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ls(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Oo=er(Mo),Ro=P({},Us,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ps=er(Ro),li=P({},hs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bs}),ci=er(li),pe=P({},In,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ce=er(pe),Ve=P({},Us,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),at=er(Ve),lt=[9,13,27,32],vt=x&&"CompositionEvent"in window,Yt=null;x&&"documentMode"in document&&(Yt=document.documentMode);var dr=x&&"TextEvent"in window&&!Yt,tr=x&&(!vt||Yt&&8<Yt&&11>=Yt),fr=" ",qs=!1;function tn(e,t){switch(e){case"keyup":return lt.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function ui(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var $s=!1;function If(e,t){switch(e){case"compositionend":return ui(t);case"keypress":return t.which!==32?null:(qs=!0,fr);case"textInput":return e=t.data,e===fr&&qs?null:e;default:return null}}function Af(e,t){if($s)return e==="compositionend"||!vt&&tn(e,t)?(e=da(),Mt=It=nt=null,$s=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return tr&&t.locale!=="ko"?null:t.data;default:return null}}var Mf={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ac(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!Mf[e.type]:t==="textarea"}function Mc(e,t,n,s){et(s),t=pi(t,"onChange"),0<t.length&&(n=new fa("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var xa=null,ya=null;function Of(e){Kc(e,0)}function di(e){var t=Vs(e);if(qe(t))return e}function Rf(e,t){if(e==="change")return t}var Oc=!1;if(x){var zo;if(x){var Fo="oninput"in document;if(!Fo){var Rc=document.createElement("div");Rc.setAttribute("oninput","return;"),Fo=typeof Rc.oninput=="function"}zo=Fo}else zo=!1;Oc=zo&&(!document.documentMode||9<document.documentMode)}function zc(){xa&&(xa.detachEvent("onpropertychange",Fc),ya=xa=null)}function Fc(e){if(e.propertyName==="value"&&di(ya)){var t=[];Mc(t,ya,e,Yr(e)),kt(Of,t)}}function zf(e,t,n){e==="focusin"?(zc(),xa=t,ya=n,xa.attachEvent("onpropertychange",Fc)):e==="focusout"&&zc()}function Ff(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return di(ya)}function Pf(e,t){if(e==="click")return di(t)}function Lf(e,t){if(e==="input"||e==="change")return di(t)}function Uf(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var $r=typeof Object.is=="function"?Object.is:Uf;function va(e,t){if($r(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var l=n[s];if(!g.call(t,l)||!$r(e[l],t[l]))return!1}return!0}function Pc(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Lc(e,t){var n=Pc(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Pc(n)}}function Uc(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Uc(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Bc(){for(var e=window,t=Ee();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Ee(e.document)}return t}function Po(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Bf(e){var t=Bc(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Uc(n.ownerDocument.documentElement,n)){if(s!==null&&Po(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=n.textContent.length,h=Math.min(s.start,l);s=s.end===void 0?h:Math.min(s.end,l),!e.extend&&h>s&&(l=s,s=h,h=l),l=Lc(n,h);var A=Lc(n,s);l&&A&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==A.node||e.focusOffset!==A.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),h>s?(e.addRange(t),e.extend(A.node,A.offset)):(t.setEnd(A.node,A.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var qf=x&&"documentMode"in document&&11>=document.documentMode,Hs=null,Lo=null,wa=null,Uo=!1;function qc(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Uo||Hs==null||Hs!==Ee(s)||(s=Hs,"selectionStart"in s&&Po(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),wa&&va(wa,s)||(wa=s,s=pi(Lo,"onSelect"),0<s.length&&(t=new fa("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Hs)))}function fi(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ws={animationend:fi("Animation","AnimationEnd"),animationiteration:fi("Animation","AnimationIteration"),animationstart:fi("Animation","AnimationStart"),transitionend:fi("Transition","TransitionEnd")},Bo={},$c={};x&&($c=document.createElement("div").style,"AnimationEvent"in window||(delete Ws.animationend.animation,delete Ws.animationiteration.animation,delete Ws.animationstart.animation),"TransitionEvent"in window||delete Ws.transitionend.transition);function hi(e){if(Bo[e])return Bo[e];if(!Ws[e])return e;var t=Ws[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in $c)return Bo[e]=t[n];return e}var Hc=hi("animationend"),Wc=hi("animationiteration"),Qc=hi("animationstart"),Gc=hi("transitionend"),Vc=new Map,Jc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function An(e,t){Vc.set(e,t),c(t,[e])}for(var qo=0;qo<Jc.length;qo++){var $o=Jc[qo],$f=$o.toLowerCase(),Hf=$o[0].toUpperCase()+$o.slice(1);An($f,"on"+Hf)}An(Hc,"onAnimationEnd"),An(Wc,"onAnimationIteration"),An(Qc,"onAnimationStart"),An("dblclick","onDoubleClick"),An("focusin","onFocus"),An("focusout","onBlur"),An(Gc,"onTransitionEnd"),f("onMouseEnter",["mouseout","mouseover"]),f("onMouseLeave",["mouseout","mouseover"]),f("onPointerEnter",["pointerout","pointerover"]),f("onPointerLeave",["pointerout","pointerover"]),c("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),c("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),c("onBeforeInput",["compositionend","keypress","textInput","paste"]),c("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),c("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ba="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Wf=new Set("cancel close invalid load scroll toggle".split(" ").concat(ba));function Yc(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,Jt(s,t,void 0,e),e.currentTarget=null}function Kc(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],l=s.event;s=s.listeners;e:{var h=void 0;if(t)for(var A=s.length-1;0<=A;A--){var J=s[A],te=J.instance,ve=J.currentTarget;if(J=J.listener,te!==h&&l.isPropagationStopped())break e;Yc(l,J,ve),h=te}else for(A=0;A<s.length;A++){if(J=s[A],te=J.instance,ve=J.currentTarget,J=J.listener,te!==h&&l.isPropagationStopped())break e;Yc(l,J,ve),h=te}}}if(Lr)throw e=Ts,Lr=!1,Ts=null,e}function _t(e,t){var n=t[Ko];n===void 0&&(n=t[Ko]=new Set);var s=e+"__bubble";n.has(s)||(Zc(t,e,2,!1),n.add(s))}function Ho(e,t,n){var s=0;t&&(s|=4),Zc(n,e,s,t)}var mi="_reactListening"+Math.random().toString(36).slice(2);function ka(e){if(!e[mi]){e[mi]=!0,v.forEach(function(n){n!=="selectionchange"&&(Wf.has(n)||Ho(n,!1,e),Ho(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[mi]||(t[mi]=!0,Ho("selectionchange",!1,t))}}function Zc(e,t,n,s){switch(dt(t)){case 1:var l=F;break;case 4:l=Z;break;default:l=we}n=l.bind(null,t,n,e),l=void 0,!Dt||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,n,{capture:!0,passive:l}):e.addEventListener(t,n,!0):l!==void 0?e.addEventListener(t,n,{passive:l}):e.addEventListener(t,n,!1)}function Wo(e,t,n,s,l){var h=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var A=s.tag;if(A===3||A===4){var J=s.stateNode.containerInfo;if(J===l||J.nodeType===8&&J.parentNode===l)break;if(A===4)for(A=s.return;A!==null;){var te=A.tag;if((te===3||te===4)&&(te=A.stateNode.containerInfo,te===l||te.nodeType===8&&te.parentNode===l))return;A=A.return}for(;J!==null;){if(A=gs(J),A===null)return;if(te=A.tag,te===5||te===6){s=h=A;continue e}J=J.parentNode}}s=s.return}kt(function(){var ve=h,Te=Yr(n),Oe=[];e:{var De=Vc.get(e);if(De!==void 0){var Be=fa,He=e;switch(e){case"keypress":if(Ls(n)===0)break e;case"keydown":case"keyup":Be=Oo;break;case"focusin":He="focus",Be=ga;break;case"focusout":He="blur",Be=ga;break;case"beforeblur":case"afterblur":Be=ga;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Be=pa;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Be=jo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Be=ci;break;case Hc:case Wc:case Qc:Be=_o;break;case Gc:Be=Ce;break;case"scroll":Be=bo;break;case"wheel":Be=at;break;case"copy":case"cut":case"paste":Be=ii;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Be=ps}var Qe=(t&4)!==0,Pt=!Qe&&e==="scroll",me=Qe?De!==null?De+"Capture":null:De;Qe=[];for(var se=ve,ge;se!==null;){ge=se;var Re=ge.stateNode;if(ge.tag===5&&Re!==null&&(ge=Re,me!==null&&(Re=jt(se,me),Re!=null&&Qe.push(ja(se,Re,ge)))),Pt)break;se=se.return}0<Qe.length&&(De=new Be(De,He,null,n,Te),Oe.push({event:De,listeners:Qe}))}}if((t&7)===0){e:{if(De=e==="mouseover"||e==="pointerover",Be=e==="mouseout"||e==="pointerout",De&&n!==rt&&(He=n.relatedTarget||n.fromElement)&&(gs(He)||He[hn]))break e;if((Be||De)&&(De=Te.window===Te?Te:(De=Te.ownerDocument)?De.defaultView||De.parentWindow:window,Be?(He=n.relatedTarget||n.toElement,Be=ve,He=He?gs(He):null,He!==null&&(Pt=Zr(He),He!==Pt||He.tag!==5&&He.tag!==6)&&(He=null)):(Be=null,He=ve),Be!==He)){if(Qe=pa,Re="onMouseLeave",me="onMouseEnter",se="mouse",(e==="pointerout"||e==="pointerover")&&(Qe=ps,Re="onPointerLeave",me="onPointerEnter",se="pointer"),Pt=Be==null?De:Vs(Be),ge=He==null?De:Vs(He),De=new Qe(Re,se+"leave",Be,n,Te),De.target=Pt,De.relatedTarget=ge,Re=null,gs(Te)===ve&&(Qe=new Qe(me,se+"enter",He,n,Te),Qe.target=ge,Qe.relatedTarget=Pt,Re=Qe),Pt=Re,Be&&He)t:{for(Qe=Be,me=He,se=0,ge=Qe;ge;ge=Qs(ge))se++;for(ge=0,Re=me;Re;Re=Qs(Re))ge++;for(;0<se-ge;)Qe=Qs(Qe),se--;for(;0<ge-se;)me=Qs(me),ge--;for(;se--;){if(Qe===me||me!==null&&Qe===me.alternate)break t;Qe=Qs(Qe),me=Qs(me)}Qe=null}else Qe=null;Be!==null&&Xc(Oe,De,Be,Qe,!1),He!==null&&Pt!==null&&Xc(Oe,Pt,He,Qe,!0)}}e:{if(De=ve?Vs(ve):window,Be=De.nodeName&&De.nodeName.toLowerCase(),Be==="select"||Be==="input"&&De.type==="file")var Je=Rf;else if(Ac(De))if(Oc)Je=Lf;else{Je=Ff;var Ze=zf}else(Be=De.nodeName)&&Be.toLowerCase()==="input"&&(De.type==="checkbox"||De.type==="radio")&&(Je=Pf);if(Je&&(Je=Je(e,ve))){Mc(Oe,Je,n,Te);break e}Ze&&Ze(e,De,ve),e==="focusout"&&(Ze=De._wrapperState)&&Ze.controlled&&De.type==="number"&&Y(De,"number",De.value)}switch(Ze=ve?Vs(ve):window,e){case"focusin":(Ac(Ze)||Ze.contentEditable==="true")&&(Hs=Ze,Lo=ve,wa=null);break;case"focusout":wa=Lo=Hs=null;break;case"mousedown":Uo=!0;break;case"contextmenu":case"mouseup":case"dragend":Uo=!1,qc(Oe,n,Te);break;case"selectionchange":if(qf)break;case"keydown":case"keyup":qc(Oe,n,Te)}var Xe;if(vt)e:{switch(e){case"compositionstart":var it="onCompositionStart";break e;case"compositionend":it="onCompositionEnd";break e;case"compositionupdate":it="onCompositionUpdate";break e}it=void 0}else $s?tn(e,n)&&(it="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(it="onCompositionStart");it&&(tr&&n.locale!=="ko"&&($s||it!=="onCompositionStart"?it==="onCompositionEnd"&&$s&&(Xe=da()):(nt=Te,It="value"in nt?nt.value:nt.textContent,$s=!0)),Ze=pi(ve,it),0<Ze.length&&(it=new oi(it,e,null,n,Te),Oe.push({event:it,listeners:Ze}),Xe?it.data=Xe:(Xe=ui(n),Xe!==null&&(it.data=Xe)))),(Xe=dr?If(e,n):Af(e,n))&&(ve=pi(ve,"onBeforeInput"),0<ve.length&&(Te=new oi("onBeforeInput","beforeinput",null,n,Te),Oe.push({event:Te,listeners:ve}),Te.data=Xe))}Kc(Oe,t)})}function ja(e,t,n){return{instance:e,listener:t,currentTarget:n}}function pi(e,t){for(var n=t+"Capture",s=[];e!==null;){var l=e,h=l.stateNode;l.tag===5&&h!==null&&(l=h,h=jt(e,n),h!=null&&s.unshift(ja(e,h,l)),h=jt(e,t),h!=null&&s.push(ja(e,h,l))),e=e.return}return s}function Qs(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Xc(e,t,n,s,l){for(var h=t._reactName,A=[];n!==null&&n!==s;){var J=n,te=J.alternate,ve=J.stateNode;if(te!==null&&te===s)break;J.tag===5&&ve!==null&&(J=ve,l?(te=jt(n,h),te!=null&&A.unshift(ja(n,te,J))):l||(te=jt(n,h),te!=null&&A.push(ja(n,te,J)))),n=n.return}A.length!==0&&e.push({event:t,listeners:A})}var Qf=/\r\n?/g,Gf=/\u0000|\uFFFD/g;function eu(e){return(typeof e=="string"?e:""+e).replace(Qf,`
`).replace(Gf,"")}function gi(e,t,n){if(t=eu(t),eu(e)!==t&&n)throw Error(o(425))}function xi(){}var Qo=null,Go=null;function Vo(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Jo=typeof setTimeout=="function"?setTimeout:void 0,Vf=typeof clearTimeout=="function"?clearTimeout:void 0,tu=typeof Promise=="function"?Promise:void 0,Jf=typeof queueMicrotask=="function"?queueMicrotask:typeof tu<"u"?function(e){return tu.resolve(null).then(e).catch(Yf)}:Jo;function Yf(e){setTimeout(function(){throw e})}function Yo(e,t){var n=t,s=0;do{var l=n.nextSibling;if(e.removeChild(n),l&&l.nodeType===8)if(n=l.data,n==="/$"){if(s===0){e.removeChild(l),i(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=l}while(n);i(t)}function Mn(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function ru(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Gs=Math.random().toString(36).slice(2),rn="__reactFiber$"+Gs,Sa="__reactProps$"+Gs,hn="__reactContainer$"+Gs,Ko="__reactEvents$"+Gs,Kf="__reactListeners$"+Gs,Zf="__reactHandles$"+Gs;function gs(e){var t=e[rn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[hn]||n[rn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=ru(e);e!==null;){if(n=e[rn])return n;e=ru(e)}return t}e=n,n=e.parentNode}return null}function Na(e){return e=e[rn]||e[hn],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Vs(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(o(33))}function yi(e){return e[Sa]||null}var Zo=[],Js=-1;function On(e){return{current:e}}function Et(e){0>Js||(e.current=Zo[Js],Zo[Js]=null,Js--)}function St(e,t){Js++,Zo[Js]=e.current,e.current=t}var Rn={},rr=On(Rn),hr=On(!1),xs=Rn;function Ys(e,t){var n=e.type.contextTypes;if(!n)return Rn;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},h;for(h in n)l[h]=t[h];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function mr(e){return e=e.childContextTypes,e!=null}function vi(){Et(hr),Et(rr)}function nu(e,t,n){if(rr.current!==Rn)throw Error(o(168));St(rr,t),St(hr,n)}function su(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(o(108,he(e)||"Unknown",l));return P({},n,s)}function wi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Rn,xs=rr.current,St(rr,e),St(hr,hr.current),!0}function au(e,t,n){var s=e.stateNode;if(!s)throw Error(o(169));n?(e=su(e,t,xs),s.__reactInternalMemoizedMergedChildContext=e,Et(hr),Et(rr),St(rr,e)):Et(hr),St(hr,n)}var mn=null,bi=!1,Xo=!1;function iu(e){mn===null?mn=[e]:mn.push(e)}function Xf(e){bi=!0,iu(e)}function zn(){if(!Xo&&mn!==null){Xo=!0;var e=0,t=mt;try{var n=mn;for(mt=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}mn=null,bi=!1}catch(l){throw mn!==null&&(mn=mn.slice(e+1)),Zn(Ms,zn),l}finally{mt=t,Xo=!1}}return null}var Ks=[],Zs=0,ki=null,ji=0,Tr=[],Ir=0,ys=null,pn=1,gn="";function vs(e,t){Ks[Zs++]=ji,Ks[Zs++]=ki,ki=e,ji=t}function ou(e,t,n){Tr[Ir++]=pn,Tr[Ir++]=gn,Tr[Ir++]=ys,ys=e;var s=pn;e=gn;var l=32-kr(s)-1;s&=~(1<<l),n+=1;var h=32-kr(t)+l;if(30<h){var A=l-l%5;h=(s&(1<<A)-1).toString(32),s>>=A,l-=A,pn=1<<32-kr(t)+l|n<<l|s,gn=h+e}else pn=1<<h|n<<l|s,gn=e}function el(e){e.return!==null&&(vs(e,1),ou(e,1,0))}function tl(e){for(;e===ki;)ki=Ks[--Zs],Ks[Zs]=null,ji=Ks[--Zs],Ks[Zs]=null;for(;e===ys;)ys=Tr[--Ir],Tr[Ir]=null,gn=Tr[--Ir],Tr[Ir]=null,pn=Tr[--Ir],Tr[Ir]=null}var Sr=null,Nr=null,At=!1,Hr=null;function lu(e,t){var n=Rr(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function cu(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Sr=e,Nr=Mn(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Sr=e,Nr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=ys!==null?{id:pn,overflow:gn}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Rr(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Sr=e,Nr=null,!0):!1;default:return!1}}function rl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function nl(e){if(At){var t=Nr;if(t){var n=t;if(!cu(e,t)){if(rl(e))throw Error(o(418));t=Mn(n.nextSibling);var s=Sr;t&&cu(e,t)?lu(s,n):(e.flags=e.flags&-4097|2,At=!1,Sr=e)}}else{if(rl(e))throw Error(o(418));e.flags=e.flags&-4097|2,At=!1,Sr=e}}}function uu(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Sr=e}function Si(e){if(e!==Sr)return!1;if(!At)return uu(e),At=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Vo(e.type,e.memoizedProps)),t&&(t=Nr)){if(rl(e))throw du(),Error(o(418));for(;t;)lu(e,t),t=Mn(t.nextSibling)}if(uu(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(o(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Nr=Mn(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Nr=null}}else Nr=Sr?Mn(e.stateNode.nextSibling):null;return!0}function du(){for(var e=Nr;e;)e=Mn(e.nextSibling)}function Xs(){Nr=Sr=null,At=!1}function sl(e){Hr===null?Hr=[e]:Hr.push(e)}var eh=M.ReactCurrentBatchConfig;function _a(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(o(309));var s=n.stateNode}if(!s)throw Error(o(147,e));var l=s,h=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===h?t.ref:(t=function(A){var J=l.refs;A===null?delete J[h]:J[h]=A},t._stringRef=h,t)}if(typeof e!="string")throw Error(o(284));if(!n._owner)throw Error(o(290,e))}return e}function Ni(e,t){throw e=Object.prototype.toString.call(t),Error(o(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fu(e){var t=e._init;return t(e._payload)}function hu(e){function t(me,se){if(e){var ge=me.deletions;ge===null?(me.deletions=[se],me.flags|=16):ge.push(se)}}function n(me,se){if(!e)return null;for(;se!==null;)t(me,se),se=se.sibling;return null}function s(me,se){for(me=new Map;se!==null;)se.key!==null?me.set(se.key,se):me.set(se.index,se),se=se.sibling;return me}function l(me,se){return me=Hn(me,se),me.index=0,me.sibling=null,me}function h(me,se,ge){return me.index=ge,e?(ge=me.alternate,ge!==null?(ge=ge.index,ge<se?(me.flags|=2,se):ge):(me.flags|=2,se)):(me.flags|=1048576,se)}function A(me){return e&&me.alternate===null&&(me.flags|=2),me}function J(me,se,ge,Re){return se===null||se.tag!==6?(se=Jl(ge,me.mode,Re),se.return=me,se):(se=l(se,ge),se.return=me,se)}function te(me,se,ge,Re){var Je=ge.type;return Je===Q?Te(me,se,ge.props.children,Re,ge.key):se!==null&&(se.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===je&&fu(Je)===se.type)?(Re=l(se,ge.props),Re.ref=_a(me,se,ge),Re.return=me,Re):(Re=Ji(ge.type,ge.key,ge.props,null,me.mode,Re),Re.ref=_a(me,se,ge),Re.return=me,Re)}function ve(me,se,ge,Re){return se===null||se.tag!==4||se.stateNode.containerInfo!==ge.containerInfo||se.stateNode.implementation!==ge.implementation?(se=Yl(ge,me.mode,Re),se.return=me,se):(se=l(se,ge.children||[]),se.return=me,se)}function Te(me,se,ge,Re,Je){return se===null||se.tag!==7?(se=Es(ge,me.mode,Re,Je),se.return=me,se):(se=l(se,ge),se.return=me,se)}function Oe(me,se,ge){if(typeof se=="string"&&se!==""||typeof se=="number")return se=Jl(""+se,me.mode,ge),se.return=me,se;if(typeof se=="object"&&se!==null){switch(se.$$typeof){case R:return ge=Ji(se.type,se.key,se.props,null,me.mode,ge),ge.ref=_a(me,null,se),ge.return=me,ge;case G:return se=Yl(se,me.mode,ge),se.return=me,se;case je:var Re=se._init;return Oe(me,Re(se._payload),ge)}if(be(se)||ie(se))return se=Es(se,me.mode,ge,null),se.return=me,se;Ni(me,se)}return null}function De(me,se,ge,Re){var Je=se!==null?se.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number")return Je!==null?null:J(me,se,""+ge,Re);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:return ge.key===Je?te(me,se,ge,Re):null;case G:return ge.key===Je?ve(me,se,ge,Re):null;case je:return Je=ge._init,De(me,se,Je(ge._payload),Re)}if(be(ge)||ie(ge))return Je!==null?null:Te(me,se,ge,Re,null);Ni(me,ge)}return null}function Be(me,se,ge,Re,Je){if(typeof Re=="string"&&Re!==""||typeof Re=="number")return me=me.get(ge)||null,J(se,me,""+Re,Je);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case R:return me=me.get(Re.key===null?ge:Re.key)||null,te(se,me,Re,Je);case G:return me=me.get(Re.key===null?ge:Re.key)||null,ve(se,me,Re,Je);case je:var Ze=Re._init;return Be(me,se,ge,Ze(Re._payload),Je)}if(be(Re)||ie(Re))return me=me.get(ge)||null,Te(se,me,Re,Je,null);Ni(se,Re)}return null}function He(me,se,ge,Re){for(var Je=null,Ze=null,Xe=se,it=se=0,Gt=null;Xe!==null&&it<ge.length;it++){Xe.index>it?(Gt=Xe,Xe=null):Gt=Xe.sibling;var gt=De(me,Xe,ge[it],Re);if(gt===null){Xe===null&&(Xe=Gt);break}e&&Xe&&gt.alternate===null&&t(me,Xe),se=h(gt,se,it),Ze===null?Je=gt:Ze.sibling=gt,Ze=gt,Xe=Gt}if(it===ge.length)return n(me,Xe),At&&vs(me,it),Je;if(Xe===null){for(;it<ge.length;it++)Xe=Oe(me,ge[it],Re),Xe!==null&&(se=h(Xe,se,it),Ze===null?Je=Xe:Ze.sibling=Xe,Ze=Xe);return At&&vs(me,it),Je}for(Xe=s(me,Xe);it<ge.length;it++)Gt=Be(Xe,me,it,ge[it],Re),Gt!==null&&(e&&Gt.alternate!==null&&Xe.delete(Gt.key===null?it:Gt.key),se=h(Gt,se,it),Ze===null?Je=Gt:Ze.sibling=Gt,Ze=Gt);return e&&Xe.forEach(function(Wn){return t(me,Wn)}),At&&vs(me,it),Je}function Qe(me,se,ge,Re){var Je=ie(ge);if(typeof Je!="function")throw Error(o(150));if(ge=Je.call(ge),ge==null)throw Error(o(151));for(var Ze=Je=null,Xe=se,it=se=0,Gt=null,gt=ge.next();Xe!==null&&!gt.done;it++,gt=ge.next()){Xe.index>it?(Gt=Xe,Xe=null):Gt=Xe.sibling;var Wn=De(me,Xe,gt.value,Re);if(Wn===null){Xe===null&&(Xe=Gt);break}e&&Xe&&Wn.alternate===null&&t(me,Xe),se=h(Wn,se,it),Ze===null?Je=Wn:Ze.sibling=Wn,Ze=Wn,Xe=Gt}if(gt.done)return n(me,Xe),At&&vs(me,it),Je;if(Xe===null){for(;!gt.done;it++,gt=ge.next())gt=Oe(me,gt.value,Re),gt!==null&&(se=h(gt,se,it),Ze===null?Je=gt:Ze.sibling=gt,Ze=gt);return At&&vs(me,it),Je}for(Xe=s(me,Xe);!gt.done;it++,gt=ge.next())gt=Be(Xe,me,it,gt.value,Re),gt!==null&&(e&&gt.alternate!==null&&Xe.delete(gt.key===null?it:gt.key),se=h(gt,se,it),Ze===null?Je=gt:Ze.sibling=gt,Ze=gt);return e&&Xe.forEach(function(Mh){return t(me,Mh)}),At&&vs(me,it),Je}function Pt(me,se,ge,Re){if(typeof ge=="object"&&ge!==null&&ge.type===Q&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case R:e:{for(var Je=ge.key,Ze=se;Ze!==null;){if(Ze.key===Je){if(Je=ge.type,Je===Q){if(Ze.tag===7){n(me,Ze.sibling),se=l(Ze,ge.props.children),se.return=me,me=se;break e}}else if(Ze.elementType===Je||typeof Je=="object"&&Je!==null&&Je.$$typeof===je&&fu(Je)===Ze.type){n(me,Ze.sibling),se=l(Ze,ge.props),se.ref=_a(me,Ze,ge),se.return=me,me=se;break e}n(me,Ze);break}else t(me,Ze);Ze=Ze.sibling}ge.type===Q?(se=Es(ge.props.children,me.mode,Re,ge.key),se.return=me,me=se):(Re=Ji(ge.type,ge.key,ge.props,null,me.mode,Re),Re.ref=_a(me,se,ge),Re.return=me,me=Re)}return A(me);case G:e:{for(Ze=ge.key;se!==null;){if(se.key===Ze)if(se.tag===4&&se.stateNode.containerInfo===ge.containerInfo&&se.stateNode.implementation===ge.implementation){n(me,se.sibling),se=l(se,ge.children||[]),se.return=me,me=se;break e}else{n(me,se);break}else t(me,se);se=se.sibling}se=Yl(ge,me.mode,Re),se.return=me,me=se}return A(me);case je:return Ze=ge._init,Pt(me,se,Ze(ge._payload),Re)}if(be(ge))return He(me,se,ge,Re);if(ie(ge))return Qe(me,se,ge,Re);Ni(me,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"?(ge=""+ge,se!==null&&se.tag===6?(n(me,se.sibling),se=l(se,ge),se.return=me,me=se):(n(me,se),se=Jl(ge,me.mode,Re),se.return=me,me=se),A(me)):n(me,se)}return Pt}var ea=hu(!0),mu=hu(!1),_i=On(null),Ei=null,ta=null,al=null;function il(){al=ta=Ei=null}function ol(e){var t=_i.current;Et(_i),e._currentValue=t}function ll(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function ra(e,t){Ei=e,al=ta=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(pr=!0),e.firstContext=null)}function Ar(e){var t=e._currentValue;if(al!==e)if(e={context:e,memoizedValue:t,next:null},ta===null){if(Ei===null)throw Error(o(308));ta=e,Ei.dependencies={lanes:0,firstContext:e}}else ta=ta.next=e;return t}var ws=null;function cl(e){ws===null?ws=[e]:ws.push(e)}function pu(e,t,n,s){var l=t.interleaved;return l===null?(n.next=n,cl(t)):(n.next=l.next,l.next=n),t.interleaved=n,xn(e,s)}function xn(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Fn=!1;function ul(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function gu(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yn(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Pn(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(pt&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,xn(e,n)}return l=s.interleaved,l===null?(t.next=t,cl(s)):(t.next=l.next,l.next=t),s.interleaved=t,xn(e,n)}function Ci(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zs(e,n)}}function xu(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var l=null,h=null;if(n=n.firstBaseUpdate,n!==null){do{var A={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};h===null?l=h=A:h=h.next=A,n=n.next}while(n!==null);h===null?l=h=t:h=h.next=t}else l=h=t;n={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:h,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Di(e,t,n,s){var l=e.updateQueue;Fn=!1;var h=l.firstBaseUpdate,A=l.lastBaseUpdate,J=l.shared.pending;if(J!==null){l.shared.pending=null;var te=J,ve=te.next;te.next=null,A===null?h=ve:A.next=ve,A=te;var Te=e.alternate;Te!==null&&(Te=Te.updateQueue,J=Te.lastBaseUpdate,J!==A&&(J===null?Te.firstBaseUpdate=ve:J.next=ve,Te.lastBaseUpdate=te))}if(h!==null){var Oe=l.baseState;A=0,Te=ve=te=null,J=h;do{var De=J.lane,Be=J.eventTime;if((s&De)===De){Te!==null&&(Te=Te.next={eventTime:Be,lane:0,tag:J.tag,payload:J.payload,callback:J.callback,next:null});e:{var He=e,Qe=J;switch(De=t,Be=n,Qe.tag){case 1:if(He=Qe.payload,typeof He=="function"){Oe=He.call(Be,Oe,De);break e}Oe=He;break e;case 3:He.flags=He.flags&-65537|128;case 0:if(He=Qe.payload,De=typeof He=="function"?He.call(Be,Oe,De):He,De==null)break e;Oe=P({},Oe,De);break e;case 2:Fn=!0}}J.callback!==null&&J.lane!==0&&(e.flags|=64,De=l.effects,De===null?l.effects=[J]:De.push(J))}else Be={eventTime:Be,lane:De,tag:J.tag,payload:J.payload,callback:J.callback,next:null},Te===null?(ve=Te=Be,te=Oe):Te=Te.next=Be,A|=De;if(J=J.next,J===null){if(J=l.shared.pending,J===null)break;De=J,J=De.next,De.next=null,l.lastBaseUpdate=De,l.shared.pending=null}}while(!0);if(Te===null&&(te=Oe),l.baseState=te,l.firstBaseUpdate=ve,l.lastBaseUpdate=Te,t=l.shared.interleaved,t!==null){l=t;do A|=l.lane,l=l.next;while(l!==t)}else h===null&&(l.shared.lanes=0);js|=A,e.lanes=A,e.memoizedState=Oe}}function yu(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=n,typeof l!="function")throw Error(o(191,l));l.call(s)}}}var Ea={},nn=On(Ea),Ca=On(Ea),Da=On(Ea);function bs(e){if(e===Ea)throw Error(o(174));return e}function dl(e,t){switch(St(Da,t),St(Ca,e),St(nn,Ea),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:st(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=st(t,e)}Et(nn),St(nn,t)}function na(){Et(nn),Et(Ca),Et(Da)}function vu(e){bs(Da.current);var t=bs(nn.current),n=st(t,e.type);t!==n&&(St(Ca,e),St(nn,n))}function fl(e){Ca.current===e&&(Et(nn),Et(Ca))}var Ot=On(0);function Ti(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var hl=[];function ml(){for(var e=0;e<hl.length;e++)hl[e]._workInProgressVersionPrimary=null;hl.length=0}var Ii=M.ReactCurrentDispatcher,pl=M.ReactCurrentBatchConfig,ks=0,Rt=null,Bt=null,Wt=null,Ai=!1,Ta=!1,Ia=0,th=0;function nr(){throw Error(o(321))}function gl(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!$r(e[n],t[n]))return!1;return!0}function xl(e,t,n,s,l,h){if(ks=h,Rt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ii.current=e===null||e.memoizedState===null?ah:ih,e=n(s,l),Ta){h=0;do{if(Ta=!1,Ia=0,25<=h)throw Error(o(301));h+=1,Wt=Bt=null,t.updateQueue=null,Ii.current=oh,e=n(s,l)}while(Ta)}if(Ii.current=Ri,t=Bt!==null&&Bt.next!==null,ks=0,Wt=Bt=Rt=null,Ai=!1,t)throw Error(o(300));return e}function yl(){var e=Ia!==0;return Ia=0,e}function sn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Wt===null?Rt.memoizedState=Wt=e:Wt=Wt.next=e,Wt}function Mr(){if(Bt===null){var e=Rt.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Wt===null?Rt.memoizedState:Wt.next;if(t!==null)Wt=t,Bt=e;else{if(e===null)throw Error(o(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Wt===null?Rt.memoizedState=Wt=e:Wt=Wt.next=e}return Wt}function Aa(e,t){return typeof t=="function"?t(e):t}function vl(e){var t=Mr(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var s=Bt,l=s.baseQueue,h=n.pending;if(h!==null){if(l!==null){var A=l.next;l.next=h.next,h.next=A}s.baseQueue=l=h,n.pending=null}if(l!==null){h=l.next,s=s.baseState;var J=A=null,te=null,ve=h;do{var Te=ve.lane;if((ks&Te)===Te)te!==null&&(te=te.next={lane:0,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),s=ve.hasEagerState?ve.eagerState:e(s,ve.action);else{var Oe={lane:Te,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null};te===null?(J=te=Oe,A=s):te=te.next=Oe,Rt.lanes|=Te,js|=Te}ve=ve.next}while(ve!==null&&ve!==h);te===null?A=s:te.next=J,$r(s,t.memoizedState)||(pr=!0),t.memoizedState=s,t.baseState=A,t.baseQueue=te,n.lastRenderedState=s}if(e=n.interleaved,e!==null){l=e;do h=l.lane,Rt.lanes|=h,js|=h,l=l.next;while(l!==e)}else l===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wl(e){var t=Mr(),n=t.queue;if(n===null)throw Error(o(311));n.lastRenderedReducer=e;var s=n.dispatch,l=n.pending,h=t.memoizedState;if(l!==null){n.pending=null;var A=l=l.next;do h=e(h,A.action),A=A.next;while(A!==l);$r(h,t.memoizedState)||(pr=!0),t.memoizedState=h,t.baseQueue===null&&(t.baseState=h),n.lastRenderedState=h}return[h,s]}function wu(){}function bu(e,t){var n=Rt,s=Mr(),l=t(),h=!$r(s.memoizedState,l);if(h&&(s.memoizedState=l,pr=!0),s=s.queue,bl(Su.bind(null,n,s,e),[e]),s.getSnapshot!==t||h||Wt!==null&&Wt.memoizedState.tag&1){if(n.flags|=2048,Ma(9,ju.bind(null,n,s,l,t),void 0,null),Qt===null)throw Error(o(349));(ks&30)!==0||ku(n,t,l)}return l}function ku(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ju(e,t,n,s){t.value=n,t.getSnapshot=s,Nu(t)&&_u(e)}function Su(e,t,n){return n(function(){Nu(t)&&_u(e)})}function Nu(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!$r(e,n)}catch{return!0}}function _u(e){var t=xn(e,1);t!==null&&Vr(t,e,1,-1)}function Eu(e){var t=sn();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Aa,lastRenderedState:e},t.queue=e,e=e.dispatch=sh.bind(null,Rt,e),[t.memoizedState,e]}function Ma(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=Rt.updateQueue,t===null?(t={lastEffect:null,stores:null},Rt.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function Cu(){return Mr().memoizedState}function Mi(e,t,n,s){var l=sn();Rt.flags|=e,l.memoizedState=Ma(1|t,n,void 0,s===void 0?null:s)}function Oi(e,t,n,s){var l=Mr();s=s===void 0?null:s;var h=void 0;if(Bt!==null){var A=Bt.memoizedState;if(h=A.destroy,s!==null&&gl(s,A.deps)){l.memoizedState=Ma(t,n,h,s);return}}Rt.flags|=e,l.memoizedState=Ma(1|t,n,h,s)}function Du(e,t){return Mi(8390656,8,e,t)}function bl(e,t){return Oi(2048,8,e,t)}function Tu(e,t){return Oi(4,2,e,t)}function Iu(e,t){return Oi(4,4,e,t)}function Au(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Mu(e,t,n){return n=n!=null?n.concat([e]):null,Oi(4,4,Au.bind(null,t,e),n)}function kl(){}function Ou(e,t){var n=Mr();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function Ru(e,t){var n=Mr();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&gl(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function zu(e,t,n){return(ks&21)===0?(e.baseState&&(e.baseState=!1,pr=!0),e.memoizedState=n):($r(n,t)||(n=as(),Rt.lanes|=n,js|=n,e.baseState=!0),t)}function rh(e,t){var n=mt;mt=n!==0&&4>n?n:4,e(!0);var s=pl.transition;pl.transition={};try{e(!1),t()}finally{mt=n,pl.transition=s}}function Fu(){return Mr().memoizedState}function nh(e,t,n){var s=qn(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Pu(e))Lu(t,n);else if(n=pu(e,t,n,s),n!==null){var l=cr();Vr(n,e,s,l),Uu(n,t,s)}}function sh(e,t,n){var s=qn(e),l={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Pu(e))Lu(t,l);else{var h=e.alternate;if(e.lanes===0&&(h===null||h.lanes===0)&&(h=t.lastRenderedReducer,h!==null))try{var A=t.lastRenderedState,J=h(A,n);if(l.hasEagerState=!0,l.eagerState=J,$r(J,A)){var te=t.interleaved;te===null?(l.next=l,cl(t)):(l.next=te.next,te.next=l),t.interleaved=l;return}}catch{}finally{}n=pu(e,t,l,s),n!==null&&(l=cr(),Vr(n,e,s,l),Uu(n,t,s))}}function Pu(e){var t=e.alternate;return e===Rt||t!==null&&t===Rt}function Lu(e,t){Ta=Ai=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Uu(e,t,n){if((n&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,zs(e,n)}}var Ri={readContext:Ar,useCallback:nr,useContext:nr,useEffect:nr,useImperativeHandle:nr,useInsertionEffect:nr,useLayoutEffect:nr,useMemo:nr,useReducer:nr,useRef:nr,useState:nr,useDebugValue:nr,useDeferredValue:nr,useTransition:nr,useMutableSource:nr,useSyncExternalStore:nr,useId:nr,unstable_isNewReconciler:!1},ah={readContext:Ar,useCallback:function(e,t){return sn().memoizedState=[e,t===void 0?null:t],e},useContext:Ar,useEffect:Du,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Mi(4194308,4,Au.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Mi(4194308,4,e,t)},useInsertionEffect:function(e,t){return Mi(4,2,e,t)},useMemo:function(e,t){var n=sn();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=sn();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=nh.bind(null,Rt,e),[s.memoizedState,e]},useRef:function(e){var t=sn();return e={current:e},t.memoizedState=e},useState:Eu,useDebugValue:kl,useDeferredValue:function(e){return sn().memoizedState=e},useTransition:function(){var e=Eu(!1),t=e[0];return e=rh.bind(null,e[1]),sn().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=Rt,l=sn();if(At){if(n===void 0)throw Error(o(407));n=n()}else{if(n=t(),Qt===null)throw Error(o(349));(ks&30)!==0||ku(s,t,n)}l.memoizedState=n;var h={value:n,getSnapshot:t};return l.queue=h,Du(Su.bind(null,s,h,e),[e]),s.flags|=2048,Ma(9,ju.bind(null,s,h,n,t),void 0,null),n},useId:function(){var e=sn(),t=Qt.identifierPrefix;if(At){var n=gn,s=pn;n=(s&~(1<<32-kr(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=Ia++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=th++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},ih={readContext:Ar,useCallback:Ou,useContext:Ar,useEffect:bl,useImperativeHandle:Mu,useInsertionEffect:Tu,useLayoutEffect:Iu,useMemo:Ru,useReducer:vl,useRef:Cu,useState:function(){return vl(Aa)},useDebugValue:kl,useDeferredValue:function(e){var t=Mr();return zu(t,Bt.memoizedState,e)},useTransition:function(){var e=vl(Aa)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:wu,useSyncExternalStore:bu,useId:Fu,unstable_isNewReconciler:!1},oh={readContext:Ar,useCallback:Ou,useContext:Ar,useEffect:bl,useImperativeHandle:Mu,useInsertionEffect:Tu,useLayoutEffect:Iu,useMemo:Ru,useReducer:wl,useRef:Cu,useState:function(){return wl(Aa)},useDebugValue:kl,useDeferredValue:function(e){var t=Mr();return Bt===null?t.memoizedState=e:zu(t,Bt.memoizedState,e)},useTransition:function(){var e=wl(Aa)[0],t=Mr().memoizedState;return[e,t]},useMutableSource:wu,useSyncExternalStore:bu,useId:Fu,unstable_isNewReconciler:!1};function Wr(e,t){if(e&&e.defaultProps){t=P({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function jl(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:P({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var zi={isMounted:function(e){return(e=e._reactInternals)?Zr(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=cr(),l=qn(e),h=yn(s,l);h.payload=t,n!=null&&(h.callback=n),t=Pn(e,h,l),t!==null&&(Vr(t,e,l,s),Ci(t,e,l))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=cr(),l=qn(e),h=yn(s,l);h.tag=1,h.payload=t,n!=null&&(h.callback=n),t=Pn(e,h,l),t!==null&&(Vr(t,e,l,s),Ci(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=cr(),s=qn(e),l=yn(n,s);l.tag=2,t!=null&&(l.callback=t),t=Pn(e,l,s),t!==null&&(Vr(t,e,s,n),Ci(t,e,s))}};function Bu(e,t,n,s,l,h,A){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,h,A):t.prototype&&t.prototype.isPureReactComponent?!va(n,s)||!va(l,h):!0}function qu(e,t,n){var s=!1,l=Rn,h=t.contextType;return typeof h=="object"&&h!==null?h=Ar(h):(l=mr(t)?xs:rr.current,s=t.contextTypes,h=(s=s!=null)?Ys(e,l):Rn),t=new t(n,h),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=zi,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=h),t}function $u(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&zi.enqueueReplaceState(t,t.state,null)}function Sl(e,t,n,s){var l=e.stateNode;l.props=n,l.state=e.memoizedState,l.refs={},ul(e);var h=t.contextType;typeof h=="object"&&h!==null?l.context=Ar(h):(h=mr(t)?xs:rr.current,l.context=Ys(e,h)),l.state=e.memoizedState,h=t.getDerivedStateFromProps,typeof h=="function"&&(jl(e,t,h,n),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&zi.enqueueReplaceState(l,l.state,null),Di(e,n,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function sa(e,t){try{var n="",s=t;do n+=U(s),s=s.return;while(s);var l=n}catch(h){l=`
Error generating stack: `+h.message+`
`+h.stack}return{value:e,source:t,stack:l,digest:null}}function Nl(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function _l(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var lh=typeof WeakMap=="function"?WeakMap:Map;function Hu(e,t,n){n=yn(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){$i||($i=!0,Bl=s),_l(e,t)},n}function Wu(e,t,n){n=yn(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;n.payload=function(){return s(l)},n.callback=function(){_l(e,t)}}var h=e.stateNode;return h!==null&&typeof h.componentDidCatch=="function"&&(n.callback=function(){_l(e,t),typeof s!="function"&&(Un===null?Un=new Set([this]):Un.add(this));var A=t.stack;this.componentDidCatch(t.value,{componentStack:A!==null?A:""})}),n}function Qu(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new lh;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(n)||(l.add(n),e=kh.bind(null,e,t,n),t.then(e,e))}function Gu(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vu(e,t,n,s,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=yn(-1,1),t.tag=2,Pn(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var ch=M.ReactCurrentOwner,pr=!1;function lr(e,t,n,s){t.child=e===null?mu(t,null,n,s):ea(t,e.child,n,s)}function Ju(e,t,n,s,l){n=n.render;var h=t.ref;return ra(t,l),s=xl(e,t,n,s,h,l),n=yl(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(At&&n&&el(t),t.flags|=1,lr(e,t,s,l),t.child)}function Yu(e,t,n,s,l){if(e===null){var h=n.type;return typeof h=="function"&&!Vl(h)&&h.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=h,Ku(e,t,h,s,l)):(e=Ji(n.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(h=e.child,(e.lanes&l)===0){var A=h.memoizedProps;if(n=n.compare,n=n!==null?n:va,n(A,s)&&e.ref===t.ref)return vn(e,t,l)}return t.flags|=1,e=Hn(h,s),e.ref=t.ref,e.return=t,t.child=e}function Ku(e,t,n,s,l){if(e!==null){var h=e.memoizedProps;if(va(h,s)&&e.ref===t.ref)if(pr=!1,t.pendingProps=s=h,(e.lanes&l)!==0)(e.flags&131072)!==0&&(pr=!0);else return t.lanes=e.lanes,vn(e,t,l)}return El(e,t,n,s,l)}function Zu(e,t,n){var s=t.pendingProps,l=s.children,h=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},St(ia,_r),_r|=n;else{if((n&1073741824)===0)return e=h!==null?h.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,St(ia,_r),_r|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=h!==null?h.baseLanes:n,St(ia,_r),_r|=s}else h!==null?(s=h.baseLanes|n,t.memoizedState=null):s=n,St(ia,_r),_r|=s;return lr(e,t,l,n),t.child}function Xu(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function El(e,t,n,s,l){var h=mr(n)?xs:rr.current;return h=Ys(t,h),ra(t,l),n=xl(e,t,n,s,h,l),s=yl(),e!==null&&!pr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,vn(e,t,l)):(At&&s&&el(t),t.flags|=1,lr(e,t,n,l),t.child)}function ed(e,t,n,s,l){if(mr(n)){var h=!0;wi(t)}else h=!1;if(ra(t,l),t.stateNode===null)Pi(e,t),qu(t,n,s),Sl(t,n,s,l),s=!0;else if(e===null){var A=t.stateNode,J=t.memoizedProps;A.props=J;var te=A.context,ve=n.contextType;typeof ve=="object"&&ve!==null?ve=Ar(ve):(ve=mr(n)?xs:rr.current,ve=Ys(t,ve));var Te=n.getDerivedStateFromProps,Oe=typeof Te=="function"||typeof A.getSnapshotBeforeUpdate=="function";Oe||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(J!==s||te!==ve)&&$u(t,A,s,ve),Fn=!1;var De=t.memoizedState;A.state=De,Di(t,s,A,l),te=t.memoizedState,J!==s||De!==te||hr.current||Fn?(typeof Te=="function"&&(jl(t,n,Te,s),te=t.memoizedState),(J=Fn||Bu(t,n,J,s,De,te,ve))?(Oe||typeof A.UNSAFE_componentWillMount!="function"&&typeof A.componentWillMount!="function"||(typeof A.componentWillMount=="function"&&A.componentWillMount(),typeof A.UNSAFE_componentWillMount=="function"&&A.UNSAFE_componentWillMount()),typeof A.componentDidMount=="function"&&(t.flags|=4194308)):(typeof A.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=te),A.props=s,A.state=te,A.context=ve,s=J):(typeof A.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{A=t.stateNode,gu(e,t),J=t.memoizedProps,ve=t.type===t.elementType?J:Wr(t.type,J),A.props=ve,Oe=t.pendingProps,De=A.context,te=n.contextType,typeof te=="object"&&te!==null?te=Ar(te):(te=mr(n)?xs:rr.current,te=Ys(t,te));var Be=n.getDerivedStateFromProps;(Te=typeof Be=="function"||typeof A.getSnapshotBeforeUpdate=="function")||typeof A.UNSAFE_componentWillReceiveProps!="function"&&typeof A.componentWillReceiveProps!="function"||(J!==Oe||De!==te)&&$u(t,A,s,te),Fn=!1,De=t.memoizedState,A.state=De,Di(t,s,A,l);var He=t.memoizedState;J!==Oe||De!==He||hr.current||Fn?(typeof Be=="function"&&(jl(t,n,Be,s),He=t.memoizedState),(ve=Fn||Bu(t,n,ve,s,De,He,te)||!1)?(Te||typeof A.UNSAFE_componentWillUpdate!="function"&&typeof A.componentWillUpdate!="function"||(typeof A.componentWillUpdate=="function"&&A.componentWillUpdate(s,He,te),typeof A.UNSAFE_componentWillUpdate=="function"&&A.UNSAFE_componentWillUpdate(s,He,te)),typeof A.componentDidUpdate=="function"&&(t.flags|=4),typeof A.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof A.componentDidUpdate!="function"||J===e.memoizedProps&&De===e.memoizedState||(t.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||J===e.memoizedProps&&De===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=He),A.props=s,A.state=He,A.context=te,s=ve):(typeof A.componentDidUpdate!="function"||J===e.memoizedProps&&De===e.memoizedState||(t.flags|=4),typeof A.getSnapshotBeforeUpdate!="function"||J===e.memoizedProps&&De===e.memoizedState||(t.flags|=1024),s=!1)}return Cl(e,t,n,s,h,l)}function Cl(e,t,n,s,l,h){Xu(e,t);var A=(t.flags&128)!==0;if(!s&&!A)return l&&au(t,n,!1),vn(e,t,h);s=t.stateNode,ch.current=t;var J=A&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&A?(t.child=ea(t,e.child,null,h),t.child=ea(t,null,J,h)):lr(e,t,J,h),t.memoizedState=s.state,l&&au(t,n,!0),t.child}function td(e){var t=e.stateNode;t.pendingContext?nu(e,t.pendingContext,t.pendingContext!==t.context):t.context&&nu(e,t.context,!1),dl(e,t.containerInfo)}function rd(e,t,n,s,l){return Xs(),sl(l),t.flags|=256,lr(e,t,n,s),t.child}var Dl={dehydrated:null,treeContext:null,retryLane:0};function Tl(e){return{baseLanes:e,cachePool:null,transitions:null}}function nd(e,t,n){var s=t.pendingProps,l=Ot.current,h=!1,A=(t.flags&128)!==0,J;if((J=A)||(J=e!==null&&e.memoizedState===null?!1:(l&2)!==0),J?(h=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),St(Ot,l&1),e===null)return nl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(A=s.children,e=s.fallback,h?(s=t.mode,h=t.child,A={mode:"hidden",children:A},(s&1)===0&&h!==null?(h.childLanes=0,h.pendingProps=A):h=Yi(A,s,0,null),e=Es(e,s,n,null),h.return=t,e.return=t,h.sibling=e,t.child=h,t.child.memoizedState=Tl(n),t.memoizedState=Dl,e):Il(t,A));if(l=e.memoizedState,l!==null&&(J=l.dehydrated,J!==null))return uh(e,t,A,s,J,l,n);if(h){h=s.fallback,A=t.mode,l=e.child,J=l.sibling;var te={mode:"hidden",children:s.children};return(A&1)===0&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=te,t.deletions=null):(s=Hn(l,te),s.subtreeFlags=l.subtreeFlags&14680064),J!==null?h=Hn(J,h):(h=Es(h,A,n,null),h.flags|=2),h.return=t,s.return=t,s.sibling=h,t.child=s,s=h,h=t.child,A=e.child.memoizedState,A=A===null?Tl(n):{baseLanes:A.baseLanes|n,cachePool:null,transitions:A.transitions},h.memoizedState=A,h.childLanes=e.childLanes&~n,t.memoizedState=Dl,s}return h=e.child,e=h.sibling,s=Hn(h,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Il(e,t){return t=Yi({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Fi(e,t,n,s){return s!==null&&sl(s),ea(t,e.child,null,n),e=Il(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function uh(e,t,n,s,l,h,A){if(n)return t.flags&256?(t.flags&=-257,s=Nl(Error(o(422))),Fi(e,t,A,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(h=s.fallback,l=t.mode,s=Yi({mode:"visible",children:s.children},l,0,null),h=Es(h,l,A,null),h.flags|=2,s.return=t,h.return=t,s.sibling=h,t.child=s,(t.mode&1)!==0&&ea(t,e.child,null,A),t.child.memoizedState=Tl(A),t.memoizedState=Dl,h);if((t.mode&1)===0)return Fi(e,t,A,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var J=s.dgst;return s=J,h=Error(o(419)),s=Nl(h,s,void 0),Fi(e,t,A,s)}if(J=(A&e.childLanes)!==0,pr||J){if(s=Qt,s!==null){switch(A&-A){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|A))!==0?0:l,l!==0&&l!==h.retryLane&&(h.retryLane=l,xn(e,l),Vr(s,e,l,-1))}return Gl(),s=Nl(Error(o(421))),Fi(e,t,A,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=jh.bind(null,e),l._reactRetry=t,null):(e=h.treeContext,Nr=Mn(l.nextSibling),Sr=t,At=!0,Hr=null,e!==null&&(Tr[Ir++]=pn,Tr[Ir++]=gn,Tr[Ir++]=ys,pn=e.id,gn=e.overflow,ys=t),t=Il(t,s.children),t.flags|=4096,t)}function sd(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),ll(e.return,t,n)}function Al(e,t,n,s,l){var h=e.memoizedState;h===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:l}:(h.isBackwards=t,h.rendering=null,h.renderingStartTime=0,h.last=s,h.tail=n,h.tailMode=l)}function ad(e,t,n){var s=t.pendingProps,l=s.revealOrder,h=s.tail;if(lr(e,t,s.children,n),s=Ot.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&sd(e,n,t);else if(e.tag===19)sd(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(St(Ot,s),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(n=t.child,l=null;n!==null;)e=n.alternate,e!==null&&Ti(e)===null&&(l=n),n=n.sibling;n=l,n===null?(l=t.child,t.child=null):(l=n.sibling,n.sibling=null),Al(t,!1,l,n,h);break;case"backwards":for(n=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&Ti(e)===null){t.child=l;break}e=l.sibling,l.sibling=n,n=l,l=e}Al(t,!0,n,null,h);break;case"together":Al(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Pi(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vn(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),js|=t.lanes,(n&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(o(153));if(t.child!==null){for(e=t.child,n=Hn(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Hn(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function dh(e,t,n){switch(t.tag){case 3:td(t),Xs();break;case 5:vu(t);break;case 1:mr(t.type)&&wi(t);break;case 4:dl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;St(_i,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(St(Ot,Ot.current&1),t.flags|=128,null):(n&t.child.childLanes)!==0?nd(e,t,n):(St(Ot,Ot.current&1),e=vn(e,t,n),e!==null?e.sibling:null);St(Ot,Ot.current&1);break;case 19:if(s=(n&t.childLanes)!==0,(e.flags&128)!==0){if(s)return ad(e,t,n);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),St(Ot,Ot.current),s)break;return null;case 22:case 23:return t.lanes=0,Zu(e,t,n)}return vn(e,t,n)}var id,Ml,od,ld;id=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Ml=function(){},od=function(e,t,n,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,bs(nn.current);var h=null;switch(n){case"input":l=y(e,l),s=y(e,s),h=[];break;case"select":l=P({},l,{value:void 0}),s=P({},s,{value:void 0}),h=[];break;case"textarea":l=ce(e,l),s=ce(e,s),h=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=xi)}Vt(n,s);var A;n=null;for(ve in l)if(!s.hasOwnProperty(ve)&&l.hasOwnProperty(ve)&&l[ve]!=null)if(ve==="style"){var J=l[ve];for(A in J)J.hasOwnProperty(A)&&(n||(n={}),n[A]="")}else ve!=="dangerouslySetInnerHTML"&&ve!=="children"&&ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&ve!=="autoFocus"&&(p.hasOwnProperty(ve)?h||(h=[]):(h=h||[]).push(ve,null));for(ve in s){var te=s[ve];if(J=l!=null?l[ve]:void 0,s.hasOwnProperty(ve)&&te!==J&&(te!=null||J!=null))if(ve==="style")if(J){for(A in J)!J.hasOwnProperty(A)||te&&te.hasOwnProperty(A)||(n||(n={}),n[A]="");for(A in te)te.hasOwnProperty(A)&&J[A]!==te[A]&&(n||(n={}),n[A]=te[A])}else n||(h||(h=[]),h.push(ve,n)),n=te;else ve==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,J=J?J.__html:void 0,te!=null&&J!==te&&(h=h||[]).push(ve,te)):ve==="children"?typeof te!="string"&&typeof te!="number"||(h=h||[]).push(ve,""+te):ve!=="suppressContentEditableWarning"&&ve!=="suppressHydrationWarning"&&(p.hasOwnProperty(ve)?(te!=null&&ve==="onScroll"&&_t("scroll",e),h||J===te||(h=[])):(h=h||[]).push(ve,te))}n&&(h=h||[]).push("style",n);var ve=h;(t.updateQueue=ve)&&(t.flags|=4)}},ld=function(e,t,n,s){n!==s&&(t.flags|=4)};function Oa(e,t){if(!At)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function sr(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)n|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function fh(e,t,n){var s=t.pendingProps;switch(tl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sr(t),null;case 1:return mr(t.type)&&vi(),sr(t),null;case 3:return s=t.stateNode,na(),Et(hr),Et(rr),ml(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Si(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,Hr!==null&&(Hl(Hr),Hr=null))),Ml(e,t),sr(t),null;case 5:fl(t);var l=bs(Da.current);if(n=t.type,e!==null&&t.stateNode!=null)od(e,t,n,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(o(166));return sr(t),null}if(e=bs(nn.current),Si(t)){s=t.stateNode,n=t.type;var h=t.memoizedProps;switch(s[rn]=t,s[Sa]=h,e=(t.mode&1)!==0,n){case"dialog":_t("cancel",s),_t("close",s);break;case"iframe":case"object":case"embed":_t("load",s);break;case"video":case"audio":for(l=0;l<ba.length;l++)_t(ba[l],s);break;case"source":_t("error",s);break;case"img":case"image":case"link":_t("error",s),_t("load",s);break;case"details":_t("toggle",s);break;case"input":de(s,h),_t("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!h.multiple},_t("invalid",s);break;case"textarea":Ae(s,h),_t("invalid",s)}Vt(n,h),l=null;for(var A in h)if(h.hasOwnProperty(A)){var J=h[A];A==="children"?typeof J=="string"?s.textContent!==J&&(h.suppressHydrationWarning!==!0&&gi(s.textContent,J,e),l=["children",J]):typeof J=="number"&&s.textContent!==""+J&&(h.suppressHydrationWarning!==!0&&gi(s.textContent,J,e),l=["children",""+J]):p.hasOwnProperty(A)&&J!=null&&A==="onScroll"&&_t("scroll",s)}switch(n){case"input":ze(s),q(s,h,!0);break;case"textarea":ze(s),Me(s);break;case"select":case"option":break;default:typeof h.onClick=="function"&&(s.onclick=xi)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{A=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Ue(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=A.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=A.createElement(n,{is:s.is}):(e=A.createElement(n),n==="select"&&(A=e,s.multiple?A.multiple=!0:s.size&&(A.size=s.size))):e=A.createElementNS(e,n),e[rn]=t,e[Sa]=s,id(e,t,!1,!1),t.stateNode=e;e:{switch(A=ir(n,s),n){case"dialog":_t("cancel",e),_t("close",e),l=s;break;case"iframe":case"object":case"embed":_t("load",e),l=s;break;case"video":case"audio":for(l=0;l<ba.length;l++)_t(ba[l],e);l=s;break;case"source":_t("error",e),l=s;break;case"img":case"image":case"link":_t("error",e),_t("load",e),l=s;break;case"details":_t("toggle",e),l=s;break;case"input":de(e,s),l=y(e,s),_t("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=P({},s,{value:void 0}),_t("invalid",e);break;case"textarea":Ae(e,s),l=ce(e,s),_t("invalid",e);break;default:l=s}Vt(n,l),J=l;for(h in J)if(J.hasOwnProperty(h)){var te=J[h];h==="style"?Cr(e,te):h==="dangerouslySetInnerHTML"?(te=te?te.__html:void 0,te!=null&&ft(e,te)):h==="children"?typeof te=="string"?(n!=="textarea"||te!=="")&&Ct(e,te):typeof te=="number"&&Ct(e,""+te):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(p.hasOwnProperty(h)?te!=null&&h==="onScroll"&&_t("scroll",e):te!=null&&z(e,h,te,A))}switch(n){case"input":ze(e),q(e,s,!1);break;case"textarea":ze(e),Me(e);break;case"option":s.value!=null&&e.setAttribute("value",""+oe(s.value));break;case"select":e.multiple=!!s.multiple,h=s.value,h!=null?Ne(e,!!s.multiple,h,!1):s.defaultValue!=null&&Ne(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=xi)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return sr(t),null;case 6:if(e&&t.stateNode!=null)ld(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(o(166));if(n=bs(Da.current),bs(nn.current),Si(t)){if(s=t.stateNode,n=t.memoizedProps,s[rn]=t,(h=s.nodeValue!==n)&&(e=Sr,e!==null))switch(e.tag){case 3:gi(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&gi(s.nodeValue,n,(e.mode&1)!==0)}h&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[rn]=t,t.stateNode=s}return sr(t),null;case 13:if(Et(Ot),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(At&&Nr!==null&&(t.mode&1)!==0&&(t.flags&128)===0)du(),Xs(),t.flags|=98560,h=!1;else if(h=Si(t),s!==null&&s.dehydrated!==null){if(e===null){if(!h)throw Error(o(318));if(h=t.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));h[rn]=t}else Xs(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;sr(t),h=!1}else Hr!==null&&(Hl(Hr),Hr=null),h=!0;if(!h)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Ot.current&1)!==0?qt===0&&(qt=3):Gl())),t.updateQueue!==null&&(t.flags|=4),sr(t),null);case 4:return na(),Ml(e,t),e===null&&ka(t.stateNode.containerInfo),sr(t),null;case 10:return ol(t.type._context),sr(t),null;case 17:return mr(t.type)&&vi(),sr(t),null;case 19:if(Et(Ot),h=t.memoizedState,h===null)return sr(t),null;if(s=(t.flags&128)!==0,A=h.rendering,A===null)if(s)Oa(h,!1);else{if(qt!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(A=Ti(e),A!==null){for(t.flags|=128,Oa(h,!1),s=A.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)h=n,e=s,h.flags&=14680066,A=h.alternate,A===null?(h.childLanes=0,h.lanes=e,h.child=null,h.subtreeFlags=0,h.memoizedProps=null,h.memoizedState=null,h.updateQueue=null,h.dependencies=null,h.stateNode=null):(h.childLanes=A.childLanes,h.lanes=A.lanes,h.child=A.child,h.subtreeFlags=0,h.deletions=null,h.memoizedProps=A.memoizedProps,h.memoizedState=A.memoizedState,h.updateQueue=A.updateQueue,h.type=A.type,e=A.dependencies,h.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return St(Ot,Ot.current&1|2),t.child}e=e.sibling}h.tail!==null&&Tt()>oa&&(t.flags|=128,s=!0,Oa(h,!1),t.lanes=4194304)}else{if(!s)if(e=Ti(A),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Oa(h,!0),h.tail===null&&h.tailMode==="hidden"&&!A.alternate&&!At)return sr(t),null}else 2*Tt()-h.renderingStartTime>oa&&n!==1073741824&&(t.flags|=128,s=!0,Oa(h,!1),t.lanes=4194304);h.isBackwards?(A.sibling=t.child,t.child=A):(n=h.last,n!==null?n.sibling=A:t.child=A,h.last=A)}return h.tail!==null?(t=h.tail,h.rendering=t,h.tail=t.sibling,h.renderingStartTime=Tt(),t.sibling=null,n=Ot.current,St(Ot,s?n&1|2:n&1),t):(sr(t),null);case 22:case 23:return Ql(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(_r&1073741824)!==0&&(sr(t),t.subtreeFlags&6&&(t.flags|=8192)):sr(t),null;case 24:return null;case 25:return null}throw Error(o(156,t.tag))}function hh(e,t){switch(tl(t),t.tag){case 1:return mr(t.type)&&vi(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return na(),Et(hr),Et(rr),ml(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return fl(t),null;case 13:if(Et(Ot),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(o(340));Xs()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Et(Ot),null;case 4:return na(),null;case 10:return ol(t.type._context),null;case 22:case 23:return Ql(),null;case 24:return null;default:return null}}var Li=!1,ar=!1,mh=typeof WeakSet=="function"?WeakSet:Set,$e=null;function aa(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){zt(e,t,s)}else n.current=null}function Ol(e,t,n){try{n()}catch(s){zt(e,t,s)}}var cd=!1;function ph(e,t){if(Qo=j,e=Bc(),Po(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var l=s.anchorOffset,h=s.focusNode;s=s.focusOffset;try{n.nodeType,h.nodeType}catch{n=null;break e}var A=0,J=-1,te=-1,ve=0,Te=0,Oe=e,De=null;t:for(;;){for(var Be;Oe!==n||l!==0&&Oe.nodeType!==3||(J=A+l),Oe!==h||s!==0&&Oe.nodeType!==3||(te=A+s),Oe.nodeType===3&&(A+=Oe.nodeValue.length),(Be=Oe.firstChild)!==null;)De=Oe,Oe=Be;for(;;){if(Oe===e)break t;if(De===n&&++ve===l&&(J=A),De===h&&++Te===s&&(te=A),(Be=Oe.nextSibling)!==null)break;Oe=De,De=Oe.parentNode}Oe=Be}n=J===-1||te===-1?null:{start:J,end:te}}else n=null}n=n||{start:0,end:0}}else n=null;for(Go={focusedElem:e,selectionRange:n},j=!1,$e=t;$e!==null;)if(t=$e,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,$e=e;else for(;$e!==null;){t=$e;try{var He=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(He!==null){var Qe=He.memoizedProps,Pt=He.memoizedState,me=t.stateNode,se=me.getSnapshotBeforeUpdate(t.elementType===t.type?Qe:Wr(t.type,Qe),Pt);me.__reactInternalSnapshotBeforeUpdate=se}break;case 3:var ge=t.stateNode.containerInfo;ge.nodeType===1?ge.textContent="":ge.nodeType===9&&ge.documentElement&&ge.removeChild(ge.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(Re){zt(t,t.return,Re)}if(e=t.sibling,e!==null){e.return=t.return,$e=e;break}$e=t.return}return He=cd,cd=!1,He}function Ra(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var h=l.destroy;l.destroy=void 0,h!==void 0&&Ol(t,n,h)}l=l.next}while(l!==s)}}function Ui(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Rl(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function ud(e){var t=e.alternate;t!==null&&(e.alternate=null,ud(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[rn],delete t[Sa],delete t[Ko],delete t[Kf],delete t[Zf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function dd(e){return e.tag===5||e.tag===3||e.tag===4}function fd(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||dd(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function zl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=xi));else if(s!==4&&(e=e.child,e!==null))for(zl(e,t,n),e=e.sibling;e!==null;)zl(e,t,n),e=e.sibling}function Fl(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Fl(e,t,n),e=e.sibling;e!==null;)Fl(e,t,n),e=e.sibling}var Kt=null,Qr=!1;function Ln(e,t,n){for(n=n.child;n!==null;)hd(e,t,n),n=n.sibling}function hd(e,t,n){if(br&&typeof br.onCommitFiberUnmount=="function")try{br.onCommitFiberUnmount(rs,n)}catch{}switch(n.tag){case 5:ar||aa(n,t);case 6:var s=Kt,l=Qr;Kt=null,Ln(e,t,n),Kt=s,Qr=l,Kt!==null&&(Qr?(e=Kt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Kt.removeChild(n.stateNode));break;case 18:Kt!==null&&(Qr?(e=Kt,n=n.stateNode,e.nodeType===8?Yo(e.parentNode,n):e.nodeType===1&&Yo(e,n),i(e)):Yo(Kt,n.stateNode));break;case 4:s=Kt,l=Qr,Kt=n.stateNode.containerInfo,Qr=!0,Ln(e,t,n),Kt=s,Qr=l;break;case 0:case 11:case 14:case 15:if(!ar&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var h=l,A=h.destroy;h=h.tag,A!==void 0&&((h&2)!==0||(h&4)!==0)&&Ol(n,t,A),l=l.next}while(l!==s)}Ln(e,t,n);break;case 1:if(!ar&&(aa(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(J){zt(n,t,J)}Ln(e,t,n);break;case 21:Ln(e,t,n);break;case 22:n.mode&1?(ar=(s=ar)||n.memoizedState!==null,Ln(e,t,n),ar=s):Ln(e,t,n);break;default:Ln(e,t,n)}}function md(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new mh),t.forEach(function(s){var l=Sh.bind(null,e,s);n.has(s)||(n.add(s),s.then(l,l))})}}function Gr(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var l=n[s];try{var h=e,A=t,J=A;e:for(;J!==null;){switch(J.tag){case 5:Kt=J.stateNode,Qr=!1;break e;case 3:Kt=J.stateNode.containerInfo,Qr=!0;break e;case 4:Kt=J.stateNode.containerInfo,Qr=!0;break e}J=J.return}if(Kt===null)throw Error(o(160));hd(h,A,l),Kt=null,Qr=!1;var te=l.alternate;te!==null&&(te.return=null),l.return=null}catch(ve){zt(l,t,ve)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pd(t,e),t=t.sibling}function pd(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Gr(t,e),an(e),s&4){try{Ra(3,e,e.return),Ui(3,e)}catch(Qe){zt(e,e.return,Qe)}try{Ra(5,e,e.return)}catch(Qe){zt(e,e.return,Qe)}}break;case 1:Gr(t,e),an(e),s&512&&n!==null&&aa(n,n.return);break;case 5:if(Gr(t,e),an(e),s&512&&n!==null&&aa(n,n.return),e.flags&32){var l=e.stateNode;try{Ct(l,"")}catch(Qe){zt(e,e.return,Qe)}}if(s&4&&(l=e.stateNode,l!=null)){var h=e.memoizedProps,A=n!==null?n.memoizedProps:h,J=e.type,te=e.updateQueue;if(e.updateQueue=null,te!==null)try{J==="input"&&h.type==="radio"&&h.name!=null&&ue(l,h),ir(J,A);var ve=ir(J,h);for(A=0;A<te.length;A+=2){var Te=te[A],Oe=te[A+1];Te==="style"?Cr(l,Oe):Te==="dangerouslySetInnerHTML"?ft(l,Oe):Te==="children"?Ct(l,Oe):z(l,Te,Oe,ve)}switch(J){case"input":W(l,h);break;case"textarea":Fe(l,h);break;case"select":var De=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!h.multiple;var Be=h.value;Be!=null?Ne(l,!!h.multiple,Be,!1):De!==!!h.multiple&&(h.defaultValue!=null?Ne(l,!!h.multiple,h.defaultValue,!0):Ne(l,!!h.multiple,h.multiple?[]:"",!1))}l[Sa]=h}catch(Qe){zt(e,e.return,Qe)}}break;case 6:if(Gr(t,e),an(e),s&4){if(e.stateNode===null)throw Error(o(162));l=e.stateNode,h=e.memoizedProps;try{l.nodeValue=h}catch(Qe){zt(e,e.return,Qe)}}break;case 3:if(Gr(t,e),an(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{i(t.containerInfo)}catch(Qe){zt(e,e.return,Qe)}break;case 4:Gr(t,e),an(e);break;case 13:Gr(t,e),an(e),l=e.child,l.flags&8192&&(h=l.memoizedState!==null,l.stateNode.isHidden=h,!h||l.alternate!==null&&l.alternate.memoizedState!==null||(Ul=Tt())),s&4&&md(e);break;case 22:if(Te=n!==null&&n.memoizedState!==null,e.mode&1?(ar=(ve=ar)||Te,Gr(t,e),ar=ve):Gr(t,e),an(e),s&8192){if(ve=e.memoizedState!==null,(e.stateNode.isHidden=ve)&&!Te&&(e.mode&1)!==0)for($e=e,Te=e.child;Te!==null;){for(Oe=$e=Te;$e!==null;){switch(De=$e,Be=De.child,De.tag){case 0:case 11:case 14:case 15:Ra(4,De,De.return);break;case 1:aa(De,De.return);var He=De.stateNode;if(typeof He.componentWillUnmount=="function"){s=De,n=De.return;try{t=s,He.props=t.memoizedProps,He.state=t.memoizedState,He.componentWillUnmount()}catch(Qe){zt(s,n,Qe)}}break;case 5:aa(De,De.return);break;case 22:if(De.memoizedState!==null){yd(Oe);continue}}Be!==null?(Be.return=De,$e=Be):yd(Oe)}Te=Te.sibling}e:for(Te=null,Oe=e;;){if(Oe.tag===5){if(Te===null){Te=Oe;try{l=Oe.stateNode,ve?(h=l.style,typeof h.setProperty=="function"?h.setProperty("display","none","important"):h.display="none"):(J=Oe.stateNode,te=Oe.memoizedProps.style,A=te!=null&&te.hasOwnProperty("display")?te.display:null,J.style.display=ht("display",A))}catch(Qe){zt(e,e.return,Qe)}}}else if(Oe.tag===6){if(Te===null)try{Oe.stateNode.nodeValue=ve?"":Oe.memoizedProps}catch(Qe){zt(e,e.return,Qe)}}else if((Oe.tag!==22&&Oe.tag!==23||Oe.memoizedState===null||Oe===e)&&Oe.child!==null){Oe.child.return=Oe,Oe=Oe.child;continue}if(Oe===e)break e;for(;Oe.sibling===null;){if(Oe.return===null||Oe.return===e)break e;Te===Oe&&(Te=null),Oe=Oe.return}Te===Oe&&(Te=null),Oe.sibling.return=Oe.return,Oe=Oe.sibling}}break;case 19:Gr(t,e),an(e),s&4&&md(e);break;case 21:break;default:Gr(t,e),an(e)}}function an(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(dd(n)){var s=n;break e}n=n.return}throw Error(o(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(Ct(l,""),s.flags&=-33);var h=fd(e);Fl(e,h,l);break;case 3:case 4:var A=s.stateNode.containerInfo,J=fd(e);zl(e,J,A);break;default:throw Error(o(161))}}catch(te){zt(e,e.return,te)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function gh(e,t,n){$e=e,gd(e)}function gd(e,t,n){for(var s=(e.mode&1)!==0;$e!==null;){var l=$e,h=l.child;if(l.tag===22&&s){var A=l.memoizedState!==null||Li;if(!A){var J=l.alternate,te=J!==null&&J.memoizedState!==null||ar;J=Li;var ve=ar;if(Li=A,(ar=te)&&!ve)for($e=l;$e!==null;)A=$e,te=A.child,A.tag===22&&A.memoizedState!==null?vd(l):te!==null?(te.return=A,$e=te):vd(l);for(;h!==null;)$e=h,gd(h),h=h.sibling;$e=l,Li=J,ar=ve}xd(e)}else(l.subtreeFlags&8772)!==0&&h!==null?(h.return=l,$e=h):xd(e)}}function xd(e){for(;$e!==null;){var t=$e;if((t.flags&8772)!==0){var n=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ar||Ui(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ar)if(n===null)s.componentDidMount();else{var l=t.elementType===t.type?n.memoizedProps:Wr(t.type,n.memoizedProps);s.componentDidUpdate(l,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var h=t.updateQueue;h!==null&&yu(t,h,s);break;case 3:var A=t.updateQueue;if(A!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}yu(t,A,n)}break;case 5:var J=t.stateNode;if(n===null&&t.flags&4){n=J;var te=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":te.autoFocus&&n.focus();break;case"img":te.src&&(n.src=te.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var ve=t.alternate;if(ve!==null){var Te=ve.memoizedState;if(Te!==null){var Oe=Te.dehydrated;Oe!==null&&i(Oe)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(o(163))}ar||t.flags&512&&Rl(t)}catch(De){zt(t,t.return,De)}}if(t===e){$e=null;break}if(n=t.sibling,n!==null){n.return=t.return,$e=n;break}$e=t.return}}function yd(e){for(;$e!==null;){var t=$e;if(t===e){$e=null;break}var n=t.sibling;if(n!==null){n.return=t.return,$e=n;break}$e=t.return}}function vd(e){for(;$e!==null;){var t=$e;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{Ui(4,t)}catch(te){zt(t,n,te)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(te){zt(t,l,te)}}var h=t.return;try{Rl(t)}catch(te){zt(t,h,te)}break;case 5:var A=t.return;try{Rl(t)}catch(te){zt(t,A,te)}}}catch(te){zt(t,t.return,te)}if(t===e){$e=null;break}var J=t.sibling;if(J!==null){J.return=t.return,$e=J;break}$e=t.return}}var xh=Math.ceil,Bi=M.ReactCurrentDispatcher,Pl=M.ReactCurrentOwner,Or=M.ReactCurrentBatchConfig,pt=0,Qt=null,Lt=null,Zt=0,_r=0,ia=On(0),qt=0,za=null,js=0,qi=0,Ll=0,Fa=null,gr=null,Ul=0,oa=1/0,wn=null,$i=!1,Bl=null,Un=null,Hi=!1,Bn=null,Wi=0,Pa=0,ql=null,Qi=-1,Gi=0;function cr(){return(pt&6)!==0?Tt():Qi!==-1?Qi:Qi=Tt()}function qn(e){return(e.mode&1)===0?1:(pt&2)!==0&&Zt!==0?Zt&-Zt:eh.transition!==null?(Gi===0&&(Gi=as()),Gi):(e=mt,e!==0||(e=window.event,e=e===void 0?16:dt(e.type)),e)}function Vr(e,t,n,s){if(50<Pa)throw Pa=0,ql=null,Error(o(185));is(e,n,s),((pt&2)===0||e!==Qt)&&(e===Qt&&((pt&2)===0&&(qi|=n),qt===4&&$n(e,Zt)),xr(e,s),n===1&&pt===0&&(t.mode&1)===0&&(oa=Tt()+500,bi&&zn()))}function xr(e,t){var n=e.callbackNode;Rs(e,t);var s=Nn(e,e===Qt?Zt:0);if(s===0)n!==null&&As(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&As(n),t===1)e.tag===0?Xf(bd.bind(null,e)):iu(bd.bind(null,e)),Jf(function(){(pt&6)===0&&zn()}),n=null;else{switch(ua(s)){case 1:n=Ms;break;case 4:n=es;break;case 16:n=ts;break;case 536870912:n=Os;break;default:n=ts}n=Dd(n,wd.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function wd(e,t){if(Qi=-1,Gi=0,(pt&6)!==0)throw Error(o(327));var n=e.callbackNode;if(la()&&e.callbackNode!==n)return null;var s=Nn(e,e===Qt?Zt:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=Vi(e,s);else{t=s;var l=pt;pt|=2;var h=jd();(Qt!==e||Zt!==t)&&(wn=null,oa=Tt()+500,Ns(e,t));do try{wh();break}catch(J){kd(e,J)}while(!0);il(),Bi.current=h,pt=l,Lt!==null?t=0:(Qt=null,Zt=0,t=qt)}if(t!==0){if(t===2&&(l=_n(e),l!==0&&(s=l,t=$l(e,l))),t===1)throw n=za,Ns(e,0),$n(e,s),xr(e,Tt()),n;if(t===6)$n(e,s);else{if(l=e.current.alternate,(s&30)===0&&!yh(l)&&(t=Vi(e,s),t===2&&(h=_n(e),h!==0&&(s=h,t=$l(e,h))),t===1))throw n=za,Ns(e,0),$n(e,s),xr(e,Tt()),n;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(o(345));case 2:_s(e,gr,wn);break;case 3:if($n(e,s),(s&130023424)===s&&(t=Ul+500-Tt(),10<t)){if(Nn(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){cr(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=Jo(_s.bind(null,e,gr,wn),t);break}_s(e,gr,wn);break;case 4:if($n(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var A=31-kr(s);h=1<<A,A=t[A],A>l&&(l=A),s&=~h}if(s=l,s=Tt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*xh(s/1960))-s,10<s){e.timeoutHandle=Jo(_s.bind(null,e,gr,wn),s);break}_s(e,gr,wn);break;case 5:_s(e,gr,wn);break;default:throw Error(o(329))}}}return xr(e,Tt()),e.callbackNode===n?wd.bind(null,e):null}function $l(e,t){var n=Fa;return e.current.memoizedState.isDehydrated&&(Ns(e,t).flags|=256),e=Vi(e,t),e!==2&&(t=gr,gr=n,t!==null&&Hl(t)),e}function Hl(e){gr===null?gr=e:gr.push.apply(gr,e)}function yh(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var l=n[s],h=l.getSnapshot;l=l.value;try{if(!$r(h(),l))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function $n(e,t){for(t&=~Ll,t&=~qi,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-kr(t),s=1<<n;e[n]=-1,t&=~s}}function bd(e){if((pt&6)!==0)throw Error(o(327));la();var t=Nn(e,0);if((t&1)===0)return xr(e,Tt()),null;var n=Vi(e,t);if(e.tag!==0&&n===2){var s=_n(e);s!==0&&(t=s,n=$l(e,s))}if(n===1)throw n=za,Ns(e,0),$n(e,t),xr(e,Tt()),n;if(n===6)throw Error(o(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,_s(e,gr,wn),xr(e,Tt()),null}function Wl(e,t){var n=pt;pt|=1;try{return e(t)}finally{pt=n,pt===0&&(oa=Tt()+500,bi&&zn())}}function Ss(e){Bn!==null&&Bn.tag===0&&(pt&6)===0&&la();var t=pt;pt|=1;var n=Or.transition,s=mt;try{if(Or.transition=null,mt=1,e)return e()}finally{mt=s,Or.transition=n,pt=t,(pt&6)===0&&zn()}}function Ql(){_r=ia.current,Et(ia)}function Ns(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Vf(n)),Lt!==null)for(n=Lt.return;n!==null;){var s=n;switch(tl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&vi();break;case 3:na(),Et(hr),Et(rr),ml();break;case 5:fl(s);break;case 4:na();break;case 13:Et(Ot);break;case 19:Et(Ot);break;case 10:ol(s.type._context);break;case 22:case 23:Ql()}n=n.return}if(Qt=e,Lt=e=Hn(e.current,null),Zt=_r=t,qt=0,za=null,Ll=qi=js=0,gr=Fa=null,ws!==null){for(t=0;t<ws.length;t++)if(n=ws[t],s=n.interleaved,s!==null){n.interleaved=null;var l=s.next,h=n.pending;if(h!==null){var A=h.next;h.next=l,s.next=A}n.pending=s}ws=null}return e}function kd(e,t){do{var n=Lt;try{if(il(),Ii.current=Ri,Ai){for(var s=Rt.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Ai=!1}if(ks=0,Wt=Bt=Rt=null,Ta=!1,Ia=0,Pl.current=null,n===null||n.return===null){qt=1,za=t,Lt=null;break}e:{var h=e,A=n.return,J=n,te=t;if(t=Zt,J.flags|=32768,te!==null&&typeof te=="object"&&typeof te.then=="function"){var ve=te,Te=J,Oe=Te.tag;if((Te.mode&1)===0&&(Oe===0||Oe===11||Oe===15)){var De=Te.alternate;De?(Te.updateQueue=De.updateQueue,Te.memoizedState=De.memoizedState,Te.lanes=De.lanes):(Te.updateQueue=null,Te.memoizedState=null)}var Be=Gu(A);if(Be!==null){Be.flags&=-257,Vu(Be,A,J,h,t),Be.mode&1&&Qu(h,ve,t),t=Be,te=ve;var He=t.updateQueue;if(He===null){var Qe=new Set;Qe.add(te),t.updateQueue=Qe}else He.add(te);break e}else{if((t&1)===0){Qu(h,ve,t),Gl();break e}te=Error(o(426))}}else if(At&&J.mode&1){var Pt=Gu(A);if(Pt!==null){(Pt.flags&65536)===0&&(Pt.flags|=256),Vu(Pt,A,J,h,t),sl(sa(te,J));break e}}h=te=sa(te,J),qt!==4&&(qt=2),Fa===null?Fa=[h]:Fa.push(h),h=A;do{switch(h.tag){case 3:h.flags|=65536,t&=-t,h.lanes|=t;var me=Hu(h,te,t);xu(h,me);break e;case 1:J=te;var se=h.type,ge=h.stateNode;if((h.flags&128)===0&&(typeof se.getDerivedStateFromError=="function"||ge!==null&&typeof ge.componentDidCatch=="function"&&(Un===null||!Un.has(ge)))){h.flags|=65536,t&=-t,h.lanes|=t;var Re=Wu(h,J,t);xu(h,Re);break e}}h=h.return}while(h!==null)}Nd(n)}catch(Je){t=Je,Lt===n&&n!==null&&(Lt=n=n.return);continue}break}while(!0)}function jd(){var e=Bi.current;return Bi.current=Ri,e===null?Ri:e}function Gl(){(qt===0||qt===3||qt===2)&&(qt=4),Qt===null||(js&268435455)===0&&(qi&268435455)===0||$n(Qt,Zt)}function Vi(e,t){var n=pt;pt|=2;var s=jd();(Qt!==e||Zt!==t)&&(wn=null,Ns(e,t));do try{vh();break}catch(l){kd(e,l)}while(!0);if(il(),pt=n,Bi.current=s,Lt!==null)throw Error(o(261));return Qt=null,Zt=0,qt}function vh(){for(;Lt!==null;)Sd(Lt)}function wh(){for(;Lt!==null&&!Ka();)Sd(Lt)}function Sd(e){var t=Cd(e.alternate,e,_r);e.memoizedProps=e.pendingProps,t===null?Nd(e):Lt=t,Pl.current=null}function Nd(e){var t=e;do{var n=t.alternate;if(e=t.return,(t.flags&32768)===0){if(n=fh(n,t,_r),n!==null){Lt=n;return}}else{if(n=hh(n,t),n!==null){n.flags&=32767,Lt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{qt=6,Lt=null;return}}if(t=t.sibling,t!==null){Lt=t;return}Lt=t=e}while(t!==null);qt===0&&(qt=5)}function _s(e,t,n){var s=mt,l=Or.transition;try{Or.transition=null,mt=1,bh(e,t,n,s)}finally{Or.transition=l,mt=s}return null}function bh(e,t,n,s){do la();while(Bn!==null);if((pt&6)!==0)throw Error(o(327));n=e.finishedWork;var l=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(o(177));e.callbackNode=null,e.callbackPriority=0;var h=n.lanes|n.childLanes;if(wo(e,h),e===Qt&&(Lt=Qt=null,Zt=0),(n.subtreeFlags&2064)===0&&(n.flags&2064)===0||Hi||(Hi=!0,Dd(ts,function(){return la(),null})),h=(n.flags&15990)!==0,(n.subtreeFlags&15990)!==0||h){h=Or.transition,Or.transition=null;var A=mt;mt=1;var J=pt;pt|=4,Pl.current=null,ph(e,n),pd(n,e),Bf(Go),j=!!Qo,Go=Qo=null,e.current=n,gh(n),Za(),pt=J,mt=A,Or.transition=h}else e.current=n;if(Hi&&(Hi=!1,Bn=e,Wi=l),h=e.pendingLanes,h===0&&(Un=null),Xa(n.stateNode),xr(e,Tt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)l=t[n],s(l.value,{componentStack:l.stack,digest:l.digest});if($i)throw $i=!1,e=Bl,Bl=null,e;return(Wi&1)!==0&&e.tag!==0&&la(),h=e.pendingLanes,(h&1)!==0?e===ql?Pa++:(Pa=0,ql=e):Pa=0,zn(),null}function la(){if(Bn!==null){var e=ua(Wi),t=Or.transition,n=mt;try{if(Or.transition=null,mt=16>e?16:e,Bn===null)var s=!1;else{if(e=Bn,Bn=null,Wi=0,(pt&6)!==0)throw Error(o(331));var l=pt;for(pt|=4,$e=e.current;$e!==null;){var h=$e,A=h.child;if(($e.flags&16)!==0){var J=h.deletions;if(J!==null){for(var te=0;te<J.length;te++){var ve=J[te];for($e=ve;$e!==null;){var Te=$e;switch(Te.tag){case 0:case 11:case 15:Ra(8,Te,h)}var Oe=Te.child;if(Oe!==null)Oe.return=Te,$e=Oe;else for(;$e!==null;){Te=$e;var De=Te.sibling,Be=Te.return;if(ud(Te),Te===ve){$e=null;break}if(De!==null){De.return=Be,$e=De;break}$e=Be}}}var He=h.alternate;if(He!==null){var Qe=He.child;if(Qe!==null){He.child=null;do{var Pt=Qe.sibling;Qe.sibling=null,Qe=Pt}while(Qe!==null)}}$e=h}}if((h.subtreeFlags&2064)!==0&&A!==null)A.return=h,$e=A;else e:for(;$e!==null;){if(h=$e,(h.flags&2048)!==0)switch(h.tag){case 0:case 11:case 15:Ra(9,h,h.return)}var me=h.sibling;if(me!==null){me.return=h.return,$e=me;break e}$e=h.return}}var se=e.current;for($e=se;$e!==null;){A=$e;var ge=A.child;if((A.subtreeFlags&2064)!==0&&ge!==null)ge.return=A,$e=ge;else e:for(A=se;$e!==null;){if(J=$e,(J.flags&2048)!==0)try{switch(J.tag){case 0:case 11:case 15:Ui(9,J)}}catch(Je){zt(J,J.return,Je)}if(J===A){$e=null;break e}var Re=J.sibling;if(Re!==null){Re.return=J.return,$e=Re;break e}$e=J.return}}if(pt=l,zn(),br&&typeof br.onPostCommitFiberRoot=="function")try{br.onPostCommitFiberRoot(rs,e)}catch{}s=!0}return s}finally{mt=n,Or.transition=t}}return!1}function _d(e,t,n){t=sa(n,t),t=Hu(e,t,1),e=Pn(e,t,1),t=cr(),e!==null&&(is(e,1,t),xr(e,t))}function zt(e,t,n){if(e.tag===3)_d(e,e,n);else for(;t!==null;){if(t.tag===3){_d(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Un===null||!Un.has(s))){e=sa(n,e),e=Wu(t,e,1),t=Pn(t,e,1),e=cr(),t!==null&&(is(t,1,e),xr(t,e));break}}t=t.return}}function kh(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=cr(),e.pingedLanes|=e.suspendedLanes&n,Qt===e&&(Zt&n)===n&&(qt===4||qt===3&&(Zt&130023424)===Zt&&500>Tt()-Ul?Ns(e,0):Ll|=n),xr(e,t)}function Ed(e,t){t===0&&((e.mode&1)===0?t=1:(t=yt,yt<<=1,(yt&130023424)===0&&(yt=4194304)));var n=cr();e=xn(e,t),e!==null&&(is(e,t,n),xr(e,n))}function jh(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Ed(e,n)}function Sh(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(n=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(o(314))}s!==null&&s.delete(t),Ed(e,n)}var Cd;Cd=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||hr.current)pr=!0;else{if((e.lanes&n)===0&&(t.flags&128)===0)return pr=!1,dh(e,t,n);pr=(e.flags&131072)!==0}else pr=!1,At&&(t.flags&1048576)!==0&&ou(t,ji,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Pi(e,t),e=t.pendingProps;var l=Ys(t,rr.current);ra(t,n),l=xl(null,t,s,e,l,n);var h=yl();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,mr(s)?(h=!0,wi(t)):h=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,ul(t),l.updater=zi,t.stateNode=l,l._reactInternals=t,Sl(t,s,e,n),t=Cl(null,t,s,!0,h,n)):(t.tag=0,At&&h&&el(t),lr(null,t,l,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Pi(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=_h(s),e=Wr(s,e),l){case 0:t=El(null,t,s,e,n);break e;case 1:t=ed(null,t,s,e,n);break e;case 11:t=Ju(null,t,s,e,n);break e;case 14:t=Yu(null,t,s,Wr(s.type,e),n);break e}throw Error(o(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Wr(s,l),El(e,t,s,l,n);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Wr(s,l),ed(e,t,s,l,n);case 3:e:{if(td(t),e===null)throw Error(o(387));s=t.pendingProps,h=t.memoizedState,l=h.element,gu(e,t),Di(t,s,null,n);var A=t.memoizedState;if(s=A.element,h.isDehydrated)if(h={element:s,isDehydrated:!1,cache:A.cache,pendingSuspenseBoundaries:A.pendingSuspenseBoundaries,transitions:A.transitions},t.updateQueue.baseState=h,t.memoizedState=h,t.flags&256){l=sa(Error(o(423)),t),t=rd(e,t,s,n,l);break e}else if(s!==l){l=sa(Error(o(424)),t),t=rd(e,t,s,n,l);break e}else for(Nr=Mn(t.stateNode.containerInfo.firstChild),Sr=t,At=!0,Hr=null,n=mu(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Xs(),s===l){t=vn(e,t,n);break e}lr(e,t,s,n)}t=t.child}return t;case 5:return vu(t),e===null&&nl(t),s=t.type,l=t.pendingProps,h=e!==null?e.memoizedProps:null,A=l.children,Vo(s,l)?A=null:h!==null&&Vo(s,h)&&(t.flags|=32),Xu(e,t),lr(e,t,A,n),t.child;case 6:return e===null&&nl(t),null;case 13:return nd(e,t,n);case 4:return dl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=ea(t,null,s,n):lr(e,t,s,n),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Wr(s,l),Ju(e,t,s,l,n);case 7:return lr(e,t,t.pendingProps,n),t.child;case 8:return lr(e,t,t.pendingProps.children,n),t.child;case 12:return lr(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,h=t.memoizedProps,A=l.value,St(_i,s._currentValue),s._currentValue=A,h!==null)if($r(h.value,A)){if(h.children===l.children&&!hr.current){t=vn(e,t,n);break e}}else for(h=t.child,h!==null&&(h.return=t);h!==null;){var J=h.dependencies;if(J!==null){A=h.child;for(var te=J.firstContext;te!==null;){if(te.context===s){if(h.tag===1){te=yn(-1,n&-n),te.tag=2;var ve=h.updateQueue;if(ve!==null){ve=ve.shared;var Te=ve.pending;Te===null?te.next=te:(te.next=Te.next,Te.next=te),ve.pending=te}}h.lanes|=n,te=h.alternate,te!==null&&(te.lanes|=n),ll(h.return,n,t),J.lanes|=n;break}te=te.next}}else if(h.tag===10)A=h.type===t.type?null:h.child;else if(h.tag===18){if(A=h.return,A===null)throw Error(o(341));A.lanes|=n,J=A.alternate,J!==null&&(J.lanes|=n),ll(A,n,t),A=h.sibling}else A=h.child;if(A!==null)A.return=h;else for(A=h;A!==null;){if(A===t){A=null;break}if(h=A.sibling,h!==null){h.return=A.return,A=h;break}A=A.return}h=A}lr(e,t,l.children,n),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,ra(t,n),l=Ar(l),s=s(l),t.flags|=1,lr(e,t,s,n),t.child;case 14:return s=t.type,l=Wr(s,t.pendingProps),l=Wr(s.type,l),Yu(e,t,s,l,n);case 15:return Ku(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Wr(s,l),Pi(e,t),t.tag=1,mr(s)?(e=!0,wi(t)):e=!1,ra(t,n),qu(t,s,l),Sl(t,s,l,n),Cl(null,t,s,!0,e,n);case 19:return ad(e,t,n);case 22:return Zu(e,t,n)}throw Error(o(156,t.tag))};function Dd(e,t){return Zn(e,t)}function Nh(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rr(e,t,n,s){return new Nh(e,t,n,s)}function Vl(e){return e=e.prototype,!(!e||!e.isReactComponent)}function _h(e){if(typeof e=="function")return Vl(e)?1:0;if(e!=null){if(e=e.$$typeof,e===$)return 11;if(e===xe)return 14}return 2}function Hn(e,t){var n=e.alternate;return n===null?(n=Rr(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Ji(e,t,n,s,l,h){var A=2;if(s=e,typeof e=="function")Vl(e)&&(A=1);else if(typeof e=="string")A=5;else e:switch(e){case Q:return Es(n.children,l,h,t);case ne:A=8,l|=8;break;case V:return e=Rr(12,n,t,l|2),e.elementType=V,e.lanes=h,e;case K:return e=Rr(13,n,t,l),e.elementType=K,e.lanes=h,e;case _:return e=Rr(19,n,t,l),e.elementType=_,e.lanes=h,e;case re:return Yi(n,l,h,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case ee:A=10;break e;case ae:A=9;break e;case $:A=11;break e;case xe:A=14;break e;case je:A=16,s=null;break e}throw Error(o(130,e==null?e:typeof e,""))}return t=Rr(A,n,t,l),t.elementType=e,t.type=s,t.lanes=h,t}function Es(e,t,n,s){return e=Rr(7,e,s,t),e.lanes=n,e}function Yi(e,t,n,s){return e=Rr(22,e,s,t),e.elementType=re,e.lanes=n,e.stateNode={isHidden:!1},e}function Jl(e,t,n){return e=Rr(6,e,null,t),e.lanes=n,e}function Yl(e,t,n){return t=Rr(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Eh(e,t,n,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=fn(0),this.expirationTimes=fn(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=fn(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function Kl(e,t,n,s,l,h,A,J,te){return e=new Eh(e,t,n,J,te),t===1?(t=1,h===!0&&(t|=8)):t=0,h=Rr(3,null,null,t),e.current=h,h.stateNode=e,h.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ul(h),e}function Ch(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:G,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function Td(e){if(!e)return Rn;e=e._reactInternals;e:{if(Zr(e)!==e||e.tag!==1)throw Error(o(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(mr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(o(171))}if(e.tag===1){var n=e.type;if(mr(n))return su(e,n,t)}return t}function Id(e,t,n,s,l,h,A,J,te){return e=Kl(n,s,!0,e,l,h,A,J,te),e.context=Td(null),n=e.current,s=cr(),l=qn(n),h=yn(s,l),h.callback=t??null,Pn(n,h,l),e.current.lanes=l,is(e,l,s),xr(e,s),e}function Ki(e,t,n,s){var l=t.current,h=cr(),A=qn(l);return n=Td(n),t.context===null?t.context=n:t.pendingContext=n,t=yn(h,A),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=Pn(l,t,A),e!==null&&(Vr(e,l,A,h),Ci(e,l,A)),A}function Zi(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Ad(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Zl(e,t){Ad(e,t),(e=e.alternate)&&Ad(e,t)}function Dh(){return null}var Md=typeof reportError=="function"?reportError:function(e){console.error(e)};function Xl(e){this._internalRoot=e}Xi.prototype.render=Xl.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(o(409));Ki(e,t,null,null)},Xi.prototype.unmount=Xl.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Ss(function(){Ki(null,e,null,null)}),t[hn]=null}};function Xi(e){this._internalRoot=e}Xi.prototype.unstable_scheduleHydration=function(e){if(e){var t=ls();e={blockedOn:null,target:e,priority:t};for(var n=0;n<We.length&&t!==0&&t<We[n].priority;n++);We.splice(n,0,e),n===0&&Dn(e)}};function ec(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function eo(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Od(){}function Th(e,t,n,s,l){if(l){if(typeof s=="function"){var h=s;s=function(){var ve=Zi(A);h.call(ve)}}var A=Id(t,s,e,0,null,!1,!1,"",Od);return e._reactRootContainer=A,e[hn]=A.current,ka(e.nodeType===8?e.parentNode:e),Ss(),A}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var J=s;s=function(){var ve=Zi(te);J.call(ve)}}var te=Kl(e,0,!1,null,null,!1,!1,"",Od);return e._reactRootContainer=te,e[hn]=te.current,ka(e.nodeType===8?e.parentNode:e),Ss(function(){Ki(t,te,n,s)}),te}function to(e,t,n,s,l){var h=n._reactRootContainer;if(h){var A=h;if(typeof l=="function"){var J=l;l=function(){var te=Zi(A);J.call(te)}}Ki(t,A,e,l)}else A=Th(n,t,e,l,s);return Zi(A)}Fs=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Ur(t.pendingLanes);n!==0&&(zs(t,n|1),xr(t,Tt()),(pt&6)===0&&(oa=Tt()+500,zn()))}break;case 13:Ss(function(){var s=xn(e,1);if(s!==null){var l=cr();Vr(s,e,1,l)}}),Zl(e,1)}},os=function(e){if(e.tag===13){var t=xn(e,134217728);if(t!==null){var n=cr();Vr(t,e,134217728,n)}Zl(e,134217728)}},ri=function(e){if(e.tag===13){var t=qn(e),n=xn(e,t);if(n!==null){var s=cr();Vr(n,e,t,s)}Zl(e,t)}},ls=function(){return mt},cs=function(e,t){var n=mt;try{return mt=e,t()}finally{mt=n}},Pr=function(e,t,n){switch(t){case"input":if(W(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var l=yi(s);if(!l)throw Error(o(90));qe(s),W(s,l)}}}break;case"textarea":Fe(e,n);break;case"select":t=n.value,t!=null&&Ne(e,!!n.multiple,t,!1)}},_e=Wl,Nt=Ss;var Ih={usingClientEntryPoint:!1,Events:[Na,Vs,yi,et,ot,Wl]},La={findFiberByHostInstance:gs,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Ah={bundleType:La.bundleType,version:La.version,rendererPackageName:La.rendererPackageName,rendererConfig:La.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:M.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Kn(e),e===null?null:e.stateNode},findFiberByHostInstance:La.findFiberByHostInstance||Dh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ro=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ro.isDisabled&&ro.supportsFiber)try{rs=ro.inject(Ah),br=ro}catch{}}return yr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ih,yr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!ec(t))throw Error(o(200));return Ch(e,t,null,n)},yr.createRoot=function(e,t){if(!ec(e))throw Error(o(299));var n=!1,s="",l=Md;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=Kl(e,1,!1,null,null,n,!1,s,l),e[hn]=t.current,ka(e.nodeType===8?e.parentNode:e),new Xl(t)},yr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(o(188)):(e=Object.keys(e).join(","),Error(o(268,e)));return e=Kn(t),e=e===null?null:e.stateNode,e},yr.flushSync=function(e){return Ss(e)},yr.hydrate=function(e,t,n){if(!eo(t))throw Error(o(200));return to(null,e,t,!0,n)},yr.hydrateRoot=function(e,t,n){if(!ec(e))throw Error(o(405));var s=n!=null&&n.hydratedSources||null,l=!1,h="",A=Md;if(n!=null&&(n.unstable_strictMode===!0&&(l=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onRecoverableError!==void 0&&(A=n.onRecoverableError)),t=Id(t,null,e,1,n??null,l,!1,h,A),e[hn]=t.current,ka(e),s)for(e=0;e<s.length;e++)n=s[e],l=n._getVersion,l=l(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,l]:t.mutableSourceEagerHydrationData.push(n,l);return new Xi(t)},yr.render=function(e,t,n){if(!eo(t))throw Error(o(200));return to(null,e,t,!1,n)},yr.unmountComponentAtNode=function(e){if(!eo(e))throw Error(o(40));return e._reactRootContainer?(Ss(function(){to(null,null,e,!1,function(){e._reactRootContainer=null,e[hn]=null})}),!0):!1},yr.unstable_batchedUpdates=Wl,yr.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!eo(n))throw Error(o(200));if(e==null||e._reactInternals===void 0)throw Error(o(38));return to(e,t,n,!1,s)},yr.version="18.3.1-next-f1338f8080-20240426",yr}var qd;function qh(){if(qd)return nc.exports;qd=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(d){console.error(d)}}return a(),nc.exports=Bh(),nc.exports}var $d;function $h(){if($d)return so;$d=1;var a=qh();return so.createRoot=a.createRoot,so.hydrateRoot=a.hydrateRoot,so}var Hh=$h();const Wh=Wa(Hh);var ct=(a=>(a[a.Again=1]="Again",a[a.Hard=2]="Hard",a[a.Good=3]="Good",a[a.Easy=4]="Easy",a))(ct||{}),Ge=(a=>(a.Flashcard="flashcard",a.Quiz="quiz",a))(Ge||{});const Qh="cogniflow-sync";let ic=null;const xf=()=>(ic||(ic=new BroadcastChannel(Qh)),ic),un=()=>{xf().postMessage({type:"data-changed"})},Gh=a=>{const d=xf(),o=()=>{a()};return d.addEventListener("message",o),()=>{d.removeEventListener("message",o)}},Sc="Europe/Stockholm",Vh=()=>new Date().toLocaleDateString("sv-SE",{timeZone:Sc}),yf=()=>new Date().toLocaleString("sv-SE",{timeZone:Sc,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/ /g,"_").replace(/:/g,"-"),Jh=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleString("sv-SE",{timeZone:Sc,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(d){return console.error("Failed to format date string:",a,d),"Invalid Date"}},vf="CogniFlowDB",Yh=6,on="decks",Fr="folders",ln="deckSeries",cn="sessions",kn="reviews";let Gn=null;function Ut(){return Gn||(Gn=new Promise((a,d)=>{const o=indexedDB.open(vf,Yh);o.onblocked=v=>{console.error("IndexedDB open request blocked. Please close other tabs with this app open.",v),d(new Error("Database upgrade is required, but it is blocked by another open tab of this application. Please close all other tabs and reload."))},o.onerror=()=>{var v;console.error("IndexedDB error:",o.error),Gn=null,d(new Error(`IndexedDB error: ${((v=o.error)==null?void 0:v.message)||"Unknown error"}`))},o.onsuccess=()=>{const v=o.result;v.onclose=()=>{Gn=null,console.warn("Database connection closed.")},a(v)},o.onupgradeneeded=v=>{const p=v.target.result;if(p.objectStoreNames.contains(on)||p.createObjectStore(on,{keyPath:"id"}),p.objectStoreNames.contains(Fr)||p.createObjectStore(Fr,{keyPath:"id"}),v.oldVersion<3&&!p.objectStoreNames.contains(ln)&&p.createObjectStore(ln,{keyPath:"id"}),v.oldVersion<4&&!p.objectStoreNames.contains(cn)&&p.createObjectStore(cn,{keyPath:"id"}),v.oldVersion<5&&(p.objectStoreNames.contains(kn)||p.createObjectStore(kn,{keyPath:"id",autoIncrement:!0}).createIndex("timestamp","timestamp",{unique:!1})),v.oldVersion<6){const c=v.target.transaction;if(c){const f=c.objectStore(kn);f.indexNames.contains("deckId")||f.createIndex("deckId","deckId",{unique:!1})}}}}),Gn)}async function Nc(){const a=await Ut();return new Promise((d,o)=>{const c=a.transaction(on,"readonly").objectStore(on).getAll();c.onerror=()=>o("Error fetching decks"),c.onsuccess=()=>d(c.result)})}async function qa(a){if(a.length===0)return;const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(on,"readwrite"),c=p.objectStore(on);p.oncomplete=()=>{un(),o()},p.onerror=()=>{console.error("Transaction error adding/updating decks",p.error),v("Transaction error adding/updating decks")},a.forEach(f=>{const x=c.put(f);x.onerror=()=>{console.error(`Error putting deck ${f.name}`,x.error)}})})}async function Hd(a){await qa(a)}async function yc(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(on,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error deleting deck"),p.objectStore(on).delete(a)})}async function Kh(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(on,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error updating deck"),p.objectStore(on).put(a)})}async function _c(){const a=await Ut();return new Promise((d,o)=>{const c=a.transaction(Fr,"readonly").objectStore(Fr).getAll();c.onerror=()=>o("Error fetching folders"),c.onsuccess=()=>d(c.result)})}async function Zh(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(Fr,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error adding folder"),p.objectStore(Fr).add(a)})}async function Xh(a){if(a.length===0)return;const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(Fr,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>{console.error("Transaction error adding/updating folders",p.error),v("Transaction error adding/updating folders")};const c=p.objectStore(Fr);a.forEach(f=>{const x=c.put(f);x.onerror=()=>{console.error(`Error putting folder ${f.name}`,x.error)}})})}async function em(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(Fr,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error updating folder"),p.objectStore(Fr).put(a)})}async function tm(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(Fr,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error deleting folder"),p.objectStore(Fr).delete(a)})}async function Ec(){const a=await Ut();return new Promise((d,o)=>{const c=a.transaction(ln,"readonly").objectStore(ln).getAll();c.onerror=()=>o("Error fetching deck series"),c.onsuccess=()=>d(c.result)})}async function ao(a){if(a.length===0)return;const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(ln,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Transaction error adding deck series");const c=p.objectStore(ln);a.forEach(f=>c.put(f))})}async function Wd(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(ln,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Error updating deck series"),p.objectStore(ln).put(a)})}async function wf(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(ln,"readwrite");p.oncomplete=()=>{un(),o()},p.onerror=()=>v("Error deleting deck series"),p.objectStore(ln).delete(a)})}async function rm(a,d){const o=await Ut();return new Promise((v,p)=>{const c=o.transaction(cn,"readwrite");c.oncomplete=()=>v(),c.onerror=()=>p("Transaction error saving session state"),c.objectStore(cn).put({id:a,...d})})}async function nm(a){const d=await Ut();return new Promise((o,v)=>{const f=d.transaction(cn,"readonly").objectStore(cn).get(a);f.onerror=()=>v("Error fetching session state"),f.onsuccess=()=>o(f.result||null)})}async function vc(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(cn,"readwrite");p.oncomplete=()=>o(),p.onerror=()=>v("Transaction error deleting session state"),p.objectStore(cn).delete(a)})}async function sm(){const a=await Ut();return new Promise((d,o)=>{const c=a.transaction(cn,"readonly").objectStore(cn).getAllKeys();c.onerror=()=>o("Error fetching session keys"),c.onsuccess=()=>d(c.result)})}async function am(a){const d=await Ut();return new Promise((o,v)=>{const p=d.transaction(kn,"readwrite");p.oncomplete=()=>o(),p.onerror=()=>{console.error("Transaction error adding review log",p.error),v("Transaction error adding review log")},p.objectStore(kn).add(a)})}async function im(a){const d=await Ut();return new Promise((o,v)=>{const f=d.transaction(kn,"readonly").objectStore(kn).index("timestamp"),x=IDBKeyRange.lowerBound(a.toISOString()),g=f.getAll(x);g.onerror=()=>v("Error fetching review logs"),g.onsuccess=()=>o(g.result)})}async function om(a){const d=await Ut();return new Promise((o,v)=>{const x=d.transaction(kn,"readonly").objectStore(kn).index("deckId").getAll(a);x.onerror=()=>v("Error fetching reviews for deck"),x.onsuccess=()=>o(x.result)})}async function lm(){const[a,d,o]=await Promise.all([Nc(),_c(),Ec()]);if(a.length===0&&d.length===0&&o.length===0)throw new Error("There is no data to export.");const p=JSON.stringify({version:3,decks:a,folders:d,deckSeries:o},null,2),c=new Blob([p],{type:"application/json"}),f=URL.createObjectURL(c),x=document.createElement("a");x.style.display="none",x.href=f;const g=yf();return x.download=`cogniflow-backup-${g}.json`,document.body.appendChild(x),x.click(),window.URL.revokeObjectURL(f),document.body.removeChild(x),x.download}async function cm(){return Gn&&(await Gn).close(),new Promise((a,d)=>{const o=indexedDB.deleteDatabase(vf);o.onerror=v=>{console.error("Error deleting database.",v),d(new Error("Error deleting database."))},o.onsuccess=()=>{console.log("Database deleted successfully."),a()},o.onblocked=()=>{console.error("Database deletion blocked. Please close other tabs of this app and try again."),d(new Error("Deletion blocked. Please close other tabs of this app."))}})}const um=()=>{const[a,d]=L.useState(null);return L.useEffect(()=>{const v=p=>{p.preventDefault(),d(p)};return window.addEventListener("beforeinstallprompt",v),()=>{window.removeEventListener("beforeinstallprompt",v)}},[]),[a,()=>{a&&(a.prompt(),a.userChoice.then(v=>{v.outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),d(null)}))}]},dm=()=>{const[a,d]=L.useState(navigator.onLine);return L.useEffect(()=>{const o=()=>d(!0),v=()=>d(!1);return window.addEventListener("online",o),window.addEventListener("offline",v),()=>{window.removeEventListener("online",o),window.removeEventListener("offline",v)}},[]),a},fm=()=>dm()?null:r.jsx("div",{role:"status","aria-live":"assertive",className:"fixed bottom-0 left-0 right-0 bg-red-600 text-white text-center p-3 z-50 animate-fade-in",children:r.jsx("p",{className:"text-sm font-semibold",children:"You are currently offline. Some features may be unavailable."})}),hm={plus:r.jsxs(r.Fragment,{children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"upload-cloud":r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"}),r.jsx("polyline",{points:"16 16 12 12 8 16"}),r.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"})]}),x:r.jsxs(r.Fragment,{children:[r.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),r.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"chevron-left":r.jsx(r.Fragment,{children:r.jsx("polyline",{points:"15 18 9 12 15 6"})}),"trash-2":r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"3 6 5 6 21 6"}),r.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),r.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),r.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"check-circle":r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),r.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"x-circle":r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),r.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),download:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),r.jsx("polyline",{points:"7 10 12 15 17 10"}),r.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),laptop:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9h16z"}),r.jsx("rect",{x:"2",y:"17",width:"20",height:"4",rx:"1"})]}),menu:r.jsxs(r.Fragment,{children:[r.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),edit:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),r.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),save:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),r.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),r.jsx("polyline",{points:"7 3 7 8 15 8"})]}),sun:r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"5"}),r.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),r.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),r.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),r.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),r.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),r.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),r.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),r.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),moon:r.jsx(r.Fragment,{children:r.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),code:r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"16 18 22 12 16 6"}),r.jsx("polyline",{points:"8 6 2 12 8 18"})]}),"refresh-ccw":r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"1 4 1 10 7 10"}),r.jsx("polyline",{points:"23 20 23 14 17 14"}),r.jsx("path",{d:"M20.49 9A9 9 0 0 0 7.2 6.51"}),r.jsx("path",{d:"M3.51 15A9 9 0 0 0 16.8 17.49"})]}),broom:r.jsx(r.Fragment,{children:r.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),settings:r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"3"}),r.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),info:r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),r.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"chevron-down":r.jsx(r.Fragment,{children:r.jsx("polyline",{points:"6 9 12 15 18 9"})}),eye:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),r.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"eye-off":r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),r.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),zap:r.jsx(r.Fragment,{children:r.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"help-circle":r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"10"}),r.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),r.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),google:r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M17.64 9.2c0-.63-.06-1.25-.16-1.84H9v3.48h4.84c-.2 1.12-.84 2.08-1.74 2.71v2.26h2.92c1.7-1.56 2.68-3.88 2.68-6.61z"}),r.jsx("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.92-2.26c-.8.54-1.82.86-3.04.86-2.34 0-4.32-1.58-5.04-3.7H1v2.34C2.64 16.32 5.57 18 9 18z"}),r.jsx("path",{d:"M3.96 10.71c-.18-.54-.28-1.12-.28-1.71s.1-1.17.28-1.71V4.96H1c-.64 1.28-1 2.74-1 4.34s.36 3.06 1 4.34l2.96-2.34z"}),r.jsx("path",{d:"M9 3.6c1.32 0 2.52.45 3.44 1.34l2.6-2.6C13.46.8 11.43 0 9 0 5.57 0 2.64 1.68 1 4.34l2.96 2.34C4.68 4.54 6.66 3.6 9 3.6z"})]}),folder:r.jsx(r.Fragment,{children:r.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),"folder-plus":r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),r.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),r.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),"folder-edit":r.jsxs(r.Fragment,{children:[r.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),r.jsx("path",{d:"M14 13.5l2 2-4 4-2-2 4-4zm-1.5 2.5l2-2"})]}),list:r.jsxs(r.Fragment,{children:[r.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),r.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),r.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),r.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),r.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),r.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),lock:r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),unlock:r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),r.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),archive:r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),r.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),r.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),unarchive:r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),r.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),r.jsx("polyline",{points:"10 13 12 11 14 13"}),r.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"})]}),"arrow-down":r.jsxs(r.Fragment,{children:[r.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),r.jsx("polyline",{points:"19 12 12 19 5 12"})]}),monitor:r.jsxs(r.Fragment,{children:[r.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),r.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),r.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"more-vertical":r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"12",cy:"12",r:"1"}),r.jsx("circle",{cx:"12",cy:"5",r:"1"}),r.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),search:r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"11",cy:"11",r:"8"}),r.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),filter:r.jsx(r.Fragment,{children:r.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),layers:r.jsxs(r.Fragment,{children:[r.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),r.jsx("polyline",{points:"2 17 12 22 22 17"}),r.jsx("polyline",{points:"2 12 12 17 22 12"})]}),terminal:r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"4 17 10 11 4 5"}),r.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),"trending-up":r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),r.jsx("polyline",{points:"17 6 23 6 23 12"})]}),"grip-vertical":r.jsxs(r.Fragment,{children:[r.jsx("circle",{cx:"9",cy:"12",r:"1"}),r.jsx("circle",{cx:"9",cy:"5",r:"1"}),r.jsx("circle",{cx:"9",cy:"19",r:"1"}),r.jsx("circle",{cx:"15",cy:"12",r:"1"}),r.jsx("circle",{cx:"15",cy:"5",r:"1"}),r.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),repeat:r.jsxs(r.Fragment,{children:[r.jsx("polyline",{points:"17 1 21 5 17 9"}),r.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),r.jsx("polyline",{points:"7 23 3 19 7 15"}),r.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]})},le=({name:a,className:d="w-6 h-6",...o})=>r.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`${d} pointer-events-none`,...o,children:hm[a]}),ke=({children:a,variant:d="primary",size:o="md",className:v="",...p})=>{const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:pointer-events-none",f={primary:"bg-primary text-on-primary hover:bg-primary-hover focus:ring-primary",secondary:"bg-surface text-text border border-border hover:bg-border/20 focus:ring-primary",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-text-muted hover:bg-border/50 hover:text-text focus:ring-primary"},x={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return r.jsx("button",{className:`${c} ${f[d]} ${x[o]} ${v}`,...p,children:a})},mm='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',Er=(a,d)=>{const o=L.useRef([]);L.useEffect(()=>{if(d&&a.current){o.current=Array.from(a.current.querySelectorAll(mm));const v=o.current[0];v&&setTimeout(()=>v.focus(),100);const p=c=>{var g;if(c.key!=="Tab"||!((g=a.current)!=null&&g.contains(document.activeElement)))return;const f=o.current[0],x=o.current[o.current.length-1];c.shiftKey?document.activeElement===f&&(c.preventDefault(),x==null||x.focus()):document.activeElement===x&&(c.preventDefault(),f==null||f.focus())};return document.addEventListener("keydown",p),()=>{document.removeEventListener("keydown",p)}}},[d,a])},bf=L.createContext(void 0),Qd=()=>window.location.hash.startsWith("#/")?window.location.hash.substring(1):"/",pm=({children:a})=>{const[d,o]=L.useState(Qd()),v=L.useCallback(()=>{o(Qd())},[]);L.useEffect(()=>(window.addEventListener("hashchange",v),()=>{window.removeEventListener("hashchange",v)}),[v]);const p=L.useCallback(f=>{window.location.hash=`#${f}`},[]),c={path:d,navigate:p};return r.jsx(bf.Provider,{value:c,children:a})},jn=()=>{const a=L.useContext(bf);if(a===void 0)throw new Error("useRouter must be used within a RouterProvider");return a},Ft=({href:a,children:d,passAs:o,...v})=>{const{navigate:p}=jn(),c=x=>{x.currentTarget.tagName==="A"&&(x.metaKey||x.ctrlKey)||(x.preventDefault(),v.onClick&&v.onClick(x),p(a))},f=`#${a}`;return o?r.jsx(o,{...v,onClick:c,children:d}):r.jsx("a",{...v,href:f,onClick:c,children:d})},gm=({isOpen:a,onClose:d,onImport:o,onCreateSeries:v,onInstall:p})=>{const c=L.useRef(null);return Er(c,a),L.useEffect(()=>{const f=x=>{x.key==="Escape"&&d()};return a&&document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[a,d]),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 z-50 transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:d,"aria-hidden":"true"}),r.jsx("div",{ref:c,className:`fixed top-0 right-0 h-full w-full max-w-xs z-[51] transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"sidebar-title",children:r.jsxs("div",{className:"bg-surface shadow-xl h-full flex flex-col",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[r.jsx("h2",{id:"sidebar-title",className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Menu"}),r.jsx(ke,{variant:"ghost",onClick:d,className:"p-1 h-auto","aria-label":"Close menu",children:r.jsx(le,{name:"x"})})]}),r.jsxs("nav",{className:"flex-grow p-4 space-y-2",children:[r.jsxs(Ft,{href:"/",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"laptop",className:"w-6 h-6 mr-3"})," Home"]}),r.jsxs(Ft,{href:"/series",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"layers",className:"w-6 h-6 mr-3"})," Series"]}),r.jsxs(Ft,{href:"/decks",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"folder",className:"w-6 h-6 mr-3"})," Decks"]}),r.jsxs(Ft,{href:"/progress",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"trending-up",className:"w-6 h-6 mr-3"}),"Progress"]}),r.jsxs(Ft,{href:"/archive",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"archive",className:"w-6 h-6 mr-3"}),"Archive"]}),r.jsxs(Ft,{href:"/trash",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"trash-2",className:"w-6 h-6 mr-3"}),"Trash"]}),r.jsxs(Ft,{href:"/settings",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"settings",className:"w-6 h-6 mr-3"}),"Settings"]}),r.jsxs(Ft,{href:"/instructions/json",onClick:d,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[r.jsx(le,{name:"help-circle",className:"w-6 h-6 mr-3"}),"JSON Guide"]})]}),r.jsxs("div",{className:"p-4 border-t border-border space-y-2",children:[r.jsxs(ke,{variant:"primary",onClick:v,className:"w-full",children:[r.jsx(le,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]}),r.jsxs(ke,{variant:"secondary",onClick:o,className:"w-full",children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import Deck"]}),p&&r.jsxs(ke,{variant:"secondary",onClick:p,className:"w-full",children:[r.jsx(le,{name:"download",className:"w-5 h-5 mr-2"}),"Install App"]})]})]})})]})},xm={success:r.jsx(le,{name:"check-circle",className:"w-6 h-6 text-green-500"}),error:r.jsx(le,{name:"x-circle",className:"w-6 h-6 text-red-500"}),info:r.jsx(le,{name:"info",className:"w-6 h-6 text-blue-500"})},ym=({message:a,onDismiss:d})=>(L.useEffect(()=>{const o=setTimeout(()=>{d(a.id)},5e3);return()=>{clearTimeout(o)}},[a.id,d]),r.jsx("div",{className:"bg-surface shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden animate-fade-in-right",children:r.jsx("div",{className:"p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:xm[a.type]}),r.jsx("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:r.jsx("p",{className:"text-sm font-medium text-text break-words",children:a.message})}),r.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:r.jsxs("button",{onClick:()=>d(a.id),className:"bg-surface rounded-md inline-flex text-text-muted hover:text-text focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-surface focus:ring-primary",children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx(le,{name:"x",className:"h-5 w-5"})]})})]})})})),kf=L.createContext(void 0),vm=({children:a})=>{const[d,o]=L.useState([]),v=L.useCallback((c,f)=>{const x=crypto.randomUUID();o(g=>[...g,{id:x,message:c,type:f}])},[]),p=L.useCallback(c=>{o(f=>f.filter(x=>x.id!==c))},[]);return r.jsxs(kf.Provider,{value:{addToast:v},children:[a,r.jsx("div",{className:"fixed top-5 right-5 z-[100] w-full max-w-xs space-y-3",children:d.map(c=>r.jsx(ym,{message:c,onDismiss:p},c.id))})]})},vr=()=>{const a=L.useContext(kf);if(a===void 0)throw new Error("useToast must be used within a ToastProvider");return a},Vn=({size:a="md"})=>{const d={sm:"h-6 w-6",md:"h-10 w-10",lg:"h-16 w-16"};return r.jsx("div",{className:"flex justify-center items-center p-4",role:"status","aria-label":"Loading",children:r.jsxs("svg",{className:`animate-spin text-blue-500 dark:text-blue-400 ${d[a]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},Ds=2.5,wc=1.3,wm=1,bm=1.2,km=1.3,jm={1:-.2,2:-.15,3:0,4:.15},jf=a=>{try{if(!a.trim())throw new Error("File content is empty.");const d=JSON.parse(a);if(typeof d=="object"&&d!==null&&"version"in d&&Array.isArray(d.decks)){if(d.version>3)throw new Error(`Unsupported backup version: ${d.version}`);const o=d.decks,v=d.folders||[],p=(Array.isArray(d.deckSeries)?d.deckSeries:[]).filter(c=>c&&typeof c.id=="string"&&typeof c.name=="string").map(c=>{if(Array.isArray(c.levels))return c.levels.forEach(f=>{Array.isArray(f.deckIds)||(f.deckIds=[])}),c;if(Array.isArray(c.deckIds)){const f={...c};return f.levels=[{title:"Decks",deckIds:f.deckIds}],delete f.deckIds,f}return{...c,levels:[]}});for(const c of o)if(typeof c.id!="string"||typeof c.name!="string"||!c.type)throw new Error("Invalid deck structure in backup file.");for(const c of v)if(typeof c.id!="string"||typeof c.name!="string")throw new Error("Invalid folder structure in backup file.");return{decks:o,folders:v,deckSeries:p}}if(Array.isArray(d)){const o=d.map(v=>(v.type||(Array.isArray(v.cards)?v.type=Ge.Flashcard:Array.isArray(v.questions)&&(v.type=Ge.Quiz)),v));for(const v of o)if(typeof v.id!="string"||typeof v.name!="string"||v.type!==Ge.Flashcard&&v.type!==Ge.Quiz)throw new Error("Invalid backup file. One or more decks have an incorrect structure.");return{decks:o,folders:[],deckSeries:[]}}throw new Error("The file is not a valid CogniFlow backup file.")}catch(d){throw console.error("Failed to parse backup file:",d),new Error(d instanceof Error?d.message:"Invalid JSON format")}},po=a=>{try{if(!a.trim())throw new Error("Pasted content is empty.");const d=JSON.parse(a);if(typeof d=="object"&&d!==null&&"seriesName"in d&&"levels"in d){if(typeof d.seriesName!="string"||typeof d.seriesDescription!="string"||!Array.isArray(d.levels))throw new Error("Invalid series format. Must have 'seriesName' (string), 'seriesDescription' (string), and a 'levels' (array).");for(const o of d.levels){if(typeof o.title!="string"||!Array.isArray(o.decks))throw new Error("Each level in the series must have a 'title' (string) and a 'decks' (array).");for(const v of o.decks)if(typeof v.name!="string"||typeof v.description!="string"||!Array.isArray(v.questions))throw new Error("Each deck in a level must be a valid quiz deck object with 'name', 'description', and 'questions' properties.")}return{type:"quiz_series",data:d}}if(Array.isArray(d)){const o=[];for(const v of d){if(typeof v.front!="string"||typeof v.back!="string")throw new Error("Each item in the array must be an object with 'front' and 'back' string properties.");o.push({front:v.front,back:v.back})}return{type:Ge.Flashcard,data:o}}if(typeof d=="object"&&d!==null&&"questions"in d){if(typeof d.name!="string"||typeof d.description!="string"||!Array.isArray(d.questions))throw new Error("Quiz JSON must be an object with 'name' (string), 'description' (string), and 'questions' (array) properties.");for(const o of d.questions)if(typeof o.questionText!="string"||!Array.isArray(o.options)||typeof o.correctAnswerId!="string")throw new Error("Each question in a quiz must have 'questionText', an 'options' array, and a 'correctAnswerId'.");return{type:Ge.Quiz,data:d}}throw new Error("Unsupported JSON structure. Expected an array of flashcards, a single quiz object, or a series object.")}catch(d){throw console.error("Failed to parse JSON:",d),new Error(d instanceof Error?d.message:"Invalid JSON format")}},Sm=(a,d)=>{try{if(!a.trim())throw new Error("Pasted content is empty.");const o=JSON.parse(a);if(!Array.isArray(o))throw new Error("JSON must be an array of items.");if(o.length===0)return[];if(d===Ge.Flashcard){const v=[];for(const p of o){if(typeof p.front!="string"||typeof p.back!="string")throw new Error("Each item in the array must be an object with 'front' and 'back' string properties.");v.push({front:p.front,back:p.back})}return v}else{const v=[];for(const p of o){if(typeof p.questionText!="string"||!Array.isArray(p.options)||typeof p.correctAnswerId!="string")throw new Error("Each question must have 'questionText', an 'options' array, and a 'correctAnswerId'.");v.push(p)}return v}}catch(o){throw console.error("Failed to parse items JSON:",o),new Error(o instanceof Error?o.message:"Invalid JSON format")}},Cc=a=>{const d=new Date;return d.setHours(0,0,0,0),a.map(o=>({id:crypto.randomUUID(),front:o.front,back:o.back,dueDate:d.toISOString(),interval:0,easeFactor:Ds,masteryLevel:0,lapses:0}))},ca=a=>{const d=new Date;return d.setHours(0,0,0,0),a.map(o=>({...o,id:crypto.randomUUID(),dueDate:d.toISOString(),interval:0,easeFactor:Ds,masteryLevel:0,lapses:0}))},Nm=a=>{try{return{type:"backup",data:jf(a)}}catch{}try{const d=po(a);return{type:d.type,data:d.data}}catch{}return null};function io(a){throw new Error('Could not dynamically require "'+a+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var oc={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Gd;function _m(){return Gd||(Gd=1,function(a,d){(function(o){a.exports=o()})(function(){return function o(v,p,c){function f(m,T){if(!p[m]){if(!v[m]){var S=typeof io=="function"&&io;if(!T&&S)return S(m,!0);if(x)return x(m,!0);var E=new Error("Cannot find module '"+m+"'");throw E.code="MODULE_NOT_FOUND",E}var k=p[m]={exports:{}};v[m][0].call(k.exports,function(C){var b=v[m][1][C];return f(b||C)},k,k.exports,o,v,p,c)}return p[m].exports}for(var x=typeof io=="function"&&io,g=0;g<c.length;g++)f(c[g]);return f}({1:[function(o,v,p){var c=o("./utils"),f=o("./support"),x="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(g){for(var m,T,S,E,k,C,b,D=[],I=0,O=g.length,z=O,M=c.getTypeOf(g)!=="string";I<g.length;)z=O-I,S=M?(m=g[I++],T=I<O?g[I++]:0,I<O?g[I++]:0):(m=g.charCodeAt(I++),T=I<O?g.charCodeAt(I++):0,I<O?g.charCodeAt(I++):0),E=m>>2,k=(3&m)<<4|T>>4,C=1<z?(15&T)<<2|S>>6:64,b=2<z?63&S:64,D.push(x.charAt(E)+x.charAt(k)+x.charAt(C)+x.charAt(b));return D.join("")},p.decode=function(g){var m,T,S,E,k,C,b=0,D=0,I="data:";if(g.substr(0,I.length)===I)throw new Error("Invalid base64 input, it looks like a data url.");var O,z=3*(g=g.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(g.charAt(g.length-1)===x.charAt(64)&&z--,g.charAt(g.length-2)===x.charAt(64)&&z--,z%1!=0)throw new Error("Invalid base64 input, bad content length.");for(O=f.uint8array?new Uint8Array(0|z):new Array(0|z);b<g.length;)m=x.indexOf(g.charAt(b++))<<2|(E=x.indexOf(g.charAt(b++)))>>4,T=(15&E)<<4|(k=x.indexOf(g.charAt(b++)))>>2,S=(3&k)<<6|(C=x.indexOf(g.charAt(b++))),O[D++]=m,k!==64&&(O[D++]=T),C!==64&&(O[D++]=S);return O}},{"./support":30,"./utils":32}],2:[function(o,v,p){var c=o("./external"),f=o("./stream/DataWorker"),x=o("./stream/Crc32Probe"),g=o("./stream/DataLengthProbe");function m(T,S,E,k,C){this.compressedSize=T,this.uncompressedSize=S,this.crc32=E,this.compression=k,this.compressedContent=C}m.prototype={getContentWorker:function(){var T=new f(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new g("data_length")),S=this;return T.on("end",function(){if(this.streamInfo.data_length!==S.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),T},getCompressedWorker:function(){return new f(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},m.createWorkerFrom=function(T,S,E){return T.pipe(new x).pipe(new g("uncompressedSize")).pipe(S.compressWorker(E)).pipe(new g("compressedSize")).withStreamInfo("compression",S)},v.exports=m},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(o,v,p){var c=o("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},p.DEFLATE=o("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(o,v,p){var c=o("./utils"),f=function(){for(var x,g=[],m=0;m<256;m++){x=m;for(var T=0;T<8;T++)x=1&x?3988292384^x>>>1:x>>>1;g[m]=x}return g}();v.exports=function(x,g){return x!==void 0&&x.length?c.getTypeOf(x)!=="string"?function(m,T,S,E){var k=f,C=E+S;m^=-1;for(var b=E;b<C;b++)m=m>>>8^k[255&(m^T[b])];return-1^m}(0|g,x,x.length,0):function(m,T,S,E){var k=f,C=E+S;m^=-1;for(var b=E;b<C;b++)m=m>>>8^k[255&(m^T.charCodeAt(b))];return-1^m}(0|g,x,x.length,0):0}},{"./utils":32}],5:[function(o,v,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(o,v,p){var c=null;c=typeof Promise<"u"?Promise:o("lie"),v.exports={Promise:c}},{lie:37}],7:[function(o,v,p){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",f=o("pako"),x=o("./utils"),g=o("./stream/GenericWorker"),m=c?"uint8array":"array";function T(S,E){g.call(this,"FlateWorker/"+S),this._pako=null,this._pakoAction=S,this._pakoOptions=E,this.meta={}}p.magic="\b\0",x.inherits(T,g),T.prototype.processChunk=function(S){this.meta=S.meta,this._pako===null&&this._createPako(),this._pako.push(x.transformTo(m,S.data),!1)},T.prototype.flush=function(){g.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},T.prototype.cleanUp=function(){g.prototype.cleanUp.call(this),this._pako=null},T.prototype._createPako=function(){this._pako=new f[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var S=this;this._pako.onData=function(E){S.push({data:E,meta:S.meta})}},p.compressWorker=function(S){return new T("Deflate",S)},p.uncompressWorker=function(){return new T("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(o,v,p){function c(k,C){var b,D="";for(b=0;b<C;b++)D+=String.fromCharCode(255&k),k>>>=8;return D}function f(k,C,b,D,I,O){var z,M,R=k.file,G=k.compression,Q=O!==m.utf8encode,ne=x.transformTo("string",O(R.name)),V=x.transformTo("string",m.utf8encode(R.name)),ee=R.comment,ae=x.transformTo("string",O(ee)),$=x.transformTo("string",m.utf8encode(ee)),K=V.length!==R.name.length,_=$.length!==ee.length,xe="",je="",re="",fe=R.dir,ie=R.date,P={crc32:0,compressedSize:0,uncompressedSize:0};C&&!b||(P.crc32=k.crc32,P.compressedSize=k.compressedSize,P.uncompressedSize=k.uncompressedSize);var w=0;C&&(w|=8),Q||!K&&!_||(w|=2048);var N=0,B=0;fe&&(N|=16),I==="UNIX"?(B=798,N|=function(U,X){var he=U;return U||(he=X?16893:33204),(65535&he)<<16}(R.unixPermissions,fe)):(B=20,N|=function(U){return 63&(U||0)}(R.dosPermissions)),z=ie.getUTCHours(),z<<=6,z|=ie.getUTCMinutes(),z<<=5,z|=ie.getUTCSeconds()/2,M=ie.getUTCFullYear()-1980,M<<=4,M|=ie.getUTCMonth()+1,M<<=5,M|=ie.getUTCDate(),K&&(je=c(1,1)+c(T(ne),4)+V,xe+="up"+c(je.length,2)+je),_&&(re=c(1,1)+c(T(ae),4)+$,xe+="uc"+c(re.length,2)+re);var H="";return H+=`
\0`,H+=c(w,2),H+=G.magic,H+=c(z,2),H+=c(M,2),H+=c(P.crc32,4),H+=c(P.compressedSize,4),H+=c(P.uncompressedSize,4),H+=c(ne.length,2),H+=c(xe.length,2),{fileRecord:S.LOCAL_FILE_HEADER+H+ne+xe,dirRecord:S.CENTRAL_FILE_HEADER+c(B,2)+H+c(ae.length,2)+"\0\0\0\0"+c(N,4)+c(D,4)+ne+xe+ae}}var x=o("../utils"),g=o("../stream/GenericWorker"),m=o("../utf8"),T=o("../crc32"),S=o("../signature");function E(k,C,b,D){g.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=C,this.zipPlatform=b,this.encodeFileName=D,this.streamFiles=k,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}x.inherits(E,g),E.prototype.push=function(k){var C=k.meta.percent||0,b=this.entriesCount,D=this._sources.length;this.accumulate?this.contentBuffer.push(k):(this.bytesWritten+=k.data.length,g.prototype.push.call(this,{data:k.data,meta:{currentFile:this.currentFile,percent:b?(C+100*(b-D-1))/b:100}}))},E.prototype.openedSource=function(k){this.currentSourceOffset=this.bytesWritten,this.currentFile=k.file.name;var C=this.streamFiles&&!k.file.dir;if(C){var b=f(k,C,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:b.fileRecord,meta:{percent:0}})}else this.accumulate=!0},E.prototype.closedSource=function(k){this.accumulate=!1;var C=this.streamFiles&&!k.file.dir,b=f(k,C,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(b.dirRecord),C)this.push({data:function(D){return S.DATA_DESCRIPTOR+c(D.crc32,4)+c(D.compressedSize,4)+c(D.uncompressedSize,4)}(k),meta:{percent:100}});else for(this.push({data:b.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},E.prototype.flush=function(){for(var k=this.bytesWritten,C=0;C<this.dirRecords.length;C++)this.push({data:this.dirRecords[C],meta:{percent:100}});var b=this.bytesWritten-k,D=function(I,O,z,M,R){var G=x.transformTo("string",R(M));return S.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(I,2)+c(I,2)+c(O,4)+c(z,4)+c(G.length,2)+G}(this.dirRecords.length,b,k,this.zipComment,this.encodeFileName);this.push({data:D,meta:{percent:100}})},E.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},E.prototype.registerPrevious=function(k){this._sources.push(k);var C=this;return k.on("data",function(b){C.processChunk(b)}),k.on("end",function(){C.closedSource(C.previous.streamInfo),C._sources.length?C.prepareNextSource():C.end()}),k.on("error",function(b){C.error(b)}),this},E.prototype.resume=function(){return!!g.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},E.prototype.error=function(k){var C=this._sources;if(!g.prototype.error.call(this,k))return!1;for(var b=0;b<C.length;b++)try{C[b].error(k)}catch{}return!0},E.prototype.lock=function(){g.prototype.lock.call(this);for(var k=this._sources,C=0;C<k.length;C++)k[C].lock()},v.exports=E},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(o,v,p){var c=o("../compressions"),f=o("./ZipFileWorker");p.generateWorker=function(x,g,m){var T=new f(g.streamFiles,m,g.platform,g.encodeFileName),S=0;try{x.forEach(function(E,k){S++;var C=function(O,z){var M=O||z,R=c[M];if(!R)throw new Error(M+" is not a valid compression method !");return R}(k.options.compression,g.compression),b=k.options.compressionOptions||g.compressionOptions||{},D=k.dir,I=k.date;k._compressWorker(C,b).withStreamInfo("file",{name:E,dir:D,date:I,comment:k.comment||"",unixPermissions:k.unixPermissions,dosPermissions:k.dosPermissions}).pipe(T)}),T.entriesCount=S}catch(E){T.error(E)}return T}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(o,v,p){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var f=new c;for(var x in this)typeof this[x]!="function"&&(f[x]=this[x]);return f}}(c.prototype=o("./object")).loadAsync=o("./load"),c.support=o("./support"),c.defaults=o("./defaults"),c.version="3.10.1",c.loadAsync=function(f,x){return new c().loadAsync(f,x)},c.external=o("./external"),v.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(o,v,p){var c=o("./utils"),f=o("./external"),x=o("./utf8"),g=o("./zipEntries"),m=o("./stream/Crc32Probe"),T=o("./nodejsUtils");function S(E){return new f.Promise(function(k,C){var b=E.decompressed.getContentWorker().pipe(new m);b.on("error",function(D){C(D)}).on("end",function(){b.streamInfo.crc32!==E.decompressed.crc32?C(new Error("Corrupted zip : CRC32 mismatch")):k()}).resume()})}v.exports=function(E,k){var C=this;return k=c.extend(k||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:x.utf8decode}),T.isNode&&T.isStream(E)?f.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",E,!0,k.optimizedBinaryString,k.base64).then(function(b){var D=new g(k);return D.load(b),D}).then(function(b){var D=[f.Promise.resolve(b)],I=b.files;if(k.checkCRC32)for(var O=0;O<I.length;O++)D.push(S(I[O]));return f.Promise.all(D)}).then(function(b){for(var D=b.shift(),I=D.files,O=0;O<I.length;O++){var z=I[O],M=z.fileNameStr,R=c.resolve(z.fileNameStr);C.file(R,z.decompressed,{binary:!0,optimizedBinaryString:!0,date:z.date,dir:z.dir,comment:z.fileCommentStr.length?z.fileCommentStr:null,unixPermissions:z.unixPermissions,dosPermissions:z.dosPermissions,createFolders:k.createFolders}),z.dir||(C.file(R).unsafeOriginalName=M)}return D.zipComment.length&&(C.comment=D.zipComment),C})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(o,v,p){var c=o("../utils"),f=o("../stream/GenericWorker");function x(g,m){f.call(this,"Nodejs stream input adapter for "+g),this._upstreamEnded=!1,this._bindStream(m)}c.inherits(x,f),x.prototype._bindStream=function(g){var m=this;(this._stream=g).pause(),g.on("data",function(T){m.push({data:T,meta:{percent:0}})}).on("error",function(T){m.isPaused?this.generatedError=T:m.error(T)}).on("end",function(){m.isPaused?m._upstreamEnded=!0:m.end()})},x.prototype.pause=function(){return!!f.prototype.pause.call(this)&&(this._stream.pause(),!0)},x.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},v.exports=x},{"../stream/GenericWorker":28,"../utils":32}],13:[function(o,v,p){var c=o("readable-stream").Readable;function f(x,g,m){c.call(this,g),this._helper=x;var T=this;x.on("data",function(S,E){T.push(S)||T._helper.pause(),m&&m(E)}).on("error",function(S){T.emit("error",S)}).on("end",function(){T.push(null)})}o("../utils").inherits(f,c),f.prototype._read=function(){this._helper.resume()},v.exports=f},{"../utils":32,"readable-stream":16}],14:[function(o,v,p){v.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,f){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,f);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,f)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var f=new Buffer(c);return f.fill(0),f},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(o,v,p){function c(R,G,Q){var ne,V=x.getTypeOf(G),ee=x.extend(Q||{},T);ee.date=ee.date||new Date,ee.compression!==null&&(ee.compression=ee.compression.toUpperCase()),typeof ee.unixPermissions=="string"&&(ee.unixPermissions=parseInt(ee.unixPermissions,8)),ee.unixPermissions&&16384&ee.unixPermissions&&(ee.dir=!0),ee.dosPermissions&&16&ee.dosPermissions&&(ee.dir=!0),ee.dir&&(R=I(R)),ee.createFolders&&(ne=D(R))&&O.call(this,ne,!0);var ae=V==="string"&&ee.binary===!1&&ee.base64===!1;Q&&Q.binary!==void 0||(ee.binary=!ae),(G instanceof S&&G.uncompressedSize===0||ee.dir||!G||G.length===0)&&(ee.base64=!1,ee.binary=!0,G="",ee.compression="STORE",V="string");var $=null;$=G instanceof S||G instanceof g?G:C.isNode&&C.isStream(G)?new b(R,G):x.prepareContent(R,G,ee.binary,ee.optimizedBinaryString,ee.base64);var K=new E(R,$,ee);this.files[R]=K}var f=o("./utf8"),x=o("./utils"),g=o("./stream/GenericWorker"),m=o("./stream/StreamHelper"),T=o("./defaults"),S=o("./compressedObject"),E=o("./zipObject"),k=o("./generate"),C=o("./nodejsUtils"),b=o("./nodejs/NodejsStreamInputAdapter"),D=function(R){R.slice(-1)==="/"&&(R=R.substring(0,R.length-1));var G=R.lastIndexOf("/");return 0<G?R.substring(0,G):""},I=function(R){return R.slice(-1)!=="/"&&(R+="/"),R},O=function(R,G){return G=G!==void 0?G:T.createFolders,R=I(R),this.files[R]||c.call(this,R,null,{dir:!0,createFolders:G}),this.files[R]};function z(R){return Object.prototype.toString.call(R)==="[object RegExp]"}var M={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(R){var G,Q,ne;for(G in this.files)ne=this.files[G],(Q=G.slice(this.root.length,G.length))&&G.slice(0,this.root.length)===this.root&&R(Q,ne)},filter:function(R){var G=[];return this.forEach(function(Q,ne){R(Q,ne)&&G.push(ne)}),G},file:function(R,G,Q){if(arguments.length!==1)return R=this.root+R,c.call(this,R,G,Q),this;if(z(R)){var ne=R;return this.filter(function(ee,ae){return!ae.dir&&ne.test(ee)})}var V=this.files[this.root+R];return V&&!V.dir?V:null},folder:function(R){if(!R)return this;if(z(R))return this.filter(function(V,ee){return ee.dir&&R.test(V)});var G=this.root+R,Q=O.call(this,G),ne=this.clone();return ne.root=Q.name,ne},remove:function(R){R=this.root+R;var G=this.files[R];if(G||(R.slice(-1)!=="/"&&(R+="/"),G=this.files[R]),G&&!G.dir)delete this.files[R];else for(var Q=this.filter(function(V,ee){return ee.name.slice(0,R.length)===R}),ne=0;ne<Q.length;ne++)delete this.files[Q[ne].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(R){var G,Q={};try{if((Q=x.extend(R||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:f.utf8encode})).type=Q.type.toLowerCase(),Q.compression=Q.compression.toUpperCase(),Q.type==="binarystring"&&(Q.type="string"),!Q.type)throw new Error("No output type specified.");x.checkSupport(Q.type),Q.platform!=="darwin"&&Q.platform!=="freebsd"&&Q.platform!=="linux"&&Q.platform!=="sunos"||(Q.platform="UNIX"),Q.platform==="win32"&&(Q.platform="DOS");var ne=Q.comment||this.comment||"";G=k.generateWorker(this,Q,ne)}catch(V){(G=new g("error")).error(V)}return new m(G,Q.type||"string",Q.mimeType)},generateAsync:function(R,G){return this.generateInternalStream(R).accumulate(G)},generateNodeStream:function(R,G){return(R=R||{}).type||(R.type="nodebuffer"),this.generateInternalStream(R).toNodejsStream(G)}};v.exports=M},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(o,v,p){v.exports=o("stream")},{stream:void 0}],17:[function(o,v,p){var c=o("./DataReader");function f(x){c.call(this,x);for(var g=0;g<this.data.length;g++)x[g]=255&x[g]}o("../utils").inherits(f,c),f.prototype.byteAt=function(x){return this.data[this.zero+x]},f.prototype.lastIndexOfSignature=function(x){for(var g=x.charCodeAt(0),m=x.charCodeAt(1),T=x.charCodeAt(2),S=x.charCodeAt(3),E=this.length-4;0<=E;--E)if(this.data[E]===g&&this.data[E+1]===m&&this.data[E+2]===T&&this.data[E+3]===S)return E-this.zero;return-1},f.prototype.readAndCheckSignature=function(x){var g=x.charCodeAt(0),m=x.charCodeAt(1),T=x.charCodeAt(2),S=x.charCodeAt(3),E=this.readData(4);return g===E[0]&&m===E[1]&&T===E[2]&&S===E[3]},f.prototype.readData=function(x){if(this.checkOffset(x),x===0)return[];var g=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,g},v.exports=f},{"../utils":32,"./DataReader":18}],18:[function(o,v,p){var c=o("../utils");function f(x){this.data=x,this.length=x.length,this.index=0,this.zero=0}f.prototype={checkOffset:function(x){this.checkIndex(this.index+x)},checkIndex:function(x){if(this.length<this.zero+x||x<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+x+"). Corrupted zip ?")},setIndex:function(x){this.checkIndex(x),this.index=x},skip:function(x){this.setIndex(this.index+x)},byteAt:function(){},readInt:function(x){var g,m=0;for(this.checkOffset(x),g=this.index+x-1;g>=this.index;g--)m=(m<<8)+this.byteAt(g);return this.index+=x,m},readString:function(x){return c.transformTo("string",this.readData(x))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var x=this.readInt(4);return new Date(Date.UTC(1980+(x>>25&127),(x>>21&15)-1,x>>16&31,x>>11&31,x>>5&63,(31&x)<<1))}},v.exports=f},{"../utils":32}],19:[function(o,v,p){var c=o("./Uint8ArrayReader");function f(x){c.call(this,x)}o("../utils").inherits(f,c),f.prototype.readData=function(x){this.checkOffset(x);var g=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,g},v.exports=f},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(o,v,p){var c=o("./DataReader");function f(x){c.call(this,x)}o("../utils").inherits(f,c),f.prototype.byteAt=function(x){return this.data.charCodeAt(this.zero+x)},f.prototype.lastIndexOfSignature=function(x){return this.data.lastIndexOf(x)-this.zero},f.prototype.readAndCheckSignature=function(x){return x===this.readData(4)},f.prototype.readData=function(x){this.checkOffset(x);var g=this.data.slice(this.zero+this.index,this.zero+this.index+x);return this.index+=x,g},v.exports=f},{"../utils":32,"./DataReader":18}],21:[function(o,v,p){var c=o("./ArrayReader");function f(x){c.call(this,x)}o("../utils").inherits(f,c),f.prototype.readData=function(x){if(this.checkOffset(x),x===0)return new Uint8Array(0);var g=this.data.subarray(this.zero+this.index,this.zero+this.index+x);return this.index+=x,g},v.exports=f},{"../utils":32,"./ArrayReader":17}],22:[function(o,v,p){var c=o("../utils"),f=o("../support"),x=o("./ArrayReader"),g=o("./StringReader"),m=o("./NodeBufferReader"),T=o("./Uint8ArrayReader");v.exports=function(S){var E=c.getTypeOf(S);return c.checkSupport(E),E!=="string"||f.uint8array?E==="nodebuffer"?new m(S):f.uint8array?new T(c.transformTo("uint8array",S)):new x(c.transformTo("array",S)):new g(S)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(o,v,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(o,v,p){var c=o("./GenericWorker"),f=o("../utils");function x(g){c.call(this,"ConvertWorker to "+g),this.destType=g}f.inherits(x,c),x.prototype.processChunk=function(g){this.push({data:f.transformTo(this.destType,g.data),meta:g.meta})},v.exports=x},{"../utils":32,"./GenericWorker":28}],25:[function(o,v,p){var c=o("./GenericWorker"),f=o("../crc32");function x(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o("../utils").inherits(x,c),x.prototype.processChunk=function(g){this.streamInfo.crc32=f(g.data,this.streamInfo.crc32||0),this.push(g)},v.exports=x},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(o,v,p){var c=o("../utils"),f=o("./GenericWorker");function x(g){f.call(this,"DataLengthProbe for "+g),this.propName=g,this.withStreamInfo(g,0)}c.inherits(x,f),x.prototype.processChunk=function(g){if(g){var m=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=m+g.data.length}f.prototype.processChunk.call(this,g)},v.exports=x},{"../utils":32,"./GenericWorker":28}],27:[function(o,v,p){var c=o("../utils"),f=o("./GenericWorker");function x(g){f.call(this,"DataWorker");var m=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,g.then(function(T){m.dataIsReady=!0,m.data=T,m.max=T&&T.length||0,m.type=c.getTypeOf(T),m.isPaused||m._tickAndRepeat()},function(T){m.error(T)})}c.inherits(x,f),x.prototype.cleanUp=function(){f.prototype.cleanUp.call(this),this.data=null},x.prototype.resume=function(){return!!f.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},x.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},x.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var g=null,m=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":g=this.data.substring(this.index,m);break;case"uint8array":g=this.data.subarray(this.index,m);break;case"array":case"nodebuffer":g=this.data.slice(this.index,m)}return this.index=m,this.push({data:g,meta:{percent:this.max?this.index/this.max*100:0}})},v.exports=x},{"../utils":32,"./GenericWorker":28}],28:[function(o,v,p){function c(f){this.name=f||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(f){this.emit("data",f)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(f){this.emit("error",f)}return!0},error:function(f){return!this.isFinished&&(this.isPaused?this.generatedError=f:(this.isFinished=!0,this.emit("error",f),this.previous&&this.previous.error(f),this.cleanUp()),!0)},on:function(f,x){return this._listeners[f].push(x),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(f,x){if(this._listeners[f])for(var g=0;g<this._listeners[f].length;g++)this._listeners[f][g].call(this,x)},pipe:function(f){return f.registerPrevious(this)},registerPrevious:function(f){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=f.streamInfo,this.mergeStreamInfo(),this.previous=f;var x=this;return f.on("data",function(g){x.processChunk(g)}),f.on("end",function(){x.end()}),f.on("error",function(g){x.error(g)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var f=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),f=!0),this.previous&&this.previous.resume(),!f},flush:function(){},processChunk:function(f){this.push(f)},withStreamInfo:function(f,x){return this.extraStreamInfo[f]=x,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var f in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,f)&&(this.streamInfo[f]=this.extraStreamInfo[f])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var f="Worker "+this.name;return this.previous?this.previous+" -> "+f:f}},v.exports=c},{}],29:[function(o,v,p){var c=o("../utils"),f=o("./ConvertWorker"),x=o("./GenericWorker"),g=o("../base64"),m=o("../support"),T=o("../external"),S=null;if(m.nodestream)try{S=o("../nodejs/NodejsStreamOutputAdapter")}catch{}function E(C,b){return new T.Promise(function(D,I){var O=[],z=C._internalType,M=C._outputType,R=C._mimeType;C.on("data",function(G,Q){O.push(G),b&&b(Q)}).on("error",function(G){O=[],I(G)}).on("end",function(){try{var G=function(Q,ne,V){switch(Q){case"blob":return c.newBlob(c.transformTo("arraybuffer",ne),V);case"base64":return g.encode(ne);default:return c.transformTo(Q,ne)}}(M,function(Q,ne){var V,ee=0,ae=null,$=0;for(V=0;V<ne.length;V++)$+=ne[V].length;switch(Q){case"string":return ne.join("");case"array":return Array.prototype.concat.apply([],ne);case"uint8array":for(ae=new Uint8Array($),V=0;V<ne.length;V++)ae.set(ne[V],ee),ee+=ne[V].length;return ae;case"nodebuffer":return Buffer.concat(ne);default:throw new Error("concat : unsupported type '"+Q+"'")}}(z,O),R);D(G)}catch(Q){I(Q)}O=[]}).resume()})}function k(C,b,D){var I=b;switch(b){case"blob":case"arraybuffer":I="uint8array";break;case"base64":I="string"}try{this._internalType=I,this._outputType=b,this._mimeType=D,c.checkSupport(I),this._worker=C.pipe(new f(I)),C.lock()}catch(O){this._worker=new x("error"),this._worker.error(O)}}k.prototype={accumulate:function(C){return E(this,C)},on:function(C,b){var D=this;return C==="data"?this._worker.on(C,function(I){b.call(D,I.data,I.meta)}):this._worker.on(C,function(){c.delay(b,arguments,D)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(C){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new S(this,{objectMode:this._outputType!=="nodebuffer"},C)}},v.exports=k},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(o,v,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var c=new ArrayBuffer(0);try{p.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var f=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);f.append(c),p.blob=f.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!o("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(o,v,p){for(var c=o("./utils"),f=o("./support"),x=o("./nodejsUtils"),g=o("./stream/GenericWorker"),m=new Array(256),T=0;T<256;T++)m[T]=252<=T?6:248<=T?5:240<=T?4:224<=T?3:192<=T?2:1;m[254]=m[254]=1;function S(){g.call(this,"utf-8 decode"),this.leftOver=null}function E(){g.call(this,"utf-8 encode")}p.utf8encode=function(k){return f.nodebuffer?x.newBufferFrom(k,"utf-8"):function(C){var b,D,I,O,z,M=C.length,R=0;for(O=0;O<M;O++)(64512&(D=C.charCodeAt(O)))==55296&&O+1<M&&(64512&(I=C.charCodeAt(O+1)))==56320&&(D=65536+(D-55296<<10)+(I-56320),O++),R+=D<128?1:D<2048?2:D<65536?3:4;for(b=f.uint8array?new Uint8Array(R):new Array(R),O=z=0;z<R;O++)(64512&(D=C.charCodeAt(O)))==55296&&O+1<M&&(64512&(I=C.charCodeAt(O+1)))==56320&&(D=65536+(D-55296<<10)+(I-56320),O++),D<128?b[z++]=D:(D<2048?b[z++]=192|D>>>6:(D<65536?b[z++]=224|D>>>12:(b[z++]=240|D>>>18,b[z++]=128|D>>>12&63),b[z++]=128|D>>>6&63),b[z++]=128|63&D);return b}(k)},p.utf8decode=function(k){return f.nodebuffer?c.transformTo("nodebuffer",k).toString("utf-8"):function(C){var b,D,I,O,z=C.length,M=new Array(2*z);for(b=D=0;b<z;)if((I=C[b++])<128)M[D++]=I;else if(4<(O=m[I]))M[D++]=65533,b+=O-1;else{for(I&=O===2?31:O===3?15:7;1<O&&b<z;)I=I<<6|63&C[b++],O--;1<O?M[D++]=65533:I<65536?M[D++]=I:(I-=65536,M[D++]=55296|I>>10&1023,M[D++]=56320|1023&I)}return M.length!==D&&(M.subarray?M=M.subarray(0,D):M.length=D),c.applyFromCharCode(M)}(k=c.transformTo(f.uint8array?"uint8array":"array",k))},c.inherits(S,g),S.prototype.processChunk=function(k){var C=c.transformTo(f.uint8array?"uint8array":"array",k.data);if(this.leftOver&&this.leftOver.length){if(f.uint8array){var b=C;(C=new Uint8Array(b.length+this.leftOver.length)).set(this.leftOver,0),C.set(b,this.leftOver.length)}else C=this.leftOver.concat(C);this.leftOver=null}var D=function(O,z){var M;for((z=z||O.length)>O.length&&(z=O.length),M=z-1;0<=M&&(192&O[M])==128;)M--;return M<0||M===0?z:M+m[O[M]]>z?M:z}(C),I=C;D!==C.length&&(f.uint8array?(I=C.subarray(0,D),this.leftOver=C.subarray(D,C.length)):(I=C.slice(0,D),this.leftOver=C.slice(D,C.length))),this.push({data:p.utf8decode(I),meta:k.meta})},S.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=S,c.inherits(E,g),E.prototype.processChunk=function(k){this.push({data:p.utf8encode(k.data),meta:k.meta})},p.Utf8EncodeWorker=E},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(o,v,p){var c=o("./support"),f=o("./base64"),x=o("./nodejsUtils"),g=o("./external");function m(b){return b}function T(b,D){for(var I=0;I<b.length;++I)D[I]=255&b.charCodeAt(I);return D}o("setimmediate"),p.newBlob=function(b,D){p.checkSupport("blob");try{return new Blob([b],{type:D})}catch{try{var I=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return I.append(b),I.getBlob(D)}catch{throw new Error("Bug : can't construct the Blob.")}}};var S={stringifyByChunk:function(b,D,I){var O=[],z=0,M=b.length;if(M<=I)return String.fromCharCode.apply(null,b);for(;z<M;)D==="array"||D==="nodebuffer"?O.push(String.fromCharCode.apply(null,b.slice(z,Math.min(z+I,M)))):O.push(String.fromCharCode.apply(null,b.subarray(z,Math.min(z+I,M)))),z+=I;return O.join("")},stringifyByChar:function(b){for(var D="",I=0;I<b.length;I++)D+=String.fromCharCode(b[I]);return D},applyCanBeUsed:{uint8array:function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,x.allocBuffer(1)).length===1}catch{return!1}}()}};function E(b){var D=65536,I=p.getTypeOf(b),O=!0;if(I==="uint8array"?O=S.applyCanBeUsed.uint8array:I==="nodebuffer"&&(O=S.applyCanBeUsed.nodebuffer),O)for(;1<D;)try{return S.stringifyByChunk(b,I,D)}catch{D=Math.floor(D/2)}return S.stringifyByChar(b)}function k(b,D){for(var I=0;I<b.length;I++)D[I]=b[I];return D}p.applyFromCharCode=E;var C={};C.string={string:m,array:function(b){return T(b,new Array(b.length))},arraybuffer:function(b){return C.string.uint8array(b).buffer},uint8array:function(b){return T(b,new Uint8Array(b.length))},nodebuffer:function(b){return T(b,x.allocBuffer(b.length))}},C.array={string:E,array:m,arraybuffer:function(b){return new Uint8Array(b).buffer},uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return x.newBufferFrom(b)}},C.arraybuffer={string:function(b){return E(new Uint8Array(b))},array:function(b){return k(new Uint8Array(b),new Array(b.byteLength))},arraybuffer:m,uint8array:function(b){return new Uint8Array(b)},nodebuffer:function(b){return x.newBufferFrom(new Uint8Array(b))}},C.uint8array={string:E,array:function(b){return k(b,new Array(b.length))},arraybuffer:function(b){return b.buffer},uint8array:m,nodebuffer:function(b){return x.newBufferFrom(b)}},C.nodebuffer={string:E,array:function(b){return k(b,new Array(b.length))},arraybuffer:function(b){return C.nodebuffer.uint8array(b).buffer},uint8array:function(b){return k(b,new Uint8Array(b.length))},nodebuffer:m},p.transformTo=function(b,D){if(D=D||"",!b)return D;p.checkSupport(b);var I=p.getTypeOf(D);return C[I][b](D)},p.resolve=function(b){for(var D=b.split("/"),I=[],O=0;O<D.length;O++){var z=D[O];z==="."||z===""&&O!==0&&O!==D.length-1||(z===".."?I.pop():I.push(z))}return I.join("/")},p.getTypeOf=function(b){return typeof b=="string"?"string":Object.prototype.toString.call(b)==="[object Array]"?"array":c.nodebuffer&&x.isBuffer(b)?"nodebuffer":c.uint8array&&b instanceof Uint8Array?"uint8array":c.arraybuffer&&b instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(b){if(!c[b.toLowerCase()])throw new Error(b+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(b){var D,I,O="";for(I=0;I<(b||"").length;I++)O+="\\x"+((D=b.charCodeAt(I))<16?"0":"")+D.toString(16).toUpperCase();return O},p.delay=function(b,D,I){setImmediate(function(){b.apply(I||null,D||[])})},p.inherits=function(b,D){function I(){}I.prototype=D.prototype,b.prototype=new I},p.extend=function(){var b,D,I={};for(b=0;b<arguments.length;b++)for(D in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],D)&&I[D]===void 0&&(I[D]=arguments[b][D]);return I},p.prepareContent=function(b,D,I,O,z){return g.Promise.resolve(D).then(function(M){return c.blob&&(M instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(M))!==-1)&&typeof FileReader<"u"?new g.Promise(function(R,G){var Q=new FileReader;Q.onload=function(ne){R(ne.target.result)},Q.onerror=function(ne){G(ne.target.error)},Q.readAsArrayBuffer(M)}):M}).then(function(M){var R=p.getTypeOf(M);return R?(R==="arraybuffer"?M=p.transformTo("uint8array",M):R==="string"&&(z?M=f.decode(M):I&&O!==!0&&(M=function(G){return T(G,c.uint8array?new Uint8Array(G.length):new Array(G.length))}(M))),M):g.Promise.reject(new Error("Can't read the data of '"+b+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(o,v,p){var c=o("./reader/readerFor"),f=o("./utils"),x=o("./signature"),g=o("./zipEntry"),m=o("./support");function T(S){this.files=[],this.loadOptions=S}T.prototype={checkSignature:function(S){if(!this.reader.readAndCheckSignature(S)){this.reader.index-=4;var E=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+f.pretty(E)+", expected "+f.pretty(S)+")")}},isSignature:function(S,E){var k=this.reader.index;this.reader.setIndex(S);var C=this.reader.readString(4)===E;return this.reader.setIndex(k),C},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var S=this.reader.readData(this.zipCommentLength),E=m.uint8array?"uint8array":"array",k=f.transformTo(E,S);this.zipComment=this.loadOptions.decodeFileName(k)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var S,E,k,C=this.zip64EndOfCentralSize-44;0<C;)S=this.reader.readInt(2),E=this.reader.readInt(4),k=this.reader.readData(E),this.zip64ExtensibleData[S]={id:S,length:E,value:k}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var S,E;for(S=0;S<this.files.length;S++)E=this.files[S],this.reader.setIndex(E.localHeaderOffset),this.checkSignature(x.LOCAL_FILE_HEADER),E.readLocalPart(this.reader),E.handleUTF8(),E.processAttributes()},readCentralDir:function(){var S;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(x.CENTRAL_FILE_HEADER);)(S=new g({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(S);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var S=this.reader.lastIndexOfSignature(x.CENTRAL_DIRECTORY_END);if(S<0)throw this.isSignature(0,x.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(S);var E=S;if(this.checkSignature(x.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===f.MAX_VALUE_16BITS||this.diskWithCentralDirStart===f.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===f.MAX_VALUE_16BITS||this.centralDirRecords===f.MAX_VALUE_16BITS||this.centralDirSize===f.MAX_VALUE_32BITS||this.centralDirOffset===f.MAX_VALUE_32BITS){if(this.zip64=!0,(S=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(S),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,x.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(x.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var k=this.centralDirOffset+this.centralDirSize;this.zip64&&(k+=20,k+=12+this.zip64EndOfCentralSize);var C=E-k;if(0<C)this.isSignature(E,x.CENTRAL_FILE_HEADER)||(this.reader.zero=C);else if(C<0)throw new Error("Corrupted zip: missing "+Math.abs(C)+" bytes.")},prepareReader:function(S){this.reader=c(S)},load:function(S){this.prepareReader(S),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},v.exports=T},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(o,v,p){var c=o("./reader/readerFor"),f=o("./utils"),x=o("./compressedObject"),g=o("./crc32"),m=o("./utf8"),T=o("./compressions"),S=o("./support");function E(k,C){this.options=k,this.loadOptions=C}E.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(k){var C,b;if(k.skip(22),this.fileNameLength=k.readInt(2),b=k.readInt(2),this.fileName=k.readData(this.fileNameLength),k.skip(b),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((C=function(D){for(var I in T)if(Object.prototype.hasOwnProperty.call(T,I)&&T[I].magic===D)return T[I];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+f.pretty(this.compressionMethod)+" unknown (inner file : "+f.transformTo("string",this.fileName)+")");this.decompressed=new x(this.compressedSize,this.uncompressedSize,this.crc32,C,k.readData(this.compressedSize))},readCentralPart:function(k){this.versionMadeBy=k.readInt(2),k.skip(2),this.bitFlag=k.readInt(2),this.compressionMethod=k.readString(2),this.date=k.readDate(),this.crc32=k.readInt(4),this.compressedSize=k.readInt(4),this.uncompressedSize=k.readInt(4);var C=k.readInt(2);if(this.extraFieldsLength=k.readInt(2),this.fileCommentLength=k.readInt(2),this.diskNumberStart=k.readInt(2),this.internalFileAttributes=k.readInt(2),this.externalFileAttributes=k.readInt(4),this.localHeaderOffset=k.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");k.skip(C),this.readExtraFields(k),this.parseZIP64ExtraField(k),this.fileComment=k.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var k=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),k==0&&(this.dosPermissions=63&this.externalFileAttributes),k==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var k=c(this.extraFields[1].value);this.uncompressedSize===f.MAX_VALUE_32BITS&&(this.uncompressedSize=k.readInt(8)),this.compressedSize===f.MAX_VALUE_32BITS&&(this.compressedSize=k.readInt(8)),this.localHeaderOffset===f.MAX_VALUE_32BITS&&(this.localHeaderOffset=k.readInt(8)),this.diskNumberStart===f.MAX_VALUE_32BITS&&(this.diskNumberStart=k.readInt(4))}},readExtraFields:function(k){var C,b,D,I=k.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});k.index+4<I;)C=k.readInt(2),b=k.readInt(2),D=k.readData(b),this.extraFields[C]={id:C,length:b,value:D};k.setIndex(I)},handleUTF8:function(){var k=S.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=m.utf8decode(this.fileName),this.fileCommentStr=m.utf8decode(this.fileComment);else{var C=this.findExtraFieldUnicodePath();if(C!==null)this.fileNameStr=C;else{var b=f.transformTo(k,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(b)}var D=this.findExtraFieldUnicodeComment();if(D!==null)this.fileCommentStr=D;else{var I=f.transformTo(k,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(I)}}},findExtraFieldUnicodePath:function(){var k=this.extraFields[28789];if(k){var C=c(k.value);return C.readInt(1)!==1||g(this.fileName)!==C.readInt(4)?null:m.utf8decode(C.readData(k.length-5))}return null},findExtraFieldUnicodeComment:function(){var k=this.extraFields[25461];if(k){var C=c(k.value);return C.readInt(1)!==1||g(this.fileComment)!==C.readInt(4)?null:m.utf8decode(C.readData(k.length-5))}return null}},v.exports=E},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(o,v,p){function c(C,b,D){this.name=C,this.dir=D.dir,this.date=D.date,this.comment=D.comment,this.unixPermissions=D.unixPermissions,this.dosPermissions=D.dosPermissions,this._data=b,this._dataBinary=D.binary,this.options={compression:D.compression,compressionOptions:D.compressionOptions}}var f=o("./stream/StreamHelper"),x=o("./stream/DataWorker"),g=o("./utf8"),m=o("./compressedObject"),T=o("./stream/GenericWorker");c.prototype={internalStream:function(C){var b=null,D="string";try{if(!C)throw new Error("No output type specified.");var I=(D=C.toLowerCase())==="string"||D==="text";D!=="binarystring"&&D!=="text"||(D="string"),b=this._decompressWorker();var O=!this._dataBinary;O&&!I&&(b=b.pipe(new g.Utf8EncodeWorker)),!O&&I&&(b=b.pipe(new g.Utf8DecodeWorker))}catch(z){(b=new T("error")).error(z)}return new f(b,D,"")},async:function(C,b){return this.internalStream(C).accumulate(b)},nodeStream:function(C,b){return this.internalStream(C||"nodebuffer").toNodejsStream(b)},_compressWorker:function(C,b){if(this._data instanceof m&&this._data.compression.magic===C.magic)return this._data.getCompressedWorker();var D=this._decompressWorker();return this._dataBinary||(D=D.pipe(new g.Utf8EncodeWorker)),m.createWorkerFrom(D,C,b)},_decompressWorker:function(){return this._data instanceof m?this._data.getContentWorker():this._data instanceof T?this._data:new x(this._data)}};for(var S=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],E=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},k=0;k<S.length;k++)c.prototype[S[k]]=E;v.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(o,v,p){(function(c){var f,x,g=c.MutationObserver||c.WebKitMutationObserver;if(g){var m=0,T=new g(C),S=c.document.createTextNode("");T.observe(S,{characterData:!0}),f=function(){S.data=m=++m%2}}else if(c.setImmediate||c.MessageChannel===void 0)f="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var b=c.document.createElement("script");b.onreadystatechange=function(){C(),b.onreadystatechange=null,b.parentNode.removeChild(b),b=null},c.document.documentElement.appendChild(b)}:function(){setTimeout(C,0)};else{var E=new c.MessageChannel;E.port1.onmessage=C,f=function(){E.port2.postMessage(0)}}var k=[];function C(){var b,D;x=!0;for(var I=k.length;I;){for(D=k,k=[],b=-1;++b<I;)D[b]();I=k.length}x=!1}v.exports=function(b){k.push(b)!==1||x||f()}}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(o,v,p){var c=o("immediate");function f(){}var x={},g=["REJECTED"],m=["FULFILLED"],T=["PENDING"];function S(I){if(typeof I!="function")throw new TypeError("resolver must be a function");this.state=T,this.queue=[],this.outcome=void 0,I!==f&&b(this,I)}function E(I,O,z){this.promise=I,typeof O=="function"&&(this.onFulfilled=O,this.callFulfilled=this.otherCallFulfilled),typeof z=="function"&&(this.onRejected=z,this.callRejected=this.otherCallRejected)}function k(I,O,z){c(function(){var M;try{M=O(z)}catch(R){return x.reject(I,R)}M===I?x.reject(I,new TypeError("Cannot resolve promise with itself")):x.resolve(I,M)})}function C(I){var O=I&&I.then;if(I&&(typeof I=="object"||typeof I=="function")&&typeof O=="function")return function(){O.apply(I,arguments)}}function b(I,O){var z=!1;function M(Q){z||(z=!0,x.reject(I,Q))}function R(Q){z||(z=!0,x.resolve(I,Q))}var G=D(function(){O(R,M)});G.status==="error"&&M(G.value)}function D(I,O){var z={};try{z.value=I(O),z.status="success"}catch(M){z.status="error",z.value=M}return z}(v.exports=S).prototype.finally=function(I){if(typeof I!="function")return this;var O=this.constructor;return this.then(function(z){return O.resolve(I()).then(function(){return z})},function(z){return O.resolve(I()).then(function(){throw z})})},S.prototype.catch=function(I){return this.then(null,I)},S.prototype.then=function(I,O){if(typeof I!="function"&&this.state===m||typeof O!="function"&&this.state===g)return this;var z=new this.constructor(f);return this.state!==T?k(z,this.state===m?I:O,this.outcome):this.queue.push(new E(z,I,O)),z},E.prototype.callFulfilled=function(I){x.resolve(this.promise,I)},E.prototype.otherCallFulfilled=function(I){k(this.promise,this.onFulfilled,I)},E.prototype.callRejected=function(I){x.reject(this.promise,I)},E.prototype.otherCallRejected=function(I){k(this.promise,this.onRejected,I)},x.resolve=function(I,O){var z=D(C,O);if(z.status==="error")return x.reject(I,z.value);var M=z.value;if(M)b(I,M);else{I.state=m,I.outcome=O;for(var R=-1,G=I.queue.length;++R<G;)I.queue[R].callFulfilled(O)}return I},x.reject=function(I,O){I.state=g,I.outcome=O;for(var z=-1,M=I.queue.length;++z<M;)I.queue[z].callRejected(O);return I},S.resolve=function(I){return I instanceof this?I:x.resolve(new this(f),I)},S.reject=function(I){var O=new this(f);return x.reject(O,I)},S.all=function(I){var O=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=I.length,M=!1;if(!z)return this.resolve([]);for(var R=new Array(z),G=0,Q=-1,ne=new this(f);++Q<z;)V(I[Q],Q);return ne;function V(ee,ae){O.resolve(ee).then(function($){R[ae]=$,++G!==z||M||(M=!0,x.resolve(ne,R))},function($){M||(M=!0,x.reject(ne,$))})}},S.race=function(I){var O=this;if(Object.prototype.toString.call(I)!=="[object Array]")return this.reject(new TypeError("must be an array"));var z=I.length,M=!1;if(!z)return this.resolve([]);for(var R=-1,G=new this(f);++R<z;)Q=I[R],O.resolve(Q).then(function(ne){M||(M=!0,x.resolve(G,ne))},function(ne){M||(M=!0,x.reject(G,ne))});var Q;return G}},{immediate:36}],38:[function(o,v,p){var c={};(0,o("./lib/utils/common").assign)(c,o("./lib/deflate"),o("./lib/inflate"),o("./lib/zlib/constants")),v.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(o,v,p){var c=o("./zlib/deflate"),f=o("./utils/common"),x=o("./utils/strings"),g=o("./zlib/messages"),m=o("./zlib/zstream"),T=Object.prototype.toString,S=0,E=-1,k=0,C=8;function b(I){if(!(this instanceof b))return new b(I);this.options=f.assign({level:E,method:C,chunkSize:16384,windowBits:15,memLevel:8,strategy:k,to:""},I||{});var O=this.options;O.raw&&0<O.windowBits?O.windowBits=-O.windowBits:O.gzip&&0<O.windowBits&&O.windowBits<16&&(O.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new m,this.strm.avail_out=0;var z=c.deflateInit2(this.strm,O.level,O.method,O.windowBits,O.memLevel,O.strategy);if(z!==S)throw new Error(g[z]);if(O.header&&c.deflateSetHeader(this.strm,O.header),O.dictionary){var M;if(M=typeof O.dictionary=="string"?x.string2buf(O.dictionary):T.call(O.dictionary)==="[object ArrayBuffer]"?new Uint8Array(O.dictionary):O.dictionary,(z=c.deflateSetDictionary(this.strm,M))!==S)throw new Error(g[z]);this._dict_set=!0}}function D(I,O){var z=new b(O);if(z.push(I,!0),z.err)throw z.msg||g[z.err];return z.result}b.prototype.push=function(I,O){var z,M,R=this.strm,G=this.options.chunkSize;if(this.ended)return!1;M=O===~~O?O:O===!0?4:0,typeof I=="string"?R.input=x.string2buf(I):T.call(I)==="[object ArrayBuffer]"?R.input=new Uint8Array(I):R.input=I,R.next_in=0,R.avail_in=R.input.length;do{if(R.avail_out===0&&(R.output=new f.Buf8(G),R.next_out=0,R.avail_out=G),(z=c.deflate(R,M))!==1&&z!==S)return this.onEnd(z),!(this.ended=!0);R.avail_out!==0&&(R.avail_in!==0||M!==4&&M!==2)||(this.options.to==="string"?this.onData(x.buf2binstring(f.shrinkBuf(R.output,R.next_out))):this.onData(f.shrinkBuf(R.output,R.next_out)))}while((0<R.avail_in||R.avail_out===0)&&z!==1);return M===4?(z=c.deflateEnd(this.strm),this.onEnd(z),this.ended=!0,z===S):M!==2||(this.onEnd(S),!(R.avail_out=0))},b.prototype.onData=function(I){this.chunks.push(I)},b.prototype.onEnd=function(I){I===S&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=I,this.msg=this.strm.msg},p.Deflate=b,p.deflate=D,p.deflateRaw=function(I,O){return(O=O||{}).raw=!0,D(I,O)},p.gzip=function(I,O){return(O=O||{}).gzip=!0,D(I,O)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(o,v,p){var c=o("./zlib/inflate"),f=o("./utils/common"),x=o("./utils/strings"),g=o("./zlib/constants"),m=o("./zlib/messages"),T=o("./zlib/zstream"),S=o("./zlib/gzheader"),E=Object.prototype.toString;function k(b){if(!(this instanceof k))return new k(b);this.options=f.assign({chunkSize:16384,windowBits:0,to:""},b||{});var D=this.options;D.raw&&0<=D.windowBits&&D.windowBits<16&&(D.windowBits=-D.windowBits,D.windowBits===0&&(D.windowBits=-15)),!(0<=D.windowBits&&D.windowBits<16)||b&&b.windowBits||(D.windowBits+=32),15<D.windowBits&&D.windowBits<48&&(15&D.windowBits)==0&&(D.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new T,this.strm.avail_out=0;var I=c.inflateInit2(this.strm,D.windowBits);if(I!==g.Z_OK)throw new Error(m[I]);this.header=new S,c.inflateGetHeader(this.strm,this.header)}function C(b,D){var I=new k(D);if(I.push(b,!0),I.err)throw I.msg||m[I.err];return I.result}k.prototype.push=function(b,D){var I,O,z,M,R,G,Q=this.strm,ne=this.options.chunkSize,V=this.options.dictionary,ee=!1;if(this.ended)return!1;O=D===~~D?D:D===!0?g.Z_FINISH:g.Z_NO_FLUSH,typeof b=="string"?Q.input=x.binstring2buf(b):E.call(b)==="[object ArrayBuffer]"?Q.input=new Uint8Array(b):Q.input=b,Q.next_in=0,Q.avail_in=Q.input.length;do{if(Q.avail_out===0&&(Q.output=new f.Buf8(ne),Q.next_out=0,Q.avail_out=ne),(I=c.inflate(Q,g.Z_NO_FLUSH))===g.Z_NEED_DICT&&V&&(G=typeof V=="string"?x.string2buf(V):E.call(V)==="[object ArrayBuffer]"?new Uint8Array(V):V,I=c.inflateSetDictionary(this.strm,G)),I===g.Z_BUF_ERROR&&ee===!0&&(I=g.Z_OK,ee=!1),I!==g.Z_STREAM_END&&I!==g.Z_OK)return this.onEnd(I),!(this.ended=!0);Q.next_out&&(Q.avail_out!==0&&I!==g.Z_STREAM_END&&(Q.avail_in!==0||O!==g.Z_FINISH&&O!==g.Z_SYNC_FLUSH)||(this.options.to==="string"?(z=x.utf8border(Q.output,Q.next_out),M=Q.next_out-z,R=x.buf2string(Q.output,z),Q.next_out=M,Q.avail_out=ne-M,M&&f.arraySet(Q.output,Q.output,z,M,0),this.onData(R)):this.onData(f.shrinkBuf(Q.output,Q.next_out)))),Q.avail_in===0&&Q.avail_out===0&&(ee=!0)}while((0<Q.avail_in||Q.avail_out===0)&&I!==g.Z_STREAM_END);return I===g.Z_STREAM_END&&(O=g.Z_FINISH),O===g.Z_FINISH?(I=c.inflateEnd(this.strm),this.onEnd(I),this.ended=!0,I===g.Z_OK):O!==g.Z_SYNC_FLUSH||(this.onEnd(g.Z_OK),!(Q.avail_out=0))},k.prototype.onData=function(b){this.chunks.push(b)},k.prototype.onEnd=function(b){b===g.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=f.flattenChunks(this.chunks)),this.chunks=[],this.err=b,this.msg=this.strm.msg},p.Inflate=k,p.inflate=C,p.inflateRaw=function(b,D){return(D=D||{}).raw=!0,C(b,D)},p.ungzip=C},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(o,v,p){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(g){for(var m=Array.prototype.slice.call(arguments,1);m.length;){var T=m.shift();if(T){if(typeof T!="object")throw new TypeError(T+"must be non-object");for(var S in T)T.hasOwnProperty(S)&&(g[S]=T[S])}}return g},p.shrinkBuf=function(g,m){return g.length===m?g:g.subarray?g.subarray(0,m):(g.length=m,g)};var f={arraySet:function(g,m,T,S,E){if(m.subarray&&g.subarray)g.set(m.subarray(T,T+S),E);else for(var k=0;k<S;k++)g[E+k]=m[T+k]},flattenChunks:function(g){var m,T,S,E,k,C;for(m=S=0,T=g.length;m<T;m++)S+=g[m].length;for(C=new Uint8Array(S),m=E=0,T=g.length;m<T;m++)k=g[m],C.set(k,E),E+=k.length;return C}},x={arraySet:function(g,m,T,S,E){for(var k=0;k<S;k++)g[E+k]=m[T+k]},flattenChunks:function(g){return[].concat.apply([],g)}};p.setTyped=function(g){g?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,f)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,x))},p.setTyped(c)},{}],42:[function(o,v,p){var c=o("./common"),f=!0,x=!0;try{String.fromCharCode.apply(null,[0])}catch{f=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{x=!1}for(var g=new c.Buf8(256),m=0;m<256;m++)g[m]=252<=m?6:248<=m?5:240<=m?4:224<=m?3:192<=m?2:1;function T(S,E){if(E<65537&&(S.subarray&&x||!S.subarray&&f))return String.fromCharCode.apply(null,c.shrinkBuf(S,E));for(var k="",C=0;C<E;C++)k+=String.fromCharCode(S[C]);return k}g[254]=g[254]=1,p.string2buf=function(S){var E,k,C,b,D,I=S.length,O=0;for(b=0;b<I;b++)(64512&(k=S.charCodeAt(b)))==55296&&b+1<I&&(64512&(C=S.charCodeAt(b+1)))==56320&&(k=65536+(k-55296<<10)+(C-56320),b++),O+=k<128?1:k<2048?2:k<65536?3:4;for(E=new c.Buf8(O),b=D=0;D<O;b++)(64512&(k=S.charCodeAt(b)))==55296&&b+1<I&&(64512&(C=S.charCodeAt(b+1)))==56320&&(k=65536+(k-55296<<10)+(C-56320),b++),k<128?E[D++]=k:(k<2048?E[D++]=192|k>>>6:(k<65536?E[D++]=224|k>>>12:(E[D++]=240|k>>>18,E[D++]=128|k>>>12&63),E[D++]=128|k>>>6&63),E[D++]=128|63&k);return E},p.buf2binstring=function(S){return T(S,S.length)},p.binstring2buf=function(S){for(var E=new c.Buf8(S.length),k=0,C=E.length;k<C;k++)E[k]=S.charCodeAt(k);return E},p.buf2string=function(S,E){var k,C,b,D,I=E||S.length,O=new Array(2*I);for(k=C=0;k<I;)if((b=S[k++])<128)O[C++]=b;else if(4<(D=g[b]))O[C++]=65533,k+=D-1;else{for(b&=D===2?31:D===3?15:7;1<D&&k<I;)b=b<<6|63&S[k++],D--;1<D?O[C++]=65533:b<65536?O[C++]=b:(b-=65536,O[C++]=55296|b>>10&1023,O[C++]=56320|1023&b)}return T(O,C)},p.utf8border=function(S,E){var k;for((E=E||S.length)>S.length&&(E=S.length),k=E-1;0<=k&&(192&S[k])==128;)k--;return k<0||k===0?E:k+g[S[k]]>E?k:E}},{"./common":41}],43:[function(o,v,p){v.exports=function(c,f,x,g){for(var m=65535&c|0,T=c>>>16&65535|0,S=0;x!==0;){for(x-=S=2e3<x?2e3:x;T=T+(m=m+f[g++]|0)|0,--S;);m%=65521,T%=65521}return m|T<<16|0}},{}],44:[function(o,v,p){v.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(o,v,p){var c=function(){for(var f,x=[],g=0;g<256;g++){f=g;for(var m=0;m<8;m++)f=1&f?3988292384^f>>>1:f>>>1;x[g]=f}return x}();v.exports=function(f,x,g,m){var T=c,S=m+g;f^=-1;for(var E=m;E<S;E++)f=f>>>8^T[255&(f^x[E])];return-1^f}},{}],46:[function(o,v,p){var c,f=o("../utils/common"),x=o("./trees"),g=o("./adler32"),m=o("./crc32"),T=o("./messages"),S=0,E=4,k=0,C=-2,b=-1,D=4,I=2,O=8,z=9,M=286,R=30,G=19,Q=2*M+1,ne=15,V=3,ee=258,ae=ee+V+1,$=42,K=113,_=1,xe=2,je=3,re=4;function fe(y,de){return y.msg=T[de],de}function ie(y){return(y<<1)-(4<y?9:0)}function P(y){for(var de=y.length;0<=--de;)y[de]=0}function w(y){var de=y.state,ue=de.pending;ue>y.avail_out&&(ue=y.avail_out),ue!==0&&(f.arraySet(y.output,de.pending_buf,de.pending_out,ue,y.next_out),y.next_out+=ue,de.pending_out+=ue,y.total_out+=ue,y.avail_out-=ue,de.pending-=ue,de.pending===0&&(de.pending_out=0))}function N(y,de){x._tr_flush_block(y,0<=y.block_start?y.block_start:-1,y.strstart-y.block_start,de),y.block_start=y.strstart,w(y.strm)}function B(y,de){y.pending_buf[y.pending++]=de}function H(y,de){y.pending_buf[y.pending++]=de>>>8&255,y.pending_buf[y.pending++]=255&de}function U(y,de){var ue,W,q=y.max_chain_length,Y=y.strstart,be=y.prev_length,Ne=y.nice_match,ce=y.strstart>y.w_size-ae?y.strstart-(y.w_size-ae):0,Ae=y.window,Fe=y.w_mask,Me=y.prev,Ue=y.strstart+ee,st=Ae[Y+be-1],Ye=Ae[Y+be];y.prev_length>=y.good_match&&(q>>=2),Ne>y.lookahead&&(Ne=y.lookahead);do if(Ae[(ue=de)+be]===Ye&&Ae[ue+be-1]===st&&Ae[ue]===Ae[Y]&&Ae[++ue]===Ae[Y+1]){Y+=2,ue++;do;while(Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Ae[++Y]===Ae[++ue]&&Y<Ue);if(W=ee-(Ue-Y),Y=Ue-ee,be<W){if(y.match_start=de,Ne<=(be=W))break;st=Ae[Y+be-1],Ye=Ae[Y+be]}}while((de=Me[de&Fe])>ce&&--q!=0);return be<=y.lookahead?be:y.lookahead}function X(y){var de,ue,W,q,Y,be,Ne,ce,Ae,Fe,Me=y.w_size;do{if(q=y.window_size-y.lookahead-y.strstart,y.strstart>=Me+(Me-ae)){for(f.arraySet(y.window,y.window,Me,Me,0),y.match_start-=Me,y.strstart-=Me,y.block_start-=Me,de=ue=y.hash_size;W=y.head[--de],y.head[de]=Me<=W?W-Me:0,--ue;);for(de=ue=Me;W=y.prev[--de],y.prev[de]=Me<=W?W-Me:0,--ue;);q+=Me}if(y.strm.avail_in===0)break;if(be=y.strm,Ne=y.window,ce=y.strstart+y.lookahead,Ae=q,Fe=void 0,Fe=be.avail_in,Ae<Fe&&(Fe=Ae),ue=Fe===0?0:(be.avail_in-=Fe,f.arraySet(Ne,be.input,be.next_in,Fe,ce),be.state.wrap===1?be.adler=g(be.adler,Ne,Fe,ce):be.state.wrap===2&&(be.adler=m(be.adler,Ne,Fe,ce)),be.next_in+=Fe,be.total_in+=Fe,Fe),y.lookahead+=ue,y.lookahead+y.insert>=V)for(Y=y.strstart-y.insert,y.ins_h=y.window[Y],y.ins_h=(y.ins_h<<y.hash_shift^y.window[Y+1])&y.hash_mask;y.insert&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[Y+V-1])&y.hash_mask,y.prev[Y&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=Y,Y++,y.insert--,!(y.lookahead+y.insert<V)););}while(y.lookahead<ae&&y.strm.avail_in!==0)}function he(y,de){for(var ue,W;;){if(y.lookahead<ae){if(X(y),y.lookahead<ae&&de===S)return _;if(y.lookahead===0)break}if(ue=0,y.lookahead>=V&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+V-1])&y.hash_mask,ue=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),ue!==0&&y.strstart-ue<=y.w_size-ae&&(y.match_length=U(y,ue)),y.match_length>=V)if(W=x._tr_tally(y,y.strstart-y.match_start,y.match_length-V),y.lookahead-=y.match_length,y.match_length<=y.max_lazy_match&&y.lookahead>=V){for(y.match_length--;y.strstart++,y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+V-1])&y.hash_mask,ue=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart,--y.match_length!=0;);y.strstart++}else y.strstart+=y.match_length,y.match_length=0,y.ins_h=y.window[y.strstart],y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+1])&y.hash_mask;else W=x._tr_tally(y,0,y.window[y.strstart]),y.lookahead--,y.strstart++;if(W&&(N(y,!1),y.strm.avail_out===0))return _}return y.insert=y.strstart<V-1?y.strstart:V-1,de===E?(N(y,!0),y.strm.avail_out===0?je:re):y.last_lit&&(N(y,!1),y.strm.avail_out===0)?_:xe}function oe(y,de){for(var ue,W,q;;){if(y.lookahead<ae){if(X(y),y.lookahead<ae&&de===S)return _;if(y.lookahead===0)break}if(ue=0,y.lookahead>=V&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+V-1])&y.hash_mask,ue=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),y.prev_length=y.match_length,y.prev_match=y.match_start,y.match_length=V-1,ue!==0&&y.prev_length<y.max_lazy_match&&y.strstart-ue<=y.w_size-ae&&(y.match_length=U(y,ue),y.match_length<=5&&(y.strategy===1||y.match_length===V&&4096<y.strstart-y.match_start)&&(y.match_length=V-1)),y.prev_length>=V&&y.match_length<=y.prev_length){for(q=y.strstart+y.lookahead-V,W=x._tr_tally(y,y.strstart-1-y.prev_match,y.prev_length-V),y.lookahead-=y.prev_length-1,y.prev_length-=2;++y.strstart<=q&&(y.ins_h=(y.ins_h<<y.hash_shift^y.window[y.strstart+V-1])&y.hash_mask,ue=y.prev[y.strstart&y.w_mask]=y.head[y.ins_h],y.head[y.ins_h]=y.strstart),--y.prev_length!=0;);if(y.match_available=0,y.match_length=V-1,y.strstart++,W&&(N(y,!1),y.strm.avail_out===0))return _}else if(y.match_available){if((W=x._tr_tally(y,0,y.window[y.strstart-1]))&&N(y,!1),y.strstart++,y.lookahead--,y.strm.avail_out===0)return _}else y.match_available=1,y.strstart++,y.lookahead--}return y.match_available&&(W=x._tr_tally(y,0,y.window[y.strstart-1]),y.match_available=0),y.insert=y.strstart<V-1?y.strstart:V-1,de===E?(N(y,!0),y.strm.avail_out===0?je:re):y.last_lit&&(N(y,!1),y.strm.avail_out===0)?_:xe}function ye(y,de,ue,W,q){this.good_length=y,this.max_lazy=de,this.nice_length=ue,this.max_chain=W,this.func=q}function Ie(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=O,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new f.Buf16(2*Q),this.dyn_dtree=new f.Buf16(2*(2*R+1)),this.bl_tree=new f.Buf16(2*(2*G+1)),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new f.Buf16(ne+1),this.heap=new f.Buf16(2*M+1),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new f.Buf16(2*M+1),P(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ze(y){var de;return y&&y.state?(y.total_in=y.total_out=0,y.data_type=I,(de=y.state).pending=0,de.pending_out=0,de.wrap<0&&(de.wrap=-de.wrap),de.status=de.wrap?$:K,y.adler=de.wrap===2?0:1,de.last_flush=S,x._tr_init(de),k):fe(y,C)}function qe(y){var de=ze(y);return de===k&&function(ue){ue.window_size=2*ue.w_size,P(ue.head),ue.max_lazy_match=c[ue.level].max_lazy,ue.good_match=c[ue.level].good_length,ue.nice_match=c[ue.level].nice_length,ue.max_chain_length=c[ue.level].max_chain,ue.strstart=0,ue.block_start=0,ue.lookahead=0,ue.insert=0,ue.match_length=ue.prev_length=V-1,ue.match_available=0,ue.ins_h=0}(y.state),de}function Ee(y,de,ue,W,q,Y){if(!y)return C;var be=1;if(de===b&&(de=6),W<0?(be=0,W=-W):15<W&&(be=2,W-=16),q<1||z<q||ue!==O||W<8||15<W||de<0||9<de||Y<0||D<Y)return fe(y,C);W===8&&(W=9);var Ne=new Ie;return(y.state=Ne).strm=y,Ne.wrap=be,Ne.gzhead=null,Ne.w_bits=W,Ne.w_size=1<<Ne.w_bits,Ne.w_mask=Ne.w_size-1,Ne.hash_bits=q+7,Ne.hash_size=1<<Ne.hash_bits,Ne.hash_mask=Ne.hash_size-1,Ne.hash_shift=~~((Ne.hash_bits+V-1)/V),Ne.window=new f.Buf8(2*Ne.w_size),Ne.head=new f.Buf16(Ne.hash_size),Ne.prev=new f.Buf16(Ne.w_size),Ne.lit_bufsize=1<<q+6,Ne.pending_buf_size=4*Ne.lit_bufsize,Ne.pending_buf=new f.Buf8(Ne.pending_buf_size),Ne.d_buf=1*Ne.lit_bufsize,Ne.l_buf=3*Ne.lit_bufsize,Ne.level=de,Ne.strategy=Y,Ne.method=ue,qe(y)}c=[new ye(0,0,0,0,function(y,de){var ue=65535;for(ue>y.pending_buf_size-5&&(ue=y.pending_buf_size-5);;){if(y.lookahead<=1){if(X(y),y.lookahead===0&&de===S)return _;if(y.lookahead===0)break}y.strstart+=y.lookahead,y.lookahead=0;var W=y.block_start+ue;if((y.strstart===0||y.strstart>=W)&&(y.lookahead=y.strstart-W,y.strstart=W,N(y,!1),y.strm.avail_out===0)||y.strstart-y.block_start>=y.w_size-ae&&(N(y,!1),y.strm.avail_out===0))return _}return y.insert=0,de===E?(N(y,!0),y.strm.avail_out===0?je:re):(y.strstart>y.block_start&&(N(y,!1),y.strm.avail_out),_)}),new ye(4,4,8,4,he),new ye(4,5,16,8,he),new ye(4,6,32,32,he),new ye(4,4,16,16,oe),new ye(8,16,32,32,oe),new ye(8,16,128,128,oe),new ye(8,32,128,256,oe),new ye(32,128,258,1024,oe),new ye(32,258,258,4096,oe)],p.deflateInit=function(y,de){return Ee(y,de,O,15,8,0)},p.deflateInit2=Ee,p.deflateReset=qe,p.deflateResetKeep=ze,p.deflateSetHeader=function(y,de){return y&&y.state?y.state.wrap!==2?C:(y.state.gzhead=de,k):C},p.deflate=function(y,de){var ue,W,q,Y;if(!y||!y.state||5<de||de<0)return y?fe(y,C):C;if(W=y.state,!y.output||!y.input&&y.avail_in!==0||W.status===666&&de!==E)return fe(y,y.avail_out===0?-5:C);if(W.strm=y,ue=W.last_flush,W.last_flush=de,W.status===$)if(W.wrap===2)y.adler=0,B(W,31),B(W,139),B(W,8),W.gzhead?(B(W,(W.gzhead.text?1:0)+(W.gzhead.hcrc?2:0)+(W.gzhead.extra?4:0)+(W.gzhead.name?8:0)+(W.gzhead.comment?16:0)),B(W,255&W.gzhead.time),B(W,W.gzhead.time>>8&255),B(W,W.gzhead.time>>16&255),B(W,W.gzhead.time>>24&255),B(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),B(W,255&W.gzhead.os),W.gzhead.extra&&W.gzhead.extra.length&&(B(W,255&W.gzhead.extra.length),B(W,W.gzhead.extra.length>>8&255)),W.gzhead.hcrc&&(y.adler=m(y.adler,W.pending_buf,W.pending,0)),W.gzindex=0,W.status=69):(B(W,0),B(W,0),B(W,0),B(W,0),B(W,0),B(W,W.level===9?2:2<=W.strategy||W.level<2?4:0),B(W,3),W.status=K);else{var be=O+(W.w_bits-8<<4)<<8;be|=(2<=W.strategy||W.level<2?0:W.level<6?1:W.level===6?2:3)<<6,W.strstart!==0&&(be|=32),be+=31-be%31,W.status=K,H(W,be),W.strstart!==0&&(H(W,y.adler>>>16),H(W,65535&y.adler)),y.adler=1}if(W.status===69)if(W.gzhead.extra){for(q=W.pending;W.gzindex<(65535&W.gzhead.extra.length)&&(W.pending!==W.pending_buf_size||(W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),w(y),q=W.pending,W.pending!==W.pending_buf_size));)B(W,255&W.gzhead.extra[W.gzindex]),W.gzindex++;W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),W.gzindex===W.gzhead.extra.length&&(W.gzindex=0,W.status=73)}else W.status=73;if(W.status===73)if(W.gzhead.name){q=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),w(y),q=W.pending,W.pending===W.pending_buf_size)){Y=1;break}Y=W.gzindex<W.gzhead.name.length?255&W.gzhead.name.charCodeAt(W.gzindex++):0,B(W,Y)}while(Y!==0);W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),Y===0&&(W.gzindex=0,W.status=91)}else W.status=91;if(W.status===91)if(W.gzhead.comment){q=W.pending;do{if(W.pending===W.pending_buf_size&&(W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),w(y),q=W.pending,W.pending===W.pending_buf_size)){Y=1;break}Y=W.gzindex<W.gzhead.comment.length?255&W.gzhead.comment.charCodeAt(W.gzindex++):0,B(W,Y)}while(Y!==0);W.gzhead.hcrc&&W.pending>q&&(y.adler=m(y.adler,W.pending_buf,W.pending-q,q)),Y===0&&(W.status=103)}else W.status=103;if(W.status===103&&(W.gzhead.hcrc?(W.pending+2>W.pending_buf_size&&w(y),W.pending+2<=W.pending_buf_size&&(B(W,255&y.adler),B(W,y.adler>>8&255),y.adler=0,W.status=K)):W.status=K),W.pending!==0){if(w(y),y.avail_out===0)return W.last_flush=-1,k}else if(y.avail_in===0&&ie(de)<=ie(ue)&&de!==E)return fe(y,-5);if(W.status===666&&y.avail_in!==0)return fe(y,-5);if(y.avail_in!==0||W.lookahead!==0||de!==S&&W.status!==666){var Ne=W.strategy===2?function(ce,Ae){for(var Fe;;){if(ce.lookahead===0&&(X(ce),ce.lookahead===0)){if(Ae===S)return _;break}if(ce.match_length=0,Fe=x._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++,Fe&&(N(ce,!1),ce.strm.avail_out===0))return _}return ce.insert=0,Ae===E?(N(ce,!0),ce.strm.avail_out===0?je:re):ce.last_lit&&(N(ce,!1),ce.strm.avail_out===0)?_:xe}(W,de):W.strategy===3?function(ce,Ae){for(var Fe,Me,Ue,st,Ye=ce.window;;){if(ce.lookahead<=ee){if(X(ce),ce.lookahead<=ee&&Ae===S)return _;if(ce.lookahead===0)break}if(ce.match_length=0,ce.lookahead>=V&&0<ce.strstart&&(Me=Ye[Ue=ce.strstart-1])===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]){st=ce.strstart+ee;do;while(Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Me===Ye[++Ue]&&Ue<st);ce.match_length=ee-(st-Ue),ce.match_length>ce.lookahead&&(ce.match_length=ce.lookahead)}if(ce.match_length>=V?(Fe=x._tr_tally(ce,1,ce.match_length-V),ce.lookahead-=ce.match_length,ce.strstart+=ce.match_length,ce.match_length=0):(Fe=x._tr_tally(ce,0,ce.window[ce.strstart]),ce.lookahead--,ce.strstart++),Fe&&(N(ce,!1),ce.strm.avail_out===0))return _}return ce.insert=0,Ae===E?(N(ce,!0),ce.strm.avail_out===0?je:re):ce.last_lit&&(N(ce,!1),ce.strm.avail_out===0)?_:xe}(W,de):c[W.level].func(W,de);if(Ne!==je&&Ne!==re||(W.status=666),Ne===_||Ne===je)return y.avail_out===0&&(W.last_flush=-1),k;if(Ne===xe&&(de===1?x._tr_align(W):de!==5&&(x._tr_stored_block(W,0,0,!1),de===3&&(P(W.head),W.lookahead===0&&(W.strstart=0,W.block_start=0,W.insert=0))),w(y),y.avail_out===0))return W.last_flush=-1,k}return de!==E?k:W.wrap<=0?1:(W.wrap===2?(B(W,255&y.adler),B(W,y.adler>>8&255),B(W,y.adler>>16&255),B(W,y.adler>>24&255),B(W,255&y.total_in),B(W,y.total_in>>8&255),B(W,y.total_in>>16&255),B(W,y.total_in>>24&255)):(H(W,y.adler>>>16),H(W,65535&y.adler)),w(y),0<W.wrap&&(W.wrap=-W.wrap),W.pending!==0?k:1)},p.deflateEnd=function(y){var de;return y&&y.state?(de=y.state.status)!==$&&de!==69&&de!==73&&de!==91&&de!==103&&de!==K&&de!==666?fe(y,C):(y.state=null,de===K?fe(y,-3):k):C},p.deflateSetDictionary=function(y,de){var ue,W,q,Y,be,Ne,ce,Ae,Fe=de.length;if(!y||!y.state||(Y=(ue=y.state).wrap)===2||Y===1&&ue.status!==$||ue.lookahead)return C;for(Y===1&&(y.adler=g(y.adler,de,Fe,0)),ue.wrap=0,Fe>=ue.w_size&&(Y===0&&(P(ue.head),ue.strstart=0,ue.block_start=0,ue.insert=0),Ae=new f.Buf8(ue.w_size),f.arraySet(Ae,de,Fe-ue.w_size,ue.w_size,0),de=Ae,Fe=ue.w_size),be=y.avail_in,Ne=y.next_in,ce=y.input,y.avail_in=Fe,y.next_in=0,y.input=de,X(ue);ue.lookahead>=V;){for(W=ue.strstart,q=ue.lookahead-(V-1);ue.ins_h=(ue.ins_h<<ue.hash_shift^ue.window[W+V-1])&ue.hash_mask,ue.prev[W&ue.w_mask]=ue.head[ue.ins_h],ue.head[ue.ins_h]=W,W++,--q;);ue.strstart=W,ue.lookahead=V-1,X(ue)}return ue.strstart+=ue.lookahead,ue.block_start=ue.strstart,ue.insert=ue.lookahead,ue.lookahead=0,ue.match_length=ue.prev_length=V-1,ue.match_available=0,y.next_in=Ne,y.input=ce,y.avail_in=be,ue.wrap=Y,k},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(o,v,p){v.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(o,v,p){v.exports=function(c,f){var x,g,m,T,S,E,k,C,b,D,I,O,z,M,R,G,Q,ne,V,ee,ae,$,K,_,xe;x=c.state,g=c.next_in,_=c.input,m=g+(c.avail_in-5),T=c.next_out,xe=c.output,S=T-(f-c.avail_out),E=T+(c.avail_out-257),k=x.dmax,C=x.wsize,b=x.whave,D=x.wnext,I=x.window,O=x.hold,z=x.bits,M=x.lencode,R=x.distcode,G=(1<<x.lenbits)-1,Q=(1<<x.distbits)-1;e:do{z<15&&(O+=_[g++]<<z,z+=8,O+=_[g++]<<z,z+=8),ne=M[O&G];t:for(;;){if(O>>>=V=ne>>>24,z-=V,(V=ne>>>16&255)===0)xe[T++]=65535&ne;else{if(!(16&V)){if((64&V)==0){ne=M[(65535&ne)+(O&(1<<V)-1)];continue t}if(32&V){x.mode=12;break e}c.msg="invalid literal/length code",x.mode=30;break e}ee=65535&ne,(V&=15)&&(z<V&&(O+=_[g++]<<z,z+=8),ee+=O&(1<<V)-1,O>>>=V,z-=V),z<15&&(O+=_[g++]<<z,z+=8,O+=_[g++]<<z,z+=8),ne=R[O&Q];r:for(;;){if(O>>>=V=ne>>>24,z-=V,!(16&(V=ne>>>16&255))){if((64&V)==0){ne=R[(65535&ne)+(O&(1<<V)-1)];continue r}c.msg="invalid distance code",x.mode=30;break e}if(ae=65535&ne,z<(V&=15)&&(O+=_[g++]<<z,(z+=8)<V&&(O+=_[g++]<<z,z+=8)),k<(ae+=O&(1<<V)-1)){c.msg="invalid distance too far back",x.mode=30;break e}if(O>>>=V,z-=V,(V=T-S)<ae){if(b<(V=ae-V)&&x.sane){c.msg="invalid distance too far back",x.mode=30;break e}if(K=I,($=0)===D){if($+=C-V,V<ee){for(ee-=V;xe[T++]=I[$++],--V;);$=T-ae,K=xe}}else if(D<V){if($+=C+D-V,(V-=D)<ee){for(ee-=V;xe[T++]=I[$++],--V;);if($=0,D<ee){for(ee-=V=D;xe[T++]=I[$++],--V;);$=T-ae,K=xe}}}else if($+=D-V,V<ee){for(ee-=V;xe[T++]=I[$++],--V;);$=T-ae,K=xe}for(;2<ee;)xe[T++]=K[$++],xe[T++]=K[$++],xe[T++]=K[$++],ee-=3;ee&&(xe[T++]=K[$++],1<ee&&(xe[T++]=K[$++]))}else{for($=T-ae;xe[T++]=xe[$++],xe[T++]=xe[$++],xe[T++]=xe[$++],2<(ee-=3););ee&&(xe[T++]=xe[$++],1<ee&&(xe[T++]=xe[$++]))}break}}break}}while(g<m&&T<E);g-=ee=z>>3,O&=(1<<(z-=ee<<3))-1,c.next_in=g,c.next_out=T,c.avail_in=g<m?m-g+5:5-(g-m),c.avail_out=T<E?E-T+257:257-(T-E),x.hold=O,x.bits=z}},{}],49:[function(o,v,p){var c=o("../utils/common"),f=o("./adler32"),x=o("./crc32"),g=o("./inffast"),m=o("./inftrees"),T=1,S=2,E=0,k=-2,C=1,b=852,D=592;function I($){return($>>>24&255)+($>>>8&65280)+((65280&$)<<8)+((255&$)<<24)}function O(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function z($){var K;return $&&$.state?(K=$.state,$.total_in=$.total_out=K.total=0,$.msg="",K.wrap&&($.adler=1&K.wrap),K.mode=C,K.last=0,K.havedict=0,K.dmax=32768,K.head=null,K.hold=0,K.bits=0,K.lencode=K.lendyn=new c.Buf32(b),K.distcode=K.distdyn=new c.Buf32(D),K.sane=1,K.back=-1,E):k}function M($){var K;return $&&$.state?((K=$.state).wsize=0,K.whave=0,K.wnext=0,z($)):k}function R($,K){var _,xe;return $&&$.state?(xe=$.state,K<0?(_=0,K=-K):(_=1+(K>>4),K<48&&(K&=15)),K&&(K<8||15<K)?k:(xe.window!==null&&xe.wbits!==K&&(xe.window=null),xe.wrap=_,xe.wbits=K,M($))):k}function G($,K){var _,xe;return $?(xe=new O,($.state=xe).window=null,(_=R($,K))!==E&&($.state=null),_):k}var Q,ne,V=!0;function ee($){if(V){var K;for(Q=new c.Buf32(512),ne=new c.Buf32(32),K=0;K<144;)$.lens[K++]=8;for(;K<256;)$.lens[K++]=9;for(;K<280;)$.lens[K++]=7;for(;K<288;)$.lens[K++]=8;for(m(T,$.lens,0,288,Q,0,$.work,{bits:9}),K=0;K<32;)$.lens[K++]=5;m(S,$.lens,0,32,ne,0,$.work,{bits:5}),V=!1}$.lencode=Q,$.lenbits=9,$.distcode=ne,$.distbits=5}function ae($,K,_,xe){var je,re=$.state;return re.window===null&&(re.wsize=1<<re.wbits,re.wnext=0,re.whave=0,re.window=new c.Buf8(re.wsize)),xe>=re.wsize?(c.arraySet(re.window,K,_-re.wsize,re.wsize,0),re.wnext=0,re.whave=re.wsize):(xe<(je=re.wsize-re.wnext)&&(je=xe),c.arraySet(re.window,K,_-xe,je,re.wnext),(xe-=je)?(c.arraySet(re.window,K,_-xe,xe,0),re.wnext=xe,re.whave=re.wsize):(re.wnext+=je,re.wnext===re.wsize&&(re.wnext=0),re.whave<re.wsize&&(re.whave+=je))),0}p.inflateReset=M,p.inflateReset2=R,p.inflateResetKeep=z,p.inflateInit=function($){return G($,15)},p.inflateInit2=G,p.inflate=function($,K){var _,xe,je,re,fe,ie,P,w,N,B,H,U,X,he,oe,ye,Ie,ze,qe,Ee,y,de,ue,W,q=0,Y=new c.Buf8(4),be=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!$||!$.state||!$.output||!$.input&&$.avail_in!==0)return k;(_=$.state).mode===12&&(_.mode=13),fe=$.next_out,je=$.output,P=$.avail_out,re=$.next_in,xe=$.input,ie=$.avail_in,w=_.hold,N=_.bits,B=ie,H=P,de=E;e:for(;;)switch(_.mode){case C:if(_.wrap===0){_.mode=13;break}for(;N<16;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(2&_.wrap&&w===35615){Y[_.check=0]=255&w,Y[1]=w>>>8&255,_.check=x(_.check,Y,2,0),N=w=0,_.mode=2;break}if(_.flags=0,_.head&&(_.head.done=!1),!(1&_.wrap)||(((255&w)<<8)+(w>>8))%31){$.msg="incorrect header check",_.mode=30;break}if((15&w)!=8){$.msg="unknown compression method",_.mode=30;break}if(N-=4,y=8+(15&(w>>>=4)),_.wbits===0)_.wbits=y;else if(y>_.wbits){$.msg="invalid window size",_.mode=30;break}_.dmax=1<<y,$.adler=_.check=1,_.mode=512&w?10:12,N=w=0;break;case 2:for(;N<16;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(_.flags=w,(255&_.flags)!=8){$.msg="unknown compression method",_.mode=30;break}if(57344&_.flags){$.msg="unknown header flags set",_.mode=30;break}_.head&&(_.head.text=w>>8&1),512&_.flags&&(Y[0]=255&w,Y[1]=w>>>8&255,_.check=x(_.check,Y,2,0)),N=w=0,_.mode=3;case 3:for(;N<32;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.head&&(_.head.time=w),512&_.flags&&(Y[0]=255&w,Y[1]=w>>>8&255,Y[2]=w>>>16&255,Y[3]=w>>>24&255,_.check=x(_.check,Y,4,0)),N=w=0,_.mode=4;case 4:for(;N<16;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.head&&(_.head.xflags=255&w,_.head.os=w>>8),512&_.flags&&(Y[0]=255&w,Y[1]=w>>>8&255,_.check=x(_.check,Y,2,0)),N=w=0,_.mode=5;case 5:if(1024&_.flags){for(;N<16;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.length=w,_.head&&(_.head.extra_len=w),512&_.flags&&(Y[0]=255&w,Y[1]=w>>>8&255,_.check=x(_.check,Y,2,0)),N=w=0}else _.head&&(_.head.extra=null);_.mode=6;case 6:if(1024&_.flags&&(ie<(U=_.length)&&(U=ie),U&&(_.head&&(y=_.head.extra_len-_.length,_.head.extra||(_.head.extra=new Array(_.head.extra_len)),c.arraySet(_.head.extra,xe,re,U,y)),512&_.flags&&(_.check=x(_.check,xe,U,re)),ie-=U,re+=U,_.length-=U),_.length))break e;_.length=0,_.mode=7;case 7:if(2048&_.flags){if(ie===0)break e;for(U=0;y=xe[re+U++],_.head&&y&&_.length<65536&&(_.head.name+=String.fromCharCode(y)),y&&U<ie;);if(512&_.flags&&(_.check=x(_.check,xe,U,re)),ie-=U,re+=U,y)break e}else _.head&&(_.head.name=null);_.length=0,_.mode=8;case 8:if(4096&_.flags){if(ie===0)break e;for(U=0;y=xe[re+U++],_.head&&y&&_.length<65536&&(_.head.comment+=String.fromCharCode(y)),y&&U<ie;);if(512&_.flags&&(_.check=x(_.check,xe,U,re)),ie-=U,re+=U,y)break e}else _.head&&(_.head.comment=null);_.mode=9;case 9:if(512&_.flags){for(;N<16;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(w!==(65535&_.check)){$.msg="header crc mismatch",_.mode=30;break}N=w=0}_.head&&(_.head.hcrc=_.flags>>9&1,_.head.done=!0),$.adler=_.check=0,_.mode=12;break;case 10:for(;N<32;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}$.adler=_.check=I(w),N=w=0,_.mode=11;case 11:if(_.havedict===0)return $.next_out=fe,$.avail_out=P,$.next_in=re,$.avail_in=ie,_.hold=w,_.bits=N,2;$.adler=_.check=1,_.mode=12;case 12:if(K===5||K===6)break e;case 13:if(_.last){w>>>=7&N,N-=7&N,_.mode=27;break}for(;N<3;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}switch(_.last=1&w,N-=1,3&(w>>>=1)){case 0:_.mode=14;break;case 1:if(ee(_),_.mode=20,K!==6)break;w>>>=2,N-=2;break e;case 2:_.mode=17;break;case 3:$.msg="invalid block type",_.mode=30}w>>>=2,N-=2;break;case 14:for(w>>>=7&N,N-=7&N;N<32;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if((65535&w)!=(w>>>16^65535)){$.msg="invalid stored block lengths",_.mode=30;break}if(_.length=65535&w,N=w=0,_.mode=15,K===6)break e;case 15:_.mode=16;case 16:if(U=_.length){if(ie<U&&(U=ie),P<U&&(U=P),U===0)break e;c.arraySet(je,xe,re,U,fe),ie-=U,re+=U,P-=U,fe+=U,_.length-=U;break}_.mode=12;break;case 17:for(;N<14;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(_.nlen=257+(31&w),w>>>=5,N-=5,_.ndist=1+(31&w),w>>>=5,N-=5,_.ncode=4+(15&w),w>>>=4,N-=4,286<_.nlen||30<_.ndist){$.msg="too many length or distance symbols",_.mode=30;break}_.have=0,_.mode=18;case 18:for(;_.have<_.ncode;){for(;N<3;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.lens[be[_.have++]]=7&w,w>>>=3,N-=3}for(;_.have<19;)_.lens[be[_.have++]]=0;if(_.lencode=_.lendyn,_.lenbits=7,ue={bits:_.lenbits},de=m(0,_.lens,0,19,_.lencode,0,_.work,ue),_.lenbits=ue.bits,de){$.msg="invalid code lengths set",_.mode=30;break}_.have=0,_.mode=19;case 19:for(;_.have<_.nlen+_.ndist;){for(;ye=(q=_.lencode[w&(1<<_.lenbits)-1])>>>16&255,Ie=65535&q,!((oe=q>>>24)<=N);){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(Ie<16)w>>>=oe,N-=oe,_.lens[_.have++]=Ie;else{if(Ie===16){for(W=oe+2;N<W;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(w>>>=oe,N-=oe,_.have===0){$.msg="invalid bit length repeat",_.mode=30;break}y=_.lens[_.have-1],U=3+(3&w),w>>>=2,N-=2}else if(Ie===17){for(W=oe+3;N<W;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}N-=oe,y=0,U=3+(7&(w>>>=oe)),w>>>=3,N-=3}else{for(W=oe+7;N<W;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}N-=oe,y=0,U=11+(127&(w>>>=oe)),w>>>=7,N-=7}if(_.have+U>_.nlen+_.ndist){$.msg="invalid bit length repeat",_.mode=30;break}for(;U--;)_.lens[_.have++]=y}}if(_.mode===30)break;if(_.lens[256]===0){$.msg="invalid code -- missing end-of-block",_.mode=30;break}if(_.lenbits=9,ue={bits:_.lenbits},de=m(T,_.lens,0,_.nlen,_.lencode,0,_.work,ue),_.lenbits=ue.bits,de){$.msg="invalid literal/lengths set",_.mode=30;break}if(_.distbits=6,_.distcode=_.distdyn,ue={bits:_.distbits},de=m(S,_.lens,_.nlen,_.ndist,_.distcode,0,_.work,ue),_.distbits=ue.bits,de){$.msg="invalid distances set",_.mode=30;break}if(_.mode=20,K===6)break e;case 20:_.mode=21;case 21:if(6<=ie&&258<=P){$.next_out=fe,$.avail_out=P,$.next_in=re,$.avail_in=ie,_.hold=w,_.bits=N,g($,H),fe=$.next_out,je=$.output,P=$.avail_out,re=$.next_in,xe=$.input,ie=$.avail_in,w=_.hold,N=_.bits,_.mode===12&&(_.back=-1);break}for(_.back=0;ye=(q=_.lencode[w&(1<<_.lenbits)-1])>>>16&255,Ie=65535&q,!((oe=q>>>24)<=N);){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(ye&&(240&ye)==0){for(ze=oe,qe=ye,Ee=Ie;ye=(q=_.lencode[Ee+((w&(1<<ze+qe)-1)>>ze)])>>>16&255,Ie=65535&q,!(ze+(oe=q>>>24)<=N);){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}w>>>=ze,N-=ze,_.back+=ze}if(w>>>=oe,N-=oe,_.back+=oe,_.length=Ie,ye===0){_.mode=26;break}if(32&ye){_.back=-1,_.mode=12;break}if(64&ye){$.msg="invalid literal/length code",_.mode=30;break}_.extra=15&ye,_.mode=22;case 22:if(_.extra){for(W=_.extra;N<W;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.length+=w&(1<<_.extra)-1,w>>>=_.extra,N-=_.extra,_.back+=_.extra}_.was=_.length,_.mode=23;case 23:for(;ye=(q=_.distcode[w&(1<<_.distbits)-1])>>>16&255,Ie=65535&q,!((oe=q>>>24)<=N);){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if((240&ye)==0){for(ze=oe,qe=ye,Ee=Ie;ye=(q=_.distcode[Ee+((w&(1<<ze+qe)-1)>>ze)])>>>16&255,Ie=65535&q,!(ze+(oe=q>>>24)<=N);){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}w>>>=ze,N-=ze,_.back+=ze}if(w>>>=oe,N-=oe,_.back+=oe,64&ye){$.msg="invalid distance code",_.mode=30;break}_.offset=Ie,_.extra=15&ye,_.mode=24;case 24:if(_.extra){for(W=_.extra;N<W;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}_.offset+=w&(1<<_.extra)-1,w>>>=_.extra,N-=_.extra,_.back+=_.extra}if(_.offset>_.dmax){$.msg="invalid distance too far back",_.mode=30;break}_.mode=25;case 25:if(P===0)break e;if(U=H-P,_.offset>U){if((U=_.offset-U)>_.whave&&_.sane){$.msg="invalid distance too far back",_.mode=30;break}X=U>_.wnext?(U-=_.wnext,_.wsize-U):_.wnext-U,U>_.length&&(U=_.length),he=_.window}else he=je,X=fe-_.offset,U=_.length;for(P<U&&(U=P),P-=U,_.length-=U;je[fe++]=he[X++],--U;);_.length===0&&(_.mode=21);break;case 26:if(P===0)break e;je[fe++]=_.length,P--,_.mode=21;break;case 27:if(_.wrap){for(;N<32;){if(ie===0)break e;ie--,w|=xe[re++]<<N,N+=8}if(H-=P,$.total_out+=H,_.total+=H,H&&($.adler=_.check=_.flags?x(_.check,je,H,fe-H):f(_.check,je,H,fe-H)),H=P,(_.flags?w:I(w))!==_.check){$.msg="incorrect data check",_.mode=30;break}N=w=0}_.mode=28;case 28:if(_.wrap&&_.flags){for(;N<32;){if(ie===0)break e;ie--,w+=xe[re++]<<N,N+=8}if(w!==(4294967295&_.total)){$.msg="incorrect length check",_.mode=30;break}N=w=0}_.mode=29;case 29:de=1;break e;case 30:de=-3;break e;case 31:return-4;case 32:default:return k}return $.next_out=fe,$.avail_out=P,$.next_in=re,$.avail_in=ie,_.hold=w,_.bits=N,(_.wsize||H!==$.avail_out&&_.mode<30&&(_.mode<27||K!==4))&&ae($,$.output,$.next_out,H-$.avail_out)?(_.mode=31,-4):(B-=$.avail_in,H-=$.avail_out,$.total_in+=B,$.total_out+=H,_.total+=H,_.wrap&&H&&($.adler=_.check=_.flags?x(_.check,je,H,$.next_out-H):f(_.check,je,H,$.next_out-H)),$.data_type=_.bits+(_.last?64:0)+(_.mode===12?128:0)+(_.mode===20||_.mode===15?256:0),(B==0&&H===0||K===4)&&de===E&&(de=-5),de)},p.inflateEnd=function($){if(!$||!$.state)return k;var K=$.state;return K.window&&(K.window=null),$.state=null,E},p.inflateGetHeader=function($,K){var _;return $&&$.state?(2&(_=$.state).wrap)==0?k:((_.head=K).done=!1,E):k},p.inflateSetDictionary=function($,K){var _,xe=K.length;return $&&$.state?(_=$.state).wrap!==0&&_.mode!==11?k:_.mode===11&&f(1,K,xe,0)!==_.check?-3:ae($,K,xe,xe)?(_.mode=31,-4):(_.havedict=1,E):k},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(o,v,p){var c=o("../utils/common"),f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],x=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],g=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],m=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];v.exports=function(T,S,E,k,C,b,D,I){var O,z,M,R,G,Q,ne,V,ee,ae=I.bits,$=0,K=0,_=0,xe=0,je=0,re=0,fe=0,ie=0,P=0,w=0,N=null,B=0,H=new c.Buf16(16),U=new c.Buf16(16),X=null,he=0;for($=0;$<=15;$++)H[$]=0;for(K=0;K<k;K++)H[S[E+K]]++;for(je=ae,xe=15;1<=xe&&H[xe]===0;xe--);if(xe<je&&(je=xe),xe===0)return C[b++]=20971520,C[b++]=20971520,I.bits=1,0;for(_=1;_<xe&&H[_]===0;_++);for(je<_&&(je=_),$=ie=1;$<=15;$++)if(ie<<=1,(ie-=H[$])<0)return-1;if(0<ie&&(T===0||xe!==1))return-1;for(U[1]=0,$=1;$<15;$++)U[$+1]=U[$]+H[$];for(K=0;K<k;K++)S[E+K]!==0&&(D[U[S[E+K]]++]=K);if(Q=T===0?(N=X=D,19):T===1?(N=f,B-=257,X=x,he-=257,256):(N=g,X=m,-1),$=_,G=b,fe=K=w=0,M=-1,R=(P=1<<(re=je))-1,T===1&&852<P||T===2&&592<P)return 1;for(;;){for(ne=$-fe,ee=D[K]<Q?(V=0,D[K]):D[K]>Q?(V=X[he+D[K]],N[B+D[K]]):(V=96,0),O=1<<$-fe,_=z=1<<re;C[G+(w>>fe)+(z-=O)]=ne<<24|V<<16|ee|0,z!==0;);for(O=1<<$-1;w&O;)O>>=1;if(O!==0?(w&=O-1,w+=O):w=0,K++,--H[$]==0){if($===xe)break;$=S[E+D[K]]}if(je<$&&(w&R)!==M){for(fe===0&&(fe=je),G+=_,ie=1<<(re=$-fe);re+fe<xe&&!((ie-=H[re+fe])<=0);)re++,ie<<=1;if(P+=1<<re,T===1&&852<P||T===2&&592<P)return 1;C[M=w&R]=je<<24|re<<16|G-b|0}}return w!==0&&(C[G+w]=$-fe<<24|64<<16|0),I.bits=je,0}},{"../utils/common":41}],51:[function(o,v,p){v.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(o,v,p){var c=o("../utils/common"),f=0,x=1;function g(q){for(var Y=q.length;0<=--Y;)q[Y]=0}var m=0,T=29,S=256,E=S+1+T,k=30,C=19,b=2*E+1,D=15,I=16,O=7,z=256,M=16,R=17,G=18,Q=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],ne=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],V=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],ee=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],ae=new Array(2*(E+2));g(ae);var $=new Array(2*k);g($);var K=new Array(512);g(K);var _=new Array(256);g(_);var xe=new Array(T);g(xe);var je,re,fe,ie=new Array(k);function P(q,Y,be,Ne,ce){this.static_tree=q,this.extra_bits=Y,this.extra_base=be,this.elems=Ne,this.max_length=ce,this.has_stree=q&&q.length}function w(q,Y){this.dyn_tree=q,this.max_code=0,this.stat_desc=Y}function N(q){return q<256?K[q]:K[256+(q>>>7)]}function B(q,Y){q.pending_buf[q.pending++]=255&Y,q.pending_buf[q.pending++]=Y>>>8&255}function H(q,Y,be){q.bi_valid>I-be?(q.bi_buf|=Y<<q.bi_valid&65535,B(q,q.bi_buf),q.bi_buf=Y>>I-q.bi_valid,q.bi_valid+=be-I):(q.bi_buf|=Y<<q.bi_valid&65535,q.bi_valid+=be)}function U(q,Y,be){H(q,be[2*Y],be[2*Y+1])}function X(q,Y){for(var be=0;be|=1&q,q>>>=1,be<<=1,0<--Y;);return be>>>1}function he(q,Y,be){var Ne,ce,Ae=new Array(D+1),Fe=0;for(Ne=1;Ne<=D;Ne++)Ae[Ne]=Fe=Fe+be[Ne-1]<<1;for(ce=0;ce<=Y;ce++){var Me=q[2*ce+1];Me!==0&&(q[2*ce]=X(Ae[Me]++,Me))}}function oe(q){var Y;for(Y=0;Y<E;Y++)q.dyn_ltree[2*Y]=0;for(Y=0;Y<k;Y++)q.dyn_dtree[2*Y]=0;for(Y=0;Y<C;Y++)q.bl_tree[2*Y]=0;q.dyn_ltree[2*z]=1,q.opt_len=q.static_len=0,q.last_lit=q.matches=0}function ye(q){8<q.bi_valid?B(q,q.bi_buf):0<q.bi_valid&&(q.pending_buf[q.pending++]=q.bi_buf),q.bi_buf=0,q.bi_valid=0}function Ie(q,Y,be,Ne){var ce=2*Y,Ae=2*be;return q[ce]<q[Ae]||q[ce]===q[Ae]&&Ne[Y]<=Ne[be]}function ze(q,Y,be){for(var Ne=q.heap[be],ce=be<<1;ce<=q.heap_len&&(ce<q.heap_len&&Ie(Y,q.heap[ce+1],q.heap[ce],q.depth)&&ce++,!Ie(Y,Ne,q.heap[ce],q.depth));)q.heap[be]=q.heap[ce],be=ce,ce<<=1;q.heap[be]=Ne}function qe(q,Y,be){var Ne,ce,Ae,Fe,Me=0;if(q.last_lit!==0)for(;Ne=q.pending_buf[q.d_buf+2*Me]<<8|q.pending_buf[q.d_buf+2*Me+1],ce=q.pending_buf[q.l_buf+Me],Me++,Ne===0?U(q,ce,Y):(U(q,(Ae=_[ce])+S+1,Y),(Fe=Q[Ae])!==0&&H(q,ce-=xe[Ae],Fe),U(q,Ae=N(--Ne),be),(Fe=ne[Ae])!==0&&H(q,Ne-=ie[Ae],Fe)),Me<q.last_lit;);U(q,z,Y)}function Ee(q,Y){var be,Ne,ce,Ae=Y.dyn_tree,Fe=Y.stat_desc.static_tree,Me=Y.stat_desc.has_stree,Ue=Y.stat_desc.elems,st=-1;for(q.heap_len=0,q.heap_max=b,be=0;be<Ue;be++)Ae[2*be]!==0?(q.heap[++q.heap_len]=st=be,q.depth[be]=0):Ae[2*be+1]=0;for(;q.heap_len<2;)Ae[2*(ce=q.heap[++q.heap_len]=st<2?++st:0)]=1,q.depth[ce]=0,q.opt_len--,Me&&(q.static_len-=Fe[2*ce+1]);for(Y.max_code=st,be=q.heap_len>>1;1<=be;be--)ze(q,Ae,be);for(ce=Ue;be=q.heap[1],q.heap[1]=q.heap[q.heap_len--],ze(q,Ae,1),Ne=q.heap[1],q.heap[--q.heap_max]=be,q.heap[--q.heap_max]=Ne,Ae[2*ce]=Ae[2*be]+Ae[2*Ne],q.depth[ce]=(q.depth[be]>=q.depth[Ne]?q.depth[be]:q.depth[Ne])+1,Ae[2*be+1]=Ae[2*Ne+1]=ce,q.heap[1]=ce++,ze(q,Ae,1),2<=q.heap_len;);q.heap[--q.heap_max]=q.heap[1],function(Ye,ft){var Ct,bt,ur,ht,Cr,Dr,Vt=ft.dyn_tree,ir=ft.max_code,rt=ft.stat_desc.static_tree,Yr=ft.stat_desc.has_stree,Pr=ft.stat_desc.extra_bits,Pe=ft.stat_desc.extra_base,Le=ft.stat_desc.max_length,Ke=0;for(ht=0;ht<=D;ht++)Ye.bl_count[ht]=0;for(Vt[2*Ye.heap[Ye.heap_max]+1]=0,Ct=Ye.heap_max+1;Ct<b;Ct++)Le<(ht=Vt[2*Vt[2*(bt=Ye.heap[Ct])+1]+1]+1)&&(ht=Le,Ke++),Vt[2*bt+1]=ht,ir<bt||(Ye.bl_count[ht]++,Cr=0,Pe<=bt&&(Cr=Pr[bt-Pe]),Dr=Vt[2*bt],Ye.opt_len+=Dr*(ht+Cr),Yr&&(Ye.static_len+=Dr*(rt[2*bt+1]+Cr)));if(Ke!==0){do{for(ht=Le-1;Ye.bl_count[ht]===0;)ht--;Ye.bl_count[ht]--,Ye.bl_count[ht+1]+=2,Ye.bl_count[Le]--,Ke-=2}while(0<Ke);for(ht=Le;ht!==0;ht--)for(bt=Ye.bl_count[ht];bt!==0;)ir<(ur=Ye.heap[--Ct])||(Vt[2*ur+1]!==ht&&(Ye.opt_len+=(ht-Vt[2*ur+1])*Vt[2*ur],Vt[2*ur+1]=ht),bt--)}}(q,Y),he(Ae,st,q.bl_count)}function y(q,Y,be){var Ne,ce,Ae=-1,Fe=Y[1],Me=0,Ue=7,st=4;for(Fe===0&&(Ue=138,st=3),Y[2*(be+1)+1]=65535,Ne=0;Ne<=be;Ne++)ce=Fe,Fe=Y[2*(Ne+1)+1],++Me<Ue&&ce===Fe||(Me<st?q.bl_tree[2*ce]+=Me:ce!==0?(ce!==Ae&&q.bl_tree[2*ce]++,q.bl_tree[2*M]++):Me<=10?q.bl_tree[2*R]++:q.bl_tree[2*G]++,Ae=ce,st=(Me=0)===Fe?(Ue=138,3):ce===Fe?(Ue=6,3):(Ue=7,4))}function de(q,Y,be){var Ne,ce,Ae=-1,Fe=Y[1],Me=0,Ue=7,st=4;for(Fe===0&&(Ue=138,st=3),Ne=0;Ne<=be;Ne++)if(ce=Fe,Fe=Y[2*(Ne+1)+1],!(++Me<Ue&&ce===Fe)){if(Me<st)for(;U(q,ce,q.bl_tree),--Me!=0;);else ce!==0?(ce!==Ae&&(U(q,ce,q.bl_tree),Me--),U(q,M,q.bl_tree),H(q,Me-3,2)):Me<=10?(U(q,R,q.bl_tree),H(q,Me-3,3)):(U(q,G,q.bl_tree),H(q,Me-11,7));Ae=ce,st=(Me=0)===Fe?(Ue=138,3):ce===Fe?(Ue=6,3):(Ue=7,4)}}g(ie);var ue=!1;function W(q,Y,be,Ne){H(q,(m<<1)+(Ne?1:0),3),function(ce,Ae,Fe,Me){ye(ce),B(ce,Fe),B(ce,~Fe),c.arraySet(ce.pending_buf,ce.window,Ae,Fe,ce.pending),ce.pending+=Fe}(q,Y,be)}p._tr_init=function(q){ue||(function(){var Y,be,Ne,ce,Ae,Fe=new Array(D+1);for(ce=Ne=0;ce<T-1;ce++)for(xe[ce]=Ne,Y=0;Y<1<<Q[ce];Y++)_[Ne++]=ce;for(_[Ne-1]=ce,ce=Ae=0;ce<16;ce++)for(ie[ce]=Ae,Y=0;Y<1<<ne[ce];Y++)K[Ae++]=ce;for(Ae>>=7;ce<k;ce++)for(ie[ce]=Ae<<7,Y=0;Y<1<<ne[ce]-7;Y++)K[256+Ae++]=ce;for(be=0;be<=D;be++)Fe[be]=0;for(Y=0;Y<=143;)ae[2*Y+1]=8,Y++,Fe[8]++;for(;Y<=255;)ae[2*Y+1]=9,Y++,Fe[9]++;for(;Y<=279;)ae[2*Y+1]=7,Y++,Fe[7]++;for(;Y<=287;)ae[2*Y+1]=8,Y++,Fe[8]++;for(he(ae,E+1,Fe),Y=0;Y<k;Y++)$[2*Y+1]=5,$[2*Y]=X(Y,5);je=new P(ae,Q,S+1,E,D),re=new P($,ne,0,k,D),fe=new P(new Array(0),V,0,C,O)}(),ue=!0),q.l_desc=new w(q.dyn_ltree,je),q.d_desc=new w(q.dyn_dtree,re),q.bl_desc=new w(q.bl_tree,fe),q.bi_buf=0,q.bi_valid=0,oe(q)},p._tr_stored_block=W,p._tr_flush_block=function(q,Y,be,Ne){var ce,Ae,Fe=0;0<q.level?(q.strm.data_type===2&&(q.strm.data_type=function(Me){var Ue,st=4093624447;for(Ue=0;Ue<=31;Ue++,st>>>=1)if(1&st&&Me.dyn_ltree[2*Ue]!==0)return f;if(Me.dyn_ltree[18]!==0||Me.dyn_ltree[20]!==0||Me.dyn_ltree[26]!==0)return x;for(Ue=32;Ue<S;Ue++)if(Me.dyn_ltree[2*Ue]!==0)return x;return f}(q)),Ee(q,q.l_desc),Ee(q,q.d_desc),Fe=function(Me){var Ue;for(y(Me,Me.dyn_ltree,Me.l_desc.max_code),y(Me,Me.dyn_dtree,Me.d_desc.max_code),Ee(Me,Me.bl_desc),Ue=C-1;3<=Ue&&Me.bl_tree[2*ee[Ue]+1]===0;Ue--);return Me.opt_len+=3*(Ue+1)+5+5+4,Ue}(q),ce=q.opt_len+3+7>>>3,(Ae=q.static_len+3+7>>>3)<=ce&&(ce=Ae)):ce=Ae=be+5,be+4<=ce&&Y!==-1?W(q,Y,be,Ne):q.strategy===4||Ae===ce?(H(q,2+(Ne?1:0),3),qe(q,ae,$)):(H(q,4+(Ne?1:0),3),function(Me,Ue,st,Ye){var ft;for(H(Me,Ue-257,5),H(Me,st-1,5),H(Me,Ye-4,4),ft=0;ft<Ye;ft++)H(Me,Me.bl_tree[2*ee[ft]+1],3);de(Me,Me.dyn_ltree,Ue-1),de(Me,Me.dyn_dtree,st-1)}(q,q.l_desc.max_code+1,q.d_desc.max_code+1,Fe+1),qe(q,q.dyn_ltree,q.dyn_dtree)),oe(q),Ne&&ye(q)},p._tr_tally=function(q,Y,be){return q.pending_buf[q.d_buf+2*q.last_lit]=Y>>>8&255,q.pending_buf[q.d_buf+2*q.last_lit+1]=255&Y,q.pending_buf[q.l_buf+q.last_lit]=255&be,q.last_lit++,Y===0?q.dyn_ltree[2*be]++:(q.matches++,Y--,q.dyn_ltree[2*(_[be]+S+1)]++,q.dyn_dtree[2*N(Y)]++),q.last_lit===q.lit_bufsize-1},p._tr_align=function(q){H(q,2,3),U(q,z,ae),function(Y){Y.bi_valid===16?(B(Y,Y.bi_buf),Y.bi_buf=0,Y.bi_valid=0):8<=Y.bi_valid&&(Y.pending_buf[Y.pending++]=255&Y.bi_buf,Y.bi_buf>>=8,Y.bi_valid-=8)}(q)}},{"../utils/common":41}],53:[function(o,v,p){v.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(o,v,p){(function(c){(function(f,x){if(!f.setImmediate){var g,m,T,S,E=1,k={},C=!1,b=f.document,D=Object.getPrototypeOf&&Object.getPrototypeOf(f);D=D&&D.setTimeout?D:f,g={}.toString.call(f.process)==="[object process]"?function(M){process.nextTick(function(){O(M)})}:function(){if(f.postMessage&&!f.importScripts){var M=!0,R=f.onmessage;return f.onmessage=function(){M=!1},f.postMessage("","*"),f.onmessage=R,M}}()?(S="setImmediate$"+Math.random()+"$",f.addEventListener?f.addEventListener("message",z,!1):f.attachEvent("onmessage",z),function(M){f.postMessage(S+M,"*")}):f.MessageChannel?((T=new MessageChannel).port1.onmessage=function(M){O(M.data)},function(M){T.port2.postMessage(M)}):b&&"onreadystatechange"in b.createElement("script")?(m=b.documentElement,function(M){var R=b.createElement("script");R.onreadystatechange=function(){O(M),R.onreadystatechange=null,m.removeChild(R),R=null},m.appendChild(R)}):function(M){setTimeout(O,0,M)},D.setImmediate=function(M){typeof M!="function"&&(M=new Function(""+M));for(var R=new Array(arguments.length-1),G=0;G<R.length;G++)R[G]=arguments[G+1];var Q={callback:M,args:R};return k[E]=Q,g(E),E++},D.clearImmediate=I}function I(M){delete k[M]}function O(M){if(C)setTimeout(O,0,M);else{var R=k[M];if(R){C=!0;try{(function(G){var Q=G.callback,ne=G.args;switch(ne.length){case 0:Q();break;case 1:Q(ne[0]);break;case 2:Q(ne[0],ne[1]);break;case 3:Q(ne[0],ne[1],ne[2]);break;default:Q.apply(x,ne)}})(R)}finally{I(M),C=!1}}}}function z(M){M.source===f&&typeof M.data=="string"&&M.data.indexOf(S)===0&&O(+M.data.slice(S.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof no<"u"?no:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})}(oc)),oc.exports}var Em=_m();const Cm=Wa(Em);var lc={exports:{}};const Dm={},Tm=Object.freeze(Object.defineProperty({__proto__:null,default:Dm},Symbol.toStringTag,{value:"Module"})),cc=Rh(Tm);var Vd;function Im(){return Vd||(Vd=1,function(a,d){var o=void 0,v=function(p){return o||(o=new Promise(function(c,f){var x=typeof p<"u"?p:{},g=x.onAbort;x.onAbort=function(i){f(new Error(i)),g&&g(i)},x.postRun=x.postRun||[],x.postRun.push(function(){c(x)}),a=void 0;var m;m||(m=typeof x<"u"?x:{}),m.onRuntimeInitialized=function(){function i(pe,Ce){switch(typeof Ce){case"boolean":Ro(pe,Ce?1:0);break;case"number":Ao(pe,Ce);break;case"string":Mo(pe,Ce,-1,-1);break;case"object":if(Ce===null)Bs(pe);else if(Ce.length!=null){var Ve=cs(Ce,ls);Oo(pe,Ve,Ce.length,-1),Xr(Ve)}else ps(pe,"Wrong API use : tried to return a value of an unknown type ("+Ce+").",-1);break;default:Bs(pe)}}function u(pe,Ce){for(var Ve=[],at=0;at<pe;at+=1){var lt=ue(Ce+4*at,"i32"),vt=Co(lt);if(vt===1||vt===2)lt=Io(lt);else if(vt===3)lt=Do(lt);else if(vt===4){vt=lt,lt=oi(vt),vt=To(vt);for(var Yt=new Uint8Array(lt),dr=0;dr<lt;dr+=1)Yt[dr]=ee[vt+dr];lt=Yt}else lt=null;Ve.push(lt)}return Ve}function j(pe,Ce){this.La=pe,this.db=Ce,this.Ja=1,this.fb=[]}function F(pe,Ce){if(this.db=Ce,Ce=ft(pe)+1,this.Ya=ds(Ce),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Ct(pe,ae,this.Ya,Ce),this.eb=this.Ya,this.Ua=this.ib=null}function Z(pe){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),pe!=null){var Ce=this.filename,Ve="/",at=Ce;if(Ve&&(Ve=typeof Ve=="string"?Ve:kt(Ve),at=Ce?ce(Ve+"/"+Ce):Ve),Ce=Yr(!0,!0),at=Kn(at,(Ce!==void 0?Ce:438)&4095|32768,0),pe){if(typeof pe=="string"){Ve=Array(pe.length);for(var lt=0,vt=pe.length;lt<vt;++lt)Ve[lt]=pe.charCodeAt(lt);pe=Ve}es(at,Ce|146),Ve=Sn(at,577),Xa(Ve,pe,0,pe.length,0),Os(Ve),es(at,Ce)}}this.handleError(tt(this.filename,we)),this.db=ue(we,"i32"),ci(this.db),this.Za={},this.Na={}}var we=qr(4),Se=m.cwrap,tt=Se("sqlite3_open","number",["string","number"]),dt=Se("sqlite3_close_v2","number",["number"]),nt=Se("sqlite3_exec","number",["number","string","number","number","number"]),It=Se("sqlite3_changes","number",["number"]),Mt=Se("sqlite3_prepare_v2","number",["number","string","number","number","number"]),da=Se("sqlite3_sql","string",["number"]),Ls=Se("sqlite3_normalized_sql","string",["number"]),fs=Se("sqlite3_prepare_v2","number",["number","number","number","number","number"]),ai=Se("sqlite3_bind_text","number",["number","number","number","number","number"]),er=Se("sqlite3_bind_blob","number",["number","number","number","number","number"]),In=Se("sqlite3_bind_double","number",["number","number","number"]),fa=Se("sqlite3_bind_int","number",["number","number","number"]),hs=Se("sqlite3_bind_parameter_index","number",["number","string"]),bo=Se("sqlite3_step","number",["number"]),ha=Se("sqlite3_errmsg","string",["number"]),ma=Se("sqlite3_column_count","number",["number"]),ms=Se("sqlite3_data_count","number",["number"]),Us=Se("sqlite3_column_double","number",["number","number"]),pa=Se("sqlite3_column_text","string",["number","number"]),ko=Se("sqlite3_column_blob","number",["number","number"]),jo=Se("sqlite3_column_bytes","number",["number","number"]),So=Se("sqlite3_column_type","number",["number","number"]),ga=Se("sqlite3_column_name","string",["number","number"]),No=Se("sqlite3_reset","number",["number"]),_o=Se("sqlite3_clear_bindings","number",["number"]),Eo=Se("sqlite3_finalize","number",["number"]),ii=Se("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Co=Se("sqlite3_value_type","number",["number"]),oi=Se("sqlite3_value_bytes","number",["number"]),Do=Se("sqlite3_value_text","string",["number"]),To=Se("sqlite3_value_blob","number",["number"]),Io=Se("sqlite3_value_double","number",["number"]),Ao=Se("sqlite3_result_double","",["number","number"]),Bs=Se("sqlite3_result_null","",["number"]),Mo=Se("sqlite3_result_text","",["number","string","number","number"]),Oo=Se("sqlite3_result_blob","",["number","number","number","number"]),Ro=Se("sqlite3_result_int","",["number","number"]),ps=Se("sqlite3_result_error","",["number","string","number"]),li=Se("sqlite3_aggregate_context","number",["number","number"]),ci=Se("RegisterExtensionFunctions","number",["number"]);j.prototype.bind=function(pe){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(pe)?this.wb(pe):pe!=null&&typeof pe=="object"?this.xb(pe):!0},j.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var pe=bo(this.La);switch(pe){case 100:return!0;case 101:return!1;default:throw this.db.handleError(pe)}},j.prototype.rb=function(pe){return pe==null&&(pe=this.Ja,this.Ja+=1),Us(this.La,pe)},j.prototype.Ab=function(pe){if(pe==null&&(pe=this.Ja,this.Ja+=1),pe=pa(this.La,pe),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(pe)},j.prototype.Bb=function(pe){return pe==null&&(pe=this.Ja,this.Ja+=1),pa(this.La,pe)},j.prototype.getBlob=function(pe){pe==null&&(pe=this.Ja,this.Ja+=1);var Ce=jo(this.La,pe);pe=ko(this.La,pe);for(var Ve=new Uint8Array(Ce),at=0;at<Ce;at+=1)Ve[at]=ee[pe+at];return Ve},j.prototype.get=function(pe,Ce){Ce=Ce||{},pe!=null&&this.bind(pe)&&this.step(),pe=[];for(var Ve=ms(this.La),at=0;at<Ve;at+=1)switch(So(this.La,at)){case 1:var lt=Ce.useBigInt?this.Ab(at):this.rb(at);pe.push(lt);break;case 2:pe.push(this.rb(at));break;case 3:pe.push(this.Bb(at));break;case 4:pe.push(this.getBlob(at));break;default:pe.push(null)}return pe},j.prototype.getColumnNames=function(){for(var pe=[],Ce=ma(this.La),Ve=0;Ve<Ce;Ve+=1)pe.push(ga(this.La,Ve));return pe},j.prototype.getAsObject=function(pe,Ce){pe=this.get(pe,Ce),Ce=this.getColumnNames();for(var Ve={},at=0;at<Ce.length;at+=1)Ve[Ce[at]]=pe[at];return Ve},j.prototype.getSQL=function(){return da(this.La)},j.prototype.getNormalizedSQL=function(){return Ls(this.La)},j.prototype.run=function(pe){return pe!=null&&this.bind(pe),this.step(),this.reset()},j.prototype.nb=function(pe,Ce){Ce==null&&(Ce=this.Ja,this.Ja+=1),pe=bt(pe);var Ve=cs(pe,ls);this.fb.push(Ve),this.db.handleError(ai(this.La,Ce,Ve,pe.length-1,0))},j.prototype.vb=function(pe,Ce){Ce==null&&(Ce=this.Ja,this.Ja+=1);var Ve=cs(pe,ls);this.fb.push(Ve),this.db.handleError(er(this.La,Ce,Ve,pe.length,0))},j.prototype.mb=function(pe,Ce){Ce==null&&(Ce=this.Ja,this.Ja+=1),this.db.handleError((pe===(pe|0)?fa:In)(this.La,Ce,pe))},j.prototype.yb=function(pe){pe==null&&(pe=this.Ja,this.Ja+=1),er(this.La,pe,0,0,0)},j.prototype.ob=function(pe,Ce){switch(Ce==null&&(Ce=this.Ja,this.Ja+=1),typeof pe){case"string":this.nb(pe,Ce);return;case"number":this.mb(pe,Ce);return;case"bigint":this.nb(pe.toString(),Ce);return;case"boolean":this.mb(pe+0,Ce);return;case"object":if(pe===null){this.yb(Ce);return}if(pe.length!=null){this.vb(pe,Ce);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+pe+")."},j.prototype.xb=function(pe){var Ce=this;return Object.keys(pe).forEach(function(Ve){var at=hs(Ce.La,Ve);at!==0&&Ce.ob(pe[Ve],at)}),!0},j.prototype.wb=function(pe){for(var Ce=0;Ce<pe.length;Ce+=1)this.ob(pe[Ce],Ce+1);return!0},j.prototype.reset=function(){return this.freemem(),_o(this.La)===0&&No(this.La)===0},j.prototype.freemem=function(){for(var pe;(pe=this.fb.pop())!==void 0;)Xr(pe)},j.prototype.free=function(){this.freemem();var pe=Eo(this.La)===0;return delete this.db.Za[this.La],this.La=0,pe},F.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var pe=Dn(),Ce=qr(4);W(we),W(Ce);try{this.db.handleError(fs(this.db.db,this.eb,-1,we,Ce)),this.eb=ue(Ce,"i32");var Ve=ue(we,"i32");return Ve===0?(this.gb(),{done:!0}):(this.Ua=new j(Ve,this.db),this.db.Za[Ve]=this.Ua,{value:this.Ua,done:!1})}catch(at){throw this.ib=be(this.eb),this.gb(),at}finally{en(pe)}},F.prototype.gb=function(){Xr(this.Ya),this.Ya=null},F.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:be(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(F.prototype[Symbol.iterator]=function(){return this}),Z.prototype.run=function(pe,Ce){if(!this.db)throw"Database closed";if(Ce){pe=this.prepare(pe,Ce);try{pe.step()}finally{pe.free()}}else this.handleError(nt(this.db,pe,0,0,we));return this},Z.prototype.exec=function(pe,Ce,Ve){if(!this.db)throw"Database closed";var at=Dn(),lt=null;try{var vt=os(pe),Yt=qr(4);for(pe=[];ue(vt,"i8")!==0;){W(we),W(Yt),this.handleError(fs(this.db,vt,-1,we,Yt));var dr=ue(we,"i32");if(vt=ue(Yt,"i32"),dr!==0){var tr=null;for(lt=new j(dr,this),Ce!=null&&lt.bind(Ce);lt.step();)tr===null&&(tr={columns:lt.getColumnNames(),values:[]},pe.push(tr)),tr.values.push(lt.get(null,Ve));lt.free()}}return pe}catch(fr){throw lt&&lt.free(),fr}finally{en(at)}},Z.prototype.each=function(pe,Ce,Ve,at,lt){typeof Ce=="function"&&(at=Ve,Ve=Ce,Ce=void 0),pe=this.prepare(pe,Ce);try{for(;pe.step();)Ve(pe.getAsObject(null,lt))}finally{pe.free()}if(typeof at=="function")return at()},Z.prototype.prepare=function(pe,Ce){if(W(we),this.handleError(Mt(this.db,pe,-1,we,0)),pe=ue(we,"i32"),pe===0)throw"Nothing to prepare";var Ve=new j(pe,this);return Ce!=null&&Ve.bind(Ce),this.Za[pe]=Ve},Z.prototype.iterateStatements=function(pe){return new F(pe,this)},Z.prototype.export=function(){Object.values(this.Za).forEach(function(Ce){Ce.free()}),Object.values(this.Na).forEach(or),this.Na={},this.handleError(dt(this.db));var pe=kr(this.filename);return this.handleError(tt(this.filename,we)),this.db=ue(we,"i32"),ci(this.db),pe},Z.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(pe){pe.free()}),Object.values(this.Na).forEach(or),this.Na={},this.handleError(dt(this.db)),Za("/"+this.filename),this.db=null)},Z.prototype.handleError=function(pe){if(pe===0)return null;throw pe=ha(this.db),Error(pe)},Z.prototype.getRowsModified=function(){return It(this.db)},Z.prototype.create_function=function(pe,Ce){Object.prototype.hasOwnProperty.call(this.Na,pe)&&(or(this.Na[pe]),delete this.Na[pe]);var Ve=jr(function(at,lt,vt){lt=u(lt,vt);try{var Yt=Ce.apply(null,lt)}catch(dr){ps(at,dr,-1);return}i(at,Yt)},"viii");return this.Na[pe]=Ve,this.handleError(ii(this.db,pe,Ce.length,1,0,Ve,0,0,0)),this},Z.prototype.create_aggregate=function(pe,Ce){var Ve=Ce.init||function(){return null},at=Ce.finalize||function(tr){return tr},lt=Ce.step;if(!lt)throw"An aggregate function must have a step function in "+pe;var vt={};Object.hasOwnProperty.call(this.Na,pe)&&(or(this.Na[pe]),delete this.Na[pe]),Ce=pe+"__finalize",Object.hasOwnProperty.call(this.Na,Ce)&&(or(this.Na[Ce]),delete this.Na[Ce]);var Yt=jr(function(tr,fr,qs){var tn=li(tr,1);Object.hasOwnProperty.call(vt,tn)||(vt[tn]=Ve()),fr=u(fr,qs),fr=[vt[tn]].concat(fr);try{vt[tn]=lt.apply(null,fr)}catch(ui){delete vt[tn],ps(tr,ui,-1)}},"viii"),dr=jr(function(tr){var fr=li(tr,1);try{var qs=at(vt[fr])}catch(tn){delete vt[fr],ps(tr,tn,-1);return}i(tr,qs),delete vt[fr]},"vi");return this.Na[pe]=Yt,this.Na[Ce]=dr,this.handleError(ii(this.db,pe,lt.length-1,1,0,0,Yt,dr,0)),this},m.Database=Z};var T=Object.assign({},m),S="./this.program",E=typeof window=="object",k=typeof importScripts=="function",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",b="",D,I,O;if(C){var z=cc,M=cc;b=k?M.dirname(b)+"/":__dirname+"/",D=(i,u)=>(i=X(i)?new URL(i):M.normalize(i),z.readFileSync(i,u?void 0:"utf8")),O=i=>(i=D(i,!0),i.buffer||(i=new Uint8Array(i)),i),I=(i,u,j,F=!0)=>{i=X(i)?new URL(i):M.normalize(i),z.readFile(i,F?void 0:"utf8",(Z,we)=>{Z?j(Z):u(F?we.buffer:we)})},!m.thisProgram&&1<process.argv.length&&(S=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.exports=m,m.inspect=()=>"[Emscripten Module object]"}else(E||k)&&(k?b=self.location.href:typeof document<"u"&&document.currentScript&&(b=document.currentScript.src),b=b.indexOf("blob:")!==0?b.substr(0,b.replace(/[?#].*/,"").lastIndexOf("/")+1):"",D=i=>{var u=new XMLHttpRequest;return u.open("GET",i,!1),u.send(null),u.responseText},k&&(O=i=>{var u=new XMLHttpRequest;return u.open("GET",i,!1),u.responseType="arraybuffer",u.send(null),new Uint8Array(u.response)}),I=(i,u,j)=>{var F=new XMLHttpRequest;F.open("GET",i,!0),F.responseType="arraybuffer",F.onload=()=>{F.status==200||F.status==0&&F.response?u(F.response):j()},F.onerror=j,F.send(null)});var R=m.print||console.log.bind(console),G=m.printErr||console.error.bind(console);Object.assign(m,T),T=null,m.thisProgram&&(S=m.thisProgram);var Q;m.wasmBinary&&(Q=m.wasmBinary),typeof WebAssembly!="object"&&H("no native wasm support detected");var ne,V=!1,ee,ae,$,K,_,xe,je;function re(){var i=ne.buffer;m.HEAP8=ee=new Int8Array(i),m.HEAP16=$=new Int16Array(i),m.HEAPU8=ae=new Uint8Array(i),m.HEAPU16=new Uint16Array(i),m.HEAP32=K=new Int32Array(i),m.HEAPU32=_=new Uint32Array(i),m.HEAPF32=xe=new Float32Array(i),m.HEAPF64=je=new Float64Array(i)}var fe=[],ie=[],P=[];function w(){var i=m.preRun.shift();fe.unshift(i)}var N=0,B=null;function H(i){var u;throw(u=m.onAbort)==null||u.call(m,i),i="Aborted("+i+")",G(i),V=!0,new WebAssembly.RuntimeError(i+". Build with -sASSERTIONS for more info.")}var U=i=>i.startsWith("data:application/octet-stream;base64,"),X=i=>i.startsWith("file://"),he;if(he="sql-wasm.wasm",!U(he)){var oe=he;he=m.locateFile?m.locateFile(oe,b):b+oe}function ye(i){if(i==he&&Q)return new Uint8Array(Q);if(O)return O(i);throw"both async and sync fetching of the wasm failed"}function Ie(i){if(!Q&&(E||k)){if(typeof fetch=="function"&&!X(i))return fetch(i,{credentials:"same-origin"}).then(u=>{if(!u.ok)throw"failed to load wasm binary file at '"+i+"'";return u.arrayBuffer()}).catch(()=>ye(i));if(I)return new Promise((u,j)=>{I(i,F=>u(new Uint8Array(F)),j)})}return Promise.resolve().then(()=>ye(i))}function ze(i,u,j){return Ie(i).then(F=>WebAssembly.instantiate(F,u)).then(F=>F).then(j,F=>{G(`failed to asynchronously prepare wasm: ${F}`),H(F)})}function qe(i,u){var j=he;Q||typeof WebAssembly.instantiateStreaming!="function"||U(j)||X(j)||C||typeof fetch!="function"?ze(j,i,u):fetch(j,{credentials:"same-origin"}).then(F=>WebAssembly.instantiateStreaming(F,i).then(u,function(Z){return G(`wasm streaming compile failed: ${Z}`),G("falling back to ArrayBuffer instantiation"),ze(j,i,u)}))}var Ee,y,de=i=>{for(;0<i.length;)i.shift()(m)};function ue(i,u="i8"){switch(u.endsWith("*")&&(u="*"),u){case"i1":return ee[i>>0];case"i8":return ee[i>>0];case"i16":return $[i>>1];case"i32":return K[i>>2];case"i64":H("to do getValue(i64) use WASM_BIGINT");case"float":return xe[i>>2];case"double":return je[i>>3];case"*":return _[i>>2];default:H(`invalid type for getValue: ${u}`)}}function W(i){var u="i32";switch(u.endsWith("*")&&(u="*"),u){case"i1":ee[i>>0]=0;break;case"i8":ee[i>>0]=0;break;case"i16":$[i>>1]=0;break;case"i32":K[i>>2]=0;break;case"i64":H("to do setValue(i64) use WASM_BIGINT");case"float":xe[i>>2]=0;break;case"double":je[i>>3]=0;break;case"*":_[i>>2]=0;break;default:H(`invalid type for setValue: ${u}`)}}var q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Y=(i,u,j)=>{var F=u+j;for(j=u;i[j]&&!(j>=F);)++j;if(16<j-u&&i.buffer&&q)return q.decode(i.subarray(u,j));for(F="";u<j;){var Z=i[u++];if(Z&128){var we=i[u++]&63;if((Z&224)==192)F+=String.fromCharCode((Z&31)<<6|we);else{var Se=i[u++]&63;Z=(Z&240)==224?(Z&15)<<12|we<<6|Se:(Z&7)<<18|we<<12|Se<<6|i[u++]&63,65536>Z?F+=String.fromCharCode(Z):(Z-=65536,F+=String.fromCharCode(55296|Z>>10,56320|Z&1023))}}else F+=String.fromCharCode(Z)}return F},be=(i,u)=>i?Y(ae,i,u):"",Ne=(i,u)=>{for(var j=0,F=i.length-1;0<=F;F--){var Z=i[F];Z==="."?i.splice(F,1):Z===".."?(i.splice(F,1),j++):j&&(i.splice(F,1),j--)}if(u)for(;j;j--)i.unshift("..");return i},ce=i=>{var u=i.charAt(0)==="/",j=i.substr(-1)==="/";return(i=Ne(i.split("/").filter(F=>!!F),!u).join("/"))||u||(i="."),i&&j&&(i+="/"),(u?"/":"")+i},Ae=i=>{var u=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(i).slice(1);return i=u[0],u=u[1],!i&&!u?".":(u&&(u=u.substr(0,u.length-1)),i+u)},Fe=i=>{if(i==="/")return"/";i=ce(i),i=i.replace(/\/$/,"");var u=i.lastIndexOf("/");return u===-1?i:i.substr(u+1)},Me=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return j=>crypto.getRandomValues(j);if(C)try{var i=cc;if(i.randomFillSync)return j=>i.randomFillSync(j);var u=i.randomBytes;return j=>(j.set(u(j.byteLength)),j)}catch{}H("initRandomDevice")},Ue=i=>(Ue=Me())(i);function st(){for(var i="",u=!1,j=arguments.length-1;-1<=j&&!u;j--){if(u=0<=j?arguments[j]:"/",typeof u!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!u)return"";i=u+"/"+i,u=u.charAt(0)==="/"}return i=Ne(i.split("/").filter(F=>!!F),!u).join("/"),(u?"/":"")+i||"."}var Ye=[],ft=i=>{for(var u=0,j=0;j<i.length;++j){var F=i.charCodeAt(j);127>=F?u++:2047>=F?u+=2:55296<=F&&57343>=F?(u+=4,++j):u+=3}return u},Ct=(i,u,j,F)=>{if(!(0<F))return 0;var Z=j;F=j+F-1;for(var we=0;we<i.length;++we){var Se=i.charCodeAt(we);if(55296<=Se&&57343>=Se){var tt=i.charCodeAt(++we);Se=65536+((Se&1023)<<10)|tt&1023}if(127>=Se){if(j>=F)break;u[j++]=Se}else{if(2047>=Se){if(j+1>=F)break;u[j++]=192|Se>>6}else{if(65535>=Se){if(j+2>=F)break;u[j++]=224|Se>>12}else{if(j+3>=F)break;u[j++]=240|Se>>18,u[j++]=128|Se>>12&63}u[j++]=128|Se>>6&63}u[j++]=128|Se&63}}return u[j]=0,j-Z};function bt(i,u){var j=Array(ft(i)+1);return i=Ct(i,j,0,j.length),u&&(j.length=i),j}var ur=[];function ht(i,u){ur[i]={input:[],output:[],Xa:u},Is(i,Cr)}var Cr={open(i){var u=ur[i.node.rdev];if(!u)throw new _e(43);i.tty=u,i.seekable=!1},close(i){i.tty.Xa.fsync(i.tty)},fsync(i){i.tty.Xa.fsync(i.tty)},read(i,u,j,F){if(!i.tty||!i.tty.Xa.sb)throw new _e(60);for(var Z=0,we=0;we<F;we++){try{var Se=i.tty.Xa.sb(i.tty)}catch{throw new _e(29)}if(Se===void 0&&Z===0)throw new _e(6);if(Se==null)break;Z++,u[j+we]=Se}return Z&&(i.node.timestamp=Date.now()),Z},write(i,u,j,F){if(!i.tty||!i.tty.Xa.jb)throw new _e(60);try{for(var Z=0;Z<F;Z++)i.tty.Xa.jb(i.tty,u[j+Z])}catch{throw new _e(29)}return F&&(i.node.timestamp=Date.now()),Z}},Dr={sb(){e:{if(!Ye.length){var i=null;if(C){var u=Buffer.alloc(256),j=0,F=process.stdin.fd;try{j=z.readSync(F,u)}catch(Z){if(Z.toString().includes("EOF"))j=0;else throw Z}0<j?i=u.slice(0,j).toString("utf-8"):i=null}else typeof window<"u"&&typeof window.prompt=="function"?(i=window.prompt("Input: "),i!==null&&(i+=`
`)):typeof readline=="function"&&(i=readline(),i!==null&&(i+=`
`));if(!i){i=null;break e}Ye=bt(i,!0)}i=Ye.shift()}return i},jb(i,u){u===null||u===10?(R(Y(i.output,0)),i.output=[]):u!=0&&i.output.push(u)},fsync(i){i.output&&0<i.output.length&&(R(Y(i.output,0)),i.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},Vt={jb(i,u){u===null||u===10?(G(Y(i.output,0)),i.output=[]):u!=0&&i.output.push(u)},fsync(i){i.output&&0<i.output.length&&(G(Y(i.output,0)),i.output=[])}};function ir(i,u){var j=i.Ia?i.Ia.length:0;j>=u||(u=Math.max(u,j*(1048576>j?2:1.125)>>>0),j!=0&&(u=Math.max(u,256)),j=i.Ia,i.Ia=new Uint8Array(u),0<i.Ma&&i.Ia.set(j.subarray(0,i.Ma),0))}var rt={Qa:null,Ra(){return rt.createNode(null,"/",16895,0)},createNode(i,u,j,F){if((j&61440)===24576||(j&61440)===4096)throw new _e(63);return rt.Qa||(rt.Qa={dir:{node:{Pa:rt.Ga.Pa,Oa:rt.Ga.Oa,lookup:rt.Ga.lookup,ab:rt.Ga.ab,rename:rt.Ga.rename,unlink:rt.Ga.unlink,rmdir:rt.Ga.rmdir,readdir:rt.Ga.readdir,symlink:rt.Ga.symlink},stream:{Ta:rt.Ha.Ta}},file:{node:{Pa:rt.Ga.Pa,Oa:rt.Ga.Oa},stream:{Ta:rt.Ha.Ta,read:rt.Ha.read,write:rt.Ha.write,lb:rt.Ha.lb,bb:rt.Ha.bb,cb:rt.Ha.cb}},link:{node:{Pa:rt.Ga.Pa,Oa:rt.Ga.Oa,readlink:rt.Ga.readlink},stream:{}},pb:{node:{Pa:rt.Ga.Pa,Oa:rt.Ga.Oa},stream:Ja}}),j=Kr(i,u,j,F),$t(j.mode)?(j.Ga=rt.Qa.dir.node,j.Ha=rt.Qa.dir.stream,j.Ia={}):(j.mode&61440)===32768?(j.Ga=rt.Qa.file.node,j.Ha=rt.Qa.file.stream,j.Ma=0,j.Ia=null):(j.mode&61440)===40960?(j.Ga=rt.Qa.link.node,j.Ha=rt.Qa.link.stream):(j.mode&61440)===8192&&(j.Ga=rt.Qa.pb.node,j.Ha=rt.Qa.pb.stream),j.timestamp=Date.now(),i&&(i.Ia[u]=j,i.timestamp=j.timestamp),j},Lb(i){return i.Ia?i.Ia.subarray?i.Ia.subarray(0,i.Ma):new Uint8Array(i.Ia):new Uint8Array(0)},Ga:{Pa(i){var u={};return u.dev=(i.mode&61440)===8192?i.id:1,u.ino=i.id,u.mode=i.mode,u.nlink=1,u.uid=0,u.gid=0,u.rdev=i.rdev,$t(i.mode)?u.size=4096:(i.mode&61440)===32768?u.size=i.Ma:(i.mode&61440)===40960?u.size=i.link.length:u.size=0,u.atime=new Date(i.timestamp),u.mtime=new Date(i.timestamp),u.ctime=new Date(i.timestamp),u.zb=4096,u.blocks=Math.ceil(u.size/u.zb),u},Oa(i,u){if(u.mode!==void 0&&(i.mode=u.mode),u.timestamp!==void 0&&(i.timestamp=u.timestamp),u.size!==void 0&&(u=u.size,i.Ma!=u))if(u==0)i.Ia=null,i.Ma=0;else{var j=i.Ia;i.Ia=new Uint8Array(u),j&&i.Ia.set(j.subarray(0,Math.min(u,i.Ma))),i.Ma=u}},lookup(){throw Nt[44]},ab(i,u,j,F){return rt.createNode(i,u,j,F)},rename(i,u,j){if($t(i.mode)){try{var F=Xt(u,j)}catch{}if(F)for(var Z in F.Ia)throw new _e(55)}delete i.parent.Ia[i.name],i.parent.timestamp=Date.now(),i.name=j,u.Ia[j]=i,u.timestamp=i.parent.timestamp,i.parent=u},unlink(i,u){delete i.Ia[u],i.timestamp=Date.now()},rmdir(i,u){var j=Xt(i,u),F;for(F in j.Ia)throw new _e(55);delete i.Ia[u],i.timestamp=Date.now()},readdir(i){var u=[".",".."],j;for(j of Object.keys(i.Ia))u.push(j);return u},symlink(i,u,j){return i=rt.createNode(i,u,41471,0),i.link=j,i},readlink(i){if((i.mode&61440)!==40960)throw new _e(28);return i.link}},Ha:{read(i,u,j,F,Z){var we=i.node.Ia;if(Z>=i.node.Ma)return 0;if(i=Math.min(i.node.Ma-Z,F),8<i&&we.subarray)u.set(we.subarray(Z,Z+i),j);else for(F=0;F<i;F++)u[j+F]=we[Z+F];return i},write(i,u,j,F,Z,we){if(u.buffer===ee.buffer&&(we=!1),!F)return 0;if(i=i.node,i.timestamp=Date.now(),u.subarray&&(!i.Ia||i.Ia.subarray)){if(we)return i.Ia=u.subarray(j,j+F),i.Ma=F;if(i.Ma===0&&Z===0)return i.Ia=u.slice(j,j+F),i.Ma=F;if(Z+F<=i.Ma)return i.Ia.set(u.subarray(j,j+F),Z),F}if(ir(i,Z+F),i.Ia.subarray&&u.subarray)i.Ia.set(u.subarray(j,j+F),Z);else for(we=0;we<F;we++)i.Ia[Z+we]=u[j+we];return i.Ma=Math.max(i.Ma,Z+F),F},Ta(i,u,j){if(j===1?u+=i.position:j===2&&(i.node.mode&61440)===32768&&(u+=i.node.Ma),0>u)throw new _e(28);return u},lb(i,u,j){ir(i.node,u+j),i.node.Ma=Math.max(i.node.Ma,u+j)},bb(i,u,j,F,Z){if((i.node.mode&61440)!==32768)throw new _e(43);if(i=i.node.Ia,Z&2||i.buffer!==ee.buffer){if((0<j||j+u<i.length)&&(i.subarray?i=i.subarray(j,j+u):i=Array.prototype.slice.call(i,j,j+u)),j=!0,u=65536*Math.ceil(u/65536),(Z=si(65536,u))?(ae.fill(0,Z,Z+u),u=Z):u=0,!u)throw new _e(48);ee.set(i,u)}else j=!1,u=i.byteOffset;return{Db:u,ub:j}},cb(i,u,j,F){return rt.Ha.write(i,u,0,F,j,!1),0}}},Yr=(i,u)=>{var j=0;return i&&(j|=365),u&&(j|=146),j},Pr=null,Pe={},Le=[],Ke=1,et=null,ot=!0,_e=null,Nt={};function xt(i,u={}){if(i=st(i),!i)return{path:"",node:null};if(u=Object.assign({qb:!0,kb:0},u),8<u.kb)throw new _e(32);i=i.split("/").filter(Se=>!!Se);for(var j=Pr,F="/",Z=0;Z<i.length;Z++){var we=Z===i.length-1;if(we&&u.parent)break;if(j=Xt(j,i[Z]),F=ce(F+"/"+i[Z]),j.Va&&(!we||we&&u.qb)&&(j=j.Va.root),!we||u.Sa){for(we=0;(j.mode&61440)===40960;)if(j=Tt(F),F=st(Ae(F),j),j=xt(F,{kb:u.kb+1}).node,40<we++)throw new _e(32)}}return{path:F,node:j}}function kt(i){for(var u;;){if(i===i.parent)return i=i.Ra.tb,u?i[i.length-1]!=="/"?`${i}/${u}`:i+u:i;u=u?`${i.name}/${u}`:i.name,i=i.parent}}function jt(i,u){for(var j=0,F=0;F<u.length;F++)j=(j<<5)-j+u.charCodeAt(F)|0;return(i+j>>>0)%et.length}function Dt(i){var u=jt(i.parent.id,i.name);if(et[u]===i)et[u]=i.Wa;else for(u=et[u];u;){if(u.Wa===i){u.Wa=i.Wa;break}u=u.Wa}}function Xt(i,u){var j;if(j=(j=Lr(i,"x"))?j:i.Ga.lookup?0:2)throw new _e(j,i);for(j=et[jt(i.id,u)];j;j=j.Wa){var F=j.name;if(j.parent.id===i.id&&F===u)return j}return i.Ga.lookup(i,u)}function Kr(i,u,j,F){return i=new Cn(i,u,j,F),u=jt(i.parent.id,i.name),i.Wa=et[u],et[u]=i}function $t(i){return(i&61440)===16384}function Yn(i){var u=["r","w","rw"][i&3];return i&512&&(u+="w"),u}function Lr(i,u){if(ot)return 0;if(!u.includes("r")||i.mode&292){if(u.includes("w")&&!(i.mode&146)||u.includes("x")&&!(i.mode&73))return 2}else return 2;return 0}function Ts(i,u){try{return Xt(i,u),20}catch{}return Lr(i,"wx")}function Va(i,u,j){try{var F=Xt(i,u)}catch(Z){return Z.Ka}if(i=Lr(i,"wx"))return i;if(j){if(!$t(F.mode))return 54;if(F===F.parent||kt(F)==="/")return 10}else if($t(F.mode))return 31;return 0}function vo(){for(var i=0;4096>=i;i++)if(!Le[i])return i;throw new _e(33)}function Jt(i){if(i=Le[i],!i)throw new _e(8);return i}function Zr(i,u=-1){return Ur||(Ur=function(){this.$a={}},Ur.prototype={},Object.defineProperties(Ur.prototype,{object:{get(){return this.node},set(j){this.node=j}},flags:{get(){return this.$a.flags},set(j){this.$a.flags=j}},position:{get(){return this.$a.position},set(j){this.$a.position=j}}})),i=Object.assign(new Ur,i),u==-1&&(u=vo()),i.fd=u,Le[u]=i}var Ja={open(i){var u,j;i.Ha=Pe[i.node.rdev].Ha,(j=(u=i.Ha).open)==null||j.call(u,i)},Ta(){throw new _e(70)}};function Is(i,u){Pe[i]={Ha:u}}function Ya(i,u){var j=u==="/",F=!u;if(j&&Pr)throw new _e(10);if(!j&&!F){var Z=xt(u,{qb:!1});if(u=Z.path,Z=Z.node,Z.Va)throw new _e(10);if(!$t(Z.mode))throw new _e(54)}u={type:i,Pb:{},tb:u,Cb:[]},i=i.Ra(u),i.Ra=u,u.root=i,j?Pr=i:Z&&(Z.Va=u,Z.Ra&&Z.Ra.Cb.push(u))}function Kn(i,u,j){var F=xt(i,{parent:!0}).node;if(i=Fe(i),!i||i==="."||i==="..")throw new _e(28);var Z=Ts(F,i);if(Z)throw new _e(Z);if(!F.Ga.ab)throw new _e(63);return F.Ga.ab(F,i,u,j)}function wr(i,u){return Kn(i,(u!==void 0?u:511)&1023|16384,0)}function Zn(i,u,j){typeof j>"u"&&(j=u,u=438),Kn(i,u|8192,j)}function As(i,u){if(!st(i))throw new _e(44);var j=xt(u,{parent:!0}).node;if(!j)throw new _e(44);u=Fe(u);var F=Ts(j,u);if(F)throw new _e(F);if(!j.Ga.symlink)throw new _e(63);j.Ga.symlink(j,u,i)}function Ka(i){var u=xt(i,{parent:!0}).node;i=Fe(i);var j=Xt(u,i),F=Va(u,i,!0);if(F)throw new _e(F);if(!u.Ga.rmdir)throw new _e(63);if(j.Va)throw new _e(10);u.Ga.rmdir(u,i),Dt(j)}function Za(i){var u=xt(i,{parent:!0}).node;if(!u)throw new _e(44);i=Fe(i);var j=Xt(u,i),F=Va(u,i,!1);if(F)throw new _e(F);if(!u.Ga.unlink)throw new _e(63);if(j.Va)throw new _e(10);u.Ga.unlink(u,i),Dt(j)}function Tt(i){if(i=xt(i).node,!i)throw new _e(44);if(!i.Ga.readlink)throw new _e(28);return st(kt(i.parent),i.Ga.readlink(i))}function Xn(i,u){if(i=xt(i,{Sa:!u}).node,!i)throw new _e(44);if(!i.Ga.Pa)throw new _e(63);return i.Ga.Pa(i)}function Ms(i){return Xn(i,!0)}function es(i,u){if(i=typeof i=="string"?xt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new _e(63);i.Ga.Oa(i,{mode:u&4095|i.mode&-4096,timestamp:Date.now()})}function ts(i,u){if(0>u)throw new _e(28);if(i=typeof i=="string"?xt(i,{Sa:!0}).node:i,!i.Ga.Oa)throw new _e(63);if($t(i.mode))throw new _e(31);if((i.mode&61440)!==32768)throw new _e(28);var j=Lr(i,"w");if(j)throw new _e(j);i.Ga.Oa(i,{size:u,timestamp:Date.now()})}function Sn(i,u,j){if(i==="")throw new _e(44);if(typeof u=="string"){var F={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[u];if(typeof F>"u")throw Error(`Unknown file open mode: ${u}`);u=F}if(j=u&64?(typeof j>"u"?438:j)&4095|32768:0,typeof i=="object")var Z=i;else{i=ce(i);try{Z=xt(i,{Sa:!(u&131072)}).node}catch{}}if(F=!1,u&64)if(Z){if(u&128)throw new _e(20)}else Z=Kn(i,j,0),F=!0;if(!Z)throw new _e(44);if((Z.mode&61440)===8192&&(u&=-513),u&65536&&!$t(Z.mode))throw new _e(54);if(!F&&(j=Z?(Z.mode&61440)===40960?32:$t(Z.mode)&&(Yn(u)!=="r"||u&512)?31:Lr(Z,Yn(u)):44))throw new _e(j);return u&512&&!F&&ts(Z,0),u&=-131713,Z=Zr({node:Z,path:kt(Z),flags:u,seekable:!0,position:0,Ha:Z.Ha,Fb:[],error:!1}),Z.Ha.open&&Z.Ha.open(Z),!m.logReadFiles||u&1||(Nn||(Nn={}),i in Nn||(Nn[i]=1)),Z}function Os(i){if(i.fd===null)throw new _e(8);i.hb&&(i.hb=null);try{i.Ha.close&&i.Ha.close(i)}catch(u){throw u}finally{Le[i.fd]=null}i.fd=null}function rs(i,u,j){if(i.fd===null)throw new _e(8);if(!i.seekable||!i.Ha.Ta)throw new _e(70);if(j!=0&&j!=1&&j!=2)throw new _e(28);i.position=i.Ha.Ta(i,u,j),i.Fb=[]}function br(i,u,j,F,Z){if(0>F||0>Z)throw new _e(28);if(i.fd===null)throw new _e(8);if((i.flags&2097155)===1)throw new _e(8);if($t(i.node.mode))throw new _e(31);if(!i.Ha.read)throw new _e(28);var we=typeof Z<"u";if(!we)Z=i.position;else if(!i.seekable)throw new _e(70);return u=i.Ha.read(i,u,j,F,Z),we||(i.position+=u),u}function Xa(i,u,j,F,Z){if(0>F||0>Z)throw new _e(28);if(i.fd===null)throw new _e(8);if((i.flags&2097155)===0)throw new _e(8);if($t(i.node.mode))throw new _e(31);if(!i.Ha.write)throw new _e(28);i.seekable&&i.flags&1024&&rs(i,0,2);var we=typeof Z<"u";if(!we)Z=i.position;else if(!i.seekable)throw new _e(70);return u=i.Ha.write(i,u,j,F,Z,void 0),we||(i.position+=u),u}function kr(i){var u,j=Sn(i,j||0);i=Xn(i).size;var F=new Uint8Array(i);return br(j,F,0,i,0),u=F,Os(j),u}function ei(){_e||(_e=function(i,u){this.name="ErrnoError",this.node=u,this.Eb=function(j){this.Ka=j},this.Eb(i),this.message="FS error"},_e.prototype=Error(),_e.prototype.constructor=_e,[44].forEach(i=>{Nt[i]=new _e(i),Nt[i].stack="<generic error, no stack>"}))}var ti;function ns(i,u,j){i=ce("/dev/"+i);var F=Yr(!!u,!!j);ss||(ss=64);var Z=ss++<<8|0;Is(Z,{open(we){we.seekable=!1},close(){var we;(we=j==null?void 0:j.buffer)!=null&&we.length&&j(10)},read(we,Se,tt,dt){for(var nt=0,It=0;It<dt;It++){try{var Mt=u()}catch{throw new _e(29)}if(Mt===void 0&&nt===0)throw new _e(6);if(Mt==null)break;nt++,Se[tt+It]=Mt}return nt&&(we.node.timestamp=Date.now()),nt},write(we,Se,tt,dt){for(var nt=0;nt<dt;nt++)try{j(Se[tt+nt])}catch{throw new _e(29)}return dt&&(we.node.timestamp=Date.now()),nt}}),Zn(i,F,Z)}var ss,yt={},Ur,Nn;function dn(i,u,j){if(u.charAt(0)==="/")return u;if(i=i===-100?"/":Jt(i).path,u.length==0){if(!j)throw new _e(44);return i}return ce(i+"/"+u)}function Rs(i,u,j){try{var F=i(u)}catch(we){if(we&&we.node&&ce(u)!==ce(kt(we.node)))return-54;throw we}K[j>>2]=F.dev,K[j+4>>2]=F.mode,_[j+8>>2]=F.nlink,K[j+12>>2]=F.uid,K[j+16>>2]=F.gid,K[j+20>>2]=F.rdev,y=[F.size>>>0,(Ee=F.size,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[j+24>>2]=y[0],K[j+28>>2]=y[1],K[j+32>>2]=4096,K[j+36>>2]=F.blocks,i=F.atime.getTime(),u=F.mtime.getTime();var Z=F.ctime.getTime();return y=[Math.floor(i/1e3)>>>0,(Ee=Math.floor(i/1e3),1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[j+40>>2]=y[0],K[j+44>>2]=y[1],_[j+48>>2]=i%1e3*1e3,y=[Math.floor(u/1e3)>>>0,(Ee=Math.floor(u/1e3),1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[j+56>>2]=y[0],K[j+60>>2]=y[1],_[j+64>>2]=u%1e3*1e3,y=[Math.floor(Z/1e3)>>>0,(Ee=Math.floor(Z/1e3),1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[j+72>>2]=y[0],K[j+76>>2]=y[1],_[j+80>>2]=Z%1e3*1e3,y=[F.ino>>>0,(Ee=F.ino,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[j+88>>2]=y[0],K[j+92>>2]=y[1],0}var _n=void 0;function as(){var i=K[+_n>>2];return _n+=4,i}var fn=(i,u)=>u+2097152>>>0<4194305-!!i?(i>>>0)+4294967296*u:NaN,is=[0,31,60,91,121,152,182,213,244,274,305,335],wo=[0,31,59,90,120,151,181,212,243,273,304,334],zs=i=>{var u=ft(i)+1,j=ds(u);return j&&Ct(i,ae,j,u),j},mt={},ua=()=>{if(!Fs){var i={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:S||"./this.program"},u;for(u in mt)mt[u]===void 0?delete i[u]:i[u]=mt[u];var j=[];for(u in i)j.push(`${u}=${i[u]}`);Fs=j}return Fs},Fs,os=i=>{var u=ft(i)+1,j=qr(u);return Ct(i,ae,j,u),j},ri=(i,u,j,F)=>{var Z={string:nt=>{var It=0;return nt!=null&&nt!==0&&(It=os(nt)),It},array:nt=>{var It=qr(nt.length);return ee.set(nt,It),It}};i=m["_"+i];var we=[],Se=0;if(F)for(var tt=0;tt<F.length;tt++){var dt=Z[j[tt]];dt?(Se===0&&(Se=Dn()),we[tt]=dt(F[tt])):we[tt]=F[tt]}return j=i.apply(null,we),j=function(nt){return Se!==0&&en(Se),u==="string"?nt?Y(ae,nt):"":u==="boolean"?!!nt:nt}(j)},ls=0,cs=(i,u)=>(u=u==1?qr(i.length):ds(i.length),i.subarray||i.slice||(i=new Uint8Array(i)),ae.set(i,u),u),Br,En=[],Ht,or=i=>{Br.delete(Ht.get(i)),Ht.set(i,null),En.push(i)},jr=(i,u)=>{if(!Br){Br=new WeakMap;var j=Ht.length;if(Br)for(var F=0;F<0+j;F++){var Z=Ht.get(F);Z&&Br.set(Z,F)}}if(j=Br.get(i)||0)return j;if(En.length)j=En.pop();else{try{Ht.grow(1)}catch(tt){throw tt instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":tt}j=Ht.length-1}try{Ht.set(j,i)}catch(tt){if(!(tt instanceof TypeError))throw tt;if(typeof WebAssembly.Function=="function"){F=WebAssembly.Function,Z={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var we={parameters:[],results:u[0]=="v"?[]:[Z[u[0]]]},Se=1;Se<u.length;++Se)we.parameters.push(Z[u[Se]]);u=new F(we,i)}else{for(F=[1],Z=u.slice(0,1),u=u.slice(1),we={i:127,p:127,j:126,f:125,d:124,e:111},F.push(96),Se=u.length,128>Se?F.push(Se):F.push(Se%128|128,Se>>7),Se=0;Se<u.length;++Se)F.push(we[u[Se]]);Z=="v"?F.push(0):F.push(1,we[Z]),u=[0,97,115,109,1,0,0,0,1],Z=F.length,128>Z?u.push(Z):u.push(Z%128|128,Z>>7),u.push.apply(u,F),u.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),u=new WebAssembly.Module(new Uint8Array(u)),u=new WebAssembly.Instance(u,{e:{f:i}}).exports.f}Ht.set(j,u)}return Br.set(i,j),j};function Cn(i,u,j,F){i||(i=this),this.parent=i,this.Ra=i.Ra,this.Va=null,this.id=Ke++,this.name=u,this.mode=j,this.Ga={},this.Ha={},this.rdev=F}Object.defineProperties(Cn.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(i){i?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(i){i?this.mode|=146:this.mode&=-147}}}),ei(),et=Array(4096),Ya(rt,"/"),wr("/tmp"),wr("/home"),wr("/home/web_user"),function(){wr("/dev"),Is(259,{read:()=>0,write:(F,Z,we,Se)=>Se}),Zn("/dev/null",259),ht(1280,Dr),ht(1536,Vt),Zn("/dev/tty",1280),Zn("/dev/tty1",1536);var i=new Uint8Array(1024),u=0,j=()=>(u===0&&(u=Ue(i).byteLength),i[--u]);ns("random",j),ns("urandom",j),wr("/dev/shm"),wr("/dev/shm/tmp")}(),function(){wr("/proc");var i=wr("/proc/self");wr("/proc/self/fd"),Ya({Ra(){var u=Kr(i,"fd",16895,73);return u.Ga={lookup(j,F){var Z=Jt(+F);return j={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>Z.path}},j.parent=j}},u}},"/proc/self/fd")}();var us={a:(i,u,j,F)=>{H(`Assertion failed: ${i?Y(ae,i):""}, at: `+[u?u?Y(ae,u):"":"unknown filename",j,F?F?Y(ae,F):"":"unknown function"])},h:function(i,u){try{return i=i?Y(ae,i):"",es(i,u),0}catch(j){if(typeof yt>"u"||j.name!=="ErrnoError")throw j;return-j.Ka}},H:function(i,u,j){try{if(u=u?Y(ae,u):"",u=dn(i,u),j&-8)return-28;var F=xt(u,{Sa:!0}).node;return F?(i="",j&4&&(i+="r"),j&2&&(i+="w"),j&1&&(i+="x"),i&&Lr(F,i)?-2:0):-44}catch(Z){if(typeof yt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ka}},i:function(i,u){try{var j=Jt(i);return es(j.node,u),0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},g:function(i){try{var u=Jt(i).node,j=typeof u=="string"?xt(u,{Sa:!0}).node:u;if(!j.Ga.Oa)throw new _e(63);return j.Ga.Oa(j,{timestamp:Date.now()}),0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},b:function(i,u,j){_n=j;try{var F=Jt(i);switch(u){case 0:var Z=as();if(0>Z)return-28;for(;Le[Z];)Z++;return Zr(F,Z).fd;case 1:case 2:return 0;case 3:return F.flags;case 4:return Z=as(),F.flags|=Z,0;case 5:return Z=as(),$[Z+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return K[ni()>>2]=28,-1;default:return-28}}catch(we){if(typeof yt>"u"||we.name!=="ErrnoError")throw we;return-we.Ka}},f:function(i,u){try{var j=Jt(i);return Rs(Xn,j.path,u)}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},n:function(i,u,j){u=fn(u,j);try{if(isNaN(u))return 61;var F=Jt(i);if((F.flags&2097155)===0)throw new _e(28);return ts(F.node,u),0}catch(Z){if(typeof yt>"u"||Z.name!=="ErrnoError")throw Z;return-Z.Ka}},C:function(i,u){try{if(u===0)return-28;var j=ft("/")+1;return u<j?-68:(Ct("/",ae,i,u),j)}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},F:function(i,u){try{return i=i?Y(ae,i):"",Rs(Ms,i,u)}catch(j){if(typeof yt>"u"||j.name!=="ErrnoError")throw j;return-j.Ka}},z:function(i,u,j){try{return u=u?Y(ae,u):"",u=dn(i,u),u=ce(u),u[u.length-1]==="/"&&(u=u.substr(0,u.length-1)),wr(u,j),0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},E:function(i,u,j,F){try{u=u?Y(ae,u):"";var Z=F&256;return u=dn(i,u,F&4096),Rs(Z?Ms:Xn,u,j)}catch(we){if(typeof yt>"u"||we.name!=="ErrnoError")throw we;return-we.Ka}},y:function(i,u,j,F){_n=F;try{u=u?Y(ae,u):"",u=dn(i,u);var Z=F?as():0;return Sn(u,j,Z).fd}catch(we){if(typeof yt>"u"||we.name!=="ErrnoError")throw we;return-we.Ka}},w:function(i,u,j,F){try{if(u=u?Y(ae,u):"",u=dn(i,u),0>=F)return-28;var Z=Tt(u),we=Math.min(F,ft(Z)),Se=ee[j+we];return Ct(Z,ae,j,F+1),ee[j+we]=Se,we}catch(tt){if(typeof yt>"u"||tt.name!=="ErrnoError")throw tt;return-tt.Ka}},v:function(i){try{return i=i?Y(ae,i):"",Ka(i),0}catch(u){if(typeof yt>"u"||u.name!=="ErrnoError")throw u;return-u.Ka}},G:function(i,u){try{return i=i?Y(ae,i):"",Rs(Xn,i,u)}catch(j){if(typeof yt>"u"||j.name!=="ErrnoError")throw j;return-j.Ka}},r:function(i,u,j){try{return u=u?Y(ae,u):"",u=dn(i,u),j===0?Za(u):j===512?Ka(u):H("Invalid flags passed to unlinkat"),0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return-F.Ka}},q:function(i,u,j){try{if(u=u?Y(ae,u):"",u=dn(i,u,!0),j){var F=_[j>>2]+4294967296*K[j+4>>2],Z=K[j+8>>2];we=1e3*F+Z/1e6,j+=16,F=_[j>>2]+4294967296*K[j+4>>2],Z=K[j+8>>2],Se=1e3*F+Z/1e6}else var we=Date.now(),Se=we;i=we;var tt=xt(u,{Sa:!0}).node;return tt.Ga.Oa(tt,{timestamp:Math.max(i,Se)}),0}catch(dt){if(typeof yt>"u"||dt.name!=="ErrnoError")throw dt;return-dt.Ka}},l:function(i,u,j){i=new Date(1e3*fn(i,u)),K[j>>2]=i.getSeconds(),K[j+4>>2]=i.getMinutes(),K[j+8>>2]=i.getHours(),K[j+12>>2]=i.getDate(),K[j+16>>2]=i.getMonth(),K[j+20>>2]=i.getFullYear()-1900,K[j+24>>2]=i.getDay(),u=i.getFullYear(),K[j+28>>2]=(u%4!==0||u%100===0&&u%400!==0?wo:is)[i.getMonth()]+i.getDate()-1|0,K[j+36>>2]=-(60*i.getTimezoneOffset()),u=new Date(i.getFullYear(),6,1).getTimezoneOffset();var F=new Date(i.getFullYear(),0,1).getTimezoneOffset();K[j+32>>2]=(u!=F&&i.getTimezoneOffset()==Math.min(F,u))|0},j:function(i,u,j,F,Z,we,Se,tt){Z=fn(Z,we);try{if(isNaN(Z))return 61;var dt=Jt(F);if((u&2)!==0&&(j&2)===0&&(dt.flags&2097155)!==2)throw new _e(2);if((dt.flags&2097155)===1)throw new _e(2);if(!dt.Ha.bb)throw new _e(43);var nt=dt.Ha.bb(dt,i,Z,u,j),It=nt.Db;return K[Se>>2]=nt.ub,_[tt>>2]=It,0}catch(Mt){if(typeof yt>"u"||Mt.name!=="ErrnoError")throw Mt;return-Mt.Ka}},k:function(i,u,j,F,Z,we,Se){we=fn(we,Se);try{if(isNaN(we))return 61;var tt=Jt(Z);if(j&2){if((tt.node.mode&61440)!==32768)throw new _e(43);if(!(F&2)){var dt=ae.slice(i,i+u);tt.Ha.cb&&tt.Ha.cb(tt,dt,we,u,F)}}}catch(nt){if(typeof yt>"u"||nt.name!=="ErrnoError")throw nt;return-nt.Ka}},s:(i,u,j)=>{function F(dt){return(dt=dt.toTimeString().match(/\(([A-Za-z ]+)\)$/))?dt[1]:"GMT"}var Z=new Date().getFullYear(),we=new Date(Z,0,1),Se=new Date(Z,6,1);Z=we.getTimezoneOffset();var tt=Se.getTimezoneOffset();_[i>>2]=60*Math.max(Z,tt),K[u>>2]=+(Z!=tt),i=F(we),u=F(Se),i=zs(i),u=zs(u),tt<Z?(_[j>>2]=i,_[j+4>>2]=u):(_[j>>2]=u,_[j+4>>2]=i)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:i=>{var u=ae.length;if(i>>>=0,2147483648<i)return!1;for(var j=1;4>=j;j*=2){var F=u*(1+.2/j);F=Math.min(F,i+100663296);var Z=Math;F=Math.max(i,F);e:{Z=(Z.min.call(Z,2147483648,F+(65536-F%65536)%65536)-ne.buffer.byteLength+65535)/65536;try{ne.grow(Z),re();var we=1;break e}catch{}we=void 0}if(we)return!0}return!1},A:(i,u)=>{var j=0;return ua().forEach((F,Z)=>{var we=u+j;for(Z=_[i+4*Z>>2]=we,we=0;we<F.length;++we)ee[Z++>>0]=F.charCodeAt(we);ee[Z>>0]=0,j+=F.length+1}),0},B:(i,u)=>{var j=ua();_[i>>2]=j.length;var F=0;return j.forEach(Z=>F+=Z.length+1),_[u>>2]=F,0},e:function(i){try{var u=Jt(i);return Os(u),0}catch(j){if(typeof yt>"u"||j.name!=="ErrnoError")throw j;return j.Ka}},p:function(i,u){try{var j=Jt(i);return ee[u>>0]=j.tty?2:$t(j.mode)?3:(j.mode&61440)===40960?7:4,$[u+2>>1]=0,y=[0,(Ee=0,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[u+8>>2]=y[0],K[u+12>>2]=y[1],y=[0,(Ee=0,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[u+16>>2]=y[0],K[u+20>>2]=y[1],0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return F.Ka}},x:function(i,u,j,F){try{e:{var Z=Jt(i);i=u;for(var we,Se=u=0;Se<j;Se++){var tt=_[i>>2],dt=_[i+4>>2];i+=8;var nt=br(Z,ee,tt,dt,we);if(0>nt){var It=-1;break e}if(u+=nt,nt<dt)break;typeof we<"u"&&(we+=nt)}It=u}return _[F>>2]=It,0}catch(Mt){if(typeof yt>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ka}},m:function(i,u,j,F,Z){u=fn(u,j);try{if(isNaN(u))return 61;var we=Jt(i);return rs(we,u,F),y=[we.position>>>0,(Ee=we.position,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)],K[Z>>2]=y[0],K[Z+4>>2]=y[1],we.hb&&u===0&&F===0&&(we.hb=null),0}catch(Se){if(typeof yt>"u"||Se.name!=="ErrnoError")throw Se;return Se.Ka}},D:function(i){var j;try{var u=Jt(i);return(j=u.Ha)!=null&&j.fsync?u.Ha.fsync(u):0}catch(F){if(typeof yt>"u"||F.name!=="ErrnoError")throw F;return F.Ka}},u:function(i,u,j,F){try{e:{var Z=Jt(i);i=u;for(var we,Se=u=0;Se<j;Se++){var tt=_[i>>2],dt=_[i+4>>2];i+=8;var nt=Xa(Z,ee,tt,dt,we);if(0>nt){var It=-1;break e}u+=nt,typeof we<"u"&&(we+=nt)}It=u}return _[F>>2]=It,0}catch(Mt){if(typeof yt>"u"||Mt.name!=="ErrnoError")throw Mt;return Mt.Ka}}},We=function(){var j;function i(F){var Z;return We=F.exports,ne=We.I,re(),Ht=We.Aa,ie.unshift(We.J),N--,(Z=m.monitorRunDependencies)==null||Z.call(m,N),N==0&&B&&(F=B,B=null,F()),We}var u={a:us};if(N++,(j=m.monitorRunDependencies)==null||j.call(m,N),m.instantiateWasm)try{return m.instantiateWasm(u,i)}catch(F){return G(`Module.instantiateWasm callback failed with error: ${F}`),!1}return qe(u,function(F){i(F.instance)}),{}}();m._sqlite3_free=i=>(m._sqlite3_free=We.K)(i),m._sqlite3_value_text=i=>(m._sqlite3_value_text=We.L)(i);var ni=()=>(ni=We.M)();m._sqlite3_prepare_v2=(i,u,j,F,Z)=>(m._sqlite3_prepare_v2=We.N)(i,u,j,F,Z),m._sqlite3_step=i=>(m._sqlite3_step=We.O)(i),m._sqlite3_reset=i=>(m._sqlite3_reset=We.P)(i),m._sqlite3_exec=(i,u,j,F,Z)=>(m._sqlite3_exec=We.Q)(i,u,j,F,Z),m._sqlite3_finalize=i=>(m._sqlite3_finalize=We.R)(i),m._sqlite3_column_name=(i,u)=>(m._sqlite3_column_name=We.S)(i,u),m._sqlite3_column_text=(i,u)=>(m._sqlite3_column_text=We.T)(i,u),m._sqlite3_column_type=(i,u)=>(m._sqlite3_column_type=We.U)(i,u),m._sqlite3_errmsg=i=>(m._sqlite3_errmsg=We.V)(i),m._sqlite3_clear_bindings=i=>(m._sqlite3_clear_bindings=We.W)(i),m._sqlite3_value_blob=i=>(m._sqlite3_value_blob=We.X)(i),m._sqlite3_value_bytes=i=>(m._sqlite3_value_bytes=We.Y)(i),m._sqlite3_value_double=i=>(m._sqlite3_value_double=We.Z)(i),m._sqlite3_value_int=i=>(m._sqlite3_value_int=We._)(i),m._sqlite3_value_type=i=>(m._sqlite3_value_type=We.$)(i),m._sqlite3_result_blob=(i,u,j,F)=>(m._sqlite3_result_blob=We.aa)(i,u,j,F),m._sqlite3_result_double=(i,u)=>(m._sqlite3_result_double=We.ba)(i,u),m._sqlite3_result_error=(i,u,j)=>(m._sqlite3_result_error=We.ca)(i,u,j),m._sqlite3_result_int=(i,u)=>(m._sqlite3_result_int=We.da)(i,u),m._sqlite3_result_int64=(i,u,j)=>(m._sqlite3_result_int64=We.ea)(i,u,j),m._sqlite3_result_null=i=>(m._sqlite3_result_null=We.fa)(i),m._sqlite3_result_text=(i,u,j,F)=>(m._sqlite3_result_text=We.ga)(i,u,j,F),m._sqlite3_aggregate_context=(i,u)=>(m._sqlite3_aggregate_context=We.ha)(i,u),m._sqlite3_column_count=i=>(m._sqlite3_column_count=We.ia)(i),m._sqlite3_data_count=i=>(m._sqlite3_data_count=We.ja)(i),m._sqlite3_column_blob=(i,u)=>(m._sqlite3_column_blob=We.ka)(i,u),m._sqlite3_column_bytes=(i,u)=>(m._sqlite3_column_bytes=We.la)(i,u),m._sqlite3_column_double=(i,u)=>(m._sqlite3_column_double=We.ma)(i,u),m._sqlite3_bind_blob=(i,u,j,F,Z)=>(m._sqlite3_bind_blob=We.na)(i,u,j,F,Z),m._sqlite3_bind_double=(i,u,j)=>(m._sqlite3_bind_double=We.oa)(i,u,j),m._sqlite3_bind_int=(i,u,j)=>(m._sqlite3_bind_int=We.pa)(i,u,j),m._sqlite3_bind_text=(i,u,j,F,Z)=>(m._sqlite3_bind_text=We.qa)(i,u,j,F,Z),m._sqlite3_bind_parameter_index=(i,u)=>(m._sqlite3_bind_parameter_index=We.ra)(i,u),m._sqlite3_sql=i=>(m._sqlite3_sql=We.sa)(i),m._sqlite3_normalized_sql=i=>(m._sqlite3_normalized_sql=We.ta)(i),m._sqlite3_changes=i=>(m._sqlite3_changes=We.ua)(i),m._sqlite3_close_v2=i=>(m._sqlite3_close_v2=We.va)(i),m._sqlite3_create_function_v2=(i,u,j,F,Z,we,Se,tt,dt)=>(m._sqlite3_create_function_v2=We.wa)(i,u,j,F,Z,we,Se,tt,dt),m._sqlite3_open=(i,u)=>(m._sqlite3_open=We.xa)(i,u);var ds=m._malloc=i=>(ds=m._malloc=We.ya)(i),Xr=m._free=i=>(Xr=m._free=We.za)(i);m._RegisterExtensionFunctions=i=>(m._RegisterExtensionFunctions=We.Ba)(i);var si=(i,u)=>(si=We.Ca)(i,u),Dn=()=>(Dn=We.Da)(),en=i=>(en=We.Ea)(i),qr=i=>(qr=We.Fa)(i);m.stackAlloc=qr,m.stackSave=Dn,m.stackRestore=en,m.cwrap=(i,u,j,F)=>{var Z=!j||j.every(we=>we==="number"||we==="boolean");return u!=="string"&&Z&&!F?m["_"+i]:function(){return ri(i,u,j,arguments)}},m.addFunction=jr,m.removeFunction=or,m.UTF8ToString=be,m.ALLOC_NORMAL=ls,m.allocate=cs,m.allocateUTF8OnStack=os;var Ps;B=function i(){Ps||Tn(),Ps||(B=i)};function Tn(){function i(){if(!Ps&&(Ps=!0,m.calledRun=!0,!V)){if(m.noFSInit||ti||(ti=!0,ei(),m.stdin=m.stdin,m.stdout=m.stdout,m.stderr=m.stderr,m.stdin?ns("stdin",m.stdin):As("/dev/tty","/dev/stdin"),m.stdout?ns("stdout",null,m.stdout):As("/dev/tty","/dev/stdout"),m.stderr?ns("stderr",null,m.stderr):As("/dev/tty1","/dev/stderr"),Sn("/dev/stdin",0),Sn("/dev/stdout",1),Sn("/dev/stderr",1)),ot=!1,de(ie),m.onRuntimeInitialized&&m.onRuntimeInitialized(),m.postRun)for(typeof m.postRun=="function"&&(m.postRun=[m.postRun]);m.postRun.length;){var u=m.postRun.shift();P.unshift(u)}de(P)}}if(!(0<N)){if(m.preRun)for(typeof m.preRun=="function"&&(m.preRun=[m.preRun]);m.preRun.length;)w();de(fe),0<N||(m.setStatus?(m.setStatus("Running..."),setTimeout(function(){setTimeout(function(){m.setStatus("")},1),i()},1)):i())}}if(m.preInit)for(typeof m.preInit=="function"&&(m.preInit=[m.preInit]);0<m.preInit.length;)m.preInit.pop()();return Tn(),x}),o)};a.exports=v,a.exports.default=v}(lc)),lc.exports}var Am=Im();const Mm=Wa(Am);function bc(a){return new Promise((d,o)=>{const v=new URL("/services/ankiImport.worker.ts",window.location.origin),p=new Worker(v,{type:"module"});p.onmessage=c=>{const{status:f,decks:x,error:g}=c.data;f==="success"?d(x):o(new Error(g)),p.terminate()},p.onerror=c=>{console.error("Worker error:",c);const f=c.message||"The worker script could not be loaded or an unexpected error occurred.";o(new Error(`Anki import worker failed: ${f}`)),p.terminate()},p.postMessage(a,[a])})}let uc=null;async function Om(){return uc||(uc=await Mm({locateFile:a=>`https://esm.sh/sql.js@1.10.3/dist/${a}`})),uc}function Jd(a,d){let o=a;return o=o.replace(/<img\s[^>]*?src=(["'])(.*?)\1[^>]*?>/gi,(v,p,c)=>{const f=decodeURIComponent(c),x=d.get(f);if(x){const g=btoa(new Uint8Array(x.data).reduce((T,S)=>T+String.fromCharCode(S),"")),m=`src="data:${x.type};base64,${g}"`;return v.replace(/src=(["']).*?\1/i,m)}return v}),o=o.replace(/\[sound:(.*?)\]/g,(v,p)=>{const c=decodeURIComponent(p.trim()),f=d.get(c);if(f){const x=btoa(new Uint8Array(f.data).reduce((g,m)=>g+String.fromCharCode(m),""));return`<audio controls src="data:${f.type};base64,${x}"></audio>`}return""}),o}function Yd(a,d,o,v,p){let c=a;const f=/{{c(\d+)::(.*?)(?:::(.*?))?}}/gs;c=c.replace(f,(T,S,E,k)=>{const C=parseInt(S,10);return v?C===o+1?`<span class="cloze">[${k||"..."}]</span>`:`<span class="cloze-inactive">${E}</span>`:C===o+1?`<span class="cloze"><b>${E}</b></span>`:`<span class="cloze-inactive">${E}</span>`}),p&&(c=c.replace(/<hr id=answer>/g,"").replace(/{{FrontSide}}/g,p));const x=/{{#([^}]+?)}}(.*?){{\/\1}}/gs;let g;do g=c,c=c.replace(x,(T,S,E)=>{const k=d.get(S.trim());return k&&k.trim()!==""?E:""});while(c!==g);const m=/{{\^([^}]+?)}}(.*?){{\/\1}}/gs;do g=c,c=c.replace(m,(T,S,E)=>{const k=d.get(S.trim());return!k||k.trim()===""?E:""});while(c!==g);return d.forEach((T,S)=>{const E=new RegExp(`{{${S}}}`,"g");c=c.replace(E,T)}),c=c.replace(/{{(.*?)}}/g,""),c}async function Rm(a){var M;const d=await Om(),o=await Cm.loadAsync(a),v=o.file(/collection.anki2[1]?/);if(!v||v.length===0)throw new Error("collection.anki2 or .anki21 file not found.");const p=await v[0].async("uint8array"),c=new d.Database(p),f=o.file("media");let x={};if(f)try{x=JSON.parse(await f.async("string"))}catch(R){console.warn("Could not parse media file.",R)}const g=new Map;for(const R in x){const G=x[R],Q=o.file(R);if(Q){const ne=await Q.async("uint8array"),V=((M=G.split(".").pop())==null?void 0:M.toLowerCase())||"";let ee="application/octet-stream";["jpg","jpeg"].includes(V)?ee="image/jpeg":V==="png"?ee="image/png":V==="gif"?ee="image/gif":V==="svg"?ee="image/svg+xml":V==="mp3"?ee="audio/mpeg":V==="ogg"?ee="audio/ogg":V==="wav"&&(ee="audio/wav"),g.set(G,{data:ne,type:ee})}}const m=c.exec("SELECT models, decks, crt FROM col");if(!m[0])throw new Error("Could not read collection data.");const[T,S,E]=m[0].values[0],k=JSON.parse(T),C=JSON.parse(S),b=c.exec("SELECT id, mid, flds FROM notes"),D=new Map(b[0].values.map(R=>[R[0],{mid:R[1],flds:R[2].split("")}])),O=c.exec("SELECT id, nid, did, ord, due, ivl, factor, type, lapses FROM cards")[0].values,z=new Map;for(const R in C){const G=C[R];z.set(R,{id:crypto.randomUUID(),name:G.name,description:G.desc||"Imported Anki deck.",type:Ge.Flashcard,cards:[]})}for(const R of O){const[G,Q,ne,V,ee,ae,$,K,_]=R,xe=D.get(Q);if(!xe)continue;const je=k[xe.mid];if(!(je!=null&&je.tmpls))continue;const re=z.get(ne.toString());if(!re)continue;const fe=je.tmpls[V];if(!fe)continue;const ie=new Map((je.flds||[]).map((U,X)=>[U.name,xe.flds[X]||""]));let P=Yd(fe.qfmt,ie,V,!0),w=Yd(fe.afmt,ie,V,!1,P);P=Jd(P,g),w=Jd(w,g);let N,B;K===2&&ae>0?(N=new Date(E*1e3),N.setDate(N.getDate()+ee),B=new Date(N.getTime()),B.setDate(B.getDate()-ae)):(N=new Date,N.setHours(0,0,0,0));const H=Math.min(1,Math.log1p(ae)/Math.log1p(90));re.cards.push({id:G.toString(),front:P,back:w,css:je.css?`<style>${je.css}</style>`:"",dueDate:N.toISOString(),interval:ae,easeFactor:$?Math.max($/1e3,wc):Ds,masteryLevel:H,lastReviewed:B==null?void 0:B.toISOString(),lapses:_||0})}return c.close(),Array.from(z.values()).filter(R=>R.cards.length>0)}const zm=({isOpen:a,onClose:d,onAddDecks:o,onAddSeriesWithDecks:v})=>{const[p,c]=L.useState("create"),[f,x]=L.useState(""),[g,m]=L.useState(""),[T,S]=L.useState(""),[E,k]=L.useState(!1),C=L.useRef(null),{addToast:b}=vr(),D=L.useRef(null);Er(D,a);const I=L.useCallback(()=>{c("create"),x(""),m(""),S(""),k(!1)},[]),O=L.useCallback(()=>{I(),d()},[I,d]),z=L.useCallback(V=>{m(V);try{const ee=po(V);(ee==null?void 0:ee.type)===Ge.Quiz?x(ee.data.name):(ee==null?void 0:ee.type)==="quiz_series"&&x(ee.data.seriesName)}catch{}},[]),M=L.useCallback(async V=>{if(V){S(V.name),k(!0);try{if(V.name.toLowerCase().endsWith(".apkg")){x("");const ee=await V.arrayBuffer(),ae=ee.slice(0);let $=[];try{$=await bc(ee)}catch(K){console.warn("Anki worker failed, trying main thread fallback:",K),b("Import via worker failed. Trying a slower fallback method... this may freeze the app.","info");try{$=await Rm(ae)}catch(_){throw console.error("Anki main thread fallback also failed:",_),_}}$.length>0?(o($),b(`Successfully imported ${$.length} deck(s) from ${V.name}.`,"success"),O()):(b("No valid decks found in the Anki package.","info"),I())}else if(V.name.toLowerCase().endsWith(".json")){const ee=await V.text();z(ee),k(!1),b("File loaded. Confirm name and import, or paste content directly.","info")}else b("Unsupported file type. Please upload a '.json' or '.apkg' file.","error"),S(""),k(!1)}catch(ee){console.error("Failed to process file:",ee),b(`An error occurred: ${ee instanceof Error?ee.message:"Unknown error"}`,"error"),I()}}},[b,O,z,o,I]),R=L.useCallback(()=>{if(p==="create"){if(!f.trim()){b("Please enter a deck name.","error");return}const V={id:crypto.randomUUID(),name:f.trim(),type:Ge.Flashcard,cards:[],description:`An empty deck created on ${Vh()}`};o([V]),b(`Deck "${V.name}" created.`,"success"),O();return}if(!g){b("Please paste or upload content.","error");return}try{const V=po(g);if(!V)return;if(V.type==="quiz_series"){const{seriesName:ae,seriesDescription:$,levels:K}=V.data,_=[],xe=K.map(re=>{const fe=re.decks.map(ie=>({id:crypto.randomUUID(),name:ie.name,description:ie.description,type:Ge.Quiz,questions:ca(ie.questions)}));return _.push(...fe),{title:re.title,deckIds:fe.map(ie=>ie.id)}}),je={id:crypto.randomUUID(),type:"series",name:ae,description:$,levels:xe,archived:!1,createdAt:new Date().toISOString()};v(je,_),O();return}if(!f.trim()){b("Please enter a deck name.","error");return}let ee;if(V.type===Ge.Flashcard){const ae=Cc(V.data);ee={id:crypto.randomUUID(),name:f.trim(),type:Ge.Flashcard,cards:ae,description:`${ae.length} imported flashcard${ae.length===1?"":"s"}.`}}else{const ae=ca(V.data.questions);ee={id:crypto.randomUUID(),name:f.trim(),description:V.data.description,type:Ge.Quiz,questions:ae}}o([ee]),b(`Deck "${ee.name}" imported successfully.`,"success"),O()}catch(V){b(V instanceof Error?V.message:"Invalid JSON content.","error")}},[f,p,g,o,O,b,v]),G=V=>{var ae;const ee=(ae=V.target.files)==null?void 0:ae[0];ee&&M(ee),V.target&&(V.target.value="")};if(!a)return null;const Q=()=>{const V=T.toLowerCase().endsWith(".apkg");if(p==="upload"&&V)return r.jsx("div",{className:"text-text-muted text-center py-12",children:"Anki file selected. Decks will be imported automatically."});switch(p){case"paste":return r.jsxs("div",{children:[r.jsx("textarea",{className:"w-full h-48 p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none text-text",placeholder:'Paste JSON here... e.g., [{"front": "Q1", "back": "A1"}] or a Quiz/Series object.',value:g,onChange:ee=>z(ee.target.value)}),r.jsxs(Ft,{href:"/instructions/json",onClick:d,className:"text-sm text-primary hover:underline mt-2 inline-flex items-center gap-1",children:[r.jsx(le,{name:"help-circle",className:"w-4 h-4"}),"View JSON format guide"]})]});case"upload":return r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"file",ref:C,className:"hidden",accept:".json,application/json,.apkg,application/zip,application/x-zip-compressed,application/octet-stream",onChange:G}),r.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:bg-background transition-colors",children:[r.jsx(le,{name:"upload-cloud",className:"w-10 h-10 text-text-muted mb-2"}),r.jsxs("p",{className:"text-sm text-text-muted",children:[r.jsx("span",{className:"font-semibold text-primary",onClick:ee=>{var ae;ee.preventDefault(),(ae=C.current)==null||ae.click()},children:"Click to upload"})," or drag and drop anywhere"]}),r.jsx("p",{className:"text-xs text-text-muted/70",children:"JSON or Anki Package (.apkg)"}),T&&r.jsx("p",{className:"text-sm text-green-500 dark:text-green-400 mt-2 truncate",title:T,children:T})]})]});case"create":default:return r.jsx("p",{className:"text-text-muted text-center py-12",children:"Create an empty flashcard deck."})}},ne=!(p==="upload"&&T.toLowerCase().endsWith(".apkg"));return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{ref:D,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[E&&r.jsxs("div",{className:"absolute inset-0 bg-surface/80 flex flex-col items-center justify-center z-20",children:[r.jsx(Vn,{}),r.jsx("p",{className:"text-lg text-text mt-4",children:"Processing file..."})]}),r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold text-text",children:"Create / Import"}),r.jsx(ke,{variant:"ghost",onClick:O,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[ne&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Deck / Series Name"}),r.jsx("input",{type:"text",id:"deck-name",value:f,onChange:V=>x(V.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. Japanese Vocabulary"}),r.jsx("p",{className:"text-xs text-text-muted mt-1",children:"For single deck or new deck creation. This is auto-filled when pasting a Series object."})]}),r.jsx("div",{className:"flex border-b border-border",children:["create","paste","upload"].map(V=>r.jsx("button",{onClick:()=>c(V),className:`capitalize px-4 py-2 text-sm font-medium transition-colors ${p===V?"border-b-2 border-primary text-text":"text-text-muted hover:text-text"}`,children:V==="create"?"Create Empty":V},V))}),r.jsx("div",{className:"mt-4",children:Q()})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{variant:"secondary",onClick:O,className:"mr-2",children:"Cancel"}),r.jsx(ke,{variant:"primary",onClick:R,disabled:E||p==="create"&&!f.trim()||p!=="create"&&!g&&!T,children:p==="create"?"Create Deck":"Import"})]})]})})},yo=({isOpen:a,onClose:d,onConfirm:o,title:v,message:p,confirmText:c})=>{const[f,x]=L.useState(""),g=L.useRef(null);Er(g,a),L.useEffect(()=>{a&&x("")},[a]);const m=!c||f===c,T=()=>{m&&(o(),d())};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{ref:g,className:"bg-surface rounded-lg shadow-xl w-full max-w-md transform transition-all relative",role:"alertdialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-message",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{id:"confirm-title",className:"text-xl font-bold text-text",children:v}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto","aria-label":"Close",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("p",{id:"confirm-message",className:"text-text-muted",children:p}),c&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"confirm-input",className:"block text-sm font-medium text-text-muted mb-1",children:['To confirm, type "',r.jsx("strong",{className:"text-text",children:c}),'" below:']}),r.jsx("input",{id:"confirm-input",type:"text",value:f,onChange:S=>x(S.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-red-500 focus:outline-none"})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"button",variant:"danger",onClick:T,disabled:!m,children:"Confirm"})]})]})}):null},Fm=({isOpen:a,onClose:d,onRestore:o})=>{const[v,p]=L.useState(""),[c,f]=L.useState(null),[x,g]=L.useState(null),[m,T]=L.useState(!1),S=L.useRef(null),{addToast:E}=vr(),k=L.useRef(null);Er(k,a);const C=()=>{p(""),f(null),g(null),d()},b=async M=>{if(M){p(M.name),g(null),f("Processing file...");try{if(M.name.toLowerCase().endsWith(".json")){const R=await M.text(),G=jf(R);g(G),E(`Backup file "${M.name}" is valid and ready to restore.`,"success")}else E("Unsupported file type. Please upload a '.json' backup file.","error"),p("")}catch(R){console.error("Failed to process file:",R),E(`Restore failed: ${R instanceof Error?R.message:"Unknown error"}`,"error"),p("")}finally{f(null)}}},D=M=>{var G;if(c)return;const R=(G=M.target.files)==null?void 0:G[0];R&&b(R),M.target&&(M.target.value="")},I=M=>{var G;if(M.preventDefault(),c)return;const R=(G=M.dataTransfer.files)==null?void 0:G[0];R&&b(R)},O=M=>M.preventDefault(),z=async()=>{if(x){T(!1),f("Restoring data...");try{await o(x),C()}catch{f(null)}}};return a?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{ref:k,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[c&&r.jsxs("div",{className:"absolute inset-0 bg-surface/80 flex flex-col items-center justify-center z-20",children:[r.jsx(Vn,{}),r.jsx("p",{className:"text-lg text-text mt-4",children:c})]}),r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Restore from Backup"}),r.jsx(ke,{variant:"ghost",onClick:C,className:"p-1 h-auto",disabled:!!c,children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-sm text-red-700 dark:text-red-200",children:r.jsxs("p",{children:[r.jsx("strong",{className:"font-bold",children:"Warning:"})," Restoring from a backup will merge and overwrite data. Decks and folders with the same ID will be replaced. This action cannot be undone."]})}),r.jsx("input",{type:"file",ref:S,className:"hidden",accept:".json,application/json",onChange:D,disabled:!!c}),r.jsxs("label",{onDragOver:O,onDrop:I,className:`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-border rounded-lg transition-colors ${c?"cursor-not-allowed opacity-70":"cursor-pointer hover:bg-background"}`,children:[r.jsx(le,{name:"upload-cloud",className:"w-10 h-10 text-text-muted mb-2"}),r.jsxs("p",{className:"text-sm text-text-muted",children:[r.jsx("span",{className:"font-semibold text-primary",onClick:M=>{var R;c||(M.preventDefault(),(R=S.current)==null||R.click())},children:"Click to upload"})," or drag and drop"]}),r.jsx("p",{className:"text-xs text-text-muted/70",children:"CogniFlow Backup JSON file"}),v&&r.jsx("p",{className:`text-sm mt-2 truncate ${x?"text-green-600":"text-red-600"}`,title:v,children:v})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{variant:"secondary",onClick:C,className:"mr-2",disabled:!!c,children:"Cancel"}),r.jsx(ke,{variant:"danger",onClick:()=>T(!0),disabled:!x||!!c,children:c?"Please wait...":"Restore"})]})]})}),m&&r.jsx(yo,{isOpen:m,onClose:()=>T(!1),onConfirm:z,title:"Confirm Restore",message:"Restoring from a backup will overwrite existing decks and folders with the same ID. This action cannot be undone. Are you sure you want to continue?"})]}):null},Pm=({isOpen:a,onClose:d,onReset:o,decks:v})=>{const[p,c]=L.useState(""),[f,x]=L.useState(""),{addToast:g}=vr(),m=L.useRef(null);Er(m,a);const T=L.useMemo(()=>v.find(C=>C.id===p),[v,p]),S=T?f===T.name:!1,E=()=>{if(!S||!T){g("Confirmation text does not match.","error");return}o(T.id),d()},k=()=>{c(""),x(""),d()};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{ref:m,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Reset Deck Progress"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:k,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-sm text-red-700 dark:text-red-200",children:r.jsxs("p",{children:[r.jsx("strong",{className:"font-bold",children:"Warning:"})," This will reset all spaced repetition data (due dates, intervals) for the selected deck. The cards themselves will not be deleted. This action cannot be undone."]})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-select",className:"block text-sm font-medium text-text-muted mb-1",children:"Select Deck"}),r.jsxs("select",{id:"deck-select",value:p,onChange:C=>{c(C.target.value),x("")},className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[r.jsx("option",{value:"",disabled:!0,children:"-- Select a deck --"}),v.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),T&&r.jsxs("div",{className:"animate-fade-in",children:[r.jsxs("label",{htmlFor:"confirm-text",className:"block text-sm font-medium text-text-muted mb-1",children:['To confirm, type "',r.jsx("strong",{className:"text-text",children:T.name}),'" below:']}),r.jsx("input",{id:"confirm-text",type:"text",value:f,onChange:C=>x(C.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:k,className:"mr-2",children:"Cancel"}),r.jsxs(ke,{type:"button",variant:"danger",onClick:E,disabled:!S,children:[r.jsx(le,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Reset Progress"]})]})]})}):null},Lm=({folder:a,onClose:d,onSave:o})=>{const[v,p]=L.useState(""),{addToast:c}=vr(),f=L.useRef(null);Er(f,!0),L.useEffect(()=>{a&&p(a.name)},[a]);const x=g=>{if(g.preventDefault(),!v.trim()){c("Folder name cannot be empty.","error");return}o({id:(a==null?void 0:a.id)||null,name:v.trim()})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:f,className:"bg-surface rounded-lg shadow-xl w-full max-w-md transform transition-all relative",children:r.jsxs("form",{onSubmit:x,children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Folder":"Create New Folder"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsx("div",{className:"p-6 space-y-4",children:r.jsxs("div",{children:[r.jsx("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Folder Name"}),r.jsx("input",{id:"folder-name",type:"text",value:v,onChange:g=>p(g.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., University Courses"})]})}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsxs(ke,{type:"submit",variant:"primary",children:[r.jsx(le,{name:"save",className:"w-4 h-4 mr-2"}),a?"Save Changes":"Create Folder"]})]})]})})})},Sf=({series:a,onClose:d,onSave:o})=>{const[v,p]=L.useState(""),[c,f]=L.useState(""),[x,g]=L.useState(null),{addToast:m}=vr(),T=L.useRef(null);Er(T,!0);const S=a===null;L.useEffect(()=>{a?(p(a.name),f(a.description),g(null)):(p(""),f(""),g(null))},[a]);const E=C=>{if(!S)return;const b=C.clipboardData.getData("text");if(b.trim().startsWith("{"))try{const D=JSON.parse(b);typeof D.seriesName=="string"&&typeof D.seriesDescription=="string"&&Array.isArray(D.levels)&&(C.preventDefault(),p(D.seriesName),f(D.seriesDescription),g(D),m("Series details and structure populated from JSON scaffold!","success"))}catch{}},k=C=>{if(C.preventDefault(),!v.trim()){m("Series name cannot be empty.","error");return}o({id:S?null:a.id,name:v.trim(),description:c.trim(),scaffold:S?x:null})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:T,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:r.jsxs("form",{onSubmit:k,children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:S?"Create New Series":"Edit Series"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"series-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Series Name"}),r.jsx("input",{id:"series-name",type:"text",value:v,onChange:C=>p(C.target.value),onPaste:E,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Introduction to Algebra"}),S&&r.jsx("p",{className:"text-xs text-text-muted mt-1",children:"You can paste a full JSON scaffold object here to auto-populate."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"series-description",className:"block text-sm font-medium text-text-muted mb-1",children:"Description"}),r.jsx("textarea",{id:"series-description",value:c,onChange:C=>f(C.target.value),onPaste:E,rows:3,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"A collection of decks covering core concepts."})]}),S&&x&&r.jsxs("div",{className:"space-y-2 animate-fade-in",children:[r.jsx("h4",{className:"text-sm font-semibold text-text-muted",children:"Structure Preview"}),r.jsx("div",{className:"bg-background border border-border rounded-md p-3 max-h-48 overflow-y-auto text-sm",children:r.jsx("ul",{className:"space-y-3",children:x.levels.map((C,b)=>r.jsxs("li",{children:[r.jsxs("div",{className:"flex items-center gap-2 font-medium text-text",children:[r.jsx(le,{name:"layers",className:"w-4 h-4 text-purple-500 flex-shrink-0"}),r.jsx("span",{className:"font-semibold",children:C.title})]}),r.jsxs("ul",{className:"pl-6 mt-1 space-y-1",children:[(C.decks||[]).map((D,I)=>r.jsxs("li",{className:"flex items-center gap-2 text-text-muted",children:[r.jsx(le,{name:"help-circle",className:"w-3.5 h-3.5 flex-shrink-0"}),r.jsx("span",{children:D.name})]},I)),(!C.decks||C.decks.length===0)&&r.jsx("li",{className:"flex items-center gap-2 text-xs text-text-muted/70 italic",children:"(No decks in this level)"})]})]},b))})})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsxs(ke,{type:"submit",variant:"primary",children:[r.jsx(le,{name:"save",className:"w-4 h-4 mr-2"}),S?"Create Series":"Save Changes"]})]})]})})})},Um=({pullDistance:a,isRefreshing:d,threshold:o})=>{if(d)return r.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-50 transition-all duration-300",children:r.jsx(Vn,{size:"md"})});if(a<=0)return null;const v=Math.min(a/o,1),p=v>=1,c=20,f=2*Math.PI*c,x=f-v*f;return r.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-10 pointer-events-none",style:{transform:`translateY(${Math.min(a,o*1.5)-80}px)`,opacity:Math.min(a/(o/2),1)},children:r.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-800 rounded-full shadow-lg",children:[r.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",viewBox:"0 0 44 44",children:[r.jsx("circle",{className:"text-gray-300/50 dark:text-gray-600/50",stroke:"currentColor",strokeWidth:"4",fill:"transparent",r:c,cx:"22",cy:"22"}),r.jsx("circle",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",fill:"transparent",r:c,cx:"22",cy:"22",style:{strokeDasharray:f,strokeDashoffset:x,transition:p?"stroke-dashoffset 0.1s linear":"none"}})]}),r.jsx(le,{name:p?"refresh-ccw":"arrow-down",className:`w-6 h-6 transition-colors duration-200 ${p?"text-blue-500":"text-gray-500 dark:text-gray-400"}`})]})})},zr=(a,d,o)=>{const v=new Date;v.setHours(0,0,0,0);const p=d.map(f=>({id:crypto.randomUUID(),text:f.text,explanation:f.explanation})),c=p[d.findIndex(f=>f.correct)];if(!c)throw new Error(`No correct option specified for question: "${a}"`);return{id:crypto.randomUUID(),questionType:"multipleChoice",questionText:a,tags:["nature","sample"],detailedExplanation:o,options:p,correctAnswerId:c.id,dueDate:v.toISOString(),interval:0,easeFactor:Ds,suspended:!1,masteryLevel:0,lastReviewed:void 0}},Bm=()=>{const a={id:crypto.randomUUID(),name:"Level 1.1: Simple Addition",description:"Practice basic addition problems.",type:Ge.Quiz,questions:[zr("What is 1 + 1?",[{text:"2",correct:!0},{text:"1"},{text:"3"}],"1 plus 1 equals 2."),zr("What is 2 + 3?",[{text:"5",correct:!0},{text:"4"},{text:"6"}],"2 plus 3 equals 5."),zr("What is 5 + 4?",[{text:"9",correct:!0},{text:"8"},{text:"10"}],"5 plus 4 equals 9.")]},d={id:crypto.randomUUID(),name:"Level 1.2: Simple Subtraction",description:"Practice basic subtraction problems.",type:Ge.Quiz,questions:[zr("What is 5 - 2?",[{text:"3",correct:!0},{text:"2"},{text:"4"}],"5 minus 2 equals 3."),zr("What is 10 - 4?",[{text:"6",correct:!0},{text:"5"},{text:"7"}],"10 minus 4 equals 6.")]},o={id:crypto.randomUUID(),name:"Level 2.1: Simple Multiplication",description:"Practice basic multiplication problems.",type:Ge.Quiz,questions:[zr("What is 2 * 3?",[{text:"6",correct:!0},{text:"5"},{text:"8"}],"2 times 3 is 6."),zr("What is 4 * 5?",[{text:"20",correct:!0},{text:"15"},{text:"25"}],"4 times 5 is 20.")]},v=[a,d,o];return{series:{id:crypto.randomUUID(),type:"series",name:"Sample: Basic Math Series",description:"A sample series to demonstrate the progressive learning path feature. Complete each deck to unlock the next!",levels:[{title:"Level 1: Fundamentals",deckIds:[a.id,d.id]},{title:"Level 2: Next Steps",deckIds:[o.id]}],createdAt:new Date().toISOString()},decks:v}},qm=()=>{const a=[zr("Which process allows plants to convert light energy into chemical energy?",[{text:"Respiration"},{text:"Photosynthesis",correct:!0},{text:"Transpiration"},{text:"Germination"}],"Photosynthesis is the vital process used by plants, algae, and certain bacteria to harness energy from sunlight and turn it into chemical energy in the form of glucose."),zr("What is the largest rainforest in the world?",[{text:"The Congo Rainforest"},{text:"The Valdivian Temperate Rainforest"},{text:"The Daintree Rainforest"},{text:"The Amazon Rainforest",correct:!0}],"The Amazon Rainforest is the world's largest tropical rainforest, famed for its biodiversity. It spans across nine countries in South America."),zr("What type of rock is formed from the cooling and solidification of magma or lava?",[{text:"Igneous Rock",correct:!0},{text:"Sedimentary Rock"},{text:"Metamorphic Rock"},{text:"Sandstone"}],"Igneous rock is formed through the cooling and solidification of magma (molten rock below the surface) or lava (molten rock on the surface). Examples include granite and basalt."),zr("Which layer of the Earth's atmosphere is closest to the surface?",[{text:"Stratosphere"},{text:"Mesosphere"},{text:"Troposphere",correct:!0},{text:"Thermosphere"}],"The Troposphere is the lowest layer of Earth's atmosphere, and is also where nearly all weather conditions take place. It contains about 75% of the atmosphere's mass."),zr("What is the name for the process of water movement through a plant and its evaporation from aerial parts, such as leaves, stems and flowers?",[{text:"Condensation"},{text:"Precipitation"},{text:"Transpiration",correct:!0},{text:"Photosynthesis"}],"Transpiration is essentially evaporation of water from plant leaves. It is a key part of the water cycle, and an important process in plant life.")];return{id:crypto.randomUUID(),name:"Sample: Wonders of Nature",description:"A sample quiz deck to introduce you to CogniFlow. Test your knowledge about the natural world!",type:Ge.Quiz,questions:a,lastOpened:new Date().toISOString()}};function $m(a,d){const o=new Date(a);return o.setDate(o.getDate()+d),o}const Hm=(a,d)=>{const o=new Date;o.setHours(0,0,0,0);let v,p=a.easeFactor,c=a.lapses||0;if(d===ct.Again?c++:d>ct.Again&&(c=0),p=a.easeFactor+jm[d],p<wc&&(p=wc),d===ct.Again)v=wm;else if(a.interval===0)switch(d){case ct.Hard:v=1;break;case ct.Good:v=3;break;case ct.Easy:v=5;break;default:v=1}else{let g=1;d===ct.Hard&&(g=bm),d===ct.Easy&&(g=km),v=Math.ceil(a.interval*p*g)}const f=$m(o,v),x=Math.min(1,Math.log1p(v)/Math.log1p(90));return{...a,interval:v,easeFactor:p,dueDate:f.toISOString(),lastReviewed:o.toISOString(),masteryLevel:x,lapses:c}},Kd=a=>{const d=new Date;return d.setHours(0,0,0,0),{...a,dueDate:d.toISOString(),interval:0,easeFactor:Ds,suspended:!1,masteryLevel:0,lastReviewed:void 0,lapses:0}},Jr=a=>{const d=a.masteryLevel||0;if(d===0||!a.lastReviewed||a.suspended)return 0;const o=(a.interval||1)*2,v=new Date(a.lastReviewed),c=Math.max(0,(new Date().getTime()-v.getTime())/(1e3*60*60*24));if(c<=0)return d;const f=Math.pow(.5,c/o);return d*f},Wm={},Zd=a=>{let d;const o=new Set,v=(T,S)=>{const E=typeof T=="function"?T(d):T;if(!Object.is(E,d)){const k=d;d=S??(typeof E!="object"||E===null)?E:Object.assign({},d,E),o.forEach(C=>C(d,k))}},p=()=>d,g={setState:v,getState:p,getInitialState:()=>m,subscribe:T=>(o.add(T),()=>o.delete(T)),destroy:()=>{(Wm?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),o.clear()}},m=d=a(v,p,g);return g},Qm=a=>a?Zd(a):Zd;var dc={exports:{}},fc={},hc={exports:{}},mc={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xd;function Gm(){if(Xd)return mc;Xd=1;var a=Qa();function d(S,E){return S===E&&(S!==0||1/S===1/E)||S!==S&&E!==E}var o=typeof Object.is=="function"?Object.is:d,v=a.useState,p=a.useEffect,c=a.useLayoutEffect,f=a.useDebugValue;function x(S,E){var k=E(),C=v({inst:{value:k,getSnapshot:E}}),b=C[0].inst,D=C[1];return c(function(){b.value=k,b.getSnapshot=E,g(b)&&D({inst:b})},[S,k,E]),p(function(){return g(b)&&D({inst:b}),S(function(){g(b)&&D({inst:b})})},[S]),f(k),k}function g(S){var E=S.getSnapshot;S=S.value;try{var k=E();return!o(S,k)}catch{return!0}}function m(S,E){return E()}var T=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?m:x;return mc.useSyncExternalStore=a.useSyncExternalStore!==void 0?a.useSyncExternalStore:T,mc}var ef;function Vm(){return ef||(ef=1,hc.exports=Gm()),hc.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tf;function Jm(){if(tf)return fc;tf=1;var a=Qa(),d=Vm();function o(m,T){return m===T&&(m!==0||1/m===1/T)||m!==m&&T!==T}var v=typeof Object.is=="function"?Object.is:o,p=d.useSyncExternalStore,c=a.useRef,f=a.useEffect,x=a.useMemo,g=a.useDebugValue;return fc.useSyncExternalStoreWithSelector=function(m,T,S,E,k){var C=c(null);if(C.current===null){var b={hasValue:!1,value:null};C.current=b}else b=C.current;C=x(function(){function I(G){if(!O){if(O=!0,z=G,G=E(G),k!==void 0&&b.hasValue){var Q=b.value;if(k(Q,G))return M=Q}return M=G}if(Q=M,v(z,G))return Q;var ne=E(G);return k!==void 0&&k(Q,ne)?Q:(z=G,M=ne)}var O=!1,z,M,R=S===void 0?null:S;return[function(){return I(T())},R===null?void 0:function(){return I(R())}]},[T,S,E,k]);var D=p(m,C[0],C[1]);return f(function(){b.hasValue=!0,b.value=D},[D]),g(D),D},fc}var rf;function Ym(){return rf||(rf=1,dc.exports=Jm()),dc.exports}var Km=Ym();const Zm=Wa(Km),Nf={},{useDebugValue:Xm}=$a,{useSyncExternalStoreWithSelector:ep}=Zm;let nf=!1;const tp=a=>a;function rp(a,d=tp,o){(Nf?"production":void 0)!=="production"&&o&&!nf&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),nf=!0);const v=ep(a.subscribe,a.getState,a.getServerState||a.getInitialState,d,o);return Xm(v),v}const sf=a=>{(Nf?"production":void 0)!=="production"&&typeof a!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const d=typeof a=="function"?Qm(a):a,o=(v,p)=>rp(d,v,p);return Object.assign(o,d),o},np=a=>a?sf(a):sf;function sp(a,d){switch(d.type){case"SET_LOADING":return{...a,isLoading:d.payload};case"LOAD_DATA":return{...a,...d.payload,isLoading:!1};case"ADD_DECKS":{const o=new Map(a.decks.map(v=>[v.id,v]));return d.payload.forEach(v=>o.set(v.id,v)),{...a,decks:Array.from(o.values())}}case"RESTORE_DATA":{const{decks:o,folders:v,deckSeries:p}=d.payload,c=new Map(a.decks.map(g=>[g.id,g]));o.forEach(g=>c.set(g.id,g));const f=new Map(a.folders.map(g=>[g.id,g]));v.forEach(g=>f.set(g.id,g));const x=new Map(a.deckSeries.map(g=>[g.id,g]));return p.forEach(g=>x.set(g.id,g)),{...a,decks:Array.from(c.values()),folders:Array.from(f.values()),deckSeries:Array.from(x.values())}}case"DELETE_DECK":return{...a,decks:a.decks.filter(o=>o.id!==d.payload),deckSeries:a.deckSeries.map(o=>o.levels?{...o,levels:o.levels.map(v=>({...v,deckIds:(v.deckIds||[]).filter(p=>p!==d.payload)})).filter(v=>v.deckIds.length>0)}:o)};case"UPDATE_DECK":return{...a,decks:a.decks.map(o=>o.id===d.payload.id?d.payload:o)};case"BULK_UPDATE_DECKS":{const o=new Map(a.decks.map(v=>[v.id,v]));return d.payload.forEach(v=>o.set(v.id,v)),{...a,decks:Array.from(o.values())}}case"ADD_FOLDER":return{...a,folders:[...a.folders,d.payload]};case"UPDATE_FOLDER":return{...a,folders:a.folders.map(o=>o.id===d.payload.id?d.payload:o)};case"DELETE_FOLDER":return{...a,folders:a.folders.filter(o=>o.id!==d.payload),decks:a.decks.map(o=>o.folderId===d.payload?{...o,folderId:null}:o)};case"ADD_SERIES":return{...a,deckSeries:[...a.deckSeries,d.payload]};case"ADD_SERIES_WITH_DECKS":{const{series:o,decks:v}=d.payload,p=new Map(a.decks.map(c=>[c.id,c]));return v.forEach(c=>p.set(c.id,c)),{...a,decks:Array.from(p.values()),deckSeries:[...a.deckSeries,o]}}case"UPDATE_SERIES":return{...a,deckSeries:a.deckSeries.map(o=>o.id===d.payload.id?d.payload:o)};case"DELETE_SERIES":return{...a,deckSeries:a.deckSeries.filter(o=>o.id!==d.payload)};default:return a}}const ap={decks:[],folders:[],deckSeries:[],isLoading:!0},wt=np(a=>({...ap,dispatch:d=>a(o=>sp(o,d))})),ip=({sessionsToResume:a,setSessionsToResume:d,seriesProgress:o,setSeriesProgress:v,setGeneralStudyDeck:p,openConfirmModal:c,setFolderToEdit:f,setSeriesToEdit:x})=>{const{addToast:g}=vr(),{navigate:m}=jn(),T=wt(N=>N.dispatch),S=L.useCallback(async(N,B)=>{T({type:"UPDATE_DECK",payload:N}),B!=null&&B.silent||(B!=null&&B.toastMessage?g(B.toastMessage,"success"):N.archived?g(`Deck "${N.name}" archived.`,"success"):N.archived===!1?g(`Deck "${N.name}" unarchived.`,"success"):g(`Deck "${N.name}" updated.`,"success"));try{await Kh(N)}catch(H){console.error("Failed to update deck:",H),g("There was an error syncing the deck update.","error")}},[g,T]),E=L.useCallback(async N=>{const B=wt.getState().decks.find(H=>H.id===N);if(B){const H={...B,lastOpened:new Date().toISOString()};await S(H,{silent:!0})}},[S]),k=L.useCallback(async N=>{try{T({type:"ADD_DECKS",payload:N}),await qa(N)}catch(B){console.error("Failed to add decks:",B),g("There was an error saving the new deck(s).","error")}},[g,T]),C=L.useCallback(async(N,B)=>{const H=`session_deck_${N}`;if(a.has(N)){const U=new Set(a);U.delete(N),d(U)}try{await vc(H)}catch(U){console.error(`Failed to clean up session state for ${H} from DB`,U)}N==="general-study-deck"&&p(null),m(B?`/series/${B}`:"/")},[m,a,d,p]),b=L.useCallback(async()=>{const N=qm();await k([N]),g(`Sample deck "${N.name}" created!`,"success")},[k,g]),D=L.useCallback(async()=>{const{series:N,decks:B}=Bm();try{T({type:"ADD_SERIES_WITH_DECKS",payload:{series:N,decks:B}}),await Promise.all([qa(B),ao([N])]),g(`Sample series "${N.name}" created!`,"success")}catch(H){console.error("Failed to create sample series:",H),g("There was an error creating the sample series.","error")}},[g,T]),I=L.useCallback(async N=>{try{T({type:"RESTORE_DATA",payload:N}),await Promise.all([qa(N.decks),Xh(N.folders),ao(N.deckSeries)]),g("Successfully restored data.","success")}catch(B){throw console.error("Failed to restore from backup:",B),g("There was an error restoring from the backup file.","error"),B}},[g,T]),O=L.useCallback(async N=>{const B=wt.getState().decks.find(U=>U.id===N);if(!B)return;const H={...B,deletedAt:new Date().toISOString(),archived:!1};await S(H,{toastMessage:`Moved "${B.name}" to Trash.`})},[S]),z=L.useCallback(async(N,B)=>{const{decks:H,folders:U}=wt.getState(),X=H.find(Ie=>Ie.id===N),he=U.find(Ie=>Ie.id===B);if(!X||X.folderId===B)return;const oe={...X,folderId:B},ye=he?`"${he.name}"`:"the ungrouped area";await S(oe,{toastMessage:`Moved "${X.name}" to ${ye}.`})},[S]),M=L.useCallback(async(N,B,H,U)=>{const{decks:X,deckSeries:he}=wt.getState(),oe=X.find(Y=>Y.id===N);if(!oe)return;let ye;const{id:Ie,dueDate:ze,interval:qe,easeFactor:Ee,suspended:y,masteryLevel:de,lastReviewed:ue,lapses:W}=B,q={dueDate:ze,interval:qe,easeFactor:Ee,suspended:y,masteryLevel:de,lastReviewed:ue,lapses:W};oe.type===Ge.Flashcard?ye={...oe,cards:oe.cards.map(Y=>Y.id===Ie?{...Y,...q}:Y)}:ye={...oe,questions:oe.questions.map(Y=>Y.id===Ie?{...Y,...q}:Y)},await S(ye,{silent:!0});try{const Y={itemId:B.id,deckId:N,seriesId:U,timestamp:new Date().toISOString(),rating:H,newInterval:B.interval,easeFactor:B.easeFactor,masteryLevel:B.masteryLevel||0};await am(Y)}catch(Y){console.error("Failed to log review:",Y)}if(U){const Y=ye,be=Y.type===Ge.Flashcard?Y.cards:Y.questions,Ne=be.some(ce=>!ce.suspended&&ce.interval===0);v(ce=>{const Ae=(ce.get(U)||new Set).has(N);if(!Ne&&!Ae&&be.length>0){const Fe=new Map(ce),Me=new Set(Fe.get(U)||[]);Me.add(N),Fe.set(U,Me);try{localStorage.setItem(`series-progress-${U}`,JSON.stringify(Array.from(Me)));const Ue=he.find(ft=>ft.id===U),st=(Ue==null?void 0:Ue.levels.flatMap(ft=>ft.deckIds))||[];st.indexOf(N)===st.length-1&&st.length>0?g(`Congratulations! You've completed the series: "${Ue==null?void 0:Ue.name}"!`,"success"):g(`Deck "${Y.name}" completed! Next chapter unlocked.`,"success")}catch(Ue){console.error("Could not save series progress",Ue)}return Fe}return ce})}},[S,g,v]),R=L.useCallback(async N=>{const B=wt.getState().decks.find(U=>U.id===N);if(!B)return;let H;B.type===Ge.Flashcard?H={...B,cards:B.cards.map(U=>Kd(U))}:H={...B,questions:B.questions.map(U=>Kd(U))},await S(H,{toastMessage:`Progress for deck "${H.name}" has been reset.`})},[S]),G=async()=>{try{const N=await lm();N&&g(`Data exported to ${N}`,"success")}catch(N){const B=N instanceof Error?N.message:"Unknown error";g(`Export failed: ${B}`,"error")}},Q=L.useCallback(()=>{const{decks:N,deckSeries:B}=wt.getState(),H=new Set;B.forEach(ye=>{var Ie;if(!ye.archived&&!ye.deletedAt){const ze=((Ie=o.get(ye.id))==null?void 0:Ie.size)||0;let qe=0;ye.levels.forEach(Ee=>{Ee.deckIds.forEach(()=>{qe<=ze&&H.add(ye.id),qe++})})}});const U=new Set;B.forEach(ye=>{ye.levels.forEach(Ie=>Ie.deckIds.forEach(ze=>U.add(ze)))});const X=new Date;X.setHours(23,59,59,999);const he=N.filter(ye=>!(ye.type!==Ge.Quiz||ye.archived||ye.deletedAt||U.has(ye.id)&&!H.has(ye.id))).flatMap(ye=>ye.questions.filter(Ie=>!Ie.suspended&&new Date(Ie.dueDate)<=X).map(Ie=>({...Ie,originalDeckId:ye.id,originalDeckName:ye.name}))).sort(()=>Math.random()-.5),oe={id:"general-study-deck",name:"General Study Session",type:Ge.Quiz,questions:he};p(oe),m("/study/general")},[o,m,p]),ne=L.useCallback(async N=>{var Ee;const{decks:B,deckSeries:H}=wt.getState(),U=H.find(y=>y.id===N);if(!U)return;const X=new Set,he=((Ee=o.get(U.id))==null?void 0:Ee.size)||0;let oe=0;U.levels.forEach(y=>{y.deckIds.forEach(de=>{oe<=he&&X.add(de),oe++})});const ye=new Date;ye.setHours(23,59,59,999);const ze=U.levels.flatMap(y=>y.deckIds).map(y=>B.find(de=>de.id===y)).filter(y=>!!(y&&y.type===Ge.Quiz)).filter(y=>X.has(y.id)).flatMap(y=>y.questions.filter(de=>!de.suspended&&new Date(de.dueDate)<=ye).map(de=>({...de,originalDeckId:y.id,originalDeckName:y.name}))).sort(()=>Math.random()-.5),qe={id:"general-study-deck",name:`${U.name} - Study Session`,type:Ge.Quiz,questions:ze};p(qe),m(`/study/general?seriesId=${N}`)},[o,m,p]),V=L.useCallback(async N=>{if(N.id){const B={id:N.id,name:N.name};T({type:"UPDATE_FOLDER",payload:B}),g(`Folder "${B.name}" updated.`,"success"),await em(B)}else{const B={id:crypto.randomUUID(),name:N.name};T({type:"ADD_FOLDER",payload:B}),g(`Folder "${B.name}" created.`,"success"),await Zh(B)}f(null)},[g,T,f]),ee=L.useCallback(async N=>{const{folders:B,decks:H}=wt.getState(),U=B.find(X=>X.id===N);U&&c({title:"Delete Folder",message:`Are you sure you want to delete folder "${U.name}"? Decks inside will not be deleted.`,onConfirm:async()=>{T({type:"DELETE_FOLDER",payload:N}),g(`Folder "${U.name}" deleted.`,"success");const X=H.filter(he=>he.folderId===N).map(he=>({...he,folderId:null}));X.length>0&&await Hd(X),await tm(N)}})},[g,T,c]),ae=L.useCallback(async(N,B)=>{T({type:"UPDATE_SERIES",payload:N}),B!=null&&B.silent||(B!=null&&B.toastMessage?g(B.toastMessage,"success"):N.archived?g(`Series "${N.name}" archived.`,"success"):N.archived===!1?g(`Series "${N.name}" unarchived.`,"success"):g(`Series "${N.name}" updated.`,"success"));try{await Wd(N)}catch(H){console.error("Failed to update series:",H),g("There was an error updating the series.","error")}},[g,T]),$=L.useCallback(async(N,B)=>{try{T({type:"ADD_SERIES_WITH_DECKS",payload:{series:N,decks:B}}),await Promise.all([qa(B),ao([N])]),g(`Successfully imported series "${N.name}" with ${B.length} decks.`,"success")}catch(H){console.error("Failed to create series with decks:",H),g("There was an error creating the new series.","error")}},[T,g]),K=L.useCallback(async N=>{if(N.id){const B=wt.getState().deckSeries.find(H=>H.id===N.id);if(B){const H={...B,name:N.name,description:N.description};await ae(H)}}else if(N.scaffold&&Array.isArray(N.scaffold.levels)){const{levels:B}=N.scaffold,H=[],U=B.map(he=>{const oe=(he.decks||[]).map(ye=>({id:crypto.randomUUID(),name:ye.name,description:ye.description,type:Ge.Quiz,questions:ca(ye.questions||[])}));return H.push(...oe),{title:he.title,deckIds:oe.map(ye=>ye.id)}}),X={id:crypto.randomUUID(),type:"series",name:N.name,description:N.description,levels:U,archived:!1,createdAt:new Date().toISOString()};await $(X,H),g(`Series "${X.name}" created from scaffold.`,"success"),m(`/series/${X.id}?edit=true`)}else{const B={id:crypto.randomUUID(),type:"series",name:N.name,description:N.description,levels:[],createdAt:new Date().toISOString()};T({type:"ADD_SERIES",payload:B}),g(`Series "${B.name}" created.`,"success"),await ao([B]),m(`/series/${B.id}?edit=true`)}x(null)},[g,ae,T,x,m,$]),_=L.useCallback(async N=>{const{deckSeries:B,decks:H}=wt.getState(),U=B.find(ye=>ye.id===N);if(!U)return;const X=U.levels.flatMap(ye=>ye.deckIds),he=H.filter(ye=>X.includes(ye.id)).map(ye=>({...ye,deletedAt:new Date().toISOString(),archived:!1})),oe={...U,deletedAt:new Date().toISOString(),archived:!1};T({type:"BULK_UPDATE_DECKS",payload:he}),T({type:"UPDATE_SERIES",payload:oe}),g(`Series "${U.name}" and its ${he.length} deck(s) moved to Trash.`,"success");try{await Promise.all([Hd(he),Wd(oe)])}catch(ye){console.error("Failed to move series and its decks to trash:",ye),g("Error moving series to trash.","error")}},[T,g]),xe=L.useCallback(async(N,B)=>{const H=wt.getState().deckSeries.find(he=>he.id===N);if(!H)return;await k([B]);const U={title:B.name,deckIds:[B.id]},X={...H,levels:[...H.levels,U]};await ae(X)},[k,ae]),je=L.useCallback(async N=>{const B=wt.getState().decks.find(X=>X.id===N);if(!B)return;const{deletedAt:H,...U}=B;await S(U,{toastMessage:`Restored deck "${U.name}".`})},[S]),re=L.useCallback(async N=>{const B=wt.getState().deckSeries.find(X=>X.id===N);if(!B)return;const{deletedAt:H,...U}=B;await ae(U,{toastMessage:`Restored series "${U.name}".`})},[ae]),fe=L.useCallback(async N=>{var B;try{const H=(B=wt.getState().decks.find(U=>U.id===N))==null?void 0:B.name;T({type:"DELETE_DECK",payload:N}),g(`Deck "${H||"Deck"}" permanently deleted.`,"success"),await yc(N)}catch(H){console.error("Failed to permanently delete deck:",H),g("There was an error permanently deleting the deck.","error")}},[T,g]),ie=L.useCallback(async N=>{const B=wt.getState().deckSeries.find(X=>X.id===N);if(!B)return;const H=B.levels.flatMap(X=>X.deckIds),U=B.name;try{H.forEach(X=>{T({type:"DELETE_DECK",payload:X})}),T({type:"DELETE_SERIES",payload:N}),g(`Series "${U}" and its ${H.length} deck(s) permanently deleted.`,"success"),await Promise.all([...H.map(X=>yc(X)),wf(N)])}catch(X){console.error("Failed to permanently delete series and its decks:",X),g("There was an error permanently deleting the series.","error")}},[T,g]),P=L.useCallback(()=>{c({title:"Factory Reset",message:"Are you sure you want to perform a factory reset? All of your decks, folders, series, and settings will be permanently deleted. This action cannot be undone.",confirmText:"RESET",onConfirm:async()=>{try{g("Resetting application...","info"),navigator.serviceWorker&&navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"CLEAR_APP_CACHE"}),navigator.serviceWorker.controller.postMessage({type:"CLEAR_CDN_CACHE"})),await cm();const N=[];for(let B=0;B<localStorage.length;B++){const H=localStorage.key(B);H&&(H.startsWith("cogniflow-")||H.startsWith("session_deck_")||H.startsWith("series-progress-"))&&N.push(H)}N.forEach(B=>localStorage.removeItem(B)),setTimeout(()=>{window.location.reload()},1500)}catch(N){console.error("Factory reset failed:",N);const B=N instanceof Error?N.message:"Factory reset failed. Please try again.";g(B,"error")}}})},[g,c]),w=L.useCallback(()=>{const{deckSeries:N,decks:B}=wt.getState();if(!N.length||!B.length)return;let H=!1;v(U=>{const X=new Map(U);for(const he of N){if(he.archived||he.deletedAt)continue;const oe=new Set(X.get(he.id)||[]);let ye=!1;const Ie=he.levels.flatMap(ze=>ze.deckIds);for(const ze of Ie){if(oe.has(ze))continue;const qe=B.find(de=>de.id===ze);if(!qe)continue;const Ee=qe.type===Ge.Quiz?qe.questions:qe.cards;!Ee.some(de=>!de.suspended&&de.interval===0)&&Ee.length>0&&(oe.add(ze),ye=!0)}ye&&(X.set(he.id,oe),H=!0)}return H?(X.forEach((he,oe)=>{try{localStorage.setItem(`series-progress-${oe}`,JSON.stringify(Array.from(he)))}catch(ye){console.error(`Could not save reconciled series progress for ${oe}`,ye)}}),g("Unlocked decks based on your progress.","info"),X):U})},[v,g]);return{updateLastOpened:E,handleSessionEnd:C,handleAddDecks:k,handleCreateSampleDeck:b,handleCreateSampleSeries:D,handleRestoreData:I,handleDeleteDeck:O,handleUpdateDeck:S,handleMoveDeck:z,handleItemReviewed:M,handleExportData:G,handleResetDeckProgress:R,handleFactoryReset:P,handleStartGeneralStudy:Q,handleStartSeriesStudy:ne,handleSaveFolder:V,handleDeleteFolder:ee,handleUpdateSeries:ae,handleSaveSeries:K,handleDeleteSeries:_,handleAddDeckToSeries:xe,handleAddSeriesWithDecks:$,handleRestoreDeck:je,handleRestoreSeries:re,handleDeleteDeckPermanently:fe,handleDeleteSeriesPermanently:ie,reconcileSeriesProgress:w}},_f=L.createContext(void 0),af=(a,d)=>{if(typeof window>"u")return d;try{const o=window.localStorage.getItem(a);return o?JSON.parse(o)===!0:d}catch(o){return console.error(`Error reading ${a} from localStorage`,o),d}},op=({children:a})=>{const[d,o]=L.useState(()=>af("cogniflow-disableAnimations",!1)),[v,p]=L.useState(()=>af("cogniflow-hapticsEnabled",!0)),c=L.useCallback(g=>{o(g);try{window.localStorage.setItem("cogniflow-disableAnimations",JSON.stringify(g))}catch(m){console.error("Error writing animation setting to localStorage",m)}},[]),f=L.useCallback(g=>{p(g);try{window.localStorage.setItem("cogniflow-hapticsEnabled",JSON.stringify(g))}catch(m){console.error("Error writing haptics setting to localStorage",m)}},[]),x={disableAnimations:d,setDisableAnimations:c,hapticsEnabled:v,setHapticsEnabled:f};return r.jsx(_f.Provider,{value:x,children:a})},Dc=()=>{const a=L.useContext(_f);if(a===void 0)throw new Error("useSettings must be used within a SettingsProvider");return a},oo=120,lp=()=>{const[a,d]=L.useState({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}),{hapticsEnabled:o}=Dc(),v=L.useCallback(f=>{window.scrollY===0?d(x=>({...x,startY:f.touches[0].clientY,pullDistance:0,isRefreshing:!1,thresholdMet:!1})):d(x=>({...x,startY:0}))},[]),p=L.useCallback(f=>{if(a.startY===0)return;const x=f.touches[0].clientY-a.startY;x>5&&(f.preventDefault(),x>oo&&!a.thresholdMet&&o&&"vibrate"in navigator&&navigator.vibrate(50),d(m=>({...m,pullDistance:x,thresholdMet:x>oo})))},[a.startY,a.thresholdMet,o]),c=L.useCallback(()=>{a.startY!==0&&(a.pullDistance>oo?(d(f=>({...f,isRefreshing:!0})),setTimeout(()=>{window.location.reload()},500)):d({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}))},[a.startY,a.pullDistance]);return{pullToRefreshState:a,handleTouchStart:v,handleTouchMove:p,handleTouchEnd:c,REFRESH_THRESHOLD:oo}},cp=({onOpenMenu:a,onOpenCommandPalette:d,activeDeck:o})=>{const{path:v,navigate:p}=jn();let c;const[f]=v.split("?"),x=r.jsx("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"CogniFlow"}),g=o==null?void 0:o.id;if(f.startsWith("/decks/")&&f.endsWith("/study")){const m=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId"),T=g?`/decks/${g}?${m?`seriesId=${m}`:""}`:m?`/series/${m}`:"/decks";c=r.jsxs(ke,{variant:"ghost",onClick:()=>p(T),className:"flex items-center space-x-2 -ml-3 min-w-0",children:[r.jsx(le,{name:"chevron-left"}),r.jsx("span",{className:"truncate",children:(o==null?void 0:o.name)||"Back"})]})}else if(f.startsWith("/decks/")){const m=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId");m?c=r.jsxs(ke,{variant:"ghost",onClick:()=>p(`/series/${m}`),className:"flex items-center space-x-2 -ml-3",children:[r.jsx(le,{name:"chevron-left"}),r.jsx("span",{children:"Back to Series"})]}):c=r.jsxs(ke,{variant:"ghost",onClick:()=>p("/decks"),className:"flex items-center space-x-2 -ml-3",children:[r.jsx(le,{name:"chevron-left"}),r.jsx("span",{children:"All Decks"})]})}else f.startsWith("/series/")?c=r.jsxs(ke,{variant:"ghost",onClick:()=>p("/series"),className:"flex items-center space-x-2 -ml-3",children:[r.jsx(le,{name:"chevron-left"}),r.jsx("span",{children:"All Series"})]}):f==="/study/general"||["/settings","/instructions/json","/archive","/trash","/decks","/series","/progress"].includes(f)?c=r.jsxs(ke,{variant:"ghost",onClick:()=>p("/"),className:"flex items-center space-x-2 -ml-3",children:[r.jsx(le,{name:"chevron-left"}),x]}):c=r.jsx(Ft,{href:"/",className:"no-underline",children:r.jsx("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"CogniFlow"})});return r.jsx("header",{className:"bg-surface/80 backdrop-blur-sm sticky top-0 z-20 border-b border-border",children:r.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[r.jsx("div",{className:"flex items-center flex-1 min-w-0",children:c}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(ke,{variant:"ghost",onClick:d,className:"p-1 h-auto","aria-label":"Open command palette",children:r.jsx(le,{name:"search"})}),r.jsx(ke,{variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Open menu",children:r.jsx(le,{name:"menu"})})]})]})})},of=({html:a,className:d})=>{const o=`html-container-${$a.useId()}`;return $a.useEffect(()=>{const v=document.getElementById(o);if(!v)return;const p=Array.from(v.getElementsByTagName("script")),c=[];return p.forEach(f=>{const x=document.createElement("script");Array.from(f.attributes).forEach(g=>{x.setAttribute(g.name,g.value)}),x.text=f.text,document.body.appendChild(x),c.push(x)}),()=>{c.forEach(f=>document.body.removeChild(f))}},[a,o]),r.jsx("div",{id:o,className:d,dangerouslySetInnerHTML:{__html:a}})},Jn=({level:a})=>{const d=Math.round(a*100);let o="bg-red-500",v="Novice";return d>85?(o="bg-green-500",v="Mastered"):d>65?(o="bg-teal-500",v="Proficient"):d>40?(o="bg-blue-500",v="Familiar"):d>15&&(o="bg-orange-500",v="Learning"),r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"flex justify-between mb-1 text-xs",children:[r.jsxs("span",{className:"font-semibold text-gray-600 dark:text-gray-300",children:["Mastery: ",v]}),r.jsxs("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:[d,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:r.jsx("div",{className:`${o} h-2 rounded-full transition-all duration-500`,style:{width:`${d}%`},role:"progressbar","aria-valuenow":d,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Mastery level: ${v}, ${d}%`})})]})},up=({card:a,isFlipped:d})=>{const o="text-xl text-left text-text break-words prose dark:prose-invert max-w-none prose-img:mx-auto prose-img:max-h-64 prose-audio:mx-auto",v=Jr(a);return r.jsxs("div",{className:"w-full bg-surface rounded-lg shadow-lg border border-border",children:[a.css&&r.jsx("div",{dangerouslySetInnerHTML:{__html:a.css}}),r.jsx("div",{className:"p-6 md:p-8 min-h-[12rem] flex items-center justify-center",children:r.jsx(of,{html:a.front,className:o})}),d&&r.jsxs("div",{className:"animate-fade-in",style:{animationDuration:"400ms"},children:[r.jsx("hr",{className:"border-border/50"}),r.jsxs("div",{className:"p-6 md:p-8 bg-background/30 dark:bg-black/10",children:[r.jsx(of,{html:a.back,className:o}),r.jsx("div",{className:"mt-6 pt-6 border-t border-border/50",children:r.jsx(Jn,{level:v})})]})]})]})},dp=({question:a,selectedAnswerId:d,onSelectAnswer:o,deckName:v})=>{const p=d!==null,[c,f]=L.useState(!1),[x,g]=L.useState(null),[m,T]=L.useState(!1),S=L.useMemo(()=>{const C=[...a.options];for(let b=C.length-1;b>0;b--){const D=Math.floor(Math.random()*(b+1));[C[b],C[D]]=[C[D],C[b]]}return C},[a.id]),E=C=>{let b="flex items-start text-left w-full p-4 rounded-lg border-2 transition-all duration-200";if(p){const D=C.id===a.correctAnswerId,I=C.id===d;return D?`${b} bg-green-500/10 border-green-500 cursor-default`:I?`${b} bg-red-500/10 border-red-500 cursor-default`:`${b} bg-surface/50 border-border opacity-60 cursor-default`}return`${b} bg-surface border-border hover:border-primary hover:bg-border/20`},k=Jr(a);return r.jsxs("div",{className:"bg-surface/50 rounded-lg p-6 w-full border border-border",children:[v&&r.jsxs("div",{className:"mb-3 text-xs text-text-muted font-medium tracking-wider uppercase",children:["From: ",v]}),r.jsx("p",{className:"text-lg md:text-xl font-semibold mb-6 text-text break-words",children:a.questionText}),r.jsx("div",{className:"space-y-3",children:S.map(C=>{const b=C.id===a.correctAnswerId,D=C.id===d;return r.jsxs("button",{onClick:()=>o(C.id),disabled:p,className:E(C),"aria-pressed":D,children:[r.jsxs("div",{className:"flex-shrink-0 w-6 h-6 mr-4 mt-1",children:[p&&b&&r.jsx(le,{name:"check-circle",className:"text-green-500"}),p&&D&&!b&&r.jsx(le,{name:"x-circle",className:"text-red-500"})]}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsx("span",{className:"text-text break-words",children:C.text}),p&&C.explanation&&r.jsx("p",{className:"text-sm text-text-muted mt-1 break-words",children:C.explanation})]})]},C.id)})}),p&&r.jsxs("div",{className:"mt-8 p-4 bg-background rounded-lg animate-fade-in space-y-4 border border-border",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-lg text-primary mb-2",children:"Detailed Explanation"}),r.jsx("p",{className:"text-text-muted whitespace-pre-wrap",children:a.detailedExplanation})]}),r.jsx("div",{className:"pt-4 border-t border-border/50",children:r.jsx(Jn,{level:k})})]})]})},Tc=({current:a,total:d})=>{const o=d>0?a/d*100:0;return r.jsx("div",{className:"w-full bg-border/30 rounded-full h-2.5",children:r.jsx("div",{className:"bg-primary h-2.5 rounded-full transition-all duration-500",style:{width:`${o}%`}})})};var Ga={};(function a(d,o,v,p){var c=!!(d.Worker&&d.Blob&&d.Promise&&d.OffscreenCanvas&&d.OffscreenCanvasRenderingContext2D&&d.HTMLCanvasElement&&d.HTMLCanvasElement.prototype.transferControlToOffscreen&&d.URL&&d.URL.createObjectURL),f=typeof Path2D=="function"&&typeof DOMMatrix=="function",x=function(){if(!d.OffscreenCanvas)return!1;var P=new OffscreenCanvas(1,1),w=P.getContext("2d");w.fillRect(0,0,1,1);var N=P.transferToImageBitmap();try{w.createPattern(N,"no-repeat")}catch{return!1}return!0}();function g(){}function m(P){var w=o.exports.Promise,N=w!==void 0?w:d.Promise;return typeof N=="function"?new N(P):(P(g,g),null)}var T=function(P,w){return{transform:function(N){if(P)return N;if(w.has(N))return w.get(N);var B=new OffscreenCanvas(N.width,N.height),H=B.getContext("2d");return H.drawImage(N,0,0),w.set(N,B),B},clear:function(){w.clear()}}}(x,new Map),S=function(){var P=Math.floor(16.666666666666668),w,N,B={},H=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(w=function(U){var X=Math.random();return B[X]=requestAnimationFrame(function he(oe){H===oe||H+P-1<oe?(H=oe,delete B[X],U()):B[X]=requestAnimationFrame(he)}),X},N=function(U){B[U]&&cancelAnimationFrame(B[U])}):(w=function(U){return setTimeout(U,P)},N=function(U){return clearTimeout(U)}),{frame:w,cancel:N}}(),E=function(){var P,w,N={};function B(H){function U(X,he){H.postMessage({options:X||{},callback:he})}H.init=function(he){var oe=he.transferControlToOffscreen();H.postMessage({canvas:oe},[oe])},H.fire=function(he,oe,ye){if(w)return U(he,null),w;var Ie=Math.random().toString(36).slice(2);return w=m(function(ze){function qe(Ee){Ee.data.callback===Ie&&(delete N[Ie],H.removeEventListener("message",qe),w=null,T.clear(),ye(),ze())}H.addEventListener("message",qe),U(he,Ie),N[Ie]=qe.bind(null,{data:{callback:Ie}})}),w},H.reset=function(){H.postMessage({reset:!0});for(var he in N)N[he](),delete N[he]}}return function(){if(P)return P;if(!v&&c){var H=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{P=new Worker(URL.createObjectURL(new Blob([H])))}catch(U){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn(" Could not load worker",U),null}B(P)}return P}}(),k={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function C(P,w){return w?w(P):P}function b(P){return P!=null}function D(P,w,N){return C(P&&b(P[w])?P[w]:k[w],N)}function I(P){return P<0?0:Math.floor(P)}function O(P,w){return Math.floor(Math.random()*(w-P))+P}function z(P){return parseInt(P,16)}function M(P){return P.map(R)}function R(P){var w=String(P).replace(/[^0-9a-f]/gi,"");return w.length<6&&(w=w[0]+w[0]+w[1]+w[1]+w[2]+w[2]),{r:z(w.substring(0,2)),g:z(w.substring(2,4)),b:z(w.substring(4,6))}}function G(P){var w=D(P,"origin",Object);return w.x=D(w,"x",Number),w.y=D(w,"y",Number),w}function Q(P){P.width=document.documentElement.clientWidth,P.height=document.documentElement.clientHeight}function ne(P){var w=P.getBoundingClientRect();P.width=w.width,P.height=w.height}function V(P){var w=document.createElement("canvas");return w.style.position="fixed",w.style.top="0px",w.style.left="0px",w.style.pointerEvents="none",w.style.zIndex=P,w}function ee(P,w,N,B,H,U,X,he,oe){P.save(),P.translate(w,N),P.rotate(U),P.scale(B,H),P.arc(0,0,1,X,he,oe),P.restore()}function ae(P){var w=P.angle*(Math.PI/180),N=P.spread*(Math.PI/180);return{x:P.x,y:P.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:P.startVelocity*.5+Math.random()*P.startVelocity,angle2D:-w+(.5*N-Math.random()*N),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:P.color,shape:P.shape,tick:0,totalTicks:P.ticks,decay:P.decay,drift:P.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:P.gravity*3,ovalScalar:.6,scalar:P.scalar,flat:P.flat}}function $(P,w){w.x+=Math.cos(w.angle2D)*w.velocity+w.drift,w.y+=Math.sin(w.angle2D)*w.velocity+w.gravity,w.velocity*=w.decay,w.flat?(w.wobble=0,w.wobbleX=w.x+10*w.scalar,w.wobbleY=w.y+10*w.scalar,w.tiltSin=0,w.tiltCos=0,w.random=1):(w.wobble+=w.wobbleSpeed,w.wobbleX=w.x+10*w.scalar*Math.cos(w.wobble),w.wobbleY=w.y+10*w.scalar*Math.sin(w.wobble),w.tiltAngle+=.1,w.tiltSin=Math.sin(w.tiltAngle),w.tiltCos=Math.cos(w.tiltAngle),w.random=Math.random()+2);var N=w.tick++/w.totalTicks,B=w.x+w.random*w.tiltCos,H=w.y+w.random*w.tiltSin,U=w.wobbleX+w.random*w.tiltCos,X=w.wobbleY+w.random*w.tiltSin;if(P.fillStyle="rgba("+w.color.r+", "+w.color.g+", "+w.color.b+", "+(1-N)+")",P.beginPath(),f&&w.shape.type==="path"&&typeof w.shape.path=="string"&&Array.isArray(w.shape.matrix))P.fill(re(w.shape.path,w.shape.matrix,w.x,w.y,Math.abs(U-B)*.1,Math.abs(X-H)*.1,Math.PI/10*w.wobble));else if(w.shape.type==="bitmap"){var he=Math.PI/10*w.wobble,oe=Math.abs(U-B)*.1,ye=Math.abs(X-H)*.1,Ie=w.shape.bitmap.width*w.scalar,ze=w.shape.bitmap.height*w.scalar,qe=new DOMMatrix([Math.cos(he)*oe,Math.sin(he)*oe,-Math.sin(he)*ye,Math.cos(he)*ye,w.x,w.y]);qe.multiplySelf(new DOMMatrix(w.shape.matrix));var Ee=P.createPattern(T.transform(w.shape.bitmap),"no-repeat");Ee.setTransform(qe),P.globalAlpha=1-N,P.fillStyle=Ee,P.fillRect(w.x-Ie/2,w.y-ze/2,Ie,ze),P.globalAlpha=1}else if(w.shape==="circle")P.ellipse?P.ellipse(w.x,w.y,Math.abs(U-B)*w.ovalScalar,Math.abs(X-H)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI):ee(P,w.x,w.y,Math.abs(U-B)*w.ovalScalar,Math.abs(X-H)*w.ovalScalar,Math.PI/10*w.wobble,0,2*Math.PI);else if(w.shape==="star")for(var y=Math.PI/2*3,de=4*w.scalar,ue=8*w.scalar,W=w.x,q=w.y,Y=5,be=Math.PI/Y;Y--;)W=w.x+Math.cos(y)*ue,q=w.y+Math.sin(y)*ue,P.lineTo(W,q),y+=be,W=w.x+Math.cos(y)*de,q=w.y+Math.sin(y)*de,P.lineTo(W,q),y+=be;else P.moveTo(Math.floor(w.x),Math.floor(w.y)),P.lineTo(Math.floor(w.wobbleX),Math.floor(H)),P.lineTo(Math.floor(U),Math.floor(X)),P.lineTo(Math.floor(B),Math.floor(w.wobbleY));return P.closePath(),P.fill(),w.tick<w.totalTicks}function K(P,w,N,B,H){var U=w.slice(),X=P.getContext("2d"),he,oe,ye=m(function(Ie){function ze(){he=oe=null,X.clearRect(0,0,B.width,B.height),T.clear(),H(),Ie()}function qe(){v&&!(B.width===p.width&&B.height===p.height)&&(B.width=P.width=p.width,B.height=P.height=p.height),!B.width&&!B.height&&(N(P),B.width=P.width,B.height=P.height),X.clearRect(0,0,B.width,B.height),U=U.filter(function(Ee){return $(X,Ee)}),U.length?he=S.frame(qe):ze()}he=S.frame(qe),oe=ze});return{addFettis:function(Ie){return U=U.concat(Ie),ye},canvas:P,promise:ye,reset:function(){he&&S.cancel(he),oe&&oe()}}}function _(P,w){var N=!P,B=!!D(w||{},"resize"),H=!1,U=D(w,"disableForReducedMotion",Boolean),X=c&&!!D(w||{},"useWorker"),he=X?E():null,oe=N?Q:ne,ye=P&&he?!!P.__confetti_initialized:!1,Ie=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,ze;function qe(y,de,ue){for(var W=D(y,"particleCount",I),q=D(y,"angle",Number),Y=D(y,"spread",Number),be=D(y,"startVelocity",Number),Ne=D(y,"decay",Number),ce=D(y,"gravity",Number),Ae=D(y,"drift",Number),Fe=D(y,"colors",M),Me=D(y,"ticks",Number),Ue=D(y,"shapes"),st=D(y,"scalar"),Ye=!!D(y,"flat"),ft=G(y),Ct=W,bt=[],ur=P.width*ft.x,ht=P.height*ft.y;Ct--;)bt.push(ae({x:ur,y:ht,angle:q,spread:Y,startVelocity:be,color:Fe[Ct%Fe.length],shape:Ue[O(0,Ue.length)],ticks:Me,decay:Ne,gravity:ce,drift:Ae,scalar:st,flat:Ye}));return ze?ze.addFettis(bt):(ze=K(P,bt,oe,de,ue),ze.promise)}function Ee(y){var de=U||D(y,"disableForReducedMotion",Boolean),ue=D(y,"zIndex",Number);if(de&&Ie)return m(function(be){be()});N&&ze?P=ze.canvas:N&&!P&&(P=V(ue),document.body.appendChild(P)),B&&!ye&&oe(P);var W={width:P.width,height:P.height};he&&!ye&&he.init(P),ye=!0,he&&(P.__confetti_initialized=!0);function q(){if(he){var be={getBoundingClientRect:function(){if(!N)return P.getBoundingClientRect()}};oe(be),he.postMessage({resize:{width:be.width,height:be.height}});return}W.width=W.height=null}function Y(){ze=null,B&&(H=!1,d.removeEventListener("resize",q)),N&&P&&(document.body.contains(P)&&document.body.removeChild(P),P=null,ye=!1)}return B&&!H&&(H=!0,d.addEventListener("resize",q,!1)),he?he.fire(y,W,Y):qe(y,W,Y)}return Ee.reset=function(){he&&he.reset(),ze&&ze.reset()},Ee}var xe;function je(){return xe||(xe=_(null,{useWorker:!0,resize:!0})),xe}function re(P,w,N,B,H,U,X){var he=new Path2D(P),oe=new Path2D;oe.addPath(he,new DOMMatrix(w));var ye=new Path2D;return ye.addPath(oe,new DOMMatrix([Math.cos(X)*H,Math.sin(X)*H,-Math.sin(X)*U,Math.cos(X)*U,N,B])),ye}function fe(P){if(!f)throw new Error("path confetti are not supported in this browser");var w,N;typeof P=="string"?w=P:(w=P.path,N=P.matrix);var B=new Path2D(w),H=document.createElement("canvas"),U=H.getContext("2d");if(!N){for(var X=1e3,he=X,oe=X,ye=0,Ie=0,ze,qe,Ee=0;Ee<X;Ee+=2)for(var y=0;y<X;y+=2)U.isPointInPath(B,Ee,y,"nonzero")&&(he=Math.min(he,Ee),oe=Math.min(oe,y),ye=Math.max(ye,Ee),Ie=Math.max(Ie,y));ze=ye-he,qe=Ie-oe;var de=10,ue=Math.min(de/ze,de/qe);N=[ue,0,0,ue,-Math.round(ze/2+he)*ue,-Math.round(qe/2+oe)*ue]}return{type:"path",path:w,matrix:N}}function ie(P){var w,N=1,B="#000000",H='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof P=="string"?w=P:(w=P.text,N="scalar"in P?P.scalar:N,H="fontFamily"in P?P.fontFamily:H,B="color"in P?P.color:B);var U=10*N,X=""+U+"px "+H,he=new OffscreenCanvas(U,U),oe=he.getContext("2d");oe.font=X;var ye=oe.measureText(w),Ie=Math.ceil(ye.actualBoundingBoxRight+ye.actualBoundingBoxLeft),ze=Math.ceil(ye.actualBoundingBoxAscent+ye.actualBoundingBoxDescent),qe=2,Ee=ye.actualBoundingBoxLeft+qe,y=ye.actualBoundingBoxAscent+qe;Ie+=qe+qe,ze+=qe+qe,he=new OffscreenCanvas(Ie,ze),oe=he.getContext("2d"),oe.font=X,oe.fillStyle=B,oe.fillText(w,Ee,y);var de=1/N;return{type:"bitmap",bitmap:he.transferToImageBitmap(),matrix:[de,0,0,de,-Ie*de/2,-ze*de/2]}}o.exports=function(){return je().apply(this,arguments)},o.exports.reset=function(){je().reset()},o.exports.create=_,o.exports.shapeFromPath=fe,o.exports.shapeFromText=ie})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),Ga,!1);const pc=Ga.exports;Ga.exports.create;const lf=()=>(L.useEffect(()=>{const d=Date.now()+1e3,v={startVelocity:30,spread:360,ticks:90,zIndex:99,colors:["#60a5fa","#5eead4","#a78bfa","#fde047","#f9fafb"]};function p(f,x){return Math.random()*(x-f)+f}const c=window.setInterval(()=>{const f=d-Date.now();if(f<=0)return clearInterval(c);const x=50*(f/1e3);pc({...v,particleCount:x,origin:{x:p(.1,.3),y:Math.random()-.2}}),pc({...v,particleCount:x,origin:{x:p(.7,.9),y:Math.random()-.2}})},250);return()=>{clearInterval(c),pc.reset()}},[]),null),cf=a=>{const d=Math.round(a*100);return d>85?"Mastered":d>65?"Proficient":d>40?"Familiar":d>15?"Learning":"Novice"},Ba=({deck:a,onSessionEnd:d,onItemReviewed:o,onUpdateLastOpened:v,sessionKeySuffix:p="",seriesId:c})=>{const[f,x]=L.useState([]),[g,m]=L.useState([]),[T,S]=L.useState(0),[E,k]=L.useState(0),[C,b]=L.useState(!1),[D,I]=L.useState(null),[O,z]=L.useState(!1),[M,R]=L.useState(!1),{hapticsEnabled:G}=Dc(),{addToast:Q}=vr(),ne=L.useMemo(()=>a.id==="general-study-deck",[a.id]),V=`session_deck_${a.id}${p}`,ee=L.useMemo(()=>({reviewQueue:f,currentIndex:T}),[f,T]);L.useEffect(()=>{v(a.id)},[a.id]),L.useEffect(()=>{(async()=>{const X=ne||p==="_cram"||p==="_flip";if(O&&!X)return;if(X){const oe=a.type===Ge.Flashcard?a.cards:a.questions;x(oe),S(0),k(0),z(!0);return}let he=!1;try{const oe=await nm(V);oe&&oe.reviewQueue&&oe.reviewQueue.length>0&&typeof oe.currentIndex=="number"?(x(oe.reviewQueue),S(oe.currentIndex),k(oe.currentIndex),he=!0):oe&&await vc(V)}catch(oe){console.error("Failed to load saved session from DB",oe)}if(!he){const oe=new Date;oe.setHours(23,59,59,999);const Ie=(a.type===Ge.Quiz?a.questions:a.cards).filter(ze=>!ze.suspended&&new Date(ze.dueDate)<=oe).sort(()=>Math.random()-.5);x(Ie),S(0),k(0)}z(!0)})()},[a,a.type,p,ne,V,O]),L.useEffect(()=>{(async()=>{if(!ne&&p===""&&O&&T<f.length)try{await rm(V,ee)}catch(he){console.error("Could not save session state to DB",he),Q("Could not save session progress. It may be lost on refresh.","error")}})()},[ee,ne,O,V,T,f.length,p,Q]);const ae=L.useMemo(()=>f[E],[f,E]),$=E<T,K=E===T,_=ae&&"questionText"in ae&&a.type===Ge.Quiz,xe=D!==null,je=ae?ae.originalDeckName:void 0,re=L.useCallback(U=>{if(!(!K||xe)&&(I(U),G&&"vibrate"in navigator)){const X=(ae==null?void 0:ae.correctAnswerId)===U;navigator.vibrate(X?50:[100,50,100])}},[K,xe,ae,G]),fe=L.useCallback(()=>{b(!1),I(null);const U=T+1;U<=f.length&&(S(U),k(U)),U>=f.length&&!ne&&p===""&&vc(V).catch(he=>console.error("Failed to delete session state",he))},[T,f.length,ne,V,p]),ie=L.useCallback(async U=>{if(!ae||!K||M)return;if(p==="_cram"){R(!0),fe(),R(!1);return}R(!0),G&&"vibrate"in navigator&&navigator.vibrate(20);const he=Jr(ae);let oe=Hm(ae,U);const ye=oe.masteryLevel||0;(oe.lapses||0)>=8&&!ae.suspended&&(oe={...oe,suspended:!0},Q("This item is proving difficult. It has been automatically suspended to let you focus on other material.","info"));const Ie=Math.round(he*100),ze=Math.round(ye*100);Ie<=85&&ze>85&&Q("Item Mastered!","success"),m(qe=>[...qe,{oldItem:ae,newItem:oe,rating:U}]);try{const qe=ae.originalDeckId||a.id;await o(qe,oe,U,c)}catch(qe){console.error("Failed to save review:",qe),Q("Failed to save review. Your progress for this card may not be saved.","error")}finally{x(qe=>qe.map((Ee,y)=>y===T?oe:Ee)),setTimeout(()=>{fe(),R(!1)},800)}},[ae,K,M,G,fe,a.id,o,Q,c,T,p]),P=L.useCallback(async()=>{if(!ae||!K||M)return;R(!0);const U={...ae,suspended:!0};m(X=>[...X,{oldItem:ae,newItem:U,rating:null}]);try{const X=ae.originalDeckId||a.id;await o(X,U,null,c),Q("Card suspended for future sessions.","info")}catch(X){console.error("Failed to suspend card:",X),Q("Failed to save suspended state. Please try again.","error")}finally{setTimeout(()=>{fe(),R(!1)},300)}},[ae,K,M,Q,fe,a.id,o,c]),w=L.useCallback(()=>{E>0&&k(U=>U-1)},[E]),N=L.useCallback(()=>{E<T&&k(U=>U+1)},[E,T]);if(L.useEffect(()=>{const U=X=>{if(!(X.target instanceof HTMLInputElement||X.target instanceof HTMLTextAreaElement)){if(X.key==="ArrowLeft"){E>0&&(X.preventDefault(),w());return}if(X.key==="ArrowRight"){E<T&&(X.preventDefault(),N());return}!K||M||(_&&xe?(X.key==="1"&&ie(ct.Again),X.key==="2"&&ie(ct.Hard),X.key==="3"&&ie(ct.Good),X.key==="4"&&ie(ct.Easy)):_||(C?(X.key==="1"&&ie(ct.Again),X.key==="2"&&ie(ct.Hard),X.key==="3"&&ie(ct.Good),X.key==="4"&&ie(ct.Easy)):X.code==="Space"&&(X.preventDefault(),b(!0))))}};return window.addEventListener("keydown",U),()=>window.removeEventListener("keydown",U)},[C,xe,_,K,M,ie,w,N,E,T]),!O)return r.jsx("div",{className:"text-center p-8",children:r.jsx("p",{className:"text-text-muted",children:"Initializing session..."})});if(f.length===0)return r.jsxs("div",{className:"text-center p-8",children:[r.jsx("h2",{className:"text-2xl font-bold",children:"All caught up!"}),r.jsx("p",{className:"text-text-muted mt-2",children:ne?"There are no quiz questions due for review across all your decks.":"There are no items due for review in this deck."}),r.jsx(ke,{onClick:()=>d(a.id,c),className:"mt-6",children:"Back to Decks"})]});if(T>=f.length){if(p==="_cram")return r.jsxs("div",{className:"text-center p-8 animate-fade-in relative",children:[r.jsx(lf,{}),r.jsx("h2",{className:"text-2xl font-bold text-green-500",children:"Cram Session Complete!"}),r.jsxs("p",{className:"text-text-muted mt-2",children:["You've reviewed all ",f.length," items in this deck."]}),r.jsx(ke,{onClick:()=>d(a.id,c),className:"mt-8",children:"Finish Session"})]});const U=new Date;U.setHours(0,0,0,0);const X=new Date(U);X.setDate(U.getDate()+1);const he=new Date(U);he.setDate(U.getDate()+7);let oe=0,ye=0;g.forEach(({newItem:y})=>{if(y.suspended)return;const de=new Date(y.dueDate);de.getTime()>U.getTime()&&de.getTime()<=X.getTime()&&oe++,de.getTime()>X.getTime()&&de.getTime()<=he.getTime()&&ye++});const Ie={};g.forEach(({oldItem:y,newItem:de,rating:ue})=>{if(ue!==null){const W=Jr(y),q=de.masteryLevel||0,Y=cf(W),be=cf(q);if(Y!==be){const Ne=`${Y}  ${be}`;Ie[Ne]=(Ie[Ne]||0)+1}}});const ze=Object.entries(Ie).sort(([,y],[,de])=>de-y),qe=Math.max(...Object.values(Ie),1),Ee=g.filter(y=>y.rating===ct.Again||y.rating===ct.Hard).sort((y,de)=>(y.rating??5)-(de.rating??5)).slice(0,5).map(y=>y.newItem);return r.jsxs("div",{className:"text-center p-8 animate-fade-in relative",children:[r.jsx(lf,{}),r.jsx("h2",{className:"text-2xl font-bold text-green-500",children:"Congratulations!"}),r.jsx("p",{className:"text-text-muted mt-2",children:"You've completed this study session."}),r.jsxs("div",{className:"mt-6 bg-surface rounded-lg p-4 max-w-sm mx-auto space-y-2 border border-border",children:[r.jsxs("div",{className:"flex justify-between items-center text-text",children:[r.jsx("span",{children:"Due tomorrow:"}),r.jsxs("span",{className:"font-bold",children:[oe," items"]})]}),r.jsxs("div",{className:"flex justify-between items-center text-text",children:[r.jsx("span",{children:"Due in the next 7 days:"}),r.jsxs("span",{className:"font-bold",children:[ye," items"]})]})]}),ze.length>0&&r.jsxs("div",{className:"mt-6 bg-surface rounded-lg p-4 max-w-sm mx-auto space-y-3 border border-border",children:[r.jsxs("h4",{className:"font-bold text-text text-left flex items-center gap-2",children:[r.jsx(le,{name:"trending-up",className:"w-5 h-5"}),"Session Impact"]}),r.jsx("ul",{className:"text-left text-sm space-y-3",children:ze.map(([y,de])=>r.jsxs("li",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1 text-xs text-text-muted",children:[r.jsx("span",{className:"font-medium",children:y}),r.jsxs("span",{className:"font-semibold",children:[de," item",de>1?"s":""]})]}),r.jsx("div",{className:"w-full bg-border/30 rounded-full h-2",children:r.jsx("div",{className:"bg-primary h-2 rounded-full transition-all duration-500",style:{width:`${de/qe*100}%`}})})]},y))})]}),Ee.length>0&&r.jsxs("div",{className:"mt-6 bg-orange-500/10 rounded-lg p-4 max-w-sm mx-auto space-y-3 border border-orange-500/20",children:[r.jsxs("h4",{className:"font-bold text-orange-800 dark:text-orange-200 text-left flex items-center gap-2",children:[r.jsx(le,{name:"zap",className:"w-5 h-5"}),"Challenging Items"]}),r.jsx("ul",{className:"text-left text-sm space-y-2",children:Ee.map(y=>{const de="questionText"in y,ue=(de?y.questionText:y.front).replace(/<[^>]+>/g,"").trim();let W;if(de){const q=y,Y=q.options.find(be=>be.id===q.correctAnswerId);W=((Y==null?void 0:Y.text)??"N/A").replace(/<[^>]+>/g,"").trim()}else W=y.back.replace(/<[^>]+>/g,"").trim();return r.jsxs("li",{className:"text-orange-700 dark:text-orange-300 border-l-2 border-orange-400 pl-3",children:[r.jsx("p",{className:"font-semibold break-words",children:ue}),r.jsxs("p",{className:"text-sm opacity-80 pl-2 break-words",children:[r.jsx("span",{className:"font-semibold mr-1",children:"Answer:"})," ",W]})]},y.id)})})]}),r.jsx(ke,{onClick:()=>d(a.id,c),className:"mt-8",children:"Finish Session"})]})}const B=(C||xe)&&K,H=f.length>1;return r.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 flex flex-col h-full overflow-x-hidden",children:[r.jsx(Tc,{current:T+1,total:f.length}),r.jsx("div",{className:"flex-grow flex flex-col items-center justify-center my-4 w-full",children:ae&&r.jsx("div",{className:"w-full relative animate-fade-in",children:_?r.jsx(dp,{question:ae,selectedAnswerId:$?ae.correctAnswerId:D,onSelectAnswer:re,deckName:je}):r.jsx(up,{card:ae,isFlipped:C||$})},E)}),r.jsxs("div",{className:"flex-shrink-0 mt-4 flex flex-col items-center justify-center space-y-4 min-h-[10rem]",children:[r.jsx("div",{className:"w-full flex-grow flex items-center justify-center",children:$?r.jsxs("div",{className:"text-center animate-fade-in",children:[r.jsx(ke,{onClick:()=>k(T),variant:"primary",className:"text-lg py-3",children:"Return to Current Card"}),r.jsx("div",{className:"text-xs mt-2 font-semibold text-yellow-600 dark:text-yellow-400",children:"(Reviewing Past Item)"})]}):B?r.jsxs("div",{className:"space-y-4 animate-fade-in w-full",children:[r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs(ke,{onClick:()=>ie(ct.Again),className:"bg-red-600 hover:bg-red-700 focus:ring-red-500 py-3 text-base text-white",disabled:M,children:["Again ",r.jsx("span",{className:"hidden sm:inline",children:"(1)"})]}),r.jsxs(ke,{onClick:()=>ie(ct.Hard),className:"bg-orange-500 hover:bg-orange-600 focus:ring-orange-400 py-3 text-base text-white",disabled:M,children:["Hard ",r.jsx("span",{className:"hidden sm:inline",children:"(2)"})]}),r.jsxs(ke,{onClick:()=>ie(ct.Good),className:"bg-green-600 hover:bg-green-700 focus:ring-green-500 py-3 text-base text-white",disabled:M,children:["Good ",r.jsx("span",{className:"hidden sm:inline",children:"(3)"})]}),r.jsxs(ke,{onClick:()=>ie(ct.Easy),className:"bg-blue-600 hover:bg-blue-700 focus:ring-blue-500 py-3 text-base text-white",disabled:M,children:["Easy ",r.jsx("span",{className:"hidden sm:inline",children:"(4)"})]})]}),p!=="_cram"&&r.jsx("div",{className:"text-center",children:r.jsxs(ke,{variant:"ghost",onClick:P,className:"text-xs",disabled:M,children:[r.jsx(le,{name:"eye-off",className:"w-4 h-4 mr-1"})," Suspend this card"]})})]}):!_&&K&&r.jsxs(ke,{onClick:()=>b(!0),variant:"primary",className:"w-full max-w-md text-lg py-3 animate-fade-in mx-auto flex items-center justify-center",children:["Show Answer ",r.jsx("span",{className:"hidden sm:inline ml-2",children:"(Space)"})]})}),H&&r.jsxs("div",{className:"flex justify-center items-center w-full max-w-xs gap-4 animate-fade-in h-12",children:[r.jsx(ke,{variant:"ghost",onClick:w,disabled:E===0,className:"p-3 rounded-full disabled:opacity-30","aria-label":"Previous item",children:r.jsx(le,{name:"chevron-left",className:"w-8 h-8"})}),r.jsx("div",{className:"text-center w-28",children:r.jsxs("span",{className:"text-sm text-text-muted",children:["Item ",E+1," of ",f.length]})}),r.jsx(ke,{variant:"ghost",onClick:N,disabled:E>=T,className:"p-3 rounded-full disabled:opacity-30","aria-label":"Next item",children:r.jsx(le,{name:"chevron-left",className:"w-8 h-8 rotate-180"})})]})]})]})},uf=({label:a,checked:d,onChange:o,description:v})=>{const p=$a.useId();return r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"flex flex-col",children:[r.jsx("label",{htmlFor:p,className:"font-medium text-text cursor-pointer",children:a}),v&&r.jsx("span",{id:`${p}-description`,className:"text-sm text-text-muted",children:v})]}),r.jsx("button",{id:p,type:"button",role:"switch","aria-checked":d,"aria-describedby":v?`${p}-description`:void 0,onClick:()=>o(!d),className:`${d?"bg-primary":"bg-border"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2 dark:focus:ring-offset-surface`,children:r.jsx("span",{"aria-hidden":"true",className:`${d?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]})},fp="AIzaSyCxQD2rTQvfarBU5QQLwjHdRTJ-jq3GFMY",hp="727276393482-almsrnelboiul2343hvs643ok8onqtna.apps.googleusercontent.com",mp="https://www.googleapis.com/discovery/v1/apis/drive/v3/rest",pp="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email";let go=!1,xo=!1,Ha=null,fo=[],ho=[];const kc=(a,d)=>{fo.forEach(o=>o(a,d))},gp=a=>{ho.forEach(d=>d(a))},xp=async a=>{if(a.error){localStorage.removeItem("gdrive-previously-signed-in"),kc(!1);return}localStorage.setItem("gdrive-previously-signed-in","true"),gapi.client.setToken({access_token:a.access_token});const d=await Sp(a.access_token);kc(!0,d)};let lo=null;const yp=()=>lo||(lo=new Promise((a,d)=>{const o=()=>{go&&xo&&(gp(!0),a())},v=()=>{gapi.load("client",async()=>{try{await gapi.client.init({apiKey:fp,discoveryDocs:[mp]}),go=!0,o()}catch(x){console.error("Error initializing GAPI client",x),d(x)}})},p=()=>{try{Ha=google.accounts.oauth2.initTokenClient({client_id:hp,scope:pp,callback:xp}),xo=!0,o()}catch(x){console.error("Error initializing GIS client",x),d(x)}},c=document.createElement("script");c.src="https://apis.google.com/js/api.js",c.async=!0,c.defer=!0,c.onload=v,c.onerror=()=>d(new Error("Failed to load GAPI script")),document.body.appendChild(c);const f=document.createElement("script");f.src="https://accounts.google.com/gsi/client",f.async=!0,f.defer=!0,f.onload=p,f.onerror=()=>d(new Error("Failed to load GIS script")),document.body.appendChild(f)}),lo),vp=a=>(ho.push(a),a(xo&&go),()=>{ho=ho.filter(d=>d!==a)}),wp=a=>(fo.push(a),()=>{fo=fo.filter(d=>d!==a)}),bp=()=>{if(!xo||!go||!Ha){console.error("Google services not ready for sign-in.");return}Ha.requestAccessToken({prompt:"consent"})},kp=()=>{Ha&&Ha.requestAccessToken({prompt:"none"})},jp=()=>{const a=gapi.client.getToken();gapi.client.setToken(null),localStorage.removeItem("gdrive-previously-signed-in"),kc(!1),a!==null&&google.accounts.oauth2.revoke(a.access_token,()=>{console.log("Google token revoked.")})},Sp=async a=>{const d=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!d.ok)throw new Error("Failed to fetch user profile.");return d.json()},Np=async()=>{const[a,d,o]=await Promise.all([Nc(),_c(),Ec()]);if(a.length===0&&d.length===0&&o.length===0)throw new Error("There is no data to back up.");const p=JSON.stringify({version:3,decks:a,folders:d,deckSeries:o}),x={name:`cogniflow-backup-${yf()}.json`,parents:["appDataFolder"]},g="-------314159265358979323846",m=`\r
--${g}\r
`,T=`\r
--${g}--`,S=m+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(x)+m+`Content-Type: application/json; charset=UTF-8\r
\r
`+p+T,E=await gapi.client.request({path:"https://www.googleapis.com/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart",fields:"id, name, modifiedTime"},headers:{"Content-Type":`multipart/related; boundary=${g}`},body:S});if(E.status!==200)throw new Error("Failed to upload backup file.");return E.result},_p=async()=>(await gapi.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, name, modifiedTime)",orderBy:"modifiedTime desc"})).result.files,Ep=async a=>{const d=await gapi.client.drive.files.get({fileId:a,alt:"media"});if(d.status!==200)throw new Error("Failed to download backup file.");const o=d.result;if(typeof o=="object"&&o!==null&&"version"in o&&Array.isArray(o.decks)){const v=o.folders||[],p=(Array.isArray(o.deckSeries)?o.deckSeries:[]).filter(c=>c&&typeof c.id=="string"&&typeof c.name=="string").map(c=>{if(Array.isArray(c.levels))return c.levels.forEach(f=>{Array.isArray(f.deckIds)||(f.deckIds=[])}),c;if(Array.isArray(c.deckIds)){const f={...c};return f.levels=[{title:"Decks",deckIds:f.deckIds}],delete f.deckIds,f}return{...c,levels:[]}});return{decks:o.decks,folders:v,deckSeries:p}}if(Array.isArray(o))return{decks:o.map(p=>(p.type||(Array.isArray(p.cards)?p.type=Ge.Flashcard:Array.isArray(p.questions)&&(p.type=Ge.Quiz)),p)),folders:[],deckSeries:[]};throw new Error("Backup file content is not a valid format.")},Cp=async a=>{var d,o;try{await gapi.client.drive.files.delete({fileId:a})}catch(v){console.error("Failed to delete file from Google Drive",v);const p=((o=(d=v==null?void 0:v.result)==null?void 0:d.error)==null?void 0:o.message)||"Unknown Google Drive API error.";throw new Error(`Failed to delete backup: ${p}`)}},gc="cogniflow-themeId",Cs=[{id:"system",name:"System",isDark:!1,metaColor:"#f9fafb",metaColorDark:"#111827",palette:{background:"249 250 251",surface:"255 255 255",primary:"37 99 235",text:"17 24 39"},paletteDark:{background:"17 24 39",surface:"31 41 55",primary:"37 99 235",text:"243 244 246"}},{id:"light",name:"Light",isDark:!1,metaColor:"#f9fafb",palette:{background:"249 250 251",surface:"255 255 255",primary:"37 99 235",text:"17 24 39"}},{id:"rose",name:"Rose",isDark:!1,metaColor:"#fff1f2",palette:{background:"255 241 242",surface:"254 226 226",primary:"225 29 72",text:"136 25 55"}},{id:"matcha",name:"Matcha",isDark:!1,metaColor:"#f0fdf4",palette:{background:"240 253 244",surface:"220 252 231",primary:"22 163 74",text:"21 94 53"}},{id:"latte",name:"Latte",isDark:!1,metaColor:"#fffbeb",palette:{background:"255 251 235",surface:"254 243 199",primary:"217 119 6",text:"113 63 18"}},{id:"sky",name:"Sky",isDark:!1,metaColor:"#f0f9ff",palette:{background:"240 249 255",surface:"224 242 254",primary:"14 165 233",text:"7 89 133"}},{id:"sunrise",name:"Sunrise",isDark:!1,metaColor:"#fffbeb",palette:{background:"255 251 235",surface:"254 243 199",primary:"249 115 22",text:"124 45 18"}},{id:"lavender",name:"Lavender",isDark:!1,metaColor:"#f5f3ff",palette:{background:"245 243 255",surface:"237 233 254",primary:"124 58 237",text:"76 29 149"}},{id:"terracotta",name:"Terracotta",isDark:!1,metaColor:"#faf3e8",palette:{background:"250 243 232",surface:"245 233 218",primary:"226 114 91",text:"93 64 55"}},{id:"alabaster",name:"Alabaster",isDark:!1,metaColor:"#fcfcfc",palette:{background:"252 252 252",surface:"255 255 255",primary:"96 165 250",text:"50 50 50"}},{id:"dark",name:"Dark",isDark:!0,metaColor:"#111827",palette:{background:"17 24 39",surface:"31 41 55",primary:"37 99 235",text:"243 244 246"}},{id:"espresso",name:"Espresso",isDark:!0,metaColor:"#211713",palette:{background:"33 23 19",surface:"58 45 39",primary:"196 154 108",text:"224 213 208"}},{id:"midnight",name:"Midnight",isDark:!0,metaColor:"#0c0d11",palette:{background:"12 13 17",surface:"26 27 38",primary:"133 137 230",text:"200 201 215"}}],Ef=L.createContext(void 0),df=a=>{let d=Cs.find(f=>f.id===a);d||(d=Cs[0]);const o=window.document.documentElement,v=document.querySelector('meta[name="theme-color"]');let p,c;d.id==="system"?(p=window.matchMedia("(prefers-color-scheme: dark)").matches,c=p?d.metaColorDark:d.metaColor):(p=d.isDark,c=d.metaColor),Cs.forEach(f=>{f.id!=="system"&&o.classList.remove(`theme-${f.id}`)}),o.classList.remove("theme-dark","theme-light"),d.id!=="system"&&o.classList.add(`theme-${d.id}`),o.classList.toggle("dark",p),v&&c&&v.setAttribute("content",c)},Dp=({children:a})=>{const[d,o]=L.useState(()=>{try{const c=localStorage.getItem(gc);return Cs.some(f=>f.id===c)?c:"system"}catch(c){return console.error("Could not access localStorage. Defaulting to 'system'.",c),"system"}});L.useEffect(()=>{try{localStorage.setItem(gc,d)}catch(c){console.error("Could not set theme in localStorage.",c)}df(d)},[d]),L.useEffect(()=>{const c=window.matchMedia("(prefers-color-scheme: dark)"),f=()=>{let x="system";try{x=localStorage.getItem(gc)||"system"}catch{}x==="system"&&df("system")};return c.addEventListener("change",f),()=>c.removeEventListener("change",f)},[]);const v=L.useCallback(c=>{o(c)},[]),p=Cs.find(c=>c.id===d)||Cs[0];return r.jsx(Ef.Provider,{value:{themeId:d,setThemeById:v,currentTheme:p},children:a})},Tp=()=>{const a=L.useContext(Ef);if(a===void 0)throw new Error("useTheme must be used within a ThemeProvider");return a},co=({id:a,title:d,children:o,openSection:v,setOpenSection:p,isDanger:c=!1})=>{const f=v===a,x=c?"bg-red-900/20 text-red-400 dark:text-red-300":"bg-surface",g=c?"border border-red-500/30":"border border-border";return r.jsxs("div",{className:`rounded-lg shadow-md overflow-hidden ${g}`,children:[r.jsxs("button",{onClick:()=>p(f?null:a),className:`w-full flex justify-between items-center text-left p-6 ${x}`,"aria-expanded":f,children:[r.jsx("h3",{className:"text-xl font-semibold",children:d}),r.jsx(le,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${f?"":"-rotate-90"} text-text-muted`})]}),f&&r.jsx("div",{className:`p-6 pt-0 animate-fade-in ${c?"bg-red-900/10":"bg-surface"}`,children:r.jsx("div",{className:"pt-6 border-t border-border",children:o})})]})},Ip=({onExport:a,onRestore:d,onRestoreData:o,onResetProgress:v,onFactoryReset:p})=>{var _,xe,je;const{disableAnimations:c,setDisableAnimations:f,hapticsEnabled:x,setHapticsEnabled:g}=Dc(),{addToast:m}=vr(),{themeId:T,setThemeById:S}=Tp(),[E,k]=L.useState("data"),[C,b]=L.useState({isReady:!1,isSignedIn:!1,isProcessing:!1,user:null}),[D,I]=L.useState([]),[O,z]=L.useState(!1),M=L.useCallback(async()=>{z(!0);try{const re=await _p();I(re)}catch(re){m(`Could not list files: ${re.message||"Unknown error"}`,"error"),I([])}finally{z(!1)}},[m]);L.useEffect(()=>{let re=!0;(async()=>{try{await yp(),re&&localStorage.getItem("gdrive-previously-signed-in")==="true"&&kp()}catch(w){re&&(console.error("Failed to initialize Google Drive service",w),m("Could not initialize Google Drive.","error"),b(N=>({...N,isReady:!1,isProcessing:!1})))}})();const ie=vp(w=>{re&&b(N=>({...N,isReady:w}))}),P=wp((w,N)=>{re&&(b(B=>({...B,isSignedIn:w,user:N,isProcessing:!1})),w?M():I([]))});return()=>{re=!1,ie(),P()}},[m,M]);const R=()=>{b(re=>({...re,isProcessing:!0})),bp()},G=()=>{jp()},Q=async()=>{b(re=>({...re,isProcessing:!0}));try{const re=await Np();m("Successfully backed up data to Google Drive.","success"),I(fe=>[re,...fe])}catch(re){console.error("Google Drive Backup failed",re),m(`Backup failed: ${re.message||"Unknown error"}`,"error")}finally{b(re=>({...re,isProcessing:!1}))}},ne=async re=>{b(fe=>({...fe,isProcessing:!0}));try{const fe=await Ep(re);await o(fe)}catch(fe){m(`Restore failed: ${fe.message||"Unknown error"}`,"error")}finally{b(fe=>({...fe,isProcessing:!1}))}},V=re=>{window.confirm(`Are you sure you want to restore from "${re.name}"? This will merge and overwrite existing data.`)&&ne(re.id)},ee=async re=>{if(window.confirm(`Are you sure you want to permanently delete the backup "${re.name}"? This action cannot be undone.`)){b(fe=>({...fe,isProcessing:!0}));try{await Cp(re.id),m(`Backup "${re.name}" deleted.`,"success"),I(fe=>fe.filter(ie=>ie.id!==re.id))}catch(fe){console.error("Google Drive Delete failed",fe),m(`Delete failed: ${fe.message||"Unknown error"}`,"error")}finally{b(fe=>({...fe,isProcessing:!1}))}}},ae=re=>{if(!navigator.serviceWorker||!navigator.serviceWorker.controller){m("Service worker is not active. Please reload the page and try again.","error");return}const fe={type:re==="APP"?"CLEAR_APP_CACHE":"CLEAR_CDN_CACHE"};navigator.serviceWorker.controller.postMessage(fe),m(`${re} cache cleared. Please reload the page to apply changes.`,"success")},$=()=>{if(!navigator.serviceWorker||!navigator.serviceWorker.controller){m("Service worker is not active. Please reload the page and try again.","error");return}navigator.serviceWorker.controller.postMessage({type:"CLEAR_APP_CACHE"}),navigator.serviceWorker.controller.postMessage({type:"CLEAR_CDN_CACHE"}),m("All caches cleared. The application will now reload.","info"),setTimeout(()=>{window.location.reload()},1500)},K=L.useMemo(()=>window.matchMedia("(prefers-color-scheme: dark)").matches,[]);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-6",children:[r.jsx("h2",{className:"text-3xl font-bold mb-6 text-text border-b border-border pb-4",children:"Settings"}),r.jsx(co,{id:"data",title:"Data Management",openSection:E,setOpenSection:k,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{id:"settings-local-backup",children:[r.jsx("h4",{className:"font-semibold text-text",children:"Local File Backup"}),r.jsx("p",{className:"text-text-muted my-2",children:"Backup all your decks and study progress to a JSON file on your device."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs(ke,{onClick:a,variant:"secondary",className:"w-full sm:w-auto",children:[r.jsx(le,{name:"download",className:"w-5 h-5 mr-2"}),"Backup to File"]}),r.jsxs(ke,{onClick:d,variant:"secondary",className:"w-full sm:w-auto",children:[r.jsx(le,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),"Restore from File"]})]})]}),r.jsxs("div",{id:"google-drive-backup",className:"border-t border-border pt-6",children:[r.jsx("h4",{className:"font-semibold text-text",children:"Google Drive Cloud Backup"}),r.jsx("p",{className:"text-text-muted my-2",children:"Securely back up and restore your data to a private folder in your Google Drive."}),C.isReady?C.isSignedIn?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("img",{src:(_=C.user)==null?void 0:_.picture,alt:"User profile",className:"w-10 h-10 rounded-full"}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-text",children:(xe=C.user)==null?void 0:xe.name}),r.jsx("p",{className:"text-sm text-text-muted",children:(je=C.user)==null?void 0:je.email})]}),r.jsx(ke,{variant:"ghost",onClick:G,className:"ml-auto",children:"Sign Out"})]}),r.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:r.jsxs(ke,{onClick:Q,variant:"secondary",className:"w-full sm:w-auto",disabled:C.isProcessing,children:[r.jsx(le,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),C.isProcessing?"Backing up...":"Backup to Drive Now"]})}),r.jsxs("div",{className:"pt-4 mt-4 border-t border-border/50",children:[r.jsx("h5",{className:"font-semibold text-text mb-2",children:"Available Backups"}),O?r.jsxs("div",{className:"flex items-center text-text-muted",children:[r.jsx(Vn,{size:"sm"}),r.jsx("span",{className:"ml-2",children:"Loading backups..."})]}):D.length>0?r.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto border border-border rounded-md p-2",children:D.map(re=>r.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-border/20",children:[r.jsxs("div",{className:"min-w-0 mr-2",children:[r.jsx("p",{className:"font-medium text-sm text-text truncate",title:re.name,children:re.name}),r.jsx("p",{className:"text-xs text-text-muted",children:Jh(re.modifiedTime)})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[r.jsx(ke,{variant:"ghost",size:"sm",onClick:()=>V(re),disabled:C.isProcessing,children:"Restore"}),r.jsx(ke,{variant:"ghost",size:"sm",className:"text-red-500",onClick:()=>ee(re),disabled:C.isProcessing,children:"Delete"})]})]},re.id))}):r.jsx("p",{className:"text-text-muted text-sm",children:"No backups found in your Google Drive."}),r.jsxs(ke,{variant:"ghost",size:"sm",className:"mt-2",onClick:M,disabled:O,children:[r.jsx(le,{name:"refresh-ccw",className:`w-4 h-4 mr-2 ${O?"animate-spin":""}`})," Refresh list"]})]})]}):r.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:r.jsxs(ke,{onClick:R,variant:"secondary",disabled:C.isProcessing,children:[r.jsx(le,{name:"google",className:"w-5 h-5 mr-2"}),C.isProcessing?"Signing in...":"Sign in with Google"]})}):r.jsxs("div",{className:"h-10 flex items-center",children:[r.jsx(Vn,{size:"sm"}),r.jsx("span",{className:"ml-2 text-text-muted",children:"Initializing Google Drive..."})]})]})]})}),r.jsx(co,{id:"cache-management",title:"Cache Management",openSection:E,setOpenSection:k,children:r.jsxs("div",{id:"settings-cache-management",className:"space-y-4",children:[r.jsx("p",{className:"text-text-muted",children:'If you are experiencing issues, clearing the cache can help. "Hard Reload" clears all caches and reloads the application, which is the strongest reset option.'}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsxs(ke,{variant:"secondary",onClick:()=>ae("APP"),children:[r.jsx(le,{name:"broom",className:"w-5 h-5 mr-2"})," Clear App Cache"]}),r.jsxs(ke,{variant:"secondary",onClick:()=>ae("CDN"),children:[r.jsx(le,{name:"broom",className:"w-5 h-5 mr-2"})," Clear CDN Cache"]}),r.jsxs(ke,{variant:"danger",onClick:$,children:[r.jsx(le,{name:"refresh-ccw",className:"w-5 h-5 mr-2"})," Hard Reload"]})]})]})}),r.jsxs(co,{id:"appearance",title:"Appearance",openSection:E,setOpenSection:k,children:[r.jsxs("div",{className:"border-b border-border pb-6 mb-6",children:[r.jsx("h4",{className:"font-semibold text-text",children:"Theme"}),r.jsx("p",{className:"text-text-muted my-2",children:`Select a theme to change the application's color scheme. The "System" theme will automatically match your device's light or dark mode.`}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-4 mt-4",children:Cs.map(re=>{const fe=T===re.id,ie=re.id==="system"&&K?re.paletteDark:re.palette;return r.jsxs("button",{onClick:()=>S(re.id),className:`relative p-4 rounded-lg border-2 transition-all duration-200 ${fe?"border-primary ring-2 ring-primary/50":"border-border hover:border-primary/70"}`,"aria-pressed":fe,"aria-label":`Select ${re.name} theme`,children:[fe&&r.jsx(le,{name:"check-circle",className:"absolute top-2 right-2 w-5 h-5 text-primary"}),r.jsxs("div",{className:"flex items-center justify-center gap-1.5 mb-2",children:[r.jsx("div",{className:"w-5 h-5 rounded-full border border-border/50",style:{backgroundColor:`rgb(${ie.background})`}}),r.jsx("div",{className:"w-5 h-5 rounded-full border border-border/50",style:{backgroundColor:`rgb(${ie.surface})`}}),r.jsx("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:`rgb(${ie.primary})`}}),r.jsx("div",{className:"w-5 h-5 rounded-full",style:{backgroundColor:`rgb(${ie.text})`}})]}),r.jsx("p",{className:"text-center text-sm font-medium text-text",children:re.name})]},re.id)})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx(uf,{label:"Disable card flip animation",checked:c,onChange:f,description:"For a faster, no-frills study session."}),r.jsx(uf,{label:"Haptic feedback",checked:x,onChange:g,description:"Provides physical feedback on supported devices."})]})]}),r.jsx(co,{id:"danger-zone",title:"Danger Zone",openSection:E,setOpenSection:k,isDanger:!0,children:r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{id:"settings-reset-progress",children:[r.jsx("h4",{className:"font-semibold text-red-300",children:"Reset Deck Progress"}),r.jsx("p",{className:"text-red-300/80 my-2",children:"This will reset the spaced repetition data (due dates, intervals) for a single deck. The cards themselves will not be deleted."}),r.jsxs(ke,{onClick:v,variant:"danger",children:[r.jsx(le,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Reset Deck Progress..."]})]}),r.jsxs("div",{id:"settings-factory-reset",className:"border-t border-red-500/30 pt-6",children:[r.jsx("h4",{className:"font-semibold text-red-300",children:"Factory Reset"}),r.jsx("p",{className:"text-red-300/80 my-2",children:"This will permanently delete ALL of your data, including decks, folders, series, and settings. This action cannot be undone."}),r.jsxs(ke,{onClick:p,variant:"danger",children:[r.jsx(le,{name:"trash-2",className:"w-5 h-5 mr-2"}),"Factory Reset..."]})]})]})})]})})},Ap=({card:a,onClose:d,onSave:o})=>{const[v,p]=L.useState(""),[c,f]=L.useState(""),{addToast:x}=vr(),g=L.useRef(null);Er(g,!0),L.useEffect(()=>{a&&(p(a.front),f(a.back))},[a]);const m=S=>{if(S.preventDefault(),!v.trim()||!c.trim()){x("Both front and back fields are required.","error");return}o({id:(a==null?void 0:a.id)||"",front:v.trim(),back:c.trim()})},T=S=>{if(S.key==="Tab"){S.preventDefault();const E=S.target,k=E.selectionStart,C=E.selectionEnd;E.value=E.value.substring(0,k)+"	"+E.value.substring(C),E.selectionStart=E.selectionEnd=k+1}};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:g,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Card":"Add New Card"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"card-front",className:"block text-sm font-medium text-text-muted mb-1",children:"Front"}),r.jsx("textarea",{id:"card-front",value:v,onChange:S=>p(S.target.value),onKeyDown:T,rows:5,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter front content (question, term, etc.)"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"card-back",className:"block text-sm font-medium text-text-muted mb-1",children:"Back"}),r.jsx("textarea",{id:"card-back",value:c,onChange:S=>f(S.target.value),onKeyDown:T,rows:5,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter back content (answer, definition, etc.)"})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"submit",variant:"primary",children:a?"Save Changes":"Add Card"})]})]})})})},Mp=a=>{const d=new Date;d.setHours(0,0,0,0);const o=new Date(a);o.setHours(0,0,0,0);const v=o.getTime()-d.getTime(),p=Math.round(v/(1e3*60*60*24)),c=p<=0;let f;return p<0?f="Due":p===0?f="Due today":p===1?f="Due tomorrow":f=`Due in ${p} days`,{text:f,isDue:c}},Op=({cards:a,onCardsChange:d,onAddCard:o,onBulkAdd:v})=>{const[p,c]=L.useState(null),[f,x]=L.useState(!1),[g,m]=L.useState(null),[T,S]=L.useState(!0),E=L.useRef(null),k=(z,M)=>{c(z),M&&(E.current=M.currentTarget),x(!0)},C=()=>{var z;x(!1),(z=E.current)==null||z.focus(),c(null)},b=(z,M)=>{m(z),M&&(E.current=M.currentTarget)},D=()=>{g&&d(a.filter(z=>z.id!==g.id)),m(null)},I=z=>{p?d(a.map(M=>M.id===z.id?{...M,...z}:M)):o(z),C()},O=z=>{d(a.map(M=>M.id===z?{...M,suspended:!1}:M))};return r.jsxs("div",{children:[r.jsx("div",{className:"border-b border-border",children:r.jsxs("button",{onClick:()=>S(!T),className:"w-full flex justify-between items-center text-left p-6","aria-expanded":T,"aria-controls":"card-list-content",children:[r.jsx("h3",{className:"text-xl font-semibold text-text",children:"Cards"}),r.jsx(le,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${T?"":"-rotate-90"} text-text-muted`})]})}),T&&r.jsxs("div",{id:"card-list-content",className:"animate-fade-in",children:[r.jsx("div",{className:"p-6",children:a.length>0?r.jsx("ul",{className:"space-y-4",children:a.map(z=>{const{text:M,isDue:R}=Mp(z.dueDate);return r.jsxs("li",{className:`p-4 rounded-lg flex items-start justify-between transition-all ${z.suspended?"bg-yellow-500/10 opacity-70":"bg-background"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[r.jsxs("p",{className:"text-sm font-medium text-text truncate",children:[r.jsx("strong",{children:"Front:"})," ",z.front.replace(/<[^>]+>/g,"")]}),r.jsxs("p",{className:"text-sm text-text-muted truncate",children:[r.jsx("strong",{children:"Back:"})," ",z.back.replace(/<[^>]+>/g,"")]}),r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx(Jn,{level:Jr(z)}),r.jsx("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:r.jsxs("span",{className:`font-semibold ${R?"text-primary":""}`,children:[r.jsx(le,{name:"zap",className:"w-3 h-3 inline-block mr-1"}),M]})})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[z.suspended?r.jsx(ke,{variant:"ghost",className:"p-2 h-auto text-yellow-600 dark:text-yellow-400",onClick:()=>O(z.id),title:"Unsuspend this card",children:r.jsx(le,{name:"eye",className:"w-4 h-4"})}):r.jsx(ke,{variant:"ghost",className:"p-2 h-auto",onClick:G=>k(z,G),title:"Edit this card",children:r.jsx(le,{name:"edit",className:"w-4 h-4"})}),r.jsx(ke,{variant:"ghost",className:"p-2 h-auto text-text-muted hover:text-red-500",onClick:G=>b(z,G),title:"Delete this card",children:r.jsx(le,{name:"trash-2",className:"w-4 h-4"})})]})]},z.id)})}):r.jsxs("div",{className:"text-center text-text-muted py-8",children:[r.jsx(le,{name:"laptop",className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"This deck has no cards yet."})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-border flex flex-wrap gap-2",children:[r.jsxs(ke,{variant:"secondary",onClick:z=>k(null,z),className:"flex-grow sm:flex-grow-0",children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Add New Card"]}),r.jsxs(ke,{variant:"ghost",onClick:v,className:"flex-grow sm:flex-grow-0",children:[r.jsx(le,{name:"code",className:"w-5 h-5 mr-2"}),"Bulk Add via JSON"]})]})]}),f&&r.jsx(Ap,{card:p,onClose:C,onSave:I}),g&&r.jsx(yo,{isOpen:!!g,onClose:()=>m(null),onConfirm:D,title:"Delete Card",message:"Are you sure you want to delete this card? This action cannot be undone."})]})},Rp=({question:a,onClose:d,onSave:o})=>{const[v,p]=L.useState(""),[c,f]=L.useState(""),[x,g]=L.useState([]),[m,T]=L.useState(""),{addToast:S}=vr(),E=L.useRef(null);Er(E,!0),L.useEffect(()=>{if(a)p(a.questionText),f(a.detailedExplanation),g(a.options.map(I=>({...I}))),T(a.correctAnswerId);else{const I=[{id:crypto.randomUUID(),text:""},{id:crypto.randomUUID(),text:""}];g(I)}},[a]);const k=(I,O)=>{g(x.map(z=>z.id===I?{...z,text:O}:z))},C=()=>{g([...x,{id:crypto.randomUUID(),text:""}])},b=I=>{if(x.length<=2){S("A question must have at least two options.","error");return}g(x.filter(O=>O.id!==I)),m===I&&T("")},D=I=>{if(I.preventDefault(),!v.trim()){S("Question text is required.","error");return}if(x.some(O=>!O.text.trim())){S("All options must have text.","error");return}if(!m){S("You must select a correct answer.","error");return}o({id:a==null?void 0:a.id,questionText:v.trim(),detailedExplanation:c.trim(),options:x,correctAnswerId:m,tags:(a==null?void 0:a.tags)||[]})};return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:E,className:"bg-surface rounded-lg shadow-xl w-full max-w-3xl transform transition-all relative max-h-[90vh] flex flex-col",children:r.jsxs("form",{onSubmit:D,className:"flex flex-col h-full",children:[r.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Question":"Add New Question"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"question-text",className:"block text-sm font-medium text-text-muted mb-1",children:"Question Text"}),r.jsx("textarea",{id:"question-text",value:v,onChange:I=>p(I.target.value),rows:3,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"What is the capital of France?"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Options"}),r.jsx("div",{className:"space-y-2",children:x.map((I,O)=>r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("input",{type:"radio",name:"correct-answer",checked:m===I.id,onChange:()=>T(I.id),className:"h-5 w-5 text-primary bg-border/50 border-border focus:ring-primary","aria-label":`Set option ${O+1} as correct`}),r.jsx("input",{type:"text",value:I.text,onChange:z=>k(I.id,z.target.value),className:"flex-grow p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:`Option ${O+1}`}),r.jsx(ke,{type:"button",variant:"ghost",onClick:()=>b(I.id),className:"p-2 h-auto","aria-label":`Remove option ${O+1}`,children:r.jsx(le,{name:"trash-2",className:"w-4 h-4"})})]},I.id))}),r.jsxs(ke,{type:"button",variant:"ghost",onClick:C,className:"mt-2 text-primary",children:[r.jsx(le,{name:"plus",className:"w-4 h-4 mr-2"}),"Add Option"]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"detailed-explanation",className:"block text-sm font-medium text-text-muted mb-1",children:"Detailed Explanation (Optional)"}),r.jsx("textarea",{id:"detailed-explanation",value:c,onChange:I=>f(I.target.value),rows:4,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Explain why the correct answer is right and others are wrong."})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"submit",variant:"primary",children:a?"Save Changes":"Add Question"})]})]})})})},zp=a=>{const d=new Date;d.setHours(0,0,0,0);const o=new Date(a);o.setHours(0,0,0,0);const v=o.getTime()-d.getTime(),p=Math.round(v/(1e3*60*60*24)),c=p<=0;let f;return p<0?f="Due":p===0?f="Due today":p===1?f="Due tomorrow":f=`Due in ${p} days`,{text:f,isDue:c}},Fp=({questions:a,onQuestionsChange:d,onAddQuestion:o,onBulkAdd:v})=>{const[p,c]=L.useState(null),[f,x]=L.useState(!1),[g,m]=L.useState(null),[T,S]=L.useState(!0),[E,k]=L.useState(null),C=L.useRef(null),b=L.useRef(null);L.useEffect(()=>{const Q=ne=>{b.current&&!b.current.contains(ne.target)&&k(null)};return E&&document.addEventListener("mousedown",Q),()=>{document.removeEventListener("mousedown",Q)}},[E]);const D=(Q,ne)=>{c(Q),ne&&(C.current=ne.currentTarget),x(!0)},I=()=>{var Q;x(!1),(Q=C.current)==null||Q.focus(),c(null)},O=(Q,ne)=>{m(Q),ne&&(C.current=ne.currentTarget)},z=()=>{g&&d(a.filter(Q=>Q.id!==g.id)),m(null)},M=Q=>{if(p&&Q.id)d(a.map(ne=>ne.id===Q.id?{...ne,...Q}:ne));else{const{id:ne,...V}=Q,ee={...V,questionType:"multipleChoice",suspended:!1};o(ee)}I()},R=Q=>{d(a.map(ne=>ne.id===Q?{...ne,suspended:!0}:ne)),k(null)},G=Q=>{d(a.map(ne=>ne.id===Q?{...ne,suspended:!1}:ne)),k(null)};return r.jsxs("div",{children:[r.jsx("div",{className:"border-b border-border",children:r.jsxs("button",{onClick:()=>S(!T),className:"w-full flex justify-between items-center text-left p-6","aria-expanded":T,"aria-controls":"question-list-content",children:[r.jsx("h3",{className:"text-xl font-semibold text-text",children:"Questions"}),r.jsx(le,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${T?"":"-rotate-90"} text-text-muted`})]})}),T&&r.jsxs("div",{id:"question-list-content",className:"animate-fade-in",children:[r.jsx("div",{className:"p-6",children:a.length>0?r.jsx("ul",{className:"space-y-4",children:a.map(Q=>{const{text:ne,isDue:V}=zp(Q.dueDate);return r.jsxs("li",{className:`p-4 rounded-lg flex items-start justify-between transition-all ${Q.suspended?"bg-yellow-500/10 opacity-70":"bg-background"}`,children:[r.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[r.jsx("p",{className:"text-base font-medium text-text break-words",children:Q.questionText}),r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsx(Jn,{level:Jr(Q)}),r.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted",children:[r.jsxs("span",{className:`font-semibold ${V?"text-primary":""}`,children:[r.jsx(le,{name:"zap",className:"w-3 h-3 inline-block mr-1"}),ne]}),r.jsxs("span",{children:[r.jsx(le,{name:"list",className:"w-3 h-3 inline-block mr-1"}),Q.options.length," options"]})]})]})]}),r.jsxs("div",{className:"flex-shrink-0 relative",ref:E===Q.id?b:null,children:[r.jsx(ke,{variant:"ghost",className:"p-2 h-auto",onClick:ee=>{ee.stopPropagation(),k(ae=>ae===Q.id?null:Q.id)},"aria-label":"More options for question",children:r.jsx(le,{name:"more-vertical",className:"w-5 h-5"})}),E===Q.id&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-surface rounded-md shadow-lg py-1 z-10 ring-1 ring-black ring-opacity-5 animate-fade-in",style:{animationDuration:"150ms"},children:[r.jsxs("button",{type:"button",onClick:ee=>{D(Q,ee),k(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-text hover:bg-border/20",children:[r.jsx(le,{name:"edit",className:"w-4 h-4 mr-3"}),"Edit"]}),Q.suspended?r.jsxs("button",{type:"button",onClick:()=>G(Q.id),className:"flex items-center w-full px-4 py-2 text-sm text-left text-text hover:bg-border/20",children:[r.jsx(le,{name:"eye",className:"w-4 h-4 mr-3"}),"Unsuspend"]}):r.jsxs("button",{type:"button",onClick:()=>R(Q.id),className:"flex items-center w-full px-4 py-2 text-sm text-left text-text hover:bg-border/20",children:[r.jsx(le,{name:"eye-off",className:"w-4 h-4 mr-3"}),"Suspend"]}),r.jsx("div",{className:"border-t border-border my-1"}),r.jsxs("button",{type:"button",onClick:ee=>{O(Q,ee),k(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-3"}),"Delete"]})]})]})]},Q.id)})}):r.jsxs("div",{className:"text-center text-text-muted py-8",children:[r.jsx(le,{name:"help-circle",className:"w-12 h-12 mx-auto mb-2 opacity-50"}),r.jsx("p",{children:"This deck has no questions yet."})]})}),r.jsxs("div",{className:"px-6 py-4 border-t border-border flex flex-wrap gap-2",children:[r.jsxs(ke,{variant:"secondary",onClick:Q=>D(null,Q),className:"flex-grow sm:flex-grow-0",children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Add New Question"]}),r.jsxs(ke,{variant:"ghost",onClick:v,className:"flex-grow sm:flex-grow-0",children:[r.jsx(le,{name:"code",className:"w-5 h-5 mr-2"}),"Bulk Add via JSON"]})]})]}),f&&r.jsx(Rp,{question:p,onClose:I,onSave:M}),g&&r.jsx(yo,{isOpen:!!g,onClose:()=>m(null),onConfirm:z,title:"Delete Question",message:"Are you sure you want to delete this question? This action cannot be undone."})]})},Cf=({isOpen:a,onClose:d,onAddItems:o,deckType:v})=>{const[p,c]=L.useState(""),{addToast:f}=vr(),x=L.useRef(null);Er(x,a);const g=L.useMemo(()=>v===Ge.Flashcard?`[
  {
    "front": "What is the capital of Japan?",
    "back": "Tokyo"
  },
  {
    "front": "What is 2 + 2?",
    "back": "4"
  }
]`:`[
  {
    "questionText": "Which planet is known as the Red Planet?",
    "options": [
      { "id": "1", "text": "Earth" },
      { "id": "2", "text": "Mars" }
    ],
    "correctAnswerId": "2",
    "detailedExplanation": "Mars is called the Red Planet because of its reddish appearance."
  }
]`,[v]),m=S=>{if(S.preventDefault(),!p.trim()){f("JSON content cannot be empty.","error");return}try{const E=Sm(p,v);if(E.length===0){f("The JSON array is empty. No items were added.","info"),d();return}o(E),f(`Successfully added ${E.length} item(s).`,"success"),d()}catch(E){f(E instanceof Error?E.message:"Invalid JSON format.","error")}},T=S=>{if(S.key==="Tab"){S.preventDefault();const E=S.target,k=E.selectionStart,C=E.selectionEnd;E.value=E.value.substring(0,k)+"  "+E.value.substring(C),E.selectionStart=E.selectionEnd=k+2}};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:x,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:r.jsxs("form",{onSubmit:m,children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Bulk Add via JSON"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[r.jsxs("label",{htmlFor:"json-content",className:"block text-sm font-medium text-text-muted",children:["Paste an array of ",v===Ge.Flashcard?"card":"question"," objects"]}),r.jsxs(Ft,{href:"/instructions/json",onClick:d,className:"text-sm text-primary hover:underline inline-flex items-center gap-1",children:[r.jsx(le,{name:"help-circle",className:"w-4 h-4"}),"Format Guide"]})]}),r.jsx("textarea",{id:"json-content",value:p,onChange:S=>c(S.target.value),onKeyDown:T,rows:15,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none font-mono text-sm",placeholder:g})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"submit",variant:"primary",children:"Add Items"})]})]})})}):null},Pp=({data:a,total:d})=>d===0?r.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4"}):r.jsx("div",{className:"flex w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":a.reduce((o,v)=>o+v.value,0),"aria-valuemin":0,"aria-valuemax":d,children:a.map((o,v)=>{if(o.value===0)return null;const p=o.value/d*100;return r.jsx("div",{className:`${o.color} transition-all duration-500`,style:{width:`${p}%`},title:`${o.label}: ${o.value} item(s)`},v)})}),Lp=({data:a})=>{const d=Math.max(...a.map(m=>m.count),1),o=350,v=120,p={top:25,right:15,bottom:25,left:15},c=o-p.left-p.right,f=v-p.top-p.bottom,x=c/a.length,g=Math.max(6,x*.1);return r.jsxs("div",{className:"w-full",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Upcoming Due Dates (Next 7 Days)"}),r.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-2 rounded-lg border border-gray-200 dark:border-gray-700/50",children:r.jsxs("svg",{viewBox:`0 0 ${o} ${v}`,width:"100%",height:"auto","aria-labelledby":"due-date-graph-title",role:"img",className:"overflow-visible",children:[r.jsx("title",{id:"due-date-graph-title",children:"A bar chart showing the number of items due over the next 7 days."}),a.map((m,T)=>{const S=m.count>0?m.count/d*f:0,E=p.left+T*x+(x-g)/2,k=p.top+f-S;return r.jsxs("g",{className:"group",style:{cursor:"pointer"},children:[r.jsxs("title",{children:[m.date,": ",m.count," item",m.count!==1?"s":""," due"]}),r.jsx("rect",{x:E,y:k,width:g,height:S,rx:"2",className:"fill-blue-500 transition-colors group-hover:fill-blue-400"}),r.jsx("text",{x:E+g/2,y:k-6,textAnchor:"middle",className:"fill-gray-600 dark:fill-gray-300 font-semibold text-sm transition-opacity opacity-0 group-hover:opacity-100 pointer-events-none",children:m.count}),r.jsx("text",{x:E+g/2,y:v-p.bottom+15,textAnchor:"middle",className:"fill-gray-400 dark:fill-gray-500 text-xs pointer-events-none",children:m.dayLabel})]},T)})]})})]})},Up=({reviews:a})=>{const[d,o]=L.useState(null),v=L.useMemo(()=>{if(!a||a.length===0)return[];const b=new Map;a.forEach(I=>{const O=new Date(I.timestamp).toISOString().split("T")[0],z=b.get(O)||{totalMastery:0,count:0};z.totalMastery+=I.masteryLevel,z.count++,b.set(O,z)});const D=Array.from(b.entries()).map(([I,{totalMastery:O,count:z}])=>({date:new Date(I),avgMastery:O/z}));return D.sort((I,O)=>I.date.getTime()-O.date.getTime()),D.slice(-90)},[a]);if(v.length<2)return r.jsx("div",{className:"text-center text-sm text-text-muted py-8",children:"Not enough review history to plot a graph."});const p=350,c=150,f={top:10,right:10,bottom:20,left:30},x=p-f.left-f.right,g=c-f.top-f.bottom,m=v[0].date.getTime(),T=v[v.length-1].date.getTime(),S=b=>(b.getTime()-m)/(T-m)*x+f.left,E=b=>c-f.bottom-b*g,k=v.map(b=>`${S(b.date)},${E(b.avgMastery)}`).join(" L "),C=b=>{const D=b.currentTarget.getBoundingClientRect(),I=b.clientX-D.left;let O=v[0],z=1/0;v.forEach(M=>{const R=S(M.date),G=Math.abs(I-R);G<z&&(z=G,O=M)}),z<20?o({x:S(O.date),y:E(O.avgMastery),data:O}):o(null)};return r.jsx("div",{className:"w-full",children:r.jsxs("svg",{viewBox:`0 0 ${p} ${c}`,width:"100%",height:"auto","aria-labelledby":"mastery-graph-title",role:"img",className:"overflow-visible",onMouseMove:C,onMouseLeave:()=>o(null),children:[r.jsx("title",{id:"mastery-graph-title",children:"A line chart showing average mastery over time."}),[0,.25,.5,.75,1].map(b=>r.jsxs("g",{children:[r.jsx("line",{x1:f.left,y1:E(b),x2:p-f.right,y2:E(b),className:"stroke-current text-border/70",strokeWidth:"0.5"}),r.jsx("text",{x:f.left-8,y:E(b)+4,textAnchor:"end",className:"text-xs fill-text-muted",children:`${b*100}%`})]},b)),r.jsx("text",{x:f.left,y:c-5,textAnchor:"start",className:"text-xs fill-text-muted",children:v[0].date.toLocaleDateString("en-us",{month:"short",day:"numeric"})}),r.jsx("text",{x:p-f.right,y:c-5,textAnchor:"end",className:"text-xs fill-text-muted",children:v[v.length-1].date.toLocaleDateString("en-us",{month:"short",day:"numeric"})}),r.jsx("path",{d:`M ${k}`,className:"stroke-primary",fill:"none",strokeWidth:"2",strokeLinejoin:"round",strokeLinecap:"round"}),d&&r.jsxs("g",{children:[r.jsx("line",{x1:d.x,y1:f.top,x2:d.x,y2:c-f.bottom,className:"stroke-current text-border",strokeDasharray:"2,2"}),r.jsx("circle",{cx:d.x,cy:d.y,r:"4",className:"fill-primary"}),r.jsxs("g",{transform:`translate(${d.x>p/2?d.x-100:d.x+10}, ${f.top})`,children:[r.jsx("rect",{x:"0",y:"0",width:"90",height:"35",rx:"4",className:"fill-surface opacity-90",stroke:"rgb(var(--color-border))"}),r.jsx("text",{x:"5",y:"15",className:"text-xs fill-text font-semibold",children:d.data.date.toLocaleDateString("en-us",{month:"short",day:"numeric"})}),r.jsxs("text",{x:"5",y:"30",className:"text-xs fill-text-muted",children:["Mastery: ",Math.round(d.data.avgMastery*100),"%"]})]})]})]})})},Bp=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type===Ge.Flashcard?a.cards:a.questions;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},qp=a=>{const d={new:0,learning:0,young:0,mature:0};return a.forEach(o=>{o.interval===0?d.new++:o.interval<7?d.learning++:o.interval<21?d.young++:d.mature++}),d},$p=({deck:a})=>{const[d,o]=L.useState([]),[v,p]=L.useState(!0),c=a.type===Ge.Flashcard?a.cards:a.questions;L.useEffect(()=>{(async()=>{p(!0);try{const g=await om(a.id);o(g)}catch(g){console.error("Failed to fetch review history for deck:",g)}finally{p(!1)}})()},[a.id]);const f=L.useMemo(()=>{if(!d.length)return[];const x=new Map;return d.forEach(g=>{g.rating===ct.Again&&x.set(g.itemId,(x.get(g.itemId)||0)+1)}),Array.from(x.entries()).sort((g,m)=>m[1]-g[1]).slice(0,5).map(([g,m])=>{const T=c.find(S=>S.id===g);return T?{...T,failureCount:m}:null}).filter(g=>!!g)},[d,c]);return v?r.jsx("div",{className:"flex justify-center items-center p-8",children:r.jsx(Vn,{})}):d.length===0?r.jsxs("div",{className:"text-center py-10 bg-surface rounded-lg border border-border",children:[r.jsx(le,{name:"trending-up",className:"w-12 h-12 mx-auto text-text-muted/50"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:"No Statistics Yet"}),r.jsx("p",{className:"mt-1 text-sm text-text-muted",children:"Complete a study session for this deck to see your stats."})]}):r.jsx("div",{className:"space-y-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsx("h3",{className:"text-xl font-semibold text-text mb-4",children:"Mastery Over Time"}),r.jsx("p",{className:"text-sm text-text-muted mb-4",children:"Average mastery level of reviewed cards per day over the last 90 days of activity."}),r.jsx(Up,{reviews:d})]}),r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsx("h3",{className:"text-xl font-semibold text-text mb-4",children:"Most Difficult Items"}),r.jsx("p",{className:"text-sm text-text-muted mb-4",children:`Items you've marked "Again" most frequently.`}),f.length>0?r.jsx("ul",{className:"space-y-3",children:f.map(x=>{const m=("questionText"in x?x.questionText:x.front).replace(/<[^>]+>/g,"").trim();return r.jsxs("li",{className:"p-3 bg-background rounded-md border border-border",children:[r.jsx("p",{className:"font-semibold text-sm text-text break-words truncate",title:m,children:m}),r.jsxs("p",{className:"text-xs text-red-500 font-medium",children:['Marked "Again" ',x.failureCount," time",x.failureCount>1?"s":""]})]},x.id)})}):r.jsx("p",{className:"text-sm text-text-muted",children:"No items have been repeatedly marked as difficult. Great job!"})]})]})})},Hp=({deck:a,sessionsToResume:d,onUpdateDeck:o,onDeleteDeck:v,onUpdateLastOpened:p,openConfirmModal:c})=>{var ie;const[f,x]=L.useState(!1),[g,m]=L.useState(a.name),[T,S]=L.useState(a.description||""),[E,k]=L.useState(a.folderId||""),[C,b]=L.useState(!1),[D,I]=L.useState("overview"),{navigate:O}=jn(),z=wt(P=>P.folders),M=a.type===Ge.Flashcard?a.cards:a.questions;L.useEffect(()=>{p(a.id)},[a.id,p]),L.useEffect(()=>{(a.archived||a.deletedAt)&&O("/")},[a.archived,a.deletedAt,O]);const R=()=>{o({...a,name:g,description:T,folderId:E||null}),x(!1)},G=()=>{m(a.name),S(a.description||""),k(a.folderId||""),x(!1)},Q=P=>{if(a.type===Ge.Flashcard&&P.every(w=>"front"in w)){const w=Cc(P),N=[...a.cards,...w];o({...a,cards:N})}else if(a.type===Ge.Quiz&&P.every(w=>"questionText"in w)){const w=ca(P),N=[...a.questions,...w];o({...a,questions:N})}},ne=()=>{c({title:"Move Deck to Trash",message:`Are you sure you want to move the deck "${a.name}" to the trash? It will be permanently deleted after 10 days. This will also remove it from any series it belongs to.`,onConfirm:()=>v(a.id)})},V=M.filter(P=>!P.suspended),ee=M.length-V.length,ae=qp(V),$=Bp(a),K=d.has(a.id),_=L.useMemo(()=>V.length===0?0:V.reduce((w,N)=>w+Jr(N),0)/V.length,[V]),xe=L.useMemo(()=>{const P=new Date;P.setHours(0,0,0,0);const w=Array(7).fill(0),N=[],B=[];for(let H=0;H<7;H++){const U=new Date(P);U.setDate(P.getDate()+H),H===0?N.push("Today"):H===1?N.push("Tom"):N.push(U.toLocaleDateString("en-US",{weekday:"short"})),B.push(U.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const X=U.getTime();M.forEach(he=>{if(he.suspended)return;const oe=new Date(he.dueDate);oe.setHours(0,0,0,0),oe.getTime()===X&&w[H]++})}return N.map((H,U)=>({dayLabel:H,count:w[U],date:B[U]}))},[M]),je=L.useMemo(()=>a.locked?"Deck is Locked":a.type===Ge.Quiz?K?"Resume Quiz":`Start Quiz (${$} due)`:K?"Resume Study":`Study Cards (${$} due)`,[a.type,K,$,a.locked]),re=[{value:ae.new,color:"bg-blue-500",label:"New"},{value:ae.learning,color:"bg-orange-500",label:"Learning"},{value:ae.young,color:"bg-teal-500",label:"Young"},{value:ae.mature,color:"bg-green-500",label:"Mature"}],fe=P=>`px-4 py-2 text-sm font-medium transition-colors ${D===P?"border-b-2 border-primary text-text":"text-text-muted hover:text-text"}`;return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-6",children:[r.jsx("div",{className:"bg-surface rounded-lg shadow-md p-6 border border-border",children:f?r.jsxs("div",{className:"space-y-4 animate-fade-in",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Deck Name"}),r.jsx("input",{type:"text",id:"deck-name",value:g,onChange:P=>m(P.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none text-2xl font-bold"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-folder",className:"block text-sm font-medium text-text-muted mb-1",children:"Folder"}),r.jsxs("select",{id:"deck-folder",value:E,onChange:P=>k(P.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[r.jsx("option",{value:"",children:"No folder"}),z.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-desc",className:"block text-sm font-medium text-text-muted mb-1",children:"Description"}),r.jsx("textarea",{id:"deck-desc",value:T,onChange:P=>S(P.target.value),rows:3,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]}),r.jsxs("div",{className:"flex justify-end gap-2",children:[r.jsx(ke,{variant:"secondary",onClick:G,children:"Cancel"}),r.jsxs(ke,{onClick:R,children:[r.jsx(le,{name:"save",className:"mr-2"})," Save Changes"]})]})]}):r.jsxs("div",{children:[r.jsxs("div",{className:"min-w-0",children:[r.jsx("h2",{className:"text-3xl font-bold mb-2 text-text break-words",children:a.name}),a.folderId&&r.jsxs("div",{className:"flex items-center text-sm text-text-muted mb-2",children:[r.jsx(le,{name:"folder",className:"w-4 h-4 mr-2"}),r.jsx("span",{children:((ie=z.find(P=>P.id===a.folderId))==null?void 0:ie.name)||"..."})]})]}),r.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[r.jsxs(ke,{variant:"ghost",onClick:()=>x(!0),children:[r.jsx(le,{name:"edit",className:"mr-2"})," Edit"]}),r.jsxs(ke,{variant:"ghost",onClick:()=>o({...a,archived:!0}),children:[r.jsx(le,{name:"archive",className:"mr-2"})," Archive"]})]}),a.description&&r.jsx("p",{className:"text-text-muted mt-1 mb-4 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:a.description}})]})}),r.jsxs("div",{className:"border-b border-border flex space-x-4",children:[r.jsx("button",{className:fe("overview"),onClick:()=>I("overview"),children:"Overview"}),r.jsxs("button",{className:fe("items"),onClick:()=>I("items"),children:["Items (",M.length,")"]}),r.jsx("button",{className:fe("stats"),onClick:()=>I("stats"),children:"Statistics"})]}),r.jsxs("div",{className:"mt-6",children:[D==="overview"&&r.jsxs("div",{className:"space-y-8 animate-fade-in",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-4 bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:"Deck Statistics"}),r.jsxs("div",{className:"space-y-1",children:[r.jsxs("p",{className:"text-sm text-text-muted",children:["Active Items: ",r.jsx("strong",{className:"text-text",children:V.length})]}),r.jsxs("p",{className:"text-sm text-text-muted",children:["Items Due Today: ",r.jsx("strong",{className:$>0?"text-primary":"text-text",children:$})]}),ee>0&&r.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Suspended Items: ",r.jsx("strong",{children:ee})]})]})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:"Overall Mastery"}),r.jsx(Jn,{level:_})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-semibold text-text mb-2",children:"Progress by Stage"}),r.jsx(Pp,{data:re,total:V.length}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-3 text-xs",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["New: ",r.jsx("strong",{children:ae.new})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Learning: ",r.jsx("strong",{children:ae.learning})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Young: ",r.jsx("strong",{children:ae.young})]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Mature: ",r.jsx("strong",{children:ae.mature})]})]})]})]})]}),r.jsx("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:r.jsx(Lp,{data:xe})})]}),r.jsxs("div",{className:"border-t border-border pt-6 flex flex-wrap items-center justify-center gap-4",children:[r.jsxs(Ft,{href:`/decks/${a.id}/study`,passAs:ke,variant:"primary",size:"lg",onClick:()=>p(a.id),disabled:$===0&&!K||!!a.locked,className:"font-semibold w-full sm:w-auto",children:[r.jsx(le,{name:a.locked?"lock":K?"zap":"laptop",className:"w-5 h-5 mr-2"})," ",je]}),r.jsxs(Ft,{href:`/decks/${a.id}/cram`,passAs:ke,variant:"secondary",size:"lg",onClick:()=>p(a.id),disabled:M.length===0,className:"font-semibold w-full sm:w-auto",title:"Review all cards in random order, without affecting your SRS schedule.",children:[r.jsx(le,{name:"refresh-ccw",className:"w-5 h-5 mr-2"})," Cram"]}),a.type===Ge.Flashcard&&V.length>0&&r.jsxs(Ft,{href:`/decks/${a.id}/study-reversed`,passAs:ke,variant:"secondary",size:"lg",onClick:()=>p(a.id),disabled:!!a.locked,className:"font-semibold w-full sm:w-auto",title:"Study cards from back to front.",children:[r.jsx(le,{name:"repeat",className:"w-5 h-5 mr-2"})," Study Reversed"]}),a.type===Ge.Quiz&&V.length>0&&r.jsxs(Ft,{href:`/decks/${a.id}/study-flip`,passAs:ke,variant:"secondary",size:"lg",onClick:()=>p(a.id),disabled:!!a.locked,className:"font-semibold w-full sm:w-auto",children:[r.jsx(le,{name:"refresh-ccw",className:"w-5 h-5 mr-2"})," Review as Flashcards"]})]})]}),D==="items"&&r.jsx("div",{className:"bg-surface rounded-lg shadow-md border border-border animate-fade-in",children:a.type===Ge.Flashcard?r.jsx(Op,{cards:a.cards,onCardsChange:P=>o({...a,cards:P},{silent:!0}),onAddCard:P=>o({...a,cards:[...a.cards,{...P,id:crypto.randomUUID(),dueDate:new Date().toISOString(),interval:0,easeFactor:Ds}]},{silent:!0}),onBulkAdd:()=>b(!0)}):a.type===Ge.Quiz?r.jsx(Fp,{questions:a.questions,onQuestionsChange:P=>o({...a,questions:P},{silent:!0}),onAddQuestion:P=>o({...a,questions:[...a.questions,{...P,id:crypto.randomUUID(),dueDate:new Date().toISOString(),interval:0,easeFactor:Ds}]},{silent:!0}),onBulkAdd:()=>b(!0)}):r.jsx("div",{className:"p-6 text-center text-text-muted",children:r.jsx("p",{children:"Unsupported deck type."})})}),D==="stats"&&r.jsx("div",{className:"animate-fade-in",children:r.jsx($p,{deck:a})})]}),r.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6",children:[r.jsx("h3",{className:"text-xl font-semibold text-red-400 dark:text-red-300 mb-2",children:"Danger Zone"}),r.jsx("p",{className:"text-red-500/80 dark:text-red-300/80 mb-4",children:"Moving a deck to the trash will make it unavailable for study. It will be permanently deleted after 10 days."}),r.jsxs(ke,{variant:"danger",onClick:ne,children:[r.jsx(le,{name:"trash-2",className:"mr-2"})," Move to Trash"]})]}),C&&r.jsx(Cf,{isOpen:C,onClose:()=>b(!1),onAddItems:Q,deckType:a.type})]})},Qn=({children:a})=>r.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900/70 p-4 rounded-lg overflow-x-auto text-sm text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700",children:r.jsx("code",{children:a})}),bn=({title:a,iconName:d,children:o,defaultOpen:v=!1})=>{const[p,c]=L.useState(v);return r.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[r.jsxs("button",{onClick:()=>c(!p),className:"w-full flex justify-between items-center text-left p-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors","aria-expanded":p,children:[r.jsxs("div",{className:"flex items-center",children:[d&&r.jsx(le,{name:d,className:"w-6 h-6 mr-3 text-gray-500 dark:text-gray-400"}),r.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:a})]}),r.jsx(le,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${p?"":"-rotate-90"} text-gray-500`})]}),p&&r.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 animate-fade-in",children:o})]})},ff=({fields:a})=>r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"w-full text-left border-collapse mt-4 min-w-[500px]",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Field"}),r.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Type"}),r.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Required"}),r.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Description"})]})}),r.jsx("tbody",{children:a.map(({field:d,type:o,description:v,required:p})=>r.jsxs("tr",{className:"border-b dark:border-gray-700/50",children:[r.jsx("td",{className:"p-2 align-top",children:r.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:d})}),r.jsx("td",{className:"p-2 align-top text-gray-600 dark:text-gray-400",children:o}),r.jsx("td",{className:"p-2 align-top",children:p?r.jsx(le,{name:"check-circle",className:"text-green-500"}):"No"}),r.jsx("td",{className:"p-2 align-top text-gray-600 dark:text-gray-400",children:v})]},d))})]})}),Wp=()=>{const{addToast:a}=vr(),[d,o]=L.useState(""),[v,p]=L.useState("Beginner"),[c,f]=L.useState(""),[x,g]=L.useState(""),[m,T]=L.useState("Beginner"),[S,E]=L.useState("Beginner"),[k,C]=L.useState(null),b=["Novice","Beginner","Intermediate","Advanced","Expert","Mastery"],D=`[
  {
    "front": "What is the capital of France?",
    "back": "Paris"
  },
  {
    "front": "What is H2O?",
    "back": "Water"
  }
]`,I=`{
  "name": "Sample Science Quiz",
  "description": "A few questions to test your basic science knowledge.",
  "questions": [
    {
      "questionType": "multipleChoice",
      "questionText": "Which planet is known as the Red Planet?",
      "tags": ["astronomy", "planets"],
      "detailedExplanation": "Mars is often called the Red Planet...",
      "options": [
        { "id": "opt1", "text": "Venus" },
        { "id": "opt2", "text": "Mars" },
        { "id": "opt3", "text": "Jupiter", "explanation": "Jupiter is a gas giant..." }
      ],
      "correctAnswerId": "opt2"
    }
  ]
}`,O=[{field:"name",type:"string",required:!0,description:"The title of the quiz deck."},{field:"description",type:"string",required:!0,description:"A brief summary of the deck's content."},{field:"questions",type:"Array<Question>",required:!0,description:"An array containing all question objects for the deck."},{field:"questionType",type:"string",required:!0,description:'Must be "multipleChoice" for now.'},{field:"questionText",type:"string",required:!0,description:"The question being asked."},{field:"tags",type:"Array<string>",required:!1,description:"An array of keywords for organization."},{field:"detailedExplanation",type:"string",required:!0,description:"The full explanation shown after answering."},{field:"options",type:"Array<Option>",required:!0,description:"An array of possible answers."},{field:"correctAnswerId",type:"string",required:!0,description:"The `id` of the correct option."},{field:"options[].id",type:"string",required:!0,description:"A unique identifier for this option within the question."},{field:"options[].text",type:"string",required:!0,description:"The answer text shown to the user."},{field:"options[].explanation",type:"string",required:!1,description:"A brief explanation for why this specific option is right or wrong."}],z=`{
  "seriesName": "Intro to Web Development",
  "seriesDescription": "A progressive series covering the fundamentals of web development.",
  "levels": [
    {
      "title": "Level 1: The Foundation",
      "decks": [
        {
          "name": "Level 1.1: HTML Basics",
          "description": "The building blocks of the web.",
          "questions": [
            {
              "questionType": "multipleChoice",
              "questionText": "What does HTML stand for?",
              "tags": ["html", "basics"],
              "detailedExplanation": "HTML stands for HyperText Markup Language...",
              "options": [
                { "id": "1", "text": "HyperText Markup Language" },
                { "id": "2", "text": "High-Level Text Machine Language" }
              ],
              "correctAnswerId": "1"
            }
          ]
        },
        { "name": "Level 1.2: CSS Fundamentals", "description": "...", "questions": [] }
      ]
    }
  ]
}`,M=[{field:"seriesName",type:"string",required:!0,description:"The title for the entire series."},{field:"seriesDescription",type:"string",required:!0,description:"A brief summary of what the whole series covers."},{field:"levels",type:"Array<Level>",required:!0,description:"An array containing all the levels in the series."},{field:"levels[].title",type:"string",required:!0,description:'The heading for a group of decks (e.g., "Level 1: Core Concepts").'},{field:"levels[].decks",type:"Array<QuizDeck>",required:!0,description:"An array of quiz decks for that level. The schema for each deck is the same as the Single Quiz Deck format."}],R=`Please act as a world-class instructional designer and subject matter expert. Your task is to generate a comprehensive, detailed, and world-class TEXT outline for a learning path. The output must be plain text, not a JSON object.

**Topic:** [YOUR TOPIC HERE]
**User's Current Level:** [USER'S LEVEL HERE]

The goal is to create a structured and progressive learning path that guides the user towards mastery, similar in quality and detail to the provided example structure.

**INSTRUCTIONS & REQUIREMENTS:**

1.  **Learning Path Structure:**
    -   Organize the learning path into logical "Levels" (e.g., Level 1, Level 2, up to Level 4 or 5). Each level must have a title and represent a significant step up in knowledge.
    -   Each Level should contain one or more related "Decks".
    -   The name of each deck must reflect this structure, e.g., "Level 1.1: Foundations of X", "Level 1.2: Core Concepts of Y", "Level 2.1: Advanced Techniques in Z".

2.  **High-Quality Content (Crucial):**
    -   **Series Name & Description:** Create a compelling and descriptive name (e.g., "Topic Mastery Path: The Contextual Approach") and a comprehensive summary for the entire learning path.
    -   **Level Goal & Focus:** For each Level, provide a clear "Goal" and "Focus".
    -   **Deck Topics:** For each Deck, provide a detailed, itemized list of specific "Topics" to be covered.
    -   **Progressive Difficulty:** The path must be logically sequenced, starting with foundational definitions and historical context, moving to practical applications, then to assessment and planning, and finally to interdisciplinary challenges.
    -   **Context-Specific:** If the user's topic has a specific context (e.g., a geographical location, a particular framework), embed that context deeply into the entire outline.
    -   **Approximate Question Count:** Suggest an approximate number of questions for each deck.

**EXAMPLE STRUCTURE:**
Ecological Sustainable Forestry Mastery Path: The Scanian Approach
This learning path provides a deep understanding of...
Level 1: Core Principles & Historical Context in Skne
Goal: Define ecological sustainable forestry...
Focus: Shifting from purely extractive forestry...
Level 1.1: Foundations of Sustainable Forest Management (SFM) in Skne
Topics: Definitional evolution of forestry...
Approx. Questions: 30-40

---

Now, based on all the above requirements, generate the complete text outline.

Finally, at the very end of your response, provide a JSON object with the series name and description you created, like this:
{
  "seriesName": "The full series name you generated above",
  "seriesDescription": "The full series description you generated above"
}
`,G=`You are an expert content creator. I have provided a text outline for a learning path. Your task is to convert this outline into a structured JSON object that will serve as a scaffold.

**PRIMARY INSTRUCTIONS:**

1.  **Source Material:** Use ONLY the text outline I've provided as your source.
2.  **Structure:** Create a single JSON object with \`seriesName\`, \`seriesDescription\`, and a \`levels\` array.
3.  **Levels and Decks:** Inside the \`levels\` array, create objects for each level, including its \`title\`. Each level object should have a \`decks\` array. Populate this with deck objects, each containing its \`name\` and \`description\` from the outline.
4.  **Empty Questions:** For every deck object, include a \`"questions": []\` key-value pair. The questions array MUST be empty.

**JSON OUTPUT FORMAT:**
- The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text, explanations, or markdown formatting.
- The JSON object must follow this exact schema:
{
  "seriesName": "The full series name from the outline",
  "seriesDescription": "The full series description from the outline",
  "levels": [
    {
      "title": "The title of the first level",
      "decks": [
        {
          "name": "The name of the first deck in this level",
          "description": "The description for this deck",
          "questions": []
        },
        {
          "name": "The name of the second deck in this level",
          "description": "The description for this deck",
          "questions": []
        }
      ]
    }
  ]
}

Now, based on the text outline I provided, please generate the complete JSON scaffold.`,Q=`You are an expert content creator. I have provided a text outline for a learning path. Your task is to generate the JSON for the **first deck (e.g., Level 1.1)** from that outline.

**PRIMARY INSTRUCTIONS:**

1.  **Source Material:** Use ONLY the text outline I've provided as your source.
2.  **Question Quantity:** Generate the approximate number of questions specified in the outline for this first deck.
3.  **Content Generation:** Create world-class questions and answers based *only* on the "Topics" listed for this specific deck in the outline.

**CRITICAL CONTENT QUALITY REQUIREMENTS:**
- **Factual Accuracy:** This is paramount. The correct answer and all parts of the explanation must be unequivocally correct and verifiable.
- **Relevance & Practical Application:** Frame questions in real-world scenarios to help a user apply the information. Questions must be relevant to the deck's topics.
- **Clarity & Simplicity:** Questions must be easy to understand, unambiguous, and free of jargon (unless the jargon is the learning objective). Test only one core concept per question.
- **Problem-Solving Focus:** Design questions that require applying knowledge, not just recalling facts. Avoid trivial pursuit and focus on genuinely useful information. For practical topics, ask skill-based questions that test the ability to perform a task or make a decision.
- **High-Quality Explanations:** The \`detailedExplanation\` is crucial. It must explain the reasoning, principles, or facts behind the correct answer. Provide additional context, examples, or connections to related concepts to deepen understanding. If applicable, cite sources for complex information.
- **Engaging Content:** While factual, make the questions and explanations as engaging as possible to maintain learner interest.

**JSON OUTPUT FORMAT:**
- The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text, explanations, or markdown formatting.
- The JSON object must follow this exact schema:
{
  "name": "The exact name for the deck from your outline, e.g., 'Level 1.1: Foundations...'",
  "description": "A concise description of this specific deck's content, based on its topics.",
  "questions": [
    {
      "questionType": "multipleChoice",
      "questionText": "The text of the first question...",
      "tags": ["relevant", "tags"],
      "detailedExplanation": "A thorough explanation that meets all quality requirements.",
      "options": [
        { "id": "q1_opt1", "text": "First answer option" },
        { "id": "q1_opt2", "text": "Second answer option" }
      ],
      "correctAnswerId": "q1_opt2"
    }
  ]
}

Now, based on the text outline I provided, please generate the JSON for the **first deck**.`,ne=`Please act as an expert instructional designer and generate a complete, structured Deck Series in a single JSON object.

**Topic:** [YOUR TOPIC HERE]
**User's Current Level:** [USER'S LEVEL HERE]

**CONTENT REQUIREMENTS FOR ALL QUESTIONS:**
-   **Factual Accuracy:** All correct answers and explanations must be verifiable and factually correct.
-   **Practical Application:** Frame questions to enable the user to put the learned information into practice.
-   **Clarity:** Questions must be easy to understand and unambiguous.

**FINAL JSON OUTPUT FORMAT:**
The final output MUST be ONLY a single, raw JSON object without any surrounding text or markdown. The root object must have this exact schema:
{
  "seriesName": "A descriptive name for the whole series",
  "seriesDescription": "A brief description of what the series covers.",
  "levels": [
    {
      "title": "Level 1: The Basics",
      "decks": [
        {
          "name": "Level 1.1: Deck Name",
          "description": "Description of this deck's content.",
          "questions": [
            {
              "questionType": "multipleChoice",
              "questionText": "...",
              "tags": ["tag1", "tag2"],
              "detailedExplanation": "...",
              "options": [ { "id": "q1_opt1", "text": "..." }, { "id": "q1_opt2", "text": "..." } ],
              "correctAnswerId": "q1_opt2"
            }
          ]
        }
      ]
    }
  ]
}

Now, generate the complete JSON object based on all the above requirements.`,V='Please generate a JSON object for a single multiple-choice quiz.\n\n**Topic:** [YOUR TOPIC HERE]\n**Designed for Level:** [USER\'S LEVEL HERE]\n\n**CONTENT REQUIREMENTS:**\n-   **Factual Accuracy:** All correct answers and explanations must be verifiable and factually correct.\n-   **Relevance:** Questions must be directly pertinent to the chosen topic and appropriate for the specified level.\n-   **Practical Application:** Frame questions to enable the user to put the learned information into practice.\n-   **Question Quantity:** Generate 10-100 high-quality questions. Do not include multiple questions that are essentially asking the same thing.\n-   **Clarity:** Questions must be easy to understand and unambiguous.\n-   **Problem-Solving Focus:** Prioritize questions that require applying knowledge to solve a problem.\n-   **Explanation Quality:** The `detailedExplanation` must explain the reasoning behind the correct answer and provide additional context.\n\n**JSON SCHEMA & RULES:**\n-   The final output must be ONLY the raw JSON object, starting with `{` and ending with `}`.\n-   The root object must contain `name`, `description`, and `questions` (array).\n-   Each question object must contain `questionType` ("multipleChoice"), `questionText`, `tags` (array), `detailedExplanation`, `options` (array), and `correctAnswerId`.\n-   Each option object must contain a unique `id` and `text`.\n-   Do NOT include top-level SRS fields like `id` or `dueDate` on the questions.\n\nNow, generate the complete JSON deck based on all the above requirements.',ee=(je,re)=>{navigator.clipboard.writeText(je).then(()=>{a("Prompt copied to clipboard!","success"),C(re),setTimeout(()=>C(null),2e3)}).catch(fe=>{a("Failed to copy prompt.","error"),console.error("Could not copy text: ",fe)})},ae=()=>{const je=d.trim()||"[YOUR TOPIC HERE]",re=R.replace("[YOUR TOPIC HERE]",je).replace("[USER'S LEVEL HERE]",v);ee(re,"outline-prompt")},$=()=>{ee(G,"scaffold-prompt")},K=()=>{ee(Q,"deck-from-outline-prompt")},_=()=>{const je=c.trim()||"[YOUR TOPIC HERE]",re=ne.replace("[YOUR TOPIC HERE]",je).replace("[USER'S LEVEL HERE]",m);ee(re,"series-prompt")},xe=()=>{const je=x.trim()||"[YOUR TOPIC HERE]",re=V.replace("[YOUR TOPIC HERE]",je).replace("[USER'S LEVEL HERE]",S);ee(re,"quiz-prompt")};return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-6 pb-10",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:"AI & JSON Import Guide"}),r.jsx("p",{className:"mt-2 text-lg text-gray-500 dark:text-gray-400",children:"Use this expert-led workflow to generate high-quality learning content with AI, or follow the formats to import your own data."})]}),r.jsx(bn,{title:"Step 1: Generate Learning Outline (Text)",iconName:"list",defaultOpen:!0,children:r.jsxs("div",{className:"space-y-4 bg-green-900/10 dark:bg-green-900/20 p-6 rounded-lg border border-green-500/20",children:[r.jsx("p",{className:"text-green-800/90 dark:text-green-200/90",children:"Begin by generating a high-level, human-readable outline for your learning path. This allows you to review and approve the structure before generating the full content. The AI will generate plain text, not JSON."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"outline-topic-input",className:"block text-sm font-medium text-green-700 dark:text-green-300",children:"Enter Topic"}),r.jsx("input",{id:"outline-topic-input",type:"text",value:d,onChange:je=>o(je.target.value),className:"w-full p-2 mt-1 bg-green-50 dark:bg-gray-900 border border-green-300 dark:border-green-700 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none",placeholder:"e.g., The History of Ancient Rome"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"outline-level-select",className:"block text-sm font-medium text-green-700 dark:text-green-300",children:"My Current Level Is"}),r.jsx("select",{id:"outline-level-select",value:v,onChange:je=>p(je.target.value),className:"w-full p-2 mt-1 bg-green-50 dark:bg-gray-900 border border-green-300 dark:border-green-700 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none",children:b.map(je=>r.jsx("option",{value:je,children:je},je))})]})]}),r.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80 mt-1",children:"Your topic and level will be inserted into the prompt."}),r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{children:R}),r.jsx(ke,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:ae,children:k==="outline-prompt"?r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),r.jsx(bn,{title:"Step 2: Generate JSON Scaffold from Outline",iconName:"code",children:r.jsxs("div",{className:"space-y-4 bg-yellow-900/10 dark:bg-yellow-900/20 p-6 rounded-lg border border-yellow-500/20",children:[r.jsx("p",{className:"text-yellow-800/90 dark:text-yellow-200/90",children:'Next, paste your text outline into a new AI chat. Then, use this prompt to convert it into a JSON "scaffold". This creates the entire series structure with empty decks, which you will fill in the next step.'}),r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{children:G}),r.jsx(ke,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:$,children:k==="scaffold-prompt"?r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]}),r.jsx("p",{className:"text-sm text-yellow-700/90 dark:text-yellow-300/90",children:"Save the generated JSON scaffold in a text editor. You'll need it for the next step."})]})}),r.jsx(bn,{title:"Step 3: Generate Individual Decks (JSON)",iconName:"zap",children:r.jsxs("div",{className:"space-y-4 bg-blue-900/10 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-500/20",children:[r.jsx("p",{className:"text-blue-800/90 dark:text-blue-200/90",children:"Now that you have your JSON scaffold from Step 2, you can generate the content for each deck. Paste your original **text outline** into the AI chat. Then, use this prompt to generate the JSON for the **first deck**. Copy the generated `questions` array from the AI's response and paste it into the corresponding deck in your scaffold, replacing the empty `[]`. Repeat this for each deck in your outline."}),r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{children:Q}),r.jsx(ke,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:K,children:k==="deck-from-outline-prompt"?r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]}),r.jsx("p",{className:"text-sm text-blue-700/90 dark:text-blue-300/90",children:'Once your scaffold is complete, use the main "Create / Import" modal, paste the full JSON, and your entire series will be created.'})]})}),r.jsx(bn,{title:"Alternative: Generate Full Series at Once (JSON)",iconName:"zap",children:r.jsxs("div",{className:"space-y-4 bg-purple-900/10 dark:bg-purple-900/20 p-6 rounded-lg border border-purple-500/20",children:[r.jsx("p",{className:"text-purple-700/90 dark:text-purple-300/90",children:"For a faster, one-shot approach, use this powerful prompt to generate a complete, structured learning path on any topic. This is less controlled but much quicker."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"series-topic-input",className:"block text-sm font-medium text-purple-700 dark:text-purple-300",children:"Enter Topic"}),r.jsx("input",{id:"series-topic-input",type:"text",value:c,onChange:je=>f(je.target.value),className:"w-full p-2 mt-1 bg-purple-50 dark:bg-gray-900 border border-purple-300 dark:border-purple-700 rounded-md focus:ring-2 focus:ring-purple-500 focus:outline-none",placeholder:"e.g., Quantum Physics"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"series-level-select",className:"block text-sm font-medium text-purple-700 dark:text-purple-300",children:"My Current Level Is"}),r.jsx("select",{id:"series-level-select",value:m,onChange:je=>T(je.target.value),className:"w-full p-2 mt-1 bg-purple-50 dark:bg-gray-900 border border-purple-300 dark:border-purple-700 rounded-md focus:ring-2 focus:ring-purple-500 focus:outline-none",children:b.map(je=>r.jsx("option",{value:je,children:je},je))})]})]}),r.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80 mt-1",children:"Your topic and level will be inserted into the prompt."}),r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{children:ne}),r.jsx(ke,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:_,children:k==="series-prompt"?r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),r.jsx(bn,{title:"Alternative: Generate a Single Quiz Deck",iconName:"zap",children:r.jsxs("div",{className:"space-y-4 bg-blue-900/10 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-500/20",children:[r.jsx("p",{className:"text-blue-700/90 dark:text-blue-300/90",children:"Use this prompt to generate a single quiz deck on any topic, tailored to a specific difficulty level."}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"quiz-topic-input",className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:"Enter Topic"}),r.jsx("input",{id:"quiz-topic-input",type:"text",value:x,onChange:je=>g(je.target.value),className:"w-full p-2 mt-1 bg-blue-50 dark:bg-gray-900 border border-blue-300 dark:border-blue-700 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., The Roman Empire"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"quiz-level-select",className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:"Deck Difficulty Level"}),r.jsx("select",{id:"quiz-level-select",value:S,onChange:je=>E(je.target.value),className:"w-full p-2 mt-1 bg-blue-50 dark:bg-gray-900 border border-blue-300 dark:border-blue-700 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",children:b.map(je=>r.jsx("option",{value:je,children:je},je))})]})]}),r.jsxs("div",{className:"relative",children:[r.jsx(Qn,{children:V}),r.jsx(ke,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:xe,children:k==="quiz-prompt"?r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):r.jsxs(r.Fragment,{children:[r.jsx(le,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),r.jsxs(bn,{title:"Format 1: Full Deck Series (JSON)",iconName:"list",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"To import an entire learning path at once, provide a single JSON object containing the series details and a `levels` array. Each level has a title and contains its own array of decks."}),r.jsx(Qn,{children:z}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Field Definitions"}),r.jsx(ff,{fields:M})]}),r.jsxs(bn,{title:"Format 2: Single Quiz Deck (JSON)",iconName:"help-circle",children:[r.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"For a single multiple-choice quiz, provide a JSON object with a name, description, and an array of question objects. See the field definitions below for more details."}),r.jsx(Qn,{children:I}),r.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Field Definitions"}),r.jsx(ff,{fields:O})]}),r.jsxs(bn,{title:"Format 3: Simple Flashcard Deck (JSON)",iconName:"laptop",children:[r.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["For basic front-and-back flashcards, provide a JSON array. Each object in the array must have a ",r.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:"front"})," and a ",r.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:"back"})," key, both with string values. This format is ideal for quick, manual creation or for exporting from other simple flashcard apps."]}),r.jsx(Qn,{children:D})]}),r.jsx(bn,{title:"General Tips & Troubleshooting",iconName:"settings",children:r.jsxs("ul",{className:"space-y-4 list-disc list-inside text-gray-600 dark:text-gray-400",children:[r.jsxs("li",{children:[r.jsx("strong",{children:"Validate Your JSON:"})," Before importing, it's a good idea to paste your JSON into an online validator to check for syntax errors. A common mistake is a trailing comma after the last item in an array or object.",r.jsx("br",{}),r.jsx("code",{children:'[ { "key": "value" }, ] &larr; Invalid Trailing Comma'})]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Check Your Quotes:"}),` All keys and string values in JSON must be enclosed in double quotes ("). Single quotes (') are not valid.`]}),r.jsxs("li",{children:[r.jsx("strong",{children:"Schema Mismatches:"}),' Ensure your JSON structure matches one of the three formats above. For example, pasting an array of flashcards into the "Bulk Add" modal inside a quiz deck will fail. The main "Import" modal is more flexible and can detect the format automatically.']}),r.jsxs("li",{children:[r.jsx("strong",{children:"Unique IDs:"}),' When creating quiz questions, ensure the `id` for each option within a single question is unique. You can use simple strings like "opt1", "opt2", or a UUID.']}),r.jsxs("li",{children:[r.jsx("strong",{children:"AI-Generated Content:"})," Always review content generated by an AI for factual accuracy before studying it. The prompts are designed to request accuracy, but AI can still make mistakes."]})]})})]})},Qp=({isOpen:a,onClose:d,onAddDeck:o})=>{const[v,p]=L.useState(""),{addToast:c}=vr(),f=L.useRef(null);Er(f,a);const x=`{
  "name": "New Quiz Deck Name",
  "description": "A description for the new deck.",
  "questions": [
    {
      "questionText": "What is 2+2?",
      "options": [{"id":"1","text":"4"}, {"id":"2","text":"3"}],
      "correctAnswerId": "1",
      "detailedExplanation": "It's basic math.",
      "tags": []
    }
  ]
}`,g=T=>{if(T.preventDefault(),!v.trim()){c("JSON content cannot be empty.","error");return}try{const S=po(v);if(S.type!==Ge.Quiz){c("The provided JSON is not a valid Quiz Deck format.","error");return}const E={id:crypto.randomUUID(),name:S.data.name,description:S.data.description,type:Ge.Quiz,questions:S.data.questions.map(k=>({...k,id:crypto.randomUUID(),dueDate:new Date().toISOString(),interval:0,easeFactor:2.5,suspended:!1}))};o(E),c(`Successfully created and added deck: "${E.name}"`,"success"),d()}catch(S){c(S instanceof Error?S.message:"Invalid JSON format.","error")}},m=T=>{if(T.key==="Tab"){T.preventDefault();const S=T.target,E=S.selectionStart,k=S.selectionEnd;S.value=S.value.substring(0,E)+"  "+S.value.substring(k),S.selectionStart=S.selectionEnd=E+2}};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsx("div",{ref:f,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:r.jsxs("form",{onSubmit:g,children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold",children:"Add New Deck to Series"}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("label",{htmlFor:"json-content",className:"block text-sm font-medium text-text-muted mb-1",children:"Paste a complete quiz deck object in JSON format."}),r.jsx("textarea",{id:"json-content",value:v,onChange:T=>p(T.target.value),onKeyDown:m,rows:15,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none font-mono text-sm",placeholder:x})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"submit",variant:"primary",children:"Create & Add Deck"})]})]})})}):null},hf=a=>{const d=new Date;return d.setHours(23,59,59,999),a.questions.filter(o=>!o.suspended&&new Date(o.dueDate)<=d).length},uo=()=>r.jsx("div",{className:"h-16 my-2 -ml-4","aria-hidden":"true",children:r.jsxs("div",{className:"h-full w-full rounded-md bg-primary/10 border-2 border-dashed border-primary flex items-center justify-center",children:[r.jsx(le,{name:"arrow-down",className:"w-5 h-5 text-primary animate-bounce"}),r.jsx("span",{className:"ml-2 font-medium text-primary",children:"Move Here"})]})}),Gp=({series:a,completedDeckIds:d,sessionsToResume:o,onUpdateSeries:v,onDeleteSeries:p,onAddDeckToSeries:c,onUpdateDeck:f,onStartSeriesStudy:x,openConfirmModal:g})=>{const{navigate:m}=jn(),T=L.useMemo(()=>new URLSearchParams(window.location.hash.split("?")[1]).get("edit")==="true",[]),[S,E]=L.useState(T),[k,C]=L.useState(!1),[b,D]=L.useState(!1),[I,O]=L.useState(null),[z,M]=L.useState(null),R=wt(H=>H.decks),G=L.useMemo(()=>{const H=new Set(a.levels.flatMap(U=>U.deckIds));return R.filter(U=>H.has(U.id))},[a,R]),[Q,ne]=L.useState(null),[V,ee]=L.useState(null),ae=L.useMemo(()=>a.levels.flatMap(H=>H.deckIds),[a.levels]),$=ae.length,K=L.useMemo(()=>ae.find(H=>!d.has(H))||null,[ae,d]);L.useEffect(()=>{T&&m(`/series/${a.id}`)},[T,m,a.id]),L.useEffect(()=>{(a.archived||a.deletedAt)&&m("/")},[a.archived,a.deletedAt,m]);const _=L.useMemo(()=>G.reduce((H,U)=>ae.indexOf(U.id)<=d.size?H+hf(U):H,0),[G,d,ae]),xe=L.useMemo(()=>{const H=G.flatMap(X=>X.questions).filter(X=>!X.suspended);return H.length===0?0:H.reduce((X,he)=>X+Jr(he),0)/H.length},[G]),je=(H,U)=>{g({title:"Remove Deck from Series",message:`Are you sure you want to remove "${U}" from this series? The deck itself will not be deleted.`,onConfirm:()=>{const X=a.levels.map(he=>({...he,deckIds:he.deckIds.filter(oe=>oe!==H)})).filter(he=>he.deckIds.length>0||S);v({...a,levels:X})}})},re=()=>{g({title:"Move Series to Trash",message:`Are you sure you want to move the series "${a.name}" to the trash? All ${G.length} deck(s) inside this series will also be moved to the trash.`,onConfirm:()=>p(a.id)})},fe=()=>{const H={title:"New Level",deckIds:[]};v({...a,levels:[...a.levels,H]})},ie=H=>{if(!z||z.name.trim()==="")return;const U=[...a.levels];U[H].title=z.name.trim(),v({...a,levels:U}),M(null)},P=(H,U,X,he)=>{if(S){H.dataTransfer.effectAllowed="move";try{H.dataTransfer.setData("text/plain",he||`level-${X}`)}catch{}setTimeout(()=>{ne({type:U,sourceLevelIndex:X,deckId:he})},0)}},w=(H,U,X)=>{!S||!Q||(H.preventDefault(),Q.type==="level"?ee({levelIndex:U,deckIndex:null}):Q.type==="deck"&&ee({levelIndex:U,deckIndex:X}))},N=H=>{if(!S||!Q||!V)return;H.preventDefault();const{type:U,sourceLevelIndex:X,deckId:he}=Q;let{levelIndex:oe,deckIndex:ye}=V;const Ie=JSON.parse(JSON.stringify(a.levels));if(U==="level"){if(ye!==null||X===oe)return;const[ze]=Ie.splice(X,1),qe=X<oe?oe-1:oe;Ie.splice(qe,0,ze)}else U==="deck"&&he&&(Ie[X].deckIds=Ie[X].deckIds.filter(ze=>ze!==he),Ie[oe].deckIds.splice(ye,0,he));v({...a,levels:Ie.filter(ze=>ze.deckIds.length>0)}),ne(null),ee(null)},B=()=>{ne(null),ee(null)};return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[r.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-6 border border-border",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h2",{className:"text-3xl font-bold text-text break-words",children:a.name}),a.description&&r.jsx("p",{className:"text-text-muted mt-1",children:a.description})]}),r.jsxs("div",{className:"mt-4 grid grid-cols-1 md:grid-cols-2 gap-x-8 gap-y-4 items-center",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-semibold text-text-muted flex justify-between",children:[r.jsx("span",{children:"Overall Mastery"}),r.jsxs("span",{children:[Math.round(xe*100),"%"]})]}),r.jsx(Jn,{level:xe})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-semibold text-text-muted flex justify-between",children:[r.jsx("span",{children:"Completion"}),r.jsxs("span",{children:[d.size," / ",$]})]}),r.jsx(Tc,{current:d.size,total:$})]})]}),r.jsxs("div",{className:"flex flex-wrap gap-4 items-center mt-6 border-t border-border pt-6",children:[r.jsxs(ke,{variant:"primary",onClick:()=>x(a.id),disabled:_===0,children:[r.jsx(le,{name:"zap",className:"mr-2"})," Study All Due (",_,")"]}),r.jsxs(ke,{variant:"ghost",onClick:()=>E(!S),children:[r.jsx(le,{name:S?"x-circle":"edit",className:"mr-2"})," ",S?"Finish Organizing":"Organize Series"]}),r.jsxs(ke,{variant:"ghost",onClick:()=>v({...a,archived:!0}),children:[r.jsx(le,{name:"archive",className:"mr-2"})," Archive"]}),S&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"w-full border-t border-border/50 my-2 md:hidden"}),r.jsxs(ke,{variant:"secondary",onClick:()=>D(!0),children:[r.jsx(le,{name:"edit",className:"mr-2"})," Edit Info"]}),r.jsxs(ke,{variant:"danger",onClick:re,children:[r.jsx(le,{name:"trash-2",className:"mr-2"})," Move to Trash"]})]})]})]}),r.jsxs("div",{className:"relative pl-4",onDrop:N,onDragOver:H=>H.preventDefault(),onDragEnd:B,children:[r.jsx("div",{className:"absolute top-0 bottom-0 left-8 w-0.5 bg-border -z-10"}),r.jsxs("div",{className:"space-y-2",children:[S&&(V==null?void 0:V.levelIndex)===0&&V.deckIndex===null&&r.jsx(uo,{}),a.levels.map((H,U)=>r.jsxs("div",{onDragOver:X=>S&&w(X,U,0),children:[r.jsxs("div",{draggable:S,onDragStart:X=>P(X,"level",U),className:`flex items-center group transition-opacity -ml-4 pl-4 ${S?"cursor-grab":""} ${(Q==null?void 0:Q.type)==="level"&&Q.sourceLevelIndex===U?"opacity-20":""}`,children:[r.jsx("div",{className:"w-8 flex-shrink-0"}),r.jsx("div",{className:"flex-grow py-4",children:(z==null?void 0:z.index)===U?r.jsx("input",{type:"text",value:z.name,onChange:X=>M({...z,name:X.target.value}),onBlur:()=>ie(U),onKeyDown:X=>X.key==="Enter"&&ie(U),className:"text-2xl font-bold bg-background/50 border-b-2 border-primary focus:outline-none",autoFocus:!0}):r.jsx("h3",{className:"text-2xl font-bold text-text",children:H.title})}),S&&r.jsxs("div",{className:"flex items-center opacity-0 group-hover:opacity-100 transition-opacity",children:[r.jsx(ke,{variant:"ghost",size:"sm",className:"p-2 h-auto",onClick:()=>M({index:U,name:H.title}),children:r.jsx(le,{name:"edit",className:"w-4 h-4"})}),r.jsx("div",{className:"p-2 text-text-muted/60",children:r.jsx(le,{name:"grip-vertical"})})]})]}),S&&(V==null?void 0:V.levelIndex)===U&&V.deckIndex===0&&r.jsx(uo,{}),r.jsxs("div",{className:"space-y-2",children:[H.deckIds.map((X,he)=>{const oe=G.find(ue=>ue.id===X);if(!oe)return null;const ye=d.has(X),Ie=K===oe.id,ze=!d.has(X)&&K!==X,qe=hf(oe),Ee=ze?"locked":ye?"completed":Ie?"next":"unlocked",y=ye||Ie?"bg-primary":"bg-border",de={locked:r.jsx(le,{name:"lock",className:"w-3 h-3 text-text-muted"}),completed:r.jsx(le,{name:"check-circle",className:"w-5 h-5 text-white bg-green-500 rounded-full"}),next:r.jsx("div",{className:"w-3 h-3 bg-primary rounded-full ring-4 ring-primary/30"}),unlocked:r.jsx("div",{className:"w-3 h-3 bg-border rounded-full"})};return r.jsxs("div",{children:[r.jsxs("div",{onDragOver:ue=>S&&w(ue,U,he),className:"relative flex items-center gap-4",children:[r.jsxs("div",{className:"absolute top-0 bottom-0 left-8 w-0.5 -z-10",children:[r.jsx("div",{className:`h-1/2 w-full ${he>0?y:""}`}),r.jsx("div",{className:`h-1/2 w-full ${he<H.deckIds.length-1?y:""}`})]}),r.jsx("div",{className:"absolute left-8 -translate-x-1/2 h-8 w-8 rounded-full bg-surface flex items-center justify-center",children:de[Ee]}),r.jsx("div",{className:"w-8 flex-shrink-0"}),r.jsx("div",{draggable:S,onDragStart:ue=>P(ue,"deck",U,oe.id),className:`flex-grow my-4 bg-surface rounded-lg shadow-md border hover:shadow-lg transition-all ${Ee==="next"?"border-primary":"border-border"} ${Ee==="locked"&&!S?"opacity-60":""} ${(Q==null?void 0:Q.deckId)===X?"border-2 border-dashed border-border bg-background/50":""}`,children:r.jsxs("div",{className:`p-4 flex items-center justify-between gap-2 ${(Q==null?void 0:Q.deckId)===X?"opacity-0":""}`,children:[r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsx(Ft,{href:`/decks/${oe.id}?seriesId=${a.id}`,className:"font-bold text-text break-words hover:text-primary transition-colors",children:oe.name}),r.jsxs("div",{className:"text-sm text-text-muted",children:[oe.questions.length," questions"]})]}),r.jsx("div",{className:"flex-shrink-0 flex items-center gap-1",children:S?r.jsxs("div",{className:"flex items-center",children:[r.jsx(ke,{variant:"ghost",size:"sm",className:"p-2 h-auto text-red-500",onClick:()=>je(oe.id,oe.name),children:r.jsx(le,{name:"x"})}),r.jsx("div",{className:"cursor-grab p-2 text-text-muted/60",children:r.jsx(le,{name:"grip-vertical"})})]}):r.jsxs(Ft,{href:`/decks/${oe.id}/study?seriesId=${a.id}`,passAs:ke,variant:"secondary",size:"sm",disabled:ze||qe===0&&!o.has(oe.id),children:[o.has(oe.id)?"Resume":"Study"," ",qe>0&&`(${qe})`]})})]})})]}),S&&(V==null?void 0:V.levelIndex)===U&&V.deckIndex===he+1&&r.jsx(uo,{})]},oe.id)}),S&&r.jsx("div",{className:"pl-16 py-2",children:r.jsxs(ke,{variant:"ghost",size:"sm",onClick:()=>C(!0),children:[r.jsx(le,{name:"plus",className:"w-4 h-4 mr-2"})," Add Deck to Level"]})})]}),S&&(V==null?void 0:V.levelIndex)===U+1&&V.deckIndex===null&&r.jsx(uo,{})]},`${H.title}-${U}`)),S&&r.jsx("div",{className:"pl-16 pt-4",children:r.jsxs(ke,{variant:"secondary",onClick:fe,children:[r.jsx(le,{name:"plus",className:"w-4 h-4 mr-2"})," Add New Level"]})})]})]}),k&&r.jsx(Qp,{isOpen:k,onClose:()=>C(!1),onAddDeck:H=>c(a.id,H)}),b&&r.jsx(Sf,{series:a,onClose:()=>D(!1),onSave:H=>{v({...a,name:H.name,description:H.description}),D(!1)}}),I&&r.jsx(Cf,{isOpen:!!I,onClose:()=>O(null),deckType:I.type,onAddItems:H=>{const U={...I,questions:[...I.questions,...H]};f(U),O(null)}})]})},Vp=({onUpdateDeck:a,onUpdateSeries:d,onDeleteDeck:o,onDeleteSeries:v,openConfirmModal:p})=>{const{decks:c,deckSeries:f}=wt(),x=L.useMemo(()=>c.filter(k=>k.archived&&!k.deletedAt),[c]),g=L.useMemo(()=>f.filter(k=>k.archived&&!k.deletedAt),[f]),m=k=>{a({...k,archived:!1})},T=k=>{d({...k,archived:!1})},S=k=>{p({title:"Move Deck to Trash",message:`Are you sure you want to move the archived deck "${k.name}" to the trash? This will un-archive it and place it in the trash for 10 days, after which it will be permanently deleted.`,onConfirm:()=>o(k.id)})},E=k=>{p({title:"Move Series to Trash",message:`Are you sure you want to move the archived series "${k.name}" to the trash? It will be un-archived and placed in the trash for 10 days. Decks within the series will NOT be deleted.`,onConfirm:()=>v(k.id)})};return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[r.jsx("h1",{className:"text-3xl font-bold mb-6 text-text border-b border-border pb-4",children:"Archive"}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Archived Series"}),g.length>0?r.jsx("div",{className:"bg-surface rounded-lg shadow-md divide-y divide-border",children:g.map(k=>r.jsxs("div",{className:"p-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center min-w-0",children:[r.jsx(le,{name:"list",className:"w-6 h-6 mr-4 text-purple-500 dark:text-purple-400 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold truncate text-text",children:k.name}),r.jsx("p",{className:"text-sm text-text-muted truncate",children:k.description})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[r.jsxs(ke,{variant:"secondary",size:"sm",onClick:()=>T(k),children:[r.jsx(le,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Unarchive"]}),r.jsxs(ke,{variant:"danger",size:"sm",onClick:()=>E(k),children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Move to Trash"]})]})]},k.id))}):r.jsxs("div",{className:"text-center py-10 bg-surface rounded-lg border border-border",children:[r.jsx(le,{name:"archive",className:"w-12 h-12 mx-auto text-text-muted/50"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:"No Archived Series"}),r.jsx("p",{className:"mt-1 text-sm text-text-muted",children:"You can archive series from their page to hide them from the main list."})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Archived Decks"}),x.length>0?r.jsx("div",{className:"bg-surface rounded-lg shadow-md divide-y divide-border",children:x.map(k=>r.jsxs("div",{className:"p-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center min-w-0",children:[r.jsx(le,{name:k.type==="quiz"?"help-circle":"laptop",className:"w-6 h-6 mr-4 text-text-muted flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold truncate text-text",children:k.name}),r.jsx("p",{className:"text-sm text-text-muted truncate",children:k.description})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[r.jsxs(ke,{variant:"secondary",size:"sm",onClick:()=>m(k),children:[r.jsx(le,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Unarchive"]}),r.jsxs(ke,{variant:"danger",size:"sm",onClick:()=>S(k),children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Move to Trash"]})]})]},k.id))}):r.jsxs("div",{className:"text-center py-10 bg-surface rounded-lg border border-border",children:[r.jsx(le,{name:"archive",className:"w-12 h-12 mx-auto text-text-muted/50"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:"No Archived Decks"}),r.jsx("p",{className:"mt-1 text-sm text-text-muted",children:"You can archive decks from their details page to hide them from view."})]})]})]})},mo=10,mf=a=>{const d=new Date(a),p=(new Date().getTime()-d.getTime())/(1e3*60*60*24);return Math.max(0,Math.ceil(mo-p))},Jp=({onRestoreDeck:a,onRestoreSeries:d,onDeleteDeckPermanently:o,onDeleteSeriesPermanently:v,openConfirmModal:p})=>{const{decks:c,deckSeries:f}=wt(),x=L.useMemo(()=>c.filter(S=>S.deletedAt),[c]),g=L.useMemo(()=>f.filter(S=>S.deletedAt),[f]),m=S=>{p({title:"Permanently Delete Deck",message:`Are you sure you want to permanently delete the deck "${S.name}"? This action cannot be undone.`,onConfirm:()=>o(S.id)})},T=S=>{const E=S.levels.reduce((k,C)=>k+C.deckIds.length,0);p({title:"Permanently Delete Series",message:`Are you sure you want to permanently delete the series "${S.name}"? All ${E} deck(s) inside it will also be permanently deleted. This action cannot be undone.`,onConfirm:()=>v(S.id)})};return r.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[r.jsxs("div",{className:"border-b border-border pb-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-text",children:"Trash"}),r.jsxs("p",{className:"mt-2 text-text-muted",children:["Items in the trash will be permanently deleted after ",mo," days."]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Trashed Series"}),g.length>0?r.jsx("div",{className:"bg-surface rounded-lg shadow-md divide-y divide-border",children:g.map(S=>{const E=mf(S.deletedAt);return r.jsxs("div",{className:"p-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center min-w-0",children:[r.jsx(le,{name:"list",className:"w-6 h-6 mr-4 text-purple-500 dark:text-purple-400 flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold truncate text-text",children:S.name}),r.jsx("p",{className:`text-sm ${E<=2?"text-red-500":"text-text-muted"}`,children:E>0?`${E} days left`:"Deleting soon..."})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[r.jsxs(ke,{variant:"secondary",size:"sm",onClick:()=>d(S.id),children:[r.jsx(le,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsxs(ke,{variant:"danger",size:"sm",onClick:()=>T(S),children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Delete Now"]})]})]},S.id)})}):r.jsxs("div",{className:"text-center py-10 bg-surface rounded-lg border border-border",children:[r.jsx(le,{name:"trash-2",className:"w-12 h-12 mx-auto text-text-muted/50"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:"Trash is Empty"}),r.jsxs("p",{className:"mt-1 text-sm text-text-muted",children:["Deleted series will appear here for ",mo," days."]})]})]}),r.jsxs("section",{children:[r.jsx("h2",{className:"text-2xl font-semibold text-text mb-4",children:"Trashed Decks"}),x.length>0?r.jsx("div",{className:"bg-surface rounded-lg shadow-md divide-y divide-border",children:x.map(S=>{const E=mf(S.deletedAt);return r.jsxs("div",{className:"p-4 flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center min-w-0",children:[r.jsx(le,{name:S.type==="quiz"?"help-circle":"laptop",className:"w-6 h-6 mr-4 text-text-muted flex-shrink-0"}),r.jsxs("div",{className:"min-w-0",children:[r.jsx("p",{className:"font-semibold truncate text-text",children:S.name}),r.jsx("p",{className:`text-sm ${E<=2?"text-red-500":"text-text-muted"}`,children:E>0?`${E} days left`:"Deleting soon..."})]})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[r.jsxs(ke,{variant:"secondary",size:"sm",onClick:()=>a(S.id),children:[r.jsx(le,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Restore"]}),r.jsxs(ke,{variant:"danger",size:"sm",onClick:()=>m(S),children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Delete Now"]})]})]},S.id)})}):r.jsxs("div",{className:"text-center py-10 bg-surface rounded-lg border border-border",children:[r.jsx(le,{name:"trash-2",className:"w-12 h-12 mx-auto text-text-muted/50"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:"Trash is Empty"}),r.jsxs("p",{className:"mt-1 text-sm text-text-muted",children:["Deleted decks will appear here for ",mo," days."]})]})]})]})},Df=({series:a,completedCount:d,dueCount:o,onStartSeriesStudy:v,masteryLevel:p})=>{const c=a.levels.reduce((x,g)=>x+g.deckIds.length,0),f=d>=c&&c>0;return r.jsx(Ft,{href:`/series/${a.id}`,className:"block bg-surface rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border border-transparent hover:border-primary",children:r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[r.jsxs("div",{className:"flex items-center mb-1",children:[r.jsx(le,{name:"layers",className:"w-5 h-5 mr-2 text-purple-500 dark:text-purple-400"}),r.jsx("h3",{className:"text-xl font-bold text-text break-words",children:a.name})]}),a.description&&r.jsx("p",{className:"text-sm text-text-muted mt-1 truncate",children:a.description})]}),f&&r.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 text-green-500 dark:text-green-400 bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-full",children:[r.jsx(le,{name:"check-circle",className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-semibold",children:"Completed"})]})]}),c>0&&r.jsxs("div",{className:"mt-3 space-y-3",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[r.jsx("span",{className:"font-medium text-text-muted",children:"Completion"}),r.jsxs("span",{className:"font-semibold text-text-muted",children:[d," / ",c]})]}),r.jsx(Tc,{current:d,total:c})]}),r.jsx("div",{children:r.jsx(Jn,{level:p})})]}),r.jsx("div",{className:"mt-4 pt-4 border-t border-border/50 flex justify-end",children:r.jsxs(ke,{variant:"secondary",size:"sm",onClick:x=>{x.preventDefault(),x.stopPropagation(),v(a.id)},disabled:o===0,children:[r.jsx(le,{name:"zap",className:"w-4 h-4 mr-2"}),"Study Due (",o,")"]})})]})})},Yp=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type===Ge.Quiz?a.questions:a.cards;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},Kp=a=>a&&new DOMParser().parseFromString(a,"text/html").body.textContent||"",Ic=({deck:a,sessionsToResume:d,onUpdateLastOpened:o,draggedDeckId:v,onDragStart:p,onDragEnd:c,onUpdateDeck:f,onDeleteDeck:x,openConfirmModal:g})=>{const{navigate:m}=jn(),T=Yp(a),S=d.has(a.id),E=a.type===Ge.Quiz?a.questions:a.cards,k=(E==null?void 0:E.length)||0,C=a.type===Ge.Quiz?k===1?"question":"questions":k===1?"card":"cards",[b,D]=L.useState(!1),I=L.useRef(null);L.useEffect(()=>{const G=Q=>{I.current&&!I.current.contains(Q.target)&&D(!1)};return b?document.addEventListener("mousedown",G):document.removeEventListener("mousedown",G),()=>document.removeEventListener("mousedown",G)},[b]);const O=G=>{G.target.closest("button, a")||(o(a.id),m(`/decks/${a.id}`))},z=G=>{f({...a,archived:!0}),D(!1)},M=G=>{g({title:"Move Deck to Trash",message:`Are you sure you want to move the deck "${a.name}" to the trash? It will be permanently deleted after 10 days.`,onConfirm:()=>x(a.id)}),D(!1)},R=L.useMemo(()=>{if(!E)return 0;const G=E.filter(ne=>!ne.suspended);return G.length===0?0:G.reduce((ne,V)=>ne+Jr(V),0)/G.length},[E]);return r.jsxs("div",{draggable:"true",onClick:O,onDragStart:G=>{G.dataTransfer.setData("text/plain",a.id),setTimeout(()=>p(a.id),0)},onDragEnd:c,className:`bg-surface rounded-lg shadow-md hover:shadow-lg transition-all duration-200 group relative ${v===a.id?"border-2 border-dashed border-border bg-background/50":"cursor-pointer"}`,children:[r.jsxs("div",{className:`p-4 pr-10 flex flex-col justify-between h-full space-y-3 ${v===a.id?"opacity-0":""}`,children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-xl font-bold text-text break-words group-hover:text-primary transition-colors",children:a.name}),a.description&&r.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-text-muted mt-1 truncate",title:Kp(a.description),dangerouslySetInnerHTML:{__html:a.description}})]}),r.jsx(Jn,{level:R}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("div",{className:"flex items-center gap-4 text-sm text-text-muted",children:[r.jsxs("span",{className:"flex items-center gap-1.5",children:[r.jsx(le,{name:"list",className:"w-4 h-4"}),k," ",C]}),r.jsxs("span",{className:`flex items-center gap-1.5 font-semibold ${T>0?"text-primary":""}`,children:[r.jsx(le,{name:"zap",className:"w-4 h-4"}),T," due"]})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx(Ft,{href:`/decks/${a.id}/study`,passAs:ke,variant:"primary",size:"sm",onClick:()=>o(a.id),disabled:T===0&&!S,className:"font-semibold",children:S?"Resume":"Study"}),r.jsxs("div",{className:"relative",ref:I,children:[r.jsx(ke,{variant:"ghost",size:"sm",className:"p-2 h-auto",onClick:()=>D(G=>!G),"aria-label":`More options for ${a.name}`,children:r.jsx(le,{name:"more-vertical",className:"w-5 h-5"})}),b&&r.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-surface rounded-md shadow-lg py-1 z-20 ring-1 ring-black ring-opacity-5 animate-fade-in",style:{animationDuration:"150ms"},children:[r.jsxs("button",{onClick:z,className:"flex items-center w-full px-4 py-2 text-sm text-left text-text hover:bg-border/20",children:[r.jsx(le,{name:"archive",className:"w-4 h-4 mr-3"}),"Archive"]}),r.jsx("div",{className:"border-t border-border my-1"}),r.jsxs("button",{onClick:M,className:"flex items-center w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[r.jsx(le,{name:"trash-2",className:"w-4 h-4 mr-3"}),"Move to Trash"]})]})]})]})]})]}),r.jsx("div",{className:"absolute top-0 right-0 h-full flex items-center px-3 text-text-muted/60 cursor-grab","aria-hidden":"true",children:r.jsx(le,{name:"grip-vertical",className:"w-5 h-5"})})]},a.id)},Zp=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type==="quiz"?a.questions:a.cards;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},Xp=({totalDueQuestions:a,onStartGeneralStudy:d,sessionsToResume:o,onUpdateLastOpened:v,onUpdateDeck:p,onDeleteDeck:c,openConfirmModal:f,seriesProgress:x,onStartSeriesStudy:g})=>{const{decks:m,deckSeries:T}=wt(),{recentDecks:S,recentSeries:E,seriesData:k}=L.useMemo(()=>{const C=new Set;T.forEach(M=>{(M.levels||[]).forEach(R=>(R.deckIds||[]).forEach(G=>C.add(G)))});const b=m.filter(M=>!M.archived&&!M.deletedAt&&!C.has(M.id)),I=[...T.filter(M=>!M.archived&&!M.deletedAt)].sort((M,R)=>{const G=(M.levels||[]).flatMap($=>$.deckIds||[]).map($=>m.find(K=>K.id===$)).filter(Boolean),Q=(R.levels||[]).flatMap($=>$.deckIds||[]).map($=>m.find(K=>K.id===$)).filter(Boolean),ne=Math.max(0,...G.map($=>new Date($.lastOpened||0).getTime())),V=Math.max(0,...Q.map($=>new Date($.lastOpened||0).getTime())),ee=Math.max(ne,new Date(M.createdAt||0).getTime());return Math.max(V,new Date(R.createdAt||0).getTime())-ee}).slice(0,2),O=[...b].sort((M,R)=>(R.lastOpened||"").localeCompare(M.lastOpened||"")).slice(0,2),z=new Map;return T.forEach(M=>{var $;const R=(M.levels||[]).flatMap(K=>K.deckIds||[]).map(K=>m.find(_=>_.id===K)).filter(Boolean),G=(($=x.get(M.id))==null?void 0:$.size)||0,Q=new Set;(M.levels||[]).flatMap(K=>K.deckIds||[]).forEach((K,_)=>{_<=G&&Q.add(K)});const V=R.reduce((K,_)=>Q.has(_.id)?K+Zp(_):K,0),ee=R.flatMap(K=>K.type===Ge.Flashcard?K.cards:K.questions).filter(K=>!K.suspended),ae=ee.length>0?ee.reduce((K,_)=>K+Jr(_),0)/ee.length:0;z.set(M.id,{dueCount:V,mastery:ae})}),{recentDecks:O,recentSeries:I,seriesData:z}},[m,T,x]);return r.jsxs("div",{className:"space-y-12",children:[a>0&&r.jsx("div",{className:"mb-6",children:r.jsxs(ke,{onClick:d,variant:"primary",className:"w-full sm:w-auto text-lg py-3",children:[r.jsx(le,{name:"zap",className:"w-5 h-5 mr-2"}),"Study All Due Items (",a,")"]})}),E.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Series"}),r.jsxs(Ft,{href:"/series",passAs:ke,variant:"ghost",children:["View all ",r.jsx(le,{name:"chevron-left",className:"w-4 h-4 ml-2 rotate-180"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:E.map(C=>{var D;const b=k.get(C.id)||{dueCount:0,mastery:0};return r.jsx(Df,{series:C,completedCount:((D=x.get(C.id))==null?void 0:D.size)||0,dueCount:b.dueCount,masteryLevel:b.mastery,onStartSeriesStudy:g},C.id)})})]}),S.length>0&&r.jsxs("section",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-4",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Decks"}),r.jsxs(Ft,{href:"/decks",passAs:ke,variant:"ghost",children:["View all ",r.jsx(le,{name:"chevron-left",className:"w-4 h-4 ml-2 rotate-180"})]})]}),r.jsx("div",{className:"space-y-4",children:S.map(C=>r.jsx(Ic,{deck:C,sessionsToResume:o,onUpdateLastOpened:v,draggedDeckId:null,onDragStart:()=>{},onDragEnd:()=>{},onUpdateDeck:p,onDeleteDeck:c,openConfirmModal:f},C.id))})]})]})},eg=({folder:a,decks:d,isOpen:o,onToggle:v,sessionsToResume:p,onUpdateLastOpened:c,onEditFolder:f,onDeleteFolder:x,draggedDeckId:g,onDragStart:m,onDragEnd:T,onMoveDeck:S,onUpdateDeck:E,onDeleteDeck:k,openConfirmModal:C})=>{const[b,D]=L.useState(!1),I=M=>{M.preventDefault(),M.stopPropagation();const R=M.dataTransfer.getData("text/plain");R&&R===g&&(S(R,a.id),T()),D(!1)},O=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move",D(!0)},z=()=>{D(!1)};return r.jsxs("div",{className:`rounded-lg transition-all duration-200 ${b?"bg-primary/20 ring-2 ring-primary ring-inset":"bg-surface border border-border"}`,onDrop:I,onDragOver:O,onDragLeave:z,children:[r.jsx("div",{className:"border-b border-border",children:r.jsxs("button",{onClick:v,className:"w-full flex justify-between items-center text-left p-4","aria-expanded":o,children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx(le,{name:"chevron-down",className:`w-5 h-5 transition-transform duration-300 mr-3 ${o?"":"-rotate-90"} text-text-muted`}),r.jsx(le,{name:"folder",className:"w-6 h-6 mr-3 text-yellow-600 dark:text-yellow-500"}),r.jsx("h3",{className:"text-xl font-bold text-text",children:a.name})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx(ke,{variant:"ghost",className:"p-2 h-auto",onClick:M=>{M.stopPropagation(),f(a)},"aria-label":`Edit folder ${a.name}`,children:r.jsx(le,{name:"edit",className:"w-4 h-4"})}),r.jsx(ke,{variant:"ghost",className:"p-2 h-auto hover:text-red-500",onClick:M=>{M.stopPropagation(),x(a.id)},"aria-label":`Delete folder ${a.name}`,children:r.jsx(le,{name:"trash-2",className:"w-4 h-4"})})]})]})}),o&&r.jsx("div",{className:"p-4 space-y-4",children:d.length>0?d.map(M=>r.jsx(Ic,{deck:M,sessionsToResume:p,onUpdateLastOpened:c,draggedDeckId:g,onDragStart:m,onDragEnd:T,onUpdateDeck:E,onDeleteDeck:k,openConfirmModal:C},M.id)):r.jsxs("div",{className:"flex flex-col items-center justify-center p-6 border-2 border-dashed border-border rounded-md m-4 text-center",children:[r.jsx(le,{name:"grip-vertical",className:"w-8 h-8 text-text-muted mb-2"}),r.jsx("p",{className:"text-sm font-medium text-text-muted",children:"Drag a deck here to organize it!"})]})})]})},tg=({decks:a,folders:d,sessionsToResume:o,onUpdateLastOpened:v,onEditFolder:p,onDeleteFolder:c,draggedDeckId:f,onDragStart:x,onDragEnd:g,onMoveDeck:m,openFolderIds:T,onToggleFolder:S,onUpdateDeck:E,onDeleteDeck:k,openConfirmModal:C})=>{const{decksByFolder:b,ungroupedDecks:D}=L.useMemo(()=>{const R=new Map,G=[];return a.forEach(Q=>{Q.folderId&&d.some(ne=>ne.id===Q.folderId)?(R.has(Q.folderId)||R.set(Q.folderId,[]),R.get(Q.folderId).push(Q)):G.push(Q)}),{decksByFolder:R,ungroupedDecks:G}},[a,d]),[I,O]=L.useState(!1),z=R=>{R.preventDefault();const G=R.dataTransfer.getData("text/plain");G&&G===f&&(m(G,null),g()),O(!1)},M=R=>{R.preventDefault(),R.dataTransfer.dropEffect="move",O(!0)};return r.jsxs("div",{className:"space-y-4",children:[d.map(R=>r.jsx(eg,{folder:R,decks:b.get(R.id)||[],isOpen:T.has(R.id),onToggle:()=>S(R.id),sessionsToResume:o,onUpdateLastOpened:v,onEditFolder:p,onDeleteFolder:c,draggedDeckId:f,onDragStart:x,onDragEnd:g,onMoveDeck:m,onUpdateDeck:E,onDeleteDeck:k,openConfirmModal:C},R.id)),r.jsx("div",{onDrop:z,onDragOver:M,onDragLeave:()=>O(!1),className:`p-2 -m-2 rounded-lg transition-all duration-200 ${I?"bg-primary/20 ring-2 ring-primary ring-inset":""}`,children:r.jsx("div",{className:"space-y-4",children:D.map(R=>r.jsx(Ic,{deck:R,sessionsToResume:o,onUpdateLastOpened:v,draggedDeckId:f,onDragStart:x,onDragEnd:g,onUpdateDeck:E,onDeleteDeck:k,openConfirmModal:C},R.id))})})]})},rg=[{key:"lastOpened",label:"Recent"},{key:"name",label:"Name"},{key:"dueCount",label:"Due"}],jc=({currentSort:a,onSortChange:d,sortOptions:o})=>{const v=o??rg;return r.jsx("div",{className:"inline-flex rounded-md shadow-sm bg-gray-100 dark:bg-gray-800 p-1",role:"group",children:v&&v.map((p,c)=>r.jsx("button",{type:"button",onClick:()=>d(p.key),className:`px-4 py-1.5 text-sm font-medium transition-colors focus:z-10 focus:outline-none focus:ring-2 focus:ring-blue-500
            ${a===p.key?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200/50 dark:hover:bg-gray-700/50"}
            ${c===0?"rounded-l-md":""}
            ${c===v.length-1?"rounded-r-md":""}
          `,"aria-pressed":a===p.key,children:p.label},p.key))})},pf=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type==="quiz"?a.questions:a.cards;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},ng=a=>{const[d,o]=L.useState(""),v=wt(x=>x.folders),p=L.useMemo(()=>{const x=a.decks.filter(g=>{var m;return g.name.toLowerCase().includes(d.toLowerCase())||((m=g.description)==null?void 0:m.toLowerCase().includes(d.toLowerCase()))});switch(a.sortPreference){case"name":return x.sort((g,m)=>g.name.localeCompare(m.name));case"dueCount":return x.sort((g,m)=>pf(m)-pf(g));case"lastOpened":default:return x.sort((g,m)=>(m.lastOpened||"").localeCompare(g.lastOpened||""))}},[a.decks,d,a.sortPreference]),c=L.useMemo(()=>[...v].sort((x,g)=>x.name.localeCompare(g.name)),[v]);return a.decks.length>0||v.length>0?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-text",children:"All Decks"}),r.jsxs(ke,{variant:"primary",onClick:a.onImportDecks,children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import Deck"]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-surface rounded-lg border border-border",children:[r.jsxs("div",{className:"relative w-full md:max-w-xs",children:[r.jsx(le,{name:"search",className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),r.jsx("input",{type:"text",placeholder:"Search decks...",value:d,onChange:x=>o(x.target.value),className:"w-full pl-10 pr-4 py-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[r.jsxs(ke,{variant:"ghost",onClick:a.onNewFolder,children:[r.jsx(le,{name:"folder-plus",className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"hidden sm:inline",children:"New Folder"})]}),r.jsx(jc,{currentSort:a.sortPreference,onSortChange:a.onSortChange})]})]}),p.length===0&&d?r.jsxs("div",{className:"text-center py-20",children:[r.jsx(le,{name:"search",className:"w-16 h-16 mx-auto text-text-muted/50"}),r.jsx("h2",{className:"mt-4 text-2xl font-bold text-text-muted",children:"No Decks Found"}),r.jsxs("p",{className:"mt-2 text-text-muted",children:['Your search for "',d,'" did not match any decks.']}),r.jsx(ke,{variant:"secondary",onClick:()=>o(""),className:"mt-6",children:"Clear Search"})]}):r.jsx(tg,{decks:p,folders:c,...a})]}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx(le,{name:"folder",className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600"}),r.jsx("h2",{className:"mt-4 text-2xl font-bold text-text-muted",children:"Your deck collection is empty"}),r.jsx("p",{className:"mt-2 text-text-muted",children:"Create a new deck, import from a file, or try a sample deck to get started."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8",children:[r.jsxs(ke,{onClick:a.onImportDecks,children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Create or Import Deck"]}),r.jsxs(ke,{onClick:a.onCreateSampleDeck,variant:"secondary",children:[r.jsx(le,{name:"laptop",className:"w-5 h-5 mr-2"}),"Create Sample Deck"]})]})]})},sg=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type==="quiz"?a.questions:a.cards;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},ag=({seriesProgress:a,onStartSeriesStudy:d,onCreateNewSeries:o,onCreateSampleSeries:v})=>{const{deckSeries:p,decks:c}=wt(),[f,x]=L.useState(""),[g,m]=L.useState("recent"),[T,S]=L.useState("all"),E=L.useMemo(()=>p.filter(I=>!I.archived&&!I.deletedAt),[p]),k=L.useMemo(()=>{const I=new Map;return E.forEach(O=>{var ee;const z=(O.levels||[]).flatMap(ae=>ae.deckIds||[]).map(ae=>c.find($=>$.id===ae)).filter(Boolean),M=((ee=a.get(O.id))==null?void 0:ee.size)||0,R=new Set;(O.levels||[]).flatMap(ae=>ae.deckIds||[]).forEach((ae,$)=>{$<=M&&R.add(ae)});const Q=z.reduce((ae,$)=>R.has($.id)?ae+sg($):ae,0),ne=z.flatMap(ae=>ae.type===Ge.Flashcard?ae.cards:ae.questions).filter(ae=>!ae.suspended),V=ne.length>0?ne.reduce((ae,$)=>ae+Jr($),0)/ne.length:0;I.set(O.id,{dueCount:Q,mastery:V})}),I},[E,c,a]),C=L.useMemo(()=>{let I=E.filter(O=>O.name.toLowerCase().includes(f.toLowerCase())||O.description.toLowerCase().includes(f.toLowerCase()));switch(T!=="all"&&(I=I.filter(O=>{var G;const z=(O.levels||[]).reduce((Q,ne)=>Q+(ne.deckIds||[]).length,0);if(z===0)return T==="inProgress";const R=(((G=a.get(O.id))==null?void 0:G.size)||0)>=z;return T==="completed"?R:!R})),g){case"recent":return I.sort((O,z)=>{const M=(O.levels||[]).flatMap(ee=>ee.deckIds).map(ee=>c.find(ae=>ae.id===ee)).filter(ee=>!!ee),R=(z.levels||[]).flatMap(ee=>ee.deckIds).map(ee=>c.find(ae=>ae.id===ee)).filter(ee=>!!ee),G=Math.max(0,...M.map(ee=>new Date(ee.lastOpened||0).getTime())),Q=Math.max(0,...R.map(ee=>new Date(ee.lastOpened||0).getTime())),ne=Math.max(G,new Date(O.createdAt||0).getTime());return Math.max(Q,new Date(z.createdAt||0).getTime())-ne});case"progress":return I.sort((O,z)=>{var G,Q;const M=(((G=a.get(O.id))==null?void 0:G.size)||0)/((O.levels||[]).reduce((ne,V)=>ne+(V.deckIds||[]).length,0)||1);return(((Q=a.get(z.id))==null?void 0:Q.size)||0)/((z.levels||[]).reduce((ne,V)=>ne+(V.deckIds||[]).length,0)||1)-M});case"mastery":return I.sort((O,z)=>{var G,Q;const M=((G=k.get(O.id))==null?void 0:G.mastery)||0;return(((Q=k.get(z.id))==null?void 0:Q.mastery)||0)-M});case"name":default:return I.sort((O,z)=>O.name.localeCompare(z.name))}},[E,f,g,T,a,k,c]),b=[{key:"recent",label:"Recent"},{key:"name",label:"Name"},{key:"progress",label:"Progress"},{key:"mastery",label:"Mastery"}],D=[{key:"all",label:"All"},{key:"inProgress",label:"In Progress"},{key:"completed",label:"Completed"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[r.jsx("h1",{className:"text-3xl font-bold text-text",children:"All Series"}),r.jsxs(ke,{variant:"primary",onClick:o,children:[r.jsx(le,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]})]}),r.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-surface rounded-lg border border-border",children:[r.jsxs("div",{className:"relative w-full md:max-w-xs",children:[r.jsx(le,{name:"search",className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-text-muted"}),r.jsx("input",{type:"text",placeholder:"Search series...",value:f,onChange:I=>x(I.target.value),className:"w-full pl-10 pr-4 py-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]}),r.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx(le,{name:"filter",className:"w-5 h-5 text-text-muted"}),r.jsx(jc,{currentSort:T,onSortChange:I=>S(I),sortOptions:D})]}),r.jsx(jc,{currentSort:g,onSortChange:I=>m(I),sortOptions:b})]})]}),C.length>0?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:C.map(I=>{var z;const O=k.get(I.id)||{dueCount:0,mastery:0};return r.jsx(Df,{series:I,completedCount:((z=a.get(I.id))==null?void 0:z.size)||0,dueCount:O.dueCount,masteryLevel:O.mastery,onStartSeriesStudy:d},I.id)})}):r.jsxs("div",{className:"text-center py-10",children:[r.jsx(le,{name:"layers",className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600"}),r.jsx("h3",{className:"mt-2 text-xl font-medium text-text",children:f?"No series found":"Your series collection is empty"}),r.jsx("p",{className:"mt-1 text-sm text-text-muted",children:f?"Try adjusting your search or filter.":"Create a new series or try a sample to get started."}),!f&&E.length===0&&r.jsx("div",{className:"mt-6",children:r.jsxs(ke,{onClick:v,variant:"secondary",children:[r.jsx(le,{name:"zap",className:"w-4 h-4 mr-2"})," Create Sample Series"]})})]})]})},xc=({icon:a,label:d,value:o})=>r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border flex items-center",children:[r.jsx("div",{className:"flex-shrink-0",children:a}),r.jsxs("div",{className:"ml-5 w-0 flex-1",children:[r.jsx("dt",{className:"text-sm font-medium text-text-muted truncate",children:d}),r.jsx("dd",{className:"text-2xl font-bold text-text",children:o})]})]}),ig=({stats:a})=>r.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-3",children:[r.jsx(xc,{icon:r.jsx(le,{name:"zap",className:"h-8 w-8 text-orange-400"}),label:"Current Streak",value:`${a.streak} day${a.streak!==1?"s":""}`}),r.jsx(xc,{icon:r.jsx(le,{name:"check-circle",className:"h-8 w-8 text-blue-400"}),label:"Total Reviews",value:a.totalReviews.toLocaleString()}),r.jsx(xc,{icon:r.jsx(le,{name:"trending-up",className:"h-8 w-8 text-green-400"}),label:"Mature Items",value:a.matureCount.toLocaleString()})]}),og=({reviews:a})=>{const{grid:d,maxCount:o}=L.useMemo(()=>{const c=new Date;c.setHours(0,0,0,0);const f=new Date(c);f.setDate(f.getDate()+1);const x=new Date(f);x.setDate(x.getDate()-364-c.getDay());const g=new Map;a.forEach(E=>{const k=new Date(E.timestamp);k.setHours(0,0,0,0);const C=k.toISOString().split("T")[0];g.set(C,(g.get(C)||0)+1)});const m=Math.max(...Array.from(g.values()),1),T=[];let S=new Date(x);for(;T.length<371;){const E=S.toISOString().split("T")[0],k=g.get(E)||0;T.push({date:new Date(S),count:k}),S.setDate(S.getDate()+1)}return{grid:T,maxCount:m}},[a]),v=c=>{if(c===0)return"fill-gray-200 dark:fill-gray-700/50";const f=Math.min(c/(o*.75),1);return f>.8?"fill-green-600":f>.5?"fill-green-500":f>.2?"fill-green-400":"fill-green-300"},p=L.useMemo(()=>{var x;const c=[];let f=-1;for(let g=0;g<53;g++){const m=(x=d[g*7])==null?void 0:x.date;if(m){const T=m.getMonth();T!==f&&c.push({month:m.toLocaleString("default",{month:"short"}),col:g}),f=T}}return c},[d]);return r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("svg",{width:"100%",viewBox:"0 0 848 128",children:[p.map(({month:c,col:f})=>r.jsx("text",{x:16*f+24,y:"15",className:"text-xs fill-text-muted",children:c},f)),r.jsx("text",{x:"0",y:"37",className:"text-xs fill-text-muted",children:"Mon"}),r.jsx("text",{x:"0",y:"69",className:"text-xs fill-text-muted",children:"Wed"}),r.jsx("text",{x:"0",y:"101",className:"text-xs fill-text-muted",children:"Fri"}),d.map((c,f)=>{if(!c)return null;const x=Math.floor(f/7),g=f%7;return r.jsx("rect",{x:16*x+24,y:16*g+24,width:"12",height:"12",rx:"2",ry:"2",className:v(c.count),children:r.jsx("title",{children:`${c.date.toDateString()}: ${c.count} review${c.count!==1?"s":""}`})},f)})]})})},lg=({items:a})=>{const d=L.useMemo(()=>{const m=new Date;m.setHours(0,0,0,0);const T=Array(30).fill(0);a.forEach(E=>{const k=new Date(E.dueDate);k.setHours(0,0,0,0);const C=k.getTime()-m.getTime();if(C>=0){const b=Math.floor(C/864e5);b<30&&T[b]++}});const S=Array.from({length:30},(E,k)=>{const C=new Date(m);return C.setDate(C.getDate()+k),k%7===0||k===0?C.toLocaleDateString("en-US",{month:"short",day:"numeric"}):""});return{counts:T,labels:S}},[a]),o=Math.max(...d.counts,1),v=350,p=180,c={top:25,right:10,bottom:25,left:10},f=v-c.left-c.right,x=p-c.top-c.bottom,g=f/d.counts.length-2;return r.jsx("div",{className:"w-full",children:r.jsxs("svg",{viewBox:`0 0 ${v} ${p}`,width:"100%",height:"auto","aria-labelledby":"forecast-graph-title",role:"img",className:"overflow-visible",children:[r.jsx("title",{id:"forecast-graph-title",children:"A bar chart showing the number of items due each day for the next 30 days."}),d.counts.map((m,T)=>{const S=m>0?m/o*x:0,E=c.left+T*(g+2),k=c.top+x-S;return r.jsxs("g",{className:"group cursor-pointer",children:[r.jsxs("title",{children:[d.labels[T]||new Date(new Date().setDate(new Date().getDate()+T)).toLocaleDateString(),": ",m," items"]}),r.jsx("rect",{x:E,y:k,width:g,height:S,rx:"2",className:"fill-primary/60 transition-colors group-hover:fill-primary"}),r.jsx("text",{x:E+g/2,y:k-6,textAnchor:"middle",className:"text-xs font-semibold fill-text-muted transition-opacity opacity-0 group-hover:opacity-100 pointer-events-none",children:m})]},T)}),d.labels.map((m,T)=>m?r.jsx("text",{x:c.left+T*(g+2)+g/2,y:p-c.bottom+15,textAnchor:"middle",className:"text-xs fill-text-muted",children:m},T):null)]})})},cg=({reviews:a})=>{const d=L.useMemo(()=>{const v=new Date;v.setDate(v.getDate()-30);const p=a.filter(g=>g.rating!==null&&new Date(g.timestamp)>=v),c={[ct.Again]:0,[ct.Hard]:0,[ct.Good]:0,[ct.Easy]:0};let f=0;p.forEach(g=>{g.rating&&c.hasOwnProperty(g.rating)&&(c[g.rating]++,f++)});const x=g=>f>0?(g/f*100).toFixed(1):"0.0";return{total:f,again:{count:c[ct.Again],percent:x(c[ct.Again])},hard:{count:c[ct.Hard],percent:x(c[ct.Hard])},good:{count:c[ct.Good],percent:x(c[ct.Good])},easy:{count:c[ct.Easy],percent:x(c[ct.Easy])},correctPercent:x(c[ct.Hard]+c[ct.Good]+c[ct.Easy])}},[a]);if(d.total===0)return r.jsx("div",{className:"text-center py-10",children:r.jsx("p",{className:"text-text-muted",children:"Not enough data from the last 30 days."})});const o=[{label:"Again",percent:d.again.percent,color:"bg-red-500"},{label:"Hard",percent:d.hard.percent,color:"bg-orange-500"},{label:"Good",percent:d.good.percent,color:"bg-green-500"},{label:"Easy",percent:d.easy.percent,color:"bg-blue-500"}];return r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("p",{className:"text-lg text-text-muted",children:"Reviews Marked Correct"}),r.jsxs("p",{className:"text-4xl font-bold text-green-500",children:[d.correctPercent,"%"]})]}),r.jsx("div",{className:"flex w-full h-4 rounded-full overflow-hidden",role:"progressbar",children:o.map(v=>v.percent!=="0.0"&&r.jsx("div",{className:v.color,style:{width:`${v.percent}%`},title:`${v.label}: ${v.percent}%`},v.label))}),r.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-2 text-sm",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-red-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Again: ",r.jsx("strong",{children:d.again.count})," (",d.again.percent,"%)"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Hard: ",r.jsx("strong",{children:d.hard.count})," (",d.hard.percent,"%)"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Good: ",r.jsx("strong",{children:d.good.count})," (",d.good.percent,"%)"]})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),r.jsxs("span",{className:"text-text-muted",children:["Easy: ",r.jsx("strong",{children:d.easy.count})," (",d.easy.percent,"%)"]})]})]})]})},ug=()=>{const[a,d]=L.useState([]),[o,v]=L.useState(!0),[p,c]=L.useState(null),f=wt(m=>m.decks);L.useEffect(()=>{(async()=>{try{const T=new Date;T.setFullYear(T.getFullYear()-1);const S=await im(T);d(S)}catch(T){console.error("Failed to load review data:",T),c("Could not load your review data. Please try again later.")}finally{v(!1)}})()},[]);const x=L.useMemo(()=>{if(o)return null;let m=0;const T=a.map(C=>new Date(C.timestamp).setHours(0,0,0,0)),S=[...new Set(T)];if(S.sort((C,b)=>b-C),S.length>0){const C=new Date().setHours(0,0,0,0),b=new Date(C).setDate(new Date(C).getDate()-1);if(S[0]===C||S[0]===b){m=1;for(let D=1;D<S.length;D++){const I=S[D-1],O=S[D],z=new Date(I).setDate(new Date(I).getDate()-1);if(O===z)m++;else break}}}const k=f.reduce((C,b)=>b.type==="flashcard"?C.concat(b.cards):C.concat(b.questions),[]).filter(C=>(C.interval||0)>=21&&!C.suspended).length;return{streak:m,totalReviews:a.length,matureCount:k}},[a,f,o]),g=L.useMemo(()=>f.reduce((T,S)=>S.type==="flashcard"?T.concat(S.cards):T.concat(S.questions),[]).filter(T=>!T.suspended),[f]);return o?r.jsxs("div",{className:"flex items-center justify-center h-64",children:[r.jsx(Vn,{size:"lg"}),r.jsx("p",{className:"ml-4 text-text-muted",children:"Calculating your progress..."})]}):p?r.jsx("div",{className:"text-center py-10",children:r.jsx("p",{className:"text-red-500",children:p})}):a.length===0?r.jsxs("div",{className:"text-center py-20",children:[r.jsx("h2",{className:"text-2xl font-bold text-text-muted",children:"No review history yet."}),r.jsx("p",{className:"mt-2 text-text-muted",children:"Complete a study session to start tracking your progress!"})]}):r.jsxs("div",{className:"max-w-5xl mx-auto animate-fade-in space-y-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-text border-b border-border pb-4",children:"Your Progress"}),r.jsx(ig,{stats:x}),r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"Activity"}),r.jsx(og,{reviews:a})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"30-Day Forecast"}),r.jsx(lg,{items:g})]}),r.jsxs("div",{className:"bg-surface p-6 rounded-lg shadow-md border border-border",children:[r.jsx("h2",{className:"text-xl font-semibold text-text mb-4",children:"Retention (Last 30 Days)"}),r.jsx(cg,{reviews:a})]})]})]})},dg=a=>{const d=new Date;d.setHours(23,59,59,999);const o=a.type===Ge.Quiz?a.questions:a.cards;return Array.isArray(o)?o.filter(v=>!v.suspended&&new Date(v.dueDate)<=d).length:0},fg=a=>{const{path:d}=jn(),{decks:o,folders:v,deckSeries:p}=wt(),{activeDeck:c,activeSeries:f,generalStudyDeck:x}=a,[g]=d.split("?"),{standaloneDecks:m,totalDueQuestions:T}=L.useMemo(()=>{const E=new Set;p.forEach(D=>{(D.levels||[]).forEach(I=>(I.deckIds||[]).forEach(O=>E.add(O)))});const k=o.filter(D=>!D.archived&&!D.deletedAt&&!E.has(D.id)),C=new Set;p.forEach(D=>{var I;if(!D.archived&&!D.deletedAt){const O=((I=a.seriesProgress.get(D.id))==null?void 0:I.size)||0;(D.levels||[]).flatMap(M=>M.deckIds||[]).forEach((M,R)=>{R<=O&&C.add(M)})}});const b=o.filter(D=>!(D.archived||D.deletedAt||E.has(D.id)&&!C.has(D.id))).reduce((D,I)=>D+dg(I),0);return{standaloneDecks:k,totalDueQuestions:b}},[o,p,a.seriesProgress]);if(g==="/trash")return r.jsx(Jp,{onRestoreDeck:a.handleRestoreDeck,onRestoreSeries:a.handleRestoreSeries,onDeleteDeckPermanently:a.handleDeleteDeckPermanently,onDeleteSeriesPermanently:a.handleDeleteSeriesPermanently,openConfirmModal:a.openConfirmModal});if(g==="/archive")return r.jsx(Vp,{onUpdateDeck:a.handleUpdateDeck,onUpdateSeries:a.handleUpdateSeries,onDeleteDeck:a.handleDeleteDeck,onDeleteSeries:a.handleDeleteSeries,openConfirmModal:a.openConfirmModal});if(g==="/progress")return r.jsx(ug,{});if(g.startsWith("/series/")&&f)return r.jsx(Gp,{series:f,completedDeckIds:a.seriesProgress.get(f.id)||new Set,sessionsToResume:a.sessionsToResume,onUpdateSeries:a.handleUpdateSeries,onDeleteSeries:a.handleDeleteSeries,onAddDeckToSeries:a.handleAddDeckToSeries,onUpdateDeck:a.handleUpdateDeck,onStartSeriesStudy:a.handleStartSeriesStudy,openConfirmModal:a.openConfirmModal},f.id);if(g==="/study/general"){const E=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return x&&r.jsx(Ba,{deck:x,seriesId:E,onSessionEnd:k=>a.handleSessionEnd(k,E),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:()=>{}},"general-study")}if(g.startsWith("/decks/")&&g.endsWith("/cram")&&c){const k=[...(c.type===Ge.Flashcard?c.cards:c.questions).filter(D=>!D.suspended)].sort(()=>Math.random()-.5);let C;c.type===Ge.Flashcard?C={...c,name:`${c.name} (Cram)`,cards:k}:C={...c,name:`${c.name} (Cram)`,questions:k};const b=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return r.jsx(Ba,{deck:C,seriesId:b,onSessionEnd:D=>a.handleSessionEnd(D,b),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened,sessionKeySuffix:"_cram"},`${c.id}-cram`)}if(g.startsWith("/decks/")&&g.endsWith("/study-flip")&&c&&c.type===Ge.Quiz){const E=c,k=(E.questions||[]).filter(D=>!D.suspended).map(D=>{const I=D.options.find(z=>z.id===D.correctAnswerId),O=`
                        <div class="text-left w-full">
                            <p class="text-xl"><b>Answer:</b> ${(I==null?void 0:I.text)||"N/A"}</p>
                            <hr class="my-4 border-gray-300 dark:border-gray-600"/>
                            <p class="text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Explanation</p>
                            <div class="prose prose-sm dark:prose-invert max-w-none mt-2">${D.detailedExplanation||"No detailed explanation provided."}</div>
                        </div>
                    `;return{...D,front:D.questionText,back:O}}),C={...E,name:`${E.name} (Review)`,type:Ge.Flashcard,cards:k.sort(()=>Math.random()-.5)},b=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return r.jsx(Ba,{deck:C,seriesId:b,onSessionEnd:D=>a.handleSessionEnd(D,b),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened,sessionKeySuffix:"_flip"},`${c.id}-flip`)}if(g.startsWith("/decks/")&&g.endsWith("/study-reversed")&&c&&c.type===Ge.Flashcard){const E={...c,name:`${c.name} (Reversed)`,cards:c.cards.map(C=>({...C,front:C.back,back:C.front}))},k=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return r.jsx(Ba,{deck:E,seriesId:k,onSessionEnd:C=>a.handleSessionEnd(C,k),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened,sessionKeySuffix:"_reversed"},`${c.id}-reversed`)}if(g.startsWith("/decks/")&&g.endsWith("/study")){const E=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return c&&r.jsx(Ba,{deck:c,seriesId:E,onSessionEnd:k=>a.handleSessionEnd(k,E),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened},c.id)}if(g.startsWith("/decks/"))return c&&r.jsx(Hp,{deck:c,sessionsToResume:a.sessionsToResume,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,onUpdateLastOpened:a.updateLastOpened,openConfirmModal:a.openConfirmModal},c.id);if(g==="/settings")return r.jsx(Ip,{onExport:a.handleExportData,onRestore:()=>a.setRestoreModalOpen(!0),onRestoreData:a.handleRestoreData,onResetProgress:()=>a.setResetProgressModalOpen(!0),onFactoryReset:a.handleFactoryReset});if(g==="/instructions/json")return r.jsx(Wp,{});if(g==="/decks")return r.jsx(ng,{decks:m,sessionsToResume:a.sessionsToResume,sortPreference:a.sortPreference,onSortChange:a.setSortPreference,onUpdateLastOpened:a.updateLastOpened,onEditFolder:E=>a.openFolderModal(E),onDeleteFolder:a.handleDeleteFolder,draggedDeckId:a.draggedDeckId,onDragStart:a.setDraggedDeckId,onDragEnd:()=>a.setDraggedDeckId(null),onMoveDeck:a.handleMoveDeck,openFolderIds:a.openFolderIds,onToggleFolder:a.onToggleFolder,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,openConfirmModal:a.openConfirmModal,onNewFolder:()=>a.openFolderModal("new"),onImportDecks:()=>a.setImportModalOpen(!0),onCreateSampleDeck:a.handleCreateSampleDeck});if(g==="/series")return r.jsx(ag,{seriesProgress:a.seriesProgress,onStartSeriesStudy:a.handleStartSeriesStudy,onCreateNewSeries:a.openCreateSeriesModal,onCreateSampleSeries:a.handleCreateSampleSeries});const S=p.filter(E=>!E.archived&&!E.deletedAt);return m.length>0||S.length>0?r.jsx(Xp,{totalDueQuestions:T,onStartGeneralStudy:a.handleStartGeneralStudy,sessionsToResume:a.sessionsToResume,onUpdateLastOpened:a.updateLastOpened,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,openConfirmModal:a.openConfirmModal,seriesProgress:a.seriesProgress,onStartSeriesStudy:a.handleStartSeriesStudy}):r.jsxs("div",{className:"text-center py-20",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-600 dark:text-gray-400",children:"Welcome to CogniFlow"}),r.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-500",children:"Create decks, import content, restore from a backup, or try a sample to get started."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8 flex-wrap",children:[r.jsxs(ke,{onClick:()=>a.setImportModalOpen(!0),children:[r.jsx(le,{name:"plus",className:"w-5 h-5 mr-2"}),"Create or Import Deck"]}),r.jsxs(ke,{onClick:()=>a.setRestoreModalOpen(!0),variant:"secondary",children:[r.jsx(le,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),"Restore from Backup"]}),r.jsxs(ke,{onClick:a.openCreateSeriesModal,variant:"secondary",children:[r.jsx(le,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]}),r.jsxs(ke,{onClick:a.handleCreateSampleDeck,variant:"ghost",children:[r.jsx(le,{name:"laptop",className:"w-5 h-5 mr-2"}),"Create Sample Deck"]}),r.jsxs(ke,{onClick:a.handleCreateSampleSeries,variant:"ghost",children:[r.jsx(le,{name:"zap",className:"w-5 h-5 mr-2"}),"Create Sample Series"]})]})]})},gf=a=>new DOMParser().parseFromString(a,"text/html").body.textContent||"",hg=({isOpen:a,onClose:d,actions:o})=>{const[v,p]=L.useState(""),[c,f]=L.useState(0),x=L.useRef(null),g=L.useRef(null),{navigate:m}=jn(),{decks:T,deckSeries:S}=wt();Er(x,a);const E=L.useMemo(()=>{const M=[];return o.forEach(R=>M.push({type:"action",id:R.id,label:R.label,icon:R.icon,run:R.action,keywords:R.keywords,searchableOnly:R.searchableOnly})),T.filter(R=>!R.archived&&!R.deletedAt).forEach(R=>M.push({type:"deck",id:R.id,name:R.name,itemType:R.type})),S.filter(R=>!R.archived&&!R.deletedAt).forEach(R=>M.push({type:"series",id:R.id,name:R.name})),T.filter(R=>!R.archived&&!R.deletedAt).forEach(R=>{R.type==="flashcard"?R.cards.forEach(G=>M.push({type:"card",id:G.id,deckId:R.id,deckName:R.name,front:G.front})):R.questions.forEach(G=>M.push({type:"question",id:G.id,deckId:R.id,deckName:R.name,text:G.questionText}))}),M},[o,T,S]),k=L.useMemo(()=>{if(!v.trim())return E.filter(G=>G.type==="action"&&!G.searchableOnly);const M=v.toLowerCase();return E.filter(G=>{switch(G.type){case"action":{const Q=G,ne=Q.label.toLowerCase().includes(M),V=(Q.keywords||[]).some(ee=>ee.toLowerCase().includes(M));return ne||V}case"deck":return G.name.toLowerCase().includes(M);case"series":return G.name.toLowerCase().includes(M);case"card":return gf(G.front).toLowerCase().includes(M);case"question":return G.text.toLowerCase().includes(M);default:return!1}}).slice(0,50)},[v,E]),C=L.useMemo(()=>{const M={Actions:[],Series:[],Decks:[],Cards:[]};return k.forEach(R=>{R.type==="action"?M.Actions.push(R):R.type==="series"?M.Series.push(R):R.type==="deck"?M.Decks.push(R):(R.type==="card"||R.type==="question")&&M.Cards.push(R)}),Object.entries(M).filter(([,R])=>R.length>0)},[k]),b=L.useMemo(()=>C.flatMap(([,M])=>M),[C]),D=L.useCallback(M=>{switch(M.type){case"action":M.run();break;case"deck":m(`/decks/${M.id}`);break;case"series":m(`/series/${M.id}`);break;case"card":case"question":m(`/decks/${M.deckId}`);break}d()},[m,d]);L.useEffect(()=>{const M=R=>{if(a)if(R.key==="ArrowDown")R.preventDefault(),f(G=>(G+1)%(b.length||1));else if(R.key==="ArrowUp")R.preventDefault(),f(G=>(G-1+(b.length||1))%(b.length||1));else if(R.key==="Enter"){R.preventDefault();const G=b[c];G&&D(G)}else R.key==="Escape"&&d()};return window.addEventListener("keydown",M),()=>window.removeEventListener("keydown",M)},[a,c,b,D,d]),L.useEffect(()=>{a&&(p(""),f(0))},[a]),L.useEffect(()=>{f(0)},[v]),L.useEffect(()=>{var M;(M=document.getElementById(`cmdk-item-${c}`))==null||M.scrollIntoView({block:"nearest"})},[c]);const I=M=>{M.target===M.currentTarget&&d()};if(!a)return null;const O=(M,R)=>{let G,Q="",ne;switch(M.type){case"action":G=M.icon,Q=M.label;break;case"deck":G=M.itemType==="quiz"?"help-circle":"laptop",Q=M.name;break;case"series":G="layers",Q=M.name;break;case"card":G="laptop",Q=gf(M.front),ne=`In: ${M.deckName}`;break;case"question":G="help-circle",Q=M.text,ne=`In: ${M.deckName}`;break}return r.jsxs("li",{id:`cmdk-item-${R}`,role:"option","aria-selected":c===R,onClick:()=>D(M),className:`flex items-center gap-4 px-4 py-3 cursor-pointer rounded-md ${c===R?"bg-primary/10":"hover:bg-border/30"}`,children:[r.jsx(le,{name:G,className:"w-5 h-5 text-text-muted flex-shrink-0"}),r.jsxs("div",{className:"flex-grow min-w-0",children:[r.jsx("p",{className:`font-medium truncate ${c===R?"text-primary":"text-text"}`,children:Q}),ne&&r.jsx("p",{className:`text-sm truncate ${c===R?"text-primary/80":"text-text-muted"}`,children:ne})]})]},M.id)};let z=0;return r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-start pt-4 sm:pt-[15vh] z-50 p-4",onClick:I,children:r.jsxs("div",{ref:x,role:"dialog","aria-modal":"true",className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[70vh] flex flex-col",children:[r.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-border",children:[r.jsx(le,{name:"search",className:"w-5 h-5 text-text-muted"}),r.jsx("input",{type:"text",value:v,onChange:M=>p(M.target.value),placeholder:"Search for anything or type a command...",className:"w-full bg-transparent focus:outline-none text-lg placeholder:text-text-muted",autoFocus:!0}),r.jsx("div",{className:"hidden sm:block text-xs text-text-muted border border-border rounded px-1.5 py-0.5",children:"ESC"})]}),r.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:b.length>0?r.jsx("ul",{ref:g,role:"listbox",children:C.map(([M,R])=>r.jsxs("li",{children:[r.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-text-muted uppercase tracking-wider",children:M}),r.jsx("ul",{className:"space-y-1",children:R.map(G=>O(G,z++))})]},M))}):r.jsx("div",{className:"text-center py-10 px-4",children:r.jsxs("p",{className:"text-text-muted",children:['No results found for "',v,'".']})})}),r.jsx("div",{className:"hidden sm:flex flex-shrink-0 justify-end items-center p-2 border-t border-border",children:r.jsxs("span",{className:"text-sm text-text-muted",children:[r.jsx(le,{name:"terminal",className:"inline-block w-4 h-4 mr-2"}),r.jsx("kbd",{className:"font-sans",children:"Cmd+K"})," to toggle"]})})]})})},mg=({isOpen:a,onClose:d,onConfirm:o,analysis:v})=>{const[p,c]=L.useState(""),f=L.useRef(null);Er(f,a),L.useEffect(()=>{v.type==="quiz"&&v.data.name?c(v.data.name):c("")},[v]);const{title:x,message:g,confirmText:m}=L.useMemo(()=>{switch(v.type){case"backup":return{title:"Restore from Backup",message:`You dropped the backup file "${v.fileName}". Restoring will merge its content with your current data. Do you want to continue?`,confirmText:"Restore"};case"quiz_series":return{title:"Import Series",message:`You dropped a file containing the series "${v.data.seriesName}". Would you like to import it?`,confirmText:"Import Series"};case"quiz":return{title:"Import Quiz Deck",message:`You dropped a file for the quiz deck "${v.data.name}". Would you like to import it?`,confirmText:"Import Deck"};case"flashcard":return{title:"Import Flashcard Deck",message:`You dropped a file with ${v.data.length} flashcard(s). Please provide a name for the new deck.`,confirmText:"Import Deck"};default:return{title:"Confirm Import",message:"Unknown file type.",confirmText:"Confirm"}}},[v]),T=v.type==="flashcard"&&!p.trim(),S=()=>{o(v,p.trim())};return a?r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{ref:f,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:[r.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[r.jsx("h2",{className:"text-xl font-bold text-text",children:x}),r.jsx(ke,{type:"button",variant:"ghost",onClick:d,className:"p-1 h-auto","aria-label":"Close",children:r.jsx(le,{name:"x"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx("p",{className:"text-text-muted",children:g}),(v.type==="flashcard"||v.type==="quiz")&&r.jsxs("div",{children:[r.jsx("label",{htmlFor:"deck-name-input",className:"block text-sm font-medium text-text-muted mb-1",children:"Deck Name"}),r.jsx("input",{id:"deck-name-input",type:"text",value:p,onChange:E=>c(E.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter a name for the new deck",autoFocus:!0})]})]}),r.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[r.jsx(ke,{type:"button",variant:"secondary",onClick:d,className:"mr-2",children:"Cancel"}),r.jsx(ke,{type:"button",variant:"primary",onClick:S,disabled:T,children:m})]})]})}):null},pg=({items:a})=>a.length<=1?null:r.jsx("nav",{"aria-label":"Breadcrumb",className:"mb-6",children:r.jsx("ol",{className:"flex items-center space-x-2 text-sm text-text-muted flex-wrap",children:a.map((d,o)=>{const v=o===a.length-1;return r.jsxs("li",{className:"flex items-center",children:[o>0&&r.jsx(le,{name:"chevron-left",className:"w-4 h-4 rotate-180 mx-2 flex-shrink-0"}),v?r.jsx("span",{className:"font-semibold text-text truncate","aria-current":"page",title:d.label,children:d.label}):r.jsx(Ft,{href:d.href,className:"hover:underline hover:text-primary truncate",title:d.label,children:d.label})]},o)})})}),gg=()=>{const{dispatch:a,...d}=wt(),[o,v]=L.useState(!1),[p,c]=L.useState(!1),[f,x]=L.useState(!1),[g,m]=L.useState(!1),[T,S]=L.useState(!1),[E,k]=L.useState(null),[C,b]=L.useState(null),[D,I]=L.useState({title:"",message:"",onConfirm:()=>{}}),[O,z]=L.useState(!1),[M,R]=L.useState(new Set),[G,Q]=L.useState(null),[ne,V]=L.useState("lastOpened"),[ee,ae]=L.useState(null),[$,K]=L.useState(new Set),[_,xe]=L.useState(new Map),[je,re]=L.useState(!1),[fe,ie]=L.useState(null),P=L.useRef(0),[w,N]=um(),{addToast:B}=vr(),H=L.useRef(null),{path:U,navigate:X}=jn(),he=L.useRef(!1),{pullToRefreshState:oe,handleTouchStart:ye,handleTouchMove:Ie,handleTouchEnd:ze,REFRESH_THRESHOLD:qe}=lp(),Ee=L.useCallback(Pe=>{H.current=document.activeElement,Pe(!0)},[]),y=L.useCallback(Pe=>{Pe(!1),setTimeout(()=>{var Le;(Le=H.current)==null||Le.focus()},300)},[]),de=L.useCallback(()=>Ee(z),[Ee]),ue=L.useCallback(()=>y(z),[y]),W=L.useCallback(()=>Ee(S),[Ee]),q=L.useCallback(()=>y(S),[y]),Y=L.useCallback(()=>Ee(v),[Ee]),be=L.useCallback(()=>y(v),[y]);L.useCallback(()=>Ee(c),[Ee]);const Ne=L.useCallback(()=>y(c),[y]);L.useCallback(()=>Ee(x),[Ee]);const ce=L.useCallback(()=>y(x),[y]),Ae=L.useCallback(()=>Ee(m),[Ee]),Fe=L.useCallback(()=>y(m),[y]),Me=L.useCallback(Pe=>{I(Pe),Ae()},[Ae]),Ue=L.useCallback(Pe=>{H.current=document.activeElement,k(Pe)},[]),st=L.useCallback(Pe=>{H.current=document.activeElement,b(Pe)},[]),Ye=ip({sessionsToResume:M,setSessionsToResume:R,seriesProgress:_,setSeriesProgress:xe,setGeneralStudyDeck:Q,openConfirmModal:Me,setFolderToEdit:Ue,setSeriesToEdit:st}),{handleAddDecks:ft,handleAddSeriesWithDecks:Ct,handleRestoreData:bt}=Ye,ur=(Pe,Le)=>{ie(null);try{switch(Pe.type){case"backup":bt(Pe.data);break;case"quiz_series":const{seriesName:Ke,seriesDescription:et,levels:ot}=Pe.data,_e=[],Nt=ot.map(Dt=>{const Xt=Dt.decks.map(Kr=>({id:crypto.randomUUID(),name:Kr.name,description:Kr.description,type:Ge.Quiz,questions:ca(Kr.questions)}));return _e.push(...Xt),{title:Dt.title,deckIds:Xt.map(Kr=>Kr.id)}}),xt={id:crypto.randomUUID(),type:"series",name:Ke,description:et,levels:Nt,createdAt:new Date().toISOString()};Ct(xt,_e);break;case"quiz":case"flashcard":const kt=Le||(Pe.type==="quiz"?Pe.data.name:"");if(!kt){B("A deck name is required.","error");return}let jt;if(Pe.type==="flashcard"){const Dt=Cc(Pe.data);jt={id:crypto.randomUUID(),name:kt,type:Ge.Flashcard,cards:Dt,description:`${Dt.length} imported flashcard${Dt.length===1?"":"s"}.`}}else{const Dt=ca(Pe.data.questions);jt={id:crypto.randomUUID(),name:kt,description:Pe.data.description,type:Ge.Quiz,questions:Dt}}ft([jt]),B(`Deck "${jt.name}" imported successfully.`,"success");break}}catch(Ke){console.error("Failed to confirm dropped file action:",Ke),B(`An error occurred: ${Ke instanceof Error?Ke.message:"Unknown error"}`,"error")}};L.useEffect(()=>{const Pe=Le=>{if((Le.metaKey||Le.ctrlKey)&&Le.key==="k"){Le.preventDefault();const Ke=Le.target;!(Ke.tagName==="INPUT"||Ke.tagName==="TEXTAREA"||Ke.isContentEditable)&&!(o||p||f||g||E!==null||C!==null||fe!==null)&&W()}};return window.addEventListener("keydown",Pe),()=>window.removeEventListener("keydown",Pe)},[o,p,f,g,E,C,fe,W]),L.useEffect(()=>{const Pe=_e=>{var Nt;return(Nt=_e.dataTransfer)==null?void 0:Nt.types.includes("Files")},Le=_e=>{Pe(_e)&&(_e.preventDefault(),P.current++,re(!0))},Ke=_e=>{Pe(_e)&&_e.preventDefault()},et=_e=>{P.current>0&&(_e.preventDefault(),P.current--,P.current===0&&re(!1))},ot=async _e=>{var Nt,xt;if(Pe(_e)){_e.preventDefault(),P.current=0,re(!1);const kt=(xt=(Nt=_e.dataTransfer)==null?void 0:Nt.files)==null?void 0:xt[0];if(!kt)return;B(`Processing ${kt.name}...`,"info");try{if(kt.name.toLowerCase().endsWith(".apkg")){const jt=await kt.arrayBuffer(),Dt=await bc(jt);Dt.length>0?(await ft(Dt),B(`Successfully imported ${Dt.length} deck(s) from ${kt.name}.`,"success")):B("No valid decks found in the Anki package.","info")}else if(kt.name.toLowerCase().endsWith(".json")){const jt=await kt.text(),Dt=Nm(jt);Dt?ie({...Dt,fileName:kt.name}):B(`"${kt.name}" is not a recognized CogniFlow file format.`,"error")}else B(`Unsupported file type: "${kt.name}".`,"error")}catch(jt){console.error("Failed to process dropped file:",jt),B(`An error occurred: ${jt instanceof Error?jt.message:"Unknown error"}`,"error")}}};return window.addEventListener("dragenter",Le),window.addEventListener("dragover",Ke),window.addEventListener("dragleave",et),window.addEventListener("drop",ot),()=>{window.removeEventListener("dragenter",Le),window.removeEventListener("dragover",Ke),window.removeEventListener("dragleave",et),window.removeEventListener("drop",ot)}},[ft,bt,Ct,B]);const ht=L.useCallback(async(Pe=!1)=>{Pe&&a({type:"SET_LOADING",payload:!0});try{const[Le,Ke,et]=await Promise.all([Nc(),_c(),Ec()]);a({type:"LOAD_DATA",payload:{decks:Le,folders:Ke,deckSeries:et}}),Pe||B("Data synced from another tab.","info")}catch(Le){console.error("Failed to load data from IndexedDB",Le);const Ke=Le instanceof Error?Le.message:"Could not load your data. Please try refreshing.";B(Ke,"error"),a({type:"SET_LOADING",payload:!1})}},[B,a]),Cr=L.useCallback(async()=>{const Pe=new Date;Pe.setDate(Pe.getDate()-10);const Le=d.decks.filter(et=>et.deletedAt&&new Date(et.deletedAt)<Pe),Ke=d.deckSeries.filter(et=>et.deletedAt&&new Date(et.deletedAt)<Pe);if(!(Le.length===0&&Ke.length===0))try{await Promise.all([...Le.map(ot=>yc(ot.id)),...Ke.map(ot=>wf(ot.id))]),Le.forEach(ot=>a({type:"DELETE_DECK",payload:ot.id})),Ke.forEach(ot=>a({type:"DELETE_SERIES",payload:ot.id}));const et=Le.length+Ke.length;B(`${et} item(s) permanently deleted from trash.`,"info")}catch(et){console.error("Failed to cleanup trash",et),B("Error during automatic trash cleanup.","error")}},[d.decks,d.deckSeries,a,B]),Dr=L.useCallback(async()=>{try{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(ot=>console.log("SW registration failed: ",ot))});const Pe=await sm(),Le=new Set(Pe.map(ot=>ot.replace("session_deck_","")));let Ke=new Map;for(let ot=0;ot<localStorage.length;ot++){const _e=localStorage.key(ot);if(_e&&_e.startsWith("series-progress-")){const Nt=_e.replace("series-progress-","");try{Ke.set(Nt,new Set(JSON.parse(localStorage.getItem(_e)||"[]")))}catch{console.error(`Failed to parse progress for series ${Nt}`)}}}R(Le),xe(Ke);const et=localStorage.getItem("cogniflow-sortPreference");et&&["lastOpened","name","dueCount"].includes(et)&&V(et);try{const ot=localStorage.getItem("cogniflow-openFolders");ot&&K(new Set(JSON.parse(ot)))}catch(ot){console.error("Could not load open folder state",ot)}}catch(Pe){console.error("Failed to load local settings from storage. This can happen if cookies/site data are disabled.",Pe),B("Could not load saved settings.","error")}},[B]);L.useEffect(()=>{(async()=>{await ht(!0),await Dr()})()},[ht,Dr]),L.useEffect(()=>{!d.isLoading&&!he.current&&(Cr(),Ye.reconcileSeriesProgress(),he.current=!0)},[d.isLoading,Cr,Ye]),L.useEffect(()=>{const Pe=Gh(()=>ht(!1)),Le=()=>Dr();return window.addEventListener("storage",Le),()=>{Pe(),window.removeEventListener("storage",Le)}},[ht,Dr]),L.useEffect(()=>{const Pe=window.launchQueue;Pe&&Pe.setConsumer(async Le=>{if(!Le.files||Le.files.length===0)return;const Ke=Le.files[0];try{const et=await Ke.getFile();if(et.name.toLowerCase().endsWith(".apkg")){B(`Importing ${et.name}...`,"info");const ot=await et.arrayBuffer(),_e=await bc(ot);_e.length>0?(await ft(_e),B(`Successfully imported ${_e.length} deck(s) from ${et.name}.`,"success")):B("No valid decks found in the Anki package.","info")}}catch(et){console.error("Failed to process launched file:",et),B(`An error occurred: ${et instanceof Error?et.message:"Unknown error"}`,"error")}})},[ft,B]);const Vt=L.useCallback(Pe=>{K(Le=>{const Ke=new Set(Le);Ke.has(Pe)?Ke.delete(Pe):Ke.add(Pe);try{localStorage.setItem("cogniflow-openFolders",JSON.stringify(Array.from(Ke)))}catch(et){console.error("Could not save open folder state",et)}return Ke})},[]),ir=L.useMemo(()=>{var _e;const Le=(Nt=>{var xt;return((xt=Nt.match(/^\/decks\/([^/?]+)/))==null?void 0:xt[1])||null})(U);if(!Le)return null;const Ke=d.decks.find(Nt=>Nt.id===Le);if(!Ke)return null;const ot=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId");if(ot){const Nt=d.deckSeries.find(xt=>xt.id===ot);if(Nt){const kt=Nt.levels.flatMap(jt=>jt.deckIds).indexOf(Le);if(kt>-1){const jt=((_e=_.get(Nt.id))==null?void 0:_e.size)||0,Dt=kt>jt;return{...Ke,locked:Dt}}}}return Ke},[U,d.decks,d.deckSeries,_]),rt=L.useMemo(()=>{const Le=(Ke=>{var et;return((et=Ke.match(/^\/series\/([^/?]+)/))==null?void 0:et[1])||null})(U);return Le?d.deckSeries.find(Ke=>Ke.id===Le):null},[U,d.deckSeries]),Yr=L.useMemo(()=>{const Pe=[{label:"Home",href:"/"}],Le=U.split("?")[0].split("/").filter(Boolean);if(Le[0]==="series")Pe.push({label:"Series",href:"/series"}),Le[1]&&rt&&Pe.push({label:rt.name,href:`/series/${rt.id}`});else if(Le[0]==="decks"){const et=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId");if(et){const ot=d.deckSeries.find(_e=>_e.id===et);ot&&(Pe.push({label:"Series",href:"/series"}),Pe.push({label:ot.name,href:`/series/${ot.id}`}))}else Pe.push({label:"Decks",href:"/decks"});Le[1]&&ir&&Pe.push({label:ir.name})}else Le[0]==="archive"?Pe.push({label:"Archive"}):Le[0]==="trash"?Pe.push({label:"Trash"}):Le[0]==="settings"?Pe.push({label:"Settings"}):Le[0]==="progress"?Pe.push({label:"Progress"}):Le[0]==="instructions"&&Le[1]==="json"&&Pe.push({label:"JSON Guide"});return Pe},[U,ir,rt,d.deckSeries]),Pr=L.useMemo(()=>{const Pe=Le=>{X("/settings"),setTimeout(()=>{var Ke;(Ke=document.getElementById(Le))==null||Ke.scrollIntoView({behavior:"smooth",block:"center"})},100)};return[{id:"new-deck",label:"New / Import Deck",icon:"plus",action:Y},{id:"new-series",label:"Create New Series",icon:"layers",action:()=>st("new")},{id:"go-decks",label:"Go to All Decks",icon:"folder",action:()=>X("/decks")},{id:"go-series",label:"Go to All Series",icon:"layers",action:()=>X("/series")},{id:"go-archive",label:"Go to Archive",icon:"archive",action:()=>X("/archive")},{id:"go-trash",label:"Go to Trash",icon:"trash-2",action:()=>X("/trash")},{id:"go-settings",label:"Go to Settings",icon:"settings",action:()=>X("/settings")},{id:"go-appearance-settings",label:"Go to Appearance Settings",icon:"sun",action:()=>Pe("settings-appearance"),searchableOnly:!0,keywords:["theme","dark","light","animation","haptics"]},{id:"go-local-backup",label:"Go to Local Backup",icon:"download",action:()=>Pe("settings-local-backup"),searchableOnly:!0,keywords:["export","import","json","file","download","data"]},{id:"go-cloud-backup",label:"Go to Cloud Backup",icon:"upload-cloud",action:()=>Pe("google-drive-backup"),searchableOnly:!0,keywords:["google","drive","sync","data"]},{id:"go-cache-management",label:"Go to Cache Management",icon:"broom",action:()=>Pe("settings-cache-management"),searchableOnly:!0,keywords:["clear","reload","refresh","storage","data","service worker"]},{id:"go-reset-progress",label:"Go to Reset Progress",icon:"refresh-ccw",action:()=>Pe("settings-reset-progress"),searchableOnly:!0,keywords:["srs","spaced repetition","start over","danger"]},{id:"go-factory-reset",label:"Go to Factory Reset",icon:"trash-2",action:()=>Pe("settings-factory-reset"),searchableOnly:!0,keywords:["delete all","wipe","clean","erase","danger"]}]},[X,Y,st]);return d.isLoading?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsxs("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:[r.jsx(Vn,{size:"lg"}),"Loading CogniFlow..."]})}):r.jsxs("div",{className:"min-h-screen text-text flex flex-col overflow-x-hidden",onTouchStart:ye,onTouchMove:Ie,onTouchEnd:ze,children:[je&&r.jsxs("div",{className:"fixed inset-0 bg-primary/20 backdrop-blur-sm flex flex-col items-center justify-center z-[100] border-4 border-dashed border-primary pointer-events-none",children:[r.jsx(le,{name:"upload-cloud",className:"w-24 h-24 text-primary drop-shadow-lg animate-pulse"}),r.jsx("p",{className:"mt-4 text-2xl font-bold text-white drop-shadow-lg",children:"Drop File Anywhere to Import"})]}),r.jsx(Um,{pullDistance:oe.pullDistance,isRefreshing:oe.isRefreshing,threshold:qe}),r.jsx(gm,{isOpen:O,onClose:ue,onImport:()=>{Y(),ue()},onCreateSeries:()=>{ue(),st("new")},onInstall:w?()=>{N(),ue()}:null}),r.jsxs("div",{className:"flex-grow flex flex-col",children:[r.jsx(cp,{activeDeck:ir,onOpenMenu:de,onOpenCommandPalette:W}),r.jsxs("main",{className:"flex-grow container mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx(pg,{items:Yr}),r.jsx(fg,{sessionsToResume:M,sortPreference:ne,setSortPreference:V,draggedDeckId:ee,setDraggedDeckId:ae,openFolderIds:$,onToggleFolder:Vt,seriesProgress:_,generalStudyDeck:G,activeDeck:ir,activeSeries:rt,setImportModalOpen:v,setRestoreModalOpen:c,setResetProgressModalOpen:x,openFolderModal:Ue,openConfirmModal:Me,openCreateSeriesModal:()=>st("new"),...Ye})]})]}),r.jsx(fm,{}),r.jsx(hg,{isOpen:T,onClose:q,actions:Pr}),o&&r.jsx(zm,{isOpen:o,onClose:be,onAddDecks:Ye.handleAddDecks,onAddSeriesWithDecks:Ye.handleAddSeriesWithDecks}),p&&r.jsx(Fm,{isOpen:p,onClose:Ne,onRestore:Ye.handleRestoreData}),f&&r.jsx(Pm,{isOpen:f,onClose:ce,onReset:Ye.handleResetDeckProgress,decks:d.decks}),g&&r.jsx(yo,{isOpen:g,onClose:Fe,...D}),E!==null&&r.jsx(Lm,{folder:E==="new"?null:E,onClose:()=>k(null),onSave:Ye.handleSaveFolder}),C!==null&&r.jsx(Sf,{series:C==="new"?null:C,onClose:()=>b(null),onSave:Ye.handleSaveSeries}),fe&&r.jsx(mg,{isOpen:!!fe,onClose:()=>ie(null),analysis:fe,onConfirm:ur})]})};class xg extends L.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleReload=()=>{window.location.reload()}}static getDerivedStateFromError(d){return{hasError:!0,error:d}}componentDidCatch(d,o){console.error("Uncaught error:",d,o)}render(){return this.state.hasError?r.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:r.jsxs("div",{className:"text-center bg-surface p-8 rounded-lg shadow-xl max-w-md w-full",children:[r.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-500 mb-4",children:"Oops! Something went wrong."}),r.jsx("p",{className:"text-text-muted mb-6",children:"The application encountered an unexpected error. Please try reloading the page to continue."}),this.state.error&&r.jsx("pre",{className:"bg-background text-left text-xs text-red-500 dark:text-red-400 p-4 rounded-md overflow-x-auto mb-6",children:r.jsx("code",{children:this.state.error.toString()})}),r.jsx(ke,{variant:"danger",onClick:this.handleReload,children:"Reload Page"})]})}):this.props.children}}const Tf=document.getElementById("root");if(!Tf)throw new Error("Could not find root element to mount to");const yg=Wh.createRoot(Tf);yg.render(r.jsx($a.StrictMode,{children:r.jsx(Dp,{children:r.jsx(vm,{children:r.jsx(op,{children:r.jsx(pm,{children:r.jsx(xg,{children:r.jsx(gg,{})})})})})})}))});export default vg();
