import{n as J,j as e,t as ie,I as r,r as o,c as me,B as l,T as y,u as xe,a as ue,i as he,A as pe,o as f,q as j,v as g,S as be,w as fe}from"./index-Db7ZDnWd.js";const q=({theme:a,isSelected:c,onClick:b,onDelete:i})=>{const m=a.id==="system",n=a.isDark,h=a.palette,p=m?a.paletteDark:n?a.palette:null,k=`w-full h-24 rounded-lg border-2 transition-all duration-200 cursor-pointer flex flex-col justify-between p-2 text-left relative ${c?"border-primary ring-2 ring-primary ring-offset-2 ring-offset-background":"border-border hover:border-text-muted"}`,d=N=>`rgb(${N})`;return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:b,className:k,"aria-pressed":c,"aria-label":`Select ${a.name} theme`,children:[e.jsx("div",{className:"w-full h-full absolute top-0 left-0 overflow-hidden rounded-[5px]",children:m?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-1/2 h-full absolute top-0 left-0",style:{backgroundColor:d(h.surface)}}),e.jsx("div",{className:"w-1/2 h-full absolute top-0 right-0",style:{backgroundColor:d(p.surface)}})]}):e.jsx("div",{className:"w-full h-full absolute top-0 left-0",style:{backgroundColor:d(h.surface)}})}),e.jsxs("div",{className:"relative flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full text-xs backdrop-blur-sm",style:{backgroundColor:`rgba(${h.background.replace(/ /g,",")}, 0.6)`},children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:d(h.primary)}}),e.jsx("span",{style:{color:d(h.text)},children:"Aa"})]}),c&&e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-primary",children:e.jsx(r,{name:"check-circle",className:"w-4 h-4 text-on-primary"})})]}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[m&&e.jsx(e.Fragment,{children:e.jsx(r,{name:"monitor",className:"w-4 h-4",style:{color:d(h.text)}})}),!m&&n&&e.jsx(r,{name:"moon",className:"w-4 h-4",style:{color:d(h.text)}}),!m&&!n&&e.jsx(r,{name:"sun",className:"w-4 h-4",style:{color:d(h.text)}})]})]}),e.jsx("p",{className:`text-center text-sm font-medium mt-2 transition-colors ${c?"text-primary":"text-text"}`,children:a.name}),i&&e.jsx("button",{onClick:N=>{N.stopPropagation(),i()},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete Theme",children:e.jsx(r,{name:"x",className:"w-3 h-3"})})]})},je=({selectedTheme:a,onThemeChange:c,onOpenBuilder:b})=>{const{customThemes:i,deleteCustomTheme:m}=J();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Preset Themes"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:ie.map(n=>e.jsx(q,{theme:n,isSelected:a===n.id,onClick:()=>c(n.id)},n.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Custom Themes"}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:[i.map(n=>e.jsx(q,{theme:n,isSelected:a===n.id,onClick:()=>c(n.id),onDelete:()=>m(n.id)},n.id)),e.jsxs("button",{onClick:b,className:"w-full h-24 rounded-lg border-2 border-dashed border-border hover:border-primary hover:bg-surface/50 transition-all duration-200 flex flex-col items-center justify-center text-text-muted hover:text-primary group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-surface border border-border group-hover:border-primary flex items-center justify-center mb-2",children:e.jsx(r,{name:"plus",className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-medium",children:"Create New"})]})]})]})]})},Q="cogniflow-sync-log",ge=()=>{try{const a=localStorage.getItem(Q);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to read sync log",a),[]}},ye=()=>{localStorage.removeItem(Q)},I=a=>{const c=parseInt(a.slice(1),16),b=c>>16&255,i=c>>8&255,m=c&255;return`${b} ${i} ${m}`},Y=a=>{const c=parseInt(a.slice(1,3),16),b=parseInt(a.slice(3,5),16),i=parseInt(a.slice(5,7),16);return(c*299+b*587+i*114)/1e3>=128?"0 0 0":"255 255 255"},Ne=({isOpen:a,onClose:c,onSave:b})=>{const[i,m]=o.useState(""),[n,h]=o.useState(!1),[p,k]=o.useState("#3b82f6"),[d,N]=o.useState("#ffffff"),[v,C]=o.useState("#f3f4f6"),[x,S]=o.useState("#111827"),T=o.useRef(null);me(T,a),o.useEffect(()=>{n?(N("#111827"),C("#1f2937"),S("#f9fafb")):(N("#f9fafb"),C("#ffffff"),S("#111827"))},[n]);const D=u=>{if(u.preventDefault(),!i.trim())return;const F={id:`custom-${crypto.randomUUID()}`,name:i.trim(),isDark:n,metaColor:d,isCustom:!0,palette:{primary:I(p),background:I(d),surface:I(v),text:I(x),onPrimary:Y(p)}};b(F),c()};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{ref:T,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[e.jsx("h2",{className:"text-xl font-bold text-text",children:"Create Custom Theme"}),e.jsx(l,{type:"button",variant:"ghost",onClick:c,className:"p-1 h-auto",children:e.jsx(r,{name:"x"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",style:{backgroundColor:d,color:x},children:[e.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",style:{backgroundColor:v,borderColor:"rgba(128,128,128,0.2)"},children:[e.jsx("span",{className:"font-bold",children:"Preview"}),e.jsx("span",{className:"text-xs opacity-70",children:"10:00 AM"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Your Learning Journey"}),e.jsx("p",{className:"opacity-80",children:"This is how your theme will look. Adjust the colors below to find your perfect style."}),e.jsxs("div",{className:"p-4 rounded-lg shadow-sm border",style:{backgroundColor:v,borderColor:"rgba(128,128,128,0.2)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Flashcard"}),e.jsx("span",{className:"text-xs",style:{color:p},children:"Due Now"})]}),e.jsx("div",{className:"h-2 rounded-full w-full opacity-20",style:{backgroundColor:x},children:e.jsx("div",{className:"h-2 rounded-full w-2/3",style:{backgroundColor:p}})})]}),e.jsx("button",{className:"px-4 py-2 rounded-md font-medium w-full",style:{backgroundColor:p,color:`rgb(${Y(p)})`},children:"Primary Button"})]})]}),e.jsxs("form",{id:"theme-form",onSubmit:D,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Theme Name"}),e.jsx("input",{type:"text",value:i,onChange:u=>m(u.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Midnight Purple",required:!0})]}),e.jsx(y,{label:"Dark Mode Base",checked:n,onChange:h,description:"Adjusts browser UI elements."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:p,onChange:u=>k(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:p})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Background"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:d,onChange:u=>N(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:d})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Surface (Cards)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:v,onChange:u=>C(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:v})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:x,onChange:u=>S(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:x})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border gap-2",children:[e.jsx(l,{type:"button",variant:"secondary",onClick:c,children:"Cancel"}),e.jsx(l,{type:"submit",form:"theme-form",variant:"primary",disabled:!i.trim(),children:"Save Theme"})]})]})}):null},ve=a=>{switch(a){case"success":return e.jsx(r,{name:"check-circle",className:"w-4 h-4 text-green-500"});case"info":return e.jsx(r,{name:"info",className:"w-4 h-4 text-blue-500"});case"warning":return e.jsx(r,{name:"zap",className:"w-4 h-4 text-yellow-500"});case"error":return e.jsx(r,{name:"x-circle",className:"w-4 h-4 text-red-500"})}},ke=({onExport:a,onRestore:c,onResetProgress:b,onFactoryReset:i,onSync:m,onForceFetch:n,onForceUpload:h,onCreateServerBackup:p,onManageServerBackups:k,isSyncing:d,lastSyncStatus:N,isGapiReady:v,isGapiSignedIn:C,gapiUser:x,onGoogleSignIn:S,onGoogleSignOut:T,onBackupToDrive:D,onRestoreFromDrive:u,onClearAppCache:F,onClearCdnCache:W,onRevertLastFetch:Z})=>{var V;const s=xe(),{themeId:_,setThemeById:X,addCustomTheme:U}=J(),[ee,se]=o.useState(!1),[B,L]=o.useState([]),[M,K]=o.useState(!1),[G,te]=o.useState(1),{addToast:A}=ue(),E=he(),[$,O]=o.useState(!1),[w,R]=o.useState({type:"idle"}),[z,H]=o.useState(null),[P,ae]=o.useState(s.encryptionPassword);o.useEffect(()=>{var t;localStorage.getItem("cogniflow-pre-fetch-backup")&&se(!0),L(ge()),(t=window.aistudio)!=null&&t.hasSelectedApiKey&&window.aistudio.hasSelectedApiKey().then(H)},[]);const re=async()=>{O(!0),R({type:"idle"});try{const t=await fe();R({type:t.status==="ok"?"ok":"error",message:t.message})}catch{R({type:"error",message:"Failed to initiate connectivity test."})}finally{O(!1)}},le=async()=>{var t;if((t=window.aistudio)!=null&&t.openSelectKey){await window.aistudio.openSelectKey();const oe=await window.aistudio.hasSelectedApiKey();H(oe)}},ne=()=>{ye(),L([]),A("sync log cleared.","success")},de=()=>{s.setEncryptionPassword(P),P&&P!==s.encryptionPassword&&A("Encryption password saved.","success")},ce=()=>{E!=null&&E.handleShiftSchedule&&E.handleShiftSchedule(G)};return e.jsxs("div",{className:"max-w-3xl mx-auto animate-fade-in space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-text border-b border-border pb-4",children:"Settings"}),e.jsxs(pe,{type:"multiple",defaultValue:["srs","appearance","ai-engine","general","cloud-sync","gdrive-backup","data-management","cache-management"],className:"w-full space-y-4",children:[e.jsxs(f,{value:"srs",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Spaced Repetition"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-2",children:"Leech Handling"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:'"Leeches" are cards you repeatedly forget. Configure how the app handles them.'}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Leech Threshold (Lapses)"}),e.jsx("input",{type:"number",min:"1",max:"99",value:s.leechThreshold,onChange:t=>s.setLeechThreshold(Math.max(1,parseInt(t.target.value)||8)),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Action on Leech"}),e.jsxs("select",{value:s.leechAction,onChange:t=>s.setLeechAction(t.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[e.jsx("option",{value:"suspend",children:"Suspend Card"}),e.jsx("option",{value:"tag",children:'Tag as "Leech"'}),e.jsx("option",{value:"warn",children:"Just Warn Me"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-2",children:"Vacation Mode / Schedule Shift"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:"Push all due dates forward by a set number of days. Useful if you missed studying or plan to take a break."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-muted",children:"Shift by:"}),e.jsx("input",{type:"number",min:"1",max:"365",value:G,onChange:t=>te(Math.max(1,parseInt(t.target.value)||1)),className:"w-20 p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("span",{className:"text-sm text-text-muted",children:"days"}),e.jsxs(l,{variant:"secondary",onClick:ce,children:[e.jsx(r,{name:"calendar",className:"w-4 h-4 mr-2"})," Shift Schedule"]})]})]})]})]}),e.jsxs(f,{value:"ai-engine",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"AI Engine & Quota"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-2",children:"Gemini Service Status"}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 p-4 bg-background rounded-lg border border-border",children:[e.jsx("div",{className:`p-3 rounded-full ${w.type==="ok"?"bg-green-100 text-green-600":w.type==="error"?"bg-red-100 text-red-600":"bg-gray-100 text-gray-400"}`,children:e.jsx(r,{name:w.type==="ok"?"check-circle":w.type==="error"?"x-circle":"zap",className:"w-8 h-8"})}),e.jsxs("div",{className:"flex-grow text-center sm:text-left",children:[e.jsx("p",{className:"font-bold text-text",children:w.type==="ok"?"Service Connected":w.type==="error"?"Connection Error":"Ready to Test"}),e.jsx("p",{className:"text-xs text-text-muted mt-1 leading-relaxed",children:w.message||"The Gemini API handles course synthesis, factual grounding, and diagram generation."}),z!==null&&e.jsx("p",{className:"text-[10px] uppercase font-bold mt-2 tracking-widest text-primary",children:z?"Personal API Key Selected":"Using Global Shared Key"})]}),e.jsxs("div",{className:"flex flex-col gap-2 flex-shrink-0",children:[e.jsx(l,{variant:"primary",size:"sm",onClick:re,disabled:$,children:$?e.jsx(be,{size:"sm"}):"Verify Connection"}),((V=window.aistudio)==null?void 0:V.openSelectKey)&&e.jsx(l,{variant:"secondary",size:"sm",onClick:le,children:"Change API Key"})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-4",children:"Standard Rate Limits (Free Tier)"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-xs text-left border-collapse",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-border",children:[e.jsx("th",{className:"pb-2 font-bold text-text-muted uppercase tracking-tighter",children:"Model / Feature"}),e.jsx("th",{className:"pb-2 font-bold text-text-muted uppercase tracking-tighter",children:"RPM"}),e.jsx("th",{className:"pb-2 font-bold text-text-muted uppercase tracking-tighter",children:"TPM"}),e.jsx("th",{className:"pb-2 font-bold text-text-muted uppercase tracking-tighter",children:"RPD"})]})}),e.jsxs("tbody",{className:"divide-y divide-border/50",children:[e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pr-4 font-semibold text-text",children:"Gemini 3 Flash (Core Engine)"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"15"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"1M"}),e.jsx("td",{className:"py-2 text-text-muted",children:"1,500"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pr-4 font-semibold text-text",children:"Gemini 3 Pro (Hyper-Reasoning)"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"2"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"32K"}),e.jsx("td",{className:"py-2 text-text-muted",children:"50"})]}),e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 pr-4 font-semibold text-text",children:"Imagen / Grounded Media"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"5"}),e.jsx("td",{className:"py-2 pr-4 text-text-muted",children:"-"}),e.jsx("td",{className:"py-2 text-text-muted",children:"1,500"})]})]})]})}),e.jsx("p",{className:"text-[10px] text-text-muted mt-3 italic leading-relaxed",children:"RPM: Requests Per Minute. TPM: Tokens Per Minute. RPD: Requests Per Day. Limits apply per API key. If you hit these, CogniFlow will pause and retry automatically."})]})]})]}),e.jsxs(f,{value:"data-management",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Data Management"})}),e.jsxs(g,{className:"bg-surface p-6 flex flex-wrap gap-4 justify-center",children:[e.jsxs(l,{variant:"secondary",onClick:a,children:[e.jsx(r,{name:"download",className:"mr-2"})," Export All Data"]}),e.jsxs(l,{variant:"secondary",onClick:c,children:[e.jsx(r,{name:"upload-cloud",className:"mr-2"})," Restore from File"]}),e.jsxs(l,{variant:"secondary",onClick:b,children:[e.jsx(r,{name:"refresh-ccw",className:"mr-2"})," Reset Progress"]}),ee&&e.jsxs(l,{variant:"secondary",onClick:Z,children:[e.jsx(r,{name:"refresh-ccw",className:"mr-2"})," Revert Last Fetch"]})]})]}),e.jsxs(f,{value:"cloud-sync",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Cloud Sync"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-6",children:[e.jsx(y,{label:"Enable Cloud Sync",description:"Automatically sync your data to the server.",checked:s.backupEnabled,onChange:s.setBackupEnabled}),e.jsx(y,{label:"Sync on Cellular Data",description:"Allow auto-sync when on a mobile network.",checked:s.syncOnCellular,onChange:s.setSyncOnCellular,disabled:!s.backupEnabled}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backup-api-key",className:"block text-sm font-medium text-text-muted mb-1",children:"Server Backup API Key"}),e.jsx("input",{id:"backup-api-key",type:"password",value:s.backupApiKey,onChange:t=>s.setBackupApiKey(t.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",disabled:!s.backupEnabled})]}),e.jsxs("div",{className:"pt-2 border-t border-border mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-2",children:"Encryption (Optional)"}),e.jsx("label",{htmlFor:"encryption-password",className:"block text-sm font-medium text-text-muted mb-1",children:"Encryption Password"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{id:"encryption-password",type:"password",value:P,onChange:t=>ae(t.target.value),onBlur:de,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",disabled:!s.backupEnabled,placeholder:"Enter a password to encrypt your cloud backups"})}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"If set, your data will be encrypted on your device before uploading. You MUST use the same password on all devices to decrypt your data."})]}),e.jsxs("div",{className:"pt-4 border-t border-border flex flex-col sm:flex-row gap-2 items-center justify-between",children:[e.jsx("p",{className:"text-sm text-text-muted",children:d?"Syncing...":N}),e.jsx("div",{className:"flex gap-2 flex-wrap justify-end",children:e.jsxs(l,{variant:"primary",onClick:m,disabled:!s.backupEnabled||d,children:[e.jsx(r,{name:"refresh-ccw",className:"w-4 h-4 mr-2"})," Sync Now"]})})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-muted",children:"Advanced Sync Options"}),e.jsx("p",{className:"text-sm text-text-muted mt-1 mb-4",children:"Use these options to resolve sync conflicts manually. These are destructive actions and should be used with caution."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-start",children:[e.jsxs(l,{variant:"secondary",onClick:h,disabled:!s.backupEnabled||d,children:[e.jsx(r,{name:"upload-cloud",className:"w-4 h-4 mr-2"})," Force Upload to Server"]}),e.jsxs(l,{variant:"secondary",onClick:n,disabled:!s.backupEnabled||d,children:[e.jsx(r,{name:"download",className:"w-4 h-4 mr-2"})," Force Fetch from Server"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border flex flex-wrap gap-2 justify-center",children:[e.jsxs(l,{variant:"secondary",onClick:p,disabled:!s.backupEnabled||d,children:[e.jsx(r,{name:"plus",className:"w-4 h-4 mr-2"})," Create Manual Backup"]}),e.jsxs(l,{variant:"secondary",onClick:k,disabled:!s.backupEnabled||d,children:[e.jsx(r,{name:"settings",className:"w-4 h-4 mr-2"})," Manage Backups"]})]})]})]}),e.jsxs(f,{value:"sync-history",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Sync History"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(l,{variant:"secondary",size:"sm",onClick:ne,children:"Clear Log"})}),B.length>0?e.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto bg-background p-3 rounded-md border border-border",children:B.map(t=>e.jsxs("li",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:ve(t.type)}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-text",children:t.message}),e.jsx("p",{className:"text-xs text-text-muted",children:new Date(t.timestamp).toLocaleString()})]})]},t.timestamp))}):e.jsx("p",{className:"text-center text-text-muted py-4",children:"No sync history yet."})]})]}),e.jsxs(f,{value:"appearance",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Appearance"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-6",children:[e.jsx(je,{selectedTheme:_,onThemeChange:X,onOpenBuilder:()=>K(!0)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted",children:"Font Style"}),e.jsx("div",{className:"flex bg-background rounded-md p-1 border border-border",children:["sans","serif","mono"].map(t=>e.jsx("button",{onClick:()=>s.setFontFamily(t),className:`flex-1 py-1.5 px-3 text-sm rounded transition-colors ${s.fontFamily===t?"bg-primary text-on-primary shadow-sm":"text-text hover:bg-border/50"}`,children:e.jsx("span",{className:`font-${t} capitalize`,children:t})},t))})]}),e.jsx(y,{label:"Disable Animations",description:"Reduces motion for a faster experience.",checked:s.disableAnimations,onChange:s.setDisableAnimations})]})]}),e.jsxs(f,{value:"general",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"General"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-6",children:[e.jsx(y,{label:"Enable Haptic Feedback",description:"Provides physical feedback on supported devices.",checked:s.hapticsEnabled,onChange:s.setHapticsEnabled}),e.jsx(y,{label:"Daily Notifications",description:"Receive local reminders when you have cards due.",checked:s.notificationsEnabled,onChange:s.setNotificationsEnabled}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx(y,{label:"Enable AI Features",description:"Allows basic content generation using the Gemini API.",checked:s.aiFeaturesEnabled,onChange:s.setAiFeaturesEnabled}),s.aiFeaturesEnabled&&e.jsxs("div",{className:"mt-6 space-y-4 pl-4 border-l-2 border-primary/20 animate-fade-in",children:[e.jsx("h3",{className:"text-xs font-bold text-text-muted uppercase tracking-widest mb-2",children:"Hyper-Course Advanced Features"}),e.jsx(y,{label:"Process Visualization Loops (Veo)",description:"Use Veo 3.1 to generate educational cinematic loops for complex transformations.",checked:s.veoEnabled,onChange:s.setVeoEnabled}),e.jsx(y,{label:"Grounded Fidelity Images",description:"Use Search-grounded image agents for historically and scientifically accurate illustrations.",checked:s.groundedImagesEnabled,onChange:s.setGroundedImagesEnabled}),e.jsx(y,{label:"Epistemic Search Audits",description:"Use Agentic Search to verify every technical and scientific claim made during course synthesis.",checked:s.searchAuditsEnabled,onChange:s.setSearchAuditsEnabled})]})]})]})]}),e.jsxs(f,{value:"gdrive-backup",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Google Drive Backup"})}),e.jsx(g,{className:"bg-surface p-6 space-y-6",children:v?C?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-background rounded-md",children:[e.jsx("img",{src:x==null?void 0:x.picture,alt:"User profile",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text",children:x==null?void 0:x.name}),e.jsx("p",{className:"text-sm text-text-muted",children:x==null?void 0:x.email})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs(l,{variant:"secondary",onClick:D,children:[e.jsx(r,{name:"upload-cloud",className:"mr-2"})," Backup to Drive"]}),e.jsxs(l,{variant:"secondary",onClick:u,children:[e.jsx(r,{name:"download",className:"mr-2"})," Restore from Drive"]}),e.jsx(l,{variant:"danger",onClick:T,children:"Sign Out"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-muted mb-4",children:"Sign in with your Google account to back up and restore your data to a private folder in your Google Drive."}),e.jsxs(l,{variant:"primary",onClick:S,className:"inline-flex items-center gap-2",children:[e.jsx(r,{name:"google",className:"w-5 h-5"}),"Sign in with Google"]})]}):e.jsx("p",{className:"text-text-muted text-center",children:"Loading Google Drive services..."})})]}),e.jsxs(f,{value:"cache-management",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Cache Management"})}),e.jsxs(g,{className:"bg-surface p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-text-muted text-center w-full",children:"Clearing the cache can resolve issues by forcing the app to download the latest files. This does not affect your saved data."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs(l,{variant:"secondary",onClick:F,children:[e.jsx(r,{name:"refresh-ccw",className:"mr-2"})," Clear App Cache"]}),e.jsxs(l,{variant:"secondary",onClick:W,children:[e.jsx(r,{name:"download",className:"mr-2"})," Clear CDN Cache"]})]})]})]}),e.jsxs(f,{value:"developer-tools",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(j,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Developer Tools"})}),e.jsx(g,{className:"bg-surface p-6 flex flex-wrap gap-4 justify-center",children:e.jsxs(l,{variant:"secondary",onClick:()=>{typeof window.runBackupServiceTests=="function"?(A("Running backup service tests... Check the console for results.","info"),window.runBackupServiceTests()):A("Test runner function not found.","error")},children:[e.jsx(r,{name:"terminal",className:"mr-2"})," Run API Tests"]})})]})]}),e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-400 dark:text-red-300",children:"Danger Zone"}),e.jsx("p",{className:"text-red-500/80 dark:text-red-300/80 mb-4",children:"This will permanently delete all your decks, folders, and progress. This action cannot be undone."}),e.jsxs(l,{variant:"danger",onClick:i,children:[e.jsx(r,{name:"broom",className:"mr-2"})," Factory Reset"]})]}),M&&e.jsx(Ne,{isOpen:M,onClose:()=>K(!1),onSave:U})]})};export{ke as SettingsPage};
