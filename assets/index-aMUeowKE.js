const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/StudySession-BUB8rjfs.js","assets/MasteryBar-Dwb4azIA.js","assets/ProgressBar-0qc1MiBP.js","assets/useKeyboardShortcuts-BPegZZnd.js","assets/ToggleSwitch-BHf5W8M0.js","assets/ReaderSession-BPbpVE6D.js","assets/SettingsPage-DikTL5f4.js","assets/DeckDetailsPage-CY4MDD4Y.js","assets/TruncatedText-D7rtMuLw.js","assets/SeriesOverviewPage-Bb4zR6eS.js","assets/DeckListItem-CkWM-3h7.js","assets/DashboardPage-Bcpa8kHm.js","assets/SeriesListItem-v3WByr52.js","assets/AllDecksPage-DOqT_lSV.js","assets/DeckSortControl-pCGs1MA2.js","assets/AllSeriesPage-CjIeV38q.js"])))=>i.map(i=>d[i]);
(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const l of document.querySelectorAll('link[rel="modulepreload"]'))i(l);new MutationObserver(l=>{for(const c of l)if(c.type==="childList")for(const h of c.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&i(h)}).observe(document,{childList:!0,subtree:!0});function s(l){const c={};return l.integrity&&(c.integrity=l.integrity),l.referrerPolicy&&(c.referrerPolicy=l.referrerPolicy),l.crossOrigin==="use-credentials"?c.credentials="include":l.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function i(l){if(l.ep)return;l.ep=!0;const c=s(l);fetch(l.href,c)}})();var Pc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function io(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function l_(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var a=n.default;if(typeof a=="function"){var s=function i(){return this instanceof i?Reflect.construct(a,arguments,this.constructor):a.apply(this,arguments)};s.prototype=a.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var l=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(s,i,l.get?l:{enumerable:!0,get:function(){return n[i]}})}),s}var Yf={exports:{}},Wo={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var my;function c_(){if(my)return Wo;my=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.fragment");function s(i,l,c){var h=null;if(c!==void 0&&(h=""+c),l.key!==void 0&&(h=""+l.key),"key"in l){c={};for(var d in l)d!=="key"&&(c[d]=l[d])}else c=l;return l=c.ref,{$$typeof:n,type:i,key:h,ref:l!==void 0?l:null,props:c}}return Wo.Fragment=a,Wo.jsx=s,Wo.jsxs=s,Wo}var gy;function u_(){return gy||(gy=1,Yf.exports=c_()),Yf.exports}var u=u_(),Vf={exports:{}},gt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yy;function d_(){if(yy)return gt;yy=1;var n=Symbol.for("react.transitional.element"),a=Symbol.for("react.portal"),s=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),l=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),h=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),m=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),x=Symbol.for("react.activity"),T=Symbol.iterator;function _(L){return L===null||typeof L!="object"?null:(L=T&&L[T]||L["@@iterator"],typeof L=="function"?L:null)}var E={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,w={};function O(L,A,Z){this.props=L,this.context=A,this.refs=w,this.updater=Z||E}O.prototype.isReactComponent={},O.prototype.setState=function(L,A){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,A,"setState")},O.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function I(){}I.prototype=O.prototype;function U(L,A,Z){this.props=L,this.context=A,this.refs=w,this.updater=Z||E}var z=U.prototype=new I;z.constructor=U,S(z,O.prototype),z.isPureReactComponent=!0;var F=Array.isArray;function V(){}var M={H:null,A:null,T:null,S:null},j=Object.prototype.hasOwnProperty;function R(L,A,Z){var K=Z.ref;return{$$typeof:n,type:L,key:A,ref:K!==void 0?K:null,props:Z}}function P(L,A){return R(L.type,A,L.props)}function re(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function B(L){var A={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(Z){return A[Z]})}var X=/\/+/g;function C(L,A){return typeof L=="object"&&L!==null&&L.key!=null?B(""+L.key):A.toString(36)}function ie(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(V,V):(L.status="pending",L.then(function(A){L.status==="pending"&&(L.status="fulfilled",L.value=A)},function(A){L.status==="pending"&&(L.status="rejected",L.reason=A)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function $(L,A,Z,K,te){var fe=typeof L;(fe==="undefined"||fe==="boolean")&&(L=null);var Ee=!1;if(L===null)Ee=!0;else switch(fe){case"bigint":case"string":case"number":Ee=!0;break;case"object":switch(L.$$typeof){case n:case a:Ee=!0;break;case v:return Ee=L._init,$(Ee(L._payload),A,Z,K,te)}}if(Ee)return te=te(L),Ee=K===""?"."+C(L,0):K,F(te)?(Z="",Ee!=null&&(Z=Ee.replace(X,"$&/")+"/"),$(te,A,Z,"",function(He){return He})):te!=null&&(re(te)&&(te=P(te,Z+(te.key==null||L&&L.key===te.key?"":(""+te.key).replace(X,"$&/")+"/")+Ee)),A.push(te)),1;Ee=0;var Te=K===""?".":K+":";if(F(L))for(var he=0;he<L.length;he++)K=L[he],fe=Te+C(K,he),Ee+=$(K,A,Z,fe,te);else if(he=_(L),typeof he=="function")for(L=he.call(L),he=0;!(K=L.next()).done;)K=K.value,fe=Te+C(K,he++),Ee+=$(K,A,Z,fe,te);else if(fe==="object"){if(typeof L.then=="function")return $(ie(L),A,Z,K,te);throw A=String(L),Error("Objects are not valid as a React child (found: "+(A==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":A)+"). If you meant to render a collection of children, use an array instead.")}return Ee}function q(L,A,Z){if(L==null)return L;var K=[],te=0;return $(L,K,"","",function(fe){return A.call(Z,fe,te++)}),K}function se(L){if(L._status===-1){var A=L._result;A=A(),A.then(function(Z){(L._status===0||L._status===-1)&&(L._status=1,L._result=Z)},function(Z){(L._status===0||L._status===-1)&&(L._status=2,L._result=Z)}),L._status===-1&&(L._status=0,L._result=A)}if(L._status===1)return L._result.default;throw L._result}var W=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var A=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(A))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)},me={map:q,forEach:function(L,A,Z){q(L,function(){A.apply(this,arguments)},Z)},count:function(L){var A=0;return q(L,function(){A++}),A},toArray:function(L){return q(L,function(A){return A})||[]},only:function(L){if(!re(L))throw Error("React.Children.only expected to receive a single React element child.");return L}};return gt.Activity=x,gt.Children=me,gt.Component=O,gt.Fragment=s,gt.Profiler=l,gt.PureComponent=U,gt.StrictMode=i,gt.Suspense=m,gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,gt.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},gt.cache=function(L){return function(){return L.apply(null,arguments)}},gt.cacheSignal=function(){return null},gt.cloneElement=function(L,A,Z){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var K=S({},L.props),te=L.key;if(A!=null)for(fe in A.key!==void 0&&(te=""+A.key),A)!j.call(A,fe)||fe==="key"||fe==="__self"||fe==="__source"||fe==="ref"&&A.ref===void 0||(K[fe]=A[fe]);var fe=arguments.length-2;if(fe===1)K.children=Z;else if(1<fe){for(var Ee=Array(fe),Te=0;Te<fe;Te++)Ee[Te]=arguments[Te+2];K.children=Ee}return R(L.type,te,K)},gt.createContext=function(L){return L={$$typeof:h,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:c,_context:L},L},gt.createElement=function(L,A,Z){var K,te={},fe=null;if(A!=null)for(K in A.key!==void 0&&(fe=""+A.key),A)j.call(A,K)&&K!=="key"&&K!=="__self"&&K!=="__source"&&(te[K]=A[K]);var Ee=arguments.length-2;if(Ee===1)te.children=Z;else if(1<Ee){for(var Te=Array(Ee),he=0;he<Ee;he++)Te[he]=arguments[he+2];te.children=Te}if(L&&L.defaultProps)for(K in Ee=L.defaultProps,Ee)te[K]===void 0&&(te[K]=Ee[K]);return R(L,fe,te)},gt.createRef=function(){return{current:null}},gt.forwardRef=function(L){return{$$typeof:d,render:L}},gt.isValidElement=re,gt.lazy=function(L){return{$$typeof:v,_payload:{_status:-1,_result:L},_init:se}},gt.memo=function(L,A){return{$$typeof:p,type:L,compare:A===void 0?null:A}},gt.startTransition=function(L){var A=M.T,Z={};M.T=Z;try{var K=L(),te=M.S;te!==null&&te(Z,K),typeof K=="object"&&K!==null&&typeof K.then=="function"&&K.then(V,W)}catch(fe){W(fe)}finally{A!==null&&Z.types!==null&&(A.types=Z.types),M.T=A}},gt.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},gt.use=function(L){return M.H.use(L)},gt.useActionState=function(L,A,Z){return M.H.useActionState(L,A,Z)},gt.useCallback=function(L,A){return M.H.useCallback(L,A)},gt.useContext=function(L){return M.H.useContext(L)},gt.useDebugValue=function(){},gt.useDeferredValue=function(L,A){return M.H.useDeferredValue(L,A)},gt.useEffect=function(L,A){return M.H.useEffect(L,A)},gt.useEffectEvent=function(L){return M.H.useEffectEvent(L)},gt.useId=function(){return M.H.useId()},gt.useImperativeHandle=function(L,A,Z){return M.H.useImperativeHandle(L,A,Z)},gt.useInsertionEffect=function(L,A){return M.H.useInsertionEffect(L,A)},gt.useLayoutEffect=function(L,A){return M.H.useLayoutEffect(L,A)},gt.useMemo=function(L,A){return M.H.useMemo(L,A)},gt.useOptimistic=function(L,A){return M.H.useOptimistic(L,A)},gt.useReducer=function(L,A,Z){return M.H.useReducer(L,A,Z)},gt.useRef=function(L){return M.H.useRef(L)},gt.useState=function(L){return M.H.useState(L)},gt.useSyncExternalStore=function(L,A,Z){return M.H.useSyncExternalStore(L,A,Z)},gt.useTransition=function(){return M.H.useTransition()},gt.version="19.2.3",gt}var vy;function Nl(){return vy||(vy=1,Vf.exports=d_()),Vf.exports}var H=Nl();const Wi=io(H);var $f={exports:{}},el={},Zf={exports:{}},Qf={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function f_(){return by||(by=1,(function(n){function a($,q){var se=$.length;$.push(q);e:for(;0<se;){var W=se-1>>>1,me=$[W];if(0<l(me,q))$[W]=q,$[se]=me,se=W;else break e}}function s($){return $.length===0?null:$[0]}function i($){if($.length===0)return null;var q=$[0],se=$.pop();if(se!==q){$[0]=se;e:for(var W=0,me=$.length,L=me>>>1;W<L;){var A=2*(W+1)-1,Z=$[A],K=A+1,te=$[K];if(0>l(Z,se))K<me&&0>l(te,Z)?($[W]=te,$[K]=se,W=K):($[W]=Z,$[A]=se,W=A);else if(K<me&&0>l(te,se))$[W]=te,$[K]=se,W=K;else break e}}return q}function l($,q){var se=$.sortIndex-q.sortIndex;return se!==0?se:$.id-q.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;n.unstable_now=function(){return c.now()}}else{var h=Date,d=h.now();n.unstable_now=function(){return h.now()-d}}var m=[],p=[],v=1,x=null,T=3,_=!1,E=!1,S=!1,w=!1,O=typeof setTimeout=="function"?setTimeout:null,I=typeof clearTimeout=="function"?clearTimeout:null,U=typeof setImmediate<"u"?setImmediate:null;function z($){for(var q=s(p);q!==null;){if(q.callback===null)i(p);else if(q.startTime<=$)i(p),q.sortIndex=q.expirationTime,a(m,q);else break;q=s(p)}}function F($){if(S=!1,z($),!E)if(s(m)!==null)E=!0,V||(V=!0,B());else{var q=s(p);q!==null&&ie(F,q.startTime-$)}}var V=!1,M=-1,j=5,R=-1;function P(){return w?!0:!(n.unstable_now()-R<j)}function re(){if(w=!1,V){var $=n.unstable_now();R=$;var q=!0;try{e:{E=!1,S&&(S=!1,I(M),M=-1),_=!0;var se=T;try{t:{for(z($),x=s(m);x!==null&&!(x.expirationTime>$&&P());){var W=x.callback;if(typeof W=="function"){x.callback=null,T=x.priorityLevel;var me=W(x.expirationTime<=$);if($=n.unstable_now(),typeof me=="function"){x.callback=me,z($),q=!0;break t}x===s(m)&&i(m),z($)}else i(m);x=s(m)}if(x!==null)q=!0;else{var L=s(p);L!==null&&ie(F,L.startTime-$),q=!1}}break e}finally{x=null,T=se,_=!1}q=void 0}}finally{q?B():V=!1}}}var B;if(typeof U=="function")B=function(){U(re)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,C=X.port2;X.port1.onmessage=re,B=function(){C.postMessage(null)}}else B=function(){O(re,0)};function ie($,q){M=O(function(){$(n.unstable_now())},q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):j=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function($){switch(T){case 1:case 2:case 3:var q=3;break;default:q=T}var se=T;T=q;try{return $()}finally{T=se}},n.unstable_requestPaint=function(){w=!0},n.unstable_runWithPriority=function($,q){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var se=T;T=$;try{return q()}finally{T=se}},n.unstable_scheduleCallback=function($,q,se){var W=n.unstable_now();switch(typeof se=="object"&&se!==null?(se=se.delay,se=typeof se=="number"&&0<se?W+se:W):se=W,$){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=se+me,$={id:v++,callback:q,priorityLevel:$,startTime:se,expirationTime:me,sortIndex:-1},se>W?($.sortIndex=se,a(p,$),s(m)===null&&$===s(p)&&(S?(I(M),M=-1):S=!0,ie(F,se-W))):($.sortIndex=me,a(m,$),E||_||(E=!0,V||(V=!0,B()))),$},n.unstable_shouldYield=P,n.unstable_wrapCallback=function($){var q=T;return function(){var se=T;T=q;try{return $.apply(this,arguments)}finally{T=se}}}})(Qf)),Qf}var xy;function h_(){return xy||(xy=1,Zf.exports=f_()),Zf.exports}var Jf={exports:{}},Vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _y;function p_(){if(_y)return Vn;_y=1;var n=Nl();function a(m){var p="https://react.dev/errors/"+m;if(1<arguments.length){p+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)p+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+m+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(){}var i={d:{f:s,r:function(){throw Error(a(522))},D:s,C:s,L:s,m:s,X:s,S:s,M:s},p:0,findDOMNode:null},l=Symbol.for("react.portal");function c(m,p,v){var x=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:l,key:x==null?null:""+x,children:m,containerInfo:p,implementation:v}}var h=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(m,p){if(m==="font")return"";if(typeof p=="string")return p==="use-credentials"?p:""}return Vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Vn.createPortal=function(m,p){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!p||p.nodeType!==1&&p.nodeType!==9&&p.nodeType!==11)throw Error(a(299));return c(m,p,null,v)},Vn.flushSync=function(m){var p=h.T,v=i.p;try{if(h.T=null,i.p=2,m)return m()}finally{h.T=p,i.p=v,i.d.f()}},Vn.preconnect=function(m,p){typeof m=="string"&&(p?(p=p.crossOrigin,p=typeof p=="string"?p==="use-credentials"?p:"":void 0):p=null,i.d.C(m,p))},Vn.prefetchDNS=function(m){typeof m=="string"&&i.d.D(m)},Vn.preinit=function(m,p){if(typeof m=="string"&&p&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin),T=typeof p.integrity=="string"?p.integrity:void 0,_=typeof p.fetchPriority=="string"?p.fetchPriority:void 0;v==="style"?i.d.S(m,typeof p.precedence=="string"?p.precedence:void 0,{crossOrigin:x,integrity:T,fetchPriority:_}):v==="script"&&i.d.X(m,{crossOrigin:x,integrity:T,fetchPriority:_,nonce:typeof p.nonce=="string"?p.nonce:void 0})}},Vn.preinitModule=function(m,p){if(typeof m=="string")if(typeof p=="object"&&p!==null){if(p.as==null||p.as==="script"){var v=d(p.as,p.crossOrigin);i.d.M(m,{crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0})}}else p==null&&i.d.M(m)},Vn.preload=function(m,p){if(typeof m=="string"&&typeof p=="object"&&p!==null&&typeof p.as=="string"){var v=p.as,x=d(v,p.crossOrigin);i.d.L(m,v,{crossOrigin:x,integrity:typeof p.integrity=="string"?p.integrity:void 0,nonce:typeof p.nonce=="string"?p.nonce:void 0,type:typeof p.type=="string"?p.type:void 0,fetchPriority:typeof p.fetchPriority=="string"?p.fetchPriority:void 0,referrerPolicy:typeof p.referrerPolicy=="string"?p.referrerPolicy:void 0,imageSrcSet:typeof p.imageSrcSet=="string"?p.imageSrcSet:void 0,imageSizes:typeof p.imageSizes=="string"?p.imageSizes:void 0,media:typeof p.media=="string"?p.media:void 0})}},Vn.preloadModule=function(m,p){if(typeof m=="string")if(p){var v=d(p.as,p.crossOrigin);i.d.m(m,{as:typeof p.as=="string"&&p.as!=="script"?p.as:void 0,crossOrigin:v,integrity:typeof p.integrity=="string"?p.integrity:void 0})}else i.d.m(m)},Vn.requestFormReset=function(m){i.d.r(m)},Vn.unstable_batchedUpdates=function(m,p){return m(p)},Vn.useFormState=function(m,p,v){return h.H.useFormState(m,p,v)},Vn.useFormStatus=function(){return h.H.useHostTransitionStatus()},Vn.version="19.2.3",Vn}var Sy;function m_(){if(Sy)return Jf.exports;Sy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),Jf.exports=p_(),Jf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function g_(){if(Ey)return el;Ey=1;var n=h_(),a=Nl(),s=m_();function i(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function c(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function h(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function d(e){if(e.tag===31){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function m(e){if(c(e)!==e)throw Error(i(188))}function p(e){var t=e.alternate;if(!t){if(t=c(e),t===null)throw Error(i(188));return t!==e?null:e}for(var r=e,o=t;;){var f=r.return;if(f===null)break;var g=f.alternate;if(g===null){if(o=f.return,o!==null){r=o;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===r)return m(f),e;if(g===o)return m(f),t;g=g.sibling}throw Error(i(188))}if(r.return!==o.return)r=f,o=g;else{for(var k=!1,G=f.child;G;){if(G===r){k=!0,r=f,o=g;break}if(G===o){k=!0,o=f,r=g;break}G=G.sibling}if(!k){for(G=g.child;G;){if(G===r){k=!0,r=g,o=f;break}if(G===o){k=!0,o=g,r=f;break}G=G.sibling}if(!k)throw Error(i(189))}}if(r.alternate!==o)throw Error(i(190))}if(r.tag!==3)throw Error(i(188));return r.stateNode.current===r?e:t}function v(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e;for(e=e.child;e!==null;){if(t=v(e),t!==null)return t;e=e.sibling}return null}var x=Object.assign,T=Symbol.for("react.element"),_=Symbol.for("react.transitional.element"),E=Symbol.for("react.portal"),S=Symbol.for("react.fragment"),w=Symbol.for("react.strict_mode"),O=Symbol.for("react.profiler"),I=Symbol.for("react.consumer"),U=Symbol.for("react.context"),z=Symbol.for("react.forward_ref"),F=Symbol.for("react.suspense"),V=Symbol.for("react.suspense_list"),M=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),R=Symbol.for("react.activity"),P=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function B(e){return e===null||typeof e!="object"?null:(e=re&&e[re]||e["@@iterator"],typeof e=="function"?e:null)}var X=Symbol.for("react.client.reference");function C(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===X?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case S:return"Fragment";case O:return"Profiler";case w:return"StrictMode";case F:return"Suspense";case V:return"SuspenseList";case R:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case E:return"Portal";case U:return e.displayName||"Context";case I:return(e._context.displayName||"Context")+".Consumer";case z:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case M:return t=e.displayName||null,t!==null?t:C(e.type)||"Memo";case j:t=e._payload,e=e._init;try{return C(e(t))}catch{}}return null}var ie=Array.isArray,$=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=s.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se={pending:!1,data:null,method:null,action:null},W=[],me=-1;function L(e){return{current:e}}function A(e){0>me||(e.current=W[me],W[me]=null,me--)}function Z(e,t){me++,W[me]=e.current,e.current=t}var K=L(null),te=L(null),fe=L(null),Ee=L(null);function Te(e,t){switch(Z(fe,t),Z(te,e),Z(K,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?zg(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)t=zg(t),e=Bg(t,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}A(K),Z(K,e)}function he(){A(K),A(te),A(fe)}function He(e){e.memoizedState!==null&&Z(Ee,e);var t=K.current,r=Bg(t,e.type);t!==r&&(Z(te,e),Z(K,r))}function Be(e){te.current===e&&(A(K),A(te)),Ee.current===e&&(A(Ee),Qo._currentValue=se)}var Pe,Re;function N(e){if(Pe===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Pe=t&&t[1]||"",Re=-1<r.stack.indexOf(`
    at`)?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Pe+e+Re}var be=!1;function le(e,t){if(!e||be)return"";be=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var o={DetermineComponentFrameRoot:function(){try{if(t){var Ie=function(){throw Error()};if(Object.defineProperty(Ie.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Ie,[])}catch(we){var xe=we}Reflect.construct(e,[],Ie)}else{try{Ie.call()}catch(we){xe=we}e.call(Ie.prototype)}}else{try{throw Error()}catch(we){xe=we}(Ie=e())&&typeof Ie.catch=="function"&&Ie.catch(function(){})}}catch(we){if(we&&xe&&typeof we.stack=="string")return[we.stack,xe.stack]}return[null,null]}};o.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(o.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(o.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=o.DetermineComponentFrameRoot(),k=g[0],G=g[1];if(k&&G){var ne=k.split(`
`),ve=G.split(`
`);for(f=o=0;o<ne.length&&!ne[o].includes("DetermineComponentFrameRoot");)o++;for(;f<ve.length&&!ve[f].includes("DetermineComponentFrameRoot");)f++;if(o===ne.length||f===ve.length)for(o=ne.length-1,f=ve.length-1;1<=o&&0<=f&&ne[o]!==ve[f];)f--;for(;1<=o&&0<=f;o--,f--)if(ne[o]!==ve[f]){if(o!==1||f!==1)do if(o--,f--,0>f||ne[o]!==ve[f]){var Ae=`
`+ne[o].replace(" at new "," at ");return e.displayName&&Ae.includes("<anonymous>")&&(Ae=Ae.replace("<anonymous>",e.displayName)),Ae}while(1<=o&&0<=f);break}}}finally{be=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?N(r):""}function J(e,t){switch(e.tag){case 26:case 27:case 5:return N(e.type);case 16:return N("Lazy");case 13:return e.child!==t&&t!==null?N("Suspense Fallback"):N("Suspense");case 19:return N("SuspenseList");case 0:case 15:return le(e.type,!1);case 11:return le(e.type.render,!1);case 1:return le(e.type,!0);case 31:return N("Activity");default:return""}}function Q(e){try{var t="",r=null;do t+=J(e,r),r=e,e=e.return;while(e);return t}catch(o){return`
Error generating stack: `+o.message+`
`+o.stack}}var ae=Object.prototype.hasOwnProperty,ke=n.unstable_scheduleCallback,De=n.unstable_cancelCallback,ue=n.unstable_shouldYield,je=n.unstable_requestPaint,ze=n.unstable_now,Ne=n.unstable_getCurrentPriorityLevel,Je=n.unstable_ImmediatePriority,ht=n.unstable_UserBlockingPriority,st=n.unstable_NormalPriority,Rt=n.unstable_LowPriority,Qt=n.unstable_IdlePriority,Bt=n.log,Pt=n.unstable_setDisableYieldValue,pt=null,xt=null;function mn(e){if(typeof Bt=="function"&&Pt(e),xt&&typeof xt.setStrictMode=="function")try{xt.setStrictMode(pt,e)}catch{}}var It=Math.clz32?Math.clz32:qa,ma=Math.log,dt=Math.LN2;function qa(e){return e>>>=0,e===0?32:31-(ma(e)/dt|0)|0}var Nr=256,Ft=262144,ln=4194304;function jn(e){var t=e&42;if(t!==0)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Qn(e,t,r){var o=e.pendingLanes;if(o===0)return 0;var f=0,g=e.suspendedLanes,k=e.pingedLanes;e=e.warmLanes;var G=o&134217727;return G!==0?(o=G&~g,o!==0?f=jn(o):(k&=G,k!==0?f=jn(k):r||(r=G&~e,r!==0&&(f=jn(r))))):(G=o&~g,G!==0?f=jn(G):k!==0?f=jn(k):r||(r=o&~e,r!==0&&(f=jn(r)))),f===0?0:t!==0&&t!==f&&(t&g)===0&&(g=f&-f,r=t&-t,g>=r||g===32&&(r&4194048)!==0)?t:f}function $r(e,t){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)===0}function qe(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ga(){var e=ln;return ln<<=1,(ln&62914560)===0&&(ln=4194304),e}function gn(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function fr(e,t){e.pendingLanes|=t,t!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ha(e,t,r,o,f,g){var k=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var G=e.entanglements,ne=e.expirationTimes,ve=e.hiddenUpdates;for(r=k&~r;0<r;){var Ae=31-It(r),Ie=1<<Ae;G[Ae]=0,ne[Ae]=-1;var xe=ve[Ae];if(xe!==null)for(ve[Ae]=null,Ae=0;Ae<xe.length;Ae++){var we=xe[Ae];we!==null&&(we.lane&=-536870913)}r&=~Ie}o!==0&&Pa(e,o,0),g!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=g&~(k&~t))}function Pa(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var o=31-It(t);e.entangledLanes|=t,e.entanglements[o]=e.entanglements[o]|1073741824|r&261930}function Dr(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var o=31-It(r),f=1<<o;f&t|e[o]&t&&(e[o]|=t),r&=~f}}function In(e,t){var r=t&-t;return r=(r&42)!==0?1:xn(r),(r&(e.suspendedLanes|t))!==0?0:r}function xn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function ya(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Cr(){var e=q.p;return e!==0?e:(e=window.event,e===void 0?32:ly(e.type))}function Is(e,t){var r=q.p;try{return q.p=e,t()}finally{q.p=r}}var sr=Math.random().toString(36).slice(2),Gt="__reactFiber$"+sr,Mt="__reactProps$"+sr,Or="__reactContainer$"+sr,Ya="__reactEvents$"+sr,Va="__reactListeners$"+sr,ci="__reactHandles$"+sr,Xe="__reactResources$"+sr,oe="__reactMarker$"+sr;function Le(e){delete e[Gt],delete e[Mt],delete e[Ya],delete e[Va],delete e[ci]}function Ze(e){var t=e[Gt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Or]||r[Gt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Vg(e);e!==null;){if(r=e[Gt])return r;e=Vg(e)}return t}e=r,r=e.parentNode}return null}function ct(e){if(e=e[Gt]||e[Or]){var t=e.tag;if(t===5||t===6||t===13||t===31||t===26||t===27||t===3)return e}return null}function Wt(e){var t=e.tag;if(t===5||t===26||t===27||t===6)return e.stateNode;throw Error(i(33))}function Xt(e){var t=e[Xe];return t||(t=e[Xe]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function wt(e){e[oe]=!0}var _n=new Set,hr={};function en(e,t){Pn(e,t),Pn(e+"Capture",t)}function Pn(e,t){for(hr[e]=t,e=0;e<t.length;e++)_n.add(t[e])}var $a=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),oo={},lo={};function Rl(e){return ae.call(lo,e)?!0:ae.call(oo,e)?!1:$a.test(e)?lo[e]=!0:(oo[e]=!0,!1)}function ui(e,t,r){if(Rl(t))if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":e.removeAttribute(t);return;case"boolean":var o=t.toLowerCase().slice(0,5);if(o!=="data-"&&o!=="aria-"){e.removeAttribute(t);return}}e.setAttribute(t,""+r)}}function Ms(e,t,r){if(r===null)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(t);return}e.setAttribute(t,""+r)}}function Rr(e,t,r,o){if(o===null)e.removeAttribute(r);else{switch(typeof o){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(r);return}e.setAttributeNS(t,r,""+o)}}function Dn(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function co(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function Jt(e,t,r){var o=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&typeof o<"u"&&typeof o.get=="function"&&typeof o.set=="function"){var f=o.get,g=o.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return f.call(this)},set:function(k){r=""+k,g.call(this,k)}}),Object.defineProperty(e,t,{enumerable:o.enumerable}),{getValue:function(){return r},setValue:function(k){r=""+k},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function va(e){if(!e._valueTracker){var t=co(e)?"checked":"value";e._valueTracker=Jt(e,t,""+e[t])}}function di(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),o="";return e&&(o=co(e)?e.checked?"true":"false":e.value),e=o,e!==r?(t.setValue(e),!0):!1}function jr(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var fi=/[\n"\\]/g;function Mn(e){return e.replace(fi,function(t){return"\\"+t.charCodeAt(0).toString(16)+" "})}function Za(e,t,r,o,f,g,k,G){e.name="",k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"?e.type=k:e.removeAttribute("type"),t!=null?k==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+Dn(t)):e.value!==""+Dn(t)&&(e.value=""+Dn(t)):k!=="submit"&&k!=="reset"||e.removeAttribute("value"),t!=null?uo(e,k,Dn(t)):r!=null?uo(e,k,Dn(r)):o!=null&&e.removeAttribute("value"),f==null&&g!=null&&(e.defaultChecked=!!g),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),G!=null&&typeof G!="function"&&typeof G!="symbol"&&typeof G!="boolean"?e.name=""+Dn(G):e.removeAttribute("name")}function Qa(e,t,r,o,f,g,k,G){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(e.type=g),t!=null||r!=null){if(!(g!=="submit"&&g!=="reset"||t!=null)){va(e);return}r=r!=null?""+Dn(r):"",t=t!=null?""+Dn(t):r,G||t===e.value||(e.value=t),e.defaultValue=t}o=o??f,o=typeof o!="function"&&typeof o!="symbol"&&!!o,e.checked=G?e.checked:!!o,e.defaultChecked=!!o,k!=null&&typeof k!="function"&&typeof k!="symbol"&&typeof k!="boolean"&&(e.name=k),va(e)}function uo(e,t,r){t==="number"&&jr(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function Ja(e,t,r,o){if(e=e.options,t){t={};for(var f=0;f<r.length;f++)t["$"+r[f]]=!0;for(r=0;r<e.length;r++)f=t.hasOwnProperty("$"+e[r].value),e[r].selected!==f&&(e[r].selected=f),f&&o&&(e[r].defaultSelected=!0)}else{for(r=""+Dn(r),t=null,f=0;f<e.length;f++){if(e[f].value===r){e[f].selected=!0,o&&(e[f].defaultSelected=!0);return}t!==null||e[f].disabled||(t=e[f])}t!==null&&(t.selected=!0)}}function fo(e,t,r){if(t!=null&&(t=""+Dn(t),t!==e.value&&(e.value=t),r==null)){e.defaultValue!==t&&(e.defaultValue=t);return}e.defaultValue=r!=null?""+Dn(r):""}function hi(e,t,r,o){if(t==null){if(o!=null){if(r!=null)throw Error(i(92));if(ie(o)){if(1<o.length)throw Error(i(93));o=o[0]}r=o}r==null&&(r=""),t=r}r=Dn(t),e.defaultValue=r,o=e.textContent,o===r&&o!==""&&o!==null&&(e.value=o),va(e)}function ba(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var ho=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pi(e,t,r){var o=t.indexOf("--")===0;r==null||typeof r=="boolean"||r===""?o?e.setProperty(t,""):t==="float"?e.cssFloat="":e[t]="":o?e.setProperty(t,r):typeof r!="number"||r===0||ho.has(t)?t==="float"?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function jl(e,t,r){if(t!=null&&typeof t!="object")throw Error(i(62));if(e=e.style,r!=null){for(var o in r)!r.hasOwnProperty(o)||t!=null&&t.hasOwnProperty(o)||(o.indexOf("--")===0?e.setProperty(o,""):o==="float"?e.cssFloat="":e[o]="");for(var f in t)o=t[f],t.hasOwnProperty(f)&&r[f]!==o&&pi(e,f,o)}else for(var g in t)t.hasOwnProperty(g)&&pi(e,g,t[g])}function Ka(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var mi=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xa=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Xa(e){return xa.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function An(){}var sa=null;function Wa(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var _a=null,es=null;function nt(e){var t=ct(e);if(t&&(e=t.stateNode)){var r=e[Mt]||null;e:switch(e=t.stateNode,t.type){case"input":if(Za(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+Mn(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var o=r[t];if(o!==e&&o.form===e.form){var f=o[Mt]||null;if(!f)throw Error(i(90));Za(o,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(t=0;t<r.length;t++)o=r[t],o.form===e.form&&di(o)}break e;case"textarea":fo(e,r.value,r.defaultValue);break e;case"select":t=r.value,t!=null&&Ja(e,!!r.multiple,t,!1)}}}var gi=!1;function Us(e,t,r){if(gi)return e(t,r);gi=!0;try{var o=e(t);return o}finally{if(gi=!1,(_a!==null||es!==null)&&(Sc(),_a&&(t=_a,e=es,es=_a=null,nt(t),e)))for(t=0;t<e.length;t++)nt(e[t])}}function ia(e,t){var r=e.stateNode;if(r===null)return null;var o=r[Mt]||null;if(o===null)return null;r=o[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(e=e.type,o=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!o;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(i(231,t,typeof r));return r}var Ir=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Sa=!1;if(Ir)try{var Zr={};Object.defineProperty(Zr,"passive",{get:function(){Sa=!0}}),window.addEventListener("test",Zr,Zr),window.removeEventListener("test",Zr,Zr)}catch{Sa=!1}var Un=null,ts=null,Ls=null;function y(){if(Ls)return Ls;var e,t=ts,r=t.length,o,f="value"in Un?Un.value:Un.textContent,g=f.length;for(e=0;e<r&&t[e]===f[e];e++);var k=r-e;for(o=1;o<=k&&t[r-o]===f[g-o];o++);return Ls=f.slice(e,1<o?1-o:void 0)}function b(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function D(){return!0}function Y(){return!1}function ee(e){function t(r,o,f,g,k){this._reactName=r,this._targetInst=f,this.type=o,this.nativeEvent=g,this.target=k,this.currentTarget=null;for(var G in e)e.hasOwnProperty(G)&&(r=e[G],this[G]=r?r(g):g[G]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?D:Y,this.isPropagationStopped=Y,this}return x(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=D)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=D)},persist:function(){},isPersistent:D}),t}var _e={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ce=ee(_e),it=x({},_e,{view:0,detail:0}),Ct=ee(it),mt,rn,an,zs=x({},it,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:mo,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==an&&(an&&e.type==="mousemove"?(mt=e.screenX-an.screenX,rn=e.screenY-an.screenY):rn=mt=0,an=e),mt)},movementY:function(e){return"movementY"in e?e.movementY:rn}}),Il=ee(zs),Ml=x({},zs,{dataTransfer:0}),Ru=ee(Ml),Ul=x({},it,{relatedTarget:0}),po=ee(Ul),ju=x({},_e,{animationName:0,elapsedTime:0,pseudoElement:0}),Iu=ee(ju),Mu=x({},_e,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Uu=ee(Mu),Lu=x({},_e,{data:0}),Ll=ee(Lu),zu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zl={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Fu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Bu[e])?!!t[e]:!1}function mo(){return Fu}var Gu=x({},it,{key:function(e){if(e.key){var t=zu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=b(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?zl[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:mo,charCode:function(e){return e.type==="keypress"?b(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?b(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),qu=ee(Gu),Hu=x({},zs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bl=ee(Hu),Fl=x({},it,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:mo}),Pu=ee(Fl),Yu=x({},_e,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vu=ee(Yu),$u=x({},zs,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Zu=ee($u),Qu=x({},_e,{newState:0,oldState:0}),Gl=ee(Qu),Ju=[9,13,27,32],go=Ir&&"CompositionEvent"in window,Bs=null;Ir&&"documentMode"in document&&(Bs=document.documentMode);var yi=Ir&&"TextEvent"in window&&!Bs,yo=Ir&&(!go||Bs&&8<Bs&&11>=Bs),vo=" ",ge=!1;function Me(e,t){switch(e){case"keyup":return Ju.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function We(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var ot=!1;function _t(e,t){switch(e){case"compositionend":return We(t);case"keypress":return t.which!==32?null:(ge=!0,vo);case"textInput":return e=t.data,e===vo&&ge?null:e;default:return null}}function Yt(e,t){if(ot)return e==="compositionend"||!go&&Me(e,t)?(e=y(),Ls=ts=Un=null,ot=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return yo&&t.locale!=="ko"?null:t.data;default:return null}}var pr={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!pr[e.type]:t==="textarea"}function Yn(e,t,r,o){_a?es?es.push(o):es=[o]:_a=o,t=Dc(t,"onChange"),0<t.length&&(r=new Ce("onChange","change",null,r,o),e.push({event:r,listeners:t}))}var Ln=null,Ea=null;function wa(e){Rg(e,0)}function vi(e){var t=Wt(e);if(di(t))return e}function Kh(e,t){if(e==="change")return t}var Xh=!1;if(Ir){var Ku;if(Ir){var Xu="oninput"in document;if(!Xu){var Wh=document.createElement("div");Wh.setAttribute("oninput","return;"),Xu=typeof Wh.oninput=="function"}Ku=Xu}else Ku=!1;Xh=Ku&&(!document.documentMode||9<document.documentMode)}function ep(){Ln&&(Ln.detachEvent("onpropertychange",tp),Ea=Ln=null)}function tp(e){if(e.propertyName==="value"&&vi(Ea)){var t=[];Yn(t,Ea,e,Wa(e)),Us(wa,t)}}function U0(e,t,r){e==="focusin"?(ep(),Ln=t,Ea=r,Ln.attachEvent("onpropertychange",tp)):e==="focusout"&&ep()}function L0(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return vi(Ea)}function z0(e,t){if(e==="click")return vi(t)}function B0(e,t){if(e==="input"||e==="change")return vi(t)}function F0(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var mr=typeof Object.is=="function"?Object.is:F0;function bo(e,t){if(mr(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),o=Object.keys(t);if(r.length!==o.length)return!1;for(o=0;o<r.length;o++){var f=r[o];if(!ae.call(t,f)||!mr(e[f],t[f]))return!1}return!0}function np(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rp(e,t){var r=np(e);e=0;for(var o;r;){if(r.nodeType===3){if(o=e+r.textContent.length,e<=t&&o>=t)return{node:r,offset:t-e};e=o}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=np(r)}}function ap(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ap(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function sp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var t=jr(e.document);t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=jr(e.document)}return t}function Wu(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}var G0=Ir&&"documentMode"in document&&11>=document.documentMode,bi=null,ed=null,xo=null,td=!1;function ip(e,t,r){var o=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;td||bi==null||bi!==jr(o)||(o=bi,"selectionStart"in o&&Wu(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),xo&&bo(xo,o)||(xo=o,o=Dc(ed,"onSelect"),0<o.length&&(t=new Ce("onSelect","select",null,t,r),e.push({event:t,listeners:o}),t.target=bi)))}function Fs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var xi={animationend:Fs("Animation","AnimationEnd"),animationiteration:Fs("Animation","AnimationIteration"),animationstart:Fs("Animation","AnimationStart"),transitionrun:Fs("Transition","TransitionRun"),transitionstart:Fs("Transition","TransitionStart"),transitioncancel:Fs("Transition","TransitionCancel"),transitionend:Fs("Transition","TransitionEnd")},nd={},op={};Ir&&(op=document.createElement("div").style,"AnimationEvent"in window||(delete xi.animationend.animation,delete xi.animationiteration.animation,delete xi.animationstart.animation),"TransitionEvent"in window||delete xi.transitionend.transition);function Gs(e){if(nd[e])return nd[e];if(!xi[e])return e;var t=xi[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in op)return nd[e]=t[r];return e}var lp=Gs("animationend"),cp=Gs("animationiteration"),up=Gs("animationstart"),q0=Gs("transitionrun"),H0=Gs("transitionstart"),P0=Gs("transitioncancel"),dp=Gs("transitionend"),fp=new Map,rd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rd.push("scrollEnd");function Qr(e,t){fp.set(e,t),en(t,[e])}var ql=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Mr=[],_i=0,ad=0;function Hl(){for(var e=_i,t=ad=_i=0;t<e;){var r=Mr[t];Mr[t++]=null;var o=Mr[t];Mr[t++]=null;var f=Mr[t];Mr[t++]=null;var g=Mr[t];if(Mr[t++]=null,o!==null&&f!==null){var k=o.pending;k===null?f.next=f:(f.next=k.next,k.next=f),o.pending=f}g!==0&&hp(r,f,g)}}function Pl(e,t,r,o){Mr[_i++]=e,Mr[_i++]=t,Mr[_i++]=r,Mr[_i++]=o,ad|=o,e.lanes|=o,e=e.alternate,e!==null&&(e.lanes|=o)}function sd(e,t,r,o){return Pl(e,t,r,o),Yl(e)}function qs(e,t){return Pl(e,null,null,t),Yl(e)}function hp(e,t,r){e.lanes|=r;var o=e.alternate;o!==null&&(o.lanes|=r);for(var f=!1,g=e.return;g!==null;)g.childLanes|=r,o=g.alternate,o!==null&&(o.childLanes|=r),g.tag===22&&(e=g.stateNode,e===null||e._visibility&1||(f=!0)),e=g,g=g.return;return e.tag===3?(g=e.stateNode,f&&t!==null&&(f=31-It(r),e=g.hiddenUpdates,o=e[f],o===null?e[f]=[t]:o.push(t),t.lane=r|536870912),g):null}function Yl(e){if(50<qo)throw qo=0,mf=null,Error(i(185));for(var t=e.return;t!==null;)e=t,t=e.return;return e.tag===3?e.stateNode:null}var Si={};function Y0(e,t,r,o){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function gr(e,t,r,o){return new Y0(e,t,r,o)}function id(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ta(e,t){var r=e.alternate;return r===null?(r=gr(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&65011712,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function pp(e,t){e.flags&=65011714;var r=e.alternate;return r===null?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Vl(e,t,r,o,f,g){var k=0;if(o=e,typeof e=="function")id(e)&&(k=1);else if(typeof e=="string")k=Jx(e,r,K.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case R:return e=gr(31,r,t,f),e.elementType=R,e.lanes=g,e;case S:return Hs(r.children,f,g,t);case w:k=8,f|=24;break;case O:return e=gr(12,r,t,f|2),e.elementType=O,e.lanes=g,e;case F:return e=gr(13,r,t,f),e.elementType=F,e.lanes=g,e;case V:return e=gr(19,r,t,f),e.elementType=V,e.lanes=g,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case U:k=10;break e;case I:k=9;break e;case z:k=11;break e;case M:k=14;break e;case j:k=16,o=null;break e}k=29,r=Error(i(130,e===null?"null":typeof e,"")),o=null}return t=gr(k,r,t,f),t.elementType=e,t.type=o,t.lanes=g,t}function Hs(e,t,r,o){return e=gr(7,e,o,t),e.lanes=r,e}function od(e,t,r){return e=gr(6,e,null,t),e.lanes=r,e}function mp(e){var t=gr(18,null,null,0);return t.stateNode=e,t}function ld(e,t,r){return t=gr(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var gp=new WeakMap;function Ur(e,t){if(typeof e=="object"&&e!==null){var r=gp.get(e);return r!==void 0?r:(t={value:e,source:t,stack:Q(t)},gp.set(e,t),t)}return{value:e,source:t,stack:Q(t)}}var Ei=[],wi=0,$l=null,_o=0,Lr=[],zr=0,ns=null,oa=1,la="";function Aa(e,t){Ei[wi++]=_o,Ei[wi++]=$l,$l=e,_o=t}function yp(e,t,r){Lr[zr++]=oa,Lr[zr++]=la,Lr[zr++]=ns,ns=e;var o=oa;e=la;var f=32-It(o)-1;o&=~(1<<f),r+=1;var g=32-It(t)+f;if(30<g){var k=f-f%5;g=(o&(1<<k)-1).toString(32),o>>=k,f-=k,oa=1<<32-It(t)+f|r<<f|o,la=g+e}else oa=1<<g|r<<f|o,la=e}function cd(e){e.return!==null&&(Aa(e,1),yp(e,1,0))}function ud(e){for(;e===$l;)$l=Ei[--wi],Ei[wi]=null,_o=Ei[--wi],Ei[wi]=null;for(;e===ns;)ns=Lr[--zr],Lr[zr]=null,la=Lr[--zr],Lr[zr]=null,oa=Lr[--zr],Lr[zr]=null}function vp(e,t){Lr[zr++]=oa,Lr[zr++]=la,Lr[zr++]=ns,oa=t.id,la=t.overflow,ns=e}var zn=null,tn=null,Ot=!1,rs=null,Br=!1,dd=Error(i(519));function as(e){var t=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw So(Ur(t,e)),dd}function bp(e){var t=e.stateNode,r=e.type,o=e.memoizedProps;switch(t[Gt]=e,t[Mt]=o,r){case"dialog":At("cancel",t),At("close",t);break;case"iframe":case"object":case"embed":At("load",t);break;case"video":case"audio":for(r=0;r<Po.length;r++)At(Po[r],t);break;case"source":At("error",t);break;case"img":case"image":case"link":At("error",t),At("load",t);break;case"details":At("toggle",t);break;case"input":At("invalid",t),Qa(t,o.value,o.defaultValue,o.checked,o.defaultChecked,o.type,o.name,!0);break;case"select":At("invalid",t);break;case"textarea":At("invalid",t),hi(t,o.value,o.defaultValue,o.children)}r=o.children,typeof r!="string"&&typeof r!="number"&&typeof r!="bigint"||t.textContent===""+r||o.suppressHydrationWarning===!0||Ug(t.textContent,r)?(o.popover!=null&&(At("beforetoggle",t),At("toggle",t)),o.onScroll!=null&&At("scroll",t),o.onScrollEnd!=null&&At("scrollend",t),o.onClick!=null&&(t.onclick=An),t=!0):t=!1,t||as(e,!0)}function xp(e){for(zn=e.return;zn;)switch(zn.tag){case 5:case 31:case 13:Br=!1;return;case 27:case 3:Br=!0;return;default:zn=zn.return}}function Ti(e){if(e!==zn)return!1;if(!Ot)return xp(e),Ot=!0,!1;var t=e.tag,r;if((r=t!==3&&t!==27)&&((r=t===5)&&(r=e.type,r=!(r!=="form"&&r!=="button")||Cf(e.type,e.memoizedProps)),r=!r),r&&tn&&as(e),xp(e),t===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));tn=Yg(e)}else if(t===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(317));tn=Yg(e)}else t===27?(t=tn,vs(e.type)?(e=Mf,Mf=null,tn=e):tn=t):tn=zn?Gr(e.stateNode.nextSibling):null;return!0}function Ps(){tn=zn=null,Ot=!1}function fd(){var e=rs;return e!==null&&(cr===null?cr=e:cr.push.apply(cr,e),rs=null),e}function So(e){rs===null?rs=[e]:rs.push(e)}var hd=L(null),Ys=null,ka=null;function ss(e,t,r){Z(hd,t._currentValue),t._currentValue=r}function Na(e){e._currentValue=hd.current,A(hd)}function pd(e,t,r){for(;e!==null;){var o=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,o!==null&&(o.childLanes|=t)):o!==null&&(o.childLanes&t)!==t&&(o.childLanes|=t),e===r)break;e=e.return}}function md(e,t,r,o){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var g=f.dependencies;if(g!==null){var k=f.child;g=g.firstContext;e:for(;g!==null;){var G=g;g=f;for(var ne=0;ne<t.length;ne++)if(G.context===t[ne]){g.lanes|=r,G=g.alternate,G!==null&&(G.lanes|=r),pd(g.return,r,e),o||(k=null);break e}g=G.next}}else if(f.tag===18){if(k=f.return,k===null)throw Error(i(341));k.lanes|=r,g=k.alternate,g!==null&&(g.lanes|=r),pd(k,r,e),k=null}else k=f.child;if(k!==null)k.return=f;else for(k=f;k!==null;){if(k===e){k=null;break}if(f=k.sibling,f!==null){f.return=k.return,k=f;break}k=k.return}f=k}}function Ai(e,t,r,o){e=null;for(var f=t,g=!1;f!==null;){if(!g){if((f.flags&524288)!==0)g=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var k=f.alternate;if(k===null)throw Error(i(387));if(k=k.memoizedProps,k!==null){var G=f.type;mr(f.pendingProps.value,k.value)||(e!==null?e.push(G):e=[G])}}else if(f===Ee.current){if(k=f.alternate,k===null)throw Error(i(387));k.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Qo):e=[Qo])}f=f.return}e!==null&&md(t,e,r,o),t.flags|=262144}function Zl(e){for(e=e.firstContext;e!==null;){if(!mr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Vs(e){Ys=e,ka=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Bn(e){return _p(Ys,e)}function Ql(e,t){return Ys===null&&Vs(e),_p(e,t)}function _p(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},ka===null){if(e===null)throw Error(i(308));ka=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else ka=ka.next=t;return r}var V0=typeof AbortController<"u"?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(r,o){e.push(o)}};this.abort=function(){t.aborted=!0,e.forEach(function(r){return r()})}},$0=n.unstable_scheduleCallback,Z0=n.unstable_NormalPriority,Sn={$$typeof:U,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function gd(){return{controller:new V0,data:new Map,refCount:0}}function Eo(e){e.refCount--,e.refCount===0&&$0(Z0,function(){e.controller.abort()})}var wo=null,yd=0,ki=0,Ni=null;function Q0(e,t){if(wo===null){var r=wo=[];yd=0,ki=_f(),Ni={status:"pending",value:void 0,then:function(o){r.push(o)}}}return yd++,t.then(Sp,Sp),t}function Sp(){if(--yd===0&&wo!==null){Ni!==null&&(Ni.status="fulfilled");var e=wo;wo=null,ki=0,Ni=null;for(var t=0;t<e.length;t++)(0,e[t])()}}function J0(e,t){var r=[],o={status:"pending",value:null,reason:null,then:function(f){r.push(f)}};return e.then(function(){o.status="fulfilled",o.value=t;for(var f=0;f<r.length;f++)(0,r[f])(t)},function(f){for(o.status="rejected",o.reason=f,f=0;f<r.length;f++)(0,r[f])(void 0)}),o}var Ep=$.S;$.S=function(e,t){ig=ze(),typeof t=="object"&&t!==null&&typeof t.then=="function"&&Q0(e,t),Ep!==null&&Ep(e,t)};var $s=L(null);function vd(){var e=$s.current;return e!==null?e:Kt.pooledCache}function Jl(e,t){t===null?Z($s,$s.current):Z($s,t.pool)}function wp(){var e=vd();return e===null?null:{parent:Sn._currentValue,pool:e}}var Di=Error(i(460)),bd=Error(i(474)),Kl=Error(i(542)),Xl={then:function(){}};function Tp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Ap(e,t,r){switch(r=e[r],r===void 0?e.push(t):r!==t&&(t.then(An,An),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Np(e),e;default:if(typeof t.status=="string")t.then(An,An);else{if(e=Kt,e!==null&&100<e.shellSuspendCounter)throw Error(i(482));e=t,e.status="pending",e.then(function(o){if(t.status==="pending"){var f=t;f.status="fulfilled",f.value=o}},function(o){if(t.status==="pending"){var f=t;f.status="rejected",f.reason=o}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw e=t.reason,Np(e),e}throw Qs=t,Di}}function Zs(e){try{var t=e._init;return t(e._payload)}catch(r){throw r!==null&&typeof r=="object"&&typeof r.then=="function"?(Qs=r,Di):r}}var Qs=null;function kp(){if(Qs===null)throw Error(i(459));var e=Qs;return Qs=null,e}function Np(e){if(e===Di||e===Kl)throw Error(i(483))}var Ci=null,To=0;function Wl(e){var t=To;return To+=1,Ci===null&&(Ci=[]),Ap(Ci,e,t)}function Ao(e,t){t=t.props.ref,e.ref=t!==void 0?t:null}function ec(e,t){throw t.$$typeof===T?Error(i(525)):(e=Object.prototype.toString.call(t),Error(i(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)))}function Dp(e){function t(de,ce){if(e){var ye=de.deletions;ye===null?(de.deletions=[ce],de.flags|=16):ye.push(ce)}}function r(de,ce){if(!e)return null;for(;ce!==null;)t(de,ce),ce=ce.sibling;return null}function o(de){for(var ce=new Map;de!==null;)de.key!==null?ce.set(de.key,de):ce.set(de.index,de),de=de.sibling;return ce}function f(de,ce){return de=Ta(de,ce),de.index=0,de.sibling=null,de}function g(de,ce,ye){return de.index=ye,e?(ye=de.alternate,ye!==null?(ye=ye.index,ye<ce?(de.flags|=67108866,ce):ye):(de.flags|=67108866,ce)):(de.flags|=1048576,ce)}function k(de){return e&&de.alternate===null&&(de.flags|=67108866),de}function G(de,ce,ye,Oe){return ce===null||ce.tag!==6?(ce=od(ye,de.mode,Oe),ce.return=de,ce):(ce=f(ce,ye),ce.return=de,ce)}function ne(de,ce,ye,Oe){var at=ye.type;return at===S?Ae(de,ce,ye.props.children,Oe,ye.key):ce!==null&&(ce.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&Zs(at)===ce.type)?(ce=f(ce,ye.props),Ao(ce,ye),ce.return=de,ce):(ce=Vl(ye.type,ye.key,ye.props,null,de.mode,Oe),Ao(ce,ye),ce.return=de,ce)}function ve(de,ce,ye,Oe){return ce===null||ce.tag!==4||ce.stateNode.containerInfo!==ye.containerInfo||ce.stateNode.implementation!==ye.implementation?(ce=ld(ye,de.mode,Oe),ce.return=de,ce):(ce=f(ce,ye.children||[]),ce.return=de,ce)}function Ae(de,ce,ye,Oe,at){return ce===null||ce.tag!==7?(ce=Hs(ye,de.mode,Oe,at),ce.return=de,ce):(ce=f(ce,ye),ce.return=de,ce)}function Ie(de,ce,ye){if(typeof ce=="string"&&ce!==""||typeof ce=="number"||typeof ce=="bigint")return ce=od(""+ce,de.mode,ye),ce.return=de,ce;if(typeof ce=="object"&&ce!==null){switch(ce.$$typeof){case _:return ye=Vl(ce.type,ce.key,ce.props,null,de.mode,ye),Ao(ye,ce),ye.return=de,ye;case E:return ce=ld(ce,de.mode,ye),ce.return=de,ce;case j:return ce=Zs(ce),Ie(de,ce,ye)}if(ie(ce)||B(ce))return ce=Hs(ce,de.mode,ye,null),ce.return=de,ce;if(typeof ce.then=="function")return Ie(de,Wl(ce),ye);if(ce.$$typeof===U)return Ie(de,Ql(de,ce),ye);ec(de,ce)}return null}function xe(de,ce,ye,Oe){var at=ce!==null?ce.key:null;if(typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint")return at!==null?null:G(de,ce,""+ye,Oe);if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _:return ye.key===at?ne(de,ce,ye,Oe):null;case E:return ye.key===at?ve(de,ce,ye,Oe):null;case j:return ye=Zs(ye),xe(de,ce,ye,Oe)}if(ie(ye)||B(ye))return at!==null?null:Ae(de,ce,ye,Oe,null);if(typeof ye.then=="function")return xe(de,ce,Wl(ye),Oe);if(ye.$$typeof===U)return xe(de,ce,Ql(de,ye),Oe);ec(de,ye)}return null}function we(de,ce,ye,Oe,at){if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number"||typeof Oe=="bigint")return de=de.get(ye)||null,G(ce,de,""+Oe,at);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case _:return de=de.get(Oe.key===null?ye:Oe.key)||null,ne(ce,de,Oe,at);case E:return de=de.get(Oe.key===null?ye:Oe.key)||null,ve(ce,de,Oe,at);case j:return Oe=Zs(Oe),we(de,ce,ye,Oe,at)}if(ie(Oe)||B(Oe))return de=de.get(ye)||null,Ae(ce,de,Oe,at,null);if(typeof Oe.then=="function")return we(de,ce,ye,Wl(Oe),at);if(Oe.$$typeof===U)return we(de,ce,ye,Ql(ce,Oe),at);ec(ce,Oe)}return null}function Ke(de,ce,ye,Oe){for(var at=null,Ut=null,et=ce,bt=ce=0,Dt=null;et!==null&&bt<ye.length;bt++){et.index>bt?(Dt=et,et=null):Dt=et.sibling;var Lt=xe(de,et,ye[bt],Oe);if(Lt===null){et===null&&(et=Dt);break}e&&et&&Lt.alternate===null&&t(de,et),ce=g(Lt,ce,bt),Ut===null?at=Lt:Ut.sibling=Lt,Ut=Lt,et=Dt}if(bt===ye.length)return r(de,et),Ot&&Aa(de,bt),at;if(et===null){for(;bt<ye.length;bt++)et=Ie(de,ye[bt],Oe),et!==null&&(ce=g(et,ce,bt),Ut===null?at=et:Ut.sibling=et,Ut=et);return Ot&&Aa(de,bt),at}for(et=o(et);bt<ye.length;bt++)Dt=we(et,de,bt,ye[bt],Oe),Dt!==null&&(e&&Dt.alternate!==null&&et.delete(Dt.key===null?bt:Dt.key),ce=g(Dt,ce,bt),Ut===null?at=Dt:Ut.sibling=Dt,Ut=Dt);return e&&et.forEach(function(Es){return t(de,Es)}),Ot&&Aa(de,bt),at}function lt(de,ce,ye,Oe){if(ye==null)throw Error(i(151));for(var at=null,Ut=null,et=ce,bt=ce=0,Dt=null,Lt=ye.next();et!==null&&!Lt.done;bt++,Lt=ye.next()){et.index>bt?(Dt=et,et=null):Dt=et.sibling;var Es=xe(de,et,Lt.value,Oe);if(Es===null){et===null&&(et=Dt);break}e&&et&&Es.alternate===null&&t(de,et),ce=g(Es,ce,bt),Ut===null?at=Es:Ut.sibling=Es,Ut=Es,et=Dt}if(Lt.done)return r(de,et),Ot&&Aa(de,bt),at;if(et===null){for(;!Lt.done;bt++,Lt=ye.next())Lt=Ie(de,Lt.value,Oe),Lt!==null&&(ce=g(Lt,ce,bt),Ut===null?at=Lt:Ut.sibling=Lt,Ut=Lt);return Ot&&Aa(de,bt),at}for(et=o(et);!Lt.done;bt++,Lt=ye.next())Lt=we(et,de,bt,Lt.value,Oe),Lt!==null&&(e&&Lt.alternate!==null&&et.delete(Lt.key===null?bt:Lt.key),ce=g(Lt,ce,bt),Ut===null?at=Lt:Ut.sibling=Lt,Ut=Lt);return e&&et.forEach(function(o_){return t(de,o_)}),Ot&&Aa(de,bt),at}function Zt(de,ce,ye,Oe){if(typeof ye=="object"&&ye!==null&&ye.type===S&&ye.key===null&&(ye=ye.props.children),typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case _:e:{for(var at=ye.key;ce!==null;){if(ce.key===at){if(at=ye.type,at===S){if(ce.tag===7){r(de,ce.sibling),Oe=f(ce,ye.props.children),Oe.return=de,de=Oe;break e}}else if(ce.elementType===at||typeof at=="object"&&at!==null&&at.$$typeof===j&&Zs(at)===ce.type){r(de,ce.sibling),Oe=f(ce,ye.props),Ao(Oe,ye),Oe.return=de,de=Oe;break e}r(de,ce);break}else t(de,ce);ce=ce.sibling}ye.type===S?(Oe=Hs(ye.props.children,de.mode,Oe,ye.key),Oe.return=de,de=Oe):(Oe=Vl(ye.type,ye.key,ye.props,null,de.mode,Oe),Ao(Oe,ye),Oe.return=de,de=Oe)}return k(de);case E:e:{for(at=ye.key;ce!==null;){if(ce.key===at)if(ce.tag===4&&ce.stateNode.containerInfo===ye.containerInfo&&ce.stateNode.implementation===ye.implementation){r(de,ce.sibling),Oe=f(ce,ye.children||[]),Oe.return=de,de=Oe;break e}else{r(de,ce);break}else t(de,ce);ce=ce.sibling}Oe=ld(ye,de.mode,Oe),Oe.return=de,de=Oe}return k(de);case j:return ye=Zs(ye),Zt(de,ce,ye,Oe)}if(ie(ye))return Ke(de,ce,ye,Oe);if(B(ye)){if(at=B(ye),typeof at!="function")throw Error(i(150));return ye=at.call(ye),lt(de,ce,ye,Oe)}if(typeof ye.then=="function")return Zt(de,ce,Wl(ye),Oe);if(ye.$$typeof===U)return Zt(de,ce,Ql(de,ye),Oe);ec(de,ye)}return typeof ye=="string"&&ye!==""||typeof ye=="number"||typeof ye=="bigint"?(ye=""+ye,ce!==null&&ce.tag===6?(r(de,ce.sibling),Oe=f(ce,ye),Oe.return=de,de=Oe):(r(de,ce),Oe=od(ye,de.mode,Oe),Oe.return=de,de=Oe),k(de)):r(de,ce)}return function(de,ce,ye,Oe){try{To=0;var at=Zt(de,ce,ye,Oe);return Ci=null,at}catch(et){if(et===Di||et===Kl)throw et;var Ut=gr(29,et,null,de.mode);return Ut.lanes=Oe,Ut.return=de,Ut}finally{}}}var Js=Dp(!0),Cp=Dp(!1),is=!1;function xd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function _d(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function os(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ls(e,t,r){var o=e.updateQueue;if(o===null)return null;if(o=o.shared,(zt&2)!==0){var f=o.pending;return f===null?t.next=t:(t.next=f.next,f.next=t),o.pending=t,t=Yl(e),hp(e,null,r),t}return Pl(e,o,t,r),Yl(e)}function ko(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194048)!==0)){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Dr(e,r)}}function Sd(e,t){var r=e.updateQueue,o=e.alternate;if(o!==null&&(o=o.updateQueue,r===o)){var f=null,g=null;if(r=r.firstBaseUpdate,r!==null){do{var k={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};g===null?f=g=k:g=g.next=k,r=r.next}while(r!==null);g===null?f=g=t:g=g.next=t}else f=g=t;r={baseState:o.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:o.shared,callbacks:o.callbacks},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var Ed=!1;function No(){if(Ed){var e=Ni;if(e!==null)throw e}}function Do(e,t,r,o){Ed=!1;var f=e.updateQueue;is=!1;var g=f.firstBaseUpdate,k=f.lastBaseUpdate,G=f.shared.pending;if(G!==null){f.shared.pending=null;var ne=G,ve=ne.next;ne.next=null,k===null?g=ve:k.next=ve,k=ne;var Ae=e.alternate;Ae!==null&&(Ae=Ae.updateQueue,G=Ae.lastBaseUpdate,G!==k&&(G===null?Ae.firstBaseUpdate=ve:G.next=ve,Ae.lastBaseUpdate=ne))}if(g!==null){var Ie=f.baseState;k=0,Ae=ve=ne=null,G=g;do{var xe=G.lane&-536870913,we=xe!==G.lane;if(we?(Nt&xe)===xe:(o&xe)===xe){xe!==0&&xe===ki&&(Ed=!0),Ae!==null&&(Ae=Ae.next={lane:0,tag:G.tag,payload:G.payload,callback:null,next:null});e:{var Ke=e,lt=G;xe=t;var Zt=r;switch(lt.tag){case 1:if(Ke=lt.payload,typeof Ke=="function"){Ie=Ke.call(Zt,Ie,xe);break e}Ie=Ke;break e;case 3:Ke.flags=Ke.flags&-65537|128;case 0:if(Ke=lt.payload,xe=typeof Ke=="function"?Ke.call(Zt,Ie,xe):Ke,xe==null)break e;Ie=x({},Ie,xe);break e;case 2:is=!0}}xe=G.callback,xe!==null&&(e.flags|=64,we&&(e.flags|=8192),we=f.callbacks,we===null?f.callbacks=[xe]:we.push(xe))}else we={lane:xe,tag:G.tag,payload:G.payload,callback:G.callback,next:null},Ae===null?(ve=Ae=we,ne=Ie):Ae=Ae.next=we,k|=xe;if(G=G.next,G===null){if(G=f.shared.pending,G===null)break;we=G,G=we.next,we.next=null,f.lastBaseUpdate=we,f.shared.pending=null}}while(!0);Ae===null&&(ne=Ie),f.baseState=ne,f.firstBaseUpdate=ve,f.lastBaseUpdate=Ae,g===null&&(f.shared.lanes=0),hs|=k,e.lanes=k,e.memoizedState=Ie}}function Op(e,t){if(typeof e!="function")throw Error(i(191,e));e.call(t)}function Rp(e,t){var r=e.callbacks;if(r!==null)for(e.callbacks=null,e=0;e<r.length;e++)Op(r[e],t)}var Oi=L(null),tc=L(0);function jp(e,t){e=La,Z(tc,e),Z(Oi,t),La=e|t.baseLanes}function wd(){Z(tc,La),Z(Oi,Oi.current)}function Td(){La=tc.current,A(Oi),A(tc)}var yr=L(null),Fr=null;function cs(e){var t=e.alternate;Z(yn,yn.current&1),Z(yr,e),Fr===null&&(t===null||Oi.current!==null||t.memoizedState!==null)&&(Fr=e)}function Ad(e){Z(yn,yn.current),Z(yr,e),Fr===null&&(Fr=e)}function Ip(e){e.tag===22?(Z(yn,yn.current),Z(yr,e),Fr===null&&(Fr=e)):us()}function us(){Z(yn,yn.current),Z(yr,yr.current)}function vr(e){A(yr),Fr===e&&(Fr=null),A(yn)}var yn=L(0);function nc(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||jf(r)||If(r)))return t}else if(t.tag===19&&(t.memoizedProps.revealOrder==="forwards"||t.memoizedProps.revealOrder==="backwards"||t.memoizedProps.revealOrder==="unstable_legacy-backwards"||t.memoizedProps.revealOrder==="together")){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Da=0,yt=null,Vt=null,En=null,rc=!1,Ri=!1,Ks=!1,ac=0,Co=0,ji=null,K0=0;function dn(){throw Error(i(321))}function kd(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!mr(e[r],t[r]))return!1;return!0}function Nd(e,t,r,o,f,g){return Da=g,yt=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,$.H=e===null||e.memoizedState===null?ym:Hd,Ks=!1,g=r(o,f),Ks=!1,Ri&&(g=Up(t,r,o,f)),Mp(e),g}function Mp(e){$.H=jo;var t=Vt!==null&&Vt.next!==null;if(Da=0,En=Vt=yt=null,rc=!1,Co=0,ji=null,t)throw Error(i(300));e===null||wn||(e=e.dependencies,e!==null&&Zl(e)&&(wn=!0))}function Up(e,t,r,o){yt=e;var f=0;do{if(Ri&&(ji=null),Co=0,Ri=!1,25<=f)throw Error(i(301));if(f+=1,En=Vt=null,e.updateQueue!=null){var g=e.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}$.H=vm,g=t(r,o)}while(Ri);return g}function X0(){var e=$.H,t=e.useState()[0];return t=typeof t.then=="function"?Oo(t):t,e=e.useState()[0],(Vt!==null?Vt.memoizedState:null)!==e&&(yt.flags|=1024),t}function Dd(){var e=ac!==0;return ac=0,e}function Cd(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function Od(e){if(rc){for(e=e.memoizedState;e!==null;){var t=e.queue;t!==null&&(t.pending=null),e=e.next}rc=!1}Da=0,En=Vt=yt=null,Ri=!1,Co=ac=0,ji=null}function Kn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return En===null?yt.memoizedState=En=e:En=En.next=e,En}function vn(){if(Vt===null){var e=yt.alternate;e=e!==null?e.memoizedState:null}else e=Vt.next;var t=En===null?yt.memoizedState:En.next;if(t!==null)En=t,Vt=e;else{if(e===null)throw yt.alternate===null?Error(i(467)):Error(i(310));Vt=e,e={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},En===null?yt.memoizedState=En=e:En=En.next=e}return En}function sc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Oo(e){var t=Co;return Co+=1,ji===null&&(ji=[]),e=Ap(ji,e,t),t=yt,(En===null?t.memoizedState:En.next)===null&&(t=t.alternate,$.H=t===null||t.memoizedState===null?ym:Hd),e}function ic(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Oo(e);if(e.$$typeof===U)return Bn(e)}throw Error(i(438,String(e)))}function Rd(e){var t=null,r=yt.updateQueue;if(r!==null&&(t=r.memoCache),t==null){var o=yt.alternate;o!==null&&(o=o.updateQueue,o!==null&&(o=o.memoCache,o!=null&&(t={data:o.data.map(function(f){return f.slice()}),index:0})))}if(t==null&&(t={data:[],index:0}),r===null&&(r=sc(),yt.updateQueue=r),r.memoCache=t,r=t.data[t.index],r===void 0)for(r=t.data[t.index]=Array(e),o=0;o<e;o++)r[o]=P;return t.index++,r}function Ca(e,t){return typeof t=="function"?t(e):t}function oc(e){var t=vn();return jd(t,Vt,e)}function jd(e,t,r){var o=e.queue;if(o===null)throw Error(i(311));o.lastRenderedReducer=r;var f=e.baseQueue,g=o.pending;if(g!==null){if(f!==null){var k=f.next;f.next=g.next,g.next=k}t.baseQueue=f=g,o.pending=null}if(g=e.baseState,f===null)e.memoizedState=g;else{t=f.next;var G=k=null,ne=null,ve=t,Ae=!1;do{var Ie=ve.lane&-536870913;if(Ie!==ve.lane?(Nt&Ie)===Ie:(Da&Ie)===Ie){var xe=ve.revertLane;if(xe===0)ne!==null&&(ne=ne.next={lane:0,revertLane:0,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null}),Ie===ki&&(Ae=!0);else if((Da&xe)===xe){ve=ve.next,xe===ki&&(Ae=!0);continue}else Ie={lane:0,revertLane:ve.revertLane,gesture:null,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ne===null?(G=ne=Ie,k=g):ne=ne.next=Ie,yt.lanes|=xe,hs|=xe;Ie=ve.action,Ks&&r(g,Ie),g=ve.hasEagerState?ve.eagerState:r(g,Ie)}else xe={lane:Ie,revertLane:ve.revertLane,gesture:ve.gesture,action:ve.action,hasEagerState:ve.hasEagerState,eagerState:ve.eagerState,next:null},ne===null?(G=ne=xe,k=g):ne=ne.next=xe,yt.lanes|=Ie,hs|=Ie;ve=ve.next}while(ve!==null&&ve!==t);if(ne===null?k=g:ne.next=G,!mr(g,e.memoizedState)&&(wn=!0,Ae&&(r=Ni,r!==null)))throw r;e.memoizedState=g,e.baseState=k,e.baseQueue=ne,o.lastRenderedState=g}return f===null&&(o.lanes=0),[e.memoizedState,o.dispatch]}function Id(e){var t=vn(),r=t.queue;if(r===null)throw Error(i(311));r.lastRenderedReducer=e;var o=r.dispatch,f=r.pending,g=t.memoizedState;if(f!==null){r.pending=null;var k=f=f.next;do g=e(g,k.action),k=k.next;while(k!==f);mr(g,t.memoizedState)||(wn=!0),t.memoizedState=g,t.baseQueue===null&&(t.baseState=g),r.lastRenderedState=g}return[g,o]}function Lp(e,t,r){var o=yt,f=vn(),g=Ot;if(g){if(r===void 0)throw Error(i(407));r=r()}else r=t();var k=!mr((Vt||f).memoizedState,r);if(k&&(f.memoizedState=r,wn=!0),f=f.queue,Ld(Fp.bind(null,o,f,e),[e]),f.getSnapshot!==t||k||En!==null&&En.memoizedState.tag&1){if(o.flags|=2048,Ii(9,{destroy:void 0},Bp.bind(null,o,f,r,t),null),Kt===null)throw Error(i(349));g||(Da&127)!==0||zp(o,t,r)}return r}function zp(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=yt.updateQueue,t===null?(t=sc(),yt.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function Bp(e,t,r,o){t.value=r,t.getSnapshot=o,Gp(t)&&qp(e)}function Fp(e,t,r){return r(function(){Gp(t)&&qp(e)})}function Gp(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!mr(e,r)}catch{return!0}}function qp(e){var t=qs(e,2);t!==null&&ur(t,e,2)}function Md(e){var t=Kn();if(typeof e=="function"){var r=e;if(e=r(),Ks){mn(!0);try{r()}finally{mn(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:e},t}function Hp(e,t,r,o){return e.baseState=r,jd(e,Vt,typeof o=="function"?o:Ca)}function W0(e,t,r,o,f){if(uc(e))throw Error(i(485));if(e=t.action,e!==null){var g={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(k){g.listeners.push(k)}};$.T!==null?r(!0):g.isTransition=!1,o(g),r=t.pending,r===null?(g.next=t.pending=g,Pp(t,g)):(g.next=r.next,t.pending=r.next=g)}}function Pp(e,t){var r=t.action,o=t.payload,f=e.state;if(t.isTransition){var g=$.T,k={};$.T=k;try{var G=r(f,o),ne=$.S;ne!==null&&ne(k,G),Yp(e,t,G)}catch(ve){Ud(e,t,ve)}finally{g!==null&&k.types!==null&&(g.types=k.types),$.T=g}}else try{g=r(f,o),Yp(e,t,g)}catch(ve){Ud(e,t,ve)}}function Yp(e,t,r){r!==null&&typeof r=="object"&&typeof r.then=="function"?r.then(function(o){Vp(e,t,o)},function(o){return Ud(e,t,o)}):Vp(e,t,r)}function Vp(e,t,r){t.status="fulfilled",t.value=r,$p(t),e.state=r,t=e.pending,t!==null&&(r=t.next,r===t?e.pending=null:(r=r.next,t.next=r,Pp(e,r)))}function Ud(e,t,r){var o=e.pending;if(e.pending=null,o!==null){o=o.next;do t.status="rejected",t.reason=r,$p(t),t=t.next;while(t!==o)}e.action=null}function $p(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Zp(e,t){return t}function Qp(e,t){if(Ot){var r=Kt.formState;if(r!==null){e:{var o=yt;if(Ot){if(tn){t:{for(var f=tn,g=Br;f.nodeType!==8;){if(!g){f=null;break t}if(f=Gr(f.nextSibling),f===null){f=null;break t}}g=f.data,f=g==="F!"||g==="F"?f:null}if(f){tn=Gr(f.nextSibling),o=f.data==="F!";break e}}as(o)}o=!1}o&&(t=r[0])}}return r=Kn(),r.memoizedState=r.baseState=t,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Zp,lastRenderedState:t},r.queue=o,r=pm.bind(null,yt,o),o.dispatch=r,o=Md(!1),g=qd.bind(null,yt,!1,o.queue),o=Kn(),f={state:t,dispatch:null,action:e,pending:null},o.queue=f,r=W0.bind(null,yt,f,g,r),f.dispatch=r,o.memoizedState=e,[t,r,!1]}function Jp(e){var t=vn();return Kp(t,Vt,e)}function Kp(e,t,r){if(t=jd(e,t,Zp)[0],e=oc(Ca)[0],typeof t=="object"&&t!==null&&typeof t.then=="function")try{var o=Oo(t)}catch(k){throw k===Di?Kl:k}else o=t;t=vn();var f=t.queue,g=f.dispatch;return r!==t.memoizedState&&(yt.flags|=2048,Ii(9,{destroy:void 0},ex.bind(null,f,r),null)),[o,g,e]}function ex(e,t){e.action=t}function Xp(e){var t=vn(),r=Vt;if(r!==null)return Kp(t,r,e);vn(),t=t.memoizedState,r=vn();var o=r.queue.dispatch;return r.memoizedState=e,[t,o,!1]}function Ii(e,t,r,o){return e={tag:e,create:r,deps:o,inst:t,next:null},t=yt.updateQueue,t===null&&(t=sc(),yt.updateQueue=t),r=t.lastEffect,r===null?t.lastEffect=e.next=e:(o=r.next,r.next=e,e.next=o,t.lastEffect=e),e}function Wp(){return vn().memoizedState}function lc(e,t,r,o){var f=Kn();yt.flags|=e,f.memoizedState=Ii(1|t,{destroy:void 0},r,o===void 0?null:o)}function cc(e,t,r,o){var f=vn();o=o===void 0?null:o;var g=f.memoizedState.inst;Vt!==null&&o!==null&&kd(o,Vt.memoizedState.deps)?f.memoizedState=Ii(t,g,r,o):(yt.flags|=e,f.memoizedState=Ii(1|t,g,r,o))}function em(e,t){lc(8390656,8,e,t)}function Ld(e,t){cc(2048,8,e,t)}function tx(e){yt.flags|=4;var t=yt.updateQueue;if(t===null)t=sc(),yt.updateQueue=t,t.events=[e];else{var r=t.events;r===null?t.events=[e]:r.push(e)}}function tm(e){var t=vn().memoizedState;return tx({ref:t,nextImpl:e}),function(){if((zt&2)!==0)throw Error(i(440));return t.impl.apply(void 0,arguments)}}function nm(e,t){return cc(4,2,e,t)}function rm(e,t){return cc(4,4,e,t)}function am(e,t){if(typeof t=="function"){e=e();var r=t(e);return function(){typeof r=="function"?r():t(null)}}if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function sm(e,t,r){r=r!=null?r.concat([e]):null,cc(4,4,am.bind(null,t,e),r)}function zd(){}function im(e,t){var r=vn();t=t===void 0?null:t;var o=r.memoizedState;return t!==null&&kd(t,o[1])?o[0]:(r.memoizedState=[e,t],e)}function om(e,t){var r=vn();t=t===void 0?null:t;var o=r.memoizedState;if(t!==null&&kd(t,o[1]))return o[0];if(o=e(),Ks){mn(!0);try{e()}finally{mn(!1)}}return r.memoizedState=[o,t],o}function Bd(e,t,r){return r===void 0||(Da&1073741824)!==0&&(Nt&261930)===0?e.memoizedState=t:(e.memoizedState=r,e=lg(),yt.lanes|=e,hs|=e,r)}function lm(e,t,r,o){return mr(r,t)?r:Oi.current!==null?(e=Bd(e,r,o),mr(e,t)||(wn=!0),e):(Da&42)===0||(Da&1073741824)!==0&&(Nt&261930)===0?(wn=!0,e.memoizedState=r):(e=lg(),yt.lanes|=e,hs|=e,t)}function cm(e,t,r,o,f){var g=q.p;q.p=g!==0&&8>g?g:8;var k=$.T,G={};$.T=G,qd(e,!1,t,r);try{var ne=f(),ve=$.S;if(ve!==null&&ve(G,ne),ne!==null&&typeof ne=="object"&&typeof ne.then=="function"){var Ae=J0(ne,o);Ro(e,t,Ae,_r(e))}else Ro(e,t,o,_r(e))}catch(Ie){Ro(e,t,{then:function(){},status:"rejected",reason:Ie},_r())}finally{q.p=g,k!==null&&G.types!==null&&(k.types=G.types),$.T=k}}function nx(){}function Fd(e,t,r,o){if(e.tag!==5)throw Error(i(476));var f=um(e).queue;cm(e,f,t,se,r===null?nx:function(){return dm(e),r(o)})}function um(e){var t=e.memoizedState;if(t!==null)return t;t={memoizedState:se,baseState:se,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:se},next:null};var r={};return t.next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ca,lastRenderedState:r},next:null},e.memoizedState=t,e=e.alternate,e!==null&&(e.memoizedState=t),t}function dm(e){var t=um(e);t.next===null&&(t=e.alternate.memoizedState),Ro(e,t.next.queue,{},_r())}function Gd(){return Bn(Qo)}function fm(){return vn().memoizedState}function hm(){return vn().memoizedState}function rx(e){for(var t=e.return;t!==null;){switch(t.tag){case 24:case 3:var r=_r();e=os(r);var o=ls(t,e,r);o!==null&&(ur(o,t,r),ko(o,t,r)),t={cache:gd()},e.payload=t;return}t=t.return}}function ax(e,t,r){var o=_r();r={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},uc(e)?mm(t,r):(r=sd(e,t,r,o),r!==null&&(ur(r,e,o),gm(r,t,o)))}function pm(e,t,r){var o=_r();Ro(e,t,r,o)}function Ro(e,t,r,o){var f={lane:o,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(uc(e))mm(t,f);else{var g=e.alternate;if(e.lanes===0&&(g===null||g.lanes===0)&&(g=t.lastRenderedReducer,g!==null))try{var k=t.lastRenderedState,G=g(k,r);if(f.hasEagerState=!0,f.eagerState=G,mr(G,k))return Pl(e,t,f,0),Kt===null&&Hl(),!1}catch{}finally{}if(r=sd(e,t,f,o),r!==null)return ur(r,e,o),gm(r,t,o),!0}return!1}function qd(e,t,r,o){if(o={lane:2,revertLane:_f(),gesture:null,action:o,hasEagerState:!1,eagerState:null,next:null},uc(e)){if(t)throw Error(i(479))}else t=sd(e,r,o,2),t!==null&&ur(t,e,2)}function uc(e){var t=e.alternate;return e===yt||t!==null&&t===yt}function mm(e,t){Ri=rc=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function gm(e,t,r){if((r&4194048)!==0){var o=t.lanes;o&=e.pendingLanes,r|=o,t.lanes=r,Dr(e,r)}}var jo={readContext:Bn,use:ic,useCallback:dn,useContext:dn,useEffect:dn,useImperativeHandle:dn,useLayoutEffect:dn,useInsertionEffect:dn,useMemo:dn,useReducer:dn,useRef:dn,useState:dn,useDebugValue:dn,useDeferredValue:dn,useTransition:dn,useSyncExternalStore:dn,useId:dn,useHostTransitionStatus:dn,useFormState:dn,useActionState:dn,useOptimistic:dn,useMemoCache:dn,useCacheRefresh:dn};jo.useEffectEvent=dn;var ym={readContext:Bn,use:ic,useCallback:function(e,t){return Kn().memoizedState=[e,t===void 0?null:t],e},useContext:Bn,useEffect:em,useImperativeHandle:function(e,t,r){r=r!=null?r.concat([e]):null,lc(4194308,4,am.bind(null,t,e),r)},useLayoutEffect:function(e,t){return lc(4194308,4,e,t)},useInsertionEffect:function(e,t){lc(4,2,e,t)},useMemo:function(e,t){var r=Kn();t=t===void 0?null:t;var o=e();if(Ks){mn(!0);try{e()}finally{mn(!1)}}return r.memoizedState=[o,t],o},useReducer:function(e,t,r){var o=Kn();if(r!==void 0){var f=r(t);if(Ks){mn(!0);try{r(t)}finally{mn(!1)}}}else f=t;return o.memoizedState=o.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},o.queue=e,e=e.dispatch=ax.bind(null,yt,e),[o.memoizedState,e]},useRef:function(e){var t=Kn();return e={current:e},t.memoizedState=e},useState:function(e){e=Md(e);var t=e.queue,r=pm.bind(null,yt,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:zd,useDeferredValue:function(e,t){var r=Kn();return Bd(r,e,t)},useTransition:function(){var e=Md(!1);return e=cm.bind(null,yt,e.queue,!0,!1),Kn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var o=yt,f=Kn();if(Ot){if(r===void 0)throw Error(i(407));r=r()}else{if(r=t(),Kt===null)throw Error(i(349));(Nt&127)!==0||zp(o,t,r)}f.memoizedState=r;var g={value:r,getSnapshot:t};return f.queue=g,em(Fp.bind(null,o,g,e),[e]),o.flags|=2048,Ii(9,{destroy:void 0},Bp.bind(null,o,g,r,t),null),r},useId:function(){var e=Kn(),t=Kt.identifierPrefix;if(Ot){var r=la,o=oa;r=(o&~(1<<32-It(o)-1)).toString(32)+r,t="_"+t+"R_"+r,r=ac++,0<r&&(t+="H"+r.toString(32)),t+="_"}else r=K0++,t="_"+t+"r_"+r.toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:Gd,useFormState:Qp,useActionState:Qp,useOptimistic:function(e){var t=Kn();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=qd.bind(null,yt,!0,r),r.dispatch=t,[e,t]},useMemoCache:Rd,useCacheRefresh:function(){return Kn().memoizedState=rx.bind(null,yt)},useEffectEvent:function(e){var t=Kn(),r={impl:e};return t.memoizedState=r,function(){if((zt&2)!==0)throw Error(i(440));return r.impl.apply(void 0,arguments)}}},Hd={readContext:Bn,use:ic,useCallback:im,useContext:Bn,useEffect:Ld,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:om,useReducer:oc,useRef:Wp,useState:function(){return oc(Ca)},useDebugValue:zd,useDeferredValue:function(e,t){var r=vn();return lm(r,Vt.memoizedState,e,t)},useTransition:function(){var e=oc(Ca)[0],t=vn().memoizedState;return[typeof e=="boolean"?e:Oo(e),t]},useSyncExternalStore:Lp,useId:fm,useHostTransitionStatus:Gd,useFormState:Jp,useActionState:Jp,useOptimistic:function(e,t){var r=vn();return Hp(r,Vt,e,t)},useMemoCache:Rd,useCacheRefresh:hm};Hd.useEffectEvent=tm;var vm={readContext:Bn,use:ic,useCallback:im,useContext:Bn,useEffect:Ld,useImperativeHandle:sm,useInsertionEffect:nm,useLayoutEffect:rm,useMemo:om,useReducer:Id,useRef:Wp,useState:function(){return Id(Ca)},useDebugValue:zd,useDeferredValue:function(e,t){var r=vn();return Vt===null?Bd(r,e,t):lm(r,Vt.memoizedState,e,t)},useTransition:function(){var e=Id(Ca)[0],t=vn().memoizedState;return[typeof e=="boolean"?e:Oo(e),t]},useSyncExternalStore:Lp,useId:fm,useHostTransitionStatus:Gd,useFormState:Xp,useActionState:Xp,useOptimistic:function(e,t){var r=vn();return Vt!==null?Hp(r,Vt,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:Rd,useCacheRefresh:hm};vm.useEffectEvent=tm;function Pd(e,t,r,o){t=e.memoizedState,r=r(o,t),r=r==null?t:x({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Yd={enqueueSetState:function(e,t,r){e=e._reactInternals;var o=_r(),f=os(o);f.payload=t,r!=null&&(f.callback=r),t=ls(e,f,o),t!==null&&(ur(t,e,o),ko(t,e,o))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var o=_r(),f=os(o);f.tag=1,f.payload=t,r!=null&&(f.callback=r),t=ls(e,f,o),t!==null&&(ur(t,e,o),ko(t,e,o))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=_r(),o=os(r);o.tag=2,t!=null&&(o.callback=t),t=ls(e,o,r),t!==null&&(ur(t,e,r),ko(t,e,r))}};function bm(e,t,r,o,f,g,k){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(o,g,k):t.prototype&&t.prototype.isPureReactComponent?!bo(r,o)||!bo(f,g):!0}function xm(e,t,r,o){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,o),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,o),t.state!==e&&Yd.enqueueReplaceState(t,t.state,null)}function Xs(e,t){var r=t;if("ref"in t){r={};for(var o in t)o!=="ref"&&(r[o]=t[o])}if(e=e.defaultProps){r===t&&(r=x({},r));for(var f in e)r[f]===void 0&&(r[f]=e[f])}return r}function _m(e){ql(e)}function Sm(e){console.error(e)}function Em(e){ql(e)}function dc(e,t){try{var r=e.onUncaughtError;r(t.value,{componentStack:t.stack})}catch(o){setTimeout(function(){throw o})}}function wm(e,t,r){try{var o=e.onCaughtError;o(r.value,{componentStack:r.stack,errorBoundary:t.tag===1?t.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Vd(e,t,r){return r=os(r),r.tag=3,r.payload={element:null},r.callback=function(){dc(e,t)},r}function Tm(e){return e=os(e),e.tag=3,e}function Am(e,t,r,o){var f=r.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;e.payload=function(){return f(g)},e.callback=function(){wm(t,r,o)}}var k=r.stateNode;k!==null&&typeof k.componentDidCatch=="function"&&(e.callback=function(){wm(t,r,o),typeof f!="function"&&(ps===null?ps=new Set([this]):ps.add(this));var G=o.stack;this.componentDidCatch(o.value,{componentStack:G!==null?G:""})})}function sx(e,t,r,o,f){if(r.flags|=32768,o!==null&&typeof o=="object"&&typeof o.then=="function"){if(t=r.alternate,t!==null&&Ai(t,r,f,!0),r=yr.current,r!==null){switch(r.tag){case 31:case 13:return Fr===null?Ec():r.alternate===null&&fn===0&&(fn=3),r.flags&=-257,r.flags|=65536,r.lanes=f,o===Xl?r.flags|=16384:(t=r.updateQueue,t===null?r.updateQueue=new Set([o]):t.add(o),vf(e,o,f)),!1;case 22:return r.flags|=65536,o===Xl?r.flags|=16384:(t=r.updateQueue,t===null?(t={transitions:null,markerInstances:null,retryQueue:new Set([o])},r.updateQueue=t):(r=t.retryQueue,r===null?t.retryQueue=new Set([o]):r.add(o)),vf(e,o,f)),!1}throw Error(i(435,r.tag))}return vf(e,o,f),Ec(),!1}if(Ot)return t=yr.current,t!==null?((t.flags&65536)===0&&(t.flags|=256),t.flags|=65536,t.lanes=f,o!==dd&&(e=Error(i(422),{cause:o}),So(Ur(e,r)))):(o!==dd&&(t=Error(i(423),{cause:o}),So(Ur(t,r))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,o=Ur(o,r),f=Vd(e.stateNode,o,f),Sd(e,f),fn!==4&&(fn=2)),!1;var g=Error(i(520),{cause:o});if(g=Ur(g,r),Go===null?Go=[g]:Go.push(g),fn!==4&&(fn=2),t===null)return!0;o=Ur(o,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=f&-f,r.lanes|=e,e=Vd(r.stateNode,o,e),Sd(r,e),!1;case 1:if(t=r.type,g=r.stateNode,(r.flags&128)===0&&(typeof t.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(ps===null||!ps.has(g))))return r.flags|=65536,f&=-f,r.lanes|=f,f=Tm(f),Am(f,e,r,o),Sd(r,f),!1}r=r.return}while(r!==null);return!1}var $d=Error(i(461)),wn=!1;function Fn(e,t,r,o){t.child=e===null?Cp(t,null,r,o):Js(t,e.child,r,o)}function km(e,t,r,o,f){r=r.render;var g=t.ref;if("ref"in o){var k={};for(var G in o)G!=="ref"&&(k[G]=o[G])}else k=o;return Vs(t),o=Nd(e,t,r,k,g,f),G=Dd(),e!==null&&!wn?(Cd(e,t,f),Oa(e,t,f)):(Ot&&G&&cd(t),t.flags|=1,Fn(e,t,o,f),t.child)}function Nm(e,t,r,o,f){if(e===null){var g=r.type;return typeof g=="function"&&!id(g)&&g.defaultProps===void 0&&r.compare===null?(t.tag=15,t.type=g,Dm(e,t,g,o,f)):(e=Vl(r.type,null,o,t,t.mode,f),e.ref=t.ref,e.return=t,t.child=e)}if(g=e.child,!tf(e,f)){var k=g.memoizedProps;if(r=r.compare,r=r!==null?r:bo,r(k,o)&&e.ref===t.ref)return Oa(e,t,f)}return t.flags|=1,e=Ta(g,o),e.ref=t.ref,e.return=t,t.child=e}function Dm(e,t,r,o,f){if(e!==null){var g=e.memoizedProps;if(bo(g,o)&&e.ref===t.ref)if(wn=!1,t.pendingProps=o=g,tf(e,f))(e.flags&131072)!==0&&(wn=!0);else return t.lanes=e.lanes,Oa(e,t,f)}return Zd(e,t,r,o,f)}function Cm(e,t,r,o){var f=o.children,g=e!==null?e.memoizedState:null;if(e===null&&t.stateNode===null&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.mode==="hidden"){if((t.flags&128)!==0){if(g=g!==null?g.baseLanes|r:r,e!==null){for(o=t.child=e.child,f=0;o!==null;)f=f|o.lanes|o.childLanes,o=o.sibling;o=f&~g}else o=0,t.child=null;return Om(e,t,g,r,o)}if((r&536870912)!==0)t.memoizedState={baseLanes:0,cachePool:null},e!==null&&Jl(t,g!==null?g.cachePool:null),g!==null?jp(t,g):wd(),Ip(t);else return o=t.lanes=536870912,Om(e,t,g!==null?g.baseLanes|r:r,r,o)}else g!==null?(Jl(t,g.cachePool),jp(t,g),us(),t.memoizedState=null):(e!==null&&Jl(t,null),wd(),us());return Fn(e,t,f,r),t.child}function Io(e,t){return e!==null&&e.tag===22||t.stateNode!==null||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function Om(e,t,r,o,f){var g=vd();return g=g===null?null:{parent:Sn._currentValue,pool:g},t.memoizedState={baseLanes:r,cachePool:g},e!==null&&Jl(t,null),wd(),Ip(t),e!==null&&Ai(e,t,o,!0),t.childLanes=f,null}function fc(e,t){return t=pc({mode:t.mode,children:t.children},e.mode),t.ref=e.ref,e.child=t,t.return=e,t}function Rm(e,t,r){return Js(t,e.child,null,r),e=fc(t,t.pendingProps),e.flags|=2,vr(t),t.memoizedState=null,e}function ix(e,t,r){var o=t.pendingProps,f=(t.flags&128)!==0;if(t.flags&=-129,e===null){if(Ot){if(o.mode==="hidden")return e=fc(t,o),t.lanes=536870912,Io(null,e);if(Ad(t),(e=tn)?(e=Pg(e,Br),e=e!==null&&e.data==="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ns!==null?{id:oa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},r=mp(e),r.return=t,t.child=r,zn=t,tn=null)):e=null,e===null)throw as(t);return t.lanes=536870912,null}return fc(t,o)}var g=e.memoizedState;if(g!==null){var k=g.dehydrated;if(Ad(t),f)if(t.flags&256)t.flags&=-257,t=Rm(e,t,r);else if(t.memoizedState!==null)t.child=e.child,t.flags|=128,t=null;else throw Error(i(558));else if(wn||Ai(e,t,r,!1),f=(r&e.childLanes)!==0,wn||f){if(o=Kt,o!==null&&(k=In(o,r),k!==0&&k!==g.retryLane))throw g.retryLane=k,qs(e,k),ur(o,e,k),$d;Ec(),t=Rm(e,t,r)}else e=g.treeContext,tn=Gr(k.nextSibling),zn=t,Ot=!0,rs=null,Br=!1,e!==null&&vp(t,e),t=fc(t,o),t.flags|=4096;return t}return e=Ta(e.child,{mode:o.mode,children:o.children}),e.ref=t.ref,t.child=e,e.return=t,e}function hc(e,t){var r=t.ref;if(r===null)e!==null&&e.ref!==null&&(t.flags|=4194816);else{if(typeof r!="function"&&typeof r!="object")throw Error(i(284));(e===null||e.ref!==r)&&(t.flags|=4194816)}}function Zd(e,t,r,o,f){return Vs(t),r=Nd(e,t,r,o,void 0,f),o=Dd(),e!==null&&!wn?(Cd(e,t,f),Oa(e,t,f)):(Ot&&o&&cd(t),t.flags|=1,Fn(e,t,r,f),t.child)}function jm(e,t,r,o,f,g){return Vs(t),t.updateQueue=null,r=Up(t,o,r,f),Mp(e),o=Dd(),e!==null&&!wn?(Cd(e,t,g),Oa(e,t,g)):(Ot&&o&&cd(t),t.flags|=1,Fn(e,t,r,g),t.child)}function Im(e,t,r,o,f){if(Vs(t),t.stateNode===null){var g=Si,k=r.contextType;typeof k=="object"&&k!==null&&(g=Bn(k)),g=new r(o,g),t.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=Yd,t.stateNode=g,g._reactInternals=t,g=t.stateNode,g.props=o,g.state=t.memoizedState,g.refs={},xd(t),k=r.contextType,g.context=typeof k=="object"&&k!==null?Bn(k):Si,g.state=t.memoizedState,k=r.getDerivedStateFromProps,typeof k=="function"&&(Pd(t,r,k,o),g.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(k=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),k!==g.state&&Yd.enqueueReplaceState(g,g.state,null),Do(t,o,g,f),No(),g.state=t.memoizedState),typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!0}else if(e===null){g=t.stateNode;var G=t.memoizedProps,ne=Xs(r,G);g.props=ne;var ve=g.context,Ae=r.contextType;k=Si,typeof Ae=="object"&&Ae!==null&&(k=Bn(Ae));var Ie=r.getDerivedStateFromProps;Ae=typeof Ie=="function"||typeof g.getSnapshotBeforeUpdate=="function",G=t.pendingProps!==G,Ae||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(G||ve!==k)&&xm(t,g,o,k),is=!1;var xe=t.memoizedState;g.state=xe,Do(t,o,g,f),No(),ve=t.memoizedState,G||xe!==ve||is?(typeof Ie=="function"&&(Pd(t,r,Ie,o),ve=t.memoizedState),(ne=is||bm(t,r,ne,o,xe,ve,k))?(Ae||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(t.flags|=4194308)):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=o,t.memoizedState=ve),g.props=o,g.state=ve,g.context=k,o=ne):(typeof g.componentDidMount=="function"&&(t.flags|=4194308),o=!1)}else{g=t.stateNode,_d(e,t),k=t.memoizedProps,Ae=Xs(r,k),g.props=Ae,Ie=t.pendingProps,xe=g.context,ve=r.contextType,ne=Si,typeof ve=="object"&&ve!==null&&(ne=Bn(ve)),G=r.getDerivedStateFromProps,(ve=typeof G=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(k!==Ie||xe!==ne)&&xm(t,g,o,ne),is=!1,xe=t.memoizedState,g.state=xe,Do(t,o,g,f),No();var we=t.memoizedState;k!==Ie||xe!==we||is||e!==null&&e.dependencies!==null&&Zl(e.dependencies)?(typeof G=="function"&&(Pd(t,r,G,o),we=t.memoizedState),(Ae=is||bm(t,r,Ae,o,xe,we,ne)||e!==null&&e.dependencies!==null&&Zl(e.dependencies))?(ve||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(o,we,ne),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(o,we,ne)),typeof g.componentDidUpdate=="function"&&(t.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&xe===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&xe===e.memoizedState||(t.flags|=1024),t.memoizedProps=o,t.memoizedState=we),g.props=o,g.state=we,g.context=ne,o=Ae):(typeof g.componentDidUpdate!="function"||k===e.memoizedProps&&xe===e.memoizedState||(t.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||k===e.memoizedProps&&xe===e.memoizedState||(t.flags|=1024),o=!1)}return g=o,hc(e,t),o=(t.flags&128)!==0,g||o?(g=t.stateNode,r=o&&typeof r.getDerivedStateFromError!="function"?null:g.render(),t.flags|=1,e!==null&&o?(t.child=Js(t,e.child,null,f),t.child=Js(t,null,r,f)):Fn(e,t,r,f),t.memoizedState=g.state,e=t.child):e=Oa(e,t,f),e}function Mm(e,t,r,o){return Ps(),t.flags|=256,Fn(e,t,r,o),t.child}var Qd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Jd(e){return{baseLanes:e,cachePool:wp()}}function Kd(e,t,r){return e=e!==null?e.childLanes&~r:0,t&&(e|=xr),e}function Um(e,t,r){var o=t.pendingProps,f=!1,g=(t.flags&128)!==0,k;if((k=g)||(k=e!==null&&e.memoizedState===null?!1:(yn.current&2)!==0),k&&(f=!0,t.flags&=-129),k=(t.flags&32)!==0,t.flags&=-33,e===null){if(Ot){if(f?cs(t):us(),(e=tn)?(e=Pg(e,Br),e=e!==null&&e.data!=="&"?e:null,e!==null&&(t.memoizedState={dehydrated:e,treeContext:ns!==null?{id:oa,overflow:la}:null,retryLane:536870912,hydrationErrors:null},r=mp(e),r.return=t,t.child=r,zn=t,tn=null)):e=null,e===null)throw as(t);return If(e)?t.lanes=32:t.lanes=536870912,null}var G=o.children;return o=o.fallback,f?(us(),f=t.mode,G=pc({mode:"hidden",children:G},f),o=Hs(o,f,r,null),G.return=t,o.return=t,G.sibling=o,t.child=G,o=t.child,o.memoizedState=Jd(r),o.childLanes=Kd(e,k,r),t.memoizedState=Qd,Io(null,o)):(cs(t),Xd(t,G))}var ne=e.memoizedState;if(ne!==null&&(G=ne.dehydrated,G!==null)){if(g)t.flags&256?(cs(t),t.flags&=-257,t=Wd(e,t,r)):t.memoizedState!==null?(us(),t.child=e.child,t.flags|=128,t=null):(us(),G=o.fallback,f=t.mode,o=pc({mode:"visible",children:o.children},f),G=Hs(G,f,r,null),G.flags|=2,o.return=t,G.return=t,o.sibling=G,t.child=o,Js(t,e.child,null,r),o=t.child,o.memoizedState=Jd(r),o.childLanes=Kd(e,k,r),t.memoizedState=Qd,t=Io(null,o));else if(cs(t),If(G)){if(k=G.nextSibling&&G.nextSibling.dataset,k)var ve=k.dgst;k=ve,o=Error(i(419)),o.stack="",o.digest=k,So({value:o,source:null,stack:null}),t=Wd(e,t,r)}else if(wn||Ai(e,t,r,!1),k=(r&e.childLanes)!==0,wn||k){if(k=Kt,k!==null&&(o=In(k,r),o!==0&&o!==ne.retryLane))throw ne.retryLane=o,qs(e,o),ur(k,e,o),$d;jf(G)||Ec(),t=Wd(e,t,r)}else jf(G)?(t.flags|=192,t.child=e.child,t=null):(e=ne.treeContext,tn=Gr(G.nextSibling),zn=t,Ot=!0,rs=null,Br=!1,e!==null&&vp(t,e),t=Xd(t,o.children),t.flags|=4096);return t}return f?(us(),G=o.fallback,f=t.mode,ne=e.child,ve=ne.sibling,o=Ta(ne,{mode:"hidden",children:o.children}),o.subtreeFlags=ne.subtreeFlags&65011712,ve!==null?G=Ta(ve,G):(G=Hs(G,f,r,null),G.flags|=2),G.return=t,o.return=t,o.sibling=G,t.child=o,Io(null,o),o=t.child,G=e.child.memoizedState,G===null?G=Jd(r):(f=G.cachePool,f!==null?(ne=Sn._currentValue,f=f.parent!==ne?{parent:ne,pool:ne}:f):f=wp(),G={baseLanes:G.baseLanes|r,cachePool:f}),o.memoizedState=G,o.childLanes=Kd(e,k,r),t.memoizedState=Qd,Io(e.child,o)):(cs(t),r=e.child,e=r.sibling,r=Ta(r,{mode:"visible",children:o.children}),r.return=t,r.sibling=null,e!==null&&(k=t.deletions,k===null?(t.deletions=[e],t.flags|=16):k.push(e)),t.child=r,t.memoizedState=null,r)}function Xd(e,t){return t=pc({mode:"visible",children:t},e.mode),t.return=e,e.child=t}function pc(e,t){return e=gr(22,e,null,t),e.lanes=0,e}function Wd(e,t,r){return Js(t,e.child,null,r),e=Xd(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Lm(e,t,r){e.lanes|=t;var o=e.alternate;o!==null&&(o.lanes|=t),pd(e.return,t,r)}function ef(e,t,r,o,f,g){var k=e.memoizedState;k===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:o,tail:r,tailMode:f,treeForkCount:g}:(k.isBackwards=t,k.rendering=null,k.renderingStartTime=0,k.last=o,k.tail=r,k.tailMode=f,k.treeForkCount=g)}function zm(e,t,r){var o=t.pendingProps,f=o.revealOrder,g=o.tail;o=o.children;var k=yn.current,G=(k&2)!==0;if(G?(k=k&1|2,t.flags|=128):k&=1,Z(yn,k),Fn(e,t,o,r),o=Ot?_o:0,!G&&e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Lm(e,r,t);else if(e.tag===19)Lm(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(r=t.child,f=null;r!==null;)e=r.alternate,e!==null&&nc(e)===null&&(f=r),r=r.sibling;r=f,r===null?(f=t.child,t.child=null):(f=r.sibling,r.sibling=null),ef(t,!1,f,r,g,o);break;case"backwards":case"unstable_legacy-backwards":for(r=null,f=t.child,t.child=null;f!==null;){if(e=f.alternate,e!==null&&nc(e)===null){t.child=f;break}e=f.sibling,f.sibling=r,r=f,f=e}ef(t,!0,r,null,g,o);break;case"together":ef(t,!1,null,null,void 0,o);break;default:t.memoizedState=null}return t.child}function Oa(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),hs|=t.lanes,(r&t.childLanes)===0)if(e!==null){if(Ai(e,t,r,!1),(r&t.childLanes)===0)return null}else return null;if(e!==null&&t.child!==e.child)throw Error(i(153));if(t.child!==null){for(e=t.child,r=Ta(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Ta(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function tf(e,t){return(e.lanes&t)!==0?!0:(e=e.dependencies,!!(e!==null&&Zl(e)))}function ox(e,t,r){switch(t.tag){case 3:Te(t,t.stateNode.containerInfo),ss(t,Sn,e.memoizedState.cache),Ps();break;case 27:case 5:He(t);break;case 4:Te(t,t.stateNode.containerInfo);break;case 10:ss(t,t.type,t.memoizedProps.value);break;case 31:if(t.memoizedState!==null)return t.flags|=128,Ad(t),null;break;case 13:var o=t.memoizedState;if(o!==null)return o.dehydrated!==null?(cs(t),t.flags|=128,null):(r&t.child.childLanes)!==0?Um(e,t,r):(cs(t),e=Oa(e,t,r),e!==null?e.sibling:null);cs(t);break;case 19:var f=(e.flags&128)!==0;if(o=(r&t.childLanes)!==0,o||(Ai(e,t,r,!1),o=(r&t.childLanes)!==0),f){if(o)return zm(e,t,r);t.flags|=128}if(f=t.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Z(yn,yn.current),o)break;return null;case 22:return t.lanes=0,Cm(e,t,r,t.pendingProps);case 24:ss(t,Sn,e.memoizedState.cache)}return Oa(e,t,r)}function Bm(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps)wn=!0;else{if(!tf(e,r)&&(t.flags&128)===0)return wn=!1,ox(e,t,r);wn=(e.flags&131072)!==0}else wn=!1,Ot&&(t.flags&1048576)!==0&&yp(t,_o,t.index);switch(t.lanes=0,t.tag){case 16:e:{var o=t.pendingProps;if(e=Zs(t.elementType),t.type=e,typeof e=="function")id(e)?(o=Xs(e,o),t.tag=1,t=Im(null,t,e,o,r)):(t.tag=0,t=Zd(null,t,e,o,r));else{if(e!=null){var f=e.$$typeof;if(f===z){t.tag=11,t=km(null,t,e,o,r);break e}else if(f===M){t.tag=14,t=Nm(null,t,e,o,r);break e}}throw t=C(e)||e,Error(i(306,t,""))}}return t;case 0:return Zd(e,t,t.type,t.pendingProps,r);case 1:return o=t.type,f=Xs(o,t.pendingProps),Im(e,t,o,f,r);case 3:e:{if(Te(t,t.stateNode.containerInfo),e===null)throw Error(i(387));o=t.pendingProps;var g=t.memoizedState;f=g.element,_d(e,t),Do(t,o,null,r);var k=t.memoizedState;if(o=k.cache,ss(t,Sn,o),o!==g.cache&&md(t,[Sn],r,!0),No(),o=k.element,g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:k.cache},t.updateQueue.baseState=g,t.memoizedState=g,t.flags&256){t=Mm(e,t,o,r);break e}else if(o!==f){f=Ur(Error(i(424)),t),So(f),t=Mm(e,t,o,r);break e}else{switch(e=t.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(tn=Gr(e.firstChild),zn=t,Ot=!0,rs=null,Br=!0,r=Cp(t,null,o,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling}else{if(Ps(),o===f){t=Oa(e,t,r);break e}Fn(e,t,o,r)}t=t.child}return t;case 26:return hc(e,t),e===null?(r=Jg(t.type,null,t.pendingProps,null))?t.memoizedState=r:Ot||(r=t.type,e=t.pendingProps,o=Cc(fe.current).createElement(r),o[Gt]=t,o[Mt]=e,Gn(o,r,e),wt(o),t.stateNode=o):t.memoizedState=Jg(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return He(t),e===null&&Ot&&(o=t.stateNode=$g(t.type,t.pendingProps,fe.current),zn=t,Br=!0,f=tn,vs(t.type)?(Mf=f,tn=Gr(o.firstChild)):tn=f),Fn(e,t,t.pendingProps.children,r),hc(e,t),e===null&&(t.flags|=4194304),t.child;case 5:return e===null&&Ot&&((f=o=tn)&&(o=Lx(o,t.type,t.pendingProps,Br),o!==null?(t.stateNode=o,zn=t,tn=Gr(o.firstChild),Br=!1,f=!0):f=!1),f||as(t)),He(t),f=t.type,g=t.pendingProps,k=e!==null?e.memoizedProps:null,o=g.children,Cf(f,g)?o=null:k!==null&&Cf(f,k)&&(t.flags|=32),t.memoizedState!==null&&(f=Nd(e,t,X0,null,null,r),Qo._currentValue=f),hc(e,t),Fn(e,t,o,r),t.child;case 6:return e===null&&Ot&&((e=r=tn)&&(r=zx(r,t.pendingProps,Br),r!==null?(t.stateNode=r,zn=t,tn=null,e=!0):e=!1),e||as(t)),null;case 13:return Um(e,t,r);case 4:return Te(t,t.stateNode.containerInfo),o=t.pendingProps,e===null?t.child=Js(t,null,o,r):Fn(e,t,o,r),t.child;case 11:return km(e,t,t.type,t.pendingProps,r);case 7:return Fn(e,t,t.pendingProps,r),t.child;case 8:return Fn(e,t,t.pendingProps.children,r),t.child;case 12:return Fn(e,t,t.pendingProps.children,r),t.child;case 10:return o=t.pendingProps,ss(t,t.type,o.value),Fn(e,t,o.children,r),t.child;case 9:return f=t.type._context,o=t.pendingProps.children,Vs(t),f=Bn(f),o=o(f),t.flags|=1,Fn(e,t,o,r),t.child;case 14:return Nm(e,t,t.type,t.pendingProps,r);case 15:return Dm(e,t,t.type,t.pendingProps,r);case 19:return zm(e,t,r);case 31:return ix(e,t,r);case 22:return Cm(e,t,r,t.pendingProps);case 24:return Vs(t),o=Bn(Sn),e===null?(f=vd(),f===null&&(f=Kt,g=gd(),f.pooledCache=g,g.refCount++,g!==null&&(f.pooledCacheLanes|=r),f=g),t.memoizedState={parent:o,cache:f},xd(t),ss(t,Sn,f)):((e.lanes&r)!==0&&(_d(e,t),Do(t,null,null,r),No()),f=e.memoizedState,g=t.memoizedState,f.parent!==o?(f={parent:o,cache:o},t.memoizedState=f,t.lanes===0&&(t.memoizedState=t.updateQueue.baseState=f),ss(t,Sn,o)):(o=g.cache,ss(t,Sn,o),o!==f.cache&&md(t,[Sn],r,!0))),Fn(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(i(156,t.tag))}function Ra(e){e.flags|=4}function nf(e,t,r,o,f){if((t=(e.mode&32)!==0)&&(t=!1),t){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(fg())e.flags|=8192;else throw Qs=Xl,bd}else e.flags&=-16777217}function Fm(e,t){if(t.type!=="stylesheet"||(t.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!ty(t))if(fg())e.flags|=8192;else throw Qs=Xl,bd}function mc(e,t){t!==null&&(e.flags|=4),e.flags&16384&&(t=e.tag!==22?ga():536870912,e.lanes|=t,zi|=t)}function Mo(e,t){if(!Ot)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var o=null;r!==null;)r.alternate!==null&&(o=r),r=r.sibling;o===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:o.sibling=null}}function nn(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,o=0;if(t)for(var f=e.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags&65011712,o|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)r|=f.lanes|f.childLanes,o|=f.subtreeFlags,o|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=o,e.childLanes=r,t}function lx(e,t,r){var o=t.pendingProps;switch(ud(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return nn(t),null;case 1:return nn(t),null;case 3:return r=t.stateNode,o=null,e!==null&&(o=e.memoizedState.cache),t.memoizedState.cache!==o&&(t.flags|=2048),Na(Sn),he(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(Ti(t)?Ra(t):e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,fd())),nn(t),null;case 26:var f=t.type,g=t.memoizedState;return e===null?(Ra(t),g!==null?(nn(t),Fm(t,g)):(nn(t),nf(t,f,null,o,r))):g?g!==e.memoizedState?(Ra(t),nn(t),Fm(t,g)):(nn(t),t.flags&=-16777217):(e=e.memoizedProps,e!==o&&Ra(t),nn(t),nf(t,f,e,o,r)),null;case 27:if(Be(t),r=fe.current,f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ra(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return nn(t),null}e=K.current,Ti(t)?bp(t):(e=$g(f,o,r),t.stateNode=e,Ra(t))}return nn(t),null;case 5:if(Be(t),f=t.type,e!==null&&t.stateNode!=null)e.memoizedProps!==o&&Ra(t);else{if(!o){if(t.stateNode===null)throw Error(i(166));return nn(t),null}if(g=K.current,Ti(t))bp(t);else{var k=Cc(fe.current);switch(g){case 1:g=k.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:g=k.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":g=k.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":g=k.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":g=k.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof o.is=="string"?k.createElement("select",{is:o.is}):k.createElement("select"),o.multiple?g.multiple=!0:o.size&&(g.size=o.size);break;default:g=typeof o.is=="string"?k.createElement(f,{is:o.is}):k.createElement(f)}}g[Gt]=t,g[Mt]=o;e:for(k=t.child;k!==null;){if(k.tag===5||k.tag===6)g.appendChild(k.stateNode);else if(k.tag!==4&&k.tag!==27&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===t)break e;for(;k.sibling===null;){if(k.return===null||k.return===t)break e;k=k.return}k.sibling.return=k.return,k=k.sibling}t.stateNode=g;e:switch(Gn(g,f,o),f){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&Ra(t)}}return nn(t),nf(t,t.type,e===null?null:e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&t.stateNode!=null)e.memoizedProps!==o&&Ra(t);else{if(typeof o!="string"&&t.stateNode===null)throw Error(i(166));if(e=fe.current,Ti(t)){if(e=t.stateNode,r=t.memoizedProps,o=null,f=zn,f!==null)switch(f.tag){case 27:case 5:o=f.memoizedProps}e[Gt]=t,e=!!(e.nodeValue===r||o!==null&&o.suppressHydrationWarning===!0||Ug(e.nodeValue,r)),e||as(t,!0)}else e=Cc(e).createTextNode(o),e[Gt]=t,t.stateNode=e}return nn(t),null;case 31:if(r=t.memoizedState,e===null||e.memoizedState!==null){if(o=Ti(t),r!==null){if(e===null){if(!o)throw Error(i(318));if(e=t.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(i(557));e[Gt]=t}else Ps(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nn(t),e=!1}else r=fd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return t.flags&256?(vr(t),t):(vr(t),null);if((t.flags&128)!==0)throw Error(i(558))}return nn(t),null;case 13:if(o=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ti(t),o!==null&&o.dehydrated!==null){if(e===null){if(!f)throw Error(i(318));if(f=t.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(i(317));f[Gt]=t}else Ps(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;nn(t),f=!1}else f=fd(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return t.flags&256?(vr(t),t):(vr(t),null)}return vr(t),(t.flags&128)!==0?(t.lanes=r,t):(r=o!==null,e=e!==null&&e.memoizedState!==null,r&&(o=t.child,f=null,o.alternate!==null&&o.alternate.memoizedState!==null&&o.alternate.memoizedState.cachePool!==null&&(f=o.alternate.memoizedState.cachePool.pool),g=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(g=o.memoizedState.cachePool.pool),g!==f&&(o.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),mc(t,t.updateQueue),nn(t),null);case 4:return he(),e===null&&Tf(t.stateNode.containerInfo),nn(t),null;case 10:return Na(t.type),nn(t),null;case 19:if(A(yn),o=t.memoizedState,o===null)return nn(t),null;if(f=(t.flags&128)!==0,g=o.rendering,g===null)if(f)Mo(o,!1);else{if(fn!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(g=nc(e),g!==null){for(t.flags|=128,Mo(o,!1),e=g.updateQueue,t.updateQueue=e,mc(t,e),t.subtreeFlags=0,e=r,r=t.child;r!==null;)pp(r,e),r=r.sibling;return Z(yn,yn.current&1|2),Ot&&Aa(t,o.treeForkCount),t.child}e=e.sibling}o.tail!==null&&ze()>xc&&(t.flags|=128,f=!0,Mo(o,!1),t.lanes=4194304)}else{if(!f)if(e=nc(g),e!==null){if(t.flags|=128,f=!0,e=e.updateQueue,t.updateQueue=e,mc(t,e),Mo(o,!0),o.tail===null&&o.tailMode==="hidden"&&!g.alternate&&!Ot)return nn(t),null}else 2*ze()-o.renderingStartTime>xc&&r!==536870912&&(t.flags|=128,f=!0,Mo(o,!1),t.lanes=4194304);o.isBackwards?(g.sibling=t.child,t.child=g):(e=o.last,e!==null?e.sibling=g:t.child=g,o.last=g)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ze(),e.sibling=null,r=yn.current,Z(yn,f?r&1|2:r&1),Ot&&Aa(t,o.treeForkCount),e):(nn(t),null);case 22:case 23:return vr(t),Td(),o=t.memoizedState!==null,e!==null?e.memoizedState!==null!==o&&(t.flags|=8192):o&&(t.flags|=8192),o?(r&536870912)!==0&&(t.flags&128)===0&&(nn(t),t.subtreeFlags&6&&(t.flags|=8192)):nn(t),r=t.updateQueue,r!==null&&mc(t,r.retryQueue),r=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),o=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(o=t.memoizedState.cachePool.pool),o!==r&&(t.flags|=2048),e!==null&&A($s),null;case 24:return r=null,e!==null&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Na(Sn),nn(t),null;case 25:return null;case 30:return null}throw Error(i(156,t.tag))}function cx(e,t){switch(ud(t),t.tag){case 1:return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Na(Sn),he(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 26:case 27:case 5:return Be(t),null;case 31:if(t.memoizedState!==null){if(vr(t),t.alternate===null)throw Error(i(340));Ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 13:if(vr(t),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(i(340));Ps()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return A(yn),null;case 4:return he(),null;case 10:return Na(t.type),null;case 22:case 23:return vr(t),Td(),e!==null&&A($s),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 24:return Na(Sn),null;case 25:return null;default:return null}}function Gm(e,t){switch(ud(t),t.tag){case 3:Na(Sn),he();break;case 26:case 27:case 5:Be(t);break;case 4:he();break;case 31:t.memoizedState!==null&&vr(t);break;case 13:vr(t);break;case 19:A(yn);break;case 10:Na(t.type);break;case 22:case 23:vr(t),Td(),e!==null&&A($s);break;case 24:Na(Sn)}}function Uo(e,t){try{var r=t.updateQueue,o=r!==null?r.lastEffect:null;if(o!==null){var f=o.next;r=f;do{if((r.tag&e)===e){o=void 0;var g=r.create,k=r.inst;o=g(),k.destroy=o}r=r.next}while(r!==f)}}catch(G){Ht(t,t.return,G)}}function ds(e,t,r){try{var o=t.updateQueue,f=o!==null?o.lastEffect:null;if(f!==null){var g=f.next;o=g;do{if((o.tag&e)===e){var k=o.inst,G=k.destroy;if(G!==void 0){k.destroy=void 0,f=t;var ne=r,ve=G;try{ve()}catch(Ae){Ht(f,ne,Ae)}}}o=o.next}while(o!==g)}}catch(Ae){Ht(t,t.return,Ae)}}function qm(e){var t=e.updateQueue;if(t!==null){var r=e.stateNode;try{Rp(t,r)}catch(o){Ht(e,e.return,o)}}}function Hm(e,t,r){r.props=Xs(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(o){Ht(e,t,o)}}function Lo(e,t){try{var r=e.ref;if(r!==null){switch(e.tag){case 26:case 27:case 5:var o=e.stateNode;break;case 30:o=e.stateNode;break;default:o=e.stateNode}typeof r=="function"?e.refCleanup=r(o):r.current=o}}catch(f){Ht(e,t,f)}}function ca(e,t){var r=e.ref,o=e.refCleanup;if(r!==null)if(typeof o=="function")try{o()}catch(f){Ht(e,t,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof r=="function")try{r(null)}catch(f){Ht(e,t,f)}else r.current=null}function Pm(e){var t=e.type,r=e.memoizedProps,o=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&o.focus();break e;case"img":r.src?o.src=r.src:r.srcSet&&(o.srcset=r.srcSet)}}catch(f){Ht(e,e.return,f)}}function rf(e,t,r){try{var o=e.stateNode;Ox(o,e.type,r,t),o[Mt]=t}catch(f){Ht(e,e.return,f)}}function Ym(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&vs(e.type)||e.tag===4}function af(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ym(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&vs(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function sf(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r).insertBefore(e,t):(t=r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,t.appendChild(e),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=An));else if(o!==4&&(o===27&&vs(e.type)&&(r=e.stateNode,t=null),e=e.child,e!==null))for(sf(e,t,r),e=e.sibling;e!==null;)sf(e,t,r),e=e.sibling}function gc(e,t,r){var o=e.tag;if(o===5||o===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(o!==4&&(o===27&&vs(e.type)&&(r=e.stateNode),e=e.child,e!==null))for(gc(e,t,r),e=e.sibling;e!==null;)gc(e,t,r),e=e.sibling}function Vm(e){var t=e.stateNode,r=e.memoizedProps;try{for(var o=e.type,f=t.attributes;f.length;)t.removeAttributeNode(f[0]);Gn(t,o,r),t[Gt]=e,t[Mt]=r}catch(g){Ht(e,e.return,g)}}var ja=!1,Tn=!1,of=!1,$m=typeof WeakSet=="function"?WeakSet:Set,Cn=null;function ux(e,t){if(e=e.containerInfo,Nf=Lc,e=sp(e),Wu(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var o=r.getSelection&&r.getSelection();if(o&&o.rangeCount!==0){r=o.anchorNode;var f=o.anchorOffset,g=o.focusNode;o=o.focusOffset;try{r.nodeType,g.nodeType}catch{r=null;break e}var k=0,G=-1,ne=-1,ve=0,Ae=0,Ie=e,xe=null;t:for(;;){for(var we;Ie!==r||f!==0&&Ie.nodeType!==3||(G=k+f),Ie!==g||o!==0&&Ie.nodeType!==3||(ne=k+o),Ie.nodeType===3&&(k+=Ie.nodeValue.length),(we=Ie.firstChild)!==null;)xe=Ie,Ie=we;for(;;){if(Ie===e)break t;if(xe===r&&++ve===f&&(G=k),xe===g&&++Ae===o&&(ne=k),(we=Ie.nextSibling)!==null)break;Ie=xe,xe=Ie.parentNode}Ie=we}r=G===-1||ne===-1?null:{start:G,end:ne}}else r=null}r=r||{start:0,end:0}}else r=null;for(Df={focusedElem:e,selectionRange:r},Lc=!1,Cn=t;Cn!==null;)if(t=Cn,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Cn=e;else for(;Cn!==null;){switch(t=Cn,g=t.alternate,e=t.flags,t.tag){case 0:if((e&4)!==0&&(e=t.updateQueue,e=e!==null?e.events:null,e!==null))for(r=0;r<e.length;r++)f=e[r],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&g!==null){e=void 0,r=t,f=g.memoizedProps,g=g.memoizedState,o=r.stateNode;try{var Ke=Xs(r.type,f);e=o.getSnapshotBeforeUpdate(Ke,g),o.__reactInternalSnapshotBeforeUpdate=e}catch(lt){Ht(r,r.return,lt)}}break;case 3:if((e&1024)!==0){if(e=t.stateNode.containerInfo,r=e.nodeType,r===9)Rf(e);else if(r===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Rf(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(i(163))}if(e=t.sibling,e!==null){e.return=t.return,Cn=e;break}Cn=t.return}}function Zm(e,t,r){var o=r.flags;switch(r.tag){case 0:case 11:case 15:Ma(e,r),o&4&&Uo(5,r);break;case 1:if(Ma(e,r),o&4)if(e=r.stateNode,t===null)try{e.componentDidMount()}catch(k){Ht(r,r.return,k)}else{var f=Xs(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(f,t,e.__reactInternalSnapshotBeforeUpdate)}catch(k){Ht(r,r.return,k)}}o&64&&qm(r),o&512&&Lo(r,r.return);break;case 3:if(Ma(e,r),o&64&&(e=r.updateQueue,e!==null)){if(t=null,r.child!==null)switch(r.child.tag){case 27:case 5:t=r.child.stateNode;break;case 1:t=r.child.stateNode}try{Rp(e,t)}catch(k){Ht(r,r.return,k)}}break;case 27:t===null&&o&4&&Vm(r);case 26:case 5:Ma(e,r),t===null&&o&4&&Pm(r),o&512&&Lo(r,r.return);break;case 12:Ma(e,r);break;case 31:Ma(e,r),o&4&&Km(e,r);break;case 13:Ma(e,r),o&4&&Xm(e,r),o&64&&(e=r.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(r=bx.bind(null,r),Bx(e,r))));break;case 22:if(o=r.memoizedState!==null||ja,!o){t=t!==null&&t.memoizedState!==null||Tn,f=ja;var g=Tn;ja=o,(Tn=t)&&!g?Ua(e,r,(r.subtreeFlags&8772)!==0):Ma(e,r),ja=f,Tn=g}break;case 30:break;default:Ma(e,r)}}function Qm(e){var t=e.alternate;t!==null&&(e.alternate=null,Qm(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&Le(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var sn=null,ir=!1;function Ia(e,t,r){for(r=r.child;r!==null;)Jm(e,t,r),r=r.sibling}function Jm(e,t,r){if(xt&&typeof xt.onCommitFiberUnmount=="function")try{xt.onCommitFiberUnmount(pt,r)}catch{}switch(r.tag){case 26:Tn||ca(r,t),Ia(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode,r.parentNode.removeChild(r));break;case 27:Tn||ca(r,t);var o=sn,f=ir;vs(r.type)&&(sn=r.stateNode,ir=!1),Ia(e,t,r),Vo(r.stateNode),sn=o,ir=f;break;case 5:Tn||ca(r,t);case 6:if(o=sn,f=ir,sn=null,Ia(e,t,r),sn=o,ir=f,sn!==null)if(ir)try{(sn.nodeType===9?sn.body:sn.nodeName==="HTML"?sn.ownerDocument.body:sn).removeChild(r.stateNode)}catch(g){Ht(r,t,g)}else try{sn.removeChild(r.stateNode)}catch(g){Ht(r,t,g)}break;case 18:sn!==null&&(ir?(e=sn,qg(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,r.stateNode),Vi(e)):qg(sn,r.stateNode));break;case 4:o=sn,f=ir,sn=r.stateNode.containerInfo,ir=!0,Ia(e,t,r),sn=o,ir=f;break;case 0:case 11:case 14:case 15:ds(2,r,t),Tn||ds(4,r,t),Ia(e,t,r);break;case 1:Tn||(ca(r,t),o=r.stateNode,typeof o.componentWillUnmount=="function"&&Hm(r,t,o)),Ia(e,t,r);break;case 21:Ia(e,t,r);break;case 22:Tn=(o=Tn)||r.memoizedState!==null,Ia(e,t,r),Tn=o;break;default:Ia(e,t,r)}}function Km(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Vi(e)}catch(r){Ht(t,t.return,r)}}}function Xm(e,t){if(t.memoizedState===null&&(e=t.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Vi(e)}catch(r){Ht(t,t.return,r)}}function dx(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return t===null&&(t=e.stateNode=new $m),t;case 22:return e=e.stateNode,t=e._retryCache,t===null&&(t=e._retryCache=new $m),t;default:throw Error(i(435,e.tag))}}function yc(e,t){var r=dx(e);t.forEach(function(o){if(!r.has(o)){r.add(o);var f=xx.bind(null,e,o);o.then(f,f)}})}function or(e,t){var r=t.deletions;if(r!==null)for(var o=0;o<r.length;o++){var f=r[o],g=e,k=t,G=k;e:for(;G!==null;){switch(G.tag){case 27:if(vs(G.type)){sn=G.stateNode,ir=!1;break e}break;case 5:sn=G.stateNode,ir=!1;break e;case 3:case 4:sn=G.stateNode.containerInfo,ir=!0;break e}G=G.return}if(sn===null)throw Error(i(160));Jm(g,k,f),sn=null,ir=!1,g=f.alternate,g!==null&&(g.return=null),f.return=null}if(t.subtreeFlags&13886)for(t=t.child;t!==null;)Wm(t,e),t=t.sibling}var Jr=null;function Wm(e,t){var r=e.alternate,o=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:or(t,e),lr(e),o&4&&(ds(3,e,e.return),Uo(3,e),ds(5,e,e.return));break;case 1:or(t,e),lr(e),o&512&&(Tn||r===null||ca(r,r.return)),o&64&&ja&&(e=e.updateQueue,e!==null&&(o=e.callbacks,o!==null&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=r===null?o:r.concat(o))));break;case 26:var f=Jr;if(or(t,e),lr(e),o&512&&(Tn||r===null||ca(r,r.return)),o&4){var g=r!==null?r.memoizedState:null;if(o=e.memoizedState,r===null)if(o===null)if(e.stateNode===null){e:{o=e.type,r=e.memoizedProps,f=f.ownerDocument||f;t:switch(o){case"title":g=f.getElementsByTagName("title")[0],(!g||g[oe]||g[Gt]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=f.createElement(o),f.head.insertBefore(g,f.querySelector("head > title"))),Gn(g,o,r),g[Gt]=e,wt(g),o=g;break e;case"link":var k=Wg("link","href",f).get(o+(r.href||""));if(k){for(var G=0;G<k.length;G++)if(g=k[G],g.getAttribute("href")===(r.href==null||r.href===""?null:r.href)&&g.getAttribute("rel")===(r.rel==null?null:r.rel)&&g.getAttribute("title")===(r.title==null?null:r.title)&&g.getAttribute("crossorigin")===(r.crossOrigin==null?null:r.crossOrigin)){k.splice(G,1);break t}}g=f.createElement(o),Gn(g,o,r),f.head.appendChild(g);break;case"meta":if(k=Wg("meta","content",f).get(o+(r.content||""))){for(G=0;G<k.length;G++)if(g=k[G],g.getAttribute("content")===(r.content==null?null:""+r.content)&&g.getAttribute("name")===(r.name==null?null:r.name)&&g.getAttribute("property")===(r.property==null?null:r.property)&&g.getAttribute("http-equiv")===(r.httpEquiv==null?null:r.httpEquiv)&&g.getAttribute("charset")===(r.charSet==null?null:r.charSet)){k.splice(G,1);break t}}g=f.createElement(o),Gn(g,o,r),f.head.appendChild(g);break;default:throw Error(i(468,o))}g[Gt]=e,wt(g),o=g}e.stateNode=o}else ey(f,e.type,e.stateNode);else e.stateNode=Xg(f,o,e.memoizedProps);else g!==o?(g===null?r.stateNode!==null&&(r=r.stateNode,r.parentNode.removeChild(r)):g.count--,o===null?ey(f,e.type,e.stateNode):Xg(f,o,e.memoizedProps)):o===null&&e.stateNode!==null&&rf(e,e.memoizedProps,r.memoizedProps)}break;case 27:or(t,e),lr(e),o&512&&(Tn||r===null||ca(r,r.return)),r!==null&&o&4&&rf(e,e.memoizedProps,r.memoizedProps);break;case 5:if(or(t,e),lr(e),o&512&&(Tn||r===null||ca(r,r.return)),e.flags&32){f=e.stateNode;try{ba(f,"")}catch(Ke){Ht(e,e.return,Ke)}}o&4&&e.stateNode!=null&&(f=e.memoizedProps,rf(e,f,r!==null?r.memoizedProps:f)),o&1024&&(of=!0);break;case 6:if(or(t,e),lr(e),o&4){if(e.stateNode===null)throw Error(i(162));o=e.memoizedProps,r=e.stateNode;try{r.nodeValue=o}catch(Ke){Ht(e,e.return,Ke)}}break;case 3:if(jc=null,f=Jr,Jr=Oc(t.containerInfo),or(t,e),Jr=f,lr(e),o&4&&r!==null&&r.memoizedState.isDehydrated)try{Vi(t.containerInfo)}catch(Ke){Ht(e,e.return,Ke)}of&&(of=!1,eg(e));break;case 4:o=Jr,Jr=Oc(e.stateNode.containerInfo),or(t,e),lr(e),Jr=o;break;case 12:or(t,e),lr(e);break;case 31:or(t,e),lr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 13:or(t,e),lr(e),e.child.flags&8192&&e.memoizedState!==null!=(r!==null&&r.memoizedState!==null)&&(bc=ze()),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 22:f=e.memoizedState!==null;var ne=r!==null&&r.memoizedState!==null,ve=ja,Ae=Tn;if(ja=ve||f,Tn=Ae||ne,or(t,e),Tn=Ae,ja=ve,lr(e),o&8192)e:for(t=e.stateNode,t._visibility=f?t._visibility&-2:t._visibility|1,f&&(r===null||ne||ja||Tn||Ws(e)),r=null,t=e;;){if(t.tag===5||t.tag===26){if(r===null){ne=r=t;try{if(g=ne.stateNode,f)k=g.style,typeof k.setProperty=="function"?k.setProperty("display","none","important"):k.display="none";else{G=ne.stateNode;var Ie=ne.memoizedProps.style,xe=Ie!=null&&Ie.hasOwnProperty("display")?Ie.display:null;G.style.display=xe==null||typeof xe=="boolean"?"":(""+xe).trim()}}catch(Ke){Ht(ne,ne.return,Ke)}}}else if(t.tag===6){if(r===null){ne=t;try{ne.stateNode.nodeValue=f?"":ne.memoizedProps}catch(Ke){Ht(ne,ne.return,Ke)}}}else if(t.tag===18){if(r===null){ne=t;try{var we=ne.stateNode;f?Hg(we,!0):Hg(ne.stateNode,!1)}catch(Ke){Ht(ne,ne.return,Ke)}}}else if((t.tag!==22&&t.tag!==23||t.memoizedState===null||t===e)&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}o&4&&(o=e.updateQueue,o!==null&&(r=o.retryQueue,r!==null&&(o.retryQueue=null,yc(e,r))));break;case 19:or(t,e),lr(e),o&4&&(o=e.updateQueue,o!==null&&(e.updateQueue=null,yc(e,o)));break;case 30:break;case 21:break;default:or(t,e),lr(e)}}function lr(e){var t=e.flags;if(t&2){try{for(var r,o=e.return;o!==null;){if(Ym(o)){r=o;break}o=o.return}if(r==null)throw Error(i(160));switch(r.tag){case 27:var f=r.stateNode,g=af(e);gc(e,g,f);break;case 5:var k=r.stateNode;r.flags&32&&(ba(k,""),r.flags&=-33);var G=af(e);gc(e,G,k);break;case 3:case 4:var ne=r.stateNode.containerInfo,ve=af(e);sf(e,ve,ne);break;default:throw Error(i(161))}}catch(Ae){Ht(e,e.return,Ae)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function eg(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var t=e;eg(t),t.tag===5&&t.flags&1024&&t.stateNode.reset(),e=e.sibling}}function Ma(e,t){if(t.subtreeFlags&8772)for(t=t.child;t!==null;)Zm(e,t.alternate,t),t=t.sibling}function Ws(e){for(e=e.child;e!==null;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:ds(4,t,t.return),Ws(t);break;case 1:ca(t,t.return);var r=t.stateNode;typeof r.componentWillUnmount=="function"&&Hm(t,t.return,r),Ws(t);break;case 27:Vo(t.stateNode);case 26:case 5:ca(t,t.return),Ws(t);break;case 22:t.memoizedState===null&&Ws(t);break;case 30:Ws(t);break;default:Ws(t)}e=e.sibling}}function Ua(e,t,r){for(r=r&&(t.subtreeFlags&8772)!==0,t=t.child;t!==null;){var o=t.alternate,f=e,g=t,k=g.flags;switch(g.tag){case 0:case 11:case 15:Ua(f,g,r),Uo(4,g);break;case 1:if(Ua(f,g,r),o=g,f=o.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(ve){Ht(o,o.return,ve)}if(o=g,f=o.updateQueue,f!==null){var G=o.stateNode;try{var ne=f.shared.hiddenCallbacks;if(ne!==null)for(f.shared.hiddenCallbacks=null,f=0;f<ne.length;f++)Op(ne[f],G)}catch(ve){Ht(o,o.return,ve)}}r&&k&64&&qm(g),Lo(g,g.return);break;case 27:Vm(g);case 26:case 5:Ua(f,g,r),r&&o===null&&k&4&&Pm(g),Lo(g,g.return);break;case 12:Ua(f,g,r);break;case 31:Ua(f,g,r),r&&k&4&&Km(f,g);break;case 13:Ua(f,g,r),r&&k&4&&Xm(f,g);break;case 22:g.memoizedState===null&&Ua(f,g,r),Lo(g,g.return);break;case 30:break;default:Ua(f,g,r)}t=t.sibling}}function lf(e,t){var r=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(r=e.memoizedState.cachePool.pool),e=null,t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(e=t.memoizedState.cachePool.pool),e!==r&&(e!=null&&e.refCount++,r!=null&&Eo(r))}function cf(e,t){e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Eo(e))}function Kr(e,t,r,o){if(t.subtreeFlags&10256)for(t=t.child;t!==null;)tg(e,t,r,o),t=t.sibling}function tg(e,t,r,o){var f=t.flags;switch(t.tag){case 0:case 11:case 15:Kr(e,t,r,o),f&2048&&Uo(9,t);break;case 1:Kr(e,t,r,o);break;case 3:Kr(e,t,r,o),f&2048&&(e=null,t.alternate!==null&&(e=t.alternate.memoizedState.cache),t=t.memoizedState.cache,t!==e&&(t.refCount++,e!=null&&Eo(e)));break;case 12:if(f&2048){Kr(e,t,r,o),e=t.stateNode;try{var g=t.memoizedProps,k=g.id,G=g.onPostCommit;typeof G=="function"&&G(k,t.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(ne){Ht(t,t.return,ne)}}else Kr(e,t,r,o);break;case 31:Kr(e,t,r,o);break;case 13:Kr(e,t,r,o);break;case 23:break;case 22:g=t.stateNode,k=t.alternate,t.memoizedState!==null?g._visibility&2?Kr(e,t,r,o):zo(e,t):g._visibility&2?Kr(e,t,r,o):(g._visibility|=2,Mi(e,t,r,o,(t.subtreeFlags&10256)!==0||!1)),f&2048&&lf(k,t);break;case 24:Kr(e,t,r,o),f&2048&&cf(t.alternate,t);break;default:Kr(e,t,r,o)}}function Mi(e,t,r,o,f){for(f=f&&((t.subtreeFlags&10256)!==0||!1),t=t.child;t!==null;){var g=e,k=t,G=r,ne=o,ve=k.flags;switch(k.tag){case 0:case 11:case 15:Mi(g,k,G,ne,f),Uo(8,k);break;case 23:break;case 22:var Ae=k.stateNode;k.memoizedState!==null?Ae._visibility&2?Mi(g,k,G,ne,f):zo(g,k):(Ae._visibility|=2,Mi(g,k,G,ne,f)),f&&ve&2048&&lf(k.alternate,k);break;case 24:Mi(g,k,G,ne,f),f&&ve&2048&&cf(k.alternate,k);break;default:Mi(g,k,G,ne,f)}t=t.sibling}}function zo(e,t){if(t.subtreeFlags&10256)for(t=t.child;t!==null;){var r=e,o=t,f=o.flags;switch(o.tag){case 22:zo(r,o),f&2048&&lf(o.alternate,o);break;case 24:zo(r,o),f&2048&&cf(o.alternate,o);break;default:zo(r,o)}t=t.sibling}}var Bo=8192;function Ui(e,t,r){if(e.subtreeFlags&Bo)for(e=e.child;e!==null;)ng(e,t,r),e=e.sibling}function ng(e,t,r){switch(e.tag){case 26:Ui(e,t,r),e.flags&Bo&&e.memoizedState!==null&&Kx(r,Jr,e.memoizedState,e.memoizedProps);break;case 5:Ui(e,t,r);break;case 3:case 4:var o=Jr;Jr=Oc(e.stateNode.containerInfo),Ui(e,t,r),Jr=o;break;case 22:e.memoizedState===null&&(o=e.alternate,o!==null&&o.memoizedState!==null?(o=Bo,Bo=16777216,Ui(e,t,r),Bo=o):Ui(e,t,r));break;default:Ui(e,t,r)}}function rg(e){var t=e.alternate;if(t!==null&&(e=t.child,e!==null)){t.child=null;do t=e.sibling,e.sibling=null,e=t;while(e!==null)}}function Fo(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];Cn=o,sg(o,e)}rg(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)ag(e),e=e.sibling}function ag(e){switch(e.tag){case 0:case 11:case 15:Fo(e),e.flags&2048&&ds(9,e,e.return);break;case 3:Fo(e);break;case 12:Fo(e);break;case 22:var t=e.stateNode;e.memoizedState!==null&&t._visibility&2&&(e.return===null||e.return.tag!==13)?(t._visibility&=-3,vc(e)):Fo(e);break;default:Fo(e)}}function vc(e){var t=e.deletions;if((e.flags&16)!==0){if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];Cn=o,sg(o,e)}rg(e)}for(e=e.child;e!==null;){switch(t=e,t.tag){case 0:case 11:case 15:ds(8,t,t.return),vc(t);break;case 22:r=t.stateNode,r._visibility&2&&(r._visibility&=-3,vc(t));break;default:vc(t)}e=e.sibling}}function sg(e,t){for(;Cn!==null;){var r=Cn;switch(r.tag){case 0:case 11:case 15:ds(8,r,t);break;case 23:case 22:if(r.memoizedState!==null&&r.memoizedState.cachePool!==null){var o=r.memoizedState.cachePool.pool;o!=null&&o.refCount++}break;case 24:Eo(r.memoizedState.cache)}if(o=r.child,o!==null)o.return=r,Cn=o;else e:for(r=e;Cn!==null;){o=Cn;var f=o.sibling,g=o.return;if(Qm(o),o===r){Cn=null;break e}if(f!==null){f.return=g,Cn=f;break e}Cn=g}}}var fx={getCacheForType:function(e){var t=Bn(Sn),r=t.data.get(e);return r===void 0&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return Bn(Sn).controller.signal}},hx=typeof WeakMap=="function"?WeakMap:Map,zt=0,Kt=null,Tt=null,Nt=0,qt=0,br=null,fs=!1,Li=!1,uf=!1,La=0,fn=0,hs=0,ei=0,df=0,xr=0,zi=0,Go=null,cr=null,ff=!1,bc=0,ig=0,xc=1/0,_c=null,ps=null,kn=0,ms=null,Bi=null,za=0,hf=0,pf=null,og=null,qo=0,mf=null;function _r(){return(zt&2)!==0&&Nt!==0?Nt&-Nt:$.T!==null?_f():Cr()}function lg(){if(xr===0)if((Nt&536870912)===0||Ot){var e=Ft;Ft<<=1,(Ft&3932160)===0&&(Ft=262144),xr=e}else xr=536870912;return e=yr.current,e!==null&&(e.flags|=32),xr}function ur(e,t,r){(e===Kt&&(qt===2||qt===9)||e.cancelPendingCommit!==null)&&(Fi(e,0),gs(e,Nt,xr,!1)),fr(e,r),((zt&2)===0||e!==Kt)&&(e===Kt&&((zt&2)===0&&(ei|=r),fn===4&&gs(e,Nt,xr,!1)),ua(e))}function cg(e,t,r){if((zt&6)!==0)throw Error(i(327));var o=!r&&(t&127)===0&&(t&e.expiredLanes)===0||$r(e,t),f=o?gx(e,t):yf(e,t,!0),g=o;do{if(f===0){Li&&!o&&gs(e,t,0,!1);break}else{if(r=e.current.alternate,g&&!px(r)){f=yf(e,t,!1),g=!1;continue}if(f===2){if(g=t,e.errorRecoveryDisabledLanes&g)var k=0;else k=e.pendingLanes&-536870913,k=k!==0?k:k&536870912?536870912:0;if(k!==0){t=k;e:{var G=e;f=Go;var ne=G.current.memoizedState.isDehydrated;if(ne&&(Fi(G,k).flags|=256),k=yf(G,k,!1),k!==2){if(uf&&!ne){G.errorRecoveryDisabledLanes|=g,ei|=g,f=4;break e}g=cr,cr=f,g!==null&&(cr===null?cr=g:cr.push.apply(cr,g))}f=k}if(g=!1,f!==2)continue}}if(f===1){Fi(e,0),gs(e,t,0,!0);break}e:{switch(o=e,g=f,g){case 0:case 1:throw Error(i(345));case 4:if((t&4194048)!==t)break;case 6:gs(o,t,xr,!fs);break e;case 2:cr=null;break;case 3:case 5:break;default:throw Error(i(329))}if((t&62914560)===t&&(f=bc+300-ze(),10<f)){if(gs(o,t,xr,!fs),Qn(o,0,!0)!==0)break e;za=t,o.timeoutHandle=Fg(ug.bind(null,o,r,cr,_c,ff,t,xr,ei,zi,fs,g,"Throttled",-0,0),f);break e}ug(o,r,cr,_c,ff,t,xr,ei,zi,fs,g,null,-0,0)}}break}while(!0);ua(e)}function ug(e,t,r,o,f,g,k,G,ne,ve,Ae,Ie,xe,we){if(e.timeoutHandle=-1,Ie=t.subtreeFlags,Ie&8192||(Ie&16785408)===16785408){Ie={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:An},ng(t,g,Ie);var Ke=(g&62914560)===g?bc-ze():(g&4194048)===g?ig-ze():0;if(Ke=Xx(Ie,Ke),Ke!==null){za=g,e.cancelPendingCommit=Ke(vg.bind(null,e,t,g,r,o,f,k,G,ne,Ae,Ie,null,xe,we)),gs(e,g,k,!ve);return}}vg(e,t,g,r,o,f,k,G,ne)}function px(e){for(var t=e;;){var r=t.tag;if((r===0||r===11||r===15)&&t.flags&16384&&(r=t.updateQueue,r!==null&&(r=r.stores,r!==null)))for(var o=0;o<r.length;o++){var f=r[o],g=f.getSnapshot;f=f.value;try{if(!mr(g(),f))return!1}catch{return!1}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function gs(e,t,r,o){t&=~df,t&=~ei,e.suspendedLanes|=t,e.pingedLanes&=~t,o&&(e.warmLanes|=t),o=e.expirationTimes;for(var f=t;0<f;){var g=31-It(f),k=1<<g;o[g]=-1,f&=~k}r!==0&&Pa(e,r,t)}function Sc(){return(zt&6)===0?(Ho(0),!1):!0}function gf(){if(Tt!==null){if(qt===0)var e=Tt.return;else e=Tt,ka=Ys=null,Od(e),Ci=null,To=0,e=Tt;for(;e!==null;)Gm(e.alternate,e),e=e.return;Tt=null}}function Fi(e,t){var r=e.timeoutHandle;r!==-1&&(e.timeoutHandle=-1,Ix(r)),r=e.cancelPendingCommit,r!==null&&(e.cancelPendingCommit=null,r()),za=0,gf(),Kt=e,Tt=r=Ta(e.current,null),Nt=t,qt=0,br=null,fs=!1,Li=$r(e,t),uf=!1,zi=xr=df=ei=hs=fn=0,cr=Go=null,ff=!1,(t&8)!==0&&(t|=t&32);var o=e.entangledLanes;if(o!==0)for(e=e.entanglements,o&=t;0<o;){var f=31-It(o),g=1<<f;t|=e[f],o&=~g}return La=t,Hl(),r}function dg(e,t){yt=null,$.H=jo,t===Di||t===Kl?(t=kp(),qt=3):t===bd?(t=kp(),qt=4):qt=t===$d?8:t!==null&&typeof t=="object"&&typeof t.then=="function"?6:1,br=t,Tt===null&&(fn=1,dc(e,Ur(t,e.current)))}function fg(){var e=yr.current;return e===null?!0:(Nt&4194048)===Nt?Fr===null:(Nt&62914560)===Nt||(Nt&536870912)!==0?e===Fr:!1}function hg(){var e=$.H;return $.H=jo,e===null?jo:e}function pg(){var e=$.A;return $.A=fx,e}function Ec(){fn=4,fs||(Nt&4194048)!==Nt&&yr.current!==null||(Li=!0),(hs&134217727)===0&&(ei&134217727)===0||Kt===null||gs(Kt,Nt,xr,!1)}function yf(e,t,r){var o=zt;zt|=2;var f=hg(),g=pg();(Kt!==e||Nt!==t)&&(_c=null,Fi(e,t)),t=!1;var k=fn;e:do try{if(qt!==0&&Tt!==null){var G=Tt,ne=br;switch(qt){case 8:gf(),k=6;break e;case 3:case 2:case 9:case 6:yr.current===null&&(t=!0);var ve=qt;if(qt=0,br=null,Gi(e,G,ne,ve),r&&Li){k=0;break e}break;default:ve=qt,qt=0,br=null,Gi(e,G,ne,ve)}}mx(),k=fn;break}catch(Ae){dg(e,Ae)}while(!0);return t&&e.shellSuspendCounter++,ka=Ys=null,zt=o,$.H=f,$.A=g,Tt===null&&(Kt=null,Nt=0,Hl()),k}function mx(){for(;Tt!==null;)mg(Tt)}function gx(e,t){var r=zt;zt|=2;var o=hg(),f=pg();Kt!==e||Nt!==t?(_c=null,xc=ze()+500,Fi(e,t)):Li=$r(e,t);e:do try{if(qt!==0&&Tt!==null){t=Tt;var g=br;t:switch(qt){case 1:qt=0,br=null,Gi(e,t,g,1);break;case 2:case 9:if(Tp(g)){qt=0,br=null,gg(t);break}t=function(){qt!==2&&qt!==9||Kt!==e||(qt=7),ua(e)},g.then(t,t);break e;case 3:qt=7;break e;case 4:qt=5;break e;case 7:Tp(g)?(qt=0,br=null,gg(t)):(qt=0,br=null,Gi(e,t,g,7));break;case 5:var k=null;switch(Tt.tag){case 26:k=Tt.memoizedState;case 5:case 27:var G=Tt;if(k?ty(k):G.stateNode.complete){qt=0,br=null;var ne=G.sibling;if(ne!==null)Tt=ne;else{var ve=G.return;ve!==null?(Tt=ve,wc(ve)):Tt=null}break t}}qt=0,br=null,Gi(e,t,g,5);break;case 6:qt=0,br=null,Gi(e,t,g,6);break;case 8:gf(),fn=6;break e;default:throw Error(i(462))}}yx();break}catch(Ae){dg(e,Ae)}while(!0);return ka=Ys=null,$.H=o,$.A=f,zt=r,Tt!==null?0:(Kt=null,Nt=0,Hl(),fn)}function yx(){for(;Tt!==null&&!ue();)mg(Tt)}function mg(e){var t=Bm(e.alternate,e,La);e.memoizedProps=e.pendingProps,t===null?wc(e):Tt=t}function gg(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=jm(r,t,t.pendingProps,t.type,void 0,Nt);break;case 11:t=jm(r,t,t.pendingProps,t.type.render,t.ref,Nt);break;case 5:Od(t);default:Gm(r,t),t=Tt=pp(t,La),t=Bm(r,t,La)}e.memoizedProps=e.pendingProps,t===null?wc(e):Tt=t}function Gi(e,t,r,o){ka=Ys=null,Od(t),Ci=null,To=0;var f=t.return;try{if(sx(e,f,t,r,Nt)){fn=1,dc(e,Ur(r,e.current)),Tt=null;return}}catch(g){if(f!==null)throw Tt=f,g;fn=1,dc(e,Ur(r,e.current)),Tt=null;return}t.flags&32768?(Ot||o===1?e=!0:Li||(Nt&536870912)!==0?e=!1:(fs=e=!0,(o===2||o===9||o===3||o===6)&&(o=yr.current,o!==null&&o.tag===13&&(o.flags|=16384))),yg(t,e)):wc(t)}function wc(e){var t=e;do{if((t.flags&32768)!==0){yg(t,fs);return}e=t.return;var r=lx(t.alternate,t,La);if(r!==null){Tt=r;return}if(t=t.sibling,t!==null){Tt=t;return}Tt=t=e}while(t!==null);fn===0&&(fn=5)}function yg(e,t){do{var r=cx(e.alternate,e);if(r!==null){r.flags&=32767,Tt=r;return}if(r=e.return,r!==null&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&(e=e.sibling,e!==null)){Tt=e;return}Tt=e=r}while(e!==null);fn=6,Tt=null}function vg(e,t,r,o,f,g,k,G,ne){e.cancelPendingCommit=null;do Tc();while(kn!==0);if((zt&6)!==0)throw Error(i(327));if(t!==null){if(t===e.current)throw Error(i(177));if(g=t.lanes|t.childLanes,g|=ad,Ha(e,r,g,k,G,ne),e===Kt&&(Tt=Kt=null,Nt=0),Bi=t,ms=e,za=r,hf=g,pf=f,og=o,(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,_x(st,function(){return Eg(),null})):(e.callbackNode=null,e.callbackPriority=0),o=(t.flags&13878)!==0,(t.subtreeFlags&13878)!==0||o){o=$.T,$.T=null,f=q.p,q.p=2,k=zt,zt|=4;try{ux(e,t,r)}finally{zt=k,q.p=f,$.T=o}}kn=1,bg(),xg(),_g()}}function bg(){if(kn===1){kn=0;var e=ms,t=Bi,r=(t.flags&13878)!==0;if((t.subtreeFlags&13878)!==0||r){r=$.T,$.T=null;var o=q.p;q.p=2;var f=zt;zt|=4;try{Wm(t,e);var g=Df,k=sp(e.containerInfo),G=g.focusedElem,ne=g.selectionRange;if(k!==G&&G&&G.ownerDocument&&ap(G.ownerDocument.documentElement,G)){if(ne!==null&&Wu(G)){var ve=ne.start,Ae=ne.end;if(Ae===void 0&&(Ae=ve),"selectionStart"in G)G.selectionStart=ve,G.selectionEnd=Math.min(Ae,G.value.length);else{var Ie=G.ownerDocument||document,xe=Ie&&Ie.defaultView||window;if(xe.getSelection){var we=xe.getSelection(),Ke=G.textContent.length,lt=Math.min(ne.start,Ke),Zt=ne.end===void 0?lt:Math.min(ne.end,Ke);!we.extend&&lt>Zt&&(k=Zt,Zt=lt,lt=k);var de=rp(G,lt),ce=rp(G,Zt);if(de&&ce&&(we.rangeCount!==1||we.anchorNode!==de.node||we.anchorOffset!==de.offset||we.focusNode!==ce.node||we.focusOffset!==ce.offset)){var ye=Ie.createRange();ye.setStart(de.node,de.offset),we.removeAllRanges(),lt>Zt?(we.addRange(ye),we.extend(ce.node,ce.offset)):(ye.setEnd(ce.node,ce.offset),we.addRange(ye))}}}}for(Ie=[],we=G;we=we.parentNode;)we.nodeType===1&&Ie.push({element:we,left:we.scrollLeft,top:we.scrollTop});for(typeof G.focus=="function"&&G.focus(),G=0;G<Ie.length;G++){var Oe=Ie[G];Oe.element.scrollLeft=Oe.left,Oe.element.scrollTop=Oe.top}}Lc=!!Nf,Df=Nf=null}finally{zt=f,q.p=o,$.T=r}}e.current=t,kn=2}}function xg(){if(kn===2){kn=0;var e=ms,t=Bi,r=(t.flags&8772)!==0;if((t.subtreeFlags&8772)!==0||r){r=$.T,$.T=null;var o=q.p;q.p=2;var f=zt;zt|=4;try{Zm(e,t.alternate,t)}finally{zt=f,q.p=o,$.T=r}}kn=3}}function _g(){if(kn===4||kn===3){kn=0,je();var e=ms,t=Bi,r=za,o=og;(t.subtreeFlags&10256)!==0||(t.flags&10256)!==0?kn=5:(kn=0,Bi=ms=null,Sg(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(ps=null),ya(r),t=t.stateNode,xt&&typeof xt.onCommitFiberRoot=="function")try{xt.onCommitFiberRoot(pt,t,void 0,(t.current.flags&128)===128)}catch{}if(o!==null){t=$.T,f=q.p,q.p=2,$.T=null;try{for(var g=e.onRecoverableError,k=0;k<o.length;k++){var G=o[k];g(G.value,{componentStack:G.stack})}}finally{$.T=t,q.p=f}}(za&3)!==0&&Tc(),ua(e),f=e.pendingLanes,(r&261930)!==0&&(f&42)!==0?e===mf?qo++:(qo=0,mf=e):qo=0,Ho(0)}}function Sg(e,t){(e.pooledCacheLanes&=t)===0&&(t=e.pooledCache,t!=null&&(e.pooledCache=null,Eo(t)))}function Tc(){return bg(),xg(),_g(),Eg()}function Eg(){if(kn!==5)return!1;var e=ms,t=hf;hf=0;var r=ya(za),o=$.T,f=q.p;try{q.p=32>r?32:r,$.T=null,r=pf,pf=null;var g=ms,k=za;if(kn=0,Bi=ms=null,za=0,(zt&6)!==0)throw Error(i(331));var G=zt;if(zt|=4,ag(g.current),tg(g,g.current,k,r),zt=G,Ho(0,!1),xt&&typeof xt.onPostCommitFiberRoot=="function")try{xt.onPostCommitFiberRoot(pt,g)}catch{}return!0}finally{q.p=f,$.T=o,Sg(e,t)}}function wg(e,t,r){t=Ur(r,t),t=Vd(e.stateNode,t,2),e=ls(e,t,2),e!==null&&(fr(e,2),ua(e))}function Ht(e,t,r){if(e.tag===3)wg(e,e,r);else for(;t!==null;){if(t.tag===3){wg(t,e,r);break}else if(t.tag===1){var o=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(ps===null||!ps.has(o))){e=Ur(r,e),r=Tm(2),o=ls(t,r,2),o!==null&&(Am(r,o,t,e),fr(o,2),ua(o));break}}t=t.return}}function vf(e,t,r){var o=e.pingCache;if(o===null){o=e.pingCache=new hx;var f=new Set;o.set(t,f)}else f=o.get(t),f===void 0&&(f=new Set,o.set(t,f));f.has(r)||(uf=!0,f.add(r),e=vx.bind(null,e,t,r),t.then(e,e))}function vx(e,t,r){var o=e.pingCache;o!==null&&o.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,Kt===e&&(Nt&r)===r&&(fn===4||fn===3&&(Nt&62914560)===Nt&&300>ze()-bc?(zt&2)===0&&Fi(e,0):df|=r,zi===Nt&&(zi=0)),ua(e)}function Tg(e,t){t===0&&(t=ga()),e=qs(e,t),e!==null&&(fr(e,t),ua(e))}function bx(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Tg(e,r)}function xx(e,t){var r=0;switch(e.tag){case 31:case 13:var o=e.stateNode,f=e.memoizedState;f!==null&&(r=f.retryLane);break;case 19:o=e.stateNode;break;case 22:o=e.stateNode._retryCache;break;default:throw Error(i(314))}o!==null&&o.delete(t),Tg(e,r)}function _x(e,t){return ke(e,t)}var Ac=null,qi=null,bf=!1,kc=!1,xf=!1,ys=0;function ua(e){e!==qi&&e.next===null&&(qi===null?Ac=qi=e:qi=qi.next=e),kc=!0,bf||(bf=!0,Ex())}function Ho(e,t){if(!xf&&kc){xf=!0;do for(var r=!1,o=Ac;o!==null;){if(e!==0){var f=o.pendingLanes;if(f===0)var g=0;else{var k=o.suspendedLanes,G=o.pingedLanes;g=(1<<31-It(42|e)+1)-1,g&=f&~(k&~G),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(r=!0,Dg(o,g))}else g=Nt,g=Qn(o,o===Kt?g:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),(g&3)===0||$r(o,g)||(r=!0,Dg(o,g));o=o.next}while(r);xf=!1}}function Sx(){Ag()}function Ag(){kc=bf=!1;var e=0;ys!==0&&jx()&&(e=ys);for(var t=ze(),r=null,o=Ac;o!==null;){var f=o.next,g=kg(o,t);g===0?(o.next=null,r===null?Ac=f:r.next=f,f===null&&(qi=r)):(r=o,(e!==0||(g&3)!==0)&&(kc=!0)),o=f}kn!==0&&kn!==5||Ho(e),ys!==0&&(ys=0)}function kg(e,t){for(var r=e.suspendedLanes,o=e.pingedLanes,f=e.expirationTimes,g=e.pendingLanes&-62914561;0<g;){var k=31-It(g),G=1<<k,ne=f[k];ne===-1?((G&r)===0||(G&o)!==0)&&(f[k]=qe(G,t)):ne<=t&&(e.expiredLanes|=G),g&=~G}if(t=Kt,r=Nt,r=Qn(e,e===t?r:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o=e.callbackNode,r===0||e===t&&(qt===2||qt===9)||e.cancelPendingCommit!==null)return o!==null&&o!==null&&De(o),e.callbackNode=null,e.callbackPriority=0;if((r&3)===0||$r(e,r)){if(t=r&-r,t===e.callbackPriority)return t;switch(o!==null&&De(o),ya(r)){case 2:case 8:r=ht;break;case 32:r=st;break;case 268435456:r=Qt;break;default:r=st}return o=Ng.bind(null,e),r=ke(r,o),e.callbackPriority=t,e.callbackNode=r,t}return o!==null&&o!==null&&De(o),e.callbackPriority=2,e.callbackNode=null,2}function Ng(e,t){if(kn!==0&&kn!==5)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(Tc()&&e.callbackNode!==r)return null;var o=Nt;return o=Qn(e,e===Kt?o:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),o===0?null:(cg(e,o,t),kg(e,ze()),e.callbackNode!=null&&e.callbackNode===r?Ng.bind(null,e):null)}function Dg(e,t){if(Tc())return null;cg(e,t,!0)}function Ex(){Mx(function(){(zt&6)!==0?ke(Je,Sx):Ag()})}function _f(){if(ys===0){var e=ki;e===0&&(e=Nr,Nr<<=1,(Nr&261888)===0&&(Nr=256)),ys=e}return ys}function Cg(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Xa(""+e)}function Og(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}function wx(e,t,r,o,f){if(t==="submit"&&r&&r.stateNode===f){var g=Cg((f[Mt]||null).action),k=o.submitter;k&&(t=(t=k[Mt]||null)?Cg(t.formAction):k.getAttribute("formAction"),t!==null&&(g=t,k=null));var G=new Ce("action","action",null,o,f);e.push({event:G,listeners:[{instance:null,listener:function(){if(o.defaultPrevented){if(ys!==0){var ne=k?Og(f,k):new FormData(f);Fd(r,{pending:!0,data:ne,method:f.method,action:g},null,ne)}}else typeof g=="function"&&(G.preventDefault(),ne=k?Og(f,k):new FormData(f),Fd(r,{pending:!0,data:ne,method:f.method,action:g},g,ne))},currentTarget:f}]})}}for(var Sf=0;Sf<rd.length;Sf++){var Ef=rd[Sf],Tx=Ef.toLowerCase(),Ax=Ef[0].toUpperCase()+Ef.slice(1);Qr(Tx,"on"+Ax)}Qr(lp,"onAnimationEnd"),Qr(cp,"onAnimationIteration"),Qr(up,"onAnimationStart"),Qr("dblclick","onDoubleClick"),Qr("focusin","onFocus"),Qr("focusout","onBlur"),Qr(q0,"onTransitionRun"),Qr(H0,"onTransitionStart"),Qr(P0,"onTransitionCancel"),Qr(dp,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),en("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),en("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),en("onBeforeInput",["compositionend","keypress","textInput","paste"]),en("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),en("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Po="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),kx=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Po));function Rg(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var o=e[r],f=o.event;o=o.listeners;e:{var g=void 0;if(t)for(var k=o.length-1;0<=k;k--){var G=o[k],ne=G.instance,ve=G.currentTarget;if(G=G.listener,ne!==g&&f.isPropagationStopped())break e;g=G,f.currentTarget=ve;try{g(f)}catch(Ae){ql(Ae)}f.currentTarget=null,g=ne}else for(k=0;k<o.length;k++){if(G=o[k],ne=G.instance,ve=G.currentTarget,G=G.listener,ne!==g&&f.isPropagationStopped())break e;g=G,f.currentTarget=ve;try{g(f)}catch(Ae){ql(Ae)}f.currentTarget=null,g=ne}}}}function At(e,t){var r=t[Ya];r===void 0&&(r=t[Ya]=new Set);var o=e+"__bubble";r.has(o)||(jg(t,e,2,!1),r.add(o))}function wf(e,t,r){var o=0;t&&(o|=4),jg(r,e,o,t)}var Nc="_reactListening"+Math.random().toString(36).slice(2);function Tf(e){if(!e[Nc]){e[Nc]=!0,_n.forEach(function(r){r!=="selectionchange"&&(kx.has(r)||wf(r,!1,e),wf(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Nc]||(t[Nc]=!0,wf("selectionchange",!1,t))}}function jg(e,t,r,o){switch(ly(t)){case 2:var f=t_;break;case 8:f=n_;break;default:f=Ff}r=f.bind(null,t,r,e),f=void 0,!Sa||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(f=!0),o?f!==void 0?e.addEventListener(t,r,{capture:!0,passive:f}):e.addEventListener(t,r,!0):f!==void 0?e.addEventListener(t,r,{passive:f}):e.addEventListener(t,r,!1)}function Af(e,t,r,o,f){var g=o;if((t&1)===0&&(t&2)===0&&o!==null)e:for(;;){if(o===null)return;var k=o.tag;if(k===3||k===4){var G=o.stateNode.containerInfo;if(G===f)break;if(k===4)for(k=o.return;k!==null;){var ne=k.tag;if((ne===3||ne===4)&&k.stateNode.containerInfo===f)return;k=k.return}for(;G!==null;){if(k=Ze(G),k===null)return;if(ne=k.tag,ne===5||ne===6||ne===26||ne===27){o=g=k;continue e}G=G.parentNode}}o=o.return}Us(function(){var ve=g,Ae=Wa(r),Ie=[];e:{var xe=fp.get(e);if(xe!==void 0){var we=Ce,Ke=e;switch(e){case"keypress":if(b(r)===0)break e;case"keydown":case"keyup":we=qu;break;case"focusin":Ke="focus",we=po;break;case"focusout":Ke="blur",we=po;break;case"beforeblur":case"afterblur":we=po;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":we=Il;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":we=Ru;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":we=Pu;break;case lp:case cp:case up:we=Iu;break;case dp:we=Vu;break;case"scroll":case"scrollend":we=Ct;break;case"wheel":we=Zu;break;case"copy":case"cut":case"paste":we=Uu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":we=Bl;break;case"toggle":case"beforetoggle":we=Gl}var lt=(t&4)!==0,Zt=!lt&&(e==="scroll"||e==="scrollend"),de=lt?xe!==null?xe+"Capture":null:xe;lt=[];for(var ce=ve,ye;ce!==null;){var Oe=ce;if(ye=Oe.stateNode,Oe=Oe.tag,Oe!==5&&Oe!==26&&Oe!==27||ye===null||de===null||(Oe=ia(ce,de),Oe!=null&&lt.push(Yo(ce,Oe,ye))),Zt)break;ce=ce.return}0<lt.length&&(xe=new we(xe,Ke,null,r,Ae),Ie.push({event:xe,listeners:lt}))}}if((t&7)===0){e:{if(xe=e==="mouseover"||e==="pointerover",we=e==="mouseout"||e==="pointerout",xe&&r!==sa&&(Ke=r.relatedTarget||r.fromElement)&&(Ze(Ke)||Ke[Or]))break e;if((we||xe)&&(xe=Ae.window===Ae?Ae:(xe=Ae.ownerDocument)?xe.defaultView||xe.parentWindow:window,we?(Ke=r.relatedTarget||r.toElement,we=ve,Ke=Ke?Ze(Ke):null,Ke!==null&&(Zt=c(Ke),lt=Ke.tag,Ke!==Zt||lt!==5&&lt!==27&&lt!==6)&&(Ke=null)):(we=null,Ke=ve),we!==Ke)){if(lt=Il,Oe="onMouseLeave",de="onMouseEnter",ce="mouse",(e==="pointerout"||e==="pointerover")&&(lt=Bl,Oe="onPointerLeave",de="onPointerEnter",ce="pointer"),Zt=we==null?xe:Wt(we),ye=Ke==null?xe:Wt(Ke),xe=new lt(Oe,ce+"leave",we,r,Ae),xe.target=Zt,xe.relatedTarget=ye,Oe=null,Ze(Ae)===ve&&(lt=new lt(de,ce+"enter",Ke,r,Ae),lt.target=ye,lt.relatedTarget=Zt,Oe=lt),Zt=Oe,we&&Ke)t:{for(lt=Nx,de=we,ce=Ke,ye=0,Oe=de;Oe;Oe=lt(Oe))ye++;Oe=0;for(var at=ce;at;at=lt(at))Oe++;for(;0<ye-Oe;)de=lt(de),ye--;for(;0<Oe-ye;)ce=lt(ce),Oe--;for(;ye--;){if(de===ce||ce!==null&&de===ce.alternate){lt=de;break t}de=lt(de),ce=lt(ce)}lt=null}else lt=null;we!==null&&Ig(Ie,xe,we,lt,!1),Ke!==null&&Zt!==null&&Ig(Ie,Zt,Ke,lt,!0)}}e:{if(xe=ve?Wt(ve):window,we=xe.nodeName&&xe.nodeName.toLowerCase(),we==="select"||we==="input"&&xe.type==="file")var Ut=Kh;else if(Jn(xe))if(Xh)Ut=B0;else{Ut=L0;var et=U0}else we=xe.nodeName,!we||we.toLowerCase()!=="input"||xe.type!=="checkbox"&&xe.type!=="radio"?ve&&Ka(ve.elementType)&&(Ut=Kh):Ut=z0;if(Ut&&(Ut=Ut(e,ve))){Yn(Ie,Ut,r,Ae);break e}et&&et(e,xe,ve),e==="focusout"&&ve&&xe.type==="number"&&ve.memoizedProps.value!=null&&uo(xe,"number",xe.value)}switch(et=ve?Wt(ve):window,e){case"focusin":(Jn(et)||et.contentEditable==="true")&&(bi=et,ed=ve,xo=null);break;case"focusout":xo=ed=bi=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,ip(Ie,r,Ae);break;case"selectionchange":if(G0)break;case"keydown":case"keyup":ip(Ie,r,Ae)}var bt;if(go)e:{switch(e){case"compositionstart":var Dt="onCompositionStart";break e;case"compositionend":Dt="onCompositionEnd";break e;case"compositionupdate":Dt="onCompositionUpdate";break e}Dt=void 0}else ot?Me(e,r)&&(Dt="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Dt="onCompositionStart");Dt&&(yo&&r.locale!=="ko"&&(ot||Dt!=="onCompositionStart"?Dt==="onCompositionEnd"&&ot&&(bt=y()):(Un=Ae,ts="value"in Un?Un.value:Un.textContent,ot=!0)),et=Dc(ve,Dt),0<et.length&&(Dt=new Ll(Dt,e,null,r,Ae),Ie.push({event:Dt,listeners:et}),bt?Dt.data=bt:(bt=We(r),bt!==null&&(Dt.data=bt)))),(bt=yi?_t(e,r):Yt(e,r))&&(Dt=Dc(ve,"onBeforeInput"),0<Dt.length&&(et=new Ll("onBeforeInput","beforeinput",null,r,Ae),Ie.push({event:et,listeners:Dt}),et.data=bt)),wx(Ie,e,ve,r,Ae)}Rg(Ie,t)})}function Yo(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Dc(e,t){for(var r=t+"Capture",o=[];e!==null;){var f=e,g=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||g===null||(f=ia(e,r),f!=null&&o.unshift(Yo(e,f,g)),f=ia(e,t),f!=null&&o.push(Yo(e,f,g))),e.tag===3)return o;e=e.return}return[]}function Nx(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ig(e,t,r,o,f){for(var g=t._reactName,k=[];r!==null&&r!==o;){var G=r,ne=G.alternate,ve=G.stateNode;if(G=G.tag,ne!==null&&ne===o)break;G!==5&&G!==26&&G!==27||ve===null||(ne=ve,f?(ve=ia(r,g),ve!=null&&k.unshift(Yo(r,ve,ne))):f||(ve=ia(r,g),ve!=null&&k.push(Yo(r,ve,ne)))),r=r.return}k.length!==0&&e.push({event:t,listeners:k})}var Dx=/\r\n?/g,Cx=/\u0000|\uFFFD/g;function Mg(e){return(typeof e=="string"?e:""+e).replace(Dx,`
`).replace(Cx,"")}function Ug(e,t){return t=Mg(t),Mg(e)===t}function $t(e,t,r,o,f,g){switch(r){case"children":typeof o=="string"?t==="body"||t==="textarea"&&o===""||ba(e,o):(typeof o=="number"||typeof o=="bigint")&&t!=="body"&&ba(e,""+o);break;case"className":Ms(e,"class",o);break;case"tabIndex":Ms(e,"tabindex",o);break;case"dir":case"role":case"viewBox":case"width":case"height":Ms(e,r,o);break;case"style":jl(e,o,g);break;case"data":if(t!=="object"){Ms(e,"data",o);break}case"src":case"href":if(o===""&&(t!=="a"||r!=="href")){e.removeAttribute(r);break}if(o==null||typeof o=="function"||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Xa(""+o),e.setAttribute(r,o);break;case"action":case"formAction":if(typeof o=="function"){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(r==="formAction"?(t!=="input"&&$t(e,t,"name",f.name,f,null),$t(e,t,"formEncType",f.formEncType,f,null),$t(e,t,"formMethod",f.formMethod,f,null),$t(e,t,"formTarget",f.formTarget,f,null)):($t(e,t,"encType",f.encType,f,null),$t(e,t,"method",f.method,f,null),$t(e,t,"target",f.target,f,null)));if(o==null||typeof o=="symbol"||typeof o=="boolean"){e.removeAttribute(r);break}o=Xa(""+o),e.setAttribute(r,o);break;case"onClick":o!=null&&(e.onclick=An);break;case"onScroll":o!=null&&At("scroll",e);break;case"onScrollEnd":o!=null&&At("scrollend",e);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"multiple":e.multiple=o&&typeof o!="function"&&typeof o!="symbol";break;case"muted":e.muted=o&&typeof o!="function"&&typeof o!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(o==null||typeof o=="function"||typeof o=="boolean"||typeof o=="symbol"){e.removeAttribute("xlink:href");break}r=Xa(""+o),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""+o):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":o&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":o===!0?e.setAttribute(r,""):o!==!1&&o!=null&&typeof o!="function"&&typeof o!="symbol"?e.setAttribute(r,o):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":o!=null&&typeof o!="function"&&typeof o!="symbol"&&!isNaN(o)&&1<=o?e.setAttribute(r,o):e.removeAttribute(r);break;case"rowSpan":case"start":o==null||typeof o=="function"||typeof o=="symbol"||isNaN(o)?e.removeAttribute(r):e.setAttribute(r,o);break;case"popover":At("beforetoggle",e),At("toggle",e),ui(e,"popover",o);break;case"xlinkActuate":Rr(e,"http://www.w3.org/1999/xlink","xlink:actuate",o);break;case"xlinkArcrole":Rr(e,"http://www.w3.org/1999/xlink","xlink:arcrole",o);break;case"xlinkRole":Rr(e,"http://www.w3.org/1999/xlink","xlink:role",o);break;case"xlinkShow":Rr(e,"http://www.w3.org/1999/xlink","xlink:show",o);break;case"xlinkTitle":Rr(e,"http://www.w3.org/1999/xlink","xlink:title",o);break;case"xlinkType":Rr(e,"http://www.w3.org/1999/xlink","xlink:type",o);break;case"xmlBase":Rr(e,"http://www.w3.org/XML/1998/namespace","xml:base",o);break;case"xmlLang":Rr(e,"http://www.w3.org/XML/1998/namespace","xml:lang",o);break;case"xmlSpace":Rr(e,"http://www.w3.org/XML/1998/namespace","xml:space",o);break;case"is":ui(e,"is",o);break;case"innerText":case"textContent":break;default:(!(2<r.length)||r[0]!=="o"&&r[0]!=="O"||r[1]!=="n"&&r[1]!=="N")&&(r=mi.get(r)||r,ui(e,r,o))}}function kf(e,t,r,o,f,g){switch(r){case"style":jl(e,o,g);break;case"dangerouslySetInnerHTML":if(o!=null){if(typeof o!="object"||!("__html"in o))throw Error(i(61));if(r=o.__html,r!=null){if(f.children!=null)throw Error(i(60));e.innerHTML=r}}break;case"children":typeof o=="string"?ba(e,o):(typeof o=="number"||typeof o=="bigint")&&ba(e,""+o);break;case"onScroll":o!=null&&At("scroll",e);break;case"onScrollEnd":o!=null&&At("scrollend",e);break;case"onClick":o!=null&&(e.onclick=An);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!hr.hasOwnProperty(r))e:{if(r[0]==="o"&&r[1]==="n"&&(f=r.endsWith("Capture"),t=r.slice(2,f?r.length-7:void 0),g=e[Mt]||null,g=g!=null?g[r]:null,typeof g=="function"&&e.removeEventListener(t,g,f),typeof o=="function")){typeof g!="function"&&g!==null&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,o,f);break e}r in e?e[r]=o:o===!0?e.setAttribute(r,""):ui(e,r,o)}}}function Gn(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":At("error",e),At("load",e);var o=!1,f=!1,g;for(g in r)if(r.hasOwnProperty(g)){var k=r[g];if(k!=null)switch(g){case"src":o=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$t(e,t,g,k,r,null)}}f&&$t(e,t,"srcSet",r.srcSet,r,null),o&&$t(e,t,"src",r.src,r,null);return;case"input":At("invalid",e);var G=g=k=f=null,ne=null,ve=null;for(o in r)if(r.hasOwnProperty(o)){var Ae=r[o];if(Ae!=null)switch(o){case"name":f=Ae;break;case"type":k=Ae;break;case"checked":ne=Ae;break;case"defaultChecked":ve=Ae;break;case"value":g=Ae;break;case"defaultValue":G=Ae;break;case"children":case"dangerouslySetInnerHTML":if(Ae!=null)throw Error(i(137,t));break;default:$t(e,t,o,Ae,r,null)}}Qa(e,g,G,ne,ve,k,f,!1);return;case"select":At("invalid",e),o=k=g=null;for(f in r)if(r.hasOwnProperty(f)&&(G=r[f],G!=null))switch(f){case"value":g=G;break;case"defaultValue":k=G;break;case"multiple":o=G;default:$t(e,t,f,G,r,null)}t=g,r=k,e.multiple=!!o,t!=null?Ja(e,!!o,t,!1):r!=null&&Ja(e,!!o,r,!0);return;case"textarea":At("invalid",e),g=f=o=null;for(k in r)if(r.hasOwnProperty(k)&&(G=r[k],G!=null))switch(k){case"value":o=G;break;case"defaultValue":f=G;break;case"children":g=G;break;case"dangerouslySetInnerHTML":if(G!=null)throw Error(i(91));break;default:$t(e,t,k,G,r,null)}hi(e,o,f,g);return;case"option":for(ne in r)if(r.hasOwnProperty(ne)&&(o=r[ne],o!=null))switch(ne){case"selected":e.selected=o&&typeof o!="function"&&typeof o!="symbol";break;default:$t(e,t,ne,o,r,null)}return;case"dialog":At("beforetoggle",e),At("toggle",e),At("cancel",e),At("close",e);break;case"iframe":case"object":At("load",e);break;case"video":case"audio":for(o=0;o<Po.length;o++)At(Po[o],e);break;case"image":At("error",e),At("load",e);break;case"details":At("toggle",e);break;case"embed":case"source":case"link":At("error",e),At("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(ve in r)if(r.hasOwnProperty(ve)&&(o=r[ve],o!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,t));default:$t(e,t,ve,o,r,null)}return;default:if(Ka(t)){for(Ae in r)r.hasOwnProperty(Ae)&&(o=r[Ae],o!==void 0&&kf(e,t,Ae,o,r,void 0));return}}for(G in r)r.hasOwnProperty(G)&&(o=r[G],o!=null&&$t(e,t,G,o,r,null))}function Ox(e,t,r,o){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,g=null,k=null,G=null,ne=null,ve=null,Ae=null;for(we in r){var Ie=r[we];if(r.hasOwnProperty(we)&&Ie!=null)switch(we){case"checked":break;case"value":break;case"defaultValue":ne=Ie;default:o.hasOwnProperty(we)||$t(e,t,we,null,o,Ie)}}for(var xe in o){var we=o[xe];if(Ie=r[xe],o.hasOwnProperty(xe)&&(we!=null||Ie!=null))switch(xe){case"type":g=we;break;case"name":f=we;break;case"checked":ve=we;break;case"defaultChecked":Ae=we;break;case"value":k=we;break;case"defaultValue":G=we;break;case"children":case"dangerouslySetInnerHTML":if(we!=null)throw Error(i(137,t));break;default:we!==Ie&&$t(e,t,xe,we,o,Ie)}}Za(e,k,G,ne,ve,Ae,g,f);return;case"select":we=k=G=xe=null;for(g in r)if(ne=r[g],r.hasOwnProperty(g)&&ne!=null)switch(g){case"value":break;case"multiple":we=ne;default:o.hasOwnProperty(g)||$t(e,t,g,null,o,ne)}for(f in o)if(g=o[f],ne=r[f],o.hasOwnProperty(f)&&(g!=null||ne!=null))switch(f){case"value":xe=g;break;case"defaultValue":G=g;break;case"multiple":k=g;default:g!==ne&&$t(e,t,f,g,o,ne)}t=G,r=k,o=we,xe!=null?Ja(e,!!r,xe,!1):!!o!=!!r&&(t!=null?Ja(e,!!r,t,!0):Ja(e,!!r,r?[]:"",!1));return;case"textarea":we=xe=null;for(G in r)if(f=r[G],r.hasOwnProperty(G)&&f!=null&&!o.hasOwnProperty(G))switch(G){case"value":break;case"children":break;default:$t(e,t,G,null,o,f)}for(k in o)if(f=o[k],g=r[k],o.hasOwnProperty(k)&&(f!=null||g!=null))switch(k){case"value":xe=f;break;case"defaultValue":we=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(i(91));break;default:f!==g&&$t(e,t,k,f,o,g)}fo(e,xe,we);return;case"option":for(var Ke in r)if(xe=r[Ke],r.hasOwnProperty(Ke)&&xe!=null&&!o.hasOwnProperty(Ke))switch(Ke){case"selected":e.selected=!1;break;default:$t(e,t,Ke,null,o,xe)}for(ne in o)if(xe=o[ne],we=r[ne],o.hasOwnProperty(ne)&&xe!==we&&(xe!=null||we!=null))switch(ne){case"selected":e.selected=xe&&typeof xe!="function"&&typeof xe!="symbol";break;default:$t(e,t,ne,xe,o,we)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var lt in r)xe=r[lt],r.hasOwnProperty(lt)&&xe!=null&&!o.hasOwnProperty(lt)&&$t(e,t,lt,null,o,xe);for(ve in o)if(xe=o[ve],we=r[ve],o.hasOwnProperty(ve)&&xe!==we&&(xe!=null||we!=null))switch(ve){case"children":case"dangerouslySetInnerHTML":if(xe!=null)throw Error(i(137,t));break;default:$t(e,t,ve,xe,o,we)}return;default:if(Ka(t)){for(var Zt in r)xe=r[Zt],r.hasOwnProperty(Zt)&&xe!==void 0&&!o.hasOwnProperty(Zt)&&kf(e,t,Zt,void 0,o,xe);for(Ae in o)xe=o[Ae],we=r[Ae],!o.hasOwnProperty(Ae)||xe===we||xe===void 0&&we===void 0||kf(e,t,Ae,xe,o,we);return}}for(var de in r)xe=r[de],r.hasOwnProperty(de)&&xe!=null&&!o.hasOwnProperty(de)&&$t(e,t,de,null,o,xe);for(Ie in o)xe=o[Ie],we=r[Ie],!o.hasOwnProperty(Ie)||xe===we||xe==null&&we==null||$t(e,t,Ie,xe,o,we)}function Lg(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function Rx(){if(typeof performance.getEntriesByType=="function"){for(var e=0,t=0,r=performance.getEntriesByType("resource"),o=0;o<r.length;o++){var f=r[o],g=f.transferSize,k=f.initiatorType,G=f.duration;if(g&&G&&Lg(k)){for(k=0,G=f.responseEnd,o+=1;o<r.length;o++){var ne=r[o],ve=ne.startTime;if(ve>G)break;var Ae=ne.transferSize,Ie=ne.initiatorType;Ae&&Lg(Ie)&&(ne=ne.responseEnd,k+=Ae*(ne<G?1:(G-ve)/(ne-ve)))}if(--o,t+=8*(g+k)/(f.duration/1e3),e++,10<e)break}}if(0<e)return t/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var Nf=null,Df=null;function Cc(e){return e.nodeType===9?e:e.ownerDocument}function zg(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Bg(e,t){if(e===0)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&t==="foreignObject"?0:e}function Cf(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.children=="bigint"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Of=null;function jx(){var e=window.event;return e&&e.type==="popstate"?e===Of?!1:(Of=e,!0):(Of=null,!1)}var Fg=typeof setTimeout=="function"?setTimeout:void 0,Ix=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,Mx=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(e){return Gg.resolve(null).then(e).catch(Ux)}:Fg;function Ux(e){setTimeout(function(){throw e})}function vs(e){return e==="head"}function qg(e,t){var r=t,o=0;do{var f=r.nextSibling;if(e.removeChild(r),f&&f.nodeType===8)if(r=f.data,r==="/$"||r==="/&"){if(o===0){e.removeChild(f),Vi(t);return}o--}else if(r==="$"||r==="$?"||r==="$~"||r==="$!"||r==="&")o++;else if(r==="html")Vo(e.ownerDocument.documentElement);else if(r==="head"){r=e.ownerDocument.head,Vo(r);for(var g=r.firstChild;g;){var k=g.nextSibling,G=g.nodeName;g[oe]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&g.rel.toLowerCase()==="stylesheet"||r.removeChild(g),g=k}}else r==="body"&&Vo(e.ownerDocument.body);r=f}while(r);Vi(t)}function Hg(e,t){var r=e;e=0;do{var o=r.nextSibling;if(r.nodeType===1?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",r.getAttribute("style")===""&&r.removeAttribute("style")):r.nodeType===3&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),o&&o.nodeType===8)if(r=o.data,r==="/$"){if(e===0)break;e--}else r!=="$"&&r!=="$?"&&r!=="$~"&&r!=="$!"||e++;r=o}while(r)}function Rf(e){var t=e.firstChild;for(t&&t.nodeType===10&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Rf(r),Le(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(r.rel.toLowerCase()==="stylesheet")continue}e.removeChild(r)}}function Lx(e,t,r,o){for(;e.nodeType===1;){var f=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!o&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(o){if(!e[oe])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(g=e.getAttribute("rel"),g==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(g!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(g=e.getAttribute("src"),(g!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&g&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(t==="input"&&e.type==="hidden"){var g=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===g)return e}else return e;if(e=Gr(e.nextSibling),e===null)break}return null}function zx(e,t,r){if(t==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!r||(e=Gr(e.nextSibling),e===null))return null;return e}function Pg(e,t){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!t||(e=Gr(e.nextSibling),e===null))return null;return e}function jf(e){return e.data==="$?"||e.data==="$~"}function If(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function Bx(e,t){var r=e.ownerDocument;if(e.data==="$~")e._reactRetry=t;else if(e.data!=="$?"||r.readyState!=="loading")t();else{var o=function(){t(),r.removeEventListener("DOMContentLoaded",o)};r.addEventListener("DOMContentLoaded",o),e._reactRetry=o}}function Gr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?"||t==="$~"||t==="&"||t==="F!"||t==="F")break;if(t==="/$"||t==="/&")return null}}return e}var Mf=null;function Yg(e){e=e.nextSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"||r==="/&"){if(t===0)return Gr(e.nextSibling);t--}else r!=="$"&&r!=="$!"&&r!=="$?"&&r!=="$~"&&r!=="&"||t++}e=e.nextSibling}return null}function Vg(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"||r==="$~"||r==="&"){if(t===0)return e;t--}else r!=="/$"&&r!=="/&"||t++}e=e.previousSibling}return null}function $g(e,t,r){switch(t=Cc(r),e){case"html":if(e=t.documentElement,!e)throw Error(i(452));return e;case"head":if(e=t.head,!e)throw Error(i(453));return e;case"body":if(e=t.body,!e)throw Error(i(454));return e;default:throw Error(i(451))}}function Vo(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Le(e)}var qr=new Map,Zg=new Set;function Oc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Ba=q.d;q.d={f:Fx,r:Gx,D:qx,C:Hx,L:Px,m:Yx,X:$x,S:Vx,M:Zx};function Fx(){var e=Ba.f(),t=Sc();return e||t}function Gx(e){var t=ct(e);t!==null&&t.tag===5&&t.type==="form"?dm(t):Ba.r(e)}var Hi=typeof document>"u"?null:document;function Qg(e,t,r){var o=Hi;if(o&&typeof t=="string"&&t){var f=Mn(t);f='link[rel="'+e+'"][href="'+f+'"]',typeof r=="string"&&(f+='[crossorigin="'+r+'"]'),Zg.has(f)||(Zg.add(f),e={rel:e,crossOrigin:r,href:t},o.querySelector(f)===null&&(t=o.createElement("link"),Gn(t,"link",e),wt(t),o.head.appendChild(t)))}}function qx(e){Ba.D(e),Qg("dns-prefetch",e,null)}function Hx(e,t){Ba.C(e,t),Qg("preconnect",e,t)}function Px(e,t,r){Ba.L(e,t,r);var o=Hi;if(o&&e&&t){var f='link[rel="preload"][as="'+Mn(t)+'"]';t==="image"&&r&&r.imageSrcSet?(f+='[imagesrcset="'+Mn(r.imageSrcSet)+'"]',typeof r.imageSizes=="string"&&(f+='[imagesizes="'+Mn(r.imageSizes)+'"]')):f+='[href="'+Mn(e)+'"]';var g=f;switch(t){case"style":g=Pi(e);break;case"script":g=Yi(e)}qr.has(g)||(e=x({rel:"preload",href:t==="image"&&r&&r.imageSrcSet?void 0:e,as:t},r),qr.set(g,e),o.querySelector(f)!==null||t==="style"&&o.querySelector($o(g))||t==="script"&&o.querySelector(Zo(g))||(t=o.createElement("link"),Gn(t,"link",e),wt(t),o.head.appendChild(t)))}}function Yx(e,t){Ba.m(e,t);var r=Hi;if(r&&e){var o=t&&typeof t.as=="string"?t.as:"script",f='link[rel="modulepreload"][as="'+Mn(o)+'"][href="'+Mn(e)+'"]',g=f;switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=Yi(e)}if(!qr.has(g)&&(e=x({rel:"modulepreload",href:e},t),qr.set(g,e),r.querySelector(f)===null)){switch(o){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Zo(g)))return}o=r.createElement("link"),Gn(o,"link",e),wt(o),r.head.appendChild(o)}}}function Vx(e,t,r){Ba.S(e,t,r);var o=Hi;if(o&&e){var f=Xt(o).hoistableStyles,g=Pi(e);t=t||"default";var k=f.get(g);if(!k){var G={loading:0,preload:null};if(k=o.querySelector($o(g)))G.loading=5;else{e=x({rel:"stylesheet",href:e,"data-precedence":t},r),(r=qr.get(g))&&Uf(e,r);var ne=k=o.createElement("link");wt(ne),Gn(ne,"link",e),ne._p=new Promise(function(ve,Ae){ne.onload=ve,ne.onerror=Ae}),ne.addEventListener("load",function(){G.loading|=1}),ne.addEventListener("error",function(){G.loading|=2}),G.loading|=4,Rc(k,t,o)}k={type:"stylesheet",instance:k,count:1,state:G},f.set(g,k)}}}function $x(e,t){Ba.X(e,t);var r=Hi;if(r&&e){var o=Xt(r).hoistableScripts,f=Yi(e),g=o.get(f);g||(g=r.querySelector(Zo(f)),g||(e=x({src:e,async:!0},t),(t=qr.get(f))&&Lf(e,t),g=r.createElement("script"),wt(g),Gn(g,"link",e),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function Zx(e,t){Ba.M(e,t);var r=Hi;if(r&&e){var o=Xt(r).hoistableScripts,f=Yi(e),g=o.get(f);g||(g=r.querySelector(Zo(f)),g||(e=x({src:e,async:!0,type:"module"},t),(t=qr.get(f))&&Lf(e,t),g=r.createElement("script"),wt(g),Gn(g,"link",e),r.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},o.set(f,g))}}function Jg(e,t,r,o){var f=(f=fe.current)?Oc(f):null;if(!f)throw Error(i(446));switch(e){case"meta":case"title":return null;case"style":return typeof r.precedence=="string"&&typeof r.href=="string"?(t=Pi(r.href),r=Xt(f).hoistableStyles,o=r.get(t),o||(o={type:"style",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};case"link":if(r.rel==="stylesheet"&&typeof r.href=="string"&&typeof r.precedence=="string"){e=Pi(r.href);var g=Xt(f).hoistableStyles,k=g.get(e);if(k||(f=f.ownerDocument||f,k={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(e,k),(g=f.querySelector($o(e)))&&!g._p&&(k.instance=g,k.state.loading=5),qr.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},qr.set(e,r),g||Qx(f,e,r,k.state))),t&&o===null)throw Error(i(528,""));return k}if(t&&o!==null)throw Error(i(529,""));return null;case"script":return t=r.async,r=r.src,typeof r=="string"&&t&&typeof t!="function"&&typeof t!="symbol"?(t=Yi(r),r=Xt(f).hoistableScripts,o=r.get(t),o||(o={type:"script",instance:null,count:0,state:null},r.set(t,o)),o):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,e))}}function Pi(e){return'href="'+Mn(e)+'"'}function $o(e){return'link[rel="stylesheet"]['+e+"]"}function Kg(e){return x({},e,{"data-precedence":e.precedence,precedence:null})}function Qx(e,t,r,o){e.querySelector('link[rel="preload"][as="style"]['+t+"]")?o.loading=1:(t=e.createElement("link"),o.preload=t,t.addEventListener("load",function(){return o.loading|=1}),t.addEventListener("error",function(){return o.loading|=2}),Gn(t,"link",r),wt(t),e.head.appendChild(t))}function Yi(e){return'[src="'+Mn(e)+'"]'}function Zo(e){return"script[async]"+e}function Xg(e,t,r){if(t.count++,t.instance===null)switch(t.type){case"style":var o=e.querySelector('style[data-href~="'+Mn(r.href)+'"]');if(o)return t.instance=o,wt(o),o;var f=x({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return o=(e.ownerDocument||e).createElement("style"),wt(o),Gn(o,"style",f),Rc(o,r.precedence,e),t.instance=o;case"stylesheet":f=Pi(r.href);var g=e.querySelector($o(f));if(g)return t.state.loading|=4,t.instance=g,wt(g),g;o=Kg(r),(f=qr.get(f))&&Uf(o,f),g=(e.ownerDocument||e).createElement("link"),wt(g);var k=g;return k._p=new Promise(function(G,ne){k.onload=G,k.onerror=ne}),Gn(g,"link",o),t.state.loading|=4,Rc(g,r.precedence,e),t.instance=g;case"script":return g=Yi(r.src),(f=e.querySelector(Zo(g)))?(t.instance=f,wt(f),f):(o=r,(f=qr.get(g))&&(o=x({},r),Lf(o,f)),e=e.ownerDocument||e,f=e.createElement("script"),wt(f),Gn(f,"link",o),e.head.appendChild(f),t.instance=f);case"void":return null;default:throw Error(i(443,t.type))}else t.type==="stylesheet"&&(t.state.loading&4)===0&&(o=t.instance,t.state.loading|=4,Rc(o,r.precedence,e));return t.instance}function Rc(e,t,r){for(var o=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=o.length?o[o.length-1]:null,g=f,k=0;k<o.length;k++){var G=o[k];if(G.dataset.precedence===t)g=G;else if(g!==f)break}g?g.parentNode.insertBefore(e,g.nextSibling):(t=r.nodeType===9?r.head:r,t.insertBefore(e,t.firstChild))}function Uf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.title==null&&(e.title=t.title)}function Lf(e,t){e.crossOrigin==null&&(e.crossOrigin=t.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=t.referrerPolicy),e.integrity==null&&(e.integrity=t.integrity)}var jc=null;function Wg(e,t,r){if(jc===null){var o=new Map,f=jc=new Map;f.set(r,o)}else f=jc,o=f.get(r),o||(o=new Map,f.set(r,o));if(o.has(e))return o;for(o.set(e,null),r=r.getElementsByTagName(e),f=0;f<r.length;f++){var g=r[f];if(!(g[oe]||g[Gt]||e==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var k=g.getAttribute(t)||"";k=e+k;var G=o.get(k);G?G.push(g):o.set(k,[g])}}return o}function ey(e,t,r){e=e.ownerDocument||e,e.head.insertBefore(r,t==="title"?e.querySelector("head > title"):null)}function Jx(e,t,r){if(r===1||t.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof t.precedence!="string"||typeof t.href!="string"||t.href==="")break;return!0;case"link":if(typeof t.rel!="string"||typeof t.href!="string"||t.href===""||t.onLoad||t.onError)break;switch(t.rel){case"stylesheet":return e=t.disabled,typeof t.precedence=="string"&&e==null;default:return!0}case"script":if(t.async&&typeof t.async!="function"&&typeof t.async!="symbol"&&!t.onLoad&&!t.onError&&t.src&&typeof t.src=="string")return!0}return!1}function ty(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Kx(e,t,r,o){if(r.type==="stylesheet"&&(typeof o.media!="string"||matchMedia(o.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var f=Pi(o.href),g=t.querySelector($o(f));if(g){t=g._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(e.count++,e=Ic.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=g,wt(g);return}g=t.ownerDocument||t,o=Kg(o),(f=qr.get(f))&&Uf(o,f),g=g.createElement("link"),wt(g);var k=g;k._p=new Promise(function(G,ne){k.onload=G,k.onerror=ne}),Gn(g,"link",o),r.instance=g}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(e.count++,r=Ic.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}var zf=0;function Xx(e,t){return e.stylesheets&&e.count===0&&Uc(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var o=setTimeout(function(){if(e.stylesheets&&Uc(e,e.stylesheets),e.unsuspend){var g=e.unsuspend;e.unsuspend=null,g()}},6e4+t);0<e.imgBytes&&zf===0&&(zf=62500*Rx());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&Uc(e,e.stylesheets),e.unsuspend)){var g=e.unsuspend;e.unsuspend=null,g()}},(e.imgBytes>zf?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(o),clearTimeout(f)}}:null}function Ic(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Uc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var Mc=null;function Uc(e,t){e.stylesheets=null,e.unsuspend!==null&&(e.count++,Mc=new Map,t.forEach(Wx,e),Mc=null,Ic.call(e))}function Wx(e,t){if(!(t.state.loading&4)){var r=Mc.get(e);if(r)var o=r.get(null);else{r=new Map,Mc.set(e,r);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<f.length;g++){var k=f[g];(k.nodeName==="LINK"||k.getAttribute("media")!=="not all")&&(r.set(k.dataset.precedence,k),o=k)}o&&r.set(null,o)}f=t.instance,k=f.getAttribute("data-precedence"),g=r.get(k)||o,g===o&&r.set(null,f),r.set(k,f),this.count++,o=Ic.bind(this),f.addEventListener("load",o),f.addEventListener("error",o),g?g.parentNode.insertBefore(f,g.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),t.state.loading|=4}}var Qo={$$typeof:U,Provider:null,Consumer:null,_currentValue:se,_currentValue2:se,_threadCount:0};function e_(e,t,r,o,f,g,k,G,ne){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=gn(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gn(0),this.hiddenUpdates=gn(null),this.identifierPrefix=o,this.onUncaughtError=f,this.onCaughtError=g,this.onRecoverableError=k,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=ne,this.incompleteTransitions=new Map}function ny(e,t,r,o,f,g,k,G,ne,ve,Ae,Ie){return e=new e_(e,t,r,k,ne,ve,Ae,Ie,G),t=1,g===!0&&(t|=24),g=gr(3,null,null,t),e.current=g,g.stateNode=e,t=gd(),t.refCount++,e.pooledCache=t,t.refCount++,g.memoizedState={element:o,isDehydrated:r,cache:t},xd(g),e}function ry(e){return e?(e=Si,e):Si}function ay(e,t,r,o,f,g){f=ry(f),o.context===null?o.context=f:o.pendingContext=f,o=os(t),o.payload={element:r},g=g===void 0?null:g,g!==null&&(o.callback=g),r=ls(e,o,t),r!==null&&(ur(r,e,t),ko(r,e,t))}function sy(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function Bf(e,t){sy(e,t),(e=e.alternate)&&sy(e,t)}function iy(e){if(e.tag===13||e.tag===31){var t=qs(e,67108864);t!==null&&ur(t,e,67108864),Bf(e,67108864)}}function oy(e){if(e.tag===13||e.tag===31){var t=_r();t=xn(t);var r=qs(e,t);r!==null&&ur(r,e,t),Bf(e,t)}}var Lc=!0;function t_(e,t,r,o){var f=$.T;$.T=null;var g=q.p;try{q.p=2,Ff(e,t,r,o)}finally{q.p=g,$.T=f}}function n_(e,t,r,o){var f=$.T;$.T=null;var g=q.p;try{q.p=8,Ff(e,t,r,o)}finally{q.p=g,$.T=f}}function Ff(e,t,r,o){if(Lc){var f=Gf(o);if(f===null)Af(e,t,o,zc,r),cy(e,o);else if(a_(f,e,t,r,o))o.stopPropagation();else if(cy(e,o),t&4&&-1<r_.indexOf(e)){for(;f!==null;){var g=ct(f);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var k=jn(g.pendingLanes);if(k!==0){var G=g;for(G.pendingLanes|=2,G.entangledLanes|=2;k;){var ne=1<<31-It(k);G.entanglements[1]|=ne,k&=~ne}ua(g),(zt&6)===0&&(xc=ze()+500,Ho(0))}}break;case 31:case 13:G=qs(g,2),G!==null&&ur(G,g,2),Sc(),Bf(g,2)}if(g=Gf(o),g===null&&Af(e,t,o,zc,r),g===f)break;f=g}f!==null&&o.stopPropagation()}else Af(e,t,o,null,r)}}function Gf(e){return e=Wa(e),qf(e)}var zc=null;function qf(e){if(zc=null,e=Ze(e),e!==null){var t=c(e);if(t===null)e=null;else{var r=t.tag;if(r===13){if(e=h(t),e!==null)return e;e=null}else if(r===31){if(e=d(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return zc=e,null}function ly(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ne()){case Je:return 2;case ht:return 8;case st:case Rt:return 32;case Qt:return 268435456;default:return 32}default:return 32}}var Hf=!1,bs=null,xs=null,_s=null,Jo=new Map,Ko=new Map,Ss=[],r_="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cy(e,t){switch(e){case"focusin":case"focusout":bs=null;break;case"dragenter":case"dragleave":xs=null;break;case"mouseover":case"mouseout":_s=null;break;case"pointerover":case"pointerout":Jo.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ko.delete(t.pointerId)}}function Xo(e,t,r,o,f,g){return e===null||e.nativeEvent!==g?(e={blockedOn:t,domEventName:r,eventSystemFlags:o,nativeEvent:g,targetContainers:[f]},t!==null&&(t=ct(t),t!==null&&iy(t)),e):(e.eventSystemFlags|=o,t=e.targetContainers,f!==null&&t.indexOf(f)===-1&&t.push(f),e)}function a_(e,t,r,o,f){switch(t){case"focusin":return bs=Xo(bs,e,t,r,o,f),!0;case"dragenter":return xs=Xo(xs,e,t,r,o,f),!0;case"mouseover":return _s=Xo(_s,e,t,r,o,f),!0;case"pointerover":var g=f.pointerId;return Jo.set(g,Xo(Jo.get(g)||null,e,t,r,o,f)),!0;case"gotpointercapture":return g=f.pointerId,Ko.set(g,Xo(Ko.get(g)||null,e,t,r,o,f)),!0}return!1}function uy(e){var t=Ze(e.target);if(t!==null){var r=c(t);if(r!==null){if(t=r.tag,t===13){if(t=h(r),t!==null){e.blockedOn=t,Is(e.priority,function(){oy(r)});return}}else if(t===31){if(t=d(r),t!==null){e.blockedOn=t,Is(e.priority,function(){oy(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Bc(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Gf(e.nativeEvent);if(r===null){r=e.nativeEvent;var o=new r.constructor(r.type,r);sa=o,r.target.dispatchEvent(o),sa=null}else return t=ct(r),t!==null&&iy(t),e.blockedOn=r,!1;t.shift()}return!0}function dy(e,t,r){Bc(e)&&r.delete(t)}function s_(){Hf=!1,bs!==null&&Bc(bs)&&(bs=null),xs!==null&&Bc(xs)&&(xs=null),_s!==null&&Bc(_s)&&(_s=null),Jo.forEach(dy),Ko.forEach(dy)}function Fc(e,t){e.blockedOn===t&&(e.blockedOn=null,Hf||(Hf=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,s_)))}var Gc=null;function fy(e){Gc!==e&&(Gc=e,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){Gc===e&&(Gc=null);for(var t=0;t<e.length;t+=3){var r=e[t],o=e[t+1],f=e[t+2];if(typeof o!="function"){if(qf(o||r)===null)continue;break}var g=ct(r);g!==null&&(e.splice(t,3),t-=3,Fd(g,{pending:!0,data:f,method:r.method,action:o},o,f))}}))}function Vi(e){function t(ne){return Fc(ne,e)}bs!==null&&Fc(bs,e),xs!==null&&Fc(xs,e),_s!==null&&Fc(_s,e),Jo.forEach(t),Ko.forEach(t);for(var r=0;r<Ss.length;r++){var o=Ss[r];o.blockedOn===e&&(o.blockedOn=null)}for(;0<Ss.length&&(r=Ss[0],r.blockedOn===null);)uy(r),r.blockedOn===null&&Ss.shift();if(r=(e.ownerDocument||e).$$reactFormReplay,r!=null)for(o=0;o<r.length;o+=3){var f=r[o],g=r[o+1],k=f[Mt]||null;if(typeof g=="function")k||fy(r);else if(k){var G=null;if(g&&g.hasAttribute("formAction")){if(f=g,k=g[Mt]||null)G=k.formAction;else if(qf(f)!==null)continue}else G=k.action;typeof G=="function"?r[o+1]=G:(r.splice(o,3),o-=3),fy(r)}}}function hy(){function e(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(k){return f=k})},focusReset:"manual",scroll:"manual"})}function t(){f!==null&&(f(),f=null),o||setTimeout(r,20)}function r(){if(!o&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var o=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){o=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),f!==null&&(f(),f=null)}}}function Pf(e){this._internalRoot=e}qc.prototype.render=Pf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(i(409));var r=t.current,o=_r();ay(r,o,e,t,null,null)},qc.prototype.unmount=Pf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;ay(e.current,2,null,e,null,null),Sc(),t[Or]=null}};function qc(e){this._internalRoot=e}qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cr();e={blockedOn:null,target:e,priority:t};for(var r=0;r<Ss.length&&t!==0&&t<Ss[r].priority;r++);Ss.splice(r,0,e),r===0&&uy(e)}};var py=a.version;if(py!=="19.2.3")throw Error(i(527,py,"19.2.3"));q.findDOMNode=function(e){var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(i(188)):(e=Object.keys(e).join(","),Error(i(268,e)));return e=p(t),e=e!==null?v(e):null,e=e===null?null:e.stateNode,e};var i_={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:$,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Hc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Hc.isDisabled&&Hc.supportsFiber)try{pt=Hc.inject(i_),xt=Hc}catch{}}return el.createRoot=function(e,t){if(!l(e))throw Error(i(299));var r=!1,o="",f=_m,g=Sm,k=Em;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(o=t.identifierPrefix),t.onUncaughtError!==void 0&&(f=t.onUncaughtError),t.onCaughtError!==void 0&&(g=t.onCaughtError),t.onRecoverableError!==void 0&&(k=t.onRecoverableError)),t=ny(e,1,!1,null,null,r,o,null,f,g,k,hy),e[Or]=t.current,Tf(e),new Pf(t)},el.hydrateRoot=function(e,t,r){if(!l(e))throw Error(i(299));var o=!1,f="",g=_m,k=Sm,G=Em,ne=null;return r!=null&&(r.unstable_strictMode===!0&&(o=!0),r.identifierPrefix!==void 0&&(f=r.identifierPrefix),r.onUncaughtError!==void 0&&(g=r.onUncaughtError),r.onCaughtError!==void 0&&(k=r.onCaughtError),r.onRecoverableError!==void 0&&(G=r.onRecoverableError),r.formState!==void 0&&(ne=r.formState)),t=ny(e,1,!0,t,r??null,o,f,ne,g,k,G,hy),t.context=ry(null),r=t.current,o=_r(),o=xn(o),f=os(o),f.callback=null,ls(r,f,o),r=o,t.current.lanes=r,fr(t,r),ua(t),e[Or]=t.current,Tf(e),new qc(t)},el.version="19.2.3",el}var wy;function y_(){if(wy)return $f.exports;wy=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(a){console.error(a)}}return n(),$f.exports=g_(),$f.exports}var v_=y_();const b_=io(v_),mb=H.createContext(void 0),Kf=()=>window.location.hash.startsWith("#/")?window.location.hash.substring(1):"/",x_=({children:n})=>{const[a,s]=H.useState(Kf()),i=H.useRef([Kf()]),[l,c]=H.useState(1),h=H.useCallback(()=>{const v=Kf();s(v);const x=i.current,T=x[x.length-1],_=x[x.length-2];let E=x;v===_?E=x.slice(0,-1):v!==T&&(E=[...x,v]),i.current=E,c(E.length)},[]);H.useEffect(()=>(window.addEventListener("hashchange",h),()=>{window.removeEventListener("hashchange",h)}),[h]);const d=H.useCallback((v,x)=>{const T=`#${v}`;if(x!=null&&x.replace){const _=i.current;if(_.length>0){const E=new URL(window.location.href);E.hash=T,window.location.replace(E.toString());const S=[..._];S[S.length-1]=v,i.current=S;return}}window.location.hash=T},[]),m=H.useCallback(()=>{const v=i.current;if(v.length>1){const x=v[v.length-2];window.location.hash=`#${x}`}else d("/")},[d]),p={path:a,navigate:d,goBack:m,canGoBack:l>1};return u.jsx(mb.Provider,{value:p,children:n})},Rs=()=>{const n=H.useContext(mb);if(n===void 0)throw new Error("useRouter must be used within a RouterProvider");return n},Ye=({children:n,variant:a="primary",size:s="md",className:i="",...l})=>{const c="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-background disabled:opacity-50 disabled:pointer-events-none",h={primary:"bg-primary text-on-primary hover:bg-primary-hover focus:ring-primary",secondary:"bg-surface text-text border border-border hover:bg-border/20 focus:ring-primary",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-text-muted hover:bg-border/50 hover:text-text focus:ring-primary"},d={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return u.jsx("button",{className:`${c} ${h[a]} ${d[s]} ${i}`,...l,children:n})},_h={plus:u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"upload-cloud":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"}),u.jsx("polyline",{points:"16 16 12 12 8 16"}),u.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"})]}),x:u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),u.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"chevron-left":u.jsx(u.Fragment,{children:u.jsx("polyline",{points:"15 18 9 12 15 6"})}),"trash-2":u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"3 6 5 6 21 6"}),u.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),u.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),u.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"check-circle":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),u.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"x-circle":u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),u.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),download:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),u.jsx("polyline",{points:"7 10 12 15 17 10"}),u.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),laptop:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9h16z"}),u.jsx("rect",{x:"2",y:"17",width:"20",height:"4",rx:"1"})]}),menu:u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),edit:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),u.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),save:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),u.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),u.jsx("polyline",{points:"7 3 7 8 15 8"})]}),sun:u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"5"}),u.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),u.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),u.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),u.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),u.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),u.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),u.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),u.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),moon:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),code:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"16 18 22 12 16 6"}),u.jsx("polyline",{points:"8 6 2 12 8 18"})]}),"refresh-ccw":u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"1 4 1 10 7 10"}),u.jsx("polyline",{points:"23 20 23 14 17 14"}),u.jsx("path",{d:"M20.49 9A9 9 0 0 0 7.2 6.51"}),u.jsx("path",{d:"M3.51 15A9 9 0 0 0 16.8 17.49"})]}),broom:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),settings:u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"3"}),u.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),info:u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),u.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"chevron-down":u.jsx(u.Fragment,{children:u.jsx("polyline",{points:"6 9 12 15 18 9"})}),eye:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),u.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"eye-off":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),zap:u.jsx(u.Fragment,{children:u.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"help-circle":u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"10"}),u.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),u.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),google:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M17.64 9.2c0-.63-.06-1.25-.16-1.84H9v3.48h4.84c-.2 1.12-.84 2.08-1.74 2.71v2.26h2.92c1.7-1.56 2.68-3.88 2.68-6.61z"}),u.jsx("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.92-2.26c-.8.54-1.82.86-3.04.86-2.34 0-4.32-1.58-5.04-3.7H1v2.34C2.64 16.32 5.57 18 9 18z"}),u.jsx("path",{d:"M3.96 10.71c-.18-.54-.28-1.12-.28-1.71s.1-1.17.28-1.71V4.96H1c-.64 1.28-1 2.74-1 4.34s.36 3.06 1 4.34l2.96-2.34z"}),u.jsx("path",{d:"M9 3.6c1.32 0 2.52.45 3.44 1.34l2.6-2.6C13.46.8 11.43 0 9 0 5.57 0 2.64 1.68 1 4.34l2.96 2.34C4.68 4.54 6.66 3.6 9 3.6z"})]}),folder:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),"folder-plus":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),u.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),u.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),"folder-edit":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),u.jsx("path",{d:"M14 13.5l2 2-4 4-2-2 4-4zm-1.5 2.5l2-2"})]}),list:u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),u.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),u.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),u.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),u.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),u.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),lock:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),unlock:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),u.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),archive:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),u.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),u.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),unarchive:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),u.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),u.jsx("polyline",{points:"10 13 12 11 14 13"}),u.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"})]}),"arrow-down":u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),u.jsx("polyline",{points:"19 12 12 19 5 12"})]}),monitor:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),u.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),u.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"more-vertical":u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"12",cy:"12",r:"1"}),u.jsx("circle",{cx:"12",cy:"5",r:"1"}),u.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),search:u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"11",cy:"11",r:"8"}),u.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),filter:u.jsx(u.Fragment,{children:u.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),layers:u.jsxs(u.Fragment,{children:[u.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),u.jsx("polyline",{points:"2 17 12 22 22 17"}),u.jsx("polyline",{points:"2 12 12 17 22 12"})]}),terminal:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"4 17 10 11 4 5"}),u.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]}),"trending-up":u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"23 6 13.5 15.5 8.5 10.5 1 18"}),u.jsx("polyline",{points:"17 6 23 6 23 12"})]}),"grip-vertical":u.jsxs(u.Fragment,{children:[u.jsx("circle",{cx:"9",cy:"12",r:"1"}),u.jsx("circle",{cx:"9",cy:"5",r:"1"}),u.jsx("circle",{cx:"9",cy:"19",r:"1"}),u.jsx("circle",{cx:"15",cy:"12",r:"1"}),u.jsx("circle",{cx:"15",cy:"5",r:"1"}),u.jsx("circle",{cx:"15",cy:"19",r:"1"})]}),repeat:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"17 1 21 5 17 9"}),u.jsx("path",{d:"M3 11V9a4 4 0 0 1 4-4h14"}),u.jsx("polyline",{points:"7 23 3 19 7 15"}),u.jsx("path",{d:"M21 13v2a4 4 0 0 1-4 4H3"})]}),bot:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"5",y:"10",width:"14",height:"10",rx:"2"}),u.jsx("circle",{cx:"8.5",cy:"15",r:"1"}),u.jsx("circle",{cx:"15.5",cy:"15",r:"1"}),u.jsx("path",{d:"M9 10V4m6 6V4"}),u.jsx("line",{x1:"9",y1:"4",x2:"15",y2:"4"})]}),"book-open":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),u.jsx("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"})]}),"wifi-off":u.jsxs(u.Fragment,{children:[u.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"}),u.jsx("path",{d:"M16.72 11.06A10.94 10.94 0 0 1 19 12.55"}),u.jsx("path",{d:"M5 12.55a10.94 10.94 0 0 1 5.17-2.39"}),u.jsx("path",{d:"M10.71 5.05A16 16 0 0 1 22.58 9"}),u.jsx("path",{d:"M1.42 9a15.91 15.91 0 0 1 4.7-2.88"}),u.jsx("path",{d:"M8.53 16.11a6 6 0 0 1 6.95 0"}),u.jsx("line",{x1:"12",y1:"20",x2:"12.01",y2:"20"})]}),link:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.72"}),u.jsx("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.72-1.72"})]}),"file-text":u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),u.jsx("polyline",{points:"14 2 14 8 20 8"}),u.jsx("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),u.jsx("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),u.jsx("polyline",{points:"10 9 9 9 8 9"})]}),"volume-2":u.jsxs(u.Fragment,{children:[u.jsx("polygon",{points:"11 5 6 9 2 9 2 15 6 15 11 19 11 5"}),u.jsx("path",{d:"M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"})]}),mic:u.jsxs(u.Fragment,{children:[u.jsx("path",{d:"M12 1a3 3 0 0 0-3 3v8a3 3 0 0 0 6 0V4a3 3 0 0 0-3-3z"}),u.jsx("path",{d:"M19 10v2a7 7 0 0 1-14 0v-2"}),u.jsx("line",{x1:"12",y1:"19",x2:"12",y2:"23"}),u.jsx("line",{x1:"8",y1:"23",x2:"16",y2:"23"})]}),keyboard:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",ry:"2"}),u.jsx("line",{x1:"6",y1:"12",x2:"6",y2:"12"}),u.jsx("line",{x1:"10",y1:"12",x2:"10",y2:"12"}),u.jsx("line",{x1:"14",y1:"12",x2:"14",y2:"12"}),u.jsx("line",{x1:"18",y1:"12",x2:"18",y2:"12"}),u.jsx("line",{x1:"6",y1:"16",x2:"6",y2:"16"}),u.jsx("line",{x1:"10",y1:"16",x2:"10",y2:"16"}),u.jsx("line",{x1:"14",y1:"16",x2:"14",y2:"16"}),u.jsx("line",{x1:"18",y1:"16",x2:"18",y2:"16"}),u.jsx("line",{x1:"6",y1:"8",x2:"6",y2:"8"}),u.jsx("line",{x1:"10",y1:"8",x2:"10",y2:"8"}),u.jsx("line",{x1:"14",y1:"8",x2:"14",y2:"8"}),u.jsx("line",{x1:"18",y1:"8",x2:"18",y2:"8"})]}),type:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"4 7 4 4 20 4 20 7"}),u.jsx("line",{x1:"9",y1:"20",x2:"15",y2:"20"}),u.jsx("line",{x1:"12",y1:"4",x2:"12",y2:"20"})]}),maximize:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M8 3H5a2 2 0 0 0-2 2v3m18 0V5a2 2 0 0 0-2-2h-3m0 18h3a2 2 0 0 0 2-2v-3M3 16v3a2 2 0 0 0 2 2h3"})}),minimize:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}),calendar:u.jsxs(u.Fragment,{children:[u.jsx("rect",{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}),u.jsx("line",{x1:"16",y1:"2",x2:"16",y2:"6"}),u.jsx("line",{x1:"8",y1:"2",x2:"8",y2:"6"}),u.jsx("line",{x1:"3",y1:"10",x2:"21",y2:"10"})]}),printer:u.jsxs(u.Fragment,{children:[u.jsx("polyline",{points:"6 9 6 2 18 2 18 9"}),u.jsx("path",{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}),u.jsx("rect",{x:"6",y:"14",width:"12",height:"8"})]}),columns:u.jsx(u.Fragment,{children:u.jsx("path",{d:"M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18"})})},__=Object.keys(_h),Fe=({name:n,className:a="w-6 h-6",...s})=>u.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:`${a} pointer-events-none`,...s,children:_h[n]||_h["help-circle"]}),Wr=({href:n,children:a,passAs:s,...i})=>{const{navigate:l}=Rs(),c=d=>{d.currentTarget.tagName==="A"&&(d.metaKey||d.ctrlKey)||(d.preventDefault(),i.onClick&&i.onClick(d),l(n))},h=`#${n}`;return s?u.jsx(s,{...i,onClick:c,children:a}):u.jsx("a",{...i,href:h,onClick:c,children:a})},S_=({onOpenMenu:n,onOpenCommandPalette:a,activeDeck:s,isVisible:i})=>{const{path:l,goBack:c,canGoBack:h}=Rs(),[d]=l.split("?"),m=d==="/";let p;if(m)p=u.jsx(Wr,{href:"/",className:"no-underline",children:u.jsx("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"CogniFlow"})});else{let v="Back";s?v=s.name:d==="/study/general"?v="General Study":d==="/settings"&&(v="Settings"),p=u.jsxs(Ye,{variant:"ghost",onClick:c,className:"flex items-center space-x-2 -ml-3 min-w-0","aria-label":"Go Back",children:[u.jsx(Fe,{name:"chevron-left"}),u.jsx("span",{className:"truncate",children:v})]})}return u.jsx("header",{className:`bg-surface/80 backdrop-blur-sm fixed top-0 left-0 right-0 z-20 border-b border-border transition-transform duration-300 ease-in-out ${i?"translate-y-0":"-translate-y-full"}`,children:u.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[u.jsx("div",{className:"flex items-center flex-1 min-w-0",children:p}),u.jsxs("div",{className:"flex items-center space-x-1",children:[u.jsx(Ye,{variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Open command palette",children:u.jsx(Fe,{name:"search"})}),u.jsx(Ye,{variant:"ghost",onClick:n,className:"p-1 h-auto","aria-label":"Open menu",children:u.jsx(Fe,{name:"menu"})})]})]})})},E_='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',On=(n,a)=>{const s=H.useRef([]);H.useEffect(()=>{if(a&&n.current){s.current=Array.from(n.current.querySelectorAll(E_));const i=s.current[0];i&&setTimeout(()=>i.focus(),100);const l=c=>{var m;if(c.key!=="Tab"||!((m=n.current)!=null&&m.contains(document.activeElement)))return;const h=s.current[0],d=s.current[s.current.length-1];c.shiftKey?document.activeElement===h&&(c.preventDefault(),d==null||d.focus()):document.activeElement===d&&(c.preventDefault(),h==null||h.focus())};return document.addEventListener("keydown",l),()=>{document.removeEventListener("keydown",l)}}},[a,n])},gb=H.createContext(void 0),ti=(n,a)=>{if(typeof window>"u")return a;try{const s=window.localStorage.getItem(n);return s?JSON.parse(s):a}catch(s){return console.error(`Error reading ${n} from localStorage`,s),a}},w_=()=>{if(typeof window>"u")return!1;try{const n=window.localStorage.getItem("cogniflow-aiFeaturesEnabled");return n!==null?JSON.parse(n)===!0:!!(window.location.origin.endsWith("aistudio.google.com")||window.location.origin.endsWith("scf.usercontent.goog"))}catch(n){return console.error("Error reading cogniflow-aiFeaturesEnabled from localStorage",n),!1}},T_=({children:n})=>{const[a,s]=H.useState(()=>ti("cogniflow-disableAnimations",!1)),[i,l]=H.useState(()=>ti("cogniflow-hapticsEnabled",!0)),[c,h]=H.useState(w_),[d,m]=H.useState(()=>ti("cogniflow-backupEnabled",!0)),[p,v]=H.useState(()=>{try{return window.localStorage.getItem("cogniflow-backupApiKey")||"qRt+gU/57GHKhxTZeRnRi+dfT274iSkKKq2UnTr9Bxs="}catch{return"qRt+gU/57GHKhxTZeRnRi+dfT274iSkKKq2UnTr9Bxs="}}),[x,T]=H.useState(()=>{try{return window.localStorage.getItem("cogniflow-encryptionPassword")||""}catch{return""}}),[_,E]=H.useState(()=>ti("cogniflow-syncOnCellular",!0)),[S,w]=H.useState(()=>{try{return window.localStorage.getItem("cogniflow-fontFamily")||"sans"}catch{return"sans"}}),[O,I]=H.useState(()=>ti("cogniflow-notificationsEnabled",!1)),[U,z]=H.useState(()=>ti("cogniflow-leechThreshold",8)),[F,V]=H.useState(()=>ti("cogniflow-leechAction","suspend")),M=H.useCallback(W=>{s(W);try{window.localStorage.setItem("cogniflow-disableAnimations",JSON.stringify(W))}catch(me){console.error("Error writing animation setting to localStorage",me)}},[]),j=H.useCallback(W=>{l(W);try{window.localStorage.setItem("cogniflow-hapticsEnabled",JSON.stringify(W))}catch(me){console.error("Error writing haptics setting to localStorage",me)}},[]),R=H.useCallback(W=>{h(W);try{window.localStorage.setItem("cogniflow-aiFeaturesEnabled",JSON.stringify(W))}catch(me){console.error("Error writing AI features setting to localStorage",me)}},[]),P=H.useCallback(W=>{m(W);try{window.localStorage.setItem("cogniflow-backupEnabled",JSON.stringify(W))}catch(me){console.error("Error writing backup enabled setting to localStorage",me)}},[]),re=H.useCallback(W=>{v(W);try{window.localStorage.setItem("cogniflow-backupApiKey",W)}catch(me){console.error("Error writing backup API key to localStorage",me)}},[]),B=H.useCallback(W=>{T(W);try{W?window.localStorage.setItem("cogniflow-encryptionPassword",W):window.localStorage.removeItem("cogniflow-encryptionPassword")}catch(me){console.error("Error writing encryption password to localStorage",me)}},[]),X=H.useCallback(W=>{E(W);try{window.localStorage.setItem("cogniflow-syncOnCellular",JSON.stringify(W))}catch(me){console.error("Error writing syncOnCellular setting to localStorage",me)}},[]),C=H.useCallback(W=>{w(W);try{window.localStorage.setItem("cogniflow-fontFamily",W)}catch(me){console.error("Error writing fontFamily setting to localStorage",me)}},[]),ie=H.useCallback(W=>{I(W);try{window.localStorage.setItem("cogniflow-notificationsEnabled",JSON.stringify(W)),W&&"Notification"in window&&Notification.permission!=="granted"&&Notification.requestPermission().then(me=>{me!=="granted"&&(I(!1),window.localStorage.setItem("cogniflow-notificationsEnabled",JSON.stringify(!1)))})}catch(me){console.error("Error writing notifications setting to localStorage",me)}},[]),$=H.useCallback(W=>{z(W);try{window.localStorage.setItem("cogniflow-leechThreshold",JSON.stringify(W))}catch(me){console.error("Error writing leechThreshold to localStorage",me)}},[]),q=H.useCallback(W=>{V(W);try{window.localStorage.setItem("cogniflow-leechAction",JSON.stringify(W))}catch(me){console.error("Error writing leechAction to localStorage",me)}},[]),se={disableAnimations:a,setDisableAnimations:M,hapticsEnabled:i,setHapticsEnabled:j,aiFeaturesEnabled:c,setAiFeaturesEnabled:R,backupEnabled:d,setBackupEnabled:P,backupApiKey:p,setBackupApiKey:re,encryptionPassword:x,setEncryptionPassword:B,syncOnCellular:_,setSyncOnCellular:X,fontFamily:S,setFontFamily:C,notificationsEnabled:O,setNotificationsEnabled:ie,leechThreshold:U,setLeechThreshold:$,leechAction:F,setLeechAction:q};return u.jsx(gb.Provider,{value:se,children:n})},js=()=>{const n=H.useContext(gb);if(n===void 0)throw new Error("useSettings must be used within a SettingsProvider");return n},A_=({isOpen:n,onClose:a,onImport:s,onCreateSeries:i,onGenerateAI:l,onInstall:c})=>{const h=H.useRef(null),{aiFeaturesEnabled:d}=js();return On(h,n),H.useEffect(()=>{const m=p=>{p.key==="Escape"&&a()};return n&&document.addEventListener("keydown",m),()=>{document.removeEventListener("keydown",m)}},[n,a]),u.jsxs(u.Fragment,{children:[u.jsx("div",{className:`fixed inset-0 bg-black bg-opacity-60 z-50 transition-opacity duration-300 ${n?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:a,"aria-hidden":"true"}),u.jsx("div",{ref:h,className:`fixed top-0 right-0 h-full w-full max-w-xs z-[51] transform transition-transform duration-300 ease-in-out ${n?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"sidebar-title",children:u.jsxs("div",{className:"bg-surface shadow-xl h-full flex flex-col",children:[u.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-border",children:[u.jsx("h2",{id:"sidebar-title",className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Menu"}),u.jsx(Ye,{variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Close menu",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("nav",{className:"flex-grow p-4 space-y-2",children:[u.jsxs(Wr,{href:"/",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"laptop",className:"w-6 h-6 mr-3"})," Home"]}),u.jsxs(Wr,{href:"/series",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"layers",className:"w-6 h-6 mr-3"})," Series"]}),u.jsxs(Wr,{href:"/decks",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"folder",className:"w-6 h-6 mr-3"})," Decks"]}),u.jsxs(Wr,{href:"/progress",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"trending-up",className:"w-6 h-6 mr-3"}),"Progress"]}),u.jsxs(Wr,{href:"/archive",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"archive",className:"w-6 h-6 mr-3"}),"Archive"]}),u.jsxs(Wr,{href:"/trash",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"trash-2",className:"w-6 h-6 mr-3"}),"Trash"]}),u.jsxs(Wr,{href:"/settings",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"settings",className:"w-6 h-6 mr-3"}),"Settings"]}),u.jsxs(Wr,{href:"/instructions/json",onClick:a,className:"flex items-center px-3 py-2 text-text rounded-md hover:bg-border/30 text-lg",children:[u.jsx(Fe,{name:"help-circle",className:"w-6 h-6 mr-3"}),"JSON Guide"]})]}),u.jsxs("div",{className:"p-4 border-t border-border space-y-2",children:[d&&u.jsxs(Ye,{variant:"primary",onClick:l,className:"w-full",children:[u.jsx(Fe,{name:"zap",className:"w-5 h-5 mr-2"}),"Generate with AI"]}),u.jsxs(Ye,{variant:"secondary",onClick:i,className:"w-full",children:[u.jsx(Fe,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]}),u.jsxs(Ye,{variant:"secondary",onClick:s,className:"w-full",children:[u.jsx(Fe,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import Deck"]}),c&&u.jsxs(Ye,{variant:"secondary",onClick:c,className:"w-full",children:[u.jsx(Fe,{name:"download",className:"w-5 h-5 mr-2"}),"Install App"]})]})]})})]})},k_="modulepreload",N_=function(n){return"/CogniFlow/"+n},Ty={},kr=function(a,s,i){let l=Promise.resolve();if(s&&s.length>0){let h=function(p){return Promise.all(p.map(v=>Promise.resolve(v).then(x=>({status:"fulfilled",value:x}),x=>({status:"rejected",reason:x}))))};document.getElementsByTagName("link");const d=document.querySelector("meta[property=csp-nonce]"),m=(d==null?void 0:d.nonce)||(d==null?void 0:d.getAttribute("nonce"));l=h(s.map(p=>{if(p=N_(p),p in Ty)return;Ty[p]=!0;const v=p.endsWith(".css"),x=v?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${p}"]${x}`))return;const T=document.createElement("link");if(T.rel=v?"stylesheet":k_,v||(T.as="script"),T.crossOrigin="",T.href=p,m&&T.setAttribute("nonce",m),document.head.appendChild(T),v)return new Promise((_,E)=>{T.addEventListener("load",_),T.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${p}`)))})}))}function c(h){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=h,window.dispatchEvent(d),!d.defaultPrevented)throw h}return l.then(h=>{for(const d of h||[])d.status==="rejected"&&c(d.reason);return a().catch(c)})};var Ue=(n=>(n.Flashcard="flashcard",n.Quiz="quiz",n.Learning="learning",n))(Ue||{}),Sr=(n=>(n[n.Again=1]="Again",n[n.Hard=2]="Hard",n[n.Good=3]="Good",n[n.Easy=4]="Easy",n))(Sr||{}),Uh=(n=>(n.NO_ACTION="NO_ACTION",n.CREATE_DECK="CREATE_DECK",n.RENAME_DECK="RENAME_DECK",n.MOVE_DECK_TO_FOLDER="MOVE_DECK_TO_FOLDER",n.DELETE_DECK="DELETE_DECK",n.CREATE_FOLDER="CREATE_FOLDER",n.RENAME_FOLDER="RENAME_FOLDER",n.DELETE_FOLDER="DELETE_FOLDER",n.EXPAND_SERIES_ADD_LEVELS="EXPAND_SERIES_ADD_LEVELS",n.EXPAND_SERIES_ADD_DECKS="EXPAND_SERIES_ADD_DECKS",n.GENERATE_QUESTIONS_FOR_DECK="GENERATE_QUESTIONS_FOR_DECK",n))(Uh||{});const D_={},Ay=n=>{let a;const s=new Set,i=(v,x)=>{const T=typeof v=="function"?v(a):v;if(!Object.is(T,a)){const _=a;a=x??(typeof T!="object"||T===null)?T:Object.assign({},a,T),s.forEach(E=>E(a,_))}},l=()=>a,m={setState:i,getState:l,getInitialState:()=>p,subscribe:v=>(s.add(v),()=>s.delete(v)),destroy:()=>{(D_?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),s.clear()}},p=a=n(i,l,m);return m},C_=n=>n?Ay(n):Ay;var Xf={exports:{}},Wf={},eh={exports:{}},th={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ky;function O_(){if(ky)return th;ky=1;var n=Nl();function a(x,T){return x===T&&(x!==0||1/x===1/T)||x!==x&&T!==T}var s=typeof Object.is=="function"?Object.is:a,i=n.useState,l=n.useEffect,c=n.useLayoutEffect,h=n.useDebugValue;function d(x,T){var _=T(),E=i({inst:{value:_,getSnapshot:T}}),S=E[0].inst,w=E[1];return c(function(){S.value=_,S.getSnapshot=T,m(S)&&w({inst:S})},[x,_,T]),l(function(){return m(S)&&w({inst:S}),x(function(){m(S)&&w({inst:S})})},[x]),h(_),_}function m(x){var T=x.getSnapshot;x=x.value;try{var _=T();return!s(x,_)}catch{return!0}}function p(x,T){return T()}var v=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:d;return th.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:v,th}var Ny;function R_(){return Ny||(Ny=1,eh.exports=O_()),eh.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dy;function j_(){if(Dy)return Wf;Dy=1;var n=Nl(),a=R_();function s(p,v){return p===v&&(p!==0||1/p===1/v)||p!==p&&v!==v}var i=typeof Object.is=="function"?Object.is:s,l=a.useSyncExternalStore,c=n.useRef,h=n.useEffect,d=n.useMemo,m=n.useDebugValue;return Wf.useSyncExternalStoreWithSelector=function(p,v,x,T,_){var E=c(null);if(E.current===null){var S={hasValue:!1,value:null};E.current=S}else S=E.current;E=d(function(){function O(V){if(!I){if(I=!0,U=V,V=T(V),_!==void 0&&S.hasValue){var M=S.value;if(_(M,V))return z=M}return z=V}if(M=z,i(U,V))return M;var j=T(V);return _!==void 0&&_(M,j)?M:(U=V,z=j)}var I=!1,U,z,F=x===void 0?null:x;return[function(){return O(v())},F===null?void 0:function(){return O(F())}]},[v,x,T,_]);var w=l(p,E[0],E[1]);return h(function(){S.hasValue=!0,S.value=w},[w]),m(w),w},Wf}var Cy;function I_(){return Cy||(Cy=1,Xf.exports=j_()),Xf.exports}var M_=I_();const U_=io(M_),yb={},{useDebugValue:L_}=Wi,{useSyncExternalStoreWithSelector:z_}=U_;let Oy=!1;const B_=n=>n;function F_(n,a=B_,s){(yb?"production":void 0)!=="production"&&s&&!Oy&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),Oy=!0);const i=z_(n.subscribe,n.getState,n.getServerState||n.getInitialState,a,s);return L_(i),i}const G_=n=>{(yb?"production":void 0)!=="production"&&typeof n!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const a=typeof n=="function"?C_(n):n,s=(i,l)=>F_(a,i,l);return Object.assign(s,a),s},q_=n=>G_;function H_(n,a){var i,l;const s={...n,lastModified:Date.now()};switch(a.type){case"SET_LOADING":return{...n,isLoading:a.payload};case"SET_SERIES_PROGRESS":return{...n,seriesProgress:a.payload};case"SET_LEARNING_PROGRESS":return{...n,learningProgress:a.payload};case"UPDATE_LEARNING_PROGRESS":return{...n,learningProgress:{...n.learningProgress,[a.payload.deckId]:a.payload}};case"LOAD_DATA":{const c={};a.payload.decks.forEach(m=>c[m.id]=m);const h={};a.payload.folders.forEach(m=>h[m.id]=m);const d={};return a.payload.deckSeries.forEach(m=>d[m.id]=m),{...n,decks:c,folders:h,deckSeries:d,isLoading:!1,lastModified:null}}case"SET_AI_GENERATION_STATUS":return{...n,aiGenerationStatus:{...n.aiGenerationStatus,...a.payload}};case"ADD_AI_TASK_TO_QUEUE":{const c=Array.isArray(n.aiGenerationStatus.queue)?n.aiGenerationStatus.queue:[];return{...n,aiGenerationStatus:{...n.aiGenerationStatus,queue:[...c,a.payload]}}}case"START_NEXT_AI_TASK":{const h=(Array.isArray(n.aiGenerationStatus.queue)?n.aiGenerationStatus.queue:[]).slice(1),{task:d,abortController:m}=a.payload;return{...n,aiGenerationStatus:{...n.aiGenerationStatus,queue:h,currentTask:{...d,abortController:m},isGenerating:!0}}}case"UPDATE_CURRENT_AI_TASK_STATUS":{if(!n.aiGenerationStatus.currentTask)return n;const{statusText:c,deckId:h,seriesId:d}=a.payload,m={...n.aiGenerationStatus.currentTask,statusText:c,deckId:h,seriesId:d};return{...n,aiGenerationStatus:{...n.aiGenerationStatus,currentTask:m}}}case"FINISH_CURRENT_AI_TASK":return{...n,aiGenerationStatus:{...n.aiGenerationStatus,currentTask:null,isGenerating:!1}};case"CANCEL_AI_TASK":if((i=a.payload)!=null&&i.taskId){const c=Array.isArray(n.aiGenerationStatus.queue)?n.aiGenerationStatus.queue:[];return{...n,aiGenerationStatus:{...n.aiGenerationStatus,queue:c.filter(h=>h.id!==a.payload.taskId)}}}else return(l=n.aiGenerationStatus.currentTask)==null||l.abortController.abort(),{...n,aiGenerationStatus:{...n.aiGenerationStatus,currentTask:null,isGenerating:!1}};case"SET_AI_CHAT_HISTORY":return{...n,aiChatHistory:a.payload};case"ADD_DECKS":{const c={...n.decks};return a.payload.forEach(h=>c[h.id]=h),{...s,decks:c}}case"RESTORE_DATA":{const{decks:c,folders:h,deckSeries:d}=a.payload,m={};c.forEach(x=>m[x.id]=x);const p={};h.forEach(x=>p[x.id]=x);const v={};return d.forEach(x=>v[x.id]=x),{...s,decks:m,folders:p,deckSeries:v}}case"DELETE_DECK":{const c={...n.decks};delete c[a.payload];const h={...n.deckSeries};return Object.keys(h).forEach(d=>{const m=h[d];m.levels&&(h[d]={...m,levels:m.levels.map(p=>({...p,deckIds:(p.deckIds||[]).filter(v=>v!==a.payload)}))})}),{...s,decks:c,deckSeries:h}}case"UPDATE_DECK":return{...s,decks:{...n.decks,[a.payload.id]:a.payload}};case"BULK_UPDATE_DECKS":{const c={...n.decks};return a.payload.forEach(h=>c[h.id]=h),{...s,decks:c}}case"ADD_FOLDER":return{...s,folders:{...n.folders,[a.payload.id]:a.payload}};case"ADD_FOLDERS":{const c={...n.folders};return a.payload.forEach(h=>c[h.id]=h),{...s,folders:c}}case"UPDATE_FOLDER":return{...s,folders:{...n.folders,[a.payload.id]:a.payload}};case"DELETE_FOLDER":{const c={...n.folders};delete c[a.payload];const h={...n.decks};return Object.values(h).forEach(d=>{d.folderId===a.payload&&(h[d.id]={...d,folderId:null})}),{...s,folders:c,decks:h}}case"ADD_SERIES":return{...s,deckSeries:{...n.deckSeries,[a.payload.id]:a.payload}};case"ADD_SERIES_WITH_DECKS":{const{series:c,decks:h}=a.payload,d={...n.decks};return h.forEach(m=>d[m.id]=m),{...s,decks:d,deckSeries:{...n.deckSeries,[c.id]:c}}}case"UPDATE_SERIES":return{...s,deckSeries:{...n.deckSeries,[a.payload.id]:a.payload}};case"DELETE_SERIES":{const c={...n.deckSeries};return delete c[a.payload],{...s,deckSeries:c}}default:return n}}const P_={decks:{},folders:{},deckSeries:{},seriesProgress:new Map,learningProgress:{},isLoading:!0,lastModified:null,aiGenerationStatus:{isGenerating:!1,statusText:null,generatingDeckId:null,generatingSeriesId:null,queue:[],currentTask:null},aiChatHistory:[]},tt=q_()(n=>({...P_,dispatch:a=>n(s=>H_(s,a))})),Y_=n=>{const a=new Date;a.setHours(23,59,59,999);const s=(n.type===Ue.Quiz||n.type==="learning"?n.questions:n.cards)||[];return Array.isArray(s)?s.filter(i=>!i.suspended&&new Date(i.dueDate).getTime()<=a.getTime()).length:0},Lh=()=>tt(n=>Object.values(n.decks)),V_=()=>tt(n=>Object.values(n.folders)),zh=()=>tt(n=>Object.values(n.deckSeries)),$_=()=>tt(n=>Object.values(n.deckSeries).filter(a=>!a.archived&&!a.deletedAt)),Z_=()=>tt(n=>{const a=new Set;return Object.values(n.deckSeries).forEach(s=>{(s.levels||[]).forEach(i=>((i==null?void 0:i.deckIds)||[]).forEach(l=>a.add(l)))}),Object.values(n.decks).filter(s=>!s.archived&&!s.deletedAt&&!a.has(s.id))}),Q_=()=>tt(n=>{const a=new Set;return Object.values(n.deckSeries).forEach(s=>{var i;if(!s.archived&&!s.deletedAt){const l=((i=n.seriesProgress.get(s.id))==null?void 0:i.size)||0;let c=0;(s.levels||[]).filter(Boolean).forEach(h=>{(h.deckIds||[]).forEach(d=>{c<=l&&a.add(d),c++})})}}),Object.values(n.decks).reduce((s,i)=>{if(i.archived||i.deletedAt)return s;if(i.type===Ue.Learning){const c=n.learningProgress[i.id];if(c&&c.unlockedQuestionIds){const h=new Set(c.unlockedQuestionIds),m=(i.questions||[]).filter(p=>h.has(p.id)&&!p.suspended&&new Date(p.dueDate).getTime()<=new Date().setHours(23,59,59,999)).length;return s+m}}return(i.type===Ue.Quiz||i.type===Ue.Learning)&&Object.values(n.deckSeries).some(c=>(c.levels||[]).some(h=>{var d;return(d=h.deckIds)==null?void 0:d.includes(i.id)}))&&!a.has(i.id)?s:s+Y_(i)},0)}),vb=H.createContext(null),Tu=()=>{const n=H.useContext(vb);if(!n)throw new Error("useData must be used within a DataManagementProvider");return n},J_=({children:n,value:a})=>u.jsx(vb.Provider,{value:a,children:n}),Ry=(n,a)=>{if(!n)return"";const s=String(n);return s.length>a?s.substring(0,a)+"...":s},K_=({items:n})=>{if(!n||n.length<=1)return null;const a=s=>u.jsxs(u.Fragment,{children:[u.jsx("span",{className:"sm:hidden",title:s,children:Ry(s,10)}),u.jsx("span",{className:"hidden sm:inline",title:s,children:Ry(s,25)})]});return u.jsx("nav",{"aria-label":"Breadcrumb",className:"mb-6",children:u.jsx("ol",{className:"flex items-center space-x-2 text-sm text-text-muted flex-wrap",children:n.map((s,i)=>{const l=i===n.length-1;return u.jsxs("li",{className:"flex items-center",children:[i>0&&u.jsx(Fe,{name:"chevron-left",className:"w-4 h-4 rotate-180 mx-2 flex-shrink-0"}),l?u.jsx("span",{className:"font-semibold text-text","aria-current":"page",children:a(s.label)}):u.jsx(Wr,{href:s.href,className:"hover:underline hover:text-primary",children:a(s.label)})]},i)})})})},bb=H.createContext(void 0),Dl=()=>{const n=H.useContext(bb);if(!n)throw new Error("useModal must be used within a ModalProvider");return n},X_=({children:n})=>{const[a,s]=H.useState({type:null,payload:null}),i=H.useRef(null),l=H.useCallback((h,d={})=>{i.current=document.activeElement,s({type:h,payload:d})},[]),c=H.useCallback(()=>{s({type:null,payload:null}),setTimeout(()=>{var h;return(h=i.current)==null?void 0:h.focus()},100)},[]);return u.jsx(bb.Provider,{value:{modalType:a.type,modalPayload:a.payload,openModal:l,closeModal:c},children:n})},W_=({children:n})=>u.jsx("div",{className:"animate-fade-in-up",children:n}),on=({className:n="",variant:a="text",width:s,height:i})=>{const l="animate-pulse bg-gray-200 dark:bg-gray-700/50",c={text:"rounded h-4 w-full",circular:"rounded-full",rectangular:"rounded-md"},h={};return s&&(h.width=s),i&&(h.height=i),u.jsx("div",{className:`${l} ${c[a]} ${n}`,style:h,"aria-hidden":"true"})},jy=()=>u.jsxs("div",{className:"min-h-screen bg-background",children:[u.jsx("div",{className:"bg-surface/80 border-b border-border h-16 fixed top-0 left-0 right-0 z-20",children:u.jsxs("div",{className:"container mx-auto px-4 h-full flex items-center justify-between",children:[u.jsx(on,{width:120,height:24}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(on,{variant:"circular",width:32,height:32}),u.jsx(on,{variant:"circular",width:32,height:32})]})]})}),u.jsxs("main",{className:"container mx-auto px-4 pt-24 pb-20",children:[u.jsxs("div",{className:"mb-8 flex flex-wrap gap-4",children:[u.jsx(on,{variant:"rectangular",width:200,height:48,className:"rounded-lg"}),u.jsx(on,{variant:"rectangular",width:160,height:48,className:"rounded-lg"})]}),u.jsxs("div",{className:"mb-8",children:[u.jsxs("div",{className:"flex justify-between mb-4",children:[u.jsx(on,{width:150,height:32}),u.jsx(on,{width:80,height:32})]}),u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-4 border border-transparent h-48 flex flex-col justify-between",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx(on,{variant:"rectangular",width:40,height:40}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(on,{width:"70%",height:24}),u.jsx(on,{width:"90%",height:16}),u.jsx(on,{width:"60%",height:16})]})]}),u.jsxs("div",{className:"space-y-2 mt-4",children:[u.jsx(on,{variant:"rectangular",height:8,className:"rounded-full"}),u.jsx(on,{variant:"rectangular",height:8,className:"rounded-full"})]})]}),u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-4 border border-transparent h-48 flex flex-col justify-between",children:[u.jsxs("div",{className:"flex gap-4",children:[u.jsx(on,{variant:"rectangular",width:40,height:40}),u.jsxs("div",{className:"flex-1 space-y-2",children:[u.jsx(on,{width:"60%",height:24}),u.jsx(on,{width:"80%",height:16})]})]}),u.jsxs("div",{className:"space-y-2 mt-4",children:[u.jsx(on,{variant:"rectangular",height:8,className:"rounded-full"}),u.jsx(on,{variant:"rectangular",height:8,className:"rounded-full"})]})]})]})]}),u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between mb-4",children:[u.jsx(on,{width:150,height:32}),u.jsx(on,{width:80,height:32})]}),[1,2,3].map(n=>u.jsxs("div",{className:"bg-surface rounded-lg shadow-md p-4 flex justify-between items-center h-24",children:[u.jsxs("div",{className:"flex gap-4 items-center flex-1",children:[u.jsx(on,{variant:"circular",width:24,height:24}),u.jsxs("div",{className:"space-y-2 flex-1 max-w-md",children:[u.jsx(on,{width:"50%",height:20}),u.jsx(on,{width:"80%",height:14})]})]}),u.jsx(on,{variant:"rectangular",width:80,height:32,className:"rounded-md"})]},n))]})]})]}),tl=H.lazy(()=>kr(()=>import("./StudySession-BUB8rjfs.js"),__vite__mapDeps([0,1,2,3,4]))),eS=H.lazy(()=>kr(()=>import("./ReaderSession-BPbpVE6D.js"),__vite__mapDeps([5,3]))),tS=H.lazy(()=>kr(()=>import("./SettingsPage-DikTL5f4.js"),__vite__mapDeps([6,4])).then(n=>({default:n.SettingsPage}))),nS=H.lazy(()=>kr(()=>import("./DeckDetailsPage-CY4MDD4Y.js"),__vite__mapDeps([7,1,8]))),rS=H.lazy(()=>kr(()=>import("./JsonInstructionsPage-CGpQ5D7z.js"),[])),aS=H.lazy(()=>kr(()=>import("./SeriesOverviewPage-Bb4zR6eS.js"),__vite__mapDeps([9,10,1,8]))),sS=H.lazy(()=>kr(()=>import("./ArchivePage-kdO3pB4m.js"),[]).then(n=>({default:n.ArchivePage}))),iS=H.lazy(()=>kr(()=>import("./TrashPage-BUqI_s5J.js"),[])),oS=H.lazy(()=>kr(()=>import("./DashboardPage-Bcpa8kHm.js"),__vite__mapDeps([11,12,1,2,10]))),lS=H.lazy(()=>kr(()=>import("./AllDecksPage-DOqT_lSV.js"),__vite__mapDeps([13,10,1,14]))),cS=H.lazy(()=>kr(()=>import("./AllSeriesPage-CjIeV38q.js"),__vite__mapDeps([15,12,1,2,14]))),uS=H.lazy(()=>kr(()=>import("./ProgressPage-DpO-Y6jr.js"),[])),dS=H.lazy(()=>kr(()=>import("./DeckPrintView-B6K7iibe.js"),[])),fS=n=>{const{path:a,navigate:s}=Rs(),{activeDeck:i,activeSeries:l,generalStudyDeck:c}=n,{aiFeaturesEnabled:h}=js(),d=Tu(),[m]=a.split("?"),{openModal:p}=Dl(),v=U=>p("confirm",U),x=zh(),T=Z_(),_=$_(),E=Q_(),S=H.useMemo(()=>m.startsWith("/study/")||m.endsWith("/study")||m.endsWith("/cram")||m.endsWith("/study-reversed")||m.endsWith("/study-flip")||m.endsWith("/read"),[m]),w=m.endsWith("/print"),O=H.useMemo(()=>{if(w)return[];const U=[{label:"Home",href:"/"}],z=new URLSearchParams(window.location.hash.split("?")[1]);if(m==="/series")U.push({label:"Series"});else if(m.startsWith("/series/")&&l)U.push({label:"Series",href:"/series"}),U.push({label:l.name||"Series"});else if(m==="/decks")U.push({label:"Decks"});else if(m.startsWith("/decks/")&&i){let F=null;const V=z.get("seriesId");V&&(F=x.find(M=>M.id===V)),F||(F=x.find(M=>!M.deletedAt&&(M.levels||[]).some(j=>{var R;return(R=j.deckIds)==null?void 0:R.includes(i.id)}))),F?(U.push({label:"Series",href:"/series"}),U.push({label:F.name||"Series",href:`/series/${F.id}`})):U.push({label:"Decks",href:"/decks"}),U.push({label:i.name||"Deck"})}else m==="/settings"?U.push({label:"Settings"}):m==="/trash"?U.push({label:"Trash"}):m==="/archive"?U.push({label:"Archive"}):m==="/progress"?U.push({label:"Progress"}):m==="/instructions/json"&&U.push({label:"JSON Guide"});return U},[m,i,l,x,w]),I=()=>{if(m==="/settings")return u.jsx(tS,{onExport:d.handleExportData,onRestore:()=>d.openModal("restore"),onResetProgress:()=>d.openModal("resetProgress"),onFactoryReset:d.handleFactoryReset,onSync:n.onSync,onForceFetch:d.handleForceFetchFromServer,onForceUpload:d.handleForceUploadToServer,isSyncing:n.isSyncing,lastSyncStatus:n.lastSyncStatus,onManageServerBackups:()=>d.openModal("serverBackup"),onCreateServerBackup:d.handleCreateServerBackup,isGapiReady:n.isGapiReady,isGapiSignedIn:n.isGapiSignedIn,gapiUser:n.gapiUser,onGoogleSignIn:d.handleGoogleSignIn,onGoogleSignOut:d.handleGoogleSignOut,onBackupToDrive:d.handleBackupToDrive,onRestoreFromDrive:d.openRestoreFromDriveModal,onClearAppCache:d.handleClearAppCache,onClearCdnCache:d.handleClearCdnCache,onRevertLastFetch:d.handleRevertLastFetch});if(m==="/trash")return u.jsx(iS,{onRestoreDeck:d.handleRestoreDeck,onRestoreSeries:d.handleRestoreSeries,onDeleteDeckPermanently:d.handleDeleteDeckPermanently,onDeleteSeriesPermanently:d.handleDeleteSeriesPermanently,openConfirmModal:v});if(m==="/archive")return u.jsx(sS,{onUpdateDeck:d.handleUpdateDeck,onUpdateSeries:d.handleUpdateSeries,onDeleteDeck:d.handleDeleteDeck,onDeleteSeries:d.handleDeleteSeries,openConfirmModal:v});if(m==="/progress")return u.jsx(uS,{});if(m.startsWith("/series/")&&l)return u.jsx(aS,{series:l,sessionsToResume:n.sessionsToResume,onUpdateSeries:d.handleUpdateSeries,onDeleteSeries:d.handleDeleteSeries,onAddDeckToSeries:d.handleAddDeckToSeries,onUpdateDeck:d.handleUpdateDeck,onStartSeriesStudy:d.handleStartSeriesStudy,onUpdateLastOpened:d.updateLastOpenedSeries,openConfirmModal:v,onAiAddLevelsToSeries:d.handleAiAddLevelsToSeries,onAiAddDecksToLevel:d.handleAiAddDecksToLevel,handleGenerateQuestionsForEmptyDecksInSeries:d.handleGenerateQuestionsForEmptyDecksInSeries,handleGenerateQuestionsForDeck:d.handleGenerateQuestionsForDeck,onCancelAIGeneration:d.handleCancelAIGeneration,onExportSeries:d.handleExportSeries,onDeleteDeck:d.handleDeleteDeck,handleGenerateContentForLearningDeck:d.handleGenerateContentForLearningDeck,onGenerateDeckForLevel:d.handleOpenAIGenerationForSeriesLevel,onAutoExpandSeries:d.handleOpenAIAutoExpandSeries},l.id);if(m==="/study/general"){const U=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return c&&u.jsx(tl,{deck:c,seriesId:U,onSessionEnd:d.handleSessionEnd,onItemReviewed:d.handleItemReviewed,onUpdateLastOpened:()=>{},onStudyNextDeck:d.handleStudyNextDeckInSeries},"general-study")}if(m.startsWith("/decks/")&&m.endsWith("/cram")){if(!i)return null;const U=new URLSearchParams(window.location.hash.split("?")[1]),z=U.get("sort")||"random",F=U.get("limit")||"all";let V=((i.type===Ue.Flashcard?i.cards:i.questions)||[]).filter(R=>!R.suspended);if(z==="hardest"?V.sort((R,P)=>{const re=(P.lapses||0)-(R.lapses||0);return re!==0?re:(R.easeFactor||2.5)-(P.easeFactor||2.5)}):z==="newest"?V.reverse():z==="oldest"||V.sort(()=>Math.random()-.5),F!=="all"){const R=parseInt(F,10);isNaN(R)||(V=V.slice(0,R))}const M=i.type===Ue.Flashcard?{...i,name:`${i.name} (Cram)`,cards:V}:{...i,name:`${i.name} (Cram)`,questions:V},j=U.get("seriesId")||void 0;return u.jsx(tl,{deck:M,seriesId:j,onSessionEnd:d.handleSessionEnd,onItemReviewed:d.handleItemReviewed,onUpdateLastOpened:d.updateLastOpened,sessionKeySuffix:"_cram",onStudyNextDeck:d.handleStudyNextDeckInSeries},`${i.id}-cram`)}if(m.startsWith("/decks/")&&m.endsWith("/study-reversed")){if(!i||i.type!=="flashcard")return null;const U={...i,name:`${i.name} (Reversed)`,cards:(i.cards||[]).map(F=>({...F,front:F.back,back:F.front}))},z=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return u.jsx(tl,{deck:U,seriesId:z,onSessionEnd:d.handleSessionEnd,onItemReviewed:d.handleItemReviewed,onUpdateLastOpened:d.updateLastOpened,sessionKeySuffix:"_reversed",onStudyNextDeck:d.handleStudyNextDeckInSeries},`${i.id}-reversed`)}if(m.startsWith("/decks/")&&m.endsWith("/study-flip")){if(!i||i.type!=="quiz"&&i.type!=="learning")return null;const U=i,z=(U.questions||[]).filter(M=>!M.suspended).map(M=>{const j=(M.options||[]).find(P=>P.id===M.correctAnswerId),R=`<div class="text-left w-full"><p class="text-xl"><b>Answer:</b> ${(j==null?void 0:j.text)||"N/A"}</p><hr class="my-4"/><div class="prose prose-sm dark:prose-invert max-w-none">${M.detailedExplanation}</div></div>`;return{...M,front:M.questionText,back:R}}),F={...U,name:`${U.name} (Review)`,type:Ue.Flashcard,cards:z.sort(()=>Math.random()-.5)},V=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return u.jsx(tl,{deck:F,seriesId:V,onSessionEnd:d.handleSessionEnd,onItemReviewed:d.handleItemReviewed,onUpdateLastOpened:d.updateLastOpened,sessionKeySuffix:"_flip",onStudyNextDeck:d.handleStudyNextDeckInSeries},`${i.id}-flip`)}if(m.startsWith("/decks/")&&m.endsWith("/study")){const U=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return i&&u.jsx(tl,{deck:i,seriesId:U,onSessionEnd:d.handleSessionEnd,onItemReviewed:d.handleItemReviewed,onUpdateLastOpened:d.updateLastOpened,onStudyNextDeck:d.handleStudyNextDeckInSeries},i.id)}return m.startsWith("/decks/")&&m.endsWith("/read")?!i||i.type!==Ue.Learning?null:u.jsx(eS,{deck:i,onExit:()=>s(`/decks/${i.id}`),onPractice:()=>s(`/decks/${i.id}/study`)}):m.startsWith("/decks/")&&m.endsWith("/print")?i&&u.jsx(dS,{deck:i}):m.startsWith("/decks/")?i&&u.jsx(nS,{deck:i,sessionsToResume:n.sessionsToResume,onUpdateDeck:d.handleUpdateDeck,onDeleteDeck:d.handleDeleteDeck,onUpdateLastOpened:d.updateLastOpened,openConfirmModal:v,handleGenerateQuestionsForDeck:d.handleGenerateQuestionsForDeck,handleGenerateContentForLearningDeck:d.handleGenerateContentForLearningDeck,onCancelAIGeneration:d.handleCancelAIGeneration,onSaveLearningBlock:d.handleSaveLearningBlock,onDeleteLearningBlock:d.handleDeleteLearningBlock,onExportDeck:d.handleExportDeck,onRegenerateQuestion:d.handleRegenerateQuestion,onExpandText:d.handleExpandText,onGenerateAI:()=>d.handleOpenAIGenerationForDeck(i)},i.id):m==="/instructions/json"?u.jsx(rS,{}):m==="/decks"?u.jsx(lS,{sessionsToResume:n.sessionsToResume,sortPreference:n.sortPreference,onSortChange:n.setSortPreference,onUpdateLastOpened:d.updateLastOpened,onDeleteFolder:d.handleDeleteFolder,draggedDeckId:n.draggedDeckId,onDragStart:n.setDraggedDeckId,onDragEnd:()=>n.setDraggedDeckId(null),onMoveDeck:d.handleMoveDeck,openFolderIds:n.openFolderIds,onToggleFolder:n.onToggleFolder,onUpdateDeck:d.handleUpdateDeck,onDeleteDeck:d.handleDeleteDeck,openConfirmModal:v,onNewFolder:()=>d.openModal("folder",{folder:"new"}),onImportDecks:()=>d.openModal("import"),onCreateSampleDeck:d.handleCreateSampleDeck,handleSaveFolder:d.handleSaveFolder,handleGenerateQuestionsForDeck:d.handleGenerateQuestionsForDeck,handleGenerateContentForLearningDeck:d.handleGenerateContentForLearningDeck,onCancelAIGeneration:d.handleCancelAIGeneration}):m==="/series"?u.jsx(cS,{onStartSeriesStudy:d.handleStartSeriesStudy,onCreateNewSeries:()=>d.openModal("series",{series:"new"}),onCreateSampleSeries:d.handleCreateSampleSeries,onGenerateAI:()=>d.openModal("aiGeneration"),handleGenerateQuestionsForEmptyDecksInSeries:d.handleGenerateQuestionsForEmptyDecksInSeries,onCancelAIGeneration:d.handleCancelAIGeneration}):T.length>0||_.length>0?u.jsx(oS,{onGenerateAI:()=>d.openModal("aiGeneration"),totalDueQuestions:E,onStartGeneralStudy:d.handleStartGeneralStudy,sessionsToResume:n.sessionsToResume,onUpdateLastOpened:d.updateLastOpened,onUpdateDeck:d.handleUpdateDeck,onDeleteDeck:d.handleDeleteDeck,openConfirmModal:v,seriesProgress:tt.getState().seriesProgress,onStartSeriesStudy:d.handleStartSeriesStudy,handleGenerateQuestionsForDeck:d.handleGenerateQuestionsForDeck,handleGenerateContentForLearningDeck:d.handleGenerateContentForLearningDeck,handleGenerateQuestionsForEmptyDecksInSeries:d.handleGenerateQuestionsForEmptyDecksInSeries,onCancelAIGeneration:d.handleCancelAIGeneration,onCreateSampleQuizDeck:d.handleCreateSampleQuizDeck,onCreateSampleFlashcardDeck:d.handleCreateSampleFlashcardDeck,onCreateSampleLearningDeck:d.handleCreateSampleLearningDeck,onCreateSampleSeries:d.handleCreateSampleSeries,onCreateSampleCourse:d.handleCreateSampleCourse}):u.jsxs("div",{className:"text-center py-20 max-w-4xl mx-auto",children:[u.jsx("h2",{className:"text-3xl font-bold text-gray-600 dark:text-gray-400",children:"Welcome to CogniFlow"}),u.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-500",children:"Get started by creating or importing content."}),u.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8 flex-wrap",children:[h&&u.jsxs(Ye,{onClick:()=>d.openModal("aiGeneration"),variant:"primary",children:[u.jsx(Fe,{name:"zap",className:"w-5 h-5 mr-2"}),"Generate with AI"]}),u.jsxs(Ye,{onClick:()=>d.openModal("import"),children:[u.jsx(Fe,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import"]}),u.jsxs(Ye,{onClick:()=>d.openModal("series",{series:"new"}),variant:"secondary",children:[u.jsx(Fe,{name:"layers",className:"w-5 h-5 mr-2"}),"New Series"]}),u.jsxs(Ye,{onClick:()=>d.openModal("restore"),variant:"secondary",children:[u.jsx(Fe,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),"Restore Backup"]})]}),u.jsxs("div",{className:"mt-12 border-t border-border pt-8",children:[u.jsx("h3",{className:"text-lg font-semibold text-text-muted mb-4",children:"Or try a sample:"}),u.jsxs("div",{className:"flex flex-wrap justify-center gap-3",children:[u.jsxs(Ye,{onClick:d.handleCreateSampleQuizDeck,variant:"ghost",size:"sm",children:[u.jsx(Fe,{name:"help-circle",className:"w-4 h-4 mr-2"})," Quiz Deck"]}),u.jsxs(Ye,{onClick:d.handleCreateSampleFlashcardDeck,variant:"ghost",size:"sm",children:[u.jsx(Fe,{name:"laptop",className:"w-4 h-4 mr-2"})," Flashcard Deck"]}),u.jsxs(Ye,{onClick:d.handleCreateSampleLearningDeck,variant:"ghost",size:"sm",children:[u.jsx(Fe,{name:"book-open",className:"w-4 h-4 mr-2"})," Learning Deck"]}),u.jsxs(Ye,{onClick:d.handleCreateSampleSeries,variant:"ghost",size:"sm",children:[u.jsx(Fe,{name:"layers",className:"w-4 h-4 mr-2"})," Series"]})]})]})]})};return S||w?u.jsx(H.Suspense,{fallback:u.jsx(jy,{}),children:I()}):u.jsxs(u.Fragment,{children:[u.jsx(K_,{items:O}),u.jsx(W_,{children:u.jsx(H.Suspense,{fallback:u.jsx(jy,{}),children:I()})},m)]})},Er=2.5,Sh=1.3,hS=1,pS=1.2,mS=1.3,gS={1:-.2,2:-.15,3:0,4:.15};function Bh(n,a=null){const s={isValid:!1,parsed:null,errors:[],detailedErrors:[],suggestions:[],fixedJSON:null,schemaIssues:[]};if(!n||typeof n!="string"||n.trim()==="")return s.errors.push("Input must be a non-empty string"),s;let i=null;if(a)try{i=JSON.parse(a)}catch{s.schemaIssues.push({type:"error",path:"Template",message:"The provided Schema/Template JSON is itself invalid and cannot be used for comparison."})}let l=n;try{s.parsed=JSON.parse(l),s.isValid=!0,s.fixedJSON=JSON.stringify(s.parsed,null,2)}catch(c){const h=yS(c,l);s.errors.push(c.message),s.detailedErrors.push(h);const d=xS(l);if(d.success){s.fixedJSON=d.fixed,l=d.fixed,s.suggestions=d.suggestions;try{s.parsed=JSON.parse(l),s.isValid=!0}catch{}}else s.suggestions=d.suggestions}return i&&s.parsed&&s.schemaIssues.push(...Eh(s.parsed,i)),s}function Eh(n,a,s="$"){const i=[];if(Array.isArray(a))return Array.isArray(n)?(a.length>0&&n.length>0&&i.push(...Eh(n[0],a[0],`${s}[0]`)),i):(i.push({type:"error",path:s,message:`Type Mismatch: Expected an array but got ${typeof n}.`}),i);if(typeof a=="object"&&a!==null){if(typeof n!="object"||n===null||Array.isArray(n))return i.push({type:"error",path:s,message:`Type Mismatch: Expected an object but got ${Array.isArray(n)?"array":typeof n}.`}),i;const l=Object.keys(a),c=new Set(Object.keys(n));for(const h of l){const d=`${s}.${h}`;if(!c.has(h))i.push({type:"warning",path:d,message:`Missing Key: The key '${h}' is missing.`});else{const m=Array.isArray(a[h])?"array":typeof a[h],p=Array.isArray(n[h])?"array":typeof n[h];m!==p?i.push({type:"error",path:d,message:`Type Mismatch: Expected type '${m}' but got '${p}'.`}):typeof a[h]=="object"&&a[h]!==null&&i.push(...Eh(n[h],a[h],d))}}for(const h of Array.from(c))l.includes(h)||i.push({type:"info",path:`${s}.${h}`,message:`Extra Key: The key '${h}' is present but not in the schema.`});return i}return i}function yS(n,a){var _;const s=n.message,i=a.split(`
`);let l=null,c=null,h="Syntax Error",d="",m="",p="",v;const x=s.match(/at position (\d+)/),T=s.match(/at line (\d+) column (\d+)/i);if(x){const E=parseInt(x[1],10),{line:S,column:w}=vS(a,E);l=S,c=w,d=Yc(i,l-1,c-1);const O=a.substring(0,E).trim();s.includes("Expected property name or '}'")?(h="Invalid Object Key or Trailing Comma",O.endsWith(",")?v='A trailing comma was found. JSON does not allow a comma after the last item in an object. For example, `{"key": "value",}` is invalid. Remove the comma.':v='An object key might be missing or invalid. All keys in JSON must be strings enclosed in double quotes (e.g., `"key": "value"`). Check for unquoted keys or a missing comma.'):s.includes("Unexpected token")&&(p=((_=s.match(/Unexpected token (.+?) in JSON/))==null?void 0:_[1])||"",h="Unexpected Token",(p==="}"||p==="]")&&O.endsWith(",")?(h="Trailing Comma",v='A trailing comma was found. JSON format does not allow a comma after the last item in an array or object. For example, `[1, 2,]` and `{"key":"value",}` are invalid. Remove the final comma.'):p==="'"?(h="Invalid String Quote",v="JSON strings must use double quotes (`\"`). Single quotes (`'`) are not permitted. For example, change `'value'` to `\"value\"`."):p==="="?(h="Invalid Assignment",v="JSON uses a colon (`:`) to separate keys from values, not an equals sign (`=`). This may be a typo (e.g., `:=` instead of just `:`) that needs to be corrected."):p.toLowerCase()==="u"&&a.substring(E).startsWith("undefined")?(h="Invalid Value",v="The value `undefined` is not valid in JSON. This is common when converting JavaScript objects. Use `null` instead or remove the key-value pair."):p.match(/^[a-zA-Z]/)?(h="Unquoted String",v='This looks like an unquoted string, key, or value. All strings and object keys in JSON must be enclosed in double quotes. For example, `{ key: "value" }` should be `{ "key": "value" }`.'):v=`An unexpected character '${p}' was found. This is often caused by a missing comma, a missing colon, or a typo. Please check the syntax around this character.`)}else if(T)l=parseInt(T[1],10),c=parseInt(T[2],10),d=Yc(i,l-1,c-1),s.includes("trailing comma")?(h="Trailing Comma",v="A trailing comma was found. JSON format does not allow a comma after the last item in an object or array. For example, `[1, 2,]` is invalid. Remove the final comma."):s.includes("expected property name")?(h="Invalid Object Key",v='An object key is expected here. All keys in JSON must be strings enclosed in double quotes (e.g., `"key": "value"`). Check for missing quotes or a missing comma before this line.'):s.includes("expected a string")?(h="Invalid String",v="This value was expected to be a string, but it isn't. Remember to wrap all strings in double quotes (`\"`). Single quotes are not allowed. For example, use `\"text\"` instead of `'text'` or `text`."):(h="Syntax Error",v="There is a syntax error at this location. Please check for issues like missing commas (,), colons (:), or mismatched brackets/braces ([]/{}).");else if(s.match(/Unterminated string|Unexpected end of JSON input/i)){const E=bS(a);E.line!==null&&E.column!==null?(h="Unterminated String",l=E.line,c=E.column,d=Yc(i,l-1,c-1),v='An unclosed string was detected. All strings in JSON must be enclosed in double quotes. Check for a missing closing quote (`"`) on this line or a previous one.'):(h="Unexpected End of Input",d=Yc(i,i.length-1),v="The JSON ends unexpectedly. This usually means you are missing a closing brace `}` for an object or a closing bracket `]` for an array.")}return v||(v="The JSON structure is invalid. Please check for common syntax errors like missing commas, incorrect quotes, or mismatched brackets and braces."),{type:h,line:l,column:c,expected:m,actual:p,context:d,message:s,friendlyMessage:v}}function vS(n,a){const s=n.substring(0,a).split(`
`);return{line:s.length,column:s[s.length-1].length+1}}function Yc(n,a,s,i=2){const l=Math.max(0,a-i),c=Math.min(n.length,a+i+1),h=n.slice(l,c);if(s!==void 0&&s>=1&&a>=l&&a<c){const d=a-l,m=" ".repeat(s-1)+"^";h.splice(d+1,0,m)}return h.join(`
`)}function bS(n){const a=n.split(`
`);let s=!1,i="",l=!1,c={line:null,column:null};for(let h=0;h<a.length;h++){const d=a[h];for(let m=0;m<d.length;m++){const p=d[m];if(l){l=!1;continue}if(p==="\\"&&s){l=!0;continue}(p==='"'||p==="'")&&!s?(s=!0,i=p,c={line:h+1,column:m+1}):p===i&&s&&(s=!1)}}return s&&c.line!==null?{...c,context:""}:{line:null,column:null,context:""}}function xS(n){let a=n;const s=new Set,i=SS(a);i.fixes.length>0&&(a=i.fixed,i.fixes.forEach(l=>s.add(l)));try{const l=JSON.parse(a);return{success:!0,fixed:JSON.stringify(l,null,2),suggestions:Array.from(s)}}catch(l){let c=Array.from(s);return l.message.includes("Unterminated string")&&c.push("Attempted to fix an unterminated string. Please review the result."),c.length===0&&c.push("Could not automatically fix JSON errors."),{success:!1,fixed:null,suggestions:c}}}function _S(n){return n.replace(/[\u2018\u2019\u201C\u201D]/g,'"')}function SS(n){const a=[];let s=n.trim();const i=s;s=_S(s),i!==s&&a.push("Replaced smart/typographic quotes with standard double quotes");const l=[{regex:/(:\s*)=/g,replacement:"$1",description:"Replaced invalid assignment operator (e.g. `:=`) with a colon"},{regex:/,\s*([}\]])/g,replacement:"$1",description:"Removed trailing commas"},{regex:/([{,]\s*)([a-zA-Z_$][a-zA-Z0-9_$]*)\s*:/g,replacement:'$1"$2":',description:"Added quotes to unquoted keys"},{regex:/:\s*([^",\s\[\{][^,}\]]*?)(?=\s*[,}])/g,replacement:': "$1"',description:"Added quotes to an unquoted string value"},{regex:/:\s*(undefined|NaN|Infinity|-Infinity)/g,replacement:": null",description:"Replaced `undefined`, `NaN`, or `Infinity` with `null`"},{regex:/"(\s*)"(?!\s*[:],}])/g,replacement:'","',description:"Added missing comma between string values"},{regex:/}(\s*)"/g,replacement:'},"$1"',description:"Added missing comma between an object and a following key"},{regex:/\](\s*)"/g,replacement:'],"$1"',description:"Added missing comma between an array and a following key"},{regex:/\](\s*)\{/g,replacement:"], $1{",description:"Added missing comma between an array and an object"}];for(let c=0;c<3;c++)l.forEach(h=>{const d=s;s=s.replace(h.regex,h.replacement),d!==s&&!a.includes(h.description)&&a.push(h.description)});return{fixed:s,fixes:a}}var jt;(function(n){n.assertEqual=l=>l;function a(l){}n.assertIs=a;function s(l){throw new Error}n.assertNever=s,n.arrayToEnum=l=>{const c={};for(const h of l)c[h]=h;return c},n.getValidEnumValues=l=>{const c=n.objectKeys(l).filter(d=>typeof l[l[d]]!="number"),h={};for(const d of c)h[d]=l[d];return n.objectValues(h)},n.objectValues=l=>n.objectKeys(l).map(function(c){return l[c]}),n.objectKeys=typeof Object.keys=="function"?l=>Object.keys(l):l=>{const c=[];for(const h in l)Object.prototype.hasOwnProperty.call(l,h)&&c.push(h);return c},n.find=(l,c)=>{for(const h of l)if(c(h))return h},n.isInteger=typeof Number.isInteger=="function"?l=>Number.isInteger(l):l=>typeof l=="number"&&isFinite(l)&&Math.floor(l)===l;function i(l,c=" | "){return l.map(h=>typeof h=="string"?`'${h}'`:h).join(c)}n.joinValues=i,n.jsonStringifyReplacer=(l,c)=>typeof c=="bigint"?c.toString():c})(jt||(jt={}));var wh;(function(n){n.mergeShapes=(a,s)=>({...a,...s})})(wh||(wh={}));const Qe=jt.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),ws=n=>{switch(typeof n){case"undefined":return Qe.undefined;case"string":return Qe.string;case"number":return isNaN(n)?Qe.nan:Qe.number;case"boolean":return Qe.boolean;case"function":return Qe.function;case"bigint":return Qe.bigint;case"symbol":return Qe.symbol;case"object":return Array.isArray(n)?Qe.array:n===null?Qe.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?Qe.promise:typeof Map<"u"&&n instanceof Map?Qe.map:typeof Set<"u"&&n instanceof Set?Qe.set:typeof Date<"u"&&n instanceof Date?Qe.date:Qe.object;default:return Qe.unknown}},Ge=jt.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),ES=n=>JSON.stringify(n,null,2).replace(/"([^"]+)":/g,"$1:");class wr extends Error{constructor(a){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const s=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,s):this.__proto__=s,this.name="ZodError",this.issues=a}get errors(){return this.issues}format(a){const s=a||function(c){return c.message},i={_errors:[]},l=c=>{for(const h of c.issues)if(h.code==="invalid_union")h.unionErrors.map(l);else if(h.code==="invalid_return_type")l(h.returnTypeError);else if(h.code==="invalid_arguments")l(h.argumentsError);else if(h.path.length===0)i._errors.push(s(h));else{let d=i,m=0;for(;m<h.path.length;){const p=h.path[m];m===h.path.length-1?(d[p]=d[p]||{_errors:[]},d[p]._errors.push(s(h))):d[p]=d[p]||{_errors:[]},d=d[p],m++}}};return l(this),i}static assert(a){if(!(a instanceof wr))throw new Error(`Not a ZodError: ${a}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,jt.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(a=s=>s.message){const s={},i=[];for(const l of this.issues)l.path.length>0?(s[l.path[0]]=s[l.path[0]]||[],s[l.path[0]].push(a(l))):i.push(a(l));return{formErrors:i,fieldErrors:s}}get formErrors(){return this.flatten()}}wr.create=n=>new wr(n);const ro=(n,a)=>{let s;switch(n.code){case Ge.invalid_type:n.received===Qe.undefined?s="Required":s=`Expected ${n.expected}, received ${n.received}`;break;case Ge.invalid_literal:s=`Invalid literal value, expected ${JSON.stringify(n.expected,jt.jsonStringifyReplacer)}`;break;case Ge.unrecognized_keys:s=`Unrecognized key(s) in object: ${jt.joinValues(n.keys,", ")}`;break;case Ge.invalid_union:s="Invalid input";break;case Ge.invalid_union_discriminator:s=`Invalid discriminator value. Expected ${jt.joinValues(n.options)}`;break;case Ge.invalid_enum_value:s=`Invalid enum value. Expected ${jt.joinValues(n.options)}, received '${n.received}'`;break;case Ge.invalid_arguments:s="Invalid function arguments";break;case Ge.invalid_return_type:s="Invalid function return type";break;case Ge.invalid_date:s="Invalid date";break;case Ge.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(s=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(s=`${s} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?s=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?s=`Invalid input: must end with "${n.validation.endsWith}"`:jt.assertNever(n.validation):n.validation!=="regex"?s=`Invalid ${n.validation}`:s="Invalid";break;case Ge.too_small:n.type==="array"?s=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?s=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?s=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?s=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:s="Invalid input";break;case Ge.too_big:n.type==="array"?s=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?s=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?s=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?s=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?s=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:s="Invalid input";break;case Ge.custom:s="Invalid input";break;case Ge.invalid_intersection_types:s="Intersection results could not be merged";break;case Ge.not_multiple_of:s=`Number must be a multiple of ${n.multipleOf}`;break;case Ge.not_finite:s="Number must be finite";break;default:s=a.defaultError,jt.assertNever(n)}return{message:s}};let xb=ro;function wS(n){xb=n}function hu(){return xb}const pu=n=>{const{data:a,path:s,errorMaps:i,issueData:l}=n,c=[...s,...l.path||[]],h={...l,path:c};if(l.message!==void 0)return{...l,path:c,message:l.message};let d="";const m=i.filter(p=>!!p).slice().reverse();for(const p of m)d=p(h,{data:a,defaultError:d}).message;return{...l,path:c,message:d}},TS=[];function $e(n,a){const s=hu(),i=pu({issueData:a,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,s,s===ro?void 0:ro].filter(l=>!!l)});n.common.issues.push(i)}class Zn{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(a,s){const i=[];for(const l of s){if(l.status==="aborted")return ft;l.status==="dirty"&&a.dirty(),i.push(l.value)}return{status:a.value,value:i}}static async mergeObjectAsync(a,s){const i=[];for(const l of s){const c=await l.key,h=await l.value;i.push({key:c,value:h})}return Zn.mergeObjectSync(a,i)}static mergeObjectSync(a,s){const i={};for(const l of s){const{key:c,value:h}=l;if(c.status==="aborted"||h.status==="aborted")return ft;c.status==="dirty"&&a.dirty(),h.status==="dirty"&&a.dirty(),c.value!=="__proto__"&&(typeof h.value<"u"||l.alwaysSet)&&(i[c.value]=h.value)}return{status:a.value,value:i}}}const ft=Object.freeze({status:"aborted"}),Ki=n=>({status:"dirty",value:n}),er=n=>({status:"valid",value:n}),Th=n=>n.status==="aborted",Ah=n=>n.status==="dirty",hl=n=>n.status==="valid",pl=n=>typeof Promise<"u"&&n instanceof Promise;function mu(n,a,s,i){if(typeof a=="function"?n!==a||!0:!a.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return a.get(n)}function _b(n,a,s,i,l){if(typeof a=="function"?n!==a||!0:!a.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return a.set(n,s),s}var rt;(function(n){n.errToObj=a=>typeof a=="string"?{message:a}:a||{},n.toString=a=>typeof a=="string"?a:a==null?void 0:a.message})(rt||(rt={}));var ll,cl;class ha{constructor(a,s,i,l){this._cachedPath=[],this.parent=a,this.data=s,this._path=i,this._key=l}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const Iy=(n,a)=>{if(hl(a))return{success:!0,data:a.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const s=new wr(n.common.issues);return this._error=s,this._error}}};function vt(n){if(!n)return{};const{errorMap:a,invalid_type_error:s,required_error:i,description:l}=n;if(a&&(s||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return a?{errorMap:a,description:l}:{errorMap:(h,d)=>{var m,p;const{message:v}=n;return h.code==="invalid_enum_value"?{message:v??d.defaultError}:typeof d.data>"u"?{message:(m=v??i)!==null&&m!==void 0?m:d.defaultError}:h.code!=="invalid_type"?{message:d.defaultError}:{message:(p=v??s)!==null&&p!==void 0?p:d.defaultError}},description:l}}class St{constructor(a){this.spa=this.safeParseAsync,this._def=a,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(a){return ws(a.data)}_getOrReturnCtx(a,s){return s||{common:a.parent.common,data:a.data,parsedType:ws(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}_processInputParams(a){return{status:new Zn,ctx:{common:a.parent.common,data:a.data,parsedType:ws(a.data),schemaErrorMap:this._def.errorMap,path:a.path,parent:a.parent}}}_parseSync(a){const s=this._parse(a);if(pl(s))throw new Error("Synchronous parse encountered promise.");return s}_parseAsync(a){const s=this._parse(a);return Promise.resolve(s)}parse(a,s){const i=this.safeParse(a,s);if(i.success)return i.data;throw i.error}safeParse(a,s){var i;const l={common:{issues:[],async:(i=s==null?void 0:s.async)!==null&&i!==void 0?i:!1,contextualErrorMap:s==null?void 0:s.errorMap},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ws(a)},c=this._parseSync({data:a,path:l.path,parent:l});return Iy(l,c)}async parseAsync(a,s){const i=await this.safeParseAsync(a,s);if(i.success)return i.data;throw i.error}async safeParseAsync(a,s){const i={common:{issues:[],contextualErrorMap:s==null?void 0:s.errorMap,async:!0},path:(s==null?void 0:s.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:a,parsedType:ws(a)},l=this._parse({data:a,path:i.path,parent:i}),c=await(pl(l)?l:Promise.resolve(l));return Iy(i,c)}refine(a,s){const i=l=>typeof s=="string"||typeof s>"u"?{message:s}:typeof s=="function"?s(l):s;return this._refinement((l,c)=>{const h=a(l),d=()=>c.addIssue({code:Ge.custom,...i(l)});return typeof Promise<"u"&&h instanceof Promise?h.then(m=>m?!0:(d(),!1)):h?!0:(d(),!1)})}refinement(a,s){return this._refinement((i,l)=>a(i)?!0:(l.addIssue(typeof s=="function"?s(i,l):s),!1))}_refinement(a){return new ra({schema:this,typeName:ut.ZodEffects,effect:{type:"refinement",refinement:a}})}superRefine(a){return this._refinement(a)}optional(){return fa.create(this,this._def)}nullable(){return Os.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return ta.create(this,this._def)}promise(){return so.create(this,this._def)}or(a){return vl.create([this,a],this._def)}and(a){return bl.create(this,a,this._def)}transform(a){return new ra({...vt(this._def),schema:this,typeName:ut.ZodEffects,effect:{type:"transform",transform:a}})}default(a){const s=typeof a=="function"?a:()=>a;return new wl({...vt(this._def),innerType:this,defaultValue:s,typeName:ut.ZodDefault})}brand(){return new Fh({typeName:ut.ZodBranded,type:this,...vt(this._def)})}catch(a){const s=typeof a=="function"?a:()=>a;return new Tl({...vt(this._def),innerType:this,catchValue:s,typeName:ut.ZodCatch})}describe(a){const s=this.constructor;return new s({...this._def,description:a})}pipe(a){return Cl.create(this,a)}readonly(){return Al.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const AS=/^c[^\s-]{8,}$/i,kS=/^[0-9a-z]+$/,NS=/^[0-9A-HJKMNP-TV-Z]{26}$/,DS=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,CS=/^[a-z0-9_-]{21}$/i,OS=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,RS=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,jS="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let nh;const IS=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,MS=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,US=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,Sb="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",LS=new RegExp(`^${Sb}$`);function Eb(n){let a="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return n.precision?a=`${a}\\.\\d{${n.precision}}`:n.precision==null&&(a=`${a}(\\.\\d+)?`),a}function zS(n){return new RegExp(`^${Eb(n)}$`)}function wb(n){let a=`${Sb}T${Eb(n)}`;const s=[];return s.push(n.local?"Z?":"Z"),n.offset&&s.push("([+-]\\d{2}:?\\d{2})"),a=`${a}(${s.join("|")})`,new RegExp(`^${a}$`)}function BS(n,a){return!!((a==="v4"||!a)&&IS.test(n)||(a==="v6"||!a)&&MS.test(n))}class ea extends St{_parse(a){if(this._def.coerce&&(a.data=String(a.data)),this._getType(a)!==Qe.string){const c=this._getOrReturnCtx(a);return $e(c,{code:Ge.invalid_type,expected:Qe.string,received:c.parsedType}),ft}const i=new Zn;let l;for(const c of this._def.checks)if(c.kind==="min")a.data.length<c.value&&(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),i.dirty());else if(c.kind==="max")a.data.length>c.value&&(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!1,message:c.message}),i.dirty());else if(c.kind==="length"){const h=a.data.length>c.value,d=a.data.length<c.value;(h||d)&&(l=this._getOrReturnCtx(a,l),h?$e(l,{code:Ge.too_big,maximum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}):d&&$e(l,{code:Ge.too_small,minimum:c.value,type:"string",inclusive:!0,exact:!0,message:c.message}),i.dirty())}else if(c.kind==="email")RS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"email",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="emoji")nh||(nh=new RegExp(jS,"u")),nh.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"emoji",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="uuid")DS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"uuid",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="nanoid")CS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"nanoid",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="cuid")AS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"cuid",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="cuid2")kS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"cuid2",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="ulid")NS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"ulid",code:Ge.invalid_string,message:c.message}),i.dirty());else if(c.kind==="url")try{new URL(a.data)}catch{l=this._getOrReturnCtx(a,l),$e(l,{validation:"url",code:Ge.invalid_string,message:c.message}),i.dirty()}else c.kind==="regex"?(c.regex.lastIndex=0,c.regex.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"regex",code:Ge.invalid_string,message:c.message}),i.dirty())):c.kind==="trim"?a.data=a.data.trim():c.kind==="includes"?a.data.includes(c.value,c.position)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:{includes:c.value,position:c.position},message:c.message}),i.dirty()):c.kind==="toLowerCase"?a.data=a.data.toLowerCase():c.kind==="toUpperCase"?a.data=a.data.toUpperCase():c.kind==="startsWith"?a.data.startsWith(c.value)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:{startsWith:c.value},message:c.message}),i.dirty()):c.kind==="endsWith"?a.data.endsWith(c.value)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:{endsWith:c.value},message:c.message}),i.dirty()):c.kind==="datetime"?wb(c).test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:"datetime",message:c.message}),i.dirty()):c.kind==="date"?LS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:"date",message:c.message}),i.dirty()):c.kind==="time"?zS(c).test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.invalid_string,validation:"time",message:c.message}),i.dirty()):c.kind==="duration"?OS.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"duration",code:Ge.invalid_string,message:c.message}),i.dirty()):c.kind==="ip"?BS(a.data,c.version)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"ip",code:Ge.invalid_string,message:c.message}),i.dirty()):c.kind==="base64"?US.test(a.data)||(l=this._getOrReturnCtx(a,l),$e(l,{validation:"base64",code:Ge.invalid_string,message:c.message}),i.dirty()):jt.assertNever(c);return{status:i.value,value:a.data}}_regex(a,s,i){return this.refinement(l=>a.test(l),{validation:s,code:Ge.invalid_string,...rt.errToObj(i)})}_addCheck(a){return new ea({...this._def,checks:[...this._def.checks,a]})}email(a){return this._addCheck({kind:"email",...rt.errToObj(a)})}url(a){return this._addCheck({kind:"url",...rt.errToObj(a)})}emoji(a){return this._addCheck({kind:"emoji",...rt.errToObj(a)})}uuid(a){return this._addCheck({kind:"uuid",...rt.errToObj(a)})}nanoid(a){return this._addCheck({kind:"nanoid",...rt.errToObj(a)})}cuid(a){return this._addCheck({kind:"cuid",...rt.errToObj(a)})}cuid2(a){return this._addCheck({kind:"cuid2",...rt.errToObj(a)})}ulid(a){return this._addCheck({kind:"ulid",...rt.errToObj(a)})}base64(a){return this._addCheck({kind:"base64",...rt.errToObj(a)})}ip(a){return this._addCheck({kind:"ip",...rt.errToObj(a)})}datetime(a){var s,i;return typeof a=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:a}):this._addCheck({kind:"datetime",precision:typeof(a==null?void 0:a.precision)>"u"?null:a==null?void 0:a.precision,offset:(s=a==null?void 0:a.offset)!==null&&s!==void 0?s:!1,local:(i=a==null?void 0:a.local)!==null&&i!==void 0?i:!1,...rt.errToObj(a==null?void 0:a.message)})}date(a){return this._addCheck({kind:"date",message:a})}time(a){return typeof a=="string"?this._addCheck({kind:"time",precision:null,message:a}):this._addCheck({kind:"time",precision:typeof(a==null?void 0:a.precision)>"u"?null:a==null?void 0:a.precision,...rt.errToObj(a==null?void 0:a.message)})}duration(a){return this._addCheck({kind:"duration",...rt.errToObj(a)})}regex(a,s){return this._addCheck({kind:"regex",regex:a,...rt.errToObj(s)})}includes(a,s){return this._addCheck({kind:"includes",value:a,position:s==null?void 0:s.position,...rt.errToObj(s==null?void 0:s.message)})}startsWith(a,s){return this._addCheck({kind:"startsWith",value:a,...rt.errToObj(s)})}endsWith(a,s){return this._addCheck({kind:"endsWith",value:a,...rt.errToObj(s)})}min(a,s){return this._addCheck({kind:"min",value:a,...rt.errToObj(s)})}max(a,s){return this._addCheck({kind:"max",value:a,...rt.errToObj(s)})}length(a,s){return this._addCheck({kind:"length",value:a,...rt.errToObj(s)})}nonempty(a){return this.min(1,rt.errToObj(a))}trim(){return new ea({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new ea({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(a=>a.kind==="datetime")}get isDate(){return!!this._def.checks.find(a=>a.kind==="date")}get isTime(){return!!this._def.checks.find(a=>a.kind==="time")}get isDuration(){return!!this._def.checks.find(a=>a.kind==="duration")}get isEmail(){return!!this._def.checks.find(a=>a.kind==="email")}get isURL(){return!!this._def.checks.find(a=>a.kind==="url")}get isEmoji(){return!!this._def.checks.find(a=>a.kind==="emoji")}get isUUID(){return!!this._def.checks.find(a=>a.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(a=>a.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(a=>a.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(a=>a.kind==="cuid2")}get isULID(){return!!this._def.checks.find(a=>a.kind==="ulid")}get isIP(){return!!this._def.checks.find(a=>a.kind==="ip")}get isBase64(){return!!this._def.checks.find(a=>a.kind==="base64")}get minLength(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a}get maxLength(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a}}ea.create=n=>{var a;return new ea({checks:[],typeName:ut.ZodString,coerce:(a=n==null?void 0:n.coerce)!==null&&a!==void 0?a:!1,...vt(n)})};function FS(n,a){const s=(n.toString().split(".")[1]||"").length,i=(a.toString().split(".")[1]||"").length,l=s>i?s:i,c=parseInt(n.toFixed(l).replace(".","")),h=parseInt(a.toFixed(l).replace(".",""));return c%h/Math.pow(10,l)}class Ns extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(a){if(this._def.coerce&&(a.data=Number(a.data)),this._getType(a)!==Qe.number){const c=this._getOrReturnCtx(a);return $e(c,{code:Ge.invalid_type,expected:Qe.number,received:c.parsedType}),ft}let i;const l=new Zn;for(const c of this._def.checks)c.kind==="int"?jt.isInteger(a.data)||(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.invalid_type,expected:"integer",received:"float",message:c.message}),l.dirty()):c.kind==="min"?(c.inclusive?a.data<c.value:a.data<=c.value)&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.too_small,minimum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),l.dirty()):c.kind==="max"?(c.inclusive?a.data>c.value:a.data>=c.value)&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.too_big,maximum:c.value,type:"number",inclusive:c.inclusive,exact:!1,message:c.message}),l.dirty()):c.kind==="multipleOf"?FS(a.data,c.value)!==0&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.not_multiple_of,multipleOf:c.value,message:c.message}),l.dirty()):c.kind==="finite"?Number.isFinite(a.data)||(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.not_finite,message:c.message}),l.dirty()):jt.assertNever(c);return{status:l.value,value:a.data}}gte(a,s){return this.setLimit("min",a,!0,rt.toString(s))}gt(a,s){return this.setLimit("min",a,!1,rt.toString(s))}lte(a,s){return this.setLimit("max",a,!0,rt.toString(s))}lt(a,s){return this.setLimit("max",a,!1,rt.toString(s))}setLimit(a,s,i,l){return new Ns({...this._def,checks:[...this._def.checks,{kind:a,value:s,inclusive:i,message:rt.toString(l)}]})}_addCheck(a){return new Ns({...this._def,checks:[...this._def.checks,a]})}int(a){return this._addCheck({kind:"int",message:rt.toString(a)})}positive(a){return this._addCheck({kind:"min",value:0,inclusive:!1,message:rt.toString(a)})}negative(a){return this._addCheck({kind:"max",value:0,inclusive:!1,message:rt.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:0,inclusive:!0,message:rt.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:0,inclusive:!0,message:rt.toString(a)})}multipleOf(a,s){return this._addCheck({kind:"multipleOf",value:a,message:rt.toString(s)})}finite(a){return this._addCheck({kind:"finite",message:rt.toString(a)})}safe(a){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:rt.toString(a)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:rt.toString(a)})}get minValue(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a}get maxValue(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a}get isInt(){return!!this._def.checks.find(a=>a.kind==="int"||a.kind==="multipleOf"&&jt.isInteger(a.value))}get isFinite(){let a=null,s=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(s===null||i.value>s)&&(s=i.value):i.kind==="max"&&(a===null||i.value<a)&&(a=i.value)}return Number.isFinite(s)&&Number.isFinite(a)}}Ns.create=n=>new Ns({checks:[],typeName:ut.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...vt(n)});class Ds extends St{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(a){if(this._def.coerce&&(a.data=BigInt(a.data)),this._getType(a)!==Qe.bigint){const c=this._getOrReturnCtx(a);return $e(c,{code:Ge.invalid_type,expected:Qe.bigint,received:c.parsedType}),ft}let i;const l=new Zn;for(const c of this._def.checks)c.kind==="min"?(c.inclusive?a.data<c.value:a.data<=c.value)&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.too_small,type:"bigint",minimum:c.value,inclusive:c.inclusive,message:c.message}),l.dirty()):c.kind==="max"?(c.inclusive?a.data>c.value:a.data>=c.value)&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.too_big,type:"bigint",maximum:c.value,inclusive:c.inclusive,message:c.message}),l.dirty()):c.kind==="multipleOf"?a.data%c.value!==BigInt(0)&&(i=this._getOrReturnCtx(a,i),$e(i,{code:Ge.not_multiple_of,multipleOf:c.value,message:c.message}),l.dirty()):jt.assertNever(c);return{status:l.value,value:a.data}}gte(a,s){return this.setLimit("min",a,!0,rt.toString(s))}gt(a,s){return this.setLimit("min",a,!1,rt.toString(s))}lte(a,s){return this.setLimit("max",a,!0,rt.toString(s))}lt(a,s){return this.setLimit("max",a,!1,rt.toString(s))}setLimit(a,s,i,l){return new Ds({...this._def,checks:[...this._def.checks,{kind:a,value:s,inclusive:i,message:rt.toString(l)}]})}_addCheck(a){return new Ds({...this._def,checks:[...this._def.checks,a]})}positive(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:rt.toString(a)})}negative(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:rt.toString(a)})}nonpositive(a){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:rt.toString(a)})}nonnegative(a){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:rt.toString(a)})}multipleOf(a,s){return this._addCheck({kind:"multipleOf",value:a,message:rt.toString(s)})}get minValue(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a}get maxValue(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a}}Ds.create=n=>{var a;return new Ds({checks:[],typeName:ut.ZodBigInt,coerce:(a=n==null?void 0:n.coerce)!==null&&a!==void 0?a:!1,...vt(n)})};class ml extends St{_parse(a){if(this._def.coerce&&(a.data=!!a.data),this._getType(a)!==Qe.boolean){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.boolean,received:i.parsedType}),ft}return er(a.data)}}ml.create=n=>new ml({typeName:ut.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...vt(n)});class si extends St{_parse(a){if(this._def.coerce&&(a.data=new Date(a.data)),this._getType(a)!==Qe.date){const c=this._getOrReturnCtx(a);return $e(c,{code:Ge.invalid_type,expected:Qe.date,received:c.parsedType}),ft}if(isNaN(a.data.getTime())){const c=this._getOrReturnCtx(a);return $e(c,{code:Ge.invalid_date}),ft}const i=new Zn;let l;for(const c of this._def.checks)c.kind==="min"?a.data.getTime()<c.value&&(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.too_small,message:c.message,inclusive:!0,exact:!1,minimum:c.value,type:"date"}),i.dirty()):c.kind==="max"?a.data.getTime()>c.value&&(l=this._getOrReturnCtx(a,l),$e(l,{code:Ge.too_big,message:c.message,inclusive:!0,exact:!1,maximum:c.value,type:"date"}),i.dirty()):jt.assertNever(c);return{status:i.value,value:new Date(a.data.getTime())}}_addCheck(a){return new si({...this._def,checks:[...this._def.checks,a]})}min(a,s){return this._addCheck({kind:"min",value:a.getTime(),message:rt.toString(s)})}max(a,s){return this._addCheck({kind:"max",value:a.getTime(),message:rt.toString(s)})}get minDate(){let a=null;for(const s of this._def.checks)s.kind==="min"&&(a===null||s.value>a)&&(a=s.value);return a!=null?new Date(a):null}get maxDate(){let a=null;for(const s of this._def.checks)s.kind==="max"&&(a===null||s.value<a)&&(a=s.value);return a!=null?new Date(a):null}}si.create=n=>new si({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ut.ZodDate,...vt(n)});class gu extends St{_parse(a){if(this._getType(a)!==Qe.symbol){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.symbol,received:i.parsedType}),ft}return er(a.data)}}gu.create=n=>new gu({typeName:ut.ZodSymbol,...vt(n)});class gl extends St{_parse(a){if(this._getType(a)!==Qe.undefined){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.undefined,received:i.parsedType}),ft}return er(a.data)}}gl.create=n=>new gl({typeName:ut.ZodUndefined,...vt(n)});class yl extends St{_parse(a){if(this._getType(a)!==Qe.null){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.null,received:i.parsedType}),ft}return er(a.data)}}yl.create=n=>new yl({typeName:ut.ZodNull,...vt(n)});class ao extends St{constructor(){super(...arguments),this._any=!0}_parse(a){return er(a.data)}}ao.create=n=>new ao({typeName:ut.ZodAny,...vt(n)});class ai extends St{constructor(){super(...arguments),this._unknown=!0}_parse(a){return er(a.data)}}ai.create=n=>new ai({typeName:ut.ZodUnknown,...vt(n)});class Ga extends St{_parse(a){const s=this._getOrReturnCtx(a);return $e(s,{code:Ge.invalid_type,expected:Qe.never,received:s.parsedType}),ft}}Ga.create=n=>new Ga({typeName:ut.ZodNever,...vt(n)});class yu extends St{_parse(a){if(this._getType(a)!==Qe.undefined){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.void,received:i.parsedType}),ft}return er(a.data)}}yu.create=n=>new yu({typeName:ut.ZodVoid,...vt(n)});class ta extends St{_parse(a){const{ctx:s,status:i}=this._processInputParams(a),l=this._def;if(s.parsedType!==Qe.array)return $e(s,{code:Ge.invalid_type,expected:Qe.array,received:s.parsedType}),ft;if(l.exactLength!==null){const h=s.data.length>l.exactLength.value,d=s.data.length<l.exactLength.value;(h||d)&&($e(s,{code:h?Ge.too_big:Ge.too_small,minimum:d?l.exactLength.value:void 0,maximum:h?l.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:l.exactLength.message}),i.dirty())}if(l.minLength!==null&&s.data.length<l.minLength.value&&($e(s,{code:Ge.too_small,minimum:l.minLength.value,type:"array",inclusive:!0,exact:!1,message:l.minLength.message}),i.dirty()),l.maxLength!==null&&s.data.length>l.maxLength.value&&($e(s,{code:Ge.too_big,maximum:l.maxLength.value,type:"array",inclusive:!0,exact:!1,message:l.maxLength.message}),i.dirty()),s.common.async)return Promise.all([...s.data].map((h,d)=>l.type._parseAsync(new ha(s,h,s.path,d)))).then(h=>Zn.mergeArray(i,h));const c=[...s.data].map((h,d)=>l.type._parseSync(new ha(s,h,s.path,d)));return Zn.mergeArray(i,c)}get element(){return this._def.type}min(a,s){return new ta({...this._def,minLength:{value:a,message:rt.toString(s)}})}max(a,s){return new ta({...this._def,maxLength:{value:a,message:rt.toString(s)}})}length(a,s){return new ta({...this._def,exactLength:{value:a,message:rt.toString(s)}})}nonempty(a){return this.min(1,a)}}ta.create=(n,a)=>new ta({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ut.ZodArray,...vt(a)});function Zi(n){if(n instanceof un){const a={};for(const s in n.shape){const i=n.shape[s];a[s]=fa.create(Zi(i))}return new un({...n._def,shape:()=>a})}else return n instanceof ta?new ta({...n._def,type:Zi(n.element)}):n instanceof fa?fa.create(Zi(n.unwrap())):n instanceof Os?Os.create(Zi(n.unwrap())):n instanceof pa?pa.create(n.items.map(a=>Zi(a))):n}class un extends St{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const a=this._def.shape(),s=jt.objectKeys(a);return this._cached={shape:a,keys:s}}_parse(a){if(this._getType(a)!==Qe.object){const p=this._getOrReturnCtx(a);return $e(p,{code:Ge.invalid_type,expected:Qe.object,received:p.parsedType}),ft}const{status:i,ctx:l}=this._processInputParams(a),{shape:c,keys:h}=this._getCached(),d=[];if(!(this._def.catchall instanceof Ga&&this._def.unknownKeys==="strip"))for(const p in l.data)h.includes(p)||d.push(p);const m=[];for(const p of h){const v=c[p],x=l.data[p];m.push({key:{status:"valid",value:p},value:v._parse(new ha(l,x,l.path,p)),alwaysSet:p in l.data})}if(this._def.catchall instanceof Ga){const p=this._def.unknownKeys;if(p==="passthrough")for(const v of d)m.push({key:{status:"valid",value:v},value:{status:"valid",value:l.data[v]}});else if(p==="strict")d.length>0&&($e(l,{code:Ge.unrecognized_keys,keys:d}),i.dirty());else if(p!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const p=this._def.catchall;for(const v of d){const x=l.data[v];m.push({key:{status:"valid",value:v},value:p._parse(new ha(l,x,l.path,v)),alwaysSet:v in l.data})}}return l.common.async?Promise.resolve().then(async()=>{const p=[];for(const v of m){const x=await v.key,T=await v.value;p.push({key:x,value:T,alwaysSet:v.alwaysSet})}return p}).then(p=>Zn.mergeObjectSync(i,p)):Zn.mergeObjectSync(i,m)}get shape(){return this._def.shape()}strict(a){return rt.errToObj,new un({...this._def,unknownKeys:"strict",...a!==void 0?{errorMap:(s,i)=>{var l,c,h,d;const m=(h=(c=(l=this._def).errorMap)===null||c===void 0?void 0:c.call(l,s,i).message)!==null&&h!==void 0?h:i.defaultError;return s.code==="unrecognized_keys"?{message:(d=rt.errToObj(a).message)!==null&&d!==void 0?d:m}:{message:m}}}:{}})}strip(){return new un({...this._def,unknownKeys:"strip"})}passthrough(){return new un({...this._def,unknownKeys:"passthrough"})}extend(a){return new un({...this._def,shape:()=>({...this._def.shape(),...a})})}merge(a){return new un({unknownKeys:a._def.unknownKeys,catchall:a._def.catchall,shape:()=>({...this._def.shape(),...a._def.shape()}),typeName:ut.ZodObject})}setKey(a,s){return this.augment({[a]:s})}catchall(a){return new un({...this._def,catchall:a})}pick(a){const s={};return jt.objectKeys(a).forEach(i=>{a[i]&&this.shape[i]&&(s[i]=this.shape[i])}),new un({...this._def,shape:()=>s})}omit(a){const s={};return jt.objectKeys(this.shape).forEach(i=>{a[i]||(s[i]=this.shape[i])}),new un({...this._def,shape:()=>s})}deepPartial(){return Zi(this)}partial(a){const s={};return jt.objectKeys(this.shape).forEach(i=>{const l=this.shape[i];a&&!a[i]?s[i]=l:s[i]=l.optional()}),new un({...this._def,shape:()=>s})}required(a){const s={};return jt.objectKeys(this.shape).forEach(i=>{if(a&&!a[i])s[i]=this.shape[i];else{let c=this.shape[i];for(;c instanceof fa;)c=c._def.innerType;s[i]=c}}),new un({...this._def,shape:()=>s})}keyof(){return Tb(jt.objectKeys(this.shape))}}un.create=(n,a)=>new un({shape:()=>n,unknownKeys:"strip",catchall:Ga.create(),typeName:ut.ZodObject,...vt(a)});un.strictCreate=(n,a)=>new un({shape:()=>n,unknownKeys:"strict",catchall:Ga.create(),typeName:ut.ZodObject,...vt(a)});un.lazycreate=(n,a)=>new un({shape:n,unknownKeys:"strip",catchall:Ga.create(),typeName:ut.ZodObject,...vt(a)});class vl extends St{_parse(a){const{ctx:s}=this._processInputParams(a),i=this._def.options;function l(c){for(const d of c)if(d.result.status==="valid")return d.result;for(const d of c)if(d.result.status==="dirty")return s.common.issues.push(...d.ctx.common.issues),d.result;const h=c.map(d=>new wr(d.ctx.common.issues));return $e(s,{code:Ge.invalid_union,unionErrors:h}),ft}if(s.common.async)return Promise.all(i.map(async c=>{const h={...s,common:{...s.common,issues:[]},parent:null};return{result:await c._parseAsync({data:s.data,path:s.path,parent:h}),ctx:h}})).then(l);{let c;const h=[];for(const m of i){const p={...s,common:{...s.common,issues:[]},parent:null},v=m._parseSync({data:s.data,path:s.path,parent:p});if(v.status==="valid")return v;v.status==="dirty"&&!c&&(c={result:v,ctx:p}),p.common.issues.length&&h.push(p.common.issues)}if(c)return s.common.issues.push(...c.ctx.common.issues),c.result;const d=h.map(m=>new wr(m));return $e(s,{code:Ge.invalid_union,unionErrors:d}),ft}}get options(){return this._def.options}}vl.create=(n,a)=>new vl({options:n,typeName:ut.ZodUnion,...vt(a)});const Fa=n=>n instanceof _l?Fa(n.schema):n instanceof ra?Fa(n.innerType()):n instanceof Sl?[n.value]:n instanceof Cs?n.options:n instanceof El?jt.objectValues(n.enum):n instanceof wl?Fa(n._def.innerType):n instanceof gl?[void 0]:n instanceof yl?[null]:n instanceof fa?[void 0,...Fa(n.unwrap())]:n instanceof Os?[null,...Fa(n.unwrap())]:n instanceof Fh||n instanceof Al?Fa(n.unwrap()):n instanceof Tl?Fa(n._def.innerType):[];class Au extends St{_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==Qe.object)return $e(s,{code:Ge.invalid_type,expected:Qe.object,received:s.parsedType}),ft;const i=this.discriminator,l=s.data[i],c=this.optionsMap.get(l);return c?s.common.async?c._parseAsync({data:s.data,path:s.path,parent:s}):c._parseSync({data:s.data,path:s.path,parent:s}):($e(s,{code:Ge.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[i]}),ft)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(a,s,i){const l=new Map;for(const c of s){const h=Fa(c.shape[a]);if(!h.length)throw new Error(`A discriminator value for key \`${a}\` could not be extracted from all schema options`);for(const d of h){if(l.has(d))throw new Error(`Discriminator property ${String(a)} has duplicate value ${String(d)}`);l.set(d,c)}}return new Au({typeName:ut.ZodDiscriminatedUnion,discriminator:a,options:s,optionsMap:l,...vt(i)})}}function kh(n,a){const s=ws(n),i=ws(a);if(n===a)return{valid:!0,data:n};if(s===Qe.object&&i===Qe.object){const l=jt.objectKeys(a),c=jt.objectKeys(n).filter(d=>l.indexOf(d)!==-1),h={...n,...a};for(const d of c){const m=kh(n[d],a[d]);if(!m.valid)return{valid:!1};h[d]=m.data}return{valid:!0,data:h}}else if(s===Qe.array&&i===Qe.array){if(n.length!==a.length)return{valid:!1};const l=[];for(let c=0;c<n.length;c++){const h=n[c],d=a[c],m=kh(h,d);if(!m.valid)return{valid:!1};l.push(m.data)}return{valid:!0,data:l}}else return s===Qe.date&&i===Qe.date&&+n==+a?{valid:!0,data:n}:{valid:!1}}class bl extends St{_parse(a){const{status:s,ctx:i}=this._processInputParams(a),l=(c,h)=>{if(Th(c)||Th(h))return ft;const d=kh(c.value,h.value);return d.valid?((Ah(c)||Ah(h))&&s.dirty(),{status:s.value,value:d.data}):($e(i,{code:Ge.invalid_intersection_types}),ft)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([c,h])=>l(c,h)):l(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}bl.create=(n,a,s)=>new bl({left:n,right:a,typeName:ut.ZodIntersection,...vt(s)});class pa extends St{_parse(a){const{status:s,ctx:i}=this._processInputParams(a);if(i.parsedType!==Qe.array)return $e(i,{code:Ge.invalid_type,expected:Qe.array,received:i.parsedType}),ft;if(i.data.length<this._def.items.length)return $e(i,{code:Ge.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),ft;!this._def.rest&&i.data.length>this._def.items.length&&($e(i,{code:Ge.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),s.dirty());const c=[...i.data].map((h,d)=>{const m=this._def.items[d]||this._def.rest;return m?m._parse(new ha(i,h,i.path,d)):null}).filter(h=>!!h);return i.common.async?Promise.all(c).then(h=>Zn.mergeArray(s,h)):Zn.mergeArray(s,c)}get items(){return this._def.items}rest(a){return new pa({...this._def,rest:a})}}pa.create=(n,a)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new pa({items:n,typeName:ut.ZodTuple,rest:null,...vt(a)})};class xl extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){const{status:s,ctx:i}=this._processInputParams(a);if(i.parsedType!==Qe.object)return $e(i,{code:Ge.invalid_type,expected:Qe.object,received:i.parsedType}),ft;const l=[],c=this._def.keyType,h=this._def.valueType;for(const d in i.data)l.push({key:c._parse(new ha(i,d,i.path,d)),value:h._parse(new ha(i,i.data[d],i.path,d)),alwaysSet:d in i.data});return i.common.async?Zn.mergeObjectAsync(s,l):Zn.mergeObjectSync(s,l)}get element(){return this._def.valueType}static create(a,s,i){return s instanceof St?new xl({keyType:a,valueType:s,typeName:ut.ZodRecord,...vt(i)}):new xl({keyType:ea.create(),valueType:a,typeName:ut.ZodRecord,...vt(s)})}}class vu extends St{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(a){const{status:s,ctx:i}=this._processInputParams(a);if(i.parsedType!==Qe.map)return $e(i,{code:Ge.invalid_type,expected:Qe.map,received:i.parsedType}),ft;const l=this._def.keyType,c=this._def.valueType,h=[...i.data.entries()].map(([d,m],p)=>({key:l._parse(new ha(i,d,i.path,[p,"key"])),value:c._parse(new ha(i,m,i.path,[p,"value"]))}));if(i.common.async){const d=new Map;return Promise.resolve().then(async()=>{for(const m of h){const p=await m.key,v=await m.value;if(p.status==="aborted"||v.status==="aborted")return ft;(p.status==="dirty"||v.status==="dirty")&&s.dirty(),d.set(p.value,v.value)}return{status:s.value,value:d}})}else{const d=new Map;for(const m of h){const p=m.key,v=m.value;if(p.status==="aborted"||v.status==="aborted")return ft;(p.status==="dirty"||v.status==="dirty")&&s.dirty(),d.set(p.value,v.value)}return{status:s.value,value:d}}}}vu.create=(n,a,s)=>new vu({valueType:a,keyType:n,typeName:ut.ZodMap,...vt(s)});class ii extends St{_parse(a){const{status:s,ctx:i}=this._processInputParams(a);if(i.parsedType!==Qe.set)return $e(i,{code:Ge.invalid_type,expected:Qe.set,received:i.parsedType}),ft;const l=this._def;l.minSize!==null&&i.data.size<l.minSize.value&&($e(i,{code:Ge.too_small,minimum:l.minSize.value,type:"set",inclusive:!0,exact:!1,message:l.minSize.message}),s.dirty()),l.maxSize!==null&&i.data.size>l.maxSize.value&&($e(i,{code:Ge.too_big,maximum:l.maxSize.value,type:"set",inclusive:!0,exact:!1,message:l.maxSize.message}),s.dirty());const c=this._def.valueType;function h(m){const p=new Set;for(const v of m){if(v.status==="aborted")return ft;v.status==="dirty"&&s.dirty(),p.add(v.value)}return{status:s.value,value:p}}const d=[...i.data.values()].map((m,p)=>c._parse(new ha(i,m,i.path,p)));return i.common.async?Promise.all(d).then(m=>h(m)):h(d)}min(a,s){return new ii({...this._def,minSize:{value:a,message:rt.toString(s)}})}max(a,s){return new ii({...this._def,maxSize:{value:a,message:rt.toString(s)}})}size(a,s){return this.min(a,s).max(a,s)}nonempty(a){return this.min(1,a)}}ii.create=(n,a)=>new ii({valueType:n,minSize:null,maxSize:null,typeName:ut.ZodSet,...vt(a)});class eo extends St{constructor(){super(...arguments),this.validate=this.implement}_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==Qe.function)return $e(s,{code:Ge.invalid_type,expected:Qe.function,received:s.parsedType}),ft;function i(d,m){return pu({data:d,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,hu(),ro].filter(p=>!!p),issueData:{code:Ge.invalid_arguments,argumentsError:m}})}function l(d,m){return pu({data:d,path:s.path,errorMaps:[s.common.contextualErrorMap,s.schemaErrorMap,hu(),ro].filter(p=>!!p),issueData:{code:Ge.invalid_return_type,returnTypeError:m}})}const c={errorMap:s.common.contextualErrorMap},h=s.data;if(this._def.returns instanceof so){const d=this;return er(async function(...m){const p=new wr([]),v=await d._def.args.parseAsync(m,c).catch(_=>{throw p.addIssue(i(m,_)),p}),x=await Reflect.apply(h,this,v);return await d._def.returns._def.type.parseAsync(x,c).catch(_=>{throw p.addIssue(l(x,_)),p})})}else{const d=this;return er(function(...m){const p=d._def.args.safeParse(m,c);if(!p.success)throw new wr([i(m,p.error)]);const v=Reflect.apply(h,this,p.data),x=d._def.returns.safeParse(v,c);if(!x.success)throw new wr([l(v,x.error)]);return x.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...a){return new eo({...this._def,args:pa.create(a).rest(ai.create())})}returns(a){return new eo({...this._def,returns:a})}implement(a){return this.parse(a)}strictImplement(a){return this.parse(a)}static create(a,s,i){return new eo({args:a||pa.create([]).rest(ai.create()),returns:s||ai.create(),typeName:ut.ZodFunction,...vt(i)})}}class _l extends St{get schema(){return this._def.getter()}_parse(a){const{ctx:s}=this._processInputParams(a);return this._def.getter()._parse({data:s.data,path:s.path,parent:s})}}_l.create=(n,a)=>new _l({getter:n,typeName:ut.ZodLazy,...vt(a)});class Sl extends St{_parse(a){if(a.data!==this._def.value){const s=this._getOrReturnCtx(a);return $e(s,{received:s.data,code:Ge.invalid_literal,expected:this._def.value}),ft}return{status:"valid",value:a.data}}get value(){return this._def.value}}Sl.create=(n,a)=>new Sl({value:n,typeName:ut.ZodLiteral,...vt(a)});function Tb(n,a){return new Cs({values:n,typeName:ut.ZodEnum,...vt(a)})}class Cs extends St{constructor(){super(...arguments),ll.set(this,void 0)}_parse(a){if(typeof a.data!="string"){const s=this._getOrReturnCtx(a),i=this._def.values;return $e(s,{expected:jt.joinValues(i),received:s.parsedType,code:Ge.invalid_type}),ft}if(mu(this,ll)||_b(this,ll,new Set(this._def.values)),!mu(this,ll).has(a.data)){const s=this._getOrReturnCtx(a),i=this._def.values;return $e(s,{received:s.data,code:Ge.invalid_enum_value,options:i}),ft}return er(a.data)}get options(){return this._def.values}get enum(){const a={};for(const s of this._def.values)a[s]=s;return a}get Values(){const a={};for(const s of this._def.values)a[s]=s;return a}get Enum(){const a={};for(const s of this._def.values)a[s]=s;return a}extract(a,s=this._def){return Cs.create(a,{...this._def,...s})}exclude(a,s=this._def){return Cs.create(this.options.filter(i=>!a.includes(i)),{...this._def,...s})}}ll=new WeakMap;Cs.create=Tb;class El extends St{constructor(){super(...arguments),cl.set(this,void 0)}_parse(a){const s=jt.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(a);if(i.parsedType!==Qe.string&&i.parsedType!==Qe.number){const l=jt.objectValues(s);return $e(i,{expected:jt.joinValues(l),received:i.parsedType,code:Ge.invalid_type}),ft}if(mu(this,cl)||_b(this,cl,new Set(jt.getValidEnumValues(this._def.values))),!mu(this,cl).has(a.data)){const l=jt.objectValues(s);return $e(i,{received:i.data,code:Ge.invalid_enum_value,options:l}),ft}return er(a.data)}get enum(){return this._def.values}}cl=new WeakMap;El.create=(n,a)=>new El({values:n,typeName:ut.ZodNativeEnum,...vt(a)});class so extends St{unwrap(){return this._def.type}_parse(a){const{ctx:s}=this._processInputParams(a);if(s.parsedType!==Qe.promise&&s.common.async===!1)return $e(s,{code:Ge.invalid_type,expected:Qe.promise,received:s.parsedType}),ft;const i=s.parsedType===Qe.promise?s.data:Promise.resolve(s.data);return er(i.then(l=>this._def.type.parseAsync(l,{path:s.path,errorMap:s.common.contextualErrorMap})))}}so.create=(n,a)=>new so({type:n,typeName:ut.ZodPromise,...vt(a)});class ra extends St{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ut.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(a){const{status:s,ctx:i}=this._processInputParams(a),l=this._def.effect||null,c={addIssue:h=>{$e(i,h),h.fatal?s.abort():s.dirty()},get path(){return i.path}};if(c.addIssue=c.addIssue.bind(c),l.type==="preprocess"){const h=l.transform(i.data,c);if(i.common.async)return Promise.resolve(h).then(async d=>{if(s.value==="aborted")return ft;const m=await this._def.schema._parseAsync({data:d,path:i.path,parent:i});return m.status==="aborted"?ft:m.status==="dirty"||s.value==="dirty"?Ki(m.value):m});{if(s.value==="aborted")return ft;const d=this._def.schema._parseSync({data:h,path:i.path,parent:i});return d.status==="aborted"?ft:d.status==="dirty"||s.value==="dirty"?Ki(d.value):d}}if(l.type==="refinement"){const h=d=>{const m=l.refinement(d,c);if(i.common.async)return Promise.resolve(m);if(m instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return d};if(i.common.async===!1){const d=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return d.status==="aborted"?ft:(d.status==="dirty"&&s.dirty(),h(d.value),{status:s.value,value:d.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(d=>d.status==="aborted"?ft:(d.status==="dirty"&&s.dirty(),h(d.value).then(()=>({status:s.value,value:d.value}))))}if(l.type==="transform")if(i.common.async===!1){const h=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!hl(h))return h;const d=l.transform(h.value,c);if(d instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:s.value,value:d}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(h=>hl(h)?Promise.resolve(l.transform(h.value,c)).then(d=>({status:s.value,value:d})):h);jt.assertNever(l)}}ra.create=(n,a,s)=>new ra({schema:n,typeName:ut.ZodEffects,effect:a,...vt(s)});ra.createWithPreprocess=(n,a,s)=>new ra({schema:a,effect:{type:"preprocess",transform:n},typeName:ut.ZodEffects,...vt(s)});class fa extends St{_parse(a){return this._getType(a)===Qe.undefined?er(void 0):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}fa.create=(n,a)=>new fa({innerType:n,typeName:ut.ZodOptional,...vt(a)});class Os extends St{_parse(a){return this._getType(a)===Qe.null?er(null):this._def.innerType._parse(a)}unwrap(){return this._def.innerType}}Os.create=(n,a)=>new Os({innerType:n,typeName:ut.ZodNullable,...vt(a)});class wl extends St{_parse(a){const{ctx:s}=this._processInputParams(a);let i=s.data;return s.parsedType===Qe.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:s.path,parent:s})}removeDefault(){return this._def.innerType}}wl.create=(n,a)=>new wl({innerType:n,typeName:ut.ZodDefault,defaultValue:typeof a.default=="function"?a.default:()=>a.default,...vt(a)});class Tl extends St{_parse(a){const{ctx:s}=this._processInputParams(a),i={...s,common:{...s.common,issues:[]}},l=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return pl(l)?l.then(c=>({status:"valid",value:c.status==="valid"?c.value:this._def.catchValue({get error(){return new wr(i.common.issues)},input:i.data})})):{status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new wr(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Tl.create=(n,a)=>new Tl({innerType:n,typeName:ut.ZodCatch,catchValue:typeof a.catch=="function"?a.catch:()=>a.catch,...vt(a)});class bu extends St{_parse(a){if(this._getType(a)!==Qe.nan){const i=this._getOrReturnCtx(a);return $e(i,{code:Ge.invalid_type,expected:Qe.nan,received:i.parsedType}),ft}return{status:"valid",value:a.data}}}bu.create=n=>new bu({typeName:ut.ZodNaN,...vt(n)});const GS=Symbol("zod_brand");class Fh extends St{_parse(a){const{ctx:s}=this._processInputParams(a),i=s.data;return this._def.type._parse({data:i,path:s.path,parent:s})}unwrap(){return this._def.type}}class Cl extends St{_parse(a){const{status:s,ctx:i}=this._processInputParams(a);if(i.common.async)return(async()=>{const c=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return c.status==="aborted"?ft:c.status==="dirty"?(s.dirty(),Ki(c.value)):this._def.out._parseAsync({data:c.value,path:i.path,parent:i})})();{const l=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?ft:l.status==="dirty"?(s.dirty(),{status:"dirty",value:l.value}):this._def.out._parseSync({data:l.value,path:i.path,parent:i})}}static create(a,s){return new Cl({in:a,out:s,typeName:ut.ZodPipeline})}}class Al extends St{_parse(a){const s=this._def.innerType._parse(a),i=l=>(hl(l)&&(l.value=Object.freeze(l.value)),l);return pl(s)?s.then(l=>i(l)):i(s)}unwrap(){return this._def.innerType}}Al.create=(n,a)=>new Al({innerType:n,typeName:ut.ZodReadonly,...vt(a)});function Ab(n,a={},s){return n?ao.create().superRefine((i,l)=>{var c,h;if(!n(i)){const d=typeof a=="function"?a(i):typeof a=="string"?{message:a}:a,m=(h=(c=d.fatal)!==null&&c!==void 0?c:s)!==null&&h!==void 0?h:!0,p=typeof d=="string"?{message:d}:d;l.addIssue({code:"custom",...p,fatal:m})}}):ao.create()}const qS={object:un.lazycreate};var ut;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ut||(ut={}));const HS=(n,a={message:`Input not instance of ${n.name}`})=>Ab(s=>s instanceof n,a),kb=ea.create,Nb=Ns.create,PS=bu.create,YS=Ds.create,Db=ml.create,VS=si.create,$S=gu.create,ZS=gl.create,QS=yl.create,JS=ao.create,KS=ai.create,XS=Ga.create,WS=yu.create,eE=ta.create,tE=un.create,nE=un.strictCreate,rE=vl.create,aE=Au.create,sE=bl.create,iE=pa.create,oE=xl.create,lE=vu.create,cE=ii.create,uE=eo.create,dE=_l.create,fE=Sl.create,hE=Cs.create,pE=El.create,mE=so.create,My=ra.create,gE=fa.create,yE=Os.create,vE=ra.createWithPreprocess,bE=Cl.create,xE=()=>kb().optional(),_E=()=>Nb().optional(),SE=()=>Db().optional(),EE={string:(n=>ea.create({...n,coerce:!0})),number:(n=>Ns.create({...n,coerce:!0})),boolean:(n=>ml.create({...n,coerce:!0})),bigint:(n=>Ds.create({...n,coerce:!0})),date:(n=>si.create({...n,coerce:!0}))},wE=ft;var pe=Object.freeze({__proto__:null,defaultErrorMap:ro,setErrorMap:wS,getErrorMap:hu,makeIssue:pu,EMPTY_PATH:TS,addIssueToContext:$e,ParseStatus:Zn,INVALID:ft,DIRTY:Ki,OK:er,isAborted:Th,isDirty:Ah,isValid:hl,isAsync:pl,get util(){return jt},get objectUtil(){return wh},ZodParsedType:Qe,getParsedType:ws,ZodType:St,datetimeRegex:wb,ZodString:ea,ZodNumber:Ns,ZodBigInt:Ds,ZodBoolean:ml,ZodDate:si,ZodSymbol:gu,ZodUndefined:gl,ZodNull:yl,ZodAny:ao,ZodUnknown:ai,ZodNever:Ga,ZodVoid:yu,ZodArray:ta,ZodObject:un,ZodUnion:vl,ZodDiscriminatedUnion:Au,ZodIntersection:bl,ZodTuple:pa,ZodRecord:xl,ZodMap:vu,ZodSet:ii,ZodFunction:eo,ZodLazy:_l,ZodLiteral:Sl,ZodEnum:Cs,ZodNativeEnum:El,ZodPromise:so,ZodEffects:ra,ZodTransformer:ra,ZodOptional:fa,ZodNullable:Os,ZodDefault:wl,ZodCatch:Tl,ZodNaN:bu,BRAND:GS,ZodBranded:Fh,ZodPipeline:Cl,ZodReadonly:Al,custom:Ab,Schema:St,ZodSchema:St,late:qS,get ZodFirstPartyTypeKind(){return ut},coerce:EE,any:JS,array:eE,bigint:YS,boolean:Db,date:VS,discriminatedUnion:aE,effect:My,enum:hE,function:uE,instanceof:HS,intersection:sE,lazy:dE,literal:fE,map:lE,nan:PS,nativeEnum:pE,never:XS,null:QS,nullable:yE,number:Nb,object:tE,oboolean:SE,onumber:_E,optional:gE,ostring:xE,pipeline:bE,preprocess:vE,promise:mE,record:oE,set:cE,strictObject:nE,string:kb,symbol:$S,transformer:My,tuple:iE,undefined:ZS,union:rE,unknown:KS,void:WS,NEVER:wE,ZodIssueCode:Ge,quotelessJson:ES,ZodError:wr});const Cb=pe.object({id:pe.union([pe.string(),pe.number()]).nullable().optional().transform(n=>n?String(n):crypto.randomUUID()),text:pe.preprocess(n=>n??"",pe.string()),explanation:pe.string().nullable().optional().transform(n=>n??"")}),Ob=pe.object({front:pe.preprocess(n=>n??"",pe.string()),back:pe.preprocess(n=>n??"",pe.string())}),Rb=pe.object({questionType:pe.literal("multipleChoice"),questionText:pe.preprocess(n=>n??"",pe.string()),options:pe.preprocess(n=>Array.isArray(n)?n:[],pe.array(Cb)),correctAnswerId:pe.preprocess(n=>n?String(n):"",pe.string()),detailedExplanation:pe.string().nullable().optional().transform(n=>n??""),tags:pe.array(pe.string()).optional()}),TE=pe.object({name:pe.string(),description:pe.preprocess(n=>n??"",pe.string()),questions:pe.array(Rb)}),jb=pe.object({id:pe.coerce.string(),dueDate:pe.string().nullable().optional().transform(n=>n??new Date().toISOString()),interval:pe.number().nullable().optional().transform(n=>n??0),easeFactor:pe.number().nullable().optional().transform(n=>n??Er),suspended:pe.boolean().nullable().optional().transform(n=>n??!1),masteryLevel:pe.number().nullable().optional().transform(n=>n??0),lastReviewed:pe.string().nullable().optional(),lapses:pe.number().nullable().optional().transform(n=>n??0)}),Ib=jb.extend({front:pe.string().nullable().optional().transform(n=>n??""),back:pe.string().nullable().optional().transform(n=>n??""),css:pe.string().nullable().optional(),frontAudio:pe.string().nullable().optional(),backAudio:pe.string().nullable().optional(),tags:pe.array(pe.string()).nullable().optional().transform(n=>n??[])}),Gh=jb.extend({questionType:pe.literal("multipleChoice"),questionText:pe.string().nullable().optional().transform(n=>n??""),options:pe.array(Cb).nullable().optional().transform(n=>n??[]),correctAnswerId:pe.string().nullable().optional().transform(n=>n??""),detailedExplanation:pe.string().nullable().optional().transform(n=>n??""),tags:pe.array(pe.string()).nullable().optional().transform(n=>n??[]),infoCardIds:pe.array(pe.string()).nullable().optional().transform(n=>n??[]),userSelectedAnswerId:pe.string().optional()}),Mb=pe.object({id:pe.coerce.string(),content:pe.string().nullable().optional().transform(n=>n??""),unlocksQuestionIds:pe.array(pe.string()).nullable().optional().transform(n=>n??[])}),qh=pe.object({id:pe.coerce.string(),name:pe.coerce.string(),description:pe.string().nullable().optional().transform(n=>n??""),folderId:pe.string().nullable().optional(),lastOpened:pe.string().nullable().optional(),archived:pe.boolean().nullable().optional(),deletedAt:pe.string().nullable().optional(),lastModified:pe.number().nullable().optional(),locked:pe.boolean().nullable().optional(),icon:pe.string().nullable().optional(),aiGenerationParams:pe.any().optional(),suggestedQuestionCount:pe.number().nullable().optional()}),AE=qh.extend({type:pe.literal(Ue.Flashcard),cards:pe.array(Ib).nullable().optional().transform(n=>n??[])}),kE=qh.extend({type:pe.literal(Ue.Quiz),questions:pe.array(Gh).nullable().optional().transform(n=>n??[])}),NE=qh.extend({type:pe.literal(Ue.Learning),infoCards:pe.array(Mb).nullable().optional().transform(n=>n??[]),questions:pe.array(Gh).nullable().optional().transform(n=>n??[])}),DE=n=>{if(typeof n!="object"||n===null)return{id:crypto.randomUUID(),name:"Corrupted Deck Entry",type:Ue.Flashcard,cards:[],description:"This deck entry was corrupted in the source file and could not be restored."};const a={...n};a.id||(a.id=crypto.randomUUID()),a.id=String(a.id),(a.name===null||a.name===void 0)&&(a.name="Untitled Deck"),a.name=String(a.name),a.type&&typeof a.type=="string"&&(a.type=a.type.toLowerCase());const s=Object.values(Ue).map(l=>l.toString());(!a.type||!s.includes(a.type))&&(Array.isArray(a.infoCards)&&a.infoCards.length>0?a.type=Ue.Learning:Array.isArray(a.questions)&&a.questions.length>0?a.type=Ue.Quiz:a.type=Ue.Flashcard),(a.description===null||a.description===void 0)&&(a.description="");const i=l=>!l||typeof l!="object"?null:(l.id||(l.id=crypto.randomUUID()),l.id=String(l.id),a.type===Ue.Flashcard&&((l.front===null||l.front===void 0)&&(l.front=""),(l.back===null||l.back===void 0)&&(l.back="")),l);return Array.isArray(a.cards)?a.cards=a.cards.map(i).filter(l=>l!==null):a.cards=[],Array.isArray(a.questions)?a.questions=a.questions.map(l=>{const c=i(l);return c?(c.questionType||(c.questionType="multipleChoice"),c):null}).filter(l=>l!==null):a.questions=[],Array.isArray(a.infoCards)?a.infoCards=a.infoCards.map(i).filter(l=>l!==null):a.infoCards=[],a},CE=pe.preprocess(DE,pe.union([AE,kE,NE])),OE=pe.object({id:pe.coerce.string(),name:pe.coerce.string()}),RE=pe.object({title:pe.string().nullable().optional().transform(n=>n??"Untitled Level"),deckIds:pe.array(pe.coerce.string()).nullable().optional().transform(n=>n??[])}),jE=pe.object({id:pe.coerce.string(),type:pe.literal("series"),name:pe.string(),description:pe.string().nullable().optional().transform(n=>n??""),levels:pe.array(RE).nullable().optional().transform(n=>n??[]),createdAt:pe.string().nullable().optional().transform(n=>n??new Date().toISOString()),lastOpened:pe.string().nullable().optional(),archived:pe.boolean().nullable().optional(),deletedAt:pe.string().nullable().optional(),lastModified:pe.number().nullable().optional(),aiGenerationParams:pe.any().optional(),aiChatHistory:pe.array(pe.any()).optional()}),IE=pe.object({id:pe.union([pe.string(),pe.number()]).optional(),itemId:pe.coerce.string(),deckId:pe.coerce.string(),seriesId:pe.string().optional(),timestamp:pe.string(),rating:pe.nativeEnum(Sr).nullable().optional(),newInterval:pe.number(),easeFactor:pe.number(),masteryLevel:pe.number().nullable().optional().transform(n=>n??0)}),ME=pe.object({id:pe.string(),reviewQueue:pe.array(pe.any()).transform(n=>Array.isArray(n)?n.map(a=>{if(!a||typeof a!="object")return null;if("questionType"in a){const i=Gh.safeParse(a);return i.success?i.data:null}if("content"in a||"unlocksQuestionIds"in a){const i=Mb.safeParse(a);return i.success?i.data:null}const s=Ib.safeParse(a);return s.success?s.data:null}).filter(a=>a!==null):[]),currentIndex:pe.number(),itemsCompleted:pe.number().nullable().optional().transform(n=>n??0),readInfoCardIds:pe.array(pe.string()).optional(),unlockedQuestionIds:pe.array(pe.string()).optional()}),UE=pe.object({id:pe.string(),role:pe.enum(["user","model"]),text:pe.string(),actions:pe.array(pe.any()).optional(),isLoading:pe.boolean().optional()}),LE=pe.object({deckId:pe.string(),readInfoCardIds:pe.array(pe.string()).nullable().optional().transform(n=>n??[]),unlockedQuestionIds:pe.array(pe.string()).nullable().optional().transform(n=>n??[]),lastReadCardId:pe.string().optional()}),zE=pe.object({version:pe.number(),decks:pe.array(CE),folders:pe.array(OE).nullable().optional().transform(n=>n??[]),deckSeries:pe.array(jE).nullable().optional().transform(n=>n??[]),reviews:pe.array(IE).nullable().optional().transform(n=>n??[]),sessions:pe.array(ME).nullable().optional().transform(n=>n??[]),seriesProgress:pe.record(pe.string(),pe.array(pe.string())).nullable().optional().transform(n=>n??{}),learningProgress:pe.record(pe.string(),LE).nullable().optional().transform(n=>n??{}),aiChatHistory:pe.array(UE).nullable().optional().transform(n=>n??[]),aiOptions:pe.any().optional(),settings:pe.any().optional()}),BE=pe.object({title:pe.string().nullable().optional().transform(n=>n??"Untitled Level"),decks:pe.array(pe.any())}),FE=pe.object({seriesName:pe.string(),seriesDescription:pe.preprocess(n=>n??"",pe.string()),levels:pe.array(BE)});function Vc(n){throw new Error('Could not dynamically require "'+n+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rh={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/var Uy;function GE(){return Uy||(Uy=1,(function(n,a){(function(s){n.exports=s()})(function(){return(function s(i,l,c){function h(p,v){if(!l[p]){if(!i[p]){var x=typeof Vc=="function"&&Vc;if(!v&&x)return x(p,!0);if(d)return d(p,!0);var T=new Error("Cannot find module '"+p+"'");throw T.code="MODULE_NOT_FOUND",T}var _=l[p]={exports:{}};i[p][0].call(_.exports,function(E){var S=i[p][1][E];return h(S||E)},_,_.exports,s,i,l,c)}return l[p].exports}for(var d=typeof Vc=="function"&&Vc,m=0;m<c.length;m++)h(c[m]);return h})({1:[function(s,i,l){var c=s("./utils"),h=s("./support"),d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";l.encode=function(m){for(var p,v,x,T,_,E,S,w=[],O=0,I=m.length,U=I,z=c.getTypeOf(m)!=="string";O<m.length;)U=I-O,x=z?(p=m[O++],v=O<I?m[O++]:0,O<I?m[O++]:0):(p=m.charCodeAt(O++),v=O<I?m.charCodeAt(O++):0,O<I?m.charCodeAt(O++):0),T=p>>2,_=(3&p)<<4|v>>4,E=1<U?(15&v)<<2|x>>6:64,S=2<U?63&x:64,w.push(d.charAt(T)+d.charAt(_)+d.charAt(E)+d.charAt(S));return w.join("")},l.decode=function(m){var p,v,x,T,_,E,S=0,w=0,O="data:";if(m.substr(0,O.length)===O)throw new Error("Invalid base64 input, it looks like a data url.");var I,U=3*(m=m.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(m.charAt(m.length-1)===d.charAt(64)&&U--,m.charAt(m.length-2)===d.charAt(64)&&U--,U%1!=0)throw new Error("Invalid base64 input, bad content length.");for(I=h.uint8array?new Uint8Array(0|U):new Array(0|U);S<m.length;)p=d.indexOf(m.charAt(S++))<<2|(T=d.indexOf(m.charAt(S++)))>>4,v=(15&T)<<4|(_=d.indexOf(m.charAt(S++)))>>2,x=(3&_)<<6|(E=d.indexOf(m.charAt(S++))),I[w++]=p,_!==64&&(I[w++]=v),E!==64&&(I[w++]=x);return I}},{"./support":30,"./utils":32}],2:[function(s,i,l){var c=s("./external"),h=s("./stream/DataWorker"),d=s("./stream/Crc32Probe"),m=s("./stream/DataLengthProbe");function p(v,x,T,_,E){this.compressedSize=v,this.uncompressedSize=x,this.crc32=T,this.compression=_,this.compressedContent=E}p.prototype={getContentWorker:function(){var v=new h(c.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new m("data_length")),x=this;return v.on("end",function(){if(this.streamInfo.data_length!==x.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new h(c.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},p.createWorkerFrom=function(v,x,T){return v.pipe(new d).pipe(new m("uncompressedSize")).pipe(x.compressWorker(T)).pipe(new m("compressedSize")).withStreamInfo("compression",x)},i.exports=p},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(s,i,l){var c=s("./stream/GenericWorker");l.STORE={magic:"\0\0",compressWorker:function(){return new c("STORE compression")},uncompressWorker:function(){return new c("STORE decompression")}},l.DEFLATE=s("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(s,i,l){var c=s("./utils"),h=(function(){for(var d,m=[],p=0;p<256;p++){d=p;for(var v=0;v<8;v++)d=1&d?3988292384^d>>>1:d>>>1;m[p]=d}return m})();i.exports=function(d,m){return d!==void 0&&d.length?c.getTypeOf(d)!=="string"?(function(p,v,x,T){var _=h,E=T+x;p^=-1;for(var S=T;S<E;S++)p=p>>>8^_[255&(p^v[S])];return-1^p})(0|m,d,d.length,0):(function(p,v,x,T){var _=h,E=T+x;p^=-1;for(var S=T;S<E;S++)p=p>>>8^_[255&(p^v.charCodeAt(S))];return-1^p})(0|m,d,d.length,0):0}},{"./utils":32}],5:[function(s,i,l){l.base64=!1,l.binary=!1,l.dir=!1,l.createFolders=!0,l.date=null,l.compression=null,l.compressionOptions=null,l.comment=null,l.unixPermissions=null,l.dosPermissions=null},{}],6:[function(s,i,l){var c=null;c=typeof Promise<"u"?Promise:s("lie"),i.exports={Promise:c}},{lie:37}],7:[function(s,i,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",h=s("pako"),d=s("./utils"),m=s("./stream/GenericWorker"),p=c?"uint8array":"array";function v(x,T){m.call(this,"FlateWorker/"+x),this._pako=null,this._pakoAction=x,this._pakoOptions=T,this.meta={}}l.magic="\b\0",d.inherits(v,m),v.prototype.processChunk=function(x){this.meta=x.meta,this._pako===null&&this._createPako(),this._pako.push(d.transformTo(p,x.data),!1)},v.prototype.flush=function(){m.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){m.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new h[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var x=this;this._pako.onData=function(T){x.push({data:T,meta:x.meta})}},l.compressWorker=function(x){return new v("Deflate",x)},l.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(s,i,l){function c(_,E){var S,w="";for(S=0;S<E;S++)w+=String.fromCharCode(255&_),_>>>=8;return w}function h(_,E,S,w,O,I){var U,z,F=_.file,V=_.compression,M=I!==p.utf8encode,j=d.transformTo("string",I(F.name)),R=d.transformTo("string",p.utf8encode(F.name)),P=F.comment,re=d.transformTo("string",I(P)),B=d.transformTo("string",p.utf8encode(P)),X=R.length!==F.name.length,C=B.length!==P.length,ie="",$="",q="",se=F.dir,W=F.date,me={crc32:0,compressedSize:0,uncompressedSize:0};E&&!S||(me.crc32=_.crc32,me.compressedSize=_.compressedSize,me.uncompressedSize=_.uncompressedSize);var L=0;E&&(L|=8),M||!X&&!C||(L|=2048);var A=0,Z=0;se&&(A|=16),O==="UNIX"?(Z=798,A|=(function(te,fe){var Ee=te;return te||(Ee=fe?16893:33204),(65535&Ee)<<16})(F.unixPermissions,se)):(Z=20,A|=(function(te){return 63&(te||0)})(F.dosPermissions)),U=W.getUTCHours(),U<<=6,U|=W.getUTCMinutes(),U<<=5,U|=W.getUTCSeconds()/2,z=W.getUTCFullYear()-1980,z<<=4,z|=W.getUTCMonth()+1,z<<=5,z|=W.getUTCDate(),X&&($=c(1,1)+c(v(j),4)+R,ie+="up"+c($.length,2)+$),C&&(q=c(1,1)+c(v(re),4)+B,ie+="uc"+c(q.length,2)+q);var K="";return K+=`
\0`,K+=c(L,2),K+=V.magic,K+=c(U,2),K+=c(z,2),K+=c(me.crc32,4),K+=c(me.compressedSize,4),K+=c(me.uncompressedSize,4),K+=c(j.length,2),K+=c(ie.length,2),{fileRecord:x.LOCAL_FILE_HEADER+K+j+ie,dirRecord:x.CENTRAL_FILE_HEADER+c(Z,2)+K+c(re.length,2)+"\0\0\0\0"+c(A,4)+c(w,4)+j+ie+re}}var d=s("../utils"),m=s("../stream/GenericWorker"),p=s("../utf8"),v=s("../crc32"),x=s("../signature");function T(_,E,S,w){m.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=E,this.zipPlatform=S,this.encodeFileName=w,this.streamFiles=_,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}d.inherits(T,m),T.prototype.push=function(_){var E=_.meta.percent||0,S=this.entriesCount,w=this._sources.length;this.accumulate?this.contentBuffer.push(_):(this.bytesWritten+=_.data.length,m.prototype.push.call(this,{data:_.data,meta:{currentFile:this.currentFile,percent:S?(E+100*(S-w-1))/S:100}}))},T.prototype.openedSource=function(_){this.currentSourceOffset=this.bytesWritten,this.currentFile=_.file.name;var E=this.streamFiles&&!_.file.dir;if(E){var S=h(_,E,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:S.fileRecord,meta:{percent:0}})}else this.accumulate=!0},T.prototype.closedSource=function(_){this.accumulate=!1;var E=this.streamFiles&&!_.file.dir,S=h(_,E,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(S.dirRecord),E)this.push({data:(function(w){return x.DATA_DESCRIPTOR+c(w.crc32,4)+c(w.compressedSize,4)+c(w.uncompressedSize,4)})(_),meta:{percent:100}});else for(this.push({data:S.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},T.prototype.flush=function(){for(var _=this.bytesWritten,E=0;E<this.dirRecords.length;E++)this.push({data:this.dirRecords[E],meta:{percent:100}});var S=this.bytesWritten-_,w=(function(O,I,U,z,F){var V=d.transformTo("string",F(z));return x.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(O,2)+c(O,2)+c(I,4)+c(U,4)+c(V.length,2)+V})(this.dirRecords.length,S,_,this.zipComment,this.encodeFileName);this.push({data:w,meta:{percent:100}})},T.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},T.prototype.registerPrevious=function(_){this._sources.push(_);var E=this;return _.on("data",function(S){E.processChunk(S)}),_.on("end",function(){E.closedSource(E.previous.streamInfo),E._sources.length?E.prepareNextSource():E.end()}),_.on("error",function(S){E.error(S)}),this},T.prototype.resume=function(){return!!m.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},T.prototype.error=function(_){var E=this._sources;if(!m.prototype.error.call(this,_))return!1;for(var S=0;S<E.length;S++)try{E[S].error(_)}catch{}return!0},T.prototype.lock=function(){m.prototype.lock.call(this);for(var _=this._sources,E=0;E<_.length;E++)_[E].lock()},i.exports=T},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(s,i,l){var c=s("../compressions"),h=s("./ZipFileWorker");l.generateWorker=function(d,m,p){var v=new h(m.streamFiles,p,m.platform,m.encodeFileName),x=0;try{d.forEach(function(T,_){x++;var E=(function(I,U){var z=I||U,F=c[z];if(!F)throw new Error(z+" is not a valid compression method !");return F})(_.options.compression,m.compression),S=_.options.compressionOptions||m.compressionOptions||{},w=_.dir,O=_.date;_._compressWorker(E,S).withStreamInfo("file",{name:T,dir:w,date:O,comment:_.comment||"",unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions}).pipe(v)}),v.entriesCount=x}catch(T){v.error(T)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(s,i,l){function c(){if(!(this instanceof c))return new c;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var h=new c;for(var d in this)typeof this[d]!="function"&&(h[d]=this[d]);return h}}(c.prototype=s("./object")).loadAsync=s("./load"),c.support=s("./support"),c.defaults=s("./defaults"),c.version="3.10.1",c.loadAsync=function(h,d){return new c().loadAsync(h,d)},c.external=s("./external"),i.exports=c},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(s,i,l){var c=s("./utils"),h=s("./external"),d=s("./utf8"),m=s("./zipEntries"),p=s("./stream/Crc32Probe"),v=s("./nodejsUtils");function x(T){return new h.Promise(function(_,E){var S=T.decompressed.getContentWorker().pipe(new p);S.on("error",function(w){E(w)}).on("end",function(){S.streamInfo.crc32!==T.decompressed.crc32?E(new Error("Corrupted zip : CRC32 mismatch")):_()}).resume()})}i.exports=function(T,_){var E=this;return _=c.extend(_||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:d.utf8decode}),v.isNode&&v.isStream(T)?h.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):c.prepareContent("the loaded zip file",T,!0,_.optimizedBinaryString,_.base64).then(function(S){var w=new m(_);return w.load(S),w}).then(function(S){var w=[h.Promise.resolve(S)],O=S.files;if(_.checkCRC32)for(var I=0;I<O.length;I++)w.push(x(O[I]));return h.Promise.all(w)}).then(function(S){for(var w=S.shift(),O=w.files,I=0;I<O.length;I++){var U=O[I],z=U.fileNameStr,F=c.resolve(U.fileNameStr);E.file(F,U.decompressed,{binary:!0,optimizedBinaryString:!0,date:U.date,dir:U.dir,comment:U.fileCommentStr.length?U.fileCommentStr:null,unixPermissions:U.unixPermissions,dosPermissions:U.dosPermissions,createFolders:_.createFolders}),U.dir||(E.file(F).unsafeOriginalName=z)}return w.zipComment.length&&(E.comment=w.zipComment),E})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(s,i,l){var c=s("../utils"),h=s("../stream/GenericWorker");function d(m,p){h.call(this,"Nodejs stream input adapter for "+m),this._upstreamEnded=!1,this._bindStream(p)}c.inherits(d,h),d.prototype._bindStream=function(m){var p=this;(this._stream=m).pause(),m.on("data",function(v){p.push({data:v,meta:{percent:0}})}).on("error",function(v){p.isPaused?this.generatedError=v:p.error(v)}).on("end",function(){p.isPaused?p._upstreamEnded=!0:p.end()})},d.prototype.pause=function(){return!!h.prototype.pause.call(this)&&(this._stream.pause(),!0)},d.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},i.exports=d},{"../stream/GenericWorker":28,"../utils":32}],13:[function(s,i,l){var c=s("readable-stream").Readable;function h(d,m,p){c.call(this,m),this._helper=d;var v=this;d.on("data",function(x,T){v.push(x)||v._helper.pause(),p&&p(T)}).on("error",function(x){v.emit("error",x)}).on("end",function(){v.push(null)})}s("../utils").inherits(h,c),h.prototype._read=function(){this._helper.resume()},i.exports=h},{"../utils":32,"readable-stream":16}],14:[function(s,i,l){i.exports={isNode:typeof Buffer<"u",newBufferFrom:function(c,h){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(c,h);if(typeof c=="number")throw new Error('The "data" argument must not be a number');return new Buffer(c,h)},allocBuffer:function(c){if(Buffer.alloc)return Buffer.alloc(c);var h=new Buffer(c);return h.fill(0),h},isBuffer:function(c){return Buffer.isBuffer(c)},isStream:function(c){return c&&typeof c.on=="function"&&typeof c.pause=="function"&&typeof c.resume=="function"}}},{}],15:[function(s,i,l){function c(F,V,M){var j,R=d.getTypeOf(V),P=d.extend(M||{},v);P.date=P.date||new Date,P.compression!==null&&(P.compression=P.compression.toUpperCase()),typeof P.unixPermissions=="string"&&(P.unixPermissions=parseInt(P.unixPermissions,8)),P.unixPermissions&&16384&P.unixPermissions&&(P.dir=!0),P.dosPermissions&&16&P.dosPermissions&&(P.dir=!0),P.dir&&(F=O(F)),P.createFolders&&(j=w(F))&&I.call(this,j,!0);var re=R==="string"&&P.binary===!1&&P.base64===!1;M&&M.binary!==void 0||(P.binary=!re),(V instanceof x&&V.uncompressedSize===0||P.dir||!V||V.length===0)&&(P.base64=!1,P.binary=!0,V="",P.compression="STORE",R="string");var B=null;B=V instanceof x||V instanceof m?V:E.isNode&&E.isStream(V)?new S(F,V):d.prepareContent(F,V,P.binary,P.optimizedBinaryString,P.base64);var X=new T(F,B,P);this.files[F]=X}var h=s("./utf8"),d=s("./utils"),m=s("./stream/GenericWorker"),p=s("./stream/StreamHelper"),v=s("./defaults"),x=s("./compressedObject"),T=s("./zipObject"),_=s("./generate"),E=s("./nodejsUtils"),S=s("./nodejs/NodejsStreamInputAdapter"),w=function(F){F.slice(-1)==="/"&&(F=F.substring(0,F.length-1));var V=F.lastIndexOf("/");return 0<V?F.substring(0,V):""},O=function(F){return F.slice(-1)!=="/"&&(F+="/"),F},I=function(F,V){return V=V!==void 0?V:v.createFolders,F=O(F),this.files[F]||c.call(this,F,null,{dir:!0,createFolders:V}),this.files[F]};function U(F){return Object.prototype.toString.call(F)==="[object RegExp]"}var z={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(F){var V,M,j;for(V in this.files)j=this.files[V],(M=V.slice(this.root.length,V.length))&&V.slice(0,this.root.length)===this.root&&F(M,j)},filter:function(F){var V=[];return this.forEach(function(M,j){F(M,j)&&V.push(j)}),V},file:function(F,V,M){if(arguments.length!==1)return F=this.root+F,c.call(this,F,V,M),this;if(U(F)){var j=F;return this.filter(function(P,re){return!re.dir&&j.test(P)})}var R=this.files[this.root+F];return R&&!R.dir?R:null},folder:function(F){if(!F)return this;if(U(F))return this.filter(function(R,P){return P.dir&&F.test(R)});var V=this.root+F,M=I.call(this,V),j=this.clone();return j.root=M.name,j},remove:function(F){F=this.root+F;var V=this.files[F];if(V||(F.slice(-1)!=="/"&&(F+="/"),V=this.files[F]),V&&!V.dir)delete this.files[F];else for(var M=this.filter(function(R,P){return P.name.slice(0,F.length)===F}),j=0;j<M.length;j++)delete this.files[M[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(F){var V,M={};try{if((M=d.extend(F||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:h.utf8encode})).type=M.type.toLowerCase(),M.compression=M.compression.toUpperCase(),M.type==="binarystring"&&(M.type="string"),!M.type)throw new Error("No output type specified.");d.checkSupport(M.type),M.platform!=="darwin"&&M.platform!=="freebsd"&&M.platform!=="linux"&&M.platform!=="sunos"||(M.platform="UNIX"),M.platform==="win32"&&(M.platform="DOS");var j=M.comment||this.comment||"";V=_.generateWorker(this,M,j)}catch(R){(V=new m("error")).error(R)}return new p(V,M.type||"string",M.mimeType)},generateAsync:function(F,V){return this.generateInternalStream(F).accumulate(V)},generateNodeStream:function(F,V){return(F=F||{}).type||(F.type="nodebuffer"),this.generateInternalStream(F).toNodejsStream(V)}};i.exports=z},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(s,i,l){i.exports=s("stream")},{stream:void 0}],17:[function(s,i,l){var c=s("./DataReader");function h(d){c.call(this,d);for(var m=0;m<this.data.length;m++)d[m]=255&d[m]}s("../utils").inherits(h,c),h.prototype.byteAt=function(d){return this.data[this.zero+d]},h.prototype.lastIndexOfSignature=function(d){for(var m=d.charCodeAt(0),p=d.charCodeAt(1),v=d.charCodeAt(2),x=d.charCodeAt(3),T=this.length-4;0<=T;--T)if(this.data[T]===m&&this.data[T+1]===p&&this.data[T+2]===v&&this.data[T+3]===x)return T-this.zero;return-1},h.prototype.readAndCheckSignature=function(d){var m=d.charCodeAt(0),p=d.charCodeAt(1),v=d.charCodeAt(2),x=d.charCodeAt(3),T=this.readData(4);return m===T[0]&&p===T[1]&&v===T[2]&&x===T[3]},h.prototype.readData=function(d){if(this.checkOffset(d),d===0)return[];var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=h},{"../utils":32,"./DataReader":18}],18:[function(s,i,l){var c=s("../utils");function h(d){this.data=d,this.length=d.length,this.index=0,this.zero=0}h.prototype={checkOffset:function(d){this.checkIndex(this.index+d)},checkIndex:function(d){if(this.length<this.zero+d||d<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+d+"). Corrupted zip ?")},setIndex:function(d){this.checkIndex(d),this.index=d},skip:function(d){this.setIndex(this.index+d)},byteAt:function(){},readInt:function(d){var m,p=0;for(this.checkOffset(d),m=this.index+d-1;m>=this.index;m--)p=(p<<8)+this.byteAt(m);return this.index+=d,p},readString:function(d){return c.transformTo("string",this.readData(d))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var d=this.readInt(4);return new Date(Date.UTC(1980+(d>>25&127),(d>>21&15)-1,d>>16&31,d>>11&31,d>>5&63,(31&d)<<1))}},i.exports=h},{"../utils":32}],19:[function(s,i,l){var c=s("./Uint8ArrayReader");function h(d){c.call(this,d)}s("../utils").inherits(h,c),h.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=h},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(s,i,l){var c=s("./DataReader");function h(d){c.call(this,d)}s("../utils").inherits(h,c),h.prototype.byteAt=function(d){return this.data.charCodeAt(this.zero+d)},h.prototype.lastIndexOfSignature=function(d){return this.data.lastIndexOf(d)-this.zero},h.prototype.readAndCheckSignature=function(d){return d===this.readData(4)},h.prototype.readData=function(d){this.checkOffset(d);var m=this.data.slice(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=h},{"../utils":32,"./DataReader":18}],21:[function(s,i,l){var c=s("./ArrayReader");function h(d){c.call(this,d)}s("../utils").inherits(h,c),h.prototype.readData=function(d){if(this.checkOffset(d),d===0)return new Uint8Array(0);var m=this.data.subarray(this.zero+this.index,this.zero+this.index+d);return this.index+=d,m},i.exports=h},{"../utils":32,"./ArrayReader":17}],22:[function(s,i,l){var c=s("../utils"),h=s("../support"),d=s("./ArrayReader"),m=s("./StringReader"),p=s("./NodeBufferReader"),v=s("./Uint8ArrayReader");i.exports=function(x){var T=c.getTypeOf(x);return c.checkSupport(T),T!=="string"||h.uint8array?T==="nodebuffer"?new p(x):h.uint8array?new v(c.transformTo("uint8array",x)):new d(c.transformTo("array",x)):new m(x)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(s,i,l){l.LOCAL_FILE_HEADER="PK",l.CENTRAL_FILE_HEADER="PK",l.CENTRAL_DIRECTORY_END="PK",l.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",l.ZIP64_CENTRAL_DIRECTORY_END="PK",l.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(s,i,l){var c=s("./GenericWorker"),h=s("../utils");function d(m){c.call(this,"ConvertWorker to "+m),this.destType=m}h.inherits(d,c),d.prototype.processChunk=function(m){this.push({data:h.transformTo(this.destType,m.data),meta:m.meta})},i.exports=d},{"../utils":32,"./GenericWorker":28}],25:[function(s,i,l){var c=s("./GenericWorker"),h=s("../crc32");function d(){c.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}s("../utils").inherits(d,c),d.prototype.processChunk=function(m){this.streamInfo.crc32=h(m.data,this.streamInfo.crc32||0),this.push(m)},i.exports=d},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(s,i,l){var c=s("../utils"),h=s("./GenericWorker");function d(m){h.call(this,"DataLengthProbe for "+m),this.propName=m,this.withStreamInfo(m,0)}c.inherits(d,h),d.prototype.processChunk=function(m){if(m){var p=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=p+m.data.length}h.prototype.processChunk.call(this,m)},i.exports=d},{"../utils":32,"./GenericWorker":28}],27:[function(s,i,l){var c=s("../utils"),h=s("./GenericWorker");function d(m){h.call(this,"DataWorker");var p=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,m.then(function(v){p.dataIsReady=!0,p.data=v,p.max=v&&v.length||0,p.type=c.getTypeOf(v),p.isPaused||p._tickAndRepeat()},function(v){p.error(v)})}c.inherits(d,h),d.prototype.cleanUp=function(){h.prototype.cleanUp.call(this),this.data=null},d.prototype.resume=function(){return!!h.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,c.delay(this._tickAndRepeat,[],this)),!0)},d.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(c.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},d.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var m=null,p=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":m=this.data.substring(this.index,p);break;case"uint8array":m=this.data.subarray(this.index,p);break;case"array":case"nodebuffer":m=this.data.slice(this.index,p)}return this.index=p,this.push({data:m,meta:{percent:this.max?this.index/this.max*100:0}})},i.exports=d},{"../utils":32,"./GenericWorker":28}],28:[function(s,i,l){function c(h){this.name=h||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}c.prototype={push:function(h){this.emit("data",h)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(h){this.emit("error",h)}return!0},error:function(h){return!this.isFinished&&(this.isPaused?this.generatedError=h:(this.isFinished=!0,this.emit("error",h),this.previous&&this.previous.error(h),this.cleanUp()),!0)},on:function(h,d){return this._listeners[h].push(d),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(h,d){if(this._listeners[h])for(var m=0;m<this._listeners[h].length;m++)this._listeners[h][m].call(this,d)},pipe:function(h){return h.registerPrevious(this)},registerPrevious:function(h){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=h.streamInfo,this.mergeStreamInfo(),this.previous=h;var d=this;return h.on("data",function(m){d.processChunk(m)}),h.on("end",function(){d.end()}),h.on("error",function(m){d.error(m)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var h=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),h=!0),this.previous&&this.previous.resume(),!h},flush:function(){},processChunk:function(h){this.push(h)},withStreamInfo:function(h,d){return this.extraStreamInfo[h]=d,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var h in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,h)&&(this.streamInfo[h]=this.extraStreamInfo[h])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var h="Worker "+this.name;return this.previous?this.previous+" -> "+h:h}},i.exports=c},{}],29:[function(s,i,l){var c=s("../utils"),h=s("./ConvertWorker"),d=s("./GenericWorker"),m=s("../base64"),p=s("../support"),v=s("../external"),x=null;if(p.nodestream)try{x=s("../nodejs/NodejsStreamOutputAdapter")}catch{}function T(E,S){return new v.Promise(function(w,O){var I=[],U=E._internalType,z=E._outputType,F=E._mimeType;E.on("data",function(V,M){I.push(V),S&&S(M)}).on("error",function(V){I=[],O(V)}).on("end",function(){try{var V=(function(M,j,R){switch(M){case"blob":return c.newBlob(c.transformTo("arraybuffer",j),R);case"base64":return m.encode(j);default:return c.transformTo(M,j)}})(z,(function(M,j){var R,P=0,re=null,B=0;for(R=0;R<j.length;R++)B+=j[R].length;switch(M){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(re=new Uint8Array(B),R=0;R<j.length;R++)re.set(j[R],P),P+=j[R].length;return re;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+M+"'")}})(U,I),F);w(V)}catch(M){O(M)}I=[]}).resume()})}function _(E,S,w){var O=S;switch(S){case"blob":case"arraybuffer":O="uint8array";break;case"base64":O="string"}try{this._internalType=O,this._outputType=S,this._mimeType=w,c.checkSupport(O),this._worker=E.pipe(new h(O)),E.lock()}catch(I){this._worker=new d("error"),this._worker.error(I)}}_.prototype={accumulate:function(E){return T(this,E)},on:function(E,S){var w=this;return E==="data"?this._worker.on(E,function(O){S.call(w,O.data,O.meta)}):this._worker.on(E,function(){c.delay(S,arguments,w)}),this},resume:function(){return c.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(E){if(c.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new x(this,{objectMode:this._outputType!=="nodebuffer"},E)}},i.exports=_},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(s,i,l){if(l.base64=!0,l.array=!0,l.string=!0,l.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",l.nodebuffer=typeof Buffer<"u",l.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")l.blob=!1;else{var c=new ArrayBuffer(0);try{l.blob=new Blob([c],{type:"application/zip"}).size===0}catch{try{var h=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);h.append(c),l.blob=h.getBlob("application/zip").size===0}catch{l.blob=!1}}}try{l.nodestream=!!s("readable-stream").Readable}catch{l.nodestream=!1}},{"readable-stream":16}],31:[function(s,i,l){for(var c=s("./utils"),h=s("./support"),d=s("./nodejsUtils"),m=s("./stream/GenericWorker"),p=new Array(256),v=0;v<256;v++)p[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;p[254]=p[254]=1;function x(){m.call(this,"utf-8 decode"),this.leftOver=null}function T(){m.call(this,"utf-8 encode")}l.utf8encode=function(_){return h.nodebuffer?d.newBufferFrom(_,"utf-8"):(function(E){var S,w,O,I,U,z=E.length,F=0;for(I=0;I<z;I++)(64512&(w=E.charCodeAt(I)))==55296&&I+1<z&&(64512&(O=E.charCodeAt(I+1)))==56320&&(w=65536+(w-55296<<10)+(O-56320),I++),F+=w<128?1:w<2048?2:w<65536?3:4;for(S=h.uint8array?new Uint8Array(F):new Array(F),I=U=0;U<F;I++)(64512&(w=E.charCodeAt(I)))==55296&&I+1<z&&(64512&(O=E.charCodeAt(I+1)))==56320&&(w=65536+(w-55296<<10)+(O-56320),I++),w<128?S[U++]=w:(w<2048?S[U++]=192|w>>>6:(w<65536?S[U++]=224|w>>>12:(S[U++]=240|w>>>18,S[U++]=128|w>>>12&63),S[U++]=128|w>>>6&63),S[U++]=128|63&w);return S})(_)},l.utf8decode=function(_){return h.nodebuffer?c.transformTo("nodebuffer",_).toString("utf-8"):(function(E){var S,w,O,I,U=E.length,z=new Array(2*U);for(S=w=0;S<U;)if((O=E[S++])<128)z[w++]=O;else if(4<(I=p[O]))z[w++]=65533,S+=I-1;else{for(O&=I===2?31:I===3?15:7;1<I&&S<U;)O=O<<6|63&E[S++],I--;1<I?z[w++]=65533:O<65536?z[w++]=O:(O-=65536,z[w++]=55296|O>>10&1023,z[w++]=56320|1023&O)}return z.length!==w&&(z.subarray?z=z.subarray(0,w):z.length=w),c.applyFromCharCode(z)})(_=c.transformTo(h.uint8array?"uint8array":"array",_))},c.inherits(x,m),x.prototype.processChunk=function(_){var E=c.transformTo(h.uint8array?"uint8array":"array",_.data);if(this.leftOver&&this.leftOver.length){if(h.uint8array){var S=E;(E=new Uint8Array(S.length+this.leftOver.length)).set(this.leftOver,0),E.set(S,this.leftOver.length)}else E=this.leftOver.concat(E);this.leftOver=null}var w=(function(I,U){var z;for((U=U||I.length)>I.length&&(U=I.length),z=U-1;0<=z&&(192&I[z])==128;)z--;return z<0||z===0?U:z+p[I[z]]>U?z:U})(E),O=E;w!==E.length&&(h.uint8array?(O=E.subarray(0,w),this.leftOver=E.subarray(w,E.length)):(O=E.slice(0,w),this.leftOver=E.slice(w,E.length))),this.push({data:l.utf8decode(O),meta:_.meta})},x.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:l.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},l.Utf8DecodeWorker=x,c.inherits(T,m),T.prototype.processChunk=function(_){this.push({data:l.utf8encode(_.data),meta:_.meta})},l.Utf8EncodeWorker=T},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(s,i,l){var c=s("./support"),h=s("./base64"),d=s("./nodejsUtils"),m=s("./external");function p(S){return S}function v(S,w){for(var O=0;O<S.length;++O)w[O]=255&S.charCodeAt(O);return w}s("setimmediate"),l.newBlob=function(S,w){l.checkSupport("blob");try{return new Blob([S],{type:w})}catch{try{var O=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return O.append(S),O.getBlob(w)}catch{throw new Error("Bug : can't construct the Blob.")}}};var x={stringifyByChunk:function(S,w,O){var I=[],U=0,z=S.length;if(z<=O)return String.fromCharCode.apply(null,S);for(;U<z;)w==="array"||w==="nodebuffer"?I.push(String.fromCharCode.apply(null,S.slice(U,Math.min(U+O,z)))):I.push(String.fromCharCode.apply(null,S.subarray(U,Math.min(U+O,z)))),U+=O;return I.join("")},stringifyByChar:function(S){for(var w="",O=0;O<S.length;O++)w+=String.fromCharCode(S[O]);return w},applyCanBeUsed:{uint8array:(function(){try{return c.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}})(),nodebuffer:(function(){try{return c.nodebuffer&&String.fromCharCode.apply(null,d.allocBuffer(1)).length===1}catch{return!1}})()}};function T(S){var w=65536,O=l.getTypeOf(S),I=!0;if(O==="uint8array"?I=x.applyCanBeUsed.uint8array:O==="nodebuffer"&&(I=x.applyCanBeUsed.nodebuffer),I)for(;1<w;)try{return x.stringifyByChunk(S,O,w)}catch{w=Math.floor(w/2)}return x.stringifyByChar(S)}function _(S,w){for(var O=0;O<S.length;O++)w[O]=S[O];return w}l.applyFromCharCode=T;var E={};E.string={string:p,array:function(S){return v(S,new Array(S.length))},arraybuffer:function(S){return E.string.uint8array(S).buffer},uint8array:function(S){return v(S,new Uint8Array(S.length))},nodebuffer:function(S){return v(S,d.allocBuffer(S.length))}},E.array={string:T,array:p,arraybuffer:function(S){return new Uint8Array(S).buffer},uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return d.newBufferFrom(S)}},E.arraybuffer={string:function(S){return T(new Uint8Array(S))},array:function(S){return _(new Uint8Array(S),new Array(S.byteLength))},arraybuffer:p,uint8array:function(S){return new Uint8Array(S)},nodebuffer:function(S){return d.newBufferFrom(new Uint8Array(S))}},E.uint8array={string:T,array:function(S){return _(S,new Array(S.length))},arraybuffer:function(S){return S.buffer},uint8array:p,nodebuffer:function(S){return d.newBufferFrom(S)}},E.nodebuffer={string:T,array:function(S){return _(S,new Array(S.length))},arraybuffer:function(S){return E.nodebuffer.uint8array(S).buffer},uint8array:function(S){return _(S,new Uint8Array(S.length))},nodebuffer:p},l.transformTo=function(S,w){if(w=w||"",!S)return w;l.checkSupport(S);var O=l.getTypeOf(w);return E[O][S](w)},l.resolve=function(S){for(var w=S.split("/"),O=[],I=0;I<w.length;I++){var U=w[I];U==="."||U===""&&I!==0&&I!==w.length-1||(U===".."?O.pop():O.push(U))}return O.join("/")},l.getTypeOf=function(S){return typeof S=="string"?"string":Object.prototype.toString.call(S)==="[object Array]"?"array":c.nodebuffer&&d.isBuffer(S)?"nodebuffer":c.uint8array&&S instanceof Uint8Array?"uint8array":c.arraybuffer&&S instanceof ArrayBuffer?"arraybuffer":void 0},l.checkSupport=function(S){if(!c[S.toLowerCase()])throw new Error(S+" is not supported by this platform")},l.MAX_VALUE_16BITS=65535,l.MAX_VALUE_32BITS=-1,l.pretty=function(S){var w,O,I="";for(O=0;O<(S||"").length;O++)I+="\\x"+((w=S.charCodeAt(O))<16?"0":"")+w.toString(16).toUpperCase();return I},l.delay=function(S,w,O){setImmediate(function(){S.apply(O||null,w||[])})},l.inherits=function(S,w){function O(){}O.prototype=w.prototype,S.prototype=new O},l.extend=function(){var S,w,O={};for(S=0;S<arguments.length;S++)for(w in arguments[S])Object.prototype.hasOwnProperty.call(arguments[S],w)&&O[w]===void 0&&(O[w]=arguments[S][w]);return O},l.prepareContent=function(S,w,O,I,U){return m.Promise.resolve(w).then(function(z){return c.blob&&(z instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(z))!==-1)&&typeof FileReader<"u"?new m.Promise(function(F,V){var M=new FileReader;M.onload=function(j){F(j.target.result)},M.onerror=function(j){V(j.target.error)},M.readAsArrayBuffer(z)}):z}).then(function(z){var F=l.getTypeOf(z);return F?(F==="arraybuffer"?z=l.transformTo("uint8array",z):F==="string"&&(U?z=h.decode(z):O&&I!==!0&&(z=(function(V){return v(V,c.uint8array?new Uint8Array(V.length):new Array(V.length))})(z))),z):m.Promise.reject(new Error("Can't read the data of '"+S+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(s,i,l){var c=s("./reader/readerFor"),h=s("./utils"),d=s("./signature"),m=s("./zipEntry"),p=s("./support");function v(x){this.files=[],this.loadOptions=x}v.prototype={checkSignature:function(x){if(!this.reader.readAndCheckSignature(x)){this.reader.index-=4;var T=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+h.pretty(T)+", expected "+h.pretty(x)+")")}},isSignature:function(x,T){var _=this.reader.index;this.reader.setIndex(x);var E=this.reader.readString(4)===T;return this.reader.setIndex(_),E},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var x=this.reader.readData(this.zipCommentLength),T=p.uint8array?"uint8array":"array",_=h.transformTo(T,x);this.zipComment=this.loadOptions.decodeFileName(_)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var x,T,_,E=this.zip64EndOfCentralSize-44;0<E;)x=this.reader.readInt(2),T=this.reader.readInt(4),_=this.reader.readData(T),this.zip64ExtensibleData[x]={id:x,length:T,value:_}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var x,T;for(x=0;x<this.files.length;x++)T=this.files[x],this.reader.setIndex(T.localHeaderOffset),this.checkSignature(d.LOCAL_FILE_HEADER),T.readLocalPart(this.reader),T.handleUTF8(),T.processAttributes()},readCentralDir:function(){var x;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(d.CENTRAL_FILE_HEADER);)(x=new m({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(x);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var x=this.reader.lastIndexOfSignature(d.CENTRAL_DIRECTORY_END);if(x<0)throw this.isSignature(0,d.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(x);var T=x;if(this.checkSignature(d.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===h.MAX_VALUE_16BITS||this.diskWithCentralDirStart===h.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===h.MAX_VALUE_16BITS||this.centralDirRecords===h.MAX_VALUE_16BITS||this.centralDirSize===h.MAX_VALUE_32BITS||this.centralDirOffset===h.MAX_VALUE_32BITS){if(this.zip64=!0,(x=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(x),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,d.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(d.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var _=this.centralDirOffset+this.centralDirSize;this.zip64&&(_+=20,_+=12+this.zip64EndOfCentralSize);var E=T-_;if(0<E)this.isSignature(T,d.CENTRAL_FILE_HEADER)||(this.reader.zero=E);else if(E<0)throw new Error("Corrupted zip: missing "+Math.abs(E)+" bytes.")},prepareReader:function(x){this.reader=c(x)},load:function(x){this.prepareReader(x),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},i.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(s,i,l){var c=s("./reader/readerFor"),h=s("./utils"),d=s("./compressedObject"),m=s("./crc32"),p=s("./utf8"),v=s("./compressions"),x=s("./support");function T(_,E){this.options=_,this.loadOptions=E}T.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(_){var E,S;if(_.skip(22),this.fileNameLength=_.readInt(2),S=_.readInt(2),this.fileName=_.readData(this.fileNameLength),_.skip(S),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((E=(function(w){for(var O in v)if(Object.prototype.hasOwnProperty.call(v,O)&&v[O].magic===w)return v[O];return null})(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+h.pretty(this.compressionMethod)+" unknown (inner file : "+h.transformTo("string",this.fileName)+")");this.decompressed=new d(this.compressedSize,this.uncompressedSize,this.crc32,E,_.readData(this.compressedSize))},readCentralPart:function(_){this.versionMadeBy=_.readInt(2),_.skip(2),this.bitFlag=_.readInt(2),this.compressionMethod=_.readString(2),this.date=_.readDate(),this.crc32=_.readInt(4),this.compressedSize=_.readInt(4),this.uncompressedSize=_.readInt(4);var E=_.readInt(2);if(this.extraFieldsLength=_.readInt(2),this.fileCommentLength=_.readInt(2),this.diskNumberStart=_.readInt(2),this.internalFileAttributes=_.readInt(2),this.externalFileAttributes=_.readInt(4),this.localHeaderOffset=_.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");_.skip(E),this.readExtraFields(_),this.parseZIP64ExtraField(_),this.fileComment=_.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var _=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),_==0&&(this.dosPermissions=63&this.externalFileAttributes),_==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var _=c(this.extraFields[1].value);this.uncompressedSize===h.MAX_VALUE_32BITS&&(this.uncompressedSize=_.readInt(8)),this.compressedSize===h.MAX_VALUE_32BITS&&(this.compressedSize=_.readInt(8)),this.localHeaderOffset===h.MAX_VALUE_32BITS&&(this.localHeaderOffset=_.readInt(8)),this.diskNumberStart===h.MAX_VALUE_32BITS&&(this.diskNumberStart=_.readInt(4))}},readExtraFields:function(_){var E,S,w,O=_.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});_.index+4<O;)E=_.readInt(2),S=_.readInt(2),w=_.readData(S),this.extraFields[E]={id:E,length:S,value:w};_.setIndex(O)},handleUTF8:function(){var _=x.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=p.utf8decode(this.fileName),this.fileCommentStr=p.utf8decode(this.fileComment);else{var E=this.findExtraFieldUnicodePath();if(E!==null)this.fileNameStr=E;else{var S=h.transformTo(_,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(S)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var O=h.transformTo(_,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(O)}}},findExtraFieldUnicodePath:function(){var _=this.extraFields[28789];if(_){var E=c(_.value);return E.readInt(1)!==1||m(this.fileName)!==E.readInt(4)?null:p.utf8decode(E.readData(_.length-5))}return null},findExtraFieldUnicodeComment:function(){var _=this.extraFields[25461];if(_){var E=c(_.value);return E.readInt(1)!==1||m(this.fileComment)!==E.readInt(4)?null:p.utf8decode(E.readData(_.length-5))}return null}},i.exports=T},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(s,i,l){function c(E,S,w){this.name=E,this.dir=w.dir,this.date=w.date,this.comment=w.comment,this.unixPermissions=w.unixPermissions,this.dosPermissions=w.dosPermissions,this._data=S,this._dataBinary=w.binary,this.options={compression:w.compression,compressionOptions:w.compressionOptions}}var h=s("./stream/StreamHelper"),d=s("./stream/DataWorker"),m=s("./utf8"),p=s("./compressedObject"),v=s("./stream/GenericWorker");c.prototype={internalStream:function(E){var S=null,w="string";try{if(!E)throw new Error("No output type specified.");var O=(w=E.toLowerCase())==="string"||w==="text";w!=="binarystring"&&w!=="text"||(w="string"),S=this._decompressWorker();var I=!this._dataBinary;I&&!O&&(S=S.pipe(new m.Utf8EncodeWorker)),!I&&O&&(S=S.pipe(new m.Utf8DecodeWorker))}catch(U){(S=new v("error")).error(U)}return new h(S,w,"")},async:function(E,S){return this.internalStream(E).accumulate(S)},nodeStream:function(E,S){return this.internalStream(E||"nodebuffer").toNodejsStream(S)},_compressWorker:function(E,S){if(this._data instanceof p&&this._data.compression.magic===E.magic)return this._data.getCompressedWorker();var w=this._decompressWorker();return this._dataBinary||(w=w.pipe(new m.Utf8EncodeWorker)),p.createWorkerFrom(w,E,S)},_decompressWorker:function(){return this._data instanceof p?this._data.getContentWorker():this._data instanceof v?this._data:new d(this._data)}};for(var x=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],T=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},_=0;_<x.length;_++)c.prototype[x[_]]=T;i.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(s,i,l){(function(c){var h,d,m=c.MutationObserver||c.WebKitMutationObserver;if(m){var p=0,v=new m(E),x=c.document.createTextNode("");v.observe(x,{characterData:!0}),h=function(){x.data=p=++p%2}}else if(c.setImmediate||c.MessageChannel===void 0)h="document"in c&&"onreadystatechange"in c.document.createElement("script")?function(){var S=c.document.createElement("script");S.onreadystatechange=function(){E(),S.onreadystatechange=null,S.parentNode.removeChild(S),S=null},c.document.documentElement.appendChild(S)}:function(){setTimeout(E,0)};else{var T=new c.MessageChannel;T.port1.onmessage=E,h=function(){T.port2.postMessage(0)}}var _=[];function E(){var S,w;d=!0;for(var O=_.length;O;){for(w=_,_=[],S=-1;++S<O;)w[S]();O=_.length}d=!1}i.exports=function(S){_.push(S)!==1||d||h()}}).call(this,typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(s,i,l){var c=s("immediate");function h(){}var d={},m=["REJECTED"],p=["FULFILLED"],v=["PENDING"];function x(O){if(typeof O!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,O!==h&&S(this,O)}function T(O,I,U){this.promise=O,typeof I=="function"&&(this.onFulfilled=I,this.callFulfilled=this.otherCallFulfilled),typeof U=="function"&&(this.onRejected=U,this.callRejected=this.otherCallRejected)}function _(O,I,U){c(function(){var z;try{z=I(U)}catch(F){return d.reject(O,F)}z===O?d.reject(O,new TypeError("Cannot resolve promise with itself")):d.resolve(O,z)})}function E(O){var I=O&&O.then;if(O&&(typeof O=="object"||typeof O=="function")&&typeof I=="function")return function(){I.apply(O,arguments)}}function S(O,I){var U=!1;function z(M){U||(U=!0,d.reject(O,M))}function F(M){U||(U=!0,d.resolve(O,M))}var V=w(function(){I(F,z)});V.status==="error"&&z(V.value)}function w(O,I){var U={};try{U.value=O(I),U.status="success"}catch(z){U.status="error",U.value=z}return U}(i.exports=x).prototype.finally=function(O){if(typeof O!="function")return this;var I=this.constructor;return this.then(function(U){return I.resolve(O()).then(function(){return U})},function(U){return I.resolve(O()).then(function(){throw U})})},x.prototype.catch=function(O){return this.then(null,O)},x.prototype.then=function(O,I){if(typeof O!="function"&&this.state===p||typeof I!="function"&&this.state===m)return this;var U=new this.constructor(h);return this.state!==v?_(U,this.state===p?O:I,this.outcome):this.queue.push(new T(U,O,I)),U},T.prototype.callFulfilled=function(O){d.resolve(this.promise,O)},T.prototype.otherCallFulfilled=function(O){_(this.promise,this.onFulfilled,O)},T.prototype.callRejected=function(O){d.reject(this.promise,O)},T.prototype.otherCallRejected=function(O){_(this.promise,this.onRejected,O)},d.resolve=function(O,I){var U=w(E,I);if(U.status==="error")return d.reject(O,U.value);var z=U.value;if(z)S(O,z);else{O.state=p,O.outcome=I;for(var F=-1,V=O.queue.length;++F<V;)O.queue[F].callFulfilled(I)}return O},d.reject=function(O,I){O.state=m,O.outcome=I;for(var U=-1,z=O.queue.length;++U<z;)O.queue[U].callRejected(I);return O},x.resolve=function(O){return O instanceof this?O:d.resolve(new this(h),O)},x.reject=function(O){var I=new this(h);return d.reject(I,O)},x.all=function(O){var I=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=O.length,z=!1;if(!U)return this.resolve([]);for(var F=new Array(U),V=0,M=-1,j=new this(h);++M<U;)R(O[M],M);return j;function R(P,re){I.resolve(P).then(function(B){F[re]=B,++V!==U||z||(z=!0,d.resolve(j,F))},function(B){z||(z=!0,d.reject(j,B))})}},x.race=function(O){var I=this;if(Object.prototype.toString.call(O)!=="[object Array]")return this.reject(new TypeError("must be an array"));var U=O.length,z=!1;if(!U)return this.resolve([]);for(var F=-1,V=new this(h);++F<U;)M=O[F],I.resolve(M).then(function(j){z||(z=!0,d.resolve(V,j))},function(j){z||(z=!0,d.reject(V,j))});var M;return V}},{immediate:36}],38:[function(s,i,l){var c={};(0,s("./lib/utils/common").assign)(c,s("./lib/deflate"),s("./lib/inflate"),s("./lib/zlib/constants")),i.exports=c},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(s,i,l){var c=s("./zlib/deflate"),h=s("./utils/common"),d=s("./utils/strings"),m=s("./zlib/messages"),p=s("./zlib/zstream"),v=Object.prototype.toString,x=0,T=-1,_=0,E=8;function S(O){if(!(this instanceof S))return new S(O);this.options=h.assign({level:T,method:E,chunkSize:16384,windowBits:15,memLevel:8,strategy:_,to:""},O||{});var I=this.options;I.raw&&0<I.windowBits?I.windowBits=-I.windowBits:I.gzip&&0<I.windowBits&&I.windowBits<16&&(I.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new p,this.strm.avail_out=0;var U=c.deflateInit2(this.strm,I.level,I.method,I.windowBits,I.memLevel,I.strategy);if(U!==x)throw new Error(m[U]);if(I.header&&c.deflateSetHeader(this.strm,I.header),I.dictionary){var z;if(z=typeof I.dictionary=="string"?d.string2buf(I.dictionary):v.call(I.dictionary)==="[object ArrayBuffer]"?new Uint8Array(I.dictionary):I.dictionary,(U=c.deflateSetDictionary(this.strm,z))!==x)throw new Error(m[U]);this._dict_set=!0}}function w(O,I){var U=new S(I);if(U.push(O,!0),U.err)throw U.msg||m[U.err];return U.result}S.prototype.push=function(O,I){var U,z,F=this.strm,V=this.options.chunkSize;if(this.ended)return!1;z=I===~~I?I:I===!0?4:0,typeof O=="string"?F.input=d.string2buf(O):v.call(O)==="[object ArrayBuffer]"?F.input=new Uint8Array(O):F.input=O,F.next_in=0,F.avail_in=F.input.length;do{if(F.avail_out===0&&(F.output=new h.Buf8(V),F.next_out=0,F.avail_out=V),(U=c.deflate(F,z))!==1&&U!==x)return this.onEnd(U),!(this.ended=!0);F.avail_out!==0&&(F.avail_in!==0||z!==4&&z!==2)||(this.options.to==="string"?this.onData(d.buf2binstring(h.shrinkBuf(F.output,F.next_out))):this.onData(h.shrinkBuf(F.output,F.next_out)))}while((0<F.avail_in||F.avail_out===0)&&U!==1);return z===4?(U=c.deflateEnd(this.strm),this.onEnd(U),this.ended=!0,U===x):z!==2||(this.onEnd(x),!(F.avail_out=0))},S.prototype.onData=function(O){this.chunks.push(O)},S.prototype.onEnd=function(O){O===x&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=O,this.msg=this.strm.msg},l.Deflate=S,l.deflate=w,l.deflateRaw=function(O,I){return(I=I||{}).raw=!0,w(O,I)},l.gzip=function(O,I){return(I=I||{}).gzip=!0,w(O,I)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(s,i,l){var c=s("./zlib/inflate"),h=s("./utils/common"),d=s("./utils/strings"),m=s("./zlib/constants"),p=s("./zlib/messages"),v=s("./zlib/zstream"),x=s("./zlib/gzheader"),T=Object.prototype.toString;function _(S){if(!(this instanceof _))return new _(S);this.options=h.assign({chunkSize:16384,windowBits:0,to:""},S||{});var w=this.options;w.raw&&0<=w.windowBits&&w.windowBits<16&&(w.windowBits=-w.windowBits,w.windowBits===0&&(w.windowBits=-15)),!(0<=w.windowBits&&w.windowBits<16)||S&&S.windowBits||(w.windowBits+=32),15<w.windowBits&&w.windowBits<48&&(15&w.windowBits)==0&&(w.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var O=c.inflateInit2(this.strm,w.windowBits);if(O!==m.Z_OK)throw new Error(p[O]);this.header=new x,c.inflateGetHeader(this.strm,this.header)}function E(S,w){var O=new _(w);if(O.push(S,!0),O.err)throw O.msg||p[O.err];return O.result}_.prototype.push=function(S,w){var O,I,U,z,F,V,M=this.strm,j=this.options.chunkSize,R=this.options.dictionary,P=!1;if(this.ended)return!1;I=w===~~w?w:w===!0?m.Z_FINISH:m.Z_NO_FLUSH,typeof S=="string"?M.input=d.binstring2buf(S):T.call(S)==="[object ArrayBuffer]"?M.input=new Uint8Array(S):M.input=S,M.next_in=0,M.avail_in=M.input.length;do{if(M.avail_out===0&&(M.output=new h.Buf8(j),M.next_out=0,M.avail_out=j),(O=c.inflate(M,m.Z_NO_FLUSH))===m.Z_NEED_DICT&&R&&(V=typeof R=="string"?d.string2buf(R):T.call(R)==="[object ArrayBuffer]"?new Uint8Array(R):R,O=c.inflateSetDictionary(this.strm,V)),O===m.Z_BUF_ERROR&&P===!0&&(O=m.Z_OK,P=!1),O!==m.Z_STREAM_END&&O!==m.Z_OK)return this.onEnd(O),!(this.ended=!0);M.next_out&&(M.avail_out!==0&&O!==m.Z_STREAM_END&&(M.avail_in!==0||I!==m.Z_FINISH&&I!==m.Z_SYNC_FLUSH)||(this.options.to==="string"?(U=d.utf8border(M.output,M.next_out),z=M.next_out-U,F=d.buf2string(M.output,U),M.next_out=z,M.avail_out=j-z,z&&h.arraySet(M.output,M.output,U,z,0),this.onData(F)):this.onData(h.shrinkBuf(M.output,M.next_out)))),M.avail_in===0&&M.avail_out===0&&(P=!0)}while((0<M.avail_in||M.avail_out===0)&&O!==m.Z_STREAM_END);return O===m.Z_STREAM_END&&(I=m.Z_FINISH),I===m.Z_FINISH?(O=c.inflateEnd(this.strm),this.onEnd(O),this.ended=!0,O===m.Z_OK):I!==m.Z_SYNC_FLUSH||(this.onEnd(m.Z_OK),!(M.avail_out=0))},_.prototype.onData=function(S){this.chunks.push(S)},_.prototype.onEnd=function(S){S===m.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=h.flattenChunks(this.chunks)),this.chunks=[],this.err=S,this.msg=this.strm.msg},l.Inflate=_,l.inflate=E,l.inflateRaw=function(S,w){return(w=w||{}).raw=!0,E(S,w)},l.ungzip=E},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(s,i,l){var c=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";l.assign=function(m){for(var p=Array.prototype.slice.call(arguments,1);p.length;){var v=p.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var x in v)v.hasOwnProperty(x)&&(m[x]=v[x])}}return m},l.shrinkBuf=function(m,p){return m.length===p?m:m.subarray?m.subarray(0,p):(m.length=p,m)};var h={arraySet:function(m,p,v,x,T){if(p.subarray&&m.subarray)m.set(p.subarray(v,v+x),T);else for(var _=0;_<x;_++)m[T+_]=p[v+_]},flattenChunks:function(m){var p,v,x,T,_,E;for(p=x=0,v=m.length;p<v;p++)x+=m[p].length;for(E=new Uint8Array(x),p=T=0,v=m.length;p<v;p++)_=m[p],E.set(_,T),T+=_.length;return E}},d={arraySet:function(m,p,v,x,T){for(var _=0;_<x;_++)m[T+_]=p[v+_]},flattenChunks:function(m){return[].concat.apply([],m)}};l.setTyped=function(m){m?(l.Buf8=Uint8Array,l.Buf16=Uint16Array,l.Buf32=Int32Array,l.assign(l,h)):(l.Buf8=Array,l.Buf16=Array,l.Buf32=Array,l.assign(l,d))},l.setTyped(c)},{}],42:[function(s,i,l){var c=s("./common"),h=!0,d=!0;try{String.fromCharCode.apply(null,[0])}catch{h=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{d=!1}for(var m=new c.Buf8(256),p=0;p<256;p++)m[p]=252<=p?6:248<=p?5:240<=p?4:224<=p?3:192<=p?2:1;function v(x,T){if(T<65537&&(x.subarray&&d||!x.subarray&&h))return String.fromCharCode.apply(null,c.shrinkBuf(x,T));for(var _="",E=0;E<T;E++)_+=String.fromCharCode(x[E]);return _}m[254]=m[254]=1,l.string2buf=function(x){var T,_,E,S,w,O=x.length,I=0;for(S=0;S<O;S++)(64512&(_=x.charCodeAt(S)))==55296&&S+1<O&&(64512&(E=x.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(E-56320),S++),I+=_<128?1:_<2048?2:_<65536?3:4;for(T=new c.Buf8(I),S=w=0;w<I;S++)(64512&(_=x.charCodeAt(S)))==55296&&S+1<O&&(64512&(E=x.charCodeAt(S+1)))==56320&&(_=65536+(_-55296<<10)+(E-56320),S++),_<128?T[w++]=_:(_<2048?T[w++]=192|_>>>6:(_<65536?T[w++]=224|_>>>12:(T[w++]=240|_>>>18,T[w++]=128|_>>>12&63),T[w++]=128|_>>>6&63),T[w++]=128|63&_);return T},l.buf2binstring=function(x){return v(x,x.length)},l.binstring2buf=function(x){for(var T=new c.Buf8(x.length),_=0,E=T.length;_<E;_++)T[_]=x.charCodeAt(_);return T},l.buf2string=function(x,T){var _,E,S,w,O=T||x.length,I=new Array(2*O);for(_=E=0;_<O;)if((S=x[_++])<128)I[E++]=S;else if(4<(w=m[S]))I[E++]=65533,_+=w-1;else{for(S&=w===2?31:w===3?15:7;1<w&&_<O;)S=S<<6|63&x[_++],w--;1<w?I[E++]=65533:S<65536?I[E++]=S:(S-=65536,I[E++]=55296|S>>10&1023,I[E++]=56320|1023&S)}return v(I,E)},l.utf8border=function(x,T){var _;for((T=T||x.length)>x.length&&(T=x.length),_=T-1;0<=_&&(192&x[_])==128;)_--;return _<0||_===0?T:_+m[x[_]]>T?_:T}},{"./common":41}],43:[function(s,i,l){i.exports=function(c,h,d,m){for(var p=65535&c|0,v=c>>>16&65535|0,x=0;d!==0;){for(d-=x=2e3<d?2e3:d;v=v+(p=p+h[m++]|0)|0,--x;);p%=65521,v%=65521}return p|v<<16|0}},{}],44:[function(s,i,l){i.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(s,i,l){var c=(function(){for(var h,d=[],m=0;m<256;m++){h=m;for(var p=0;p<8;p++)h=1&h?3988292384^h>>>1:h>>>1;d[m]=h}return d})();i.exports=function(h,d,m,p){var v=c,x=p+m;h^=-1;for(var T=p;T<x;T++)h=h>>>8^v[255&(h^d[T])];return-1^h}},{}],46:[function(s,i,l){var c,h=s("../utils/common"),d=s("./trees"),m=s("./adler32"),p=s("./crc32"),v=s("./messages"),x=0,T=4,_=0,E=-2,S=-1,w=4,O=2,I=8,U=9,z=286,F=30,V=19,M=2*z+1,j=15,R=3,P=258,re=P+R+1,B=42,X=113,C=1,ie=2,$=3,q=4;function se(N,be){return N.msg=v[be],be}function W(N){return(N<<1)-(4<N?9:0)}function me(N){for(var be=N.length;0<=--be;)N[be]=0}function L(N){var be=N.state,le=be.pending;le>N.avail_out&&(le=N.avail_out),le!==0&&(h.arraySet(N.output,be.pending_buf,be.pending_out,le,N.next_out),N.next_out+=le,be.pending_out+=le,N.total_out+=le,N.avail_out-=le,be.pending-=le,be.pending===0&&(be.pending_out=0))}function A(N,be){d._tr_flush_block(N,0<=N.block_start?N.block_start:-1,N.strstart-N.block_start,be),N.block_start=N.strstart,L(N.strm)}function Z(N,be){N.pending_buf[N.pending++]=be}function K(N,be){N.pending_buf[N.pending++]=be>>>8&255,N.pending_buf[N.pending++]=255&be}function te(N,be){var le,J,Q=N.max_chain_length,ae=N.strstart,ke=N.prev_length,De=N.nice_match,ue=N.strstart>N.w_size-re?N.strstart-(N.w_size-re):0,je=N.window,ze=N.w_mask,Ne=N.prev,Je=N.strstart+P,ht=je[ae+ke-1],st=je[ae+ke];N.prev_length>=N.good_match&&(Q>>=2),De>N.lookahead&&(De=N.lookahead);do if(je[(le=be)+ke]===st&&je[le+ke-1]===ht&&je[le]===je[ae]&&je[++le]===je[ae+1]){ae+=2,le++;do;while(je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&je[++ae]===je[++le]&&ae<Je);if(J=P-(Je-ae),ae=Je-P,ke<J){if(N.match_start=be,De<=(ke=J))break;ht=je[ae+ke-1],st=je[ae+ke]}}while((be=Ne[be&ze])>ue&&--Q!=0);return ke<=N.lookahead?ke:N.lookahead}function fe(N){var be,le,J,Q,ae,ke,De,ue,je,ze,Ne=N.w_size;do{if(Q=N.window_size-N.lookahead-N.strstart,N.strstart>=Ne+(Ne-re)){for(h.arraySet(N.window,N.window,Ne,Ne,0),N.match_start-=Ne,N.strstart-=Ne,N.block_start-=Ne,be=le=N.hash_size;J=N.head[--be],N.head[be]=Ne<=J?J-Ne:0,--le;);for(be=le=Ne;J=N.prev[--be],N.prev[be]=Ne<=J?J-Ne:0,--le;);Q+=Ne}if(N.strm.avail_in===0)break;if(ke=N.strm,De=N.window,ue=N.strstart+N.lookahead,je=Q,ze=void 0,ze=ke.avail_in,je<ze&&(ze=je),le=ze===0?0:(ke.avail_in-=ze,h.arraySet(De,ke.input,ke.next_in,ze,ue),ke.state.wrap===1?ke.adler=m(ke.adler,De,ze,ue):ke.state.wrap===2&&(ke.adler=p(ke.adler,De,ze,ue)),ke.next_in+=ze,ke.total_in+=ze,ze),N.lookahead+=le,N.lookahead+N.insert>=R)for(ae=N.strstart-N.insert,N.ins_h=N.window[ae],N.ins_h=(N.ins_h<<N.hash_shift^N.window[ae+1])&N.hash_mask;N.insert&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[ae+R-1])&N.hash_mask,N.prev[ae&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=ae,ae++,N.insert--,!(N.lookahead+N.insert<R)););}while(N.lookahead<re&&N.strm.avail_in!==0)}function Ee(N,be){for(var le,J;;){if(N.lookahead<re){if(fe(N),N.lookahead<re&&be===x)return C;if(N.lookahead===0)break}if(le=0,N.lookahead>=R&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,le=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),le!==0&&N.strstart-le<=N.w_size-re&&(N.match_length=te(N,le)),N.match_length>=R)if(J=d._tr_tally(N,N.strstart-N.match_start,N.match_length-R),N.lookahead-=N.match_length,N.match_length<=N.max_lazy_match&&N.lookahead>=R){for(N.match_length--;N.strstart++,N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,le=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart,--N.match_length!=0;);N.strstart++}else N.strstart+=N.match_length,N.match_length=0,N.ins_h=N.window[N.strstart],N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+1])&N.hash_mask;else J=d._tr_tally(N,0,N.window[N.strstart]),N.lookahead--,N.strstart++;if(J&&(A(N,!1),N.strm.avail_out===0))return C}return N.insert=N.strstart<R-1?N.strstart:R-1,be===T?(A(N,!0),N.strm.avail_out===0?$:q):N.last_lit&&(A(N,!1),N.strm.avail_out===0)?C:ie}function Te(N,be){for(var le,J,Q;;){if(N.lookahead<re){if(fe(N),N.lookahead<re&&be===x)return C;if(N.lookahead===0)break}if(le=0,N.lookahead>=R&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,le=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),N.prev_length=N.match_length,N.prev_match=N.match_start,N.match_length=R-1,le!==0&&N.prev_length<N.max_lazy_match&&N.strstart-le<=N.w_size-re&&(N.match_length=te(N,le),N.match_length<=5&&(N.strategy===1||N.match_length===R&&4096<N.strstart-N.match_start)&&(N.match_length=R-1)),N.prev_length>=R&&N.match_length<=N.prev_length){for(Q=N.strstart+N.lookahead-R,J=d._tr_tally(N,N.strstart-1-N.prev_match,N.prev_length-R),N.lookahead-=N.prev_length-1,N.prev_length-=2;++N.strstart<=Q&&(N.ins_h=(N.ins_h<<N.hash_shift^N.window[N.strstart+R-1])&N.hash_mask,le=N.prev[N.strstart&N.w_mask]=N.head[N.ins_h],N.head[N.ins_h]=N.strstart),--N.prev_length!=0;);if(N.match_available=0,N.match_length=R-1,N.strstart++,J&&(A(N,!1),N.strm.avail_out===0))return C}else if(N.match_available){if((J=d._tr_tally(N,0,N.window[N.strstart-1]))&&A(N,!1),N.strstart++,N.lookahead--,N.strm.avail_out===0)return C}else N.match_available=1,N.strstart++,N.lookahead--}return N.match_available&&(J=d._tr_tally(N,0,N.window[N.strstart-1]),N.match_available=0),N.insert=N.strstart<R-1?N.strstart:R-1,be===T?(A(N,!0),N.strm.avail_out===0?$:q):N.last_lit&&(A(N,!1),N.strm.avail_out===0)?C:ie}function he(N,be,le,J,Q){this.good_length=N,this.max_lazy=be,this.nice_length=le,this.max_chain=J,this.func=Q}function He(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new h.Buf16(2*M),this.dyn_dtree=new h.Buf16(2*(2*F+1)),this.bl_tree=new h.Buf16(2*(2*V+1)),me(this.dyn_ltree),me(this.dyn_dtree),me(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new h.Buf16(j+1),this.heap=new h.Buf16(2*z+1),me(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new h.Buf16(2*z+1),me(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function Be(N){var be;return N&&N.state?(N.total_in=N.total_out=0,N.data_type=O,(be=N.state).pending=0,be.pending_out=0,be.wrap<0&&(be.wrap=-be.wrap),be.status=be.wrap?B:X,N.adler=be.wrap===2?0:1,be.last_flush=x,d._tr_init(be),_):se(N,E)}function Pe(N){var be=Be(N);return be===_&&(function(le){le.window_size=2*le.w_size,me(le.head),le.max_lazy_match=c[le.level].max_lazy,le.good_match=c[le.level].good_length,le.nice_match=c[le.level].nice_length,le.max_chain_length=c[le.level].max_chain,le.strstart=0,le.block_start=0,le.lookahead=0,le.insert=0,le.match_length=le.prev_length=R-1,le.match_available=0,le.ins_h=0})(N.state),be}function Re(N,be,le,J,Q,ae){if(!N)return E;var ke=1;if(be===S&&(be=6),J<0?(ke=0,J=-J):15<J&&(ke=2,J-=16),Q<1||U<Q||le!==I||J<8||15<J||be<0||9<be||ae<0||w<ae)return se(N,E);J===8&&(J=9);var De=new He;return(N.state=De).strm=N,De.wrap=ke,De.gzhead=null,De.w_bits=J,De.w_size=1<<De.w_bits,De.w_mask=De.w_size-1,De.hash_bits=Q+7,De.hash_size=1<<De.hash_bits,De.hash_mask=De.hash_size-1,De.hash_shift=~~((De.hash_bits+R-1)/R),De.window=new h.Buf8(2*De.w_size),De.head=new h.Buf16(De.hash_size),De.prev=new h.Buf16(De.w_size),De.lit_bufsize=1<<Q+6,De.pending_buf_size=4*De.lit_bufsize,De.pending_buf=new h.Buf8(De.pending_buf_size),De.d_buf=1*De.lit_bufsize,De.l_buf=3*De.lit_bufsize,De.level=be,De.strategy=ae,De.method=le,Pe(N)}c=[new he(0,0,0,0,function(N,be){var le=65535;for(le>N.pending_buf_size-5&&(le=N.pending_buf_size-5);;){if(N.lookahead<=1){if(fe(N),N.lookahead===0&&be===x)return C;if(N.lookahead===0)break}N.strstart+=N.lookahead,N.lookahead=0;var J=N.block_start+le;if((N.strstart===0||N.strstart>=J)&&(N.lookahead=N.strstart-J,N.strstart=J,A(N,!1),N.strm.avail_out===0)||N.strstart-N.block_start>=N.w_size-re&&(A(N,!1),N.strm.avail_out===0))return C}return N.insert=0,be===T?(A(N,!0),N.strm.avail_out===0?$:q):(N.strstart>N.block_start&&(A(N,!1),N.strm.avail_out),C)}),new he(4,4,8,4,Ee),new he(4,5,16,8,Ee),new he(4,6,32,32,Ee),new he(4,4,16,16,Te),new he(8,16,32,32,Te),new he(8,16,128,128,Te),new he(8,32,128,256,Te),new he(32,128,258,1024,Te),new he(32,258,258,4096,Te)],l.deflateInit=function(N,be){return Re(N,be,I,15,8,0)},l.deflateInit2=Re,l.deflateReset=Pe,l.deflateResetKeep=Be,l.deflateSetHeader=function(N,be){return N&&N.state?N.state.wrap!==2?E:(N.state.gzhead=be,_):E},l.deflate=function(N,be){var le,J,Q,ae;if(!N||!N.state||5<be||be<0)return N?se(N,E):E;if(J=N.state,!N.output||!N.input&&N.avail_in!==0||J.status===666&&be!==T)return se(N,N.avail_out===0?-5:E);if(J.strm=N,le=J.last_flush,J.last_flush=be,J.status===B)if(J.wrap===2)N.adler=0,Z(J,31),Z(J,139),Z(J,8),J.gzhead?(Z(J,(J.gzhead.text?1:0)+(J.gzhead.hcrc?2:0)+(J.gzhead.extra?4:0)+(J.gzhead.name?8:0)+(J.gzhead.comment?16:0)),Z(J,255&J.gzhead.time),Z(J,J.gzhead.time>>8&255),Z(J,J.gzhead.time>>16&255),Z(J,J.gzhead.time>>24&255),Z(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),Z(J,255&J.gzhead.os),J.gzhead.extra&&J.gzhead.extra.length&&(Z(J,255&J.gzhead.extra.length),Z(J,J.gzhead.extra.length>>8&255)),J.gzhead.hcrc&&(N.adler=p(N.adler,J.pending_buf,J.pending,0)),J.gzindex=0,J.status=69):(Z(J,0),Z(J,0),Z(J,0),Z(J,0),Z(J,0),Z(J,J.level===9?2:2<=J.strategy||J.level<2?4:0),Z(J,3),J.status=X);else{var ke=I+(J.w_bits-8<<4)<<8;ke|=(2<=J.strategy||J.level<2?0:J.level<6?1:J.level===6?2:3)<<6,J.strstart!==0&&(ke|=32),ke+=31-ke%31,J.status=X,K(J,ke),J.strstart!==0&&(K(J,N.adler>>>16),K(J,65535&N.adler)),N.adler=1}if(J.status===69)if(J.gzhead.extra){for(Q=J.pending;J.gzindex<(65535&J.gzhead.extra.length)&&(J.pending!==J.pending_buf_size||(J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),L(N),Q=J.pending,J.pending!==J.pending_buf_size));)Z(J,255&J.gzhead.extra[J.gzindex]),J.gzindex++;J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),J.gzindex===J.gzhead.extra.length&&(J.gzindex=0,J.status=73)}else J.status=73;if(J.status===73)if(J.gzhead.name){Q=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),L(N),Q=J.pending,J.pending===J.pending_buf_size)){ae=1;break}ae=J.gzindex<J.gzhead.name.length?255&J.gzhead.name.charCodeAt(J.gzindex++):0,Z(J,ae)}while(ae!==0);J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),ae===0&&(J.gzindex=0,J.status=91)}else J.status=91;if(J.status===91)if(J.gzhead.comment){Q=J.pending;do{if(J.pending===J.pending_buf_size&&(J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),L(N),Q=J.pending,J.pending===J.pending_buf_size)){ae=1;break}ae=J.gzindex<J.gzhead.comment.length?255&J.gzhead.comment.charCodeAt(J.gzindex++):0,Z(J,ae)}while(ae!==0);J.gzhead.hcrc&&J.pending>Q&&(N.adler=p(N.adler,J.pending_buf,J.pending-Q,Q)),ae===0&&(J.status=103)}else J.status=103;if(J.status===103&&(J.gzhead.hcrc?(J.pending+2>J.pending_buf_size&&L(N),J.pending+2<=J.pending_buf_size&&(Z(J,255&N.adler),Z(J,N.adler>>8&255),N.adler=0,J.status=X)):J.status=X),J.pending!==0){if(L(N),N.avail_out===0)return J.last_flush=-1,_}else if(N.avail_in===0&&W(be)<=W(le)&&be!==T)return se(N,-5);if(J.status===666&&N.avail_in!==0)return se(N,-5);if(N.avail_in!==0||J.lookahead!==0||be!==x&&J.status!==666){var De=J.strategy===2?(function(ue,je){for(var ze;;){if(ue.lookahead===0&&(fe(ue),ue.lookahead===0)){if(je===x)return C;break}if(ue.match_length=0,ze=d._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++,ze&&(A(ue,!1),ue.strm.avail_out===0))return C}return ue.insert=0,je===T?(A(ue,!0),ue.strm.avail_out===0?$:q):ue.last_lit&&(A(ue,!1),ue.strm.avail_out===0)?C:ie})(J,be):J.strategy===3?(function(ue,je){for(var ze,Ne,Je,ht,st=ue.window;;){if(ue.lookahead<=P){if(fe(ue),ue.lookahead<=P&&je===x)return C;if(ue.lookahead===0)break}if(ue.match_length=0,ue.lookahead>=R&&0<ue.strstart&&(Ne=st[Je=ue.strstart-1])===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]){ht=ue.strstart+P;do;while(Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Ne===st[++Je]&&Je<ht);ue.match_length=P-(ht-Je),ue.match_length>ue.lookahead&&(ue.match_length=ue.lookahead)}if(ue.match_length>=R?(ze=d._tr_tally(ue,1,ue.match_length-R),ue.lookahead-=ue.match_length,ue.strstart+=ue.match_length,ue.match_length=0):(ze=d._tr_tally(ue,0,ue.window[ue.strstart]),ue.lookahead--,ue.strstart++),ze&&(A(ue,!1),ue.strm.avail_out===0))return C}return ue.insert=0,je===T?(A(ue,!0),ue.strm.avail_out===0?$:q):ue.last_lit&&(A(ue,!1),ue.strm.avail_out===0)?C:ie})(J,be):c[J.level].func(J,be);if(De!==$&&De!==q||(J.status=666),De===C||De===$)return N.avail_out===0&&(J.last_flush=-1),_;if(De===ie&&(be===1?d._tr_align(J):be!==5&&(d._tr_stored_block(J,0,0,!1),be===3&&(me(J.head),J.lookahead===0&&(J.strstart=0,J.block_start=0,J.insert=0))),L(N),N.avail_out===0))return J.last_flush=-1,_}return be!==T?_:J.wrap<=0?1:(J.wrap===2?(Z(J,255&N.adler),Z(J,N.adler>>8&255),Z(J,N.adler>>16&255),Z(J,N.adler>>24&255),Z(J,255&N.total_in),Z(J,N.total_in>>8&255),Z(J,N.total_in>>16&255),Z(J,N.total_in>>24&255)):(K(J,N.adler>>>16),K(J,65535&N.adler)),L(N),0<J.wrap&&(J.wrap=-J.wrap),J.pending!==0?_:1)},l.deflateEnd=function(N){var be;return N&&N.state?(be=N.state.status)!==B&&be!==69&&be!==73&&be!==91&&be!==103&&be!==X&&be!==666?se(N,E):(N.state=null,be===X?se(N,-3):_):E},l.deflateSetDictionary=function(N,be){var le,J,Q,ae,ke,De,ue,je,ze=be.length;if(!N||!N.state||(ae=(le=N.state).wrap)===2||ae===1&&le.status!==B||le.lookahead)return E;for(ae===1&&(N.adler=m(N.adler,be,ze,0)),le.wrap=0,ze>=le.w_size&&(ae===0&&(me(le.head),le.strstart=0,le.block_start=0,le.insert=0),je=new h.Buf8(le.w_size),h.arraySet(je,be,ze-le.w_size,le.w_size,0),be=je,ze=le.w_size),ke=N.avail_in,De=N.next_in,ue=N.input,N.avail_in=ze,N.next_in=0,N.input=be,fe(le);le.lookahead>=R;){for(J=le.strstart,Q=le.lookahead-(R-1);le.ins_h=(le.ins_h<<le.hash_shift^le.window[J+R-1])&le.hash_mask,le.prev[J&le.w_mask]=le.head[le.ins_h],le.head[le.ins_h]=J,J++,--Q;);le.strstart=J,le.lookahead=R-1,fe(le)}return le.strstart+=le.lookahead,le.block_start=le.strstart,le.insert=le.lookahead,le.lookahead=0,le.match_length=le.prev_length=R-1,le.match_available=0,N.next_in=De,N.input=ue,N.avail_in=ke,le.wrap=ae,_},l.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(s,i,l){i.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(s,i,l){i.exports=function(c,h){var d,m,p,v,x,T,_,E,S,w,O,I,U,z,F,V,M,j,R,P,re,B,X,C,ie;d=c.state,m=c.next_in,C=c.input,p=m+(c.avail_in-5),v=c.next_out,ie=c.output,x=v-(h-c.avail_out),T=v+(c.avail_out-257),_=d.dmax,E=d.wsize,S=d.whave,w=d.wnext,O=d.window,I=d.hold,U=d.bits,z=d.lencode,F=d.distcode,V=(1<<d.lenbits)-1,M=(1<<d.distbits)-1;e:do{U<15&&(I+=C[m++]<<U,U+=8,I+=C[m++]<<U,U+=8),j=z[I&V];t:for(;;){if(I>>>=R=j>>>24,U-=R,(R=j>>>16&255)===0)ie[v++]=65535&j;else{if(!(16&R)){if((64&R)==0){j=z[(65535&j)+(I&(1<<R)-1)];continue t}if(32&R){d.mode=12;break e}c.msg="invalid literal/length code",d.mode=30;break e}P=65535&j,(R&=15)&&(U<R&&(I+=C[m++]<<U,U+=8),P+=I&(1<<R)-1,I>>>=R,U-=R),U<15&&(I+=C[m++]<<U,U+=8,I+=C[m++]<<U,U+=8),j=F[I&M];n:for(;;){if(I>>>=R=j>>>24,U-=R,!(16&(R=j>>>16&255))){if((64&R)==0){j=F[(65535&j)+(I&(1<<R)-1)];continue n}c.msg="invalid distance code",d.mode=30;break e}if(re=65535&j,U<(R&=15)&&(I+=C[m++]<<U,(U+=8)<R&&(I+=C[m++]<<U,U+=8)),_<(re+=I&(1<<R)-1)){c.msg="invalid distance too far back",d.mode=30;break e}if(I>>>=R,U-=R,(R=v-x)<re){if(S<(R=re-R)&&d.sane){c.msg="invalid distance too far back",d.mode=30;break e}if(X=O,(B=0)===w){if(B+=E-R,R<P){for(P-=R;ie[v++]=O[B++],--R;);B=v-re,X=ie}}else if(w<R){if(B+=E+w-R,(R-=w)<P){for(P-=R;ie[v++]=O[B++],--R;);if(B=0,w<P){for(P-=R=w;ie[v++]=O[B++],--R;);B=v-re,X=ie}}}else if(B+=w-R,R<P){for(P-=R;ie[v++]=O[B++],--R;);B=v-re,X=ie}for(;2<P;)ie[v++]=X[B++],ie[v++]=X[B++],ie[v++]=X[B++],P-=3;P&&(ie[v++]=X[B++],1<P&&(ie[v++]=X[B++]))}else{for(B=v-re;ie[v++]=ie[B++],ie[v++]=ie[B++],ie[v++]=ie[B++],2<(P-=3););P&&(ie[v++]=ie[B++],1<P&&(ie[v++]=ie[B++]))}break}}break}}while(m<p&&v<T);m-=P=U>>3,I&=(1<<(U-=P<<3))-1,c.next_in=m,c.next_out=v,c.avail_in=m<p?p-m+5:5-(m-p),c.avail_out=v<T?T-v+257:257-(v-T),d.hold=I,d.bits=U}},{}],49:[function(s,i,l){var c=s("../utils/common"),h=s("./adler32"),d=s("./crc32"),m=s("./inffast"),p=s("./inftrees"),v=1,x=2,T=0,_=-2,E=1,S=852,w=592;function O(B){return(B>>>24&255)+(B>>>8&65280)+((65280&B)<<8)+((255&B)<<24)}function I(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new c.Buf16(320),this.work=new c.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function U(B){var X;return B&&B.state?(X=B.state,B.total_in=B.total_out=X.total=0,B.msg="",X.wrap&&(B.adler=1&X.wrap),X.mode=E,X.last=0,X.havedict=0,X.dmax=32768,X.head=null,X.hold=0,X.bits=0,X.lencode=X.lendyn=new c.Buf32(S),X.distcode=X.distdyn=new c.Buf32(w),X.sane=1,X.back=-1,T):_}function z(B){var X;return B&&B.state?((X=B.state).wsize=0,X.whave=0,X.wnext=0,U(B)):_}function F(B,X){var C,ie;return B&&B.state?(ie=B.state,X<0?(C=0,X=-X):(C=1+(X>>4),X<48&&(X&=15)),X&&(X<8||15<X)?_:(ie.window!==null&&ie.wbits!==X&&(ie.window=null),ie.wrap=C,ie.wbits=X,z(B))):_}function V(B,X){var C,ie;return B?(ie=new I,(B.state=ie).window=null,(C=F(B,X))!==T&&(B.state=null),C):_}var M,j,R=!0;function P(B){if(R){var X;for(M=new c.Buf32(512),j=new c.Buf32(32),X=0;X<144;)B.lens[X++]=8;for(;X<256;)B.lens[X++]=9;for(;X<280;)B.lens[X++]=7;for(;X<288;)B.lens[X++]=8;for(p(v,B.lens,0,288,M,0,B.work,{bits:9}),X=0;X<32;)B.lens[X++]=5;p(x,B.lens,0,32,j,0,B.work,{bits:5}),R=!1}B.lencode=M,B.lenbits=9,B.distcode=j,B.distbits=5}function re(B,X,C,ie){var $,q=B.state;return q.window===null&&(q.wsize=1<<q.wbits,q.wnext=0,q.whave=0,q.window=new c.Buf8(q.wsize)),ie>=q.wsize?(c.arraySet(q.window,X,C-q.wsize,q.wsize,0),q.wnext=0,q.whave=q.wsize):(ie<($=q.wsize-q.wnext)&&($=ie),c.arraySet(q.window,X,C-ie,$,q.wnext),(ie-=$)?(c.arraySet(q.window,X,C-ie,ie,0),q.wnext=ie,q.whave=q.wsize):(q.wnext+=$,q.wnext===q.wsize&&(q.wnext=0),q.whave<q.wsize&&(q.whave+=$))),0}l.inflateReset=z,l.inflateReset2=F,l.inflateResetKeep=U,l.inflateInit=function(B){return V(B,15)},l.inflateInit2=V,l.inflate=function(B,X){var C,ie,$,q,se,W,me,L,A,Z,K,te,fe,Ee,Te,he,He,Be,Pe,Re,N,be,le,J,Q=0,ae=new c.Buf8(4),ke=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!B||!B.state||!B.output||!B.input&&B.avail_in!==0)return _;(C=B.state).mode===12&&(C.mode=13),se=B.next_out,$=B.output,me=B.avail_out,q=B.next_in,ie=B.input,W=B.avail_in,L=C.hold,A=C.bits,Z=W,K=me,be=T;e:for(;;)switch(C.mode){case E:if(C.wrap===0){C.mode=13;break}for(;A<16;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(2&C.wrap&&L===35615){ae[C.check=0]=255&L,ae[1]=L>>>8&255,C.check=d(C.check,ae,2,0),A=L=0,C.mode=2;break}if(C.flags=0,C.head&&(C.head.done=!1),!(1&C.wrap)||(((255&L)<<8)+(L>>8))%31){B.msg="incorrect header check",C.mode=30;break}if((15&L)!=8){B.msg="unknown compression method",C.mode=30;break}if(A-=4,N=8+(15&(L>>>=4)),C.wbits===0)C.wbits=N;else if(N>C.wbits){B.msg="invalid window size",C.mode=30;break}C.dmax=1<<N,B.adler=C.check=1,C.mode=512&L?10:12,A=L=0;break;case 2:for(;A<16;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(C.flags=L,(255&C.flags)!=8){B.msg="unknown compression method",C.mode=30;break}if(57344&C.flags){B.msg="unknown header flags set",C.mode=30;break}C.head&&(C.head.text=L>>8&1),512&C.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,C.check=d(C.check,ae,2,0)),A=L=0,C.mode=3;case 3:for(;A<32;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.head&&(C.head.time=L),512&C.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,ae[2]=L>>>16&255,ae[3]=L>>>24&255,C.check=d(C.check,ae,4,0)),A=L=0,C.mode=4;case 4:for(;A<16;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.head&&(C.head.xflags=255&L,C.head.os=L>>8),512&C.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,C.check=d(C.check,ae,2,0)),A=L=0,C.mode=5;case 5:if(1024&C.flags){for(;A<16;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.length=L,C.head&&(C.head.extra_len=L),512&C.flags&&(ae[0]=255&L,ae[1]=L>>>8&255,C.check=d(C.check,ae,2,0)),A=L=0}else C.head&&(C.head.extra=null);C.mode=6;case 6:if(1024&C.flags&&(W<(te=C.length)&&(te=W),te&&(C.head&&(N=C.head.extra_len-C.length,C.head.extra||(C.head.extra=new Array(C.head.extra_len)),c.arraySet(C.head.extra,ie,q,te,N)),512&C.flags&&(C.check=d(C.check,ie,te,q)),W-=te,q+=te,C.length-=te),C.length))break e;C.length=0,C.mode=7;case 7:if(2048&C.flags){if(W===0)break e;for(te=0;N=ie[q+te++],C.head&&N&&C.length<65536&&(C.head.name+=String.fromCharCode(N)),N&&te<W;);if(512&C.flags&&(C.check=d(C.check,ie,te,q)),W-=te,q+=te,N)break e}else C.head&&(C.head.name=null);C.length=0,C.mode=8;case 8:if(4096&C.flags){if(W===0)break e;for(te=0;N=ie[q+te++],C.head&&N&&C.length<65536&&(C.head.comment+=String.fromCharCode(N)),N&&te<W;);if(512&C.flags&&(C.check=d(C.check,ie,te,q)),W-=te,q+=te,N)break e}else C.head&&(C.head.comment=null);C.mode=9;case 9:if(512&C.flags){for(;A<16;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(L!==(65535&C.check)){B.msg="header crc mismatch",C.mode=30;break}A=L=0}C.head&&(C.head.hcrc=C.flags>>9&1,C.head.done=!0),B.adler=C.check=0,C.mode=12;break;case 10:for(;A<32;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}B.adler=C.check=O(L),A=L=0,C.mode=11;case 11:if(C.havedict===0)return B.next_out=se,B.avail_out=me,B.next_in=q,B.avail_in=W,C.hold=L,C.bits=A,2;B.adler=C.check=1,C.mode=12;case 12:if(X===5||X===6)break e;case 13:if(C.last){L>>>=7&A,A-=7&A,C.mode=27;break}for(;A<3;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}switch(C.last=1&L,A-=1,3&(L>>>=1)){case 0:C.mode=14;break;case 1:if(P(C),C.mode=20,X!==6)break;L>>>=2,A-=2;break e;case 2:C.mode=17;break;case 3:B.msg="invalid block type",C.mode=30}L>>>=2,A-=2;break;case 14:for(L>>>=7&A,A-=7&A;A<32;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if((65535&L)!=(L>>>16^65535)){B.msg="invalid stored block lengths",C.mode=30;break}if(C.length=65535&L,A=L=0,C.mode=15,X===6)break e;case 15:C.mode=16;case 16:if(te=C.length){if(W<te&&(te=W),me<te&&(te=me),te===0)break e;c.arraySet($,ie,q,te,se),W-=te,q+=te,me-=te,se+=te,C.length-=te;break}C.mode=12;break;case 17:for(;A<14;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(C.nlen=257+(31&L),L>>>=5,A-=5,C.ndist=1+(31&L),L>>>=5,A-=5,C.ncode=4+(15&L),L>>>=4,A-=4,286<C.nlen||30<C.ndist){B.msg="too many length or distance symbols",C.mode=30;break}C.have=0,C.mode=18;case 18:for(;C.have<C.ncode;){for(;A<3;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.lens[ke[C.have++]]=7&L,L>>>=3,A-=3}for(;C.have<19;)C.lens[ke[C.have++]]=0;if(C.lencode=C.lendyn,C.lenbits=7,le={bits:C.lenbits},be=p(0,C.lens,0,19,C.lencode,0,C.work,le),C.lenbits=le.bits,be){B.msg="invalid code lengths set",C.mode=30;break}C.have=0,C.mode=19;case 19:for(;C.have<C.nlen+C.ndist;){for(;he=(Q=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,He=65535&Q,!((Te=Q>>>24)<=A);){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(He<16)L>>>=Te,A-=Te,C.lens[C.have++]=He;else{if(He===16){for(J=Te+2;A<J;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(L>>>=Te,A-=Te,C.have===0){B.msg="invalid bit length repeat",C.mode=30;break}N=C.lens[C.have-1],te=3+(3&L),L>>>=2,A-=2}else if(He===17){for(J=Te+3;A<J;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}A-=Te,N=0,te=3+(7&(L>>>=Te)),L>>>=3,A-=3}else{for(J=Te+7;A<J;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}A-=Te,N=0,te=11+(127&(L>>>=Te)),L>>>=7,A-=7}if(C.have+te>C.nlen+C.ndist){B.msg="invalid bit length repeat",C.mode=30;break}for(;te--;)C.lens[C.have++]=N}}if(C.mode===30)break;if(C.lens[256]===0){B.msg="invalid code -- missing end-of-block",C.mode=30;break}if(C.lenbits=9,le={bits:C.lenbits},be=p(v,C.lens,0,C.nlen,C.lencode,0,C.work,le),C.lenbits=le.bits,be){B.msg="invalid literal/lengths set",C.mode=30;break}if(C.distbits=6,C.distcode=C.distdyn,le={bits:C.distbits},be=p(x,C.lens,C.nlen,C.ndist,C.distcode,0,C.work,le),C.distbits=le.bits,be){B.msg="invalid distances set",C.mode=30;break}if(C.mode=20,X===6)break e;case 20:C.mode=21;case 21:if(6<=W&&258<=me){B.next_out=se,B.avail_out=me,B.next_in=q,B.avail_in=W,C.hold=L,C.bits=A,m(B,K),se=B.next_out,$=B.output,me=B.avail_out,q=B.next_in,ie=B.input,W=B.avail_in,L=C.hold,A=C.bits,C.mode===12&&(C.back=-1);break}for(C.back=0;he=(Q=C.lencode[L&(1<<C.lenbits)-1])>>>16&255,He=65535&Q,!((Te=Q>>>24)<=A);){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(he&&(240&he)==0){for(Be=Te,Pe=he,Re=He;he=(Q=C.lencode[Re+((L&(1<<Be+Pe)-1)>>Be)])>>>16&255,He=65535&Q,!(Be+(Te=Q>>>24)<=A);){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}L>>>=Be,A-=Be,C.back+=Be}if(L>>>=Te,A-=Te,C.back+=Te,C.length=He,he===0){C.mode=26;break}if(32&he){C.back=-1,C.mode=12;break}if(64&he){B.msg="invalid literal/length code",C.mode=30;break}C.extra=15&he,C.mode=22;case 22:if(C.extra){for(J=C.extra;A<J;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.length+=L&(1<<C.extra)-1,L>>>=C.extra,A-=C.extra,C.back+=C.extra}C.was=C.length,C.mode=23;case 23:for(;he=(Q=C.distcode[L&(1<<C.distbits)-1])>>>16&255,He=65535&Q,!((Te=Q>>>24)<=A);){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if((240&he)==0){for(Be=Te,Pe=he,Re=He;he=(Q=C.distcode[Re+((L&(1<<Be+Pe)-1)>>Be)])>>>16&255,He=65535&Q,!(Be+(Te=Q>>>24)<=A);){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}L>>>=Be,A-=Be,C.back+=Be}if(L>>>=Te,A-=Te,C.back+=Te,64&he){B.msg="invalid distance code",C.mode=30;break}C.offset=He,C.extra=15&he,C.mode=24;case 24:if(C.extra){for(J=C.extra;A<J;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}C.offset+=L&(1<<C.extra)-1,L>>>=C.extra,A-=C.extra,C.back+=C.extra}if(C.offset>C.dmax){B.msg="invalid distance too far back",C.mode=30;break}C.mode=25;case 25:if(me===0)break e;if(te=K-me,C.offset>te){if((te=C.offset-te)>C.whave&&C.sane){B.msg="invalid distance too far back",C.mode=30;break}fe=te>C.wnext?(te-=C.wnext,C.wsize-te):C.wnext-te,te>C.length&&(te=C.length),Ee=C.window}else Ee=$,fe=se-C.offset,te=C.length;for(me<te&&(te=me),me-=te,C.length-=te;$[se++]=Ee[fe++],--te;);C.length===0&&(C.mode=21);break;case 26:if(me===0)break e;$[se++]=C.length,me--,C.mode=21;break;case 27:if(C.wrap){for(;A<32;){if(W===0)break e;W--,L|=ie[q++]<<A,A+=8}if(K-=me,B.total_out+=K,C.total+=K,K&&(B.adler=C.check=C.flags?d(C.check,$,K,se-K):h(C.check,$,K,se-K)),K=me,(C.flags?L:O(L))!==C.check){B.msg="incorrect data check",C.mode=30;break}A=L=0}C.mode=28;case 28:if(C.wrap&&C.flags){for(;A<32;){if(W===0)break e;W--,L+=ie[q++]<<A,A+=8}if(L!==(4294967295&C.total)){B.msg="incorrect length check",C.mode=30;break}A=L=0}C.mode=29;case 29:be=1;break e;case 30:be=-3;break e;case 31:return-4;case 32:default:return _}return B.next_out=se,B.avail_out=me,B.next_in=q,B.avail_in=W,C.hold=L,C.bits=A,(C.wsize||K!==B.avail_out&&C.mode<30&&(C.mode<27||X!==4))&&re(B,B.output,B.next_out,K-B.avail_out)?(C.mode=31,-4):(Z-=B.avail_in,K-=B.avail_out,B.total_in+=Z,B.total_out+=K,C.total+=K,C.wrap&&K&&(B.adler=C.check=C.flags?d(C.check,$,K,B.next_out-K):h(C.check,$,K,B.next_out-K)),B.data_type=C.bits+(C.last?64:0)+(C.mode===12?128:0)+(C.mode===20||C.mode===15?256:0),(Z==0&&K===0||X===4)&&be===T&&(be=-5),be)},l.inflateEnd=function(B){if(!B||!B.state)return _;var X=B.state;return X.window&&(X.window=null),B.state=null,T},l.inflateGetHeader=function(B,X){var C;return B&&B.state?(2&(C=B.state).wrap)==0?_:((C.head=X).done=!1,T):_},l.inflateSetDictionary=function(B,X){var C,ie=X.length;return B&&B.state?(C=B.state).wrap!==0&&C.mode!==11?_:C.mode===11&&h(1,X,ie,0)!==C.check?-3:re(B,X,ie,ie)?(C.mode=31,-4):(C.havedict=1,T):_},l.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(s,i,l){var c=s("../utils/common"),h=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],m=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],p=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];i.exports=function(v,x,T,_,E,S,w,O){var I,U,z,F,V,M,j,R,P,re=O.bits,B=0,X=0,C=0,ie=0,$=0,q=0,se=0,W=0,me=0,L=0,A=null,Z=0,K=new c.Buf16(16),te=new c.Buf16(16),fe=null,Ee=0;for(B=0;B<=15;B++)K[B]=0;for(X=0;X<_;X++)K[x[T+X]]++;for($=re,ie=15;1<=ie&&K[ie]===0;ie--);if(ie<$&&($=ie),ie===0)return E[S++]=20971520,E[S++]=20971520,O.bits=1,0;for(C=1;C<ie&&K[C]===0;C++);for($<C&&($=C),B=W=1;B<=15;B++)if(W<<=1,(W-=K[B])<0)return-1;if(0<W&&(v===0||ie!==1))return-1;for(te[1]=0,B=1;B<15;B++)te[B+1]=te[B]+K[B];for(X=0;X<_;X++)x[T+X]!==0&&(w[te[x[T+X]]++]=X);if(M=v===0?(A=fe=w,19):v===1?(A=h,Z-=257,fe=d,Ee-=257,256):(A=m,fe=p,-1),B=C,V=S,se=X=L=0,z=-1,F=(me=1<<(q=$))-1,v===1&&852<me||v===2&&592<me)return 1;for(;;){for(j=B-se,P=w[X]<M?(R=0,w[X]):w[X]>M?(R=fe[Ee+w[X]],A[Z+w[X]]):(R=96,0),I=1<<B-se,C=U=1<<q;E[V+(L>>se)+(U-=I)]=j<<24|R<<16|P|0,U!==0;);for(I=1<<B-1;L&I;)I>>=1;if(I!==0?(L&=I-1,L+=I):L=0,X++,--K[B]==0){if(B===ie)break;B=x[T+w[X]]}if($<B&&(L&F)!==z){for(se===0&&(se=$),V+=C,W=1<<(q=B-se);q+se<ie&&!((W-=K[q+se])<=0);)q++,W<<=1;if(me+=1<<q,v===1&&852<me||v===2&&592<me)return 1;E[z=L&F]=$<<24|q<<16|V-S|0}}return L!==0&&(E[V+L]=B-se<<24|64<<16|0),O.bits=$,0}},{"../utils/common":41}],51:[function(s,i,l){i.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(s,i,l){var c=s("../utils/common"),h=0,d=1;function m(Q){for(var ae=Q.length;0<=--ae;)Q[ae]=0}var p=0,v=29,x=256,T=x+1+v,_=30,E=19,S=2*T+1,w=15,O=16,I=7,U=256,z=16,F=17,V=18,M=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],R=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],P=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],re=new Array(2*(T+2));m(re);var B=new Array(2*_);m(B);var X=new Array(512);m(X);var C=new Array(256);m(C);var ie=new Array(v);m(ie);var $,q,se,W=new Array(_);function me(Q,ae,ke,De,ue){this.static_tree=Q,this.extra_bits=ae,this.extra_base=ke,this.elems=De,this.max_length=ue,this.has_stree=Q&&Q.length}function L(Q,ae){this.dyn_tree=Q,this.max_code=0,this.stat_desc=ae}function A(Q){return Q<256?X[Q]:X[256+(Q>>>7)]}function Z(Q,ae){Q.pending_buf[Q.pending++]=255&ae,Q.pending_buf[Q.pending++]=ae>>>8&255}function K(Q,ae,ke){Q.bi_valid>O-ke?(Q.bi_buf|=ae<<Q.bi_valid&65535,Z(Q,Q.bi_buf),Q.bi_buf=ae>>O-Q.bi_valid,Q.bi_valid+=ke-O):(Q.bi_buf|=ae<<Q.bi_valid&65535,Q.bi_valid+=ke)}function te(Q,ae,ke){K(Q,ke[2*ae],ke[2*ae+1])}function fe(Q,ae){for(var ke=0;ke|=1&Q,Q>>>=1,ke<<=1,0<--ae;);return ke>>>1}function Ee(Q,ae,ke){var De,ue,je=new Array(w+1),ze=0;for(De=1;De<=w;De++)je[De]=ze=ze+ke[De-1]<<1;for(ue=0;ue<=ae;ue++){var Ne=Q[2*ue+1];Ne!==0&&(Q[2*ue]=fe(je[Ne]++,Ne))}}function Te(Q){var ae;for(ae=0;ae<T;ae++)Q.dyn_ltree[2*ae]=0;for(ae=0;ae<_;ae++)Q.dyn_dtree[2*ae]=0;for(ae=0;ae<E;ae++)Q.bl_tree[2*ae]=0;Q.dyn_ltree[2*U]=1,Q.opt_len=Q.static_len=0,Q.last_lit=Q.matches=0}function he(Q){8<Q.bi_valid?Z(Q,Q.bi_buf):0<Q.bi_valid&&(Q.pending_buf[Q.pending++]=Q.bi_buf),Q.bi_buf=0,Q.bi_valid=0}function He(Q,ae,ke,De){var ue=2*ae,je=2*ke;return Q[ue]<Q[je]||Q[ue]===Q[je]&&De[ae]<=De[ke]}function Be(Q,ae,ke){for(var De=Q.heap[ke],ue=ke<<1;ue<=Q.heap_len&&(ue<Q.heap_len&&He(ae,Q.heap[ue+1],Q.heap[ue],Q.depth)&&ue++,!He(ae,De,Q.heap[ue],Q.depth));)Q.heap[ke]=Q.heap[ue],ke=ue,ue<<=1;Q.heap[ke]=De}function Pe(Q,ae,ke){var De,ue,je,ze,Ne=0;if(Q.last_lit!==0)for(;De=Q.pending_buf[Q.d_buf+2*Ne]<<8|Q.pending_buf[Q.d_buf+2*Ne+1],ue=Q.pending_buf[Q.l_buf+Ne],Ne++,De===0?te(Q,ue,ae):(te(Q,(je=C[ue])+x+1,ae),(ze=M[je])!==0&&K(Q,ue-=ie[je],ze),te(Q,je=A(--De),ke),(ze=j[je])!==0&&K(Q,De-=W[je],ze)),Ne<Q.last_lit;);te(Q,U,ae)}function Re(Q,ae){var ke,De,ue,je=ae.dyn_tree,ze=ae.stat_desc.static_tree,Ne=ae.stat_desc.has_stree,Je=ae.stat_desc.elems,ht=-1;for(Q.heap_len=0,Q.heap_max=S,ke=0;ke<Je;ke++)je[2*ke]!==0?(Q.heap[++Q.heap_len]=ht=ke,Q.depth[ke]=0):je[2*ke+1]=0;for(;Q.heap_len<2;)je[2*(ue=Q.heap[++Q.heap_len]=ht<2?++ht:0)]=1,Q.depth[ue]=0,Q.opt_len--,Ne&&(Q.static_len-=ze[2*ue+1]);for(ae.max_code=ht,ke=Q.heap_len>>1;1<=ke;ke--)Be(Q,je,ke);for(ue=Je;ke=Q.heap[1],Q.heap[1]=Q.heap[Q.heap_len--],Be(Q,je,1),De=Q.heap[1],Q.heap[--Q.heap_max]=ke,Q.heap[--Q.heap_max]=De,je[2*ue]=je[2*ke]+je[2*De],Q.depth[ue]=(Q.depth[ke]>=Q.depth[De]?Q.depth[ke]:Q.depth[De])+1,je[2*ke+1]=je[2*De+1]=ue,Q.heap[1]=ue++,Be(Q,je,1),2<=Q.heap_len;);Q.heap[--Q.heap_max]=Q.heap[1],(function(st,Rt){var Qt,Bt,Pt,pt,xt,mn,It=Rt.dyn_tree,ma=Rt.max_code,dt=Rt.stat_desc.static_tree,qa=Rt.stat_desc.has_stree,Nr=Rt.stat_desc.extra_bits,Ft=Rt.stat_desc.extra_base,ln=Rt.stat_desc.max_length,jn=0;for(pt=0;pt<=w;pt++)st.bl_count[pt]=0;for(It[2*st.heap[st.heap_max]+1]=0,Qt=st.heap_max+1;Qt<S;Qt++)ln<(pt=It[2*It[2*(Bt=st.heap[Qt])+1]+1]+1)&&(pt=ln,jn++),It[2*Bt+1]=pt,ma<Bt||(st.bl_count[pt]++,xt=0,Ft<=Bt&&(xt=Nr[Bt-Ft]),mn=It[2*Bt],st.opt_len+=mn*(pt+xt),qa&&(st.static_len+=mn*(dt[2*Bt+1]+xt)));if(jn!==0){do{for(pt=ln-1;st.bl_count[pt]===0;)pt--;st.bl_count[pt]--,st.bl_count[pt+1]+=2,st.bl_count[ln]--,jn-=2}while(0<jn);for(pt=ln;pt!==0;pt--)for(Bt=st.bl_count[pt];Bt!==0;)ma<(Pt=st.heap[--Qt])||(It[2*Pt+1]!==pt&&(st.opt_len+=(pt-It[2*Pt+1])*It[2*Pt],It[2*Pt+1]=pt),Bt--)}})(Q,ae),Ee(je,ht,Q.bl_count)}function N(Q,ae,ke){var De,ue,je=-1,ze=ae[1],Ne=0,Je=7,ht=4;for(ze===0&&(Je=138,ht=3),ae[2*(ke+1)+1]=65535,De=0;De<=ke;De++)ue=ze,ze=ae[2*(De+1)+1],++Ne<Je&&ue===ze||(Ne<ht?Q.bl_tree[2*ue]+=Ne:ue!==0?(ue!==je&&Q.bl_tree[2*ue]++,Q.bl_tree[2*z]++):Ne<=10?Q.bl_tree[2*F]++:Q.bl_tree[2*V]++,je=ue,ht=(Ne=0)===ze?(Je=138,3):ue===ze?(Je=6,3):(Je=7,4))}function be(Q,ae,ke){var De,ue,je=-1,ze=ae[1],Ne=0,Je=7,ht=4;for(ze===0&&(Je=138,ht=3),De=0;De<=ke;De++)if(ue=ze,ze=ae[2*(De+1)+1],!(++Ne<Je&&ue===ze)){if(Ne<ht)for(;te(Q,ue,Q.bl_tree),--Ne!=0;);else ue!==0?(ue!==je&&(te(Q,ue,Q.bl_tree),Ne--),te(Q,z,Q.bl_tree),K(Q,Ne-3,2)):Ne<=10?(te(Q,F,Q.bl_tree),K(Q,Ne-3,3)):(te(Q,V,Q.bl_tree),K(Q,Ne-11,7));je=ue,ht=(Ne=0)===ze?(Je=138,3):ue===ze?(Je=6,3):(Je=7,4)}}m(W);var le=!1;function J(Q,ae,ke,De){K(Q,(p<<1)+(De?1:0),3),(function(ue,je,ze,Ne){he(ue),Z(ue,ze),Z(ue,~ze),c.arraySet(ue.pending_buf,ue.window,je,ze,ue.pending),ue.pending+=ze})(Q,ae,ke)}l._tr_init=function(Q){le||((function(){var ae,ke,De,ue,je,ze=new Array(w+1);for(ue=De=0;ue<v-1;ue++)for(ie[ue]=De,ae=0;ae<1<<M[ue];ae++)C[De++]=ue;for(C[De-1]=ue,ue=je=0;ue<16;ue++)for(W[ue]=je,ae=0;ae<1<<j[ue];ae++)X[je++]=ue;for(je>>=7;ue<_;ue++)for(W[ue]=je<<7,ae=0;ae<1<<j[ue]-7;ae++)X[256+je++]=ue;for(ke=0;ke<=w;ke++)ze[ke]=0;for(ae=0;ae<=143;)re[2*ae+1]=8,ae++,ze[8]++;for(;ae<=255;)re[2*ae+1]=9,ae++,ze[9]++;for(;ae<=279;)re[2*ae+1]=7,ae++,ze[7]++;for(;ae<=287;)re[2*ae+1]=8,ae++,ze[8]++;for(Ee(re,T+1,ze),ae=0;ae<_;ae++)B[2*ae+1]=5,B[2*ae]=fe(ae,5);$=new me(re,M,x+1,T,w),q=new me(B,j,0,_,w),se=new me(new Array(0),R,0,E,I)})(),le=!0),Q.l_desc=new L(Q.dyn_ltree,$),Q.d_desc=new L(Q.dyn_dtree,q),Q.bl_desc=new L(Q.bl_tree,se),Q.bi_buf=0,Q.bi_valid=0,Te(Q)},l._tr_stored_block=J,l._tr_flush_block=function(Q,ae,ke,De){var ue,je,ze=0;0<Q.level?(Q.strm.data_type===2&&(Q.strm.data_type=(function(Ne){var Je,ht=4093624447;for(Je=0;Je<=31;Je++,ht>>>=1)if(1&ht&&Ne.dyn_ltree[2*Je]!==0)return h;if(Ne.dyn_ltree[18]!==0||Ne.dyn_ltree[20]!==0||Ne.dyn_ltree[26]!==0)return d;for(Je=32;Je<x;Je++)if(Ne.dyn_ltree[2*Je]!==0)return d;return h})(Q)),Re(Q,Q.l_desc),Re(Q,Q.d_desc),ze=(function(Ne){var Je;for(N(Ne,Ne.dyn_ltree,Ne.l_desc.max_code),N(Ne,Ne.dyn_dtree,Ne.d_desc.max_code),Re(Ne,Ne.bl_desc),Je=E-1;3<=Je&&Ne.bl_tree[2*P[Je]+1]===0;Je--);return Ne.opt_len+=3*(Je+1)+5+5+4,Je})(Q),ue=Q.opt_len+3+7>>>3,(je=Q.static_len+3+7>>>3)<=ue&&(ue=je)):ue=je=ke+5,ke+4<=ue&&ae!==-1?J(Q,ae,ke,De):Q.strategy===4||je===ue?(K(Q,2+(De?1:0),3),Pe(Q,re,B)):(K(Q,4+(De?1:0),3),(function(Ne,Je,ht,st){var Rt;for(K(Ne,Je-257,5),K(Ne,ht-1,5),K(Ne,st-4,4),Rt=0;Rt<st;Rt++)K(Ne,Ne.bl_tree[2*P[Rt]+1],3);be(Ne,Ne.dyn_ltree,Je-1),be(Ne,Ne.dyn_dtree,ht-1)})(Q,Q.l_desc.max_code+1,Q.d_desc.max_code+1,ze+1),Pe(Q,Q.dyn_ltree,Q.dyn_dtree)),Te(Q),De&&he(Q)},l._tr_tally=function(Q,ae,ke){return Q.pending_buf[Q.d_buf+2*Q.last_lit]=ae>>>8&255,Q.pending_buf[Q.d_buf+2*Q.last_lit+1]=255&ae,Q.pending_buf[Q.l_buf+Q.last_lit]=255&ke,Q.last_lit++,ae===0?Q.dyn_ltree[2*ke]++:(Q.matches++,ae--,Q.dyn_ltree[2*(C[ke]+x+1)]++,Q.dyn_dtree[2*A(ae)]++),Q.last_lit===Q.lit_bufsize-1},l._tr_align=function(Q){K(Q,2,3),te(Q,U,re),(function(ae){ae.bi_valid===16?(Z(ae,ae.bi_buf),ae.bi_buf=0,ae.bi_valid=0):8<=ae.bi_valid&&(ae.pending_buf[ae.pending++]=255&ae.bi_buf,ae.bi_buf>>=8,ae.bi_valid-=8)})(Q)}},{"../utils/common":41}],53:[function(s,i,l){i.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(s,i,l){(function(c){(function(h,d){if(!h.setImmediate){var m,p,v,x,T=1,_={},E=!1,S=h.document,w=Object.getPrototypeOf&&Object.getPrototypeOf(h);w=w&&w.setTimeout?w:h,m={}.toString.call(h.process)==="[object process]"?function(z){process.nextTick(function(){I(z)})}:(function(){if(h.postMessage&&!h.importScripts){var z=!0,F=h.onmessage;return h.onmessage=function(){z=!1},h.postMessage("","*"),h.onmessage=F,z}})()?(x="setImmediate$"+Math.random()+"$",h.addEventListener?h.addEventListener("message",U,!1):h.attachEvent("onmessage",U),function(z){h.postMessage(x+z,"*")}):h.MessageChannel?((v=new MessageChannel).port1.onmessage=function(z){I(z.data)},function(z){v.port2.postMessage(z)}):S&&"onreadystatechange"in S.createElement("script")?(p=S.documentElement,function(z){var F=S.createElement("script");F.onreadystatechange=function(){I(z),F.onreadystatechange=null,p.removeChild(F),F=null},p.appendChild(F)}):function(z){setTimeout(I,0,z)},w.setImmediate=function(z){typeof z!="function"&&(z=new Function(""+z));for(var F=new Array(arguments.length-1),V=0;V<F.length;V++)F[V]=arguments[V+1];var M={callback:z,args:F};return _[T]=M,m(T),T++},w.clearImmediate=O}function O(z){delete _[z]}function I(z){if(E)setTimeout(I,0,z);else{var F=_[z];if(F){E=!0;try{(function(V){var M=V.callback,j=V.args;switch(j.length){case 0:M();break;case 1:M(j[0]);break;case 2:M(j[0],j[1]);break;case 3:M(j[0],j[1],j[2]);break;default:M.apply(d,j)}})(F)}finally{O(z),E=!1}}}}function U(z){z.source===h&&typeof z.data=="string"&&z.data.indexOf(x)===0&&I(+z.data.slice(x.length))}})(typeof self>"u"?c===void 0?this:c:self)}).call(this,typeof Pc<"u"?Pc:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(rh)),rh.exports}var qE=GE();const Hh=io(qE);var ou={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/var HE=ou.exports,Ly;function PE(){return Ly||(Ly=1,(function(n,a){(function(s,i){n.exports=i()})(HE,function s(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},l=!i.document&&!!i.postMessage,c=i.IS_PAPA_WORKER||!1,h={},d=0,m={parse:function(j,R){var P=(R=R||{}).dynamicTyping||!1;if(M(P)&&(R.dynamicTypingFunction=P,P={}),R.dynamicTyping=P,R.transform=!!M(R.transform)&&R.transform,R.worker&&m.WORKERS_SUPPORTED){var re=(function(){if(!m.WORKERS_SUPPORTED)return!1;var X=(ie=i.URL||i.webkitURL||null,$=s.toString(),m.BLOB_URL||(m.BLOB_URL=ie.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",$,")();"],{type:"text/javascript"})))),C=new i.Worker(X),ie,$;return C.onmessage=I,C.id=d++,h[C.id]=C})();return re.userStep=R.step,re.userChunk=R.chunk,re.userComplete=R.complete,re.userError=R.error,R.step=M(R.step),R.chunk=M(R.chunk),R.complete=M(R.complete),R.error=M(R.error),delete R.worker,void re.postMessage({input:j,config:R,workerId:re.id})}var B=null;return m.NODE_STREAM_INPUT,typeof j=="string"?(j=(function(X){return X.charCodeAt(0)===65279?X.slice(1):X})(j),B=R.download?new x(R):new _(R)):j.readable===!0&&M(j.read)&&M(j.on)?B=new E(R):(i.File&&j instanceof File||j instanceof Object)&&(B=new T(R)),B.stream(j)},unparse:function(j,R){var P=!1,re=!0,B=",",X=`\r
`,C='"',ie=C+C,$=!1,q=null,se=!1;(function(){if(typeof R=="object"){if(typeof R.delimiter!="string"||m.BAD_DELIMITERS.filter(function(A){return R.delimiter.indexOf(A)!==-1}).length||(B=R.delimiter),(typeof R.quotes=="boolean"||typeof R.quotes=="function"||Array.isArray(R.quotes))&&(P=R.quotes),typeof R.skipEmptyLines!="boolean"&&typeof R.skipEmptyLines!="string"||($=R.skipEmptyLines),typeof R.newline=="string"&&(X=R.newline),typeof R.quoteChar=="string"&&(C=R.quoteChar),typeof R.header=="boolean"&&(re=R.header),Array.isArray(R.columns)){if(R.columns.length===0)throw new Error("Option columns is empty");q=R.columns}R.escapeChar!==void 0&&(ie=R.escapeChar+C),(typeof R.escapeFormulae=="boolean"||R.escapeFormulae instanceof RegExp)&&(se=R.escapeFormulae instanceof RegExp?R.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var W=new RegExp(w(C),"g");if(typeof j=="string"&&(j=JSON.parse(j)),Array.isArray(j)){if(!j.length||Array.isArray(j[0]))return me(null,j,$);if(typeof j[0]=="object")return me(q||Object.keys(j[0]),j,$)}else if(typeof j=="object")return typeof j.data=="string"&&(j.data=JSON.parse(j.data)),Array.isArray(j.data)&&(j.fields||(j.fields=j.meta&&j.meta.fields||q),j.fields||(j.fields=Array.isArray(j.data[0])?j.fields:typeof j.data[0]=="object"?Object.keys(j.data[0]):[]),Array.isArray(j.data[0])||typeof j.data[0]=="object"||(j.data=[j.data])),me(j.fields||[],j.data||[],$);throw new Error("Unable to serialize unrecognized input");function me(A,Z,K){var te="";typeof A=="string"&&(A=JSON.parse(A)),typeof Z=="string"&&(Z=JSON.parse(Z));var fe=Array.isArray(A)&&0<A.length,Ee=!Array.isArray(Z[0]);if(fe&&re){for(var Te=0;Te<A.length;Te++)0<Te&&(te+=B),te+=L(A[Te],Te);0<Z.length&&(te+=X)}for(var he=0;he<Z.length;he++){var He=fe?A.length:Z[he].length,Be=!1,Pe=fe?Object.keys(Z[he]).length===0:Z[he].length===0;if(K&&!fe&&(Be=K==="greedy"?Z[he].join("").trim()==="":Z[he].length===1&&Z[he][0].length===0),K==="greedy"&&fe){for(var Re=[],N=0;N<He;N++){var be=Ee?A[N]:N;Re.push(Z[he][be])}Be=Re.join("").trim()===""}if(!Be){for(var le=0;le<He;le++){0<le&&!Pe&&(te+=B);var J=fe&&Ee?A[le]:le;te+=L(Z[he][J],le)}he<Z.length-1&&(!K||0<He&&!Pe)&&(te+=X)}}return te}function L(A,Z){if(A==null)return"";if(A.constructor===Date)return JSON.stringify(A).slice(1,25);var K=!1;se&&typeof A=="string"&&se.test(A)&&(A="'"+A,K=!0);var te=A.toString().replace(W,ie);return(K=K||P===!0||typeof P=="function"&&P(A,Z)||Array.isArray(P)&&P[Z]||(function(fe,Ee){for(var Te=0;Te<Ee.length;Te++)if(-1<fe.indexOf(Ee[Te]))return!0;return!1})(te,m.BAD_DELIMITERS)||-1<te.indexOf(B)||te.charAt(0)===" "||te.charAt(te.length-1)===" ")?C+te+C:te}}};if(m.RECORD_SEP="",m.UNIT_SEP="",m.BYTE_ORDER_MARK="\uFEFF",m.BAD_DELIMITERS=["\r",`
`,'"',m.BYTE_ORDER_MARK],m.WORKERS_SUPPORTED=!l&&!!i.Worker,m.NODE_STREAM_INPUT=1,m.LocalChunkSize=10485760,m.RemoteChunkSize=5242880,m.DefaultDelimiter=",",m.Parser=O,m.ParserHandle=S,m.NetworkStreamer=x,m.FileStreamer=T,m.StringStreamer=_,m.ReadableStreamStreamer=E,i.jQuery){var p=i.jQuery;p.fn.parse=function(j){var R=j.config||{},P=[];return this.each(function(X){if(!(p(this).prop("tagName").toUpperCase()==="INPUT"&&p(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var C=0;C<this.files.length;C++)P.push({file:this.files[C],inputElem:this,instanceConfig:p.extend({},R)})}),re(),this;function re(){if(P.length!==0){var X,C,ie,$,q=P[0];if(M(j.before)){var se=j.before(q.file,q.inputElem);if(typeof se=="object"){if(se.action==="abort")return X="AbortError",C=q.file,ie=q.inputElem,$=se.reason,void(M(j.error)&&j.error({name:X},C,ie,$));if(se.action==="skip")return void B();typeof se.config=="object"&&(q.instanceConfig=p.extend(q.instanceConfig,se.config))}else if(se==="skip")return void B()}var W=q.instanceConfig.complete;q.instanceConfig.complete=function(me){M(W)&&W(me,q.file,q.inputElem),B()},m.parse(q.file,q.instanceConfig)}else M(j.complete)&&j.complete()}function B(){P.splice(0,1),re()}}}function v(j){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(R){var P=F(R);P.chunkSize=parseInt(P.chunkSize),R.step||R.chunk||(P.chunkSize=null),this._handle=new S(P),(this._handle.streamer=this)._config=P}).call(this,j),this.parseChunk=function(R,P){if(this.isFirstChunk&&M(this._config.beforeFirstChunk)){var re=this._config.beforeFirstChunk(R);re!==void 0&&(R=re)}this.isFirstChunk=!1,this._halted=!1;var B=this._partialLine+R;this._partialLine="";var X=this._handle.parse(B,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var C=X.meta.cursor;this._finished||(this._partialLine=B.substring(C-this._baseIndex),this._baseIndex=C),X&&X.data&&(this._rowCount+=X.data.length);var ie=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(c)i.postMessage({results:X,workerId:m.WORKER_ID,finished:ie});else if(M(this._config.chunk)&&!P){if(this._config.chunk(X,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);X=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(X.data),this._completeResults.errors=this._completeResults.errors.concat(X.errors),this._completeResults.meta=X.meta),this._completed||!ie||!M(this._config.complete)||X&&X.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),ie||X&&X.meta.paused||this._nextChunk(),X}this._halted=!0},this._sendError=function(R){M(this._config.error)?this._config.error(R):c&&this._config.error&&i.postMessage({workerId:m.WORKER_ID,error:R,finished:!1})}}function x(j){var R;(j=j||{}).chunkSize||(j.chunkSize=m.RemoteChunkSize),v.call(this,j),this._nextChunk=l?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(P){this._input=P,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(R=new XMLHttpRequest,this._config.withCredentials&&(R.withCredentials=this._config.withCredentials),l||(R.onload=V(this._chunkLoaded,this),R.onerror=V(this._chunkError,this)),R.open(this._config.downloadRequestBody?"POST":"GET",this._input,!l),this._config.downloadRequestHeaders){var P=this._config.downloadRequestHeaders;for(var re in P)R.setRequestHeader(re,P[re])}if(this._config.chunkSize){var B=this._start+this._config.chunkSize-1;R.setRequestHeader("Range","bytes="+this._start+"-"+B)}try{R.send(this._config.downloadRequestBody)}catch(X){this._chunkError(X.message)}l&&R.status===0&&this._chunkError()}},this._chunkLoaded=function(){R.readyState===4&&(R.status<200||400<=R.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:R.responseText.length,this._finished=!this._config.chunkSize||this._start>=(function(P){var re=P.getResponseHeader("Content-Range");return re===null?-1:parseInt(re.substring(re.lastIndexOf("/")+1))})(R),this.parseChunk(R.responseText)))},this._chunkError=function(P){var re=R.statusText||P;this._sendError(new Error(re))}}function T(j){var R,P;(j=j||{}).chunkSize||(j.chunkSize=m.LocalChunkSize),v.call(this,j);var re=typeof FileReader<"u";this.stream=function(B){this._input=B,P=B.slice||B.webkitSlice||B.mozSlice,re?((R=new FileReader).onload=V(this._chunkLoaded,this),R.onerror=V(this._chunkError,this)):R=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var B=this._input;if(this._config.chunkSize){var X=Math.min(this._start+this._config.chunkSize,this._input.size);B=P.call(B,this._start,X)}var C=R.readAsText(B,this._config.encoding);re||this._chunkLoaded({target:{result:C}})},this._chunkLoaded=function(B){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(B.target.result)},this._chunkError=function(){this._sendError(R.error)}}function _(j){var R;v.call(this,j=j||{}),this.stream=function(P){return R=P,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var P,re=this._config.chunkSize;return re?(P=R.substring(0,re),R=R.substring(re)):(P=R,R=""),this._finished=!R,this.parseChunk(P)}}}function E(j){v.call(this,j=j||{});var R=[],P=!0,re=!1;this.pause=function(){v.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){v.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(B){this._input=B,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){re&&R.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),R.length?this.parseChunk(R.shift()):P=!0},this._streamData=V(function(B){try{R.push(typeof B=="string"?B:B.toString(this._config.encoding)),P&&(P=!1,this._checkIsFinished(),this.parseChunk(R.shift()))}catch(X){this._streamError(X)}},this),this._streamError=V(function(B){this._streamCleanUp(),this._sendError(B)},this),this._streamEnd=V(function(){this._streamCleanUp(),re=!0,this._streamData("")},this),this._streamCleanUp=V(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function S(j){var R,P,re,B=Math.pow(2,53),X=-B,C=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,ie=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,q=0,se=0,W=!1,me=!1,L=[],A={data:[],errors:[],meta:{}};if(M(j.step)){var Z=j.step;j.step=function(he){if(A=he,fe())te();else{if(te(),A.data.length===0)return;q+=he.data.length,j.preview&&q>j.preview?P.abort():(A.data=A.data[0],Z(A,$))}}}function K(he){return j.skipEmptyLines==="greedy"?he.join("").trim()==="":he.length===1&&he[0].length===0}function te(){return A&&re&&(Te("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+m.DefaultDelimiter+"'"),re=!1),j.skipEmptyLines&&(A.data=A.data.filter(function(he){return!K(he)})),fe()&&(function(){if(!A)return;function he(Be,Pe){M(j.transformHeader)&&(Be=j.transformHeader(Be,Pe)),L.push(Be)}if(Array.isArray(A.data[0])){for(var He=0;fe()&&He<A.data.length;He++)A.data[He].forEach(he);A.data.splice(0,1)}else A.data.forEach(he)})(),(function(){if(!A||!j.header&&!j.dynamicTyping&&!j.transform)return A;function he(Be,Pe){var Re,N=j.header?{}:[];for(Re=0;Re<Be.length;Re++){var be=Re,le=Be[Re];j.header&&(be=Re>=L.length?"__parsed_extra":L[Re]),j.transform&&(le=j.transform(le,be)),le=Ee(be,le),be==="__parsed_extra"?(N[be]=N[be]||[],N[be].push(le)):N[be]=le}return j.header&&(Re>L.length?Te("FieldMismatch","TooManyFields","Too many fields: expected "+L.length+" fields but parsed "+Re,se+Pe):Re<L.length&&Te("FieldMismatch","TooFewFields","Too few fields: expected "+L.length+" fields but parsed "+Re,se+Pe)),N}var He=1;return!A.data.length||Array.isArray(A.data[0])?(A.data=A.data.map(he),He=A.data.length):A.data=he(A.data,0),j.header&&A.meta&&(A.meta.fields=L),se+=He,A})()}function fe(){return j.header&&L.length===0}function Ee(he,He){return Be=he,j.dynamicTypingFunction&&j.dynamicTyping[Be]===void 0&&(j.dynamicTyping[Be]=j.dynamicTypingFunction(Be)),(j.dynamicTyping[Be]||j.dynamicTyping)===!0?He==="true"||He==="TRUE"||He!=="false"&&He!=="FALSE"&&((function(Pe){if(C.test(Pe)){var Re=parseFloat(Pe);if(X<Re&&Re<B)return!0}return!1})(He)?parseFloat(He):ie.test(He)?new Date(He):He===""?null:He):He;var Be}function Te(he,He,Be,Pe){var Re={type:he,code:He,message:Be};Pe!==void 0&&(Re.row=Pe),A.errors.push(Re)}this.parse=function(he,He,Be){var Pe=j.quoteChar||'"';if(j.newline||(j.newline=(function(be,le){be=be.substring(0,1048576);var J=new RegExp(w(le)+"([^]*?)"+w(le),"gm"),Q=(be=be.replace(J,"")).split("\r"),ae=be.split(`
`),ke=1<ae.length&&ae[0].length<Q[0].length;if(Q.length===1||ke)return`
`;for(var De=0,ue=0;ue<Q.length;ue++)Q[ue][0]===`
`&&De++;return De>=Q.length/2?`\r
`:"\r"})(he,Pe)),re=!1,j.delimiter)M(j.delimiter)&&(j.delimiter=j.delimiter(he),A.meta.delimiter=j.delimiter);else{var Re=(function(be,le,J,Q,ae){var ke,De,ue,je;ae=ae||[",","	","|",";",m.RECORD_SEP,m.UNIT_SEP];for(var ze=0;ze<ae.length;ze++){var Ne=ae[ze],Je=0,ht=0,st=0;ue=void 0;for(var Rt=new O({comments:Q,delimiter:Ne,newline:le,preview:10}).parse(be),Qt=0;Qt<Rt.data.length;Qt++)if(J&&K(Rt.data[Qt]))st++;else{var Bt=Rt.data[Qt].length;ht+=Bt,ue!==void 0?0<Bt&&(Je+=Math.abs(Bt-ue),ue=Bt):ue=Bt}0<Rt.data.length&&(ht/=Rt.data.length-st),(De===void 0||Je<=De)&&(je===void 0||je<ht)&&1.99<ht&&(De=Je,ke=Ne,je=ht)}return{successful:!!(j.delimiter=ke),bestDelimiter:ke}})(he,j.newline,j.skipEmptyLines,j.comments,j.delimitersToGuess);Re.successful?j.delimiter=Re.bestDelimiter:(re=!0,j.delimiter=m.DefaultDelimiter),A.meta.delimiter=j.delimiter}var N=F(j);return j.preview&&j.header&&N.preview++,R=he,P=new O(N),A=P.parse(R,He,Be),te(),W?{meta:{paused:!0}}:A||{meta:{paused:!1}}},this.paused=function(){return W},this.pause=function(){W=!0,P.abort(),R=M(j.chunk)?"":R.substring(P.getCharIndex())},this.resume=function(){$.streamer._halted?(W=!1,$.streamer.parseChunk(R,!0)):setTimeout($.resume,3)},this.aborted=function(){return me},this.abort=function(){me=!0,P.abort(),A.meta.aborted=!0,M(j.complete)&&j.complete(A),R=""}}function w(j){return j.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function O(j){var R,P=(j=j||{}).delimiter,re=j.newline,B=j.comments,X=j.step,C=j.preview,ie=j.fastMode,$=R=j.quoteChar===void 0||j.quoteChar===null?'"':j.quoteChar;if(j.escapeChar!==void 0&&($=j.escapeChar),(typeof P!="string"||-1<m.BAD_DELIMITERS.indexOf(P))&&(P=","),B===P)throw new Error("Comment character same as delimiter");B===!0?B="#":(typeof B!="string"||-1<m.BAD_DELIMITERS.indexOf(B))&&(B=!1),re!==`
`&&re!=="\r"&&re!==`\r
`&&(re=`
`);var q=0,se=!1;this.parse=function(W,me,L){if(typeof W!="string")throw new Error("Input must be a string");var A=W.length,Z=P.length,K=re.length,te=B.length,fe=M(X),Ee=[],Te=[],he=[],He=q=0;if(!W)return Pt();if(j.header&&!me){var Be=W.split(re)[0].split(P),Pe=[],Re={},N=!1;for(var be in Be){var le=Be[be];M(j.transformHeader)&&(le=j.transformHeader(le,be));var J=le,Q=Re[le]||0;for(0<Q&&(N=!0,J=le+"_"+Q),Re[le]=Q+1;Pe.includes(J);)J=J+"_"+Q;Pe.push(J)}if(N){var ae=W.split(re);ae[0]=Pe.join(P),W=ae.join(re)}}if(ie||ie!==!1&&W.indexOf(R)===-1){for(var ke=W.split(re),De=0;De<ke.length;De++){if(he=ke[De],q+=he.length,De!==ke.length-1)q+=re.length;else if(L)return Pt();if(!B||he.substring(0,te)!==B){if(fe){if(Ee=[],st(he.split(P)),pt(),se)return Pt()}else st(he.split(P));if(C&&C<=De)return Ee=Ee.slice(0,C),Pt(!0)}}return Pt()}for(var ue=W.indexOf(P,q),je=W.indexOf(re,q),ze=new RegExp(w($)+w(R),"g"),Ne=W.indexOf(R,q);;)if(W[q]!==R)if(B&&he.length===0&&W.substring(q,q+te)===B){if(je===-1)return Pt();q=je+K,je=W.indexOf(re,q),ue=W.indexOf(P,q)}else if(ue!==-1&&(ue<je||je===-1))he.push(W.substring(q,ue)),q=ue+Z,ue=W.indexOf(P,q);else{if(je===-1)break;if(he.push(W.substring(q,je)),Bt(je+K),fe&&(pt(),se))return Pt();if(C&&Ee.length>=C)return Pt(!0)}else for(Ne=q,q++;;){if((Ne=W.indexOf(R,Ne+1))===-1)return L||Te.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:Ee.length,index:q}),Qt();if(Ne===A-1)return Qt(W.substring(q,Ne).replace(ze,R));if(R!==$||W[Ne+1]!==$){if(R===$||Ne===0||W[Ne-1]!==$){ue!==-1&&ue<Ne+1&&(ue=W.indexOf(P,Ne+1)),je!==-1&&je<Ne+1&&(je=W.indexOf(re,Ne+1));var Je=Rt(je===-1?ue:Math.min(ue,je));if(W.substr(Ne+1+Je,Z)===P){he.push(W.substring(q,Ne).replace(ze,R)),W[q=Ne+1+Je+Z]!==R&&(Ne=W.indexOf(R,q)),ue=W.indexOf(P,q),je=W.indexOf(re,q);break}var ht=Rt(je);if(W.substring(Ne+1+ht,Ne+1+ht+K)===re){if(he.push(W.substring(q,Ne).replace(ze,R)),Bt(Ne+1+ht+K),ue=W.indexOf(P,q),Ne=W.indexOf(R,q),fe&&(pt(),se))return Pt();if(C&&Ee.length>=C)return Pt(!0);break}Te.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:Ee.length,index:q}),Ne++}}else Ne++}return Qt();function st(xt){Ee.push(xt),He=q}function Rt(xt){var mn=0;if(xt!==-1){var It=W.substring(Ne+1,xt);It&&It.trim()===""&&(mn=It.length)}return mn}function Qt(xt){return L||(xt===void 0&&(xt=W.substring(q)),he.push(xt),q=A,st(he),fe&&pt()),Pt()}function Bt(xt){q=xt,st(he),he=[],je=W.indexOf(re,q)}function Pt(xt){return{data:Ee,errors:Te,meta:{delimiter:P,linebreak:re,aborted:se,truncated:!!xt,cursor:He+(me||0)}}}function pt(){X(Pt()),Ee=[],Te=[]}},this.abort=function(){se=!0},this.getCharIndex=function(){return q}}function I(j){var R=j.data,P=h[R.workerId],re=!1;if(R.error)P.userError(R.error,R.file);else if(R.results&&R.results.data){var B={abort:function(){re=!0,U(R.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:z,resume:z};if(M(P.userStep)){for(var X=0;X<R.results.data.length&&(P.userStep({data:R.results.data[X],errors:R.results.errors,meta:R.results.meta},B),!re);X++);delete R.results}else M(P.userChunk)&&(P.userChunk(R.results,B,R.file),delete R.results)}R.finished&&!re&&U(R.workerId,R.results)}function U(j,R){var P=h[j];M(P.userComplete)&&P.userComplete(R),P.terminate(),delete h[j]}function z(){throw new Error("Not implemented.")}function F(j){if(typeof j!="object"||j===null)return j;var R=Array.isArray(j)?[]:{};for(var P in j)R[P]=F(j[P]);return R}function V(j,R){return function(){j.apply(R,arguments)}}function M(j){return typeof j=="function"}return c&&(i.onmessage=function(j){var R=j.data;if(m.WORKER_ID===void 0&&R&&(m.WORKER_ID=R.workerId),typeof R.input=="string")i.postMessage({workerId:m.WORKER_ID,results:m.parse(R.input,R.config),finished:!0});else if(i.File&&R.input instanceof File||R.input instanceof Object){var P=m.parse(R.input,R.config);P&&i.postMessage({workerId:m.WORKER_ID,results:P,finished:!0})}}),(x.prototype=Object.create(v.prototype)).constructor=x,(T.prototype=Object.create(v.prototype)).constructor=T,(_.prototype=Object.create(_.prototype)).constructor=_,(E.prototype=Object.create(v.prototype)).constructor=E,m})})(ou)),ou.exports}var YE=PE();const Ub=io(YE),VE=n=>{if(Array.isArray(n))return console.log("Migrating Legacy Array Backup..."),{version:9,decks:n.filter(Boolean).map(s=>(s.type||(s.type=Array.isArray(s.cards)?Ue.Flashcard:Ue.Quiz),s.type===Ue.Flashcard?s.cards=(s.cards||[]).filter(Boolean):s.type===Ue.Quiz&&(s.questions=(s.questions||[]).filter(Boolean)),s.id=String(s.id||crypto.randomUUID()),s.name||(s.name="Untitled Deck"),s)).filter(s=>s&&s.name),folders:[],deckSeries:[],reviews:[],sessions:[],seriesProgress:{},learningProgress:{},aiChatHistory:[]};if(typeof n=="object"&&n!==null){const a={...n};return a.version||(a.version=2),console.log(`Migrating Backup from v${a.version} to v9...`),a.decks||(a.decks=[]),a.folders||(a.folders=[]),a.deckSeries||(a.deckSeries=[]),a.reviews||(a.reviews=[]),a.sessions||(a.sessions=[]),a.seriesProgress||(a.seriesProgress={}),a.learningProgress||(a.learningProgress={}),a.aiChatHistory||(a.aiChatHistory=[]),a.decks=a.decks.map(s=>{if(!s)return null;s.id?s.id=String(s.id):s.id=crypto.randomUUID(),s.type||(s.cards&&s.cards.length>0?s.type="flashcard":s.infoCards&&s.infoCards.length>0?s.type="learning":s.type="quiz"),s.cards||(s.cards=[]),s.questions||(s.questions=[]),s.infoCards||(s.infoCards=[]);const i=l=>l?(l.id=String(l.id||crypto.randomUUID()),(l.interval===void 0||l.interval===null)&&(l.interval=0),(l.easeFactor===void 0||l.easeFactor===null)&&(l.easeFactor=2.5),(l.lapses===void 0||l.lapses===null)&&(l.lapses=0),(l.masteryLevel===void 0||l.masteryLevel===null)&&(l.masteryLevel=0),l.dueDate||(l.dueDate=new Date().toISOString()),l):null;return s.type==="flashcard"?s.cards=s.cards.map(i).filter(Boolean):(s.questions=s.questions.map(l=>{const c=i(l);return c?(c.questionType||(c.questionType="multipleChoice"),c.options||(c.options=[]),c.options=c.options.map(h=>({...h,id:String(h.id||crypto.randomUUID())})),c):null}).filter(Boolean),s.type==="learning"&&(s.infoCards=s.infoCards.map(l=>l?(l.id=String(l.id||crypto.randomUUID()),l.unlocksQuestionIds||(l.unlocksQuestionIds=[]),l):null).filter(Boolean))),s}).filter(Boolean),a.deckSeries=a.deckSeries.map(s=>(s.id=String(s.id),s.levels||(s.levels=[]),s)),a.reviews=a.reviews.map(s=>(s.itemId=String(s.itemId),s.deckId=String(s.deckId),s)),a.sessions=a.sessions.map(s=>s?((s.itemsCompleted===void 0||s.itemsCompleted===null)&&(s.itemsCompleted=s.currentIndex||0),s):null).filter(Boolean),a.version=9,a}return n},ku=async n=>{let a;try{a=JSON.parse(n)}catch{const i=Bh(n);if(!i.isValid&&!i.fixedJSON){const l=i.detailedErrors[0];throw l&&l.friendlyMessage?new Error(`Failed to parse backup file: ${l.friendlyMessage} (Line: ${l.line})`):new Error(`Failed to parse backup file: ${i.errors.join(", ")}`)}if(!i.parsed&&i.fixedJSON)try{a=JSON.parse(i.fixedJSON)}catch{throw new Error("The backup file had errors that could not be automatically fixed.")}else a=i.parsed}if(a===null||typeof a>"u")throw new Error("The backup file appears to be empty or invalid.");try{if(typeof a=="string"&&(a=JSON.parse(a)),typeof a=="object"&&a!==null&&a.dataType==="cogniflow-compressed-backup-v1"&&typeof a.content=="string")try{const i=(await Hh.loadAsync(a.content,{base64:!0})).file("backup.json");if(i){const l=await i.async("string");a=JSON.parse(l)}else throw new Error("Compressed backup is missing 'backup.json'.")}catch(s){throw new Error(`Failed to decompress backup: ${s.message}`)}if(typeof a=="object"&&a!==null&&!("version"in a)&&!Array.isArray(a)&&("data"in a&&typeof a.data=="object"?a=a.data:"content"in a&&typeof a.content=="object"&&(a=a.content)),a=VE(a),typeof a=="object"&&a!==null&&"version"in a){if(a.version>9)throw new Error(`Unsupported backup version: ${a.version}. Please check for app updates.`);const s=zE.safeParse(a);if(!s.success){const i=s.error.issues[0];throw new Error(`Invalid backup data at ${i.path.join(".")}: ${i.message}`)}return s.data}throw new Error("The file is not a valid CogniFlow backup file.")}catch(s){throw console.error("Failed to validate backup data structure:",s),new Error(s instanceof Error?s.message:"Invalid backup file structure.")}},xu=n=>{if(!n.trim())throw new Error("Pasted content is empty.");const a=Bh(n);if(!a.isValid){const h=a.detailedErrors[0];throw h&&h.friendlyMessage?new Error(`Invalid JSON: ${h.friendlyMessage}`):new Error(`Invalid JSON: ${a.errors.join(", ")}`)}const s=a.parsed,i=FE.safeParse(s);if(i.success){const h=i.data;for(const d of h.levels)for(const m of d.decks){if(typeof m.name!="string"||!m.type)throw new Error("Each deck in a series must have a 'name' and 'type'.");if(m.type==="quiz"&&!Array.isArray(m.questions))throw new Error(`Quiz deck "${m.name}" missing 'questions'.`);if(m.type==="flashcard"&&!Array.isArray(m.cards))throw new Error(`Flashcard deck "${m.name}" missing 'cards'.`)}return{type:"series",data:h}}const l=pe.array(Ob).safeParse(s);if(l.success)return{type:Ue.Flashcard,data:l.data};const c=TE.safeParse(s);if(c.success)return{type:Ue.Quiz,data:c.data};throw new Error("Unsupported JSON structure. Expected an array of flashcards, a single quiz object, or a series object.")},$2=(n,a)=>{if(!n.trim())throw new Error("Pasted content is empty.");const s=Bh(n);if(!s.isValid){const l=s.detailedErrors[0];throw l&&l.friendlyMessage?new Error(`Invalid JSON: ${l.friendlyMessage}`):new Error(`Invalid JSON: ${s.errors.join(", ")}`)}const i=s.parsed;if(!Array.isArray(i))throw new Error("JSON must be an array of items.");if(i.length===0)return[];if(a===Ue.Flashcard){const l=pe.array(Ob).safeParse(i);if(!l.success)throw new Error("Invalid flashcard format. Each item must have 'front' and 'back' properties.");return l.data}else{const l=pe.array(Rb).safeParse(i);if(!l.success){const c=l.error.issues[0];throw new Error(`Invalid question format at item ${String(c.path[0])}: ${c.message}`)}return l.data}},As=n=>{const a=new Date;return a.setHours(0,0,0,0),n.map(s=>({id:crypto.randomUUID(),front:s.front,back:s.back,dueDate:a.toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0}))},Ts=n=>{const a=new Date;return a.setHours(0,0,0,0),n.map(s=>({...s,id:crypto.randomUUID(),questionType:"multipleChoice",dueDate:a.toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0,detailedExplanation:s.detailedExplanation||"",options:s.options.map(i=>({id:i.id||crypto.randomUUID(),text:i.text,explanation:i.explanation}))}))},$E=n=>{const{data:a,errors:s}=Ub.parse(n,{header:!0,skipEmptyLines:!0,transformHeader:l=>l.trim().toLowerCase()});if(s.length>0)throw new Error(`CSV Parsing Error: ${s[0].message}`);const i=a.map(l=>{const c=l.front||l.question||l.term||l.en||Object.values(l)[0],h=l.back||l.answer||l.definition||l.translation||Object.values(l)[1];return!c||!h?null:{front:String(c).trim(),back:String(h).trim()}}).filter(l=>l!==null);if(i.length===0)throw new Error("No valid cards found in CSV. Ensure columns for Front/Back exist.");return i},Lb=async n=>{const a=n.name.toLowerCase();if(a.endsWith(".apkg")||a.endsWith(".zip"))return{type:"anki",data:{name:n.name},file:n,fileName:n.name};if(a.match(/\.(png|jpg|jpeg|webp|gif)$/))return{type:"image",data:{name:n.name,mimeType:n.type},file:n,fileName:n.name};if(a.endsWith(".csv"))try{const s=await n.text();return{type:"flashcard",data:$E(s),fileName:n.name}}catch(s){console.error("Failed to parse CSV",s)}if(a.endsWith(".json"))try{const s=await n.text();try{const i=xu(s);return{type:i.type,data:i.data,fileName:n.name}}catch{}try{return{type:"backup",data:await ku(s),fileName:n.name}}catch{}}catch(s){console.error("Failed to read file text",s)}return null};var ZE={};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var zy;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(zy||(zy={}));var By;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(By||(By={}));var Fy;(function(n){n.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",n.SILENT="SILENT",n.WHEN_IDLE="WHEN_IDLE",n.INTERRUPT="INTERRUPT"})(Fy||(Fy={}));var Se;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT",n.NULL="NULL"})(Se||(Se={}));var Gy;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Gy||(Gy={}));var qy;(function(n){n.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",n.SIMPLE_SEARCH="SIMPLE_SEARCH",n.ELASTIC_SEARCH="ELASTIC_SEARCH"})(qy||(qy={}));var Hy;(function(n){n.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",n.NO_AUTH="NO_AUTH",n.API_KEY_AUTH="API_KEY_AUTH",n.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",n.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",n.OAUTH="OAUTH",n.OIDC_AUTH="OIDC_AUTH"})(Hy||(Hy={}));var Py;(function(n){n.HTTP_IN_UNSPECIFIED="HTTP_IN_UNSPECIFIED",n.HTTP_IN_QUERY="HTTP_IN_QUERY",n.HTTP_IN_HEADER="HTTP_IN_HEADER",n.HTTP_IN_PATH="HTTP_IN_PATH",n.HTTP_IN_BODY="HTTP_IN_BODY",n.HTTP_IN_COOKIE="HTTP_IN_COOKIE"})(Py||(Py={}));var Yy;(function(n){n.PHISH_BLOCK_THRESHOLD_UNSPECIFIED="PHISH_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_HIGH_AND_ABOVE="BLOCK_HIGH_AND_ABOVE",n.BLOCK_HIGHER_AND_ABOVE="BLOCK_HIGHER_AND_ABOVE",n.BLOCK_VERY_HIGH_AND_ABOVE="BLOCK_VERY_HIGH_AND_ABOVE",n.BLOCK_ONLY_EXTREMELY_HIGH="BLOCK_ONLY_EXTREMELY_HIGH"})(Yy||(Yy={}));var Vy;(function(n){n.THINKING_LEVEL_UNSPECIFIED="THINKING_LEVEL_UNSPECIFIED",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH",n.MINIMAL="MINIMAL"})(Vy||(Vy={}));var $y;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",n.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",n.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",n.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",n.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})($y||($y={}));var Zy;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(Zy||(Zy={}));var Qy;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(Qy||(Qy={}));var Jy;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY",n.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",n.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",n.NO_IMAGE="NO_IMAGE",n.IMAGE_RECITATION="IMAGE_RECITATION",n.IMAGE_OTHER="IMAGE_OTHER"})(Jy||(Jy={}));var Ky;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(Ky||(Ky={}));var Xy;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Xy||(Xy={}));var Wy;(function(n){n.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",n.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",n.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",n.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",n.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(Wy||(Wy={}));var ev;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.IMAGE_SAFETY="IMAGE_SAFETY",n.MODEL_ARMOR="MODEL_ARMOR",n.JAILBREAK="JAILBREAK"})(ev||(ev={}));var tv;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(tv||(tv={}));var nv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(nv||(nv={}));var rv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(rv||(rv={}));var av;(function(n){n.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",n.TUNING_MODE_FULL="TUNING_MODE_FULL",n.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(av||(av={}));var sv;(function(n){n.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",n.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",n.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",n.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",n.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",n.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",n.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(sv||(sv={}));var iv;(function(n){n.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",n.JOB_STATE_QUEUED="JOB_STATE_QUEUED",n.JOB_STATE_PENDING="JOB_STATE_PENDING",n.JOB_STATE_RUNNING="JOB_STATE_RUNNING",n.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",n.JOB_STATE_FAILED="JOB_STATE_FAILED",n.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",n.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",n.JOB_STATE_PAUSED="JOB_STATE_PAUSED",n.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",n.JOB_STATE_UPDATING="JOB_STATE_UPDATING",n.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(iv||(iv={}));var ov;(function(n){n.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",n.TUNING_TASK_I2V="TUNING_TASK_I2V",n.TUNING_TASK_T2V="TUNING_TASK_T2V",n.TUNING_TASK_R2V="TUNING_TASK_R2V"})(ov||(ov={}));var lv;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH",n.MEDIA_RESOLUTION_ULTRA_HIGH="MEDIA_RESOLUTION_ULTRA_HIGH"})(lv||(lv={}));var cv;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(cv||(cv={}));var uv;(function(n){n.UNSPECIFIED="UNSPECIFIED",n.BLOCKING="BLOCKING",n.NON_BLOCKING="NON_BLOCKING"})(uv||(uv={}));var dv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(dv||(dv={}));var fv;(function(n){n.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",n.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(fv||(fv={}));var hv;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE",n.VALIDATED="VALIDATED"})(hv||(hv={}));var pv;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(pv||(pv={}));var mv;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(mv||(mv={}));var gv;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi",n.zh="zh",n.pt="pt",n.es="es"})(gv||(gv={}));var yv;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(yv||(yv={}));var vv;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(vv||(vv={}));var bv;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(bv||(bv={}));var xv;(function(n){n.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",n.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",n.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",n.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",n.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",n.EDIT_MODE_STYLE="EDIT_MODE_STYLE",n.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",n.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(xv||(xv={}));var _v;(function(n){n.FOREGROUND="FOREGROUND",n.BACKGROUND="BACKGROUND",n.PROMPT="PROMPT",n.SEMANTIC="SEMANTIC",n.INTERACTIVE="INTERACTIVE"})(_v||(_v={}));var Sv;(function(n){n.ASSET="ASSET",n.STYLE="STYLE"})(Sv||(Sv={}));var Ev;(function(n){n.INSERT="INSERT",n.REMOVE="REMOVE",n.REMOVE_STATIC="REMOVE_STATIC",n.OUTPAINT="OUTPAINT"})(Ev||(Ev={}));var wv;(function(n){n.OPTIMIZED="OPTIMIZED",n.LOSSLESS="LOSSLESS"})(wv||(wv={}));var Tv;(function(n){n.SUPERVISED_FINE_TUNING="SUPERVISED_FINE_TUNING",n.PREFERENCE_TUNING="PREFERENCE_TUNING"})(Tv||(Tv={}));var Av;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.STATE_PENDING="STATE_PENDING",n.STATE_ACTIVE="STATE_ACTIVE",n.STATE_FAILED="STATE_FAILED"})(Av||(Av={}));var kv;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(kv||(kv={}));var Nv;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(Nv||(Nv={}));var Dv;(function(n){n.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.RESPONSE_REJECTED="RESPONSE_REJECTED",n.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Dv||(Dv={}));var Cv;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(Cv||(Cv={}));var Ov;(function(n){n.VAD_SIGNAL_TYPE_UNSPECIFIED="VAD_SIGNAL_TYPE_UNSPECIFIED",n.VAD_SIGNAL_TYPE_SOS="VAD_SIGNAL_TYPE_SOS",n.VAD_SIGNAL_TYPE_EOS="VAD_SIGNAL_TYPE_EOS"})(Ov||(Ov={}));var Rv;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Rv||(Rv={}));var jv;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(jv||(jv={}));var Iv;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Iv||(Iv={}));var Mv;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Mv||(Mv={}));var Uv;(function(n){n.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",n.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",n.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",n.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",n.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",n.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",n.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",n.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",n.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",n.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",n.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",n.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",n.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(Uv||(Uv={}));var Lv;(function(n){n.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",n.QUALITY="QUALITY",n.DIVERSITY="DIVERSITY",n.VOCALIZATION="VOCALIZATION"})(Lv||(Lv={}));var zv;(function(n){n.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",n.PLAY="PLAY",n.PAUSE="PAUSE",n.STOP="STOP",n.RESET_CONTEXT="RESET_CONTEXT"})(zv||(zv={}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Bv;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents",n.PAGED_ITEM_FILE_SEARCH_STORES="fileSearchStores",n.PAGED_ITEM_DOCUMENTS="documents"})(Bv||(Bv={}));function _u(n,a){var s={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&a.indexOf(i)<0&&(s[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var l=0,i=Object.getOwnPropertySymbols(n);l<i.length;l++)a.indexOf(i[l])<0&&Object.prototype.propertyIsEnumerable.call(n,i[l])&&(s[i[l]]=n[i[l]]);return s}function Fv(n){var a=typeof Symbol=="function"&&Symbol.iterator,s=a&&n[a],i=0;if(s)return s.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(a?"Object is not iterable.":"Symbol.iterator is not defined.")}function cn(n){return this instanceof cn?(this.v=n,this):new cn(n)}function fl(n,a,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=s.apply(n,a||[]),l,c=[];return l=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),d("next"),d("throw"),d("return",h),l[Symbol.asyncIterator]=function(){return this},l;function h(_){return function(E){return Promise.resolve(E).then(_,x)}}function d(_,E){i[_]&&(l[_]=function(S){return new Promise(function(w,O){c.push([_,S,w,O])>1||m(_,S)})},E&&(l[_]=E(l[_])))}function m(_,E){try{p(i[_](E))}catch(S){T(c[0][3],S)}}function p(_){_.value instanceof cn?Promise.resolve(_.value.v).then(v,x):T(c[0][2],_)}function v(_){m("next",_)}function x(_){m("throw",_)}function T(_,E){_(E),c.shift(),c.length&&m(c[0][0],c[0][1])}}function to(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var a=n[Symbol.asyncIterator],s;return a?a.call(n):(n=typeof Fv=="function"?Fv(n):n[Symbol.iterator](),s={},i("next"),i("throw"),i("return"),s[Symbol.asyncIterator]=function(){return this},s);function i(c){s[c]=n[c]&&function(h){return new Promise(function(d,m){h=n[c](h),l(d,m,h.done,h.value)})}}function l(c,h,d,m){Promise.resolve(m).then(function(p){c({value:p,done:d})},h)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let zb=function(){const{crypto:n}=globalThis;if(n!=null&&n.randomUUID)return zb=n.randomUUID.bind(n),n.randomUUID();const a=new Uint8Array(1),s=n?()=>n.getRandomValues(a)[0]:()=>Math.random()*255&255;return"10000000-1000-4000-8000-100000000000".replace(/[018]/g,i=>(+i^s()&15>>+i/4).toString(16))};const QE=()=>zb();/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Nh(n){return typeof n=="object"&&n!==null&&("name"in n&&n.name==="AbortError"||"message"in n&&String(n.message).includes("FetchRequestCanceledException"))}const Dh=n=>{if(n instanceof Error)return n;if(typeof n=="object"&&n!==null){try{if(Object.prototype.toString.call(n)==="[object Error]"){const a=new Error(n.message,n.cause?{cause:n.cause}:{});return n.stack&&(a.stack=n.stack),n.cause&&!a.cause&&(a.cause=n.cause),n.name&&(a.name=n.name),a}}catch{}try{return new Error(JSON.stringify(n))}catch{}}return new Error(n)};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Pr extends Error{}class tr extends Pr{constructor(a,s,i,l){super(`${tr.makeMessage(a,s,i)}`),this.status=a,this.headers=l,this.error=s}static makeMessage(a,s,i){const l=s!=null&&s.message?typeof s.message=="string"?s.message:JSON.stringify(s.message):s?JSON.stringify(s):i;return a&&l?`${a} ${l}`:a?`${a} status code (no body)`:l||"(no status code or body)"}static generate(a,s,i,l){if(!a||!l)return new Nu({message:i,cause:Dh(s)});const c=s;return a===400?new Fb(a,c,i,l):a===401?new Gb(a,c,i,l):a===403?new qb(a,c,i,l):a===404?new Hb(a,c,i,l):a===409?new Pb(a,c,i,l):a===422?new Yb(a,c,i,l):a===429?new Vb(a,c,i,l):a>=500?new $b(a,c,i,l):new tr(a,c,i,l)}}class Ch extends tr{constructor({message:a}={}){super(void 0,void 0,a||"Request was aborted.",void 0)}}class Nu extends tr{constructor({message:a,cause:s}){super(void 0,void 0,a||"Connection error.",void 0),s&&(this.cause=s)}}class Bb extends Nu{constructor({message:a}={}){super({message:a??"Request timed out."})}}class Fb extends tr{}class Gb extends tr{}class qb extends tr{}class Hb extends tr{}class Pb extends tr{}class Yb extends tr{}class Vb extends tr{}class $b extends tr{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const JE=/^[a-z][a-z0-9+.-]*:/i,KE=n=>JE.test(n);let Oh=n=>(Oh=Array.isArray,Oh(n));const XE=Oh;let WE=XE;const Gv=WE;function e1(n){if(!n)return!0;for(const a in n)return!1;return!0}function t1(n,a){return Object.prototype.hasOwnProperty.call(n,a)}const n1=(n,a)=>{if(typeof a!="number"||!Number.isInteger(a))throw new Pr(`${n} must be an integer`);if(a<0)throw new Pr(`${n} must be a positive integer`);return a},r1=n=>{try{return JSON.parse(n)}catch{return}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const a1=n=>new Promise(a=>setTimeout(a,n));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qi="0.0.1";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function s1(){return typeof Deno<"u"&&Deno.build!=null?"deno":typeof EdgeRuntime<"u"?"edge":Object.prototype.toString.call(typeof globalThis.process<"u"?globalThis.process:0)==="[object process]"?"node":"unknown"}const i1=()=>{var n,a,s,i,l;const c=s1();if(c==="deno")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qi,"X-Stainless-OS":Hv(Deno.build.os),"X-Stainless-Arch":qv(Deno.build.arch),"X-Stainless-Runtime":"deno","X-Stainless-Runtime-Version":typeof Deno.version=="string"?Deno.version:(a=(n=Deno.version)===null||n===void 0?void 0:n.deno)!==null&&a!==void 0?a:"unknown"};if(typeof EdgeRuntime<"u")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":`other:${EdgeRuntime}`,"X-Stainless-Runtime":"edge","X-Stainless-Runtime-Version":globalThis.process.version};if(c==="node")return{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qi,"X-Stainless-OS":Hv((s=globalThis.process.platform)!==null&&s!==void 0?s:"unknown"),"X-Stainless-Arch":qv((i=globalThis.process.arch)!==null&&i!==void 0?i:"unknown"),"X-Stainless-Runtime":"node","X-Stainless-Runtime-Version":(l=globalThis.process.version)!==null&&l!==void 0?l:"unknown"};const h=o1();return h?{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":`browser:${h.browser}`,"X-Stainless-Runtime-Version":h.version}:{"X-Stainless-Lang":"js","X-Stainless-Package-Version":Qi,"X-Stainless-OS":"Unknown","X-Stainless-Arch":"unknown","X-Stainless-Runtime":"unknown","X-Stainless-Runtime-Version":"unknown"}};function o1(){if(typeof navigator>"u"||!navigator)return null;const n=[{key:"edge",pattern:/Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"ie",pattern:/Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"chrome",pattern:/Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"firefox",pattern:/Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/},{key:"safari",pattern:/(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/}];for(const{key:a,pattern:s}of n){const i=s.exec(navigator.userAgent);if(i){const l=i[1]||0,c=i[2]||0,h=i[3]||0;return{browser:a,version:`${l}.${c}.${h}`}}}return null}const qv=n=>n==="x32"?"x32":n==="x86_64"||n==="x64"?"x64":n==="arm"?"arm":n==="aarch64"||n==="arm64"?"arm64":n?`other:${n}`:"unknown",Hv=n=>(n=n.toLowerCase(),n.includes("ios")?"iOS":n==="android"?"Android":n==="darwin"?"MacOS":n==="win32"?"Windows":n==="freebsd"?"FreeBSD":n==="openbsd"?"OpenBSD":n==="linux"?"Linux":n?`Other:${n}`:"Unknown");let $c;const l1=()=>$c??($c=i1());/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function c1(){if(typeof fetch<"u")return fetch;throw new Error("`fetch` is not defined as a global; Either pass `fetch` to the client, `new GeminiNextGenAPIClient({ fetch })` or polyfill the global, `globalThis.fetch = fetch`")}function Zb(...n){const a=globalThis.ReadableStream;if(typeof a>"u")throw new Error("`ReadableStream` is not defined as a global; You will need to polyfill it, `globalThis.ReadableStream = ReadableStream`");return new a(...n)}function u1(n){let a=Symbol.asyncIterator in n?n[Symbol.asyncIterator]():n[Symbol.iterator]();return Zb({start(){},async pull(s){const{done:i,value:l}=await a.next();i?s.close():s.enqueue(l)},async cancel(){var s;await((s=a.return)===null||s===void 0?void 0:s.call(a))}})}function Qb(n){if(n[Symbol.asyncIterator])return n;const a=n.getReader();return{async next(){try{const s=await a.read();return s!=null&&s.done&&a.releaseLock(),s}catch(s){throw a.releaseLock(),s}},async return(){const s=a.cancel();return a.releaseLock(),await s,{done:!0,value:void 0}},[Symbol.asyncIterator](){return this}}}async function d1(n){var a,s;if(n===null||typeof n!="object")return;if(n[Symbol.asyncIterator]){await((s=(a=n[Symbol.asyncIterator]()).return)===null||s===void 0?void 0:s.call(a));return}const i=n.getReader(),l=i.cancel();i.releaseLock(),await l}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const f1=({headers:n,body:a})=>({bodyHeaders:{"content-type":"application/json"},body:JSON.stringify(a)});/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Jb=()=>{var n;if(typeof File>"u"){const{process:a}=globalThis,s=typeof((n=a==null?void 0:a.versions)===null||n===void 0?void 0:n.node)=="string"&&parseInt(a.versions.node.split("."))<20;throw new Error("`File` is not defined as a global, which is required for file uploads."+(s?" Update to Node 20 LTS or newer, or set `globalThis.File` to `import('node:buffer').File`.":""))}};function ah(n,a,s){return Jb(),new File(n,a??"unknown_file",s)}function h1(n){return(typeof n=="object"&&n!==null&&("name"in n&&n.name&&String(n.name)||"url"in n&&n.url&&String(n.url)||"filename"in n&&n.filename&&String(n.filename)||"path"in n&&n.path&&String(n.path))||"").split(/[\\/]/).pop()||void 0}const p1=n=>n!=null&&typeof n=="object"&&typeof n[Symbol.asyncIterator]=="function";/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Kb=n=>n!=null&&typeof n=="object"&&typeof n.size=="number"&&typeof n.type=="string"&&typeof n.text=="function"&&typeof n.slice=="function"&&typeof n.arrayBuffer=="function",m1=n=>n!=null&&typeof n=="object"&&typeof n.name=="string"&&typeof n.lastModified=="number"&&Kb(n),g1=n=>n!=null&&typeof n=="object"&&typeof n.url=="string"&&typeof n.blob=="function";async function y1(n,a,s){if(Jb(),n=await n,m1(n))return n instanceof File?n:ah([await n.arrayBuffer()],n.name);if(g1(n)){const l=await n.blob();return a||(a=new URL(n.url).pathname.split(/[\\/]/).pop()),ah(await Rh(l),a,s)}const i=await Rh(n);if(a||(a=h1(n)),!(s!=null&&s.type)){const l=i.find(c=>typeof c=="object"&&"type"in c&&c.type);typeof l=="string"&&(s=Object.assign(Object.assign({},s),{type:l}))}return ah(i,a,s)}async function Rh(n){var a,s,i,l,c;let h=[];if(typeof n=="string"||ArrayBuffer.isView(n)||n instanceof ArrayBuffer)h.push(n);else if(Kb(n))h.push(n instanceof Blob?n:await n.arrayBuffer());else if(p1(n))try{for(var d=!0,m=to(n),p;p=await m.next(),a=p.done,!a;d=!0){l=p.value,d=!1;const v=l;h.push(...await Rh(v))}}catch(v){s={error:v}}finally{try{!d&&!a&&(i=m.return)&&await i.call(m)}finally{if(s)throw s.error}}else{const v=(c=n==null?void 0:n.constructor)===null||c===void 0?void 0:c.name;throw new Error(`Unexpected data type: ${typeof n}${v?`; constructor: ${v}`:""}${v1(n)}`)}return h}function v1(n){return typeof n!="object"||n===null?"":`; props: [${Object.getOwnPropertyNames(n).map(s=>`"${s}"`).join(", ")}]`}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xb{constructor(a){this._client=a}}Xb._key=[];/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Wb(n){return n.replace(/[^A-Za-z0-9\-._~!$&'()*+,;=:@]+/g,encodeURIComponent)}const Pv=Object.freeze(Object.create(null)),b1=(n=Wb)=>(function(s,...i){if(s.length===1)return s[0];let l=!1;const c=[],h=s.reduce((v,x,T)=>{var _,E,S;/[?#]/.test(x)&&(l=!0);const w=i[T];let O=(l?encodeURIComponent:n)(""+w);return T!==i.length&&(w==null||typeof w=="object"&&w.toString===((S=Object.getPrototypeOf((E=Object.getPrototypeOf((_=w.hasOwnProperty)!==null&&_!==void 0?_:Pv))!==null&&E!==void 0?E:Pv))===null||S===void 0?void 0:S.toString))&&(O=w+"",c.push({start:v.length+x.length,length:O.length,error:`Value of type ${Object.prototype.toString.call(w).slice(8,-1)} is not a valid path parameter`})),v+x+(T===i.length?"":O)},""),d=h.split(/[?#]/,1)[0],m=new RegExp("(?<=^|\\/)(?:\\.|%2e){1,2}(?=\\/|$)","gi");let p;for(;(p=m.exec(d))!==null;)c.push({start:p.index,length:p[0].length,error:`Value "${p[0]}" can't be safely passed as a path parameter`});if(c.sort((v,x)=>v.start-x.start),c.length>0){let v=0;const x=c.reduce((T,_)=>{const E=" ".repeat(_.start-v),S="^".repeat(_.length);return v=_.start+_.length,T+E+S},"");throw new Pr(`Path parameters result in path with invalid segments:
${c.map(T=>T.error).join(`
`)}
${h}
${x}`)}return h}),Zc=b1(Wb);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class e0 extends Xb{create(a,s){var i;const{api_version:l=this._client.apiVersion}=a,c=_u(a,["api_version"]);if("model"in c&&"agent_config"in c)throw new Pr("Invalid request: specified `model` and `agent_config`. If specifying `model`, use `generation_config`.");if("agent"in c&&"generation_config"in c)throw new Pr("Invalid request: specified `agent` and `generation_config`. If specifying `agent`, use `agent_config`.");return this._client.post(Zc`/${l}/interactions`,Object.assign(Object.assign({body:c},s),{stream:(i=a.stream)!==null&&i!==void 0?i:!1}))}delete(a,s={},i){const{api_version:l=this._client.apiVersion}=s??{};return this._client.delete(Zc`/${l}/interactions/${a}`,i)}cancel(a,s={},i){const{api_version:l=this._client.apiVersion}=s??{};return this._client.post(Zc`/${l}/interactions/${a}/cancel`,i)}get(a,s={},i){var l;const c=s??{},{api_version:h=this._client.apiVersion}=c,d=_u(c,["api_version"]);return this._client.get(Zc`/${h}/interactions/${a}`,Object.assign(Object.assign({query:d},i),{stream:(l=s==null?void 0:s.stream)!==null&&l!==void 0?l:!1}))}}e0._key=Object.freeze(["interactions"]);class t0 extends e0{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function x1(n){let a=0;for(const l of n)a+=l.length;const s=new Uint8Array(a);let i=0;for(const l of n)s.set(l,i),i+=l.length;return s}let Qc;function Ph(n){let a;return(Qc??(a=new globalThis.TextEncoder,Qc=a.encode.bind(a)))(n)}let Jc;function Yv(n){let a;return(Jc??(a=new globalThis.TextDecoder,Jc=a.decode.bind(a)))(n)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Du{constructor(){this.buffer=new Uint8Array,this.carriageReturnIndex=null}decode(a){if(a==null)return[];const s=a instanceof ArrayBuffer?new Uint8Array(a):typeof a=="string"?Ph(a):a;this.buffer=x1([this.buffer,s]);const i=[];let l;for(;(l=_1(this.buffer,this.carriageReturnIndex))!=null;){if(l.carriage&&this.carriageReturnIndex==null){this.carriageReturnIndex=l.index;continue}if(this.carriageReturnIndex!=null&&(l.index!==this.carriageReturnIndex+1||l.carriage)){i.push(Yv(this.buffer.subarray(0,this.carriageReturnIndex-1))),this.buffer=this.buffer.subarray(this.carriageReturnIndex),this.carriageReturnIndex=null;continue}const c=this.carriageReturnIndex!==null?l.preceding-1:l.preceding,h=Yv(this.buffer.subarray(0,c));i.push(h),this.buffer=this.buffer.subarray(l.index),this.carriageReturnIndex=null}return i}flush(){return this.buffer.length?this.decode(`
`):[]}}Du.NEWLINE_CHARS=new Set([`
`,"\r"]);Du.NEWLINE_REGEXP=/\r\n|[\n\r]/g;function _1(n,a){for(let l=a??0;l<n.length;l++){if(n[l]===10)return{preceding:l,index:l+1,carriage:!1};if(n[l]===13)return{preceding:l,index:l+1,carriage:!0}}return null}function S1(n){for(let i=0;i<n.length-1;i++){if(n[i]===10&&n[i+1]===10||n[i]===13&&n[i+1]===13)return i+2;if(n[i]===13&&n[i+1]===10&&i+3<n.length&&n[i+2]===13&&n[i+3]===10)return i+4}return-1}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Su={off:0,error:200,warn:300,info:400,debug:500},Vv=(n,a,s)=>{if(n){if(t1(Su,n))return n;Xn(s).warn(`${a} was set to ${JSON.stringify(n)}, expected one of ${JSON.stringify(Object.keys(Su))}`)}};function ul(){}function Kc(n,a,s){return!a||Su[n]>Su[s]?ul:a[n].bind(a)}const E1={error:ul,warn:ul,info:ul,debug:ul};let $v=new WeakMap;function Xn(n){var a;const s=n.logger,i=(a=n.logLevel)!==null&&a!==void 0?a:"off";if(!s)return E1;const l=$v.get(s);if(l&&l[0]===i)return l[1];const c={error:Kc("error",s,i),warn:Kc("warn",s,i),info:Kc("info",s,i),debug:Kc("debug",s,i)};return $v.set(s,[i,c]),c}const ni=n=>(n.options&&(n.options=Object.assign({},n.options),delete n.options.headers),n.headers&&(n.headers=Object.fromEntries((n.headers instanceof Headers?[...n.headers]:Object.entries(n.headers)).map(([a,s])=>[a,a.toLowerCase()==="x-goog-api-key"||a.toLowerCase()==="authorization"||a.toLowerCase()==="cookie"||a.toLowerCase()==="set-cookie"?"***":s]))),"retryOfRequestLogID"in n&&(n.retryOfRequestLogID&&(n.retryOf=n.retryOfRequestLogID),delete n.retryOfRequestLogID),n);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Xi{constructor(a,s,i){this.iterator=a,this.controller=s,this.client=i}static fromSSEResponse(a,s,i){let l=!1;const c=i?Xn(i):console;function h(){return fl(this,arguments,function*(){var m,p,v,x;if(l)throw new Pr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let T=!1;try{try{for(var _=!0,E=to(w1(a,s)),S;S=yield cn(E.next()),m=S.done,!m;_=!0){x=S.value,_=!1;const w=x;if(!T)if(w.data.startsWith("[DONE]")){T=!0;continue}else try{yield yield cn(JSON.parse(w.data))}catch(O){throw c.error("Could not parse message into JSON:",w.data),c.error("From chunk:",w.raw),O}}}catch(w){p={error:w}}finally{try{!_&&!m&&(v=E.return)&&(yield cn(v.call(E)))}finally{if(p)throw p.error}}T=!0}catch(w){if(Nh(w))return yield cn(void 0);throw w}finally{T||s.abort()}})}return new Xi(h,s,i)}static fromReadableStream(a,s,i){let l=!1;function c(){return fl(this,arguments,function*(){var m,p,v,x;const T=new Du,_=Qb(a);try{for(var E=!0,S=to(_),w;w=yield cn(S.next()),m=w.done,!m;E=!0){x=w.value,E=!1;const O=x;for(const I of T.decode(O))yield yield cn(I)}}catch(O){p={error:O}}finally{try{!E&&!m&&(v=S.return)&&(yield cn(v.call(S)))}finally{if(p)throw p.error}}for(const O of T.flush())yield yield cn(O)})}function h(){return fl(this,arguments,function*(){var m,p,v,x;if(l)throw new Pr("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");l=!0;let T=!1;try{try{for(var _=!0,E=to(c()),S;S=yield cn(E.next()),m=S.done,!m;_=!0){x=S.value,_=!1;const w=x;T||w&&(yield yield cn(JSON.parse(w)))}}catch(w){p={error:w}}finally{try{!_&&!m&&(v=E.return)&&(yield cn(v.call(E)))}finally{if(p)throw p.error}}T=!0}catch(w){if(Nh(w))return yield cn(void 0);throw w}finally{T||s.abort()}})}return new Xi(h,s,i)}[Symbol.asyncIterator](){return this.iterator()}tee(){const a=[],s=[],i=this.iterator(),l=c=>({next:()=>{if(c.length===0){const h=i.next();a.push(h),s.push(h)}return c.shift()}});return[new Xi(()=>l(a),this.controller,this.client),new Xi(()=>l(s),this.controller,this.client)]}toReadableStream(){const a=this;let s;return Zb({async start(){s=a[Symbol.asyncIterator]()},async pull(i){try{const{value:l,done:c}=await s.next();if(c)return i.close();const h=Ph(JSON.stringify(l)+`
`);i.enqueue(h)}catch(l){i.error(l)}},async cancel(){var i;await((i=s.return)===null||i===void 0?void 0:i.call(s))}})}}function w1(n,a){return fl(this,arguments,function*(){var i,l,c,h;if(!n.body)throw a.abort(),typeof globalThis.navigator<"u"&&globalThis.navigator.product==="ReactNative"?new Pr("The default react-native fetch implementation does not support streaming. Please use expo/fetch: https://docs.expo.dev/versions/latest/sdk/expo/#expofetch-api"):new Pr("Attempted to iterate over a response with no body");const d=new A1,m=new Du,p=Qb(n.body);try{for(var v=!0,x=to(T1(p)),T;T=yield cn(x.next()),i=T.done,!i;v=!0){h=T.value,v=!1;const _=h;for(const E of m.decode(_)){const S=d.decode(E);S&&(yield yield cn(S))}}}catch(_){l={error:_}}finally{try{!v&&!i&&(c=x.return)&&(yield cn(c.call(x)))}finally{if(l)throw l.error}}for(const _ of m.flush()){const E=d.decode(_);E&&(yield yield cn(E))}})}function T1(n){return fl(this,arguments,function*(){var s,i,l,c;let h=new Uint8Array;try{for(var d=!0,m=to(n),p;p=yield cn(m.next()),s=p.done,!s;d=!0){c=p.value,d=!1;const v=c;if(v==null)continue;const x=v instanceof ArrayBuffer?new Uint8Array(v):typeof v=="string"?Ph(v):v;let T=new Uint8Array(h.length+x.length);T.set(h),T.set(x,h.length),h=T;let _;for(;(_=S1(h))!==-1;)yield yield cn(h.slice(0,_)),h=h.slice(_)}}catch(v){i={error:v}}finally{try{!d&&!s&&(l=m.return)&&(yield cn(l.call(m)))}finally{if(i)throw i.error}}h.length>0&&(yield yield cn(h))})}class A1{constructor(){this.event=null,this.data=[],this.chunks=[]}decode(a){if(a.endsWith("\r")&&(a=a.substring(0,a.length-1)),!a){if(!this.event&&!this.data.length)return null;const c={event:this.event,data:this.data.join(`
`),raw:this.chunks};return this.event=null,this.data=[],this.chunks=[],c}if(this.chunks.push(a),a.startsWith(":"))return null;let[s,i,l]=k1(a,":");return l.startsWith(" ")&&(l=l.substring(1)),s==="event"?this.event=l:s==="data"&&this.data.push(l),null}}function k1(n,a){const s=n.indexOf(a);return s!==-1?[n.substring(0,s),a,n.substring(s+a.length)]:[n,"",""]}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function N1(n,a){const{response:s,requestLogID:i,retryOfRequestLogID:l,startTime:c}=a,h=await(async()=>{var d;if(a.options.stream)return Xn(n).debug("response",s.status,s.url,s.headers,s.body),a.options.__streamClass?a.options.__streamClass.fromSSEResponse(s,a.controller,n):Xi.fromSSEResponse(s,a.controller,n);if(s.status===204)return null;if(a.options.__binaryResponse)return s;const m=s.headers.get("content-type"),p=(d=m==null?void 0:m.split(";")[0])===null||d===void 0?void 0:d.trim();return(p==null?void 0:p.includes("application/json"))||(p==null?void 0:p.endsWith("+json"))?await s.json():await s.text()})();return Xn(n).debug(`[${i}] response parsed`,ni({retryOfRequestLogID:l,url:s.url,status:s.status,body:h,durationMs:Date.now()-c})),h}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Yh extends Promise{constructor(a,s,i=N1){super(l=>{l(null)}),this.responsePromise=s,this.parseResponse=i,this.client=a}_thenUnwrap(a){return new Yh(this.client,this.responsePromise,async(s,i)=>a(await this.parseResponse(s,i),i))}asResponse(){return this.responsePromise.then(a=>a.response)}async withResponse(){const[a,s]=await Promise.all([this.parse(),this.asResponse()]);return{data:a,response:s}}parse(){return this.parsedPromise||(this.parsedPromise=this.responsePromise.then(a=>this.parseResponse(this.client,a))),this.parsedPromise}then(a,s){return this.parse().then(a,s)}catch(a){return this.parse().catch(a)}finally(a){return this.parse().finally(a)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const n0=Symbol("brand.privateNullableHeaders");function*D1(n){if(!n)return;if(n0 in n){const{values:i,nulls:l}=n;yield*i.entries();for(const c of l)yield[c,null];return}let a=!1,s;n instanceof Headers?s=n.entries():Gv(n)?s=n:(a=!0,s=Object.entries(n??{}));for(let i of s){const l=i[0];if(typeof l!="string")throw new TypeError("expected header name to be a string");const c=Gv(i[1])?i[1]:[i[1]];let h=!1;for(const d of c)d!==void 0&&(a&&!h&&(h=!0,yield[l,null]),yield[l,d])}}const nl=n=>{const a=new Headers,s=new Set;for(const i of n){const l=new Set;for(const[c,h]of D1(i)){const d=c.toLowerCase();l.has(d)||(a.delete(c),l.add(d)),h===null?(a.delete(c),s.add(d)):(a.append(c,h),s.delete(d))}}return{[n0]:!0,values:a,nulls:s}};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const sh=n=>{var a,s,i,l,c,h;if(typeof globalThis.process<"u")return(i=(s=(a=ZE)===null||a===void 0?void 0:a[n])===null||s===void 0?void 0:s.trim())!==null&&i!==void 0?i:void 0;if(typeof globalThis.Deno<"u")return(h=(c=(l=globalThis.Deno.env)===null||l===void 0?void 0:l.get)===null||c===void 0?void 0:c.call(l,n))===null||h===void 0?void 0:h.trim()};/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var r0;class Cu{constructor(a){var s,i,l,c,h,d,m,{baseURL:p=sh("GEMINI_NEXT_GEN_API_BASE_URL"),apiKey:v=(s=sh("GEMINI_API_KEY"))!==null&&s!==void 0?s:null,apiVersion:x="v1beta"}=a,T=_u(a,["baseURL","apiKey","apiVersion"]);const _=Object.assign(Object.assign({apiKey:v,apiVersion:x},T),{baseURL:p||"https://generativelanguage.googleapis.com"});this.baseURL=_.baseURL,this.timeout=(i=_.timeout)!==null&&i!==void 0?i:Cu.DEFAULT_TIMEOUT,this.logger=(l=_.logger)!==null&&l!==void 0?l:console;const E="warn";this.logLevel=E,this.logLevel=(h=(c=Vv(_.logLevel,"ClientOptions.logLevel",this))!==null&&c!==void 0?c:Vv(sh("GEMINI_NEXT_GEN_API_LOG"),"process.env['GEMINI_NEXT_GEN_API_LOG']",this))!==null&&h!==void 0?h:E,this.fetchOptions=_.fetchOptions,this.maxRetries=(d=_.maxRetries)!==null&&d!==void 0?d:2,this.fetch=(m=_.fetch)!==null&&m!==void 0?m:c1(),this.encoder=f1,this._options=_,this.apiKey=v,this.apiVersion=x,this.clientAdapter=_.clientAdapter}withOptions(a){return new this.constructor(Object.assign(Object.assign(Object.assign({},this._options),{baseURL:this.baseURL,maxRetries:this.maxRetries,timeout:this.timeout,logger:this.logger,logLevel:this.logLevel,fetch:this.fetch,fetchOptions:this.fetchOptions,apiKey:this.apiKey,apiVersion:this.apiVersion}),a))}baseURLOverridden(){return this.baseURL!=="https://generativelanguage.googleapis.com"}defaultQuery(){return this._options.defaultQuery}validateHeaders({values:a,nulls:s}){if(!(a.has("authorization")||a.has("x-goog-api-key"))&&!(this.apiKey&&a.get("x-goog-api-key"))&&!s.has("x-goog-api-key"))throw new Error('Could not resolve authentication method. Expected the apiKey to be set. Or for the "x-goog-api-key" headers to be explicitly omitted')}async authHeaders(a){const s=nl([a.headers]);if(!(s.values.has("authorization")||s.values.has("x-goog-api-key"))){if(this.apiKey)return nl([{"x-goog-api-key":this.apiKey}]);if(this.clientAdapter.isVertexAI())return nl([await this.clientAdapter.getAuthHeaders()])}}stringifyQuery(a){return Object.entries(a).filter(([s,i])=>typeof i<"u").map(([s,i])=>{if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")return`${encodeURIComponent(s)}=${encodeURIComponent(i)}`;if(i===null)return`${encodeURIComponent(s)}=`;throw new Pr(`Cannot stringify type ${typeof i}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`)}).join("&")}getUserAgent(){return`${this.constructor.name}/JS ${Qi}`}defaultIdempotencyKey(){return`stainless-node-retry-${QE()}`}makeStatusError(a,s,i,l){return tr.generate(a,s,i,l)}buildURL(a,s,i){const l=!this.baseURLOverridden()&&i||this.baseURL,c=KE(a)?new URL(a):new URL(l+(l.endsWith("/")&&a.startsWith("/")?a.slice(1):a)),h=this.defaultQuery();return e1(h)||(s=Object.assign(Object.assign({},h),s)),typeof s=="object"&&s&&!Array.isArray(s)&&(c.search=this.stringifyQuery(s)),c.toString()}async prepareOptions(a){if(this.clientAdapter&&this.clientAdapter.isVertexAI()&&!a.path.startsWith(`/${this.apiVersion}/projects/`)){const s=a.path.slice(this.apiVersion.length+1);a.path=`/${this.apiVersion}/projects/${this.clientAdapter.getProject()}/locations/${this.clientAdapter.getLocation()}${s}`}}async prepareRequest(a,{url:s,options:i}){}get(a,s){return this.methodRequest("get",a,s)}post(a,s){return this.methodRequest("post",a,s)}patch(a,s){return this.methodRequest("patch",a,s)}put(a,s){return this.methodRequest("put",a,s)}delete(a,s){return this.methodRequest("delete",a,s)}methodRequest(a,s,i){return this.request(Promise.resolve(i).then(l=>Object.assign({method:a,path:s},l)))}request(a,s=null){return new Yh(this,this.makeRequest(a,s,void 0))}async makeRequest(a,s,i){var l,c,h;const d=await a,m=(l=d.maxRetries)!==null&&l!==void 0?l:this.maxRetries;s==null&&(s=m),await this.prepareOptions(d);const{req:p,url:v,timeout:x}=await this.buildRequest(d,{retryCount:m-s});await this.prepareRequest(p,{url:v,options:d});const T="log_"+(Math.random()*(1<<24)|0).toString(16).padStart(6,"0"),_=i===void 0?"":`, retryOf: ${i}`,E=Date.now();if(Xn(this).debug(`[${T}] sending request`,ni({retryOfRequestLogID:i,method:d.method,url:v,options:d,headers:p.headers})),!((c=d.signal)===null||c===void 0)&&c.aborted)throw new Ch;const S=new AbortController,w=await this.fetchWithTimeout(v,p,x,S).catch(Dh),O=Date.now();if(w instanceof globalThis.Error){const U=`retrying, ${s} attempts remaining`;if(!((h=d.signal)===null||h===void 0)&&h.aborted)throw new Ch;const z=Nh(w)||/timed? ?out/i.test(String(w)+("cause"in w?String(w.cause):""));if(s)return Xn(this).info(`[${T}] connection ${z?"timed out":"failed"} - ${U}`),Xn(this).debug(`[${T}] connection ${z?"timed out":"failed"} (${U})`,ni({retryOfRequestLogID:i,url:v,durationMs:O-E,message:w.message})),this.retryRequest(d,s,i??T);throw Xn(this).info(`[${T}] connection ${z?"timed out":"failed"} - error; no more retries left`),Xn(this).debug(`[${T}] connection ${z?"timed out":"failed"} (error; no more retries left)`,ni({retryOfRequestLogID:i,url:v,durationMs:O-E,message:w.message})),z?new Bb:new Nu({cause:w})}const I=`[${T}${_}] ${p.method} ${v} ${w.ok?"succeeded":"failed"} with status ${w.status} in ${O-E}ms`;if(!w.ok){const U=await this.shouldRetry(w);if(s&&U){const R=`retrying, ${s} attempts remaining`;return await d1(w.body),Xn(this).info(`${I} - ${R}`),Xn(this).debug(`[${T}] response error (${R})`,ni({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:O-E})),this.retryRequest(d,s,i??T,w.headers)}const z=U?"error; no more retries left":"error; not retryable";Xn(this).info(`${I} - ${z}`);const F=await w.text().catch(R=>Dh(R).message),V=r1(F),M=V?void 0:F;throw Xn(this).debug(`[${T}] response error (${z})`,ni({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,message:M,durationMs:Date.now()-E})),this.makeStatusError(w.status,V,M,w.headers)}return Xn(this).info(I),Xn(this).debug(`[${T}] response start`,ni({retryOfRequestLogID:i,url:w.url,status:w.status,headers:w.headers,durationMs:O-E})),{response:w,options:d,controller:S,requestLogID:T,retryOfRequestLogID:i,startTime:E}}async fetchWithTimeout(a,s,i,l){const c=s||{},{signal:h,method:d}=c,m=_u(c,["signal","method"]);h&&h.addEventListener("abort",()=>l.abort());const p=setTimeout(()=>l.abort(),i),v=globalThis.ReadableStream&&m.body instanceof globalThis.ReadableStream||typeof m.body=="object"&&m.body!==null&&Symbol.asyncIterator in m.body,x=Object.assign(Object.assign(Object.assign({signal:l.signal},v?{duplex:"half"}:{}),{method:"GET"}),m);d&&(x.method=d.toUpperCase());try{return await this.fetch.call(void 0,a,x)}finally{clearTimeout(p)}}async shouldRetry(a){const s=a.headers.get("x-should-retry");return s==="true"?!0:s==="false"?!1:a.status===408||a.status===409||a.status===429||a.status>=500}async retryRequest(a,s,i,l){var c;let h;const d=l==null?void 0:l.get("retry-after-ms");if(d){const p=parseFloat(d);Number.isNaN(p)||(h=p)}const m=l==null?void 0:l.get("retry-after");if(m&&!h){const p=parseFloat(m);Number.isNaN(p)?h=Date.parse(m)-Date.now():h=p*1e3}if(!(h&&0<=h&&h<60*1e3)){const p=(c=a.maxRetries)!==null&&c!==void 0?c:this.maxRetries;h=this.calculateDefaultRetryTimeoutMillis(s,p)}return await a1(h),this.makeRequest(a,s-1,i)}calculateDefaultRetryTimeoutMillis(a,s){const c=s-a,h=Math.min(.5*Math.pow(2,c),8),d=1-Math.random()*.25;return h*d*1e3}async buildRequest(a,{retryCount:s=0}={}){var i,l,c;const h=Object.assign({},a),{method:d,path:m,query:p,defaultBaseURL:v}=h,x=this.buildURL(m,p,v);"timeout"in h&&n1("timeout",h.timeout),h.timeout=(i=h.timeout)!==null&&i!==void 0?i:this.timeout;const{bodyHeaders:T,body:_}=this.buildBody({options:h}),E=await this.buildHeaders({options:a,method:d,bodyHeaders:T,retryCount:s});return{req:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({method:d,headers:E},h.signal&&{signal:h.signal}),globalThis.ReadableStream&&_ instanceof globalThis.ReadableStream&&{duplex:"half"}),_&&{body:_}),(l=this.fetchOptions)!==null&&l!==void 0?l:{}),(c=h.fetchOptions)!==null&&c!==void 0?c:{}),url:x,timeout:h.timeout}}async buildHeaders({options:a,method:s,bodyHeaders:i,retryCount:l}){let c={};this.idempotencyHeader&&s!=="get"&&(a.idempotencyKey||(a.idempotencyKey=this.defaultIdempotencyKey()),c[this.idempotencyHeader]=a.idempotencyKey);const h=await this.authHeaders(a);let d=nl([c,Object.assign(Object.assign({Accept:"application/json","User-Agent":this.getUserAgent(),"X-Stainless-Retry-Count":String(l)},a.timeout?{"X-Stainless-Timeout":String(Math.trunc(a.timeout/1e3))}:{}),l1()),this._options.defaultHeaders,i,a.headers,h]);return this.validateHeaders(d),d.values}buildBody({options:{body:a,headers:s}}){if(!a)return{bodyHeaders:void 0,body:void 0};const i=nl([s]);return ArrayBuffer.isView(a)||a instanceof ArrayBuffer||a instanceof DataView||typeof a=="string"&&i.values.has("content-type")||globalThis.Blob&&a instanceof globalThis.Blob||a instanceof FormData||a instanceof URLSearchParams||globalThis.ReadableStream&&a instanceof globalThis.ReadableStream?{bodyHeaders:void 0,body:a}:typeof a=="object"&&(Symbol.asyncIterator in a||Symbol.iterator in a&&"next"in a&&typeof a.next=="function")?{bodyHeaders:void 0,body:u1(a)}:this.encoder({body:a,headers:i})}}Cu.DEFAULT_TIMEOUT=6e4;class Hn extends Cu{constructor(){super(...arguments),this.interactions=new t0(this)}}r0=Hn;Hn.GeminiNextGenAPIClient=r0;Hn.GeminiNextGenAPIClientError=Pr;Hn.APIError=tr;Hn.APIConnectionError=Nu;Hn.APIConnectionTimeoutError=Bb;Hn.APIUserAbortError=Ch;Hn.NotFoundError=Hb;Hn.ConflictError=Pb;Hn.RateLimitError=Vb;Hn.BadRequestError=Fb;Hn.AuthenticationError=Gb;Hn.InternalServerError=$b;Hn.PermissionDeniedError=qb;Hn.UnprocessableEntityError=Yb;Hn.toFile=y1;Hn.Interactions=t0;const pn=()=>{throw new Error("AI features are disabled. A Google Gemini API key is required.")},C1=n=>{let a=n.trim();const s=a.match(/^```(?:json)?\s*([\s\S]*?)\s*```$/i);return s&&(a=s[1].trim()),a},nr=n=>{const a=C1(n);try{return JSON.parse(a)}catch(s){const i=n.indexOf("{"),l=n.indexOf("[");let c=-1,h=-1;if(i!==-1&&(l===-1||i<l)?(c=i,h=n.lastIndexOf("}")):l!==-1&&(c=l,h=n.lastIndexOf("]")),c!==-1&&h!==-1&&h>c){const d=n.substring(c,h+1);try{return JSON.parse(d)}catch{throw s}}throw s}},O1=`Please act as a world-class instructional designer and subject matter expert. Your task is to generate a comprehensive, detailed, and world-class TEXT outline for a learning path. The output must be plain text, not a JSON object.

**Topic:** [TOPIC]
**User's Current Level:** [UNDERSTANDING]
**Desired Comprehensiveness:** [COMPREHENSIVENESS]
[SERIES_CONTEXT]

The goal is to create a structured and progressive learning path that guides the user towards deep, comprehensive mastery of the topic.

**INSTRUCTIONS & REQUIREMENTS:**

1.  **Learning Path Structure:**
    -   Organize the learning path into logical "Levels" (e.g., Level 1, Level 2, up to Level 4 or 5). Each level must have a title and represent a significant step up in knowledge.
    -   Each Level should contain one or more related "Decks".
    -   The name of each deck must reflect this structure, e.g., "Level 1.1: Foundations of X", "Level 1.2: Core Concepts of Y", "Level 2.1: Advanced Techniques in Z".

2.  **High-Quality Content (Crucial):**
    -   **Series Name & Description:** Create a compelling and descriptive name (e.g., "Topic Mastery Path: The Contextual Approach") and a comprehensive summary for the entire learning path. The description can use basic HTML for formatting (e.g., <b>, <i>, <br>).
    -   **Engaging Tone:** All names and descriptions should be written to be engaging and spark curiosity, not just be descriptive. Avoid a dry, academic tone.
    -   **Deck Topics:** For each Deck, provide a detailed, itemized list of specific "Topics" to be covered.
    -   **Progressive Difficulty:** The path must be logically sequenced.
    -   **Approximate [ITEM_LABEL] Count:** Suggest an approximate number of [ITEM_LABEL]s for each deck.

Now, based on all the above requirements, generate the complete text outline.

Finally, at the very end of your response, provide a JSON object with the series name and description you created, like this:
---
{
  "seriesName": "The full series name you generated above",
  "seriesDescription": "The full series description you generated above"
}
`,R1=`Please act as a world-class instructional designer and subject matter expert. Your task is to generate a comprehensive TEXT outline for a single [DECK_TYPE_LABEL]. The output must be plain text, not a JSON object.

**Topic:** [TOPIC]
**User's Current Level:** [UNDERSTANDING]
**Desired Comprehensiveness:** [COMPREHENSIVENESS]
[SERIES_CONTEXT]

The goal is to create a structured outline of topics to be covered in the deck.

**INSTRUCTIONS & REQUIREMENTS:**
1. **Deck Name & Description:** Create a compelling and descriptive name and a comprehensive summary for the deck. The description can use basic HTML for formatting (e.g., <b>, <i>, <br>).
2. **Itemized Topics:** Provide a detailed, itemized list of specific "Topics" to be covered. This should be a bulleted list.
3. **Engaging Tone:** All names and descriptions should be engaging and spark curiosity.
4. **Approximate [ITEM_LABEL] Count:** Suggest an approximate number of [ITEM_LABEL]s for the deck (between 10-50).

Now, based on all the above requirements, generate the complete text outline.

Finally, at the very end of your response, provide a JSON object with the deck name and description you created, like this:
---
{
  "name": "The full deck name you generated above",
  "description": "The full deck description you generated above"
}
`,j1=`Please act as a world-class educational psychologist. Your task is to generate a comprehensive TEXT outline for a quiz deck based on Bloom's Taxonomy. The output must be plain text, not a JSON object.

**Topic:** [TOPIC]
**User's Current Level:** [UNDERSTANDING]
[SERIES_CONTEXT]

The goal is to create a quiz that assesses the user across different cognitive levels.

**INSTRUCTIONS & REQUIREMENTS:**
1. **Structure by Cognitive Level:** Organize the outline into distinct sections representing Bloom's Taxonomy levels:
   - **Remembering:** Topics focusing on recalling facts and basic concepts.
   - **Understanding:** Topics requiring explanation of ideas or concepts.
   - **Applying:** Scenarios requiring use of information in new situations.
   - **Analyzing:** Topics requiring drawing connections among ideas.
   - **Evaluating:** Topics requiring justification of a stand or decision.
   - **Creating:** Topics requiring production of new or original work.
2. **Deck Name & Description:** Create a descriptive name (e.g., "Bloom's Analysis of [Topic]") and summary.
3. **Itemized Topics per Level:** For each level, list specific concepts or scenarios to be tested.

Now, based on all the above requirements, generate the complete text outline.

Finally, at the very end of your response, provide a JSON object with the deck name and description you created, like this:
---
{
  "name": "The full deck name you generated above",
  "description": "The full deck description you generated above"
}
`,I1=`
    You are an expert language tutor. Your persona is: [PERSONA_NAME].
    Instruction: [PERSONA_INSTRUCTION]
    
    Your task is to generate a JSON object for a vocabulary flashcard deck.

    **Topic/Language:** [TOPIC]
    **User's Current Level:** [UNDERSTANDING]
    [SERIES_CONTEXT]

    **REQUIREMENTS:**
    1.  Create a descriptive name and description for the deck.
    2.  Generate between 15 and 30 high-quality vocabulary cards.
    3.  **Front:** The word or phrase in the target language (inferred from topic). Include the part of speech if relevant (e.g., "Gato (n.)").
    4.  **Back:** Must include:
        -   **Definition:** Clear and concise meaning.
        -   **Pronunciation:** IPA or phonetic guide if applicable.
        -   **Example:** A sentence using the word in context, with translation.
        -   Use HTML <br> tags to format these sections clearly on separate lines.
    5.  The content should be accurate and suitable for the user's level.

    **JSON OUTPUT FORMAT:**
    The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text or markdown formatting.
`,M1=`
    You are an expert instructional designer. Your persona is: [PERSONA_NAME].
    Instruction: [PERSONA_INSTRUCTION]
    
    Your task is to generate a JSON object for a flashcard deck focused on **Atomic Concepts**.

    **Topic:** [TOPIC]
    **User's Current Level:** [UNDERSTANDING]
    [SERIES_CONTEXT]

    **REQUIREMENTS:**
    1.  **Principle:** Adhere strictly to the "Minimum Information Principle". Each card must test exactly **one** distinct fact or relationship.
    2.  **Decomposition:** Break down complex ideas into their smallest constituent parts. Do not create cards with lists or multiple answers.
    3.  **Front:** A specific question, cue, or cloze deletion.
    4.  **Back:** A short, direct answer (1-2 sentences max).
    5.  Generate between 15 and 30 cards.
    6.  Create a descriptive name and description for the deck.

    **JSON OUTPUT FORMAT:**
    The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text or markdown formatting.
`,U1=`
    You are an expert content creator. Your persona is: [PERSONA_NAME].
    Instruction: [PERSONA_INSTRUCTION]
    
    Your task is to generate a JSON object for a flashcard deck on a given topic.

    **Topic:** [TOPIC]
    **User's Current Level:** [UNDERSTANDING]
    **Desired Comprehensiveness:** [COMPREHENSIVENESS]
    [SERIES_CONTEXT]

    **REQUIREMENTS:**
    1.  Create a descriptive and engaging \`name\` and \`description\` for the deck.
    2.  Generate between 10 and 30 high-quality flashcards.
    3.  Each flashcard in the \`cards\` array must have a \`front\` (the term or question) and a \`back\` (the definition or answer).
    4.  The content should be clear, concise, and factually accurate.
    5.  The difficulty should be appropriate for the user's specified level.

    **JSON OUTPUT FORMAT:**
    The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text or markdown formatting.
`,L1="You are an expert content creator. I have provided a text outline for a learning path. Your task is to convert this outline into a structured JSON object that will serve as a scaffold.\n\n**PRIMARY INSTRUCTIONS:**\n\n1.  **Source Material:** Use ONLY the text outline I've provided as your source.\n2.  **Structure:** Create a single JSON object with `seriesName`, `seriesDescription`, and a `levels` array.\n3.  **Levels and Decks:** Inside the `levels` array, create objects for each level, including its `title`. Each level object should have a `decks` array. Populate this with deck objects, each containing its `name` and `description` from the outline.\n4.  **Target Type:** [TARGET_TYPE_INSTRUCTION]\n\n**JSON OUTPUT FORMAT:**\nThe final output MUST be ONLY a single, raw JSON object, starting with `{` and ending with `}`. Do not include any surrounding text, explanations, or markdown formatting.\n",z1=`You are an expert content creator. I have provided a text outline for a learning deck. Your task is to generate the JSON for this deck based on the outline.

**PRIMARY INSTRUCTIONS:**

1.  **Source Material:** Use ONLY the text outline I've provided as your source.
2.  **Question Quantity:** Generate the approximate number of questions specified in the outline for this deck.
3.  **Content Generation:** Create world-class questions and answers based *only* on the "Topics" listed for this specific deck in the outline.

**CRITICAL CONTENT QUALITY REQUIREMENTS:**
- **Factual Accuracy:** This is paramount. The correct answer and all parts of the explanation must be unequivocally correct and verifiable.
- **In-Depth Coverage:** The questions must cover the deck's topics comprehensively.
- **Clarity & Simplicity:** Questions must be easy to understand, unambiguous, and test only one core concept per question.
- **High-Quality Explanations:** The \`detailedExplanation\` is crucial. It must explain the reasoning, principles, or facts behind the correct answer.
- **Option Explanations:** Every option, correct or incorrect, MUST have a brief \`explanation\` field.

**JSON OUTPUT FORMAT:**
The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text, explanations, or markdown formatting.
`,B1=`
    You are an expert instructional designer.
    I want you to regenerate/rewrite the following question to improve its quality, clarity, or difficulty.

    **Current Question:**
    [QUESTION_JSON]

    **Context:**
    [CONTEXT]

    **INSTRUCTIONS:**
    - Improve the wording for better clarity.
    - Ensure the correct answer is indisputably correct.
    - Make distractors more challenging if they are too obvious.
    - Expand the detailed explanation to be more helpful.
    - Keep the same JSON structure.

    **JSON OUTPUT:**
    Return ONLY the updated question object as raw JSON.
`,F1=`
    You are an expert test creator.
    The user wants to "harden" the distractors (incorrect answers) for a multiple-choice question to make it more challenging.

    **Question:** [QUESTION_TEXT]
    **Correct Answer:** [CORRECT_ANSWER]
    **Current Distractors:** [OPTIONS_LIST]
    **Context:** [CONTEXT_STR]

    **TASK:**
    Generate 3-4 NEW, challenging, but factually incorrect options (distractors) for this question.
    They should be plausible to someone with partial knowledge, but clearly wrong to someone who knows the material.
    Do not reuse the current distractors unless they are already excellent.

    **OUTPUT:**
    Return a JSON array of objects, where each object has:
    - \`text\`: The text of the distractor.
    - \`explanation\`: A brief explanation of why this option is incorrect.
`,G1=`
    You are a helpful tutor.
    Please provide 2-3 short, concrete, real-world examples (or sentences) that illustrate the following concept/term.

    **Term (Front):** [FRONT]
    **Definition (Back):** [BACK]
    **Context:** [CONTEXT_STR]

    **Format:**
    Return the examples as a simple HTML list (<ul><li>...</li></ul>). Do not include any introductory text.
`,q1=`
    You are an expert instructional designer.
    Create a comprehensive "Learning Guide" on the topic: "[TOPIC]".
    Context: [CONTEXT]

    **STRUCTURE:**
    - Break the topic down into logical "Blocks".
    - Each Block should have:
        1.  **Content:** A cohesive paragraph or two of informational text (HTML allowed).
        2.  **Questions:** 1-2 multiple-choice questions that test understanding of *that specific block's content*.

    **JSON OUTPUT FORMAT:**
    The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`.
    Schema:
    {
      "blocks": [
        {
          "content": "HTML string...",
          "questions": [
            {
              "questionText": "...",
              "detailedExplanation": "...",
              "options": [
                { "text": "...", "explanation": "...", "isCorrect": boolean }
              ]
            }
          ]
        }
      ]
    }
`,H1=`
    You are an expert course creator.
    Create a detailed, multi-section course on: "[TOPIC]".
    Context: [CONTEXT]

    **REQUIREMENTS:**
    - The content should be extensive, suitable for a "Reader" mode where users read first, then answer questions.
    - Divide the course into logical sections/chapters.
    - Content should be engaging, well-formatted with HTML (use headers <h3>, bolding, lists).

    **JSON OUTPUT FORMAT:**
    The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`.
    Schema:
    {
      "blocks": [
        {
          "content": "HTML content for this section...",
          "questions": [
            {
              "questionText": "...",
              "detailedExplanation": "...",
              "options": [
                { "text": "...", "explanation": "...", "isCorrect": boolean }
              ]
            }
          ]
        }
      ]
    }
`,P1=async n=>{const a=pn();let s="";n.type==="series"?s=`Based on the learning series "${n.name}" (${n.description||""}), suggest 3 specific, distinct, and relevant sub-topics or chapters that would make good additions as new levels or decks. Return ONLY a JSON array of 3 strings. Example: ["The Roman Republic", "Julius Caesar", "The Fall of Rome"]`:s=`Based on the flashcard deck "${n.name}" (${n.description||""}), suggest 3 specific, distinct, and relevant sub-topics that could be used to expand this deck or create a new related deck. Return ONLY a JSON array of 3 strings. Example: ["Key Battles", "Political Structure", "Daily Life"]`;const i=await a.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Se.ARRAY,items:{type:Se.STRING}}}});try{return JSON.parse(i.text.trim())}catch(l){return console.warn("Failed to parse topic suggestions",l),[]}},Zv=async(n,a,s)=>{const i=pn();let l=`
        You are an expert instructional designer.
        I have a learning series titled "${n}" with the description: "${a}".
    `;s?l+=`
        

CURRENT STRUCTURE:
        ${s}
        

TASK:
        Based on the current structure above, generate the NEXT logical levels and decks to expand this series.
        Do NOT repeat the existing levels.
        Generate 1-3 new levels that naturally follow the current progression.
        `:l+=`
        

TASK:
        Your task is to generate a comprehensive structure for this series.
        Break it down into logical "Levels" (e.g., Beginner, Intermediate, Advanced, or Thematic chapters).
        Inside each level, create specific "Decks" that cover parts of that level.
        `,l+=`
        

Return a JSON object matching the following schema. The 'questions' array for each deck must be empty.
    `;const c=await i.models.generateContent({model:"gemini-2.5-pro",contents:l,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:{levels:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{title:{type:Se.STRING},decks:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},questions:{type:Se.ARRAY,items:{type:Se.STRING}}},required:["name","description","questions"]}}},required:["title","decks"]}}},required:["levels"]},thinkingConfig:{thinkingBudget:32768}}});return nr(c.text)},Y1=async(n,a,s,i)=>{const l=pn(),c=`
        You are an expert instructional designer.
        I have a learning series titled "${n}" (${a}).
        I am focusing on the level: "${s}".
        
        Current decks in this level: ${i.length>0?i.join(", "):"None"}.

        TASK:
        Generate a list of NEW decks to fully populate this level ("${s}").
        The decks should cover the remaining necessary topics for this level to ensure comprehensive understanding.
        Do NOT generate decks that duplicate the content of the current decks.
        
        Return a JSON array of deck objects.
        Each deck object must have a "name", "description", and an empty "questions" array.
    `,h=await l.models.generateContent({model:"gemini-2.5-pro",contents:c,config:{responseMimeType:"application/json",responseSchema:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},questions:{type:Se.ARRAY,items:{type:Se.STRING}}},required:["name","description","questions"]}},thinkingConfig:{thinkingBudget:32768}}});return nr(h.text)},V1=async(n,a,s)=>{const i=pn(),{topic:l,understanding:c,comprehensiveness:h,generationType:d}=n;let m,p="Question",v="Quiz Deck";d.includes("flashcard")||d.includes("vocab")?(p="Flashcard",v="Flashcard Deck"):(d.includes("learning")||d.includes("course"))&&(p="Page/Section",v="Learning Guide"),d.startsWith("series-")?m=O1:d==="quiz-blooms"?m=j1:m=R1;const x=s?`**Context:** This content is part of the series "${s.name}" (${s.description}). Ensure the generated outline fits within this context and does not duplicate broader series topics unnecessarily.`:"",T=m.replace("[TOPIC]",l).replace("[UNDERSTANDING]",c).replace("[COMPREHENSIVENESS]",h).replace("[SERIES_CONTEXT]",x).replace(/\[ITEM_LABEL\]/g,p).replace(/\[DECK_TYPE_LABEL\]/g,v),E=(await i.models.generateContent({model:"gemini-2.5-pro",contents:T,config:{systemInstruction:`You are an expert content creator. Your persona is: ${a.name}. Instruction: ${a.instruction}`,thinkingConfig:{thinkingBudget:32768}}})).text.trim();let S=E,w={};const O=/\n---\n([\s\S]*)$/,I=E.match(O);if(I){S=E.substring(0,I.index).trim();const U=I[1].trim();try{w=nr(U)}catch(z){console.warn("Found separator but failed to parse metadata JSON.",z)}}else{const U=/(\{([^{}]|(\{[^{}]*\}))*\})\s*$/,z=E.match(U);if(z){const F=z[0];try{const V=nr(F);(V.name||V.seriesName)&&(w=V,S=E.substring(0,z.index).trim())}catch(V){console.warn("Found trailing block but failed to parse JSON.",V)}}}return{outline:S,metadata:w}},$1=async(n,a,s)=>{const i=pn(),l=`You are an expert instructional designer helping a user refine a learning path outline. Your persona is: ${s.name}. Instruction: ${s.instruction}.
    The user's original request was for a topic on "${a.topic}" at a "${a.understanding}" level.
    Based on the user's new message, update and return the complete, refined text outline. Do not include the metadata JSON block in your response.`,c=n.map(d=>({role:d.role==="model"?"model":"user",parts:[{text:d.text}]}));return(await i.models.generateContent({model:"gemini-2.5-pro",contents:c,config:{systemInstruction:l,thinkingConfig:{thinkingBudget:32768}}})).text.trim()},Z1=async(n,a=Ue.Quiz)=>{const s=pn();let i="";a===Ue.Flashcard?i='For every deck object, include a `"type": "flashcard"` and a `"cards": []` key-value pair. The cards array MUST be empty.':a===Ue.Learning?i='For every deck object, include a `"type": "learning"`, a `"infoCards": []` and a `"questions": []` key-value pair. The arrays MUST be empty.':i='For every deck object, include a `"type": "quiz"` and a `"questions": []` key-value pair. The questions array MUST be empty.';const l=L1.replace("[TARGET_TYPE_INSTRUCTION]",i),c={type:Se.OBJECT,properties:{seriesName:{type:Se.STRING},seriesDescription:{type:Se.STRING},levels:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{title:{type:Se.STRING},decks:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},type:{type:Se.STRING},questions:{type:Se.ARRAY,items:{type:Se.STRING}},cards:{type:Se.ARRAY,items:{type:Se.STRING}},infoCards:{type:Se.ARRAY,items:{type:Se.STRING}}},required:["name","description","type"]}}},required:["title","decks"]}}},required:["seriesName","seriesDescription","levels"]},h=await s.models.generateContent({model:"gemini-2.5-pro",contents:`Here is the outline:

${n}`,config:{systemInstruction:l,responseMimeType:"application/json",responseSchema:c,thinkingConfig:{thinkingBudget:32768}}});return nr(h.text)},Q1=async(n,a)=>{const s=pn(),i={type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},questions:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{questionType:{type:Se.STRING,enum:["multipleChoice"]},questionText:{type:Se.STRING},tags:{type:Se.ARRAY,items:{type:Se.STRING}},detailedExplanation:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},text:{type:Se.STRING},explanation:{type:Se.STRING}},required:["id","text","explanation"]}},correctAnswerId:{type:Se.STRING}},required:["questionType","questionText","detailedExplanation","options","correctAnswerId"]}}},required:["name","description","questions"]},l=await s.models.generateContent({model:"gemini-2.5-pro",contents:`Here is the outline:

${n}`,config:{systemInstruction:z1,responseMimeType:"application/json",responseSchema:i,thinkingConfig:{thinkingBudget:32768}}}),c=nr(l.text);return a&&a.name&&(c.name=a.name),a&&a.description&&(c.description=a.description),c},J1=async(n,a,s)=>{const i=pn(),l=s?`
**Context:** This deck is part of the series "${s.name}" (${s.description}). The questions should be relevant to this series context and appropriate for the level implied by the deck's placement in the series.`:"",c=`
        You are an expert instructional designer.
        I have a deck titled "${n.name}" with the description: "${n.description}".
        ${l}

        **TASK:**
        Generate ${a} high-quality multiple-choice questions for this deck.
        
        **CONTENT REQUIREMENTS:**
        -   **Factual Accuracy:** Must be unequivocally correct.
        -   **Relevance:** Directly relevant to the deck title and description.
        -   **Clarity:** Easy to understand and unambiguous.
        -   **Explanations:** Provide detailed explanations for the correct answer.
        -   **Distractors:** Incorrect options should be plausible but clearly wrong. Provide an explanation for why each option is right or wrong.

        **JSON OUTPUT FORMAT:**
        Return a JSON array of question objects.
    `,h=await i.models.generateContent({model:"gemini-2.5-pro",contents:c,config:{responseMimeType:"application/json",responseSchema:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{questionType:{type:Se.STRING,enum:["multipleChoice"]},questionText:{type:Se.STRING},tags:{type:Se.ARRAY,items:{type:Se.STRING}},detailedExplanation:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{text:{type:Se.STRING},explanation:{type:Se.STRING},isCorrect:{type:Se.BOOLEAN}},required:["text","explanation","isCorrect"]}}},required:["questionType","questionText","detailedExplanation","options"]}},thinkingConfig:{thinkingBudget:32768}}});return nr(h.text)},K1=async(n,a)=>{const s=pn(),i=B1.replace("[QUESTION_JSON]",JSON.stringify({questionText:n.questionText,detailedExplanation:n.detailedExplanation,options:n.options.map(c=>({text:c.text,explanation:c.explanation,isCorrect:c.id===n.correctAnswerId})),tags:n.tags})).replace("[CONTEXT]",a||"General Knowledge"),l=await s.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:{questionText:{type:Se.STRING},detailedExplanation:{type:Se.STRING},tags:{type:Se.ARRAY,items:{type:Se.STRING}},options:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{text:{type:Se.STRING},explanation:{type:Se.STRING},isCorrect:{type:Se.BOOLEAN}},required:["text","explanation","isCorrect"]}}},required:["questionText","detailedExplanation","options"]},thinkingConfig:{thinkingBudget:32768}}});return nr(l.text)},X1=async(n,a,s,i)=>{const l=pn(),c=F1.replace("[QUESTION_TEXT]",n).replace("[CORRECT_ANSWER]",a).replace("[OPTIONS_LIST]",s.join(", ")).replace("[CONTEXT_STR]",i||"General Knowledge"),h=await l.models.generateContent({model:"gemini-2.5-pro",contents:c,config:{responseMimeType:"application/json",responseSchema:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{text:{type:Se.STRING},explanation:{type:Se.STRING}},required:["text","explanation"]}},thinkingConfig:{thinkingBudget:32768}}});return nr(h.text)},W1=async(n,a,s)=>{const i=pn(),l=G1.replace("[FRONT]",n).replace("[BACK]",a).replace("[CONTEXT_STR]",s||"General Learning");return(await i.models.generateContent({model:"gemini-2.5-flash",contents:l})).text.trim()},Qv=async(n,a,s=!1)=>{const i=pn(),c=(s?H1:q1).replace("[TOPIC]",n).replace("[CONTEXT]",a||"General Learning"),h=await i.models.generateContent({model:"gemini-2.5-pro",contents:c,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:{blocks:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{content:{type:Se.STRING},questions:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{questionText:{type:Se.STRING},detailedExplanation:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{text:{type:Se.STRING},explanation:{type:Se.STRING},isCorrect:{type:Se.BOOLEAN}},required:["text","explanation","isCorrect"]}}},required:["questionText","detailedExplanation","options"]}}},required:["content","questions"]}}},required:["blocks"]},thinkingConfig:{thinkingBudget:32768}}}),d=nr(h.text),m=[],p=[];return d.blocks&&Array.isArray(d.blocks)&&d.blocks.forEach(v=>{const x=crypto.randomUUID(),T=[];v.questions&&Array.isArray(v.questions)&&v.questions.forEach(_=>{T.push({..._,infoCardIds:[x]})}),p.push(...T),m.push({id:x,content:v.content,unlocksQuestionIds:[]})}),{infoCards:m,questions:p}},ew=async(n,a,s)=>{const i=pn(),{topic:l,understanding:c,comprehensiveness:h,generationType:d}=n;let m;d==="deck-vocab"||d==="series-vocab"?m=I1:d==="deck-atomic"?m=M1:m=U1;const v=m.replace("[PERSONA_NAME]",a.name).replace("[PERSONA_INSTRUCTION]",a.instruction).replace("[TOPIC]",l).replace("[UNDERSTANDING]",c).replace("[COMPREHENSIVENESS]",h).replace("[SERIES_CONTEXT]",""),x=await i.models.generateContent({model:"gemini-2.5-pro",contents:"Generate the flashcard deck.",config:{systemInstruction:v,responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},cards:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{front:{type:Se.STRING},back:{type:Se.STRING}},required:["front","back"]}}},required:["name","description","cards"]},thinkingConfig:{thinkingBudget:32768}}});return nr(x.text)},tw=async(n,a,s)=>{const i=pn(),l=`You are an expert on ${n}. The user has selected the text "${s}" from the following content:

${a}

Please provide a more detailed explanation of the selected text in a few paragraphs. Format your response as HTML.`;return(await i.models.generateContent({model:"gemini-2.5-pro",contents:l})).text.trim()},Z2=async(n,a)=>{const s=pn(),i=`Explain the following concept like I'm 5 years old. Keep it simple, engaging, and use an analogy if possible.
    
    **Concept:** ${n}
    **Context:** ${a}`;return(await s.models.generateContent({model:"gemini-2.5-flash",contents:i})).text.trim()},Q2=async(n,a,s)=>{const i=pn(),l=`Create a short, catchy, and memorable mnemonic to help a student remember the connection between the following term and its definition/answer.
    
    **Term (Front):** ${n}
    **Definition (Back):** ${a}
    
    
    Output ONLY the mnemonic. Use HTML bold tags <b> to highlight key parts.`;return(await i.models.generateContent({model:"gemini-2.5-flash",contents:l})).text.trim()},nw=async(n,a="Kore")=>{var c,h,d,m,p,v;const l=(v=(p=(m=(d=(h=(c=(await pn().models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:{parts:[{text:n}]},config:{responseModalities:["AUDIO"],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:a}}}}})).candidates)==null?void 0:c[0])==null?void 0:h.content)==null?void 0:d.parts)==null?void 0:m[0])==null?void 0:p.inlineData)==null?void 0:v.data;if(!l)throw new Error("Failed to generate speech. No audio data received.");return l},a0=async(n,a,s)=>{const i=pn(),l=`Analyze this image and create a flashcard deck from its content. ${s?`Focus on: ${s}`:""}.
    Return a JSON object with a 'name', 'description', and a 'cards' array where each card has a 'front' and 'back'.
    The 'front' should be a question or term found in or inferred from the image.
    The 'back' should be the answer or definition.
    Make the content educational and accurate.`,c=await i.models.generateContent({model:"gemini-2.5-flash",contents:{parts:[{inlineData:{mimeType:a,data:n}},{text:l}]},config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,properties:{name:{type:Se.STRING},description:{type:Se.STRING},cards:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{front:{type:Se.STRING},back:{type:Se.STRING}},required:["front","back"]}}},required:["name","description","cards"]}}});return nr(c.text)},rw=async n=>{const a=pn(),s=n.type==="flashcard"?n.cards:n.questions;if(!s||s.length===0)return[];const i=`
        You are an expert editor and instructional designer.
        Analyze the following deck content for accuracy, clarity, formatting consistency, and completeness.
        
        Deck Name: "${n.name}"
        Description: "${n.description}"
        Content Sample: ${JSON.stringify(s.slice(0,50))}

        Identify issues and suggest specific improvements. 
        Return a JSON array of suggestions.
        Each suggestion must have:
        - id: A unique string ID.
        - title: Short title of the issue.
        - description: Description of what is wrong and how to fix it.
        - category: One of ['accuracy', 'clarity', 'formatting', 'completeness'].
        - rationale: Why this change improves learning.
    `,l=await a.models.generateContent({model:"gemini-2.5-pro",contents:i,config:{responseMimeType:"application/json",responseSchema:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},title:{type:Se.STRING},description:{type:Se.STRING},category:{type:Se.STRING,enum:["accuracy","clarity","formatting","completeness"]},rationale:{type:Se.STRING}},required:["id","title","description","category","rationale"]}},thinkingConfig:{thinkingBudget:32768}}});return nr(l.text)},aw=async(n,a)=>{const s=pn(),i=n.type==="flashcard"?n.cards:n.questions,l=`
        You are an expert editor.
        I have a deck of learning content. I want you to rewrite it to apply the following improvements:
        
        IMPROVEMENTS TO APPLY:
        ${JSON.stringify(a)}

        CURRENT CONTENT:
        ${JSON.stringify(i)}

        Return the FULL updated content in the same JSON structure as the input (array of cards or questions).
        Do not change IDs. Only update text fields.
    `;let c;n.type==="flashcard"?c={type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},front:{type:Se.STRING},back:{type:Se.STRING}},required:["id","front","back"]}}:c={type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},questionText:{type:Se.STRING},detailedExplanation:{type:Se.STRING},options:{type:Se.ARRAY,items:{type:Se.OBJECT,properties:{id:{type:Se.STRING},text:{type:Se.STRING},explanation:{type:Se.STRING}},required:["id","text","explanation"]}}},required:["id","questionText","detailedExplanation","options"]}};const h=await s.models.generateContent({model:"gemini-2.5-pro",contents:l,config:{responseMimeType:"application/json",responseSchema:c,thinkingConfig:{thinkingBudget:32768}}}),d=nr(h.text);return n.type==="flashcard"?{...n,cards:n.cards.map(m=>{const p=d.find(v=>v.id===m.id);return p?{...m,...p}:m})}:{...n,questions:n.questions.map(m=>{const p=d.find(v=>v.id===m.id);return p?{...m,...p}:m})}},sw=async(n,a)=>{const s=pn(),i=`
        Suggest the single most appropriate icon name from the following list for a flashcard deck titled "${n}" (${a}).
        
        Available Icons: ${__.join(", ")}
        
        Return ONLY the icon name as a JSON string.
    `,l=await s.models.generateContent({model:"gemini-2.5-flash",contents:i,config:{responseMimeType:"application/json"}});return JSON.parse(l.text)},iw=async n=>{const a=pn(),s=`
        Analyze the following questions and generate 1-3 relevant, concise tags for each.
        Tags should be single words or short phrases (lowercase).
        
        Questions:
        ${JSON.stringify(n)}
        
        Return a JSON object where keys are question IDs and values are arrays of tags.
    `,i=await a.models.generateContent({model:"gemini-2.5-flash",contents:s,config:{responseMimeType:"application/json",responseSchema:{type:Se.OBJECT,additionalProperties:{type:Se.ARRAY,items:{type:Se.STRING}}}}});return nr(i.text)},ow={success:u.jsx(Fe,{name:"check-circle",className:"w-6 h-6 text-green-500"}),error:u.jsx(Fe,{name:"x-circle",className:"w-6 h-6 text-red-500"}),info:u.jsx(Fe,{name:"info",className:"w-6 h-6 text-blue-500"}),warning:u.jsx(Fe,{name:"info",className:"w-6 h-6 text-yellow-500"})},lw=({message:n,onDismiss:a})=>(H.useEffect(()=>{const s=setTimeout(()=>{a(n.id)},5e3);return()=>{clearTimeout(s)}},[n.id,a]),u.jsx("div",{className:"bg-surface shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden animate-fade-in-right",children:u.jsx("div",{className:"p-4",children:u.jsxs("div",{className:"flex items-start",children:[u.jsx("div",{className:"flex-shrink-0",children:ow[n.type]}),u.jsx("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:u.jsx("p",{className:"text-sm font-medium text-text break-words",children:n.message})}),u.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:u.jsxs("button",{onClick:()=>a(n.id),className:"bg-surface rounded-md inline-flex text-text-muted hover:text-text focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-surface focus:ring-primary",children:[u.jsx("span",{className:"sr-only",children:"Close"}),u.jsx(Fe,{name:"x",className:"h-5 w-5"})]})})]})})})),s0=H.createContext(void 0),cw=({children:n})=>{const[a,s]=H.useState([]),i=H.useCallback((c,h)=>{const d=crypto.randomUUID();s(m=>[...m,{id:d,message:c,type:h}])},[]),l=H.useCallback(c=>{s(h=>h.filter(d=>d.id!==c))},[]);return u.jsxs(s0.Provider,{value:{addToast:i},children:[n,u.jsx("div",{className:"fixed top-5 right-5 z-[100] w-full max-w-xs space-y-3",children:a.map(c=>u.jsx(lw,{message:c,onDismiss:l},c.id))})]})},Rn=()=>{const n=H.useContext(s0);if(n===void 0)throw new Error("useToast must be used within a ToastProvider");return n},Yr=({size:n="md"})=>{const a={sm:"h-6 w-6",md:"h-10 w-10",lg:"h-16 w-16"};return u.jsx("div",{className:"flex justify-center items-center",role:"status","aria-label":"Loading",children:u.jsxs("svg",{className:`animate-spin text-blue-500 dark:text-blue-400 ${a[n]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[u.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),u.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})},i0="Europe/Stockholm",uw=()=>new Date().toLocaleDateString("sv-SE",{timeZone:i0}),Vh=()=>new Date().toLocaleString("sv-SE",{timeZone:i0,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/ /g,"_").replace(/:/g,"-"),dw=({isOpen:n,onClose:a,onAddDecks:s,onAddSeriesWithDecks:i})=>{const[l,c]=H.useState("create"),[h,d]=H.useState(""),[m,p]=H.useState(""),[v,x]=H.useState(""),[T,_]=H.useState(!1),[E,S]=H.useState(null),[w,O]=H.useState(null),[I,U]=H.useState(""),z=H.useRef(null),F=H.useRef(null),{addToast:V}=Rn(),{aiFeaturesEnabled:M}=js(),{openModal:j}=Dl(),R=H.useRef(null);On(R,n);const P=H.useCallback(()=>{c("create"),d(""),p(""),x(""),_(!1),S(null),O(null),U("")},[]),re=H.useCallback(()=>{P(),a()},[P,a]),B=H.useCallback(A=>{p(A);try{const Z=xu(A);(Z==null?void 0:Z.type)===Ue.Quiz?d(Z.data.name):(Z==null?void 0:Z.type)==="series"&&d(Z.data.seriesName)}catch{}},[]),X=H.useCallback(async A=>{if(A){x(A.name),_(!0);try{const Z=await Lb(A);if(!Z){V("Unsupported file type. Please upload a JSON, CSV, Anki package, or Image.","error"),x(""),_(!1);return}if(Z.type==="backup"||Z.type==="anki"||Z.type==="image"){_(!1),j("droppedFile",{analysis:Z});return}if(Z.type==="flashcard"||Z.type==="quiz"||Z.type==="series"){const K=JSON.stringify(Z.data,null,2);if(B(K),_(!1),c("paste"),Z.type==="flashcard"&&Z.fileName){const te=Z.fileName.replace(/\.(csv|json)$/i,"");d(te)}V("File processed. Review content and click Import.","success");return}}catch(Z){console.error("Failed to process file:",Z),V(`An error occurred: ${Z instanceof Error?Z.message:"Unknown error"}`,"error"),P()}}},[V,B,j,P]),C=A=>{var K;const Z=(K=A.target.files)==null?void 0:K[0];if(Z){S(Z);const te=new FileReader;te.onload=fe=>{var Ee;O((Ee=fe.target)==null?void 0:Ee.result)},te.readAsDataURL(Z)}A.target&&(A.target.value="")},ie=H.useCallback(A=>{var K;A.preventDefault();const Z=(K=A.dataTransfer.files)==null?void 0:K[0];Z&&X(Z)},[X]),$=H.useCallback(A=>{A.preventDefault()},[]),q=async()=>{if(E){_(!0);try{const A=await new Promise((Ee,Te)=>{const he=new FileReader;he.onload=()=>{const He=he.result;Ee(He.split(",")[1])},he.onerror=Te,he.readAsDataURL(E)}),{name:Z,description:K,cards:te}=await a0(A,E.type,I),fe={id:crypto.randomUUID(),name:Z||`Image Deck - ${E.name}`,description:K||`Generated from ${E.name}`,type:Ue.Flashcard,cards:As(te)};s([fe]),V(`Deck "${fe.name}" generated successfully.`,"success"),re()}catch(A){console.error(A),V(`Image generation failed: ${A.message}`,"error"),_(!1)}}},se=H.useCallback(()=>{if(l==="image"){q();return}if(l==="create"){if(!h.trim()){V("Please enter a deck name.","error");return}const A={id:crypto.randomUUID(),name:h.trim(),type:Ue.Flashcard,cards:[],description:`An empty deck created on ${uw()}`};s([A]),V(`Deck "${A.name}" created.`,"success"),re();return}if(!m){V("Please paste content or upload a file.","error");return}try{const A=xu(m);if(!A)return;if(A.type==="series"){const{seriesName:K,seriesDescription:te,levels:fe}=A.data,Ee=[],Te=fe.map(He=>{const Be=He.decks.map(Pe=>Pe.type===Ue.Quiz?{id:crypto.randomUUID(),name:Pe.name,description:Pe.description,type:Ue.Quiz,questions:Ts(Pe.questions||[])}:Pe.type===Ue.Flashcard?{id:crypto.randomUUID(),name:Pe.name,description:Pe.description,type:Ue.Flashcard,cards:As(Pe.cards||[])}:null).filter(Pe=>Pe!==null);return Ee.push(...Be),{title:He.title,deckIds:Be.map(Pe=>Pe.id)}}),he={id:crypto.randomUUID(),type:"series",name:K,description:te,levels:Te,archived:!1,createdAt:new Date().toISOString()};i(he,Ee),re();return}if(!h.trim()){V("Please enter a deck name.","error");return}let Z;if(A.type===Ue.Flashcard){const K=As(A.data);Z={id:crypto.randomUUID(),name:h.trim(),type:Ue.Flashcard,cards:K,description:`${K.length} imported flashcard${K.length===1?"":"s"}.`}}else{const K=Ts(A.data.questions);Z={id:crypto.randomUUID(),name:h.trim(),description:A.data.description,type:Ue.Quiz,questions:K}}s([Z]),V(`Deck "${Z.name}" imported successfully.`,"success"),re()}catch(A){V(A instanceof Error?A.message:"Invalid JSON content.","error")}},[h,l,m,s,re,V,i,q]),W=A=>{var K;const Z=(K=A.target.files)==null?void 0:K[0];Z&&X(Z),A.target&&(A.target.value="")};if(!n)return null;const me=()=>{switch(l){case"image":return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:bg-background transition-colors relative overflow-hidden",children:[w?u.jsxs("div",{className:"relative w-full h-full group",children:[u.jsx("img",{src:w,alt:"Preview",className:"w-full h-full object-contain"}),u.jsx("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:u.jsx(Ye,{variant:"danger",size:"sm",onClick:A=>{A.stopPropagation(),S(null),O(null)},children:"Remove Image"})})]}):u.jsxs("label",{className:"flex flex-col items-center justify-center w-full h-full cursor-pointer",onClick:A=>{var Z;A.preventDefault(),(Z=F.current)==null||Z.click()},children:[u.jsx(Fe,{name:"upload-cloud",className:"w-10 h-10 text-text-muted mb-2"}),u.jsx("p",{className:"text-sm text-text-muted",children:u.jsx("span",{className:"font-semibold text-primary",children:"Click to upload image"})}),u.jsx("p",{className:"text-xs text-text-muted/70",children:"PNG, JPG, WEBP"})]}),u.jsx("input",{type:"file",ref:F,className:"hidden",accept:"image/*",onChange:C})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"image-hint",className:"block text-sm font-medium text-text-muted mb-1",children:"Topic / Hint (Optional)"}),u.jsx("input",{type:"text",id:"image-hint",value:I,onChange:A=>U(A.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Focus on the dates in the timeline"}),u.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Guide the AI to extract specific information."})]})]});case"paste":return u.jsxs("div",{children:[u.jsx("textarea",{className:"w-full h-48 p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none text-text",placeholder:'Paste JSON here... e.g., [{"front": "Q1", "back": "A1"}] or a Quiz/Series object.',value:m,onChange:A=>B(A.target.value)}),u.jsxs(Wr,{href:"/instructions/json",onClick:a,className:"text-sm text-primary hover:underline mt-2 inline-flex items-center gap-1",children:[u.jsx(Fe,{name:"help-circle",className:"w-4 h-4"}),"View JSON format guide"]})]});case"upload":return u.jsxs(u.Fragment,{children:[u.jsx("input",{type:"file",ref:z,className:"hidden",accept:".json, .csv, .apkg, .zip, image/*",onChange:W}),u.jsxs("label",{onDrop:ie,onDragOver:$,className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:bg-background transition-colors",children:[u.jsx(Fe,{name:"upload-cloud",className:"w-10 h-10 text-text-muted mb-2"}),u.jsxs("p",{className:"text-sm text-text-muted",children:[u.jsx("span",{className:"font-semibold text-primary",onClick:A=>{var Z;A.preventDefault(),(Z=z.current)==null||Z.click()},children:"Click to upload"})," or drag and drop anywhere"]}),u.jsx("p",{className:"text-xs text-text-muted/70",children:"JSON, CSV, Anki (.apkg), Backup, or Image"}),v&&u.jsx("p",{className:"text-sm text-green-500 dark:text-green-400 mt-2 truncate",title:v,children:v})]})]});case"create":default:return u.jsx("p",{className:"text-text-muted text-center py-12",children:"Create an empty flashcard deck."})}},L=l!=="image"&&l!=="upload";return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:R,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[T&&u.jsxs("div",{className:"absolute inset-0 bg-surface/80 flex flex-col items-center justify-center z-20",children:[u.jsx(Yr,{}),u.jsx("p",{className:"text-lg text-text mt-4",children:l==="image"?"Analyzing image...":"Processing file..."})]}),u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold text-text",children:"Create / Import"}),u.jsx(Ye,{variant:"ghost",onClick:re,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[L&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"deck-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Deck / Series Name"}),u.jsx("input",{type:"text",id:"deck-name",value:h,onChange:A=>d(A.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g. Japanese Vocabulary"}),u.jsx("p",{className:"text-xs text-text-muted mt-1",children:"For single deck or new deck creation. This is auto-filled when pasting a Series object."})]}),u.jsx("div",{className:"flex border-b border-border overflow-x-auto",children:["create","paste","upload",...M?["image"]:[]].map(A=>u.jsx("button",{onClick:()=>c(A),className:`capitalize px-4 py-2 text-sm font-medium transition-colors whitespace-nowrap ${l===A?"border-b-2 border-primary text-text":"text-text-muted hover:text-text"}`,children:A==="create"?"Create Empty":A},A))}),u.jsx("div",{className:"mt-4",children:me()})]}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{variant:"secondary",onClick:re,className:"mr-2",children:"Cancel"}),u.jsx(Ye,{variant:"primary",onClick:se,disabled:T||l==="create"&&!h.trim()||l==="paste"&&!m||l==="upload"&&!v||l==="image"&&!E,children:l==="create"?"Create Deck":l==="image"?"Generate Deck":"Import"})]})]})})},o0=H.createContext(null),l0=()=>{const n=H.useContext(o0);if(!n)throw new Error("Accordion components must be used within an <Accordion> component.");return n},c0=H.createContext(null),u0=()=>{const n=H.useContext(c0);if(!n)throw new Error("AccordionTrigger/Content must be used within an <AccordionItem> component.");return n},fw=({children:n,type:a="single",defaultValue:s,className:i=""})=>{const[l,c]=H.useState(s||(a==="multiple"?[]:"")),h=d=>{c(a==="multiple"?m=>{const p=Array.isArray(m)?m:[];return p.includes(d)?p.filter(v=>v!==d):[...p,d]}:m=>m===d?"":d)};return H.useEffect(()=>{c(s===void 0?a==="multiple"?[]:"":s)},[s,a]),u.jsx(o0.Provider,{value:{value:l,onValueChange:h,type:a},children:u.jsx("div",{className:i,children:n})})},Xc=({children:n,value:a,className:s=""})=>{const{value:i,type:l}=l0(),c=l==="multiple"?Array.isArray(i)&&i.includes(a):i===a;return u.jsx(c0.Provider,{value:{value:a,isOpen:c},children:u.jsx("div",{className:s,children:n})})},Wc=({children:n,className:a="",...s})=>{const{onValueChange:i}=l0(),{value:l,isOpen:c}=u0(),h=`accordion-content-${l}`,d=`accordion-header-${l}`;return u.jsx("h3",{id:d,className:"m-0 font-medium",children:u.jsxs("button",{type:"button",onClick:()=>i(l),"aria-expanded":c,"aria-controls":h,className:`w-full flex justify-between items-center text-left p-4 bg-surface hover:bg-border/20 transition-colors ${a}`,...s,children:[n,u.jsx(Fe,{name:"chevron-down",className:`w-5 h-5 transition-transform duration-300 ${c?"rotate-180":""} text-text-muted`})]})})},eu=({children:n,className:a=""})=>{const{value:s,isOpen:i}=u0(),l=`accordion-content-${s}`,c=`accordion-header-${s}`;return i?u.jsx("div",{id:l,role:"region","aria-labelledby":c,className:`animate-fade-in ${a}`,children:n}):null},rl=({label:n,localValue:a,backupValue:s,hasChanged:i})=>i?u.jsxs("div",{className:"text-xs",children:[u.jsxs("span",{className:"font-semibold",children:[n,": "]}),u.jsx("span",{className:"text-text-muted",children:a}),u.jsx(Fe,{name:"arrow-down",className:"inline w-3 h-3 mx-1 rotate-[-90deg]"}),u.jsx("span",{className:"text-primary font-semibold",children:s})]}):null,hw=({isOpen:n,onClose:a,onCompare:s,onRestoreSelected:i,onFullRestore:l,openConfirmModal:c,file:h})=>{const[d,m]=H.useState("upload"),[p,v]=H.useState(""),[x,T]=H.useState(null),[_,E]=H.useState(null),[S,w]=H.useState(new Set),O=H.useRef(null),{addToast:I}=Rn(),U=H.useRef(null);On(U,n);const{seriesProgress:z}=tt();H.useEffect(()=>{h&&n&&V(h)},[h,n]);const F=()=>{m("upload"),v(""),T(null),E(null),w(new Set),a()},V=async ie=>{if(ie){m("loading"),v(ie.name);try{const $=await ie.text(),q=await ku($);T(q);const se=s(q);E(se);const W=[...se.newSeries.map(me=>me.id),...se.newDecks.map(me=>me.id),...se.changedSeries.map(me=>me.backup.id),...se.changedDecks.map(me=>me.backup.id)];w(new Set(W)),m("compare")}catch($){I(`Restore failed: ${$ instanceof Error?$.message:"Unknown error"}`,"error"),F()}}},M=ie=>{var q;if(d==="loading")return;const $=(q=ie.target.files)==null?void 0:q[0];$&&V($),ie.target&&(ie.target.value="")},j=ie=>{var q;if(ie.preventDefault(),d==="loading")return;const $=(q=ie.dataTransfer.files)==null?void 0:q[0];$&&V($)},R=ie=>ie.preventDefault(),P=async()=>{x&&(m("loading"),await i({selectedIds:S,backupData:x}),F())},re=()=>{x&&(a(),c({title:"Confirm Full Restore",message:"This will completely overwrite all your local data with the contents of the backup file. This action cannot be undone.",confirmText:"overwrite everything",onConfirm:()=>l(x)}))},B=ie=>{w($=>{const q=new Set($);return q.has(ie)?q.delete(ie):q.add(ie),q})};if(!n)return null;const X=ie=>{var $,q;return ie.type===Ue.Flashcard?(($=ie.cards)==null?void 0:$.length)||0:((q=ie.questions)==null?void 0:q.length)||0},C=()=>{if(d==="loading")return u.jsxs("div",{className:"absolute inset-0 bg-surface/80 flex flex-col items-center justify-center z-20",children:[u.jsx(Yr,{}),u.jsx("p",{className:"text-lg text-text mt-4",children:"Analyzing backup..."})]});if(d==="compare"&&_){const{newSeries:ie,newDecks:$,changedSeries:q,changedDecks:se,dueCounts:W,masteryLevels:me}=_,L=new Set(ie.flatMap(fe=>(fe.levels||[]).flatMap(Ee=>Ee.deckIds||[]))),A=$.filter(fe=>!L.has(fe.id)),Z=ie.length>0||A.length>0,K=q.length>0||se.length>0,te=[];return ie.length>0&&te.push("new-series"),A.length>0&&te.push("new-decks"),q.length>0&&te.push("changed-series"),se.length>0&&te.push("changed-decks"),u.jsx("div",{className:"p-6 space-y-4 max-h-[60vh] overflow-y-auto",children:!Z&&!K?u.jsxs("div",{className:"text-center py-8 text-text-muted",children:[u.jsx(Fe,{name:"check-circle",className:"w-12 h-12 mx-auto text-green-500"}),u.jsx("p",{className:"mt-2 font-medium",children:"Everything is up-to-date!"}),u.jsx("p",{className:"text-sm",children:"Your local data already matches the contents of this backup file."})]}):u.jsxs(fw,{type:"multiple",defaultValue:te,children:[ie.length>0&&u.jsxs(Xc,{value:"new-series",className:"border-b",children:[u.jsxs(Wc,{children:["New Series (",ie.length,")"]}),u.jsx(eu,{className:"p-2 space-y-2",children:ie.map(fe=>u.jsx("div",{className:"p-3 bg-background rounded-md border border-border",children:u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:S.has(fe.id),onChange:()=>B(fe.id),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-text",children:fe.name}),u.jsxs("p",{className:"text-xs text-text-muted",children:[(fe.levels||[]).reduce((Ee,Te)=>{var he;return Ee+(((he=Te.deckIds)==null?void 0:he.length)||0)},0)," deck(s)"]})]})]})},fe.id))})]}),q.length>0&&u.jsxs(Xc,{value:"changed-series",className:"border-b",children:[u.jsxs(Wc,{children:["Changed Series (",q.length,")"]}),u.jsx(eu,{className:"p-2 space-y-2",children:q.map(({local:fe,backup:Ee,diff:Te})=>{var Re,N;const he=`${((Re=z.get(fe.id))==null?void 0:Re.size)||0}/${(fe.levels||[]).reduce((be,le)=>{var J;return be+(((J=le.deckIds)==null?void 0:J.length)||0)},0)}`,He=`${((N=((x==null?void 0:x.seriesProgress)||{})[Ee.id])==null?void 0:N.length)||0}/${(Ee.levels||[]).reduce((be,le)=>{var J;return be+(((J=le.deckIds)==null?void 0:J.length)||0)},0)}`,Be=Math.round((me.get(`local-${fe.id}`)||0)*100),Pe=Math.round((me.get(Ee.id)||0)*100);return u.jsx("div",{className:"p-3 bg-background rounded-md border border-border",children:u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:S.has(Ee.id),onChange:()=>B(Ee.id),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),u.jsxs("div",{className:"flex-grow space-y-1",children:[u.jsx("p",{className:"font-semibold text-text",children:Ee.name}),u.jsx(rl,{label:"Completion",localValue:he,backupValue:He,hasChanged:Te.completion}),u.jsx(rl,{label:"Mastery",localValue:`${Be}%`,backupValue:`${Pe}%`,hasChanged:Te.mastery}),Te.structure&&u.jsx("p",{className:"text-xs font-semibold text-primary",children:"Content/Structure updated"})]})]})},Ee.id)})})]}),A.length>0&&u.jsxs(Xc,{value:"new-decks",className:"border-b",children:[u.jsxs(Wc,{children:["New Standalone Decks (",A.length,")"]}),u.jsx(eu,{className:"p-2 space-y-2",children:A.map(fe=>u.jsx("div",{className:"p-3 bg-background rounded-md border border-border",children:u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:S.has(fe.id),onChange:()=>B(fe.id),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),u.jsxs("div",{className:"flex-grow",children:[u.jsx("p",{className:"font-semibold text-text",children:fe.name}),u.jsxs("p",{className:"text-xs text-text-muted",children:[X(fe)," item(s)  ",W.get(fe.id)||0," due"]})]})]})},fe.id))})]}),se.length>0&&u.jsxs(Xc,{value:"changed-decks",className:"border-b",children:[u.jsxs(Wc,{children:["Changed Decks (",se.length,")"]}),u.jsx(eu,{className:"p-2 space-y-2",children:se.map(({local:fe,backup:Ee,diff:Te})=>{const he=Math.round((me.get(`local-${fe.id}`)||0)*100),He=Math.round((me.get(Ee.id)||0)*100);return u.jsx("div",{className:"p-3 bg-background rounded-md border border-border",children:u.jsxs("label",{className:"flex items-start gap-3 cursor-pointer",children:[u.jsx("input",{type:"checkbox",checked:S.has(Ee.id),onChange:()=>B(Ee.id),className:"mt-1 h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"}),u.jsxs("div",{className:"flex-grow space-y-1",children:[u.jsx("p",{className:"font-semibold text-text",children:Ee.name}),u.jsx(rl,{label:"Items",localValue:X(fe),backupValue:X(Ee),hasChanged:Te.content}),u.jsx(rl,{label:"Due",localValue:W.get(`local-${fe.id}`),backupValue:W.get(Ee.id),hasChanged:Te.dueCount}),u.jsx(rl,{label:"Mastery",localValue:`${he}%`,backupValue:`${He}%`,hasChanged:Te.mastery}),Te.content&&u.jsx("p",{className:"text-xs font-semibold text-primary",children:"Content updated"})]})]})},Ee.id)})})]})]})})}return u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx("input",{type:"file",ref:O,className:"hidden",accept:".json,application/json,.zip",onChange:M}),u.jsxs("label",{onDragOver:R,onDrop:j,className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-border rounded-lg cursor-pointer hover:bg-background",children:[u.jsx(Fe,{name:"upload-cloud",className:"w-10 h-10 text-text-muted mb-2"}),u.jsxs("p",{className:"text-sm text-text-muted",children:[u.jsx("span",{className:"font-semibold text-primary",onClick:ie=>{var $;ie.preventDefault(),($=O.current)==null||$.click()},children:"Click to upload"})," or drag and drop"]}),u.jsx("p",{className:"text-xs text-text-muted/70",children:"CogniFlow Backup JSON file"})]})]})};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:U,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Restore from Backup"}),u.jsx(Ye,{variant:"ghost",onClick:F,className:"p-1 h-auto",disabled:d==="loading",children:u.jsx(Fe,{name:"x"})})]}),C(),u.jsxs("div",{className:"flex justify-between items-center p-4 bg-background/50 border-t border-border",children:[u.jsx("div",{children:d==="compare"&&u.jsx(Ye,{variant:"danger",onClick:re,children:"Full Restore"})}),u.jsxs("div",{className:"flex gap-2",children:[u.jsx(Ye,{variant:"secondary",onClick:F,disabled:d==="loading",children:"Cancel"}),d==="compare"&&u.jsxs(Ye,{variant:"primary",onClick:P,disabled:S.size===0,children:["Add/Update Selected (",S.size,")"]})]})]})]})})},pw=({isOpen:n,onClose:a,onReset:s,decks:i})=>{const[l,c]=H.useState(""),{addToast:h}=Rn(),d=H.useRef(null);On(d,n);const p=!!H.useMemo(()=>i.find(T=>T.id===l),[i,l]),v=()=>{if(!p){h("Please select a deck to reset.","error");return}s(l),a()},x=()=>{c(""),a()};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:d,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Reset Deck Progress"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:x,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-sm text-red-700 dark:text-red-200",children:u.jsxs("p",{children:[u.jsx("strong",{className:"font-bold",children:"Warning:"})," This will reset all spaced repetition data (due dates, intervals) for the selected deck. The cards themselves will not be deleted. This action cannot be undone."]})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"deck-select",className:"block text-sm font-medium text-text-muted mb-1",children:"Select Deck"}),u.jsxs("select",{id:"deck-select",value:l,onChange:T=>{c(T.target.value)},className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[u.jsx("option",{value:"",disabled:!0,children:"-- Select a deck --"}),i.map(T=>u.jsx("option",{value:T.id,children:T.name},T.id))]})]})]}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:x,className:"mr-2",children:"Cancel"}),u.jsxs(Ye,{type:"button",variant:"danger",onClick:v,disabled:!p,children:[u.jsx(Fe,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Reset Progress"]})]})]})}):null},mw=({isOpen:n,onClose:a,onConfirm:s,title:i,message:l,confirmText:c})=>{const[h,d]=H.useState(!1),m=H.useRef(null);On(m,n),H.useEffect(()=>{n&&d(!1)},[n]);const p=async()=>{d(!0);try{await Promise.resolve(s()),m.current&&a()}catch(v){console.error("Confirmation action failed:",v)}finally{m.current&&d(!1)}};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:m,className:"bg-surface rounded-lg shadow-xl w-full max-w-md transform transition-all relative",role:"alertdialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-message",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{id:"confirm-title",className:"text-xl font-bold text-text",children:i}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Close",disabled:h,children:u.jsx(Fe,{name:"x"})})]}),u.jsx("div",{className:"p-6 space-y-4",children:u.jsx("p",{id:"confirm-message",className:"text-text-muted",children:l})}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:a,className:"mr-2",disabled:h,children:"Cancel"}),u.jsx(Ye,{type:"button",variant:"danger",onClick:p,disabled:h,children:h?u.jsx(Yr,{size:"sm"}):c||"Confirm"})]})]})}):null},gw=({folder:n,isOpen:a,onClose:s,onSave:i})=>{const[l,c]=H.useState(""),{addToast:h}=Rn(),d=H.useRef(null);On(d,a),H.useEffect(()=>{c(n?n.name:"")},[n]);const m=p=>{if(p.preventDefault(),!l.trim()){h("Folder name cannot be empty.","error");return}i({id:(n==null?void 0:n.id)||null,name:l.trim()}),s()};return a?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsx("div",{ref:d,className:"bg-surface rounded-lg shadow-xl w-full max-w-md transform transition-all relative",children:u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:n?"Edit Folder":"Create New Folder"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:s,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsx("div",{className:"p-6 space-y-4",children:u.jsxs("div",{children:[u.jsx("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Folder Name"}),u.jsx("input",{id:"folder-name",type:"text",value:l,onChange:p=>c(p.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., University Courses",autoFocus:!0})]})}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:s,className:"mr-2",children:"Cancel"}),u.jsxs(Ye,{type:"submit",variant:"primary",children:[u.jsx(Fe,{name:"save",className:"w-4 h-4 mr-2"}),n?"Save Changes":"Create Folder"]})]})]})})}):null},yw=({series:n,isOpen:a,onClose:s,onSave:i})=>{const[l,c]=H.useState(""),[h,d]=H.useState(""),[m,p]=H.useState(null),{addToast:v}=Rn(),x=H.useRef(null);On(x,a);const T=n===null;H.useEffect(()=>{n?(c(n.name),d(n.description),p(null)):(c(""),d(""),p(null))},[n]);const _=S=>{if(!T)return;const w=S.clipboardData.getData("text");if(w.trim().startsWith("{"))try{const O=JSON.parse(w);typeof O.seriesName=="string"&&typeof O.seriesDescription=="string"&&Array.isArray(O.levels)&&(S.preventDefault(),c(O.seriesName),d(O.seriesDescription),p(O),v("Series details and structure populated from JSON scaffold!","success"))}catch{}},E=S=>{if(S.preventDefault(),!l.trim()){v("Series name cannot be empty.","error");return}i({id:T?null:n.id,name:l.trim(),description:h.trim(),scaffold:T?m:null}),s()};return a?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsx("div",{ref:x,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:u.jsxs("form",{onSubmit:E,children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:T?"Create New Series":"Edit Series"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:s,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 space-y-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"series-name",className:"block text-sm font-medium text-text-muted mb-1",children:"Series Name"}),u.jsx("input",{id:"series-name",type:"text",value:l,onChange:S=>c(S.target.value),onPaste:_,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Introduction to Algebra",autoFocus:!0}),T&&u.jsx("p",{className:"text-xs text-text-muted mt-1",children:"You can paste a full JSON scaffold object here to auto-populate."})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"series-description",className:"block text-sm font-medium text-text-muted mb-1",children:"Description"}),u.jsx("textarea",{id:"series-description",value:h,onChange:S=>d(S.target.value),onPaste:_,rows:3,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"A collection of decks covering core concepts."})]}),T&&m&&u.jsxs("div",{className:"space-y-2 animate-fade-in",children:[u.jsx("h4",{className:"text-sm font-semibold text-text-muted",children:"Structure Preview"}),u.jsx("div",{className:"bg-background border border-border rounded-md p-3 max-h-48 overflow-y-auto text-sm",children:u.jsx("ul",{className:"space-y-3",children:(m.levels||[]).filter(S=>!!S).map((S,w)=>{const O=S.decks||[];return u.jsxs("li",{children:[u.jsxs("div",{className:"flex items-center gap-2 font-medium text-text",children:[u.jsx(Fe,{name:"layers",className:"w-4 h-4 text-purple-500 flex-shrink-0"}),u.jsx("span",{className:"font-semibold",children:S.title})]}),u.jsxs("ul",{className:"pl-6 mt-1 space-y-1",children:[O.map((I,U)=>u.jsxs("li",{className:"flex items-center gap-2 text-text-muted",children:[u.jsx(Fe,{name:"help-circle",className:"w-3.5 h-3.5 flex-shrink-0"}),u.jsx("span",{children:I.name})]},U)),O.length===0&&u.jsx("li",{className:"flex items-center gap-2 text-xs text-text-muted/70 italic",children:"(No decks in this level)"})]})]},w)})})})]})]}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:s,className:"mr-2",children:"Cancel"}),u.jsxs(Ye,{type:"submit",variant:"primary",children:[u.jsx(Fe,{name:"save",className:"w-4 h-4 mr-2"}),T?"Create Series":"Save Changes"]})]})]})})}):null},d0="cogniflow-ai-options",tu={understandingLevels:["Auto","Novice","Beginner","Intermediate","Advanced","Expert"],comprehensivenessLevels:["Quick Overview","Standard","Comprehensive","Exhaustive"],learningGoalOptions:["Auto","Master a subject","Learn for the sake of curiosity","Explore a new interest","Become more informed","Understand a complex topic","Practically learn the topic"],learningStyleOptions:["Auto","Conceptual Understanding (Why & How)","Factual Recall (What, Who, When)","Practical Application & Scenarios"],languageOptions:["Auto","English","Swedish","Spanish","French","German","Japanese","Mandarin","Russian"],toneOptions:["Auto","Neutral","Formal","Casual","Academic","Enthusiastic","Humorous"],personas:[{id:"default",name:"Default Assistant",instruction:"You are a helpful and neutral AI assistant."},{id:"tutor",name:"Friendly Tutor",instruction:"You are a friendly and encouraging tutor. You use analogies and explain complex topics in a simple, easy-to-understand way."},{id:"professor",name:"University Professor",instruction:"You are an expert professor. Your tone is formal, academic, and you provide in-depth, precise information."},{id:"author",name:"Technical Author",instruction:"You are a technical author. Your style is concise, precise, and fact-focused. You avoid fluff and get straight to the point."},{id:"lindstrom",name:"Fredrik Lindstrm",instruction:'You are Fredrik Lindstrm. You explain topics with a focus on linguistics, history, and cultural nuances. You are witty, slightly dry, and love to find the "human" element in dry facts. You make connections between language, culture, and history that others miss.'},{id:"bryson",name:"Bill Bryson",instruction:'You are Bill Bryson. You write with an infectious sense of wonder, finding the "extraordinary in the ordinary." Your prose is conversational, witty, and avoids academic jargon. You use dry, self-deprecating humor and focus on the bizarre anecdotes and hidden history that textbooks leave out.'},{id:"feynman",name:"Richard Feynman",instruction:'You are Richard Feynman. You hate jargon and pseudo-intellectualism. Your goal is to explain complex topics using simple, physical analogies and plain language. You focus on the "why" and "how," not just the names of things. You are enthusiastic and radically curious.'},{id:"roach",name:"Mary Roach",instruction:"You are Mary Roach. You are intensely curious about the practical, slightly gross, or bizarre aspects of the topic. You focus on the human side of science and historythe sweat, the mistakes, and the awkward details. You are funny, fearless, and relatable."},{id:"great_teacher",name:"The Great Teacher",instruction:`You are "The Great Teacher." Your teaching style is built on narrative, humor, and relatability. You model "Radical Curiosity" and awe for the subject. You use storytelling to make facts stick, and you constantly relate the material back to the learner's life.`},{id:"the_master",name:"The Master",instruction:`You are "The Master," the ultimate educational companion. 
      
      CORE PHILOSOPHY: Facts are useless without context. Understanding requires "Radical Curiosity."
      
      YOUR 5 PILLARS OF TEACHING:
      1. THE STYLIST: Write with rhythm. Combine short, punchy sentences with lyrical descriptions. Avoid dry academic tone. You are a mentor, not a manual.
      2. THE STORYTELLER: Find the human struggle behind the fact. Gravity isn't just a force; it's Newton's obsession.
      3. THE ANALOGY ARCHITECT: Never explain a complex abstract concept without a concrete physical analogy. (e.g., "Voltage is water pressure").
      4. THE PROVOCATEUR (Keating Mode): Occasionally ask the user a question that has no right answer. Challenge their assumptions. Remind them that learning is an act of rebellion.
      5. THE FORMATTER: Use HTML tags (<b>, <i>, <br>) aggressively to structure your text. Key terms must be bold. Use italics for emphasis.
      
      When generating content, you must embody this persona completely.`}],customFields:[]},vw=()=>{try{const n=localStorage.getItem(d0);if(n){const a=JSON.parse(n),s=[...tu.personas,...(a.personas||[]).filter(i=>!tu.personas.some(l=>l.id===i.id))];return{...tu,...a,personas:s}}}catch(n){console.error("Failed to parse AI options from localStorage",n)}return tu},Ou=()=>{const[n,a]=H.useState(vw),s=l=>{try{localStorage.setItem(d0,JSON.stringify(l)),a(l)}catch(c){console.error("Failed to save AI options to localStorage",c)}},i=H.useCallback((l,c)=>{a(h=>{const d={...h,[l]:c};return s(d),d})},[]);return{options:n,updateCategory:i}},$i=({title:n,category:a})=>{const{options:s,updateCategory:i}=Ou(),[l,c]=H.useState(s[a]),[h,d]=H.useState(""),m=()=>{if(h.trim()){const v=[...l,h.trim()];c(v),i(a,v),d("")}},p=v=>{const x=l.filter((T,_)=>_!==v);c(x),i(a,x)};return u.jsxs("div",{className:"p-4 bg-background border border-border rounded-lg",children:[u.jsx("h4",{className:"font-semibold text-text mb-2",children:n}),u.jsx("ul",{className:"space-y-2",children:l.map((v,x)=>u.jsxs("li",{className:"flex items-center justify-between p-2 bg-surface rounded-md",children:[u.jsx("span",{children:v}),u.jsx(Ye,{variant:"ghost",size:"sm",className:"p-1 h-auto",onClick:()=>p(x),children:u.jsx(Fe,{name:"trash-2",className:"w-4 h-4 text-red-500"})})]},x))}),u.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[u.jsx("input",{type:"text",value:h,onChange:v=>d(v.target.value),onKeyDown:v=>{v.key==="Enter"&&(v.preventDefault(),m())},placeholder:"Add new option...",className:"flex-grow p-2 bg-surface border border-border rounded-md"}),u.jsx(Ye,{variant:"secondary",onClick:m,children:"Add"})]})]})},bw=()=>{const{options:n,updateCategory:a}=Ou(),[s,i]=H.useState(()=>JSON.parse(JSON.stringify(n.personas))),{addToast:l}=Rn(),c=(p,v,x)=>{const T=[...s];T[p]={...T[p],[v]:x},i(T)},h=()=>{i([...s,{id:crypto.randomUUID(),name:"",instruction:""}])},d=p=>{s[p].id!=="default"&&i(s.filter((v,x)=>x!==p))},m=()=>{a("personas",s.filter(p=>p.name.trim()&&p.instruction.trim())),l("Personas saved!","success")};return u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsx("h4",{className:"font-semibold text-text",children:"AI Personas"}),u.jsx(Ye,{variant:"secondary",size:"sm",onClick:m,children:"Save Personas"})]}),s.map((p,v)=>u.jsxs("div",{className:"space-y-2 p-3 bg-background border border-border rounded-md",children:[u.jsx("input",{type:"text",placeholder:"Persona Name (e.g., Cheerful Tutor)",value:p.name,onChange:x=>c(v,"name",x.target.value),className:"w-full p-2 bg-surface border border-border rounded-md",disabled:p.id==="default"}),u.jsx("textarea",{placeholder:"System instruction for this persona...",value:p.instruction,onChange:x=>c(v,"instruction",x.target.value),rows:3,className:"w-full p-2 bg-surface border border-border rounded-md"}),p.id!=="default"&&u.jsxs(Ye,{variant:"ghost",size:"sm",onClick:()=>d(v),className:"text-red-500",children:[u.jsx(Fe,{name:"trash-2",className:"w-4 h-4 mr-2"})," Remove Persona"]})]},p.id)),u.jsxs(Ye,{variant:"ghost",size:"sm",onClick:h,children:[u.jsx(Fe,{name:"plus",className:"w-4 h-4 mr-2"})," Add Persona"]})]})},xw=({onBack:n})=>u.jsxs(u.Fragment,{children:[u.jsx("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Ye,{variant:"ghost",onClick:n,className:"p-1 h-auto",children:u.jsx(Fe,{name:"chevron-left"})}),u.jsx("h2",{className:"text-xl font-bold",children:"Manage AI Options"})]})}),u.jsxs("main",{className:"flex-grow p-6 overflow-y-auto space-y-6",children:[u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[u.jsx($i,{title:"Understanding Levels",category:"understandingLevels"}),u.jsx($i,{title:"Comprehensiveness Levels",category:"comprehensivenessLevels"}),u.jsx($i,{title:"Learning Goals",category:"learningGoalOptions"}),u.jsx($i,{title:"Learning Styles",category:"learningStyleOptions"}),u.jsx($i,{title:"Languages",category:"languageOptions"}),u.jsx($i,{title:"Tones",category:"toneOptions"})]}),u.jsx("div",{className:"border-t border-border pt-6",children:u.jsx(bw,{})})]})]}),_w=({isOpen:n,onClose:a,onStartAIGeneration:s,initialTopic:i,initialGenerationType:l,context:c})=>{const[h,d]=H.useState("main"),[m,p]=H.useState(i||(c==null?void 0:c.deckName)||""),[v,x]=H.useState(c!=null&&c.seriesId?"series":"deck"),[T,_]=H.useState("quiz"),[E,S]=H.useState("none"),[w,O]=H.useState("default"),[I,U]=H.useState("Auto"),[z,F]=H.useState("Standard"),{options:V}=Ou(),M=H.useRef(null);On(M,n);const{addToast:j}=Rn(),[R,P]=H.useState([]),[re,B]=H.useState(!1);H.useEffect(()=>{i?p(i):c!=null&&c.deckName&&p(c.deckName)},[i,c]);const X=!!(c!=null&&c.deckId),C=H.useMemo(()=>v==="deck"?[{value:"quiz",label:"Interactive Quiz",icon:"help-circle"},{value:"flashcard",label:"Flashcards",icon:"laptop"},{value:"vocab",label:"Vocabulary Builder",icon:"book-open"},{value:"atomic",label:"Atomic Concepts",icon:"zap"},{value:"blooms",label:"Bloom's Taxonomy Quiz",icon:"trending-up"},{value:"learning",label:"Learning Deck",icon:"layers"},{value:"course",label:"Course / Guide (Reader)",icon:"file-text"}]:[{value:"quiz",label:"Interactive Quizzes",icon:"help-circle"},{value:"flashcard",label:"Flashcards",icon:"laptop"},{value:"vocab",label:"Vocabulary Builder",icon:"book-open"},{value:"course",label:"Course / Guide (Reader)",icon:"file-text"}],[v]);H.useEffect(()=>{C.some(se=>se.value===T)||_(C[0].value)},[v,C,T]);const ie=async()=>{if(!(!(c!=null&&c.deckName)&&!(c!=null&&c.seriesName))){B(!0);try{const se=await P1({name:c.deckName||c.seriesName||"",description:c.seriesDescription,type:c.seriesId?"series":"deck"});P(se)}catch{j("Failed to get suggestions.","error")}finally{B(!1)}}},$=()=>v==="series"?T==="flashcard"?"series-flashcard":T==="vocab"?"series-vocab":T==="course"?"series-course":"series-quiz":T==="quiz"?"single-deck-quiz":T==="flashcard"?"deck-flashcard":T==="vocab"?"deck-vocab":T==="atomic"?"deck-atomic":T==="blooms"?"quiz-blooms":T==="learning"?"single-deck-learning":T==="course"?"deck-course":"single-deck-quiz",q=se=>{if(se.preventDefault(),!m.trim())return;const W=$();s({generationType:W,topic:m,persona:w,understanding:I,comprehensiveness:z,imageStyle:T==="flashcard"||T==="vocab"||T==="atomic"?E:void 0,seriesId:c==null?void 0:c.seriesId,levelIndex:c==null?void 0:c.levelIndex,deckId:c==null?void 0:c.deckId})};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsx("div",{ref:M,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[90vh] flex flex-col",children:h==="main"?u.jsxs("form",{onSubmit:q,className:"flex flex-col h-full",children:[u.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-bold",children:"Generate with AI"})]}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("main",{className:"flex-grow p-6 space-y-6 overflow-y-auto",children:[!X&&!(c!=null&&c.seriesId)&&u.jsxs("div",{className:"flex bg-background rounded-lg p-1 border border-border",children:[u.jsx("button",{type:"button",onClick:()=>x("deck"),className:`flex-1 py-2 rounded-md text-sm font-medium transition-colors ${v==="deck"?"bg-primary text-on-primary shadow-sm":"text-text-muted hover:text-text"}`,children:"Single Deck"}),u.jsx("button",{type:"button",onClick:()=>x("series"),className:`flex-1 py-2 rounded-md text-sm font-medium transition-colors ${v==="series"?"bg-primary text-on-primary shadow-sm":"text-text-muted hover:text-text"}`,children:"Full Series"})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex justify-between items-end mb-1",children:[u.jsx("label",{htmlFor:"topic",className:"block text-sm font-medium text-text-muted",children:"Topic"}),((c==null?void 0:c.deckName)||(c==null?void 0:c.seriesName))&&u.jsxs("button",{type:"button",onClick:ie,disabled:re,className:"text-xs text-primary hover:underline flex items-center gap-1",children:[re?u.jsx(Yr,{size:"sm"}):u.jsx(Fe,{name:"zap",className:"w-3 h-3"}),R.length>0?"Refresh Suggestions":"Get Suggestions"]})]}),u.jsx("input",{id:"topic",type:"text",value:m,onChange:se=>p(se.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., The History of Ancient Rome",autoFocus:!0}),R.length>0&&u.jsx("div",{className:"flex flex-wrap gap-2 mt-2 animate-fade-in",children:R.map((se,W)=>u.jsx("button",{type:"button",onClick:()=>p(se),className:"text-xs px-2 py-1 bg-primary/10 text-primary rounded-full hover:bg-primary/20 transition-colors border border-primary/20",children:se},W))})]}),u.jsxs("div",{children:[u.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Content Style"}),u.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2",children:C.map(se=>u.jsxs("button",{type:"button",onClick:()=>_(se.value),className:`flex items-center gap-3 p-3 rounded-lg border text-left transition-all ${T===se.value?"border-primary bg-primary/5 ring-1 ring-primary":"border-border bg-background hover:border-primary/50"}`,children:[u.jsx("div",{className:`p-2 rounded-full ${T===se.value?"bg-primary text-on-primary":"bg-surface text-text-muted"}`,children:u.jsx(Fe,{name:se.icon,className:"w-4 h-4"})}),u.jsx("span",{className:`text-sm font-medium ${T===se.value?"text-primary":"text-text"}`,children:se.label})]},se.value))})]}),u.jsxs("div",{className:"space-y-4 pt-4 border-t border-border",children:[(T==="flashcard"||T==="vocab"||T==="atomic")&&u.jsxs("div",{className:"animate-fade-in",children:[u.jsx("label",{htmlFor:"image-style",className:"block text-sm font-medium text-text-muted mb-1",children:"Image Generation"}),u.jsxs("select",{id:"image-style",value:E,onChange:se=>S(se.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[u.jsx("option",{value:"none",children:"No Images"}),u.jsx("option",{value:"realistic",children:"Find Realistic Images"}),u.jsx("option",{value:"creative",children:"Generate Creative Images"})]})]}),u.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"persona",className:"block text-sm font-medium text-text-muted mb-1",children:"AI Persona"}),u.jsx("select",{id:"persona",value:w,onChange:se=>O(se.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:V.personas.map(se=>u.jsx("option",{value:se.id,children:se.name},se.id))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"understanding",className:"block text-sm font-medium text-text-muted mb-1",children:"My Current Level Is"}),u.jsx("select",{id:"understanding",value:I,onChange:se=>U(se.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:V.understandingLevels.map(se=>u.jsx("option",{value:se,children:se},se))})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"comprehensiveness",className:"block text-sm font-medium text-text-muted mb-1",children:"Desired Comprehensiveness"}),u.jsx("select",{id:"comprehensiveness",value:z,onChange:se=>F(se.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:V.comprehensivenessLevels.map(se=>u.jsx("option",{value:se,children:se},se))})]})]})]}),u.jsxs("footer",{className:"flex-shrink-0 flex justify-between items-center p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"ghost",onClick:()=>d("options"),children:"Manage Options"}),u.jsxs(Ye,{type:"submit",variant:"primary",disabled:!m.trim(),children:[u.jsx(Fe,{name:"zap",className:"w-5 h-5 mr-2"}),"Start Generation"]})]})]}):u.jsx(xw,{onBack:()=>d("main")})})}):null},Sw=({isOpen:n,onClose:a,onCancel:s})=>{const{currentTask:i,queue:l}=tt(m=>m.aiGenerationStatus),c=H.useRef(null);On(c,n);const h=()=>{s()},d=m=>{s(m)};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:c,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative max-h-[90vh] flex flex-col",role:"dialog","aria-modal":"true","aria-labelledby":"ai-status-title",children:[u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{id:"ai-status-title",className:"text-xl font-bold text-text",children:"AI Generation Status"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Close",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[u.jsxs("div",{children:[u.jsx("h3",{className:"text-sm font-semibold uppercase tracking-wider text-text-muted mb-2",children:"Current Task"}),u.jsx("div",{className:"bg-background p-4 rounded-lg",children:i?u.jsxs("div",{className:"flex items-center gap-4",children:[u.jsx(Yr,{size:"sm"}),u.jsx("p",{className:"text-text-muted flex-grow",children:i.statusText||"Processing your request..."}),u.jsx(Ye,{variant:"danger",size:"sm",onClick:h,children:"Cancel"})]}):u.jsx("p",{className:"text-text-muted text-center py-4",children:"No AI tasks are currently running."})})]}),l&&l.length>0&&u.jsxs("div",{children:[u.jsxs("h3",{className:"text-sm font-semibold uppercase tracking-wider text-text-muted mb-2",children:["Queued Tasks (",l.length,")"]}),u.jsx("ul",{className:"space-y-2",children:l.map(m=>u.jsxs("li",{className:"bg-background p-3 rounded-lg flex items-center justify-between gap-4",children:[u.jsx("p",{className:"text-text-muted text-sm truncate flex-grow",children:m.statusText}),u.jsx(Ye,{variant:"ghost",size:"sm",className:"p-1 h-auto hover:text-red-500",onClick:()=>d(m.id),"aria-label":`Cancel task: ${m.statusText}`,children:u.jsx(Fe,{name:"x-circle",className:"w-5 h-5"})})]},m.id))})]})]}),u.jsx("div",{className:"flex-shrink-0 flex justify-end p-4 bg-background/50 border-t border-border",children:u.jsx(Ye,{type:"button",variant:"primary",onClick:a,children:"Close"})})]})}):null},Ew="cogniflow-sync";let ih=null;const ww=()=>(ih||(ih=new BroadcastChannel(Ew)),ih),aa=()=>{ww().postMessage({type:"data-changed"})},Eu="CogniFlowDB",oh=9,rr="decks",qn="folders",$n="deckSeries",bn="sessions",hn="reviews",na="ai_chat",Wn="seriesProgress",Tr="learningProgress",Tw=(n,a=20,s=5e3)=>{let i=0,l=Date.now(),c=!1;const h=(d,...m)=>{const p=Date.now();if(p-l>s&&(i=0,l=p,c&&console.warn(`[${n}] Logger is now unmuted after timeout.`),c=!1),!c){if(i++,i>a){console.error(`[${n}] Logger muted: Too many logs in a short time window (${a} logs in <${s}ms). This may indicate a serious issue like a data corruption loop or a repeated failed operation. Further logs from this source will be suppressed for a short time to prevent app overload.`),c=!0;return}console[d](`[${n}]`,...m)}};return{log:(...d)=>h("log",...d),warn:(...d)=>h("warn",...d),error:(...d)=>h("error",...d)}},Ve=Tw("DB");let da=null;function Et(){return da||(da=new Promise((n,a)=>{Ve.log(`Initializing IndexedDB: ${Eu} v${oh}...`);const s=typeof indexedDB<"u"?indexedDB:typeof window<"u"?window.indexedDB:void 0;if(!s){const l="IndexedDB is not supported in this environment.";return Ve.error(`${l}`),a(new Error(l))}const i=s.open(Eu,oh);i.onblocked=l=>{const c="Database upgrade is required, but it is blocked by another open tab of this application. Please close all other tabs and reload.";Ve.error("IndexedDB open request blocked. Please close other tabs with this app open.",l),a(new Error(c))},i.onerror=()=>{Ve.error("IndexedDB error during open:",i.error),da=null;const l=new Error("Could not open or delete the database. This can be caused by browser settings (like blocking all data), private mode, or corruption. Please clear website data for this app in your browser settings and reload.");a(l)},i.onsuccess=()=>{const l=i.result;l.onversionchange=()=>{l.close(),da=null,console.warn("Database version changed in another tab. Closing connection to prevent blocking.")},Ve.log("IndexedDB connection successful."),l.onclose=()=>{da=null,Ve.warn("Database connection closed.")},n(l)},i.onupgradeneeded=l=>{var d;const c=l.target.result,h=l.target.transaction;if(Ve.log(`Upgrading database from version ${l.oldVersion} to ${oh}`),!h){Ve.error("Upgrade transaction is not available, aborting upgrade."),l.target&&((d=l.target.transaction)==null||d.abort());return}switch(l.oldVersion){case 0:Ve.log("v1: Creating initial object stores (decks, folders)."),c.objectStoreNames.contains(rr)||c.createObjectStore(rr,{keyPath:"id"}),c.objectStoreNames.contains(qn)||c.createObjectStore(qn,{keyPath:"id"});case 1:case 2:Ve.log(`v3: Creating object store: ${$n}`),c.objectStoreNames.contains($n)||c.createObjectStore($n,{keyPath:"id"});case 3:Ve.log(`v4: Creating object store: ${bn}`),c.objectStoreNames.contains(bn)||c.createObjectStore(bn,{keyPath:"id"});case 4:Ve.log(`v5: Creating object store: ${hn}`),c.objectStoreNames.contains(hn)||c.createObjectStore(hn,{autoIncrement:!0}).createIndex("timestamp","timestamp",{unique:!1});case 5:Ve.log("v6: Adding deckId index to reviews store.");const m=h.objectStore(hn);m.indexNames.contains("deckId")||m.createIndex("deckId","deckId",{unique:!1});case 6:Ve.log(`v7: Creating object store: ${na}`),c.objectStoreNames.contains(na)||c.createObjectStore(na,{keyPath:"id"});case 7:Ve.log(`v8: Creating object store: ${Wn}`),c.objectStoreNames.contains(Wn)||c.createObjectStore(Wn,{keyPath:"id"});case 8:Ve.log(`v9: Creating object store: ${Tr}`),c.objectStoreNames.contains(Tr)||c.createObjectStore(Tr,{keyPath:"deckId"});default:Ve.log("Database upgrade sequence complete.")}}}),da)}async function f0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(rr,"readonly").objectStore(rr).getAll();c.onerror=()=>{Ve.error("DB Error fetching all decks:",c.error),s(new Error("Error fetching decks from the database."))},c.onsuccess=()=>{const h=c.result,d=Array.isArray(h)?h:[],m=d.length;m>0?Ve.log(`Successfully loaded ${m} decks from the database.`):Ve.warn("No decks found in the database."),a(d)}})}async function h0(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(rr,"readwrite"),c=l.objectStore(rr);l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error adding/updating decks",l.error),i(new Error("Transaction error adding/updating decks."))},n.forEach(h=>{const d=c.put(h);d.onerror=()=>{Ve.error(`Error putting deck ${h.name}`,d.error)}})})}async function Aw(n){await h0(n)}async function kw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(rr,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error deleting deck",l.error),i(new Error("Transaction error deleting deck."))},l.objectStore(rr).delete(n)})}async function Nw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(rr,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error updating deck",l.error),i(new Error("Transaction error updating deck."))},l.objectStore(rr).put(n)})}async function p0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(qn,"readonly").objectStore(qn).getAll();c.onerror=()=>{Ve.error("DB Error fetching all folders:",c.error),s(new Error("Error fetching folders from the database."))},c.onsuccess=()=>{const h=c.result,d=Array.isArray(h)?h:[],m=d.length;m>0?Ve.log(`Successfully loaded ${m} folders from the database.`):Ve.warn("No folders found in the database."),a(d)}})}async function Dw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(qn,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error adding folder",l.error),i(new Error("Transaction error adding folder."))},l.objectStore(qn).add(n)})}async function Cw(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(qn,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error adding/updating folders",l.error),i(new Error("Transaction error adding/updating folders."))};const c=l.objectStore(qn);n.forEach(h=>{const d=c.put(h);d.onerror=()=>{Ve.error(`Error putting folder ${h.name}`,d.error)}})})}async function Ow(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(qn,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error updating folder",l.error),i(new Error("Transaction error updating folder."))},l.objectStore(qn).put(n)})}async function Rw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(qn,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error deleting folder",l.error),i(new Error("Transaction error deleting folder."))},l.objectStore(qn).delete(n)})}async function m0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction($n,"readonly").objectStore($n).getAll();c.onerror=()=>{Ve.error("DB Error fetching all series:",c.error),s(new Error("Error fetching deck series from the database."))},c.onsuccess=()=>{const h=c.result,d=Array.isArray(h)?h:[],m=d.length;m>0?Ve.log(`Successfully loaded ${m} series from the database.`):Ve.warn("No series found in the database."),a(d)}})}async function jw(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction($n,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error adding deck series",l.error),i(new Error("Transaction error adding deck series."))};const c=l.objectStore($n);n.forEach(h=>c.put(h))})}async function Iw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction($n,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error updating deck series",l.error),i(new Error("Error updating deck series."))},l.objectStore($n).put(n)})}async function Mw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction($n,"readwrite");l.oncomplete=()=>{aa(),s()},l.onerror=()=>{Ve.error("Transaction error deleting deck series",l.error),i(new Error("Error deleting deck series."))},l.objectStore($n).delete(n)})}async function Uw(n,a){const s=await Et();return new Promise((i,l)=>{const c=s.transaction(bn,"readwrite");c.oncomplete=()=>i(),c.onerror=()=>{Ve.error("Transaction error saving session state",c.error),l(new Error("Transaction error saving session state."))},c.objectStore(bn).put({id:n,...a})})}async function Lw(n){const a=await Et();return new Promise((s,i)=>{const h=a.transaction(bn,"readonly").objectStore(bn).get(n);h.onerror=()=>{Ve.error("DB Error fetching session state",h.error),i(new Error("Error fetching session state."))},h.onsuccess=()=>s(h.result||null)})}async function g0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(bn,"readonly").objectStore(bn).getAll();c.onsuccess=()=>{const h=c.result,d=Array.isArray(h)?h:[],m=d.length;m>0?Ve.log(`Successfully loaded ${m} sessions from the database.`):Ve.warn("No sessions found in the database."),a(d)},c.onerror=()=>{Ve.error("Failed to get all sessions.",c.error),s(new Error("Failed to get all sessions."))}})}async function zw(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(bn,"readwrite").objectStore(bn).clear();c.onsuccess=()=>a(),c.onerror=()=>{Ve.error("Failed to clear sessions.",c.error),s(new Error("Failed to clear sessions."))}})}async function Bw(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(bn,"readwrite"),c=l.objectStore(bn);l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error adding sessions.",l.error),i(new Error("Transaction error adding sessions."))},n.forEach(h=>c.put(h))})}async function Fw(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(bn,"readwrite");l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error deleting session state",l.error),i(new Error("Transaction error deleting session state."))},l.objectStore(bn).delete(n)})}async function Gw(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(bn,"readonly").objectStore(bn).getAllKeys();c.onerror=()=>{Ve.error("DB Error fetching session keys",c.error),s(new Error("Error fetching session keys."))},c.onsuccess=()=>a(c.result)})}async function $h(n){const a=await Et();return new Promise((s,i)=>{const h=a.transaction(n,"readwrite").objectStore(n).clear();h.onsuccess=()=>s(),h.onerror=()=>{Ve.error(`Failed to clear object store: ${n}`,h.error),i(new Error(`Failed to clear object store: ${n}.`))}})}const qw=()=>$h(rr),Hw=()=>$h(qn),Pw=()=>$h($n);async function Yw(n){const a=await Et();return new Promise((s,i)=>{const h=a.transaction(Tr,"readwrite").objectStore(Tr).put(n);h.onsuccess=()=>s(),h.onerror=()=>{Ve.error("Failed to save learning progress.",h.error),i(new Error("Failed to save learning progress."))}})}async function y0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(Tr,"readonly").objectStore(Tr).getAll();c.onsuccess=()=>{const h={};(Array.isArray(c.result)?c.result:[]).forEach(m=>{h[m.deckId]=m}),a(h)},c.onerror=()=>{Ve.error("Failed to get learning progress.",c.error),s(new Error("Failed to get learning progress."))}})}async function Vw(n){if(Object.keys(n).length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(Tr,"readwrite"),c=l.objectStore(Tr);l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error adding learning progress.",l.error),i(new Error("Transaction error adding learning progress."))},Object.values(n).forEach(h=>{c.put(h)})})}async function ks(){const n=await Et();return new Promise((a,s)=>{const i=[rr,qn,$n,hn,bn,Wn,Tr],l=n.transaction(i,"readonly"),c={decks:l.objectStore(rr).getAll(),folders:l.objectStore(qn).getAll(),deckSeries:l.objectStore($n).getAll(),reviews:l.objectStore(hn).getAll(),sessions:l.objectStore(bn).getAll(),seriesProgress:l.objectStore(Wn).getAll(),learningProgress:l.objectStore(Tr).getAll()};l.oncomplete=()=>{const h={};(Array.isArray(c.seriesProgress.result)?c.seriesProgress.result:[]).forEach(v=>{h[v.id]=v.completedDeckIds});const m={};(Array.isArray(c.learningProgress.result)?c.learningProgress.result:[]).forEach(v=>{m[v.deckId]=v}),a({decks:Array.isArray(c.decks.result)?c.decks.result:[],folders:Array.isArray(c.folders.result)?c.folders.result:[],deckSeries:Array.isArray(c.deckSeries.result)?c.deckSeries.result:[],reviews:Array.isArray(c.reviews.result)?c.reviews.result:[],sessions:Array.isArray(c.sessions.result)?c.sessions.result:[],seriesProgress:h,learningProgress:m})},l.onerror=()=>{Ve.error("Transaction error in getAllDataForBackup",l.error),s(new Error("Database transaction failed while gathering backup data."))}})}async function $w(n){const a=await Et();return new Promise((s,i)=>{const l=a.transaction(hn,"readwrite");l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error adding review log",l.error),i(new Error("Transaction error adding review log."))},l.objectStore(hn).add(n)})}async function Zw(n){const a=await Et();return new Promise((s,i)=>{const h=a.transaction(hn,"readonly").objectStore(hn).index("timestamp"),d=IDBKeyRange.lowerBound(n.toISOString()),m=h.getAll(d);m.onerror=()=>{Ve.error("DB Error fetching review logs",m.error),i(new Error("Error fetching review logs."))},m.onsuccess=()=>s(m.result)})}async function Qw(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(hn,"readonly").objectStore(hn).getAll();c.onerror=()=>{Ve.error("DB Error fetching all reviews:",c.error),s(new Error("Error fetching all reviews from the database."))},c.onsuccess=()=>{const h=c.result,d=Array.isArray(h)?h:[],m=d.length;m>0&&Ve.log(`Successfully loaded ${m} review logs from the database.`),a(d)}})}async function Jw(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(hn,"readwrite").objectStore(hn).clear();c.onsuccess=()=>a(),c.onerror=h=>{Ve.error("Failed to clear review logs",c.error),s(new Error("Failed to clear review logs."))}})}async function Kw(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(hn,"readwrite"),h=l.objectStore(hn).index("deckId"),d=new Set(n),m=h.openCursor();m.onsuccess=()=>{const p=m.result;p&&(d.has(p.value.deckId)&&p.delete(),p.continue())},l.oncomplete=()=>{Ve.log(`Deleted reviews for ${n.length} deck(s).`),s()},l.onerror=()=>{Ve.error("Transaction error deleting reviews for decks",l.error),i(new Error("Failed to delete review logs for specified decks."))}})}async function Xw(n){if(n.length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(hn,"readwrite"),c=l.objectStore(hn);l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error adding review logs",l.error),i(new Error("Transaction error adding review logs."))},n.forEach(h=>{const{id:d,...m}=h;c.add(m)})})}async function Ww(n){const a=await Et();return new Promise((s,i)=>{const d=a.transaction(hn,"readonly").objectStore(hn).index("deckId").getAll(n);d.onerror=()=>{Ve.error(`DB Error fetching reviews for deck ${n}`,d.error),i(new Error(`Error fetching reviews for deck ${n}.`))},d.onsuccess=()=>s(d.result)})}async function v0(n){const a=await Et();return new Promise((s,i)=>{const h=a.transaction(na,"readwrite").objectStore(na).put({id:"global_history",history:n});h.onsuccess=()=>s(),h.onerror=()=>{Ve.error("Failed to save AI chat history.",h.error),i(new Error("Failed to save AI chat history."))}})}async function Ol(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(na,"readonly").objectStore(na).get("global_history");c.onsuccess=()=>{var d,m,p;const h=((m=(d=c.result)==null?void 0:d.history)==null?void 0:m.length)??0;h>0&&Ve.log(`Successfully loaded ${h} AI chat history messages.`),a(((p=c.result)==null?void 0:p.history)||[])},c.onerror=()=>{Ve.error("Failed to get AI chat history.",c.error),s(new Error("Failed to get AI chat history."))}})}async function eT(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(na,"readwrite").objectStore(na).clear();c.onsuccess=()=>a(),c.onerror=()=>{Ve.error("Failed to clear AI chat history.",c.error),s(new Error("Failed to clear AI chat history."))}})}async function tT(n,a){const s=await Et();return new Promise((i,l)=>{const d=s.transaction(Wn,"readwrite").objectStore(Wn).put({id:n,completedDeckIds:Array.from(a)});d.onsuccess=()=>i(),d.onerror=()=>{Ve.error("Failed to save series progress.",d.error),l(new Error("Failed to save series progress."))}})}async function b0(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(Wn,"readonly").objectStore(Wn).getAll();c.onsuccess=()=>{const h={};(Array.isArray(c.result)?c.result:[]).forEach(p=>{h[p.id]=p.completedDeckIds});const m=Object.keys(h).length;m>0&&Ve.log(`Successfully loaded progress for ${m} series.`),a(h)},c.onerror=()=>{Ve.error("Failed to get all series progress.",c.error),s(new Error("Failed to get all series progress."))}})}async function nT(){const n=await Et();return new Promise((a,s)=>{const c=n.transaction(Wn,"readwrite").objectStore(Wn).clear();c.onsuccess=()=>a(),c.onerror=()=>{Ve.error("Failed to clear series progress.",c.error),s(new Error("Failed to clear series progress."))}})}async function rT(n){if(Object.keys(n).length===0)return;const a=await Et();return new Promise((s,i)=>{const l=a.transaction(Wn,"readwrite"),c=l.objectStore(Wn);l.oncomplete=()=>s(),l.onerror=()=>{Ve.error("Transaction error adding series progress.",l.error),i(new Error("Transaction error adding series progress."))},Object.entries(n).forEach(([h,d])=>{c.put({id:h,completedDeckIds:d})})})}async function x0(){if(typeof window>"u")return null;const{decks:n,folders:a,deckSeries:s,reviews:i,sessions:l,seriesProgress:c,learningProgress:h}=await ks();if(n.length===0&&a.length===0&&s.length===0)throw new Error("There is no data to export.");const d=localStorage.getItem("cogniflow-ai-options"),m=d?JSON.parse(d):void 0,p=await Ol(),v={},x=["themeId","disableAnimations","hapticsEnabled","aiFeaturesEnabled","backupEnabled","backupApiKey","syncOnCellular","notificationsEnabled","leechThreshold","leechAction"],T={themeId:"cogniflow-themeId",disableAnimations:"cogniflow-disableAnimations",hapticsEnabled:"cogniflow-hapticsEnabled",aiFeaturesEnabled:"cogniflow-aiFeaturesEnabled",backupEnabled:"cogniflow-backupEnabled",backupApiKey:"cogniflow-backupApiKey",syncOnCellular:"cogniflow-syncOnCellular",notificationsEnabled:"cogniflow-notificationsEnabled",leechThreshold:"cogniflow-leechThreshold",leechAction:"cogniflow-leechAction"};x.forEach(U=>{const z=T[U],F=localStorage.getItem(z);if(F!==null)try{["disableAnimations","hapticsEnabled","aiFeaturesEnabled","backupEnabled","syncOnCellular","notificationsEnabled"].includes(U)?v[U]=JSON.parse(F):["leechThreshold"].includes(U)?v[U]=Number(F):v[U]=F}catch{v[U]=F}});const _={version:9,decks:n,folders:a,deckSeries:s,reviews:i,sessions:l,aiChatHistory:p,seriesProgress:c,learningProgress:h,settings:v};m&&(_.aiOptions=m);const E=JSON.stringify(_,null,2),S=new Blob([E],{type:"application/json"}),w=URL.createObjectURL(S),O=document.createElement("a");O.style.display="none",O.href=w;const I=Vh();return O.download=`cogniflow-backup-${I}.json`,document.body.appendChild(O),O.click(),window.URL.revokeObjectURL(w),document.body.removeChild(O),O.download}async function dl(n){const a=await Et();return new Promise((s,i)=>{var h,d,m,p,v,x;Ve.log(`Starting atomic restore from backup version ${n.version}.`),Ve.log(`Backup contains: ${((h=n.decks)==null?void 0:h.length)||0} decks, ${((d=n.folders)==null?void 0:d.length)||0} folders, ${((m=n.deckSeries)==null?void 0:m.length)||0} series, ${((p=n.reviews)==null?void 0:p.length)||0} reviews, ${((v=n.sessions)==null?void 0:v.length)||0} sessions, ${Object.keys(n.seriesProgress||{}).length} series progresses, ${Object.keys(n.learningProgress||{}).length} learning progresses, and ${((x=n.aiChatHistory)==null?void 0:x.length)||0} chat messages.`);const l=[rr,qn,$n,hn,bn,na,Wn,Tr],c=a.transaction(l,"readwrite");c.oncomplete=()=>{Ve.log("Atomic restore transaction completed successfully. All data has been replaced."),aa(),s()},c.onerror=T=>{Ve.error("Atomic restore transaction failed:",c.error),i(new Error("Database transaction failed during data restore."))};try{Ve.log(`Clearing ${l.length} stores...`);const T=c.objectStore(rr);T.clear();const _=c.objectStore(qn);_.clear();const E=c.objectStore($n);E.clear();const S=c.objectStore(hn);S.clear();const w=c.objectStore(bn);w.clear();const O=c.objectStore(na);O.clear();const I=c.objectStore(Wn);I.clear();const U=c.objectStore(Tr);U.clear(),Ve.log("All stores cleared."),Ve.log("Adding new data from backup..."),(n.decks||[]).forEach(z=>T.put(z)),(n.folders||[]).forEach(z=>_.put(z)),(n.deckSeries||[]).forEach(z=>E.put(z)),(n.reviews||[]).forEach(z=>{const{id:F,...V}=z;S.add(V)}),(n.sessions||[]).forEach(z=>w.put(z)),n.aiChatHistory&&n.aiChatHistory.length>0&&O.put({id:"global_history",history:n.aiChatHistory}),Object.entries(n.seriesProgress||{}).forEach(([z,F])=>{I.put({id:z,completedDeckIds:F})}),Object.values(n.learningProgress||{}).forEach(z=>{U.put(z)}),Ve.log("Finished queueing restore operations.")}catch(T){Ve.error("Error queueing operations for atomic restore:",T),c.abort(),i(T)}})}async function aT(){if(da){try{(await da).close()}catch(n){console.warn("Could not close existing DB connection (it might have failed to open):",n)}da=null}return new Promise((n,a)=>{Ve.log(`Attempting to delete database: ${Eu}`);const s=indexedDB.deleteDatabase(Eu);s.onerror=i=>{Ve.error("Error deleting database.",i.target.error),a(new Error("Error deleting database."))},s.onsuccess=()=>{Ve.log("Database deleted successfully."),n()},s.onblocked=()=>{Ve.error("Database deletion blocked. Please close other tabs of this app and try again."),a(new Error("Deletion blocked. Please close other tabs of this app."))}})}const sT=Object.freeze(Object.defineProperty({__proto__:null,addDeckSeries:jw,addDecks:h0,addFolder:Dw,addFolders:Cw,addReviewLog:$w,bulkAddLearningProgress:Vw,bulkAddReviews:Xw,bulkAddSeriesProgress:rT,bulkAddSessions:Bw,bulkUpdateDecks:Aw,clearAIChatHistory:eT,clearDecks:qw,clearFolders:Hw,clearReviews:Jw,clearSeries:Pw,clearSeriesProgress:nT,clearSessions:zw,deleteDeck:kw,deleteDeckSeries:Mw,deleteFolder:Rw,deleteReviewsForDecks:Kw,deleteSessionState:Fw,exportAllData:x0,factoryReset:aT,getAIChatHistory:Ol,getAllDataForBackup:ks,getAllDeckSeries:m0,getAllDecks:f0,getAllFolders:p0,getAllLearningProgress:y0,getAllReviews:Qw,getAllSeriesProgress:b0,getAllSessionKeys:Gw,getAllSessions:g0,getReviewsForDeck:Ww,getReviewsSince:Zw,getSessionState:Lw,performAtomicRestore:dl,saveAIChatHistory:v0,saveLearningProgress:Yw,saveSeriesProgress:tT,saveSessionState:Uw,updateDeck:Nw,updateDeckSeries:Iw,updateFolder:Ow},Symbol.toStringTag,{value:"Module"})),Zh="AES-GCM",Ji=16,lu=12;async function _0(n,a,s){const i=new TextEncoder,l=await window.crypto.subtle.importKey("raw",i.encode(n),{name:"PBKDF2"},!1,["deriveKey"]);return window.crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:1e5,hash:"SHA-256"},l,{name:Zh,length:256},!1,s)}async function S0(n,a){const s=window.crypto.getRandomValues(new Uint8Array(Ji)),i=window.crypto.getRandomValues(new Uint8Array(lu)),l=await _0(a,s,["encrypt"]),c=new TextEncoder,h=await window.crypto.subtle.encrypt({name:Zh,iv:i},l,c.encode(n)),d=new Uint8Array(s.byteLength+i.byteLength+h.byteLength);d.set(s,0),d.set(i,s.byteLength),d.set(new Uint8Array(h),s.byteLength+i.byteLength);let m="";for(let p=0;p<d.byteLength;p++)m+=String.fromCharCode(d[p]);return btoa(m)}async function iT(n,a){const s=atob(n),i=new Uint8Array(s.length);for(let m=0;m<s.length;m++)i[m]=s.charCodeAt(m);if(i.byteLength<Ji+lu)throw new Error("Invalid encrypted data.");const l=i.slice(0,Ji),c=i.slice(Ji,Ji+lu),h=i.slice(Ji+lu),d=await _0(a,l,["decrypt"]);try{const m=await window.crypto.subtle.decrypt({name:Zh,iv:c},d,h);return new TextDecoder().decode(m)}catch{throw new Error("Decryption failed. Wrong password or corrupted data.")}}const oT="https://www.greenyogafestival.org/backup-api/api/v1",oi="cogniflow-data",wu="cogniflow-data.json",lT=()=>localStorage.getItem("cogniflow-backupApiKey")||"qRt+gU/57GHKhxTZeRnRi+dfT274iSkKKq2UnTr9Bxs=",E0=n=>localStorage.setItem("cogniflow-lastSyncEtag",n),w0=()=>localStorage.getItem("cogniflow-lastSyncEtag");async function li(n,a={}){const s=`${oT}/${n}`,i=lT(),l=new Headers(a.headers||{});l.set("X-API-Key",i),a.body instanceof FormData&&l.delete("Content-Type");const c={...a,headers:l};console.log(`[BackupService] Requesting: ${a.method||"GET"} ${s}`,{headers:Object.fromEntries(l.entries())});const h=3,d=1e3;for(let m=1;m<=h;m++)try{const p=await window.fetch(s,c);if(console.log(`[BackupService] Response from ${a.method||"GET"} ${s}: ${p.status}`),!p.ok&&![304,404].includes(p.status)){let v;try{v=await p.json()}catch{v={error:`HTTP error! status: ${p.status}`}}console.error("[BackupService] API request failed:",v);const x=(v==null?void 0:v.error)||(v==null?void 0:v.message)||`Request failed with status ${p.status}`,T=new Error(x);throw T.status=p.status,T}return p}catch(p){if(p instanceof TypeError&&p.message.toLowerCase().includes("failed to fetch"))if(m<h){const v=d*Math.pow(2,m-1);console.warn(`[BackupService] Attempt ${m} failed. Retrying in ${v}ms...`,p),await new Promise(x=>setTimeout(x,v));continue}else{console.error("[BackupService] All network attempts failed. This may be a network or CORS issue.",p);const v=new Error("Network error: Could not connect to the backup server. Please check your internet connection and any browser extensions (like ad-blockers) that may be interfering.");throw v.isNetworkError=!0,v}throw p}throw new Error("An unexpected error occurred in the request function.")}async function T0(n){const a=new Hh;return a.file("backup.json",JSON.stringify(n)),{dataType:"cogniflow-compressed-backup-v1",content:await a.generateAsync({type:"base64",compression:"DEFLATE",compressionOptions:{level:6}})}}async function lh(n,a=!1){console.log("[BackupService] Starting syncDataToServer...");let s;if(n)s=n;else{const{decks:x,folders:T,deckSeries:_,reviews:E,sessions:S,seriesProgress:w,learningProgress:O}=await ks(),I=await Ol(),U=localStorage.getItem("cogniflow-ai-options"),z=U?JSON.parse(U):void 0;s={version:9,decks:x,folders:T,deckSeries:_,reviews:E,sessions:S,seriesProgress:w,learningProgress:O,aiOptions:z,aiChatHistory:I}}const i=await T0(s);let l=JSON.stringify(i);const c=localStorage.getItem("cogniflow-encryptionPassword");if(c){const x=await S0(l,c);l=JSON.stringify({dataType:"cogniflow-encrypted-v1",content:x}),console.log("[BackupService] Payload encrypted.")}const h={"Content-Type":"application/json"},d=w0();d&&!a&&(h["If-Match"]=d),console.log(`[BackupService] PUT ${wu}`,{headers:h,bodySize:l.length});const m=await li(`apps/${oi}/backups/${wu}`,{method:"PUT",headers:h,body:l});if(!m.ok){let x;try{x=await m.json()}catch{x={error:`HTTP error! status: ${m.status}`}}const T=(x==null?void 0:x.error)||(x==null?void 0:x.message)||`Request failed with status ${m.status}`,_=new Error(T);throw _.status=m.status,_}const p=m.headers.get("ETag");p&&E0(p);const v=await m.json();return console.log("[BackupService] syncDataToServer successful:",v),{timestamp:v.modified,etag:p||""}}async function ch(){console.log("[BackupService] Starting syncDataFromServer...");const n=await li(`apps/${oi}/backups/${wu}`);if(n.status===404)throw new Error("No sync file found on the server.");const a=n.headers.get("ETag");a&&E0(a);let s=await n.text();try{const l=JSON.parse(s);if(l&&l.dataType==="cogniflow-encrypted-v1"){const c=localStorage.getItem("cogniflow-encryptionPassword");if(!c)throw new Error("Sync data is encrypted but no password is set on this device. Please set it in Settings.");s=await iT(l.content,c),console.log("[BackupService] Payload decrypted.")}}catch(l){if(l instanceof Error&&(l.message.includes("Decryption failed")||l.message.includes("password is set")))throw l}const i=await ku(s);return console.log("[BackupService] syncDataFromServer successful."),i}async function cT(){console.log("[BackupService] Starting getSyncDataMetadata...");const n={},a=w0();a&&(n["If-None-Match"]=a);const s=await li(`apps/${oi}/backups/${wu}/meta`,{headers:n});if(s.status===304||s.status===404)return console.log(`[BackupService] getSyncDataMetadata finished with status: ${s.status}`),{metadata:null,isNotModified:s.status===304};const i=await s.json();return console.log("[BackupService] getSyncDataMetadata successful:",i),{metadata:i,isNotModified:!1}}async function uT(){var s;console.log("[BackupService] Starting listServerBackups...");const a=await(await li(`apps/${oi}/backups/list`)).json();return console.log(`[BackupService] Found ${((s=a.backups)==null?void 0:s.length)||0} backups.`),a.backups||[]}async function dT(){console.log("[BackupService] Starting createServerBackup...");const{decks:n,folders:a,deckSeries:s,reviews:i,sessions:l,seriesProgress:c,learningProgress:h}=await ks(),d=localStorage.getItem("cogniflow-ai-options"),m=d?JSON.parse(d):void 0,p=await Ol(),x=await T0({version:9,decks:n,folders:a,deckSeries:s,reviews:i,sessions:l,seriesProgress:c,learningProgress:h,aiOptions:m,aiChatHistory:p});let T=JSON.stringify(x);const _=localStorage.getItem("cogniflow-encryptionPassword");if(_){const U=await S0(T,_);T=JSON.stringify({dataType:"cogniflow-encrypted-v1",content:U}),console.log("[BackupService] Backup payload encrypted.")}const E=new Blob([T],{type:"application/json"}),S=`backup-${Vh()}.json`,w=new FormData;w.append("file",E,S);const I=await(await li(`apps/${oi}/backups`,{method:"POST",body:w})).json();return console.log("[BackupService] createServerBackup successful:",I),I}async function fT(n){console.log(`[BackupService] Restoring live sync from manual backup: ${n}...`);const s=await(await li(`apps/${oi}/backups/${n}/restore`,{method:"POST"})).json();return console.log(`[BackupService] Restore from ${n} successful:`,s),s}async function hT(n){console.log(`[BackupService] Deleting manual backup: ${n}...`),await li(`apps/${oi}/backups/${n}`,{method:"DELETE"}),console.log(`[BackupService] Deleted ${n} successfully.`)}const pT=({isOpen:n,onClose:a,onRestore:s,onDelete:i})=>{const[l,c]=H.useState([]),[h,d]=H.useState(!1),[m,p]=H.useState(null),[v,x]=H.useState(null),{addToast:T}=Rn(),_=H.useRef(null);On(_,n),H.useEffect(()=>{n&&(async()=>{d(!0),p(null),x("Loading sync file info...");try{const[O,{metadata:I}]=await Promise.all([uT(),cT()]),U=O.sort((z,F)=>new Date(F.modified).getTime()-new Date(z.modified).getTime());if(c(U),I){const z=new Date(I.modified),F=(I.size/1024).toFixed(1);x(`Live sync file: ${z.toLocaleString()} (${F} KB)`)}else x("No live sync file found on server.")}catch(O){const I=O instanceof Error?O.message:"Failed to load backups.";p(I),x("Could not retrieve live sync file info.")}finally{d(!1)}})()},[n]);const E=w=>{s(w),a()},S=async w=>{try{await i(w),c(O=>O.filter(I=>I.filename!==w)),T(`Deleted backup: ${w}`,"success")}catch{}};return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:_,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Manage Server Backups"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto",children:[u.jsx("p",{className:"text-text-muted mb-2",children:"Select a backup to restore your live sync data from, or delete old backups. Restoring will overwrite the current sync file on the server."}),v&&u.jsx("p",{className:"text-sm text-text-muted mb-4 p-2 bg-background rounded-md",children:v}),h?u.jsx("div",{className:"text-center py-8",children:u.jsx(Yr,{})}):m?u.jsx("div",{className:"text-center py-8 text-red-500",children:m}):l.length>0?u.jsx("div",{className:"space-y-2 border border-border rounded-md",children:l.map(w=>u.jsxs("div",{className:"flex items-center justify-between p-3 hover:bg-background border-b border-border last:border-b-0",children:[u.jsxs("div",{className:"text-sm min-w-0",children:[u.jsx("p",{className:"font-medium text-text truncate",children:w.filename}),u.jsxs("p",{className:"text-text-muted",children:[new Date(w.modified).toLocaleString()," - ",(w.size/1024).toFixed(2)," KB"]})]}),u.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[u.jsx(Ye,{variant:"secondary",size:"sm",onClick:()=>E(w.filename),children:"Restore"}),u.jsx(Ye,{variant:"danger",size:"sm",onClick:()=>S(w.filename),children:"Delete"})]})]},w.filename))}):u.jsx("div",{className:"text-center py-8 text-text-muted",children:u.jsx("p",{children:"No server backups found."})})]}),u.jsx("div",{className:"flex-shrink-0 flex justify-end p-4 bg-background/50 border-t border-border",children:u.jsx(Ye,{type:"button",variant:"primary",onClick:a,children:"Close"})})]})})},mT=({isOpen:n,onClose:a,onConfirm:s,analysis:i})=>{const[l,c]=H.useState(""),[h,d]=H.useState(""),[m,p]=H.useState(null),v=H.useRef(null);On(v,n),H.useEffect(()=>{if(i.type==="quiz"&&i.data.name?c(i.data.name):c(""),i.type==="image"&&i.file){const w=new FileReader;w.onload=O=>{var I;p((I=O.target)==null?void 0:I.result)},w.readAsDataURL(i.file)}else p(null);d("")},[i]);const{title:x,message:T,confirmText:_}=H.useMemo(()=>{switch(i.type){case"backup":return{title:"Restore from Backup",message:`You dropped the backup file "${i.fileName}". Restoring will merge its content with your current data. Do you want to continue?`,confirmText:"Restore"};case"series":return{title:"Import Series",message:`You dropped a file containing the series "${i.data.seriesName}". Would you like to import it?`,confirmText:"Import Series"};case"quiz":return{title:"Import Quiz Deck",message:`You dropped a file for the quiz deck "${i.data.name}". Would you like to import it?`,confirmText:"Import Deck"};case"flashcard":return{title:"Import Flashcard Deck",message:`You dropped a file with ${i.data.length} flashcard(s). Please provide a name for the new deck.`,confirmText:"Import Deck"};case"anki":return{title:"Import Anki Package",message:`You dropped the Anki package "${i.fileName}". This may contain multiple decks and media.`,confirmText:"Import Anki Package"};case"image":return{title:"Generate Deck from Image",message:"Analyze this image with AI to create a flashcard deck.",confirmText:"Generate Deck"};default:return{title:"Confirm Import",message:"Unknown file type.",confirmText:"Confirm"}}},[i]),E=i.type==="flashcard"&&!l.trim(),S=()=>{s(i,{deckName:l.trim(),imageHint:h.trim()})};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:v,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative flex flex-col max-h-[90vh]",children:[u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold text-text",children:x}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Close",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[u.jsx("p",{className:"text-text-muted",children:T}),(i.type==="flashcard"||i.type==="quiz")&&u.jsxs("div",{children:[u.jsx("label",{htmlFor:"deck-name-input",className:"block text-sm font-medium text-text-muted mb-1",children:"Deck Name"}),u.jsx("input",{id:"deck-name-input",type:"text",value:l,onChange:w=>c(w.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"Enter a name for the new deck",autoFocus:!0})]}),i.type==="image"&&u.jsxs("div",{className:"space-y-4",children:[m&&u.jsx("div",{className:"rounded-lg overflow-hidden border border-border max-h-48 flex justify-center bg-black/5",children:u.jsx("img",{src:m,alt:"Preview",className:"h-full object-contain"})}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"image-hint",className:"block text-sm font-medium text-text-muted mb-1",children:"Topic / Hint (Optional)"}),u.jsx("input",{type:"text",id:"image-hint",value:h,onChange:w=>d(w.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Focus on dates or biological terms"}),u.jsx("p",{className:"text-xs text-text-muted mt-1",children:"Guide the AI to extract specific information."})]})]})]}),u.jsxs("div",{className:"flex-shrink-0 flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:a,className:"mr-2",children:"Cancel"}),u.jsx(Ye,{type:"button",variant:"primary",onClick:S,disabled:E,children:_})]})]})}):null};/*! @license DOMPurify 3.1.2 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.1.2/LICENSE */const{entries:A0,setPrototypeOf:Jv,isFrozen:gT,getPrototypeOf:yT,getOwnPropertyDescriptor:vT}=Object;let{freeze:ar,seal:Vr,create:k0}=Object,{apply:jh,construct:Ih}=typeof Reflect<"u"&&Reflect;ar||(ar=function(a){return a});Vr||(Vr=function(a){return a});jh||(jh=function(a,s,i){return a.apply(s,i)});Ih||(Ih=function(a,s){return new a(...s)});const nu=Ar(Array.prototype.forEach),Kv=Ar(Array.prototype.pop),al=Ar(Array.prototype.push),cu=Ar(String.prototype.toLowerCase),uh=Ar(String.prototype.toString),Xv=Ar(String.prototype.match),sl=Ar(String.prototype.replace),bT=Ar(String.prototype.indexOf),xT=Ar(String.prototype.trim),Xr=Ar(Object.prototype.hasOwnProperty),dr=Ar(RegExp.prototype.test),il=_T(TypeError);function Ar(n){return function(a){for(var s=arguments.length,i=new Array(s>1?s-1:0),l=1;l<s;l++)i[l-1]=arguments[l];return jh(n,a,i)}}function _T(n){return function(){for(var a=arguments.length,s=new Array(a),i=0;i<a;i++)s[i]=arguments[i];return Ih(n,s)}}function kt(n,a){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:cu;Jv&&Jv(n,null);let i=a.length;for(;i--;){let l=a[i];if(typeof l=="string"){const c=s(l);c!==l&&(gT(a)||(a[i]=c),l=c)}n[l]=!0}return n}function ST(n){for(let a=0;a<n.length;a++)Xr(n,a)||(n[a]=null);return n}function ri(n){const a=k0(null);for(const[s,i]of A0(n))Xr(n,s)&&(Array.isArray(i)?a[s]=ST(i):i&&typeof i=="object"&&i.constructor===Object?a[s]=ri(i):a[s]=i);return a}function ru(n,a){for(;n!==null;){const i=vT(n,a);if(i){if(i.get)return Ar(i.get);if(typeof i.value=="function")return Ar(i.value)}n=yT(n)}function s(){return null}return s}const Wv=ar(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),dh=ar(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fh=ar(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),ET=ar(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),hh=ar(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),wT=ar(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),eb=ar(["#text"]),tb=ar(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),ph=ar(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nb=ar(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),au=ar(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),TT=Vr(/\{\{[\w\W]*|[\w\W]*\}\}/gm),AT=Vr(/<%[\w\W]*|[\w\W]*%>/gm),kT=Vr(/\${[\w\W]*}/gm),NT=Vr(/^data-[\-\w.\u00B7-\uFFFF]/),DT=Vr(/^aria-[\-\w]+$/),N0=Vr(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),CT=Vr(/^(?:\w+script|data):/i),OT=Vr(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),D0=Vr(/^html$/i),RT=Vr(/^[a-z][.\w]*(-[.\w]+)+$/i);var rb=Object.freeze({__proto__:null,MUSTACHE_EXPR:TT,ERB_EXPR:AT,TMPLIT_EXPR:kT,DATA_ATTR:NT,ARIA_ATTR:DT,IS_ALLOWED_URI:N0,IS_SCRIPT_OR_DATA:CT,ATTR_WHITESPACE:OT,DOCTYPE_NAME:D0,CUSTOM_ELEMENT:RT});const jT=function(){return typeof window>"u"?null:window},IT=function(a,s){if(typeof a!="object"||typeof a.createPolicy!="function")return null;let i=null;const l="data-tt-policy-suffix";s&&s.hasAttribute(l)&&(i=s.getAttribute(l));const c="dompurify"+(i?"#"+i:"");try{return a.createPolicy(c,{createHTML(h){return h},createScriptURL(h){return h}})}catch{return console.warn("TrustedTypes policy "+c+" could not be created."),null}};function C0(){let n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:jT();const a=Xe=>C0(Xe);if(a.version="3.1.2",a.removed=[],!n||!n.document||n.document.nodeType!==9)return a.isSupported=!1,a;let{document:s}=n;const i=s,l=i.currentScript,{DocumentFragment:c,HTMLTemplateElement:h,Node:d,Element:m,NodeFilter:p,NamedNodeMap:v=n.NamedNodeMap||n.MozNamedAttrMap,HTMLFormElement:x,DOMParser:T,trustedTypes:_}=n,E=m.prototype,S=ru(E,"cloneNode"),w=ru(E,"nextSibling"),O=ru(E,"childNodes"),I=ru(E,"parentNode");if(typeof h=="function"){const Xe=s.createElement("template");Xe.content&&Xe.content.ownerDocument&&(s=Xe.content.ownerDocument)}let U,z="";const{implementation:F,createNodeIterator:V,createDocumentFragment:M,getElementsByTagName:j}=s,{importNode:R}=i;let P={};a.isSupported=typeof A0=="function"&&typeof I=="function"&&F&&F.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:re,ERB_EXPR:B,TMPLIT_EXPR:X,DATA_ATTR:C,ARIA_ATTR:ie,IS_SCRIPT_OR_DATA:$,ATTR_WHITESPACE:q,CUSTOM_ELEMENT:se}=rb;let{IS_ALLOWED_URI:W}=rb,me=null;const L=kt({},[...Wv,...dh,...fh,...hh,...eb]);let A=null;const Z=kt({},[...tb,...ph,...nb,...au]);let K=Object.seal(k0(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),te=null,fe=null,Ee=!0,Te=!0,he=!1,He=!0,Be=!1,Pe=!0,Re=!1,N=!1,be=!1,le=!1,J=!1,Q=!1,ae=!0,ke=!1;const De="user-content-";let ue=!0,je=!1,ze={},Ne=null;const Je=kt({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ht=null;const st=kt({},["audio","video","img","source","image","track"]);let Rt=null;const Qt=kt({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Bt="http://www.w3.org/1998/Math/MathML",Pt="http://www.w3.org/2000/svg",pt="http://www.w3.org/1999/xhtml";let xt=pt,mn=!1,It=null;const ma=kt({},[Bt,Pt,pt],uh);let dt=null;const qa=["application/xhtml+xml","text/html"],Nr="text/html";let Ft=null,ln=null;const jn=255,Qn=s.createElement("form"),$r=function(oe){return oe instanceof RegExp||oe instanceof Function},qe=function(){let oe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(ln&&ln===oe)){if((!oe||typeof oe!="object")&&(oe={}),oe=ri(oe),dt=qa.indexOf(oe.PARSER_MEDIA_TYPE)===-1?Nr:oe.PARSER_MEDIA_TYPE,Ft=dt==="application/xhtml+xml"?uh:cu,me=Xr(oe,"ALLOWED_TAGS")?kt({},oe.ALLOWED_TAGS,Ft):L,A=Xr(oe,"ALLOWED_ATTR")?kt({},oe.ALLOWED_ATTR,Ft):Z,It=Xr(oe,"ALLOWED_NAMESPACES")?kt({},oe.ALLOWED_NAMESPACES,uh):ma,Rt=Xr(oe,"ADD_URI_SAFE_ATTR")?kt(ri(Qt),oe.ADD_URI_SAFE_ATTR,Ft):Qt,ht=Xr(oe,"ADD_DATA_URI_TAGS")?kt(ri(st),oe.ADD_DATA_URI_TAGS,Ft):st,Ne=Xr(oe,"FORBID_CONTENTS")?kt({},oe.FORBID_CONTENTS,Ft):Je,te=Xr(oe,"FORBID_TAGS")?kt({},oe.FORBID_TAGS,Ft):{},fe=Xr(oe,"FORBID_ATTR")?kt({},oe.FORBID_ATTR,Ft):{},ze=Xr(oe,"USE_PROFILES")?oe.USE_PROFILES:!1,Ee=oe.ALLOW_ARIA_ATTR!==!1,Te=oe.ALLOW_DATA_ATTR!==!1,he=oe.ALLOW_UNKNOWN_PROTOCOLS||!1,He=oe.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Be=oe.SAFE_FOR_TEMPLATES||!1,Pe=oe.SAFE_FOR_XML!==!1,Re=oe.WHOLE_DOCUMENT||!1,le=oe.RETURN_DOM||!1,J=oe.RETURN_DOM_FRAGMENT||!1,Q=oe.RETURN_TRUSTED_TYPE||!1,be=oe.FORCE_BODY||!1,ae=oe.SANITIZE_DOM!==!1,ke=oe.SANITIZE_NAMED_PROPS||!1,ue=oe.KEEP_CONTENT!==!1,je=oe.IN_PLACE||!1,W=oe.ALLOWED_URI_REGEXP||N0,xt=oe.NAMESPACE||pt,K=oe.CUSTOM_ELEMENT_HANDLING||{},oe.CUSTOM_ELEMENT_HANDLING&&$r(oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(K.tagNameCheck=oe.CUSTOM_ELEMENT_HANDLING.tagNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&$r(oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(K.attributeNameCheck=oe.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),oe.CUSTOM_ELEMENT_HANDLING&&typeof oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(K.allowCustomizedBuiltInElements=oe.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Be&&(Te=!1),J&&(le=!0),ze&&(me=kt({},eb),A=[],ze.html===!0&&(kt(me,Wv),kt(A,tb)),ze.svg===!0&&(kt(me,dh),kt(A,ph),kt(A,au)),ze.svgFilters===!0&&(kt(me,fh),kt(A,ph),kt(A,au)),ze.mathMl===!0&&(kt(me,hh),kt(A,nb),kt(A,au))),oe.ADD_TAGS&&(me===L&&(me=ri(me)),kt(me,oe.ADD_TAGS,Ft)),oe.ADD_ATTR&&(A===Z&&(A=ri(A)),kt(A,oe.ADD_ATTR,Ft)),oe.ADD_URI_SAFE_ATTR&&kt(Rt,oe.ADD_URI_SAFE_ATTR,Ft),oe.FORBID_CONTENTS&&(Ne===Je&&(Ne=ri(Ne)),kt(Ne,oe.FORBID_CONTENTS,Ft)),ue&&(me["#text"]=!0),Re&&kt(me,["html","head","body"]),me.table&&(kt(me,["tbody"]),delete te.tbody),oe.TRUSTED_TYPES_POLICY){if(typeof oe.TRUSTED_TYPES_POLICY.createHTML!="function")throw il('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof oe.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw il('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');U=oe.TRUSTED_TYPES_POLICY,z=U.createHTML("")}else U===void 0&&(U=IT(_,l)),U!==null&&typeof z=="string"&&(z=U.createHTML(""));ar&&ar(oe),ln=oe}},ga=kt({},["mi","mo","mn","ms","mtext"]),gn=kt({},["foreignobject","annotation-xml"]),fr=kt({},["title","style","font","a","script"]),Ha=kt({},[...dh,...fh,...ET]),Pa=kt({},[...hh,...wT]),Dr=function(oe){let Le=I(oe);(!Le||!Le.tagName)&&(Le={namespaceURI:xt,tagName:"template"});const Ze=cu(oe.tagName),ct=cu(Le.tagName);return It[oe.namespaceURI]?oe.namespaceURI===Pt?Le.namespaceURI===pt?Ze==="svg":Le.namespaceURI===Bt?Ze==="svg"&&(ct==="annotation-xml"||ga[ct]):!!Ha[Ze]:oe.namespaceURI===Bt?Le.namespaceURI===pt?Ze==="math":Le.namespaceURI===Pt?Ze==="math"&&gn[ct]:!!Pa[Ze]:oe.namespaceURI===pt?Le.namespaceURI===Pt&&!gn[ct]||Le.namespaceURI===Bt&&!ga[ct]?!1:!Pa[Ze]&&(fr[Ze]||!Ha[Ze]):!!(dt==="application/xhtml+xml"&&It[oe.namespaceURI]):!1},In=function(oe){al(a.removed,{element:oe});try{oe.parentNode.removeChild(oe)}catch{oe.remove()}},xn=function(oe,Le){try{al(a.removed,{attribute:Le.getAttributeNode(oe),from:Le})}catch{al(a.removed,{attribute:null,from:Le})}if(Le.removeAttribute(oe),oe==="is"&&!A[oe])if(le||J)try{In(Le)}catch{}else try{Le.setAttribute(oe,"")}catch{}},ya=function(oe){let Le=null,Ze=null;if(be)oe="<remove></remove>"+oe;else{const Xt=Xv(oe,/^[\r\n\t ]+/);Ze=Xt&&Xt[0]}dt==="application/xhtml+xml"&&xt===pt&&(oe='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+oe+"</body></html>");const ct=U?U.createHTML(oe):oe;if(xt===pt)try{Le=new T().parseFromString(ct,dt)}catch{}if(!Le||!Le.documentElement){Le=F.createDocument(xt,"template",null);try{Le.documentElement.innerHTML=mn?z:ct}catch{}}const Wt=Le.body||Le.documentElement;return oe&&Ze&&Wt.insertBefore(s.createTextNode(Ze),Wt.childNodes[0]||null),xt===pt?j.call(Le,Re?"html":"body")[0]:Re?Le.documentElement:Wt},Cr=function(oe){return V.call(oe.ownerDocument||oe,oe,p.SHOW_ELEMENT|p.SHOW_COMMENT|p.SHOW_TEXT|p.SHOW_PROCESSING_INSTRUCTION|p.SHOW_CDATA_SECTION,null)},Is=function(oe){return oe instanceof x&&(typeof oe.__depth<"u"&&typeof oe.__depth!="number"||typeof oe.__removalCount<"u"&&typeof oe.__removalCount!="number"||typeof oe.nodeName!="string"||typeof oe.textContent!="string"||typeof oe.removeChild!="function"||!(oe.attributes instanceof v)||typeof oe.removeAttribute!="function"||typeof oe.setAttribute!="function"||typeof oe.namespaceURI!="string"||typeof oe.insertBefore!="function"||typeof oe.hasChildNodes!="function")},sr=function(oe){return typeof d=="function"&&oe instanceof d},Gt=function(oe,Le,Ze){P[oe]&&nu(P[oe],ct=>{ct.call(a,Le,Ze,ln)})},Mt=function(oe){let Le=null;if(Gt("beforeSanitizeElements",oe,null),Is(oe))return In(oe),!0;const Ze=Ft(oe.nodeName);if(Gt("uponSanitizeElement",oe,{tagName:Ze,allowedTags:me}),oe.hasChildNodes()&&!sr(oe.firstElementChild)&&dr(/<[/\w]/g,oe.innerHTML)&&dr(/<[/\w]/g,oe.textContent)||oe.nodeType===7||Pe&&oe.nodeType===8&&dr(/<[/\w]/g,oe.data))return In(oe),!0;if(!me[Ze]||te[Ze]){if(!te[Ze]&&Ya(Ze)&&(K.tagNameCheck instanceof RegExp&&dr(K.tagNameCheck,Ze)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Ze)))return!1;if(ue&&!Ne[Ze]){const ct=I(oe)||oe.parentNode,Wt=O(oe)||oe.childNodes;if(Wt&&ct){const Xt=Wt.length;for(let wt=Xt-1;wt>=0;--wt){const _n=S(Wt[wt],!0);_n.__removalCount=(oe.__removalCount||0)+1,ct.insertBefore(_n,w(oe))}}}return In(oe),!0}return oe instanceof m&&!Dr(oe)||(Ze==="noscript"||Ze==="noembed"||Ze==="noframes")&&dr(/<\/no(script|embed|frames)/i,oe.innerHTML)?(In(oe),!0):(Be&&oe.nodeType===3&&(Le=oe.textContent,nu([re,B,X],ct=>{Le=sl(Le,ct," ")}),oe.textContent!==Le&&(al(a.removed,{element:oe.cloneNode()}),oe.textContent=Le)),Gt("afterSanitizeElements",oe,null),!1)},Or=function(oe,Le,Ze){if(ae&&(Le==="id"||Le==="name")&&(Ze in s||Ze in Qn))return!1;if(!(Te&&!fe[Le]&&dr(C,Le))){if(!(Ee&&dr(ie,Le))){if(!A[Le]||fe[Le]){if(!(Ya(oe)&&(K.tagNameCheck instanceof RegExp&&dr(K.tagNameCheck,oe)||K.tagNameCheck instanceof Function&&K.tagNameCheck(oe))&&(K.attributeNameCheck instanceof RegExp&&dr(K.attributeNameCheck,Le)||K.attributeNameCheck instanceof Function&&K.attributeNameCheck(Le))||Le==="is"&&K.allowCustomizedBuiltInElements&&(K.tagNameCheck instanceof RegExp&&dr(K.tagNameCheck,Ze)||K.tagNameCheck instanceof Function&&K.tagNameCheck(Ze))))return!1}else if(!Rt[Le]){if(!dr(W,sl(Ze,q,""))){if(!((Le==="src"||Le==="xlink:href"||Le==="href")&&oe!=="script"&&bT(Ze,"data:")===0&&ht[oe])){if(!(he&&!dr($,sl(Ze,q,"")))){if(Ze)return!1}}}}}}return!0},Ya=function(oe){return oe!=="annotation-xml"&&Xv(oe,se)},Va=function(oe){Gt("beforeSanitizeAttributes",oe,null);const{attributes:Le}=oe;if(!Le)return;const Ze={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:A};let ct=Le.length;for(;ct--;){const Wt=Le[ct],{name:Xt,namespaceURI:wt,value:_n}=Wt,hr=Ft(Xt);let en=Xt==="value"?_n:xT(_n);if(Ze.attrName=hr,Ze.attrValue=en,Ze.keepAttr=!0,Ze.forceKeepAttr=void 0,Gt("uponSanitizeAttribute",oe,Ze),en=Ze.attrValue,Ze.forceKeepAttr||(xn(Xt,oe),!Ze.keepAttr))continue;if(!He&&dr(/\/>/i,en)){xn(Xt,oe);continue}Be&&nu([re,B,X],$a=>{en=sl(en,$a," ")});const Pn=Ft(oe.nodeName);if(Or(Pn,hr,en)){if(ke&&(hr==="id"||hr==="name")&&(xn(Xt,oe),en=De+en),U&&typeof _=="object"&&typeof _.getAttributeType=="function"&&!wt)switch(_.getAttributeType(Pn,hr)){case"TrustedHTML":{en=U.createHTML(en);break}case"TrustedScriptURL":{en=U.createScriptURL(en);break}}try{wt?oe.setAttributeNS(wt,Xt,en):oe.setAttribute(Xt,en),Kv(a.removed)}catch{}}}Gt("afterSanitizeAttributes",oe,null)},ci=function Xe(oe){let Le=null;const Ze=Cr(oe);for(Gt("beforeSanitizeShadowDOM",oe,null);Le=Ze.nextNode();){if(Gt("uponSanitizeShadowNode",Le,null),Mt(Le))continue;const ct=I(Le);Le.nodeType===1&&(ct&&ct.__depth?Le.__depth=(Le.__removalCount||0)+ct.__depth+1:Le.__depth=1),Le.__depth>=jn&&In(Le),Le.content instanceof c&&(Le.content.__depth=Le.__depth,Xe(Le.content)),Va(Le)}Gt("afterSanitizeShadowDOM",oe,null)};return a.sanitize=function(Xe){let oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Le=null,Ze=null,ct=null,Wt=null;if(mn=!Xe,mn&&(Xe="<!-->"),typeof Xe!="string"&&!sr(Xe))if(typeof Xe.toString=="function"){if(Xe=Xe.toString(),typeof Xe!="string")throw il("dirty is not a string, aborting")}else throw il("toString is not a function");if(!a.isSupported)return Xe;if(N||qe(oe),a.removed=[],typeof Xe=="string"&&(je=!1),je){if(Xe.nodeName){const _n=Ft(Xe.nodeName);if(!me[_n]||te[_n])throw il("root node is forbidden and cannot be sanitized in-place")}}else if(Xe instanceof d)Le=ya("<!---->"),Ze=Le.ownerDocument.importNode(Xe,!0),Ze.nodeType===1&&Ze.nodeName==="BODY"||Ze.nodeName==="HTML"?Le=Ze:Le.appendChild(Ze);else{if(!le&&!Be&&!Re&&Xe.indexOf("<")===-1)return U&&Q?U.createHTML(Xe):Xe;if(Le=ya(Xe),!Le)return le?null:Q?z:""}Le&&be&&In(Le.firstChild);const Xt=Cr(je?Xe:Le);for(;ct=Xt.nextNode();){if(Mt(ct))continue;const _n=I(ct);ct.nodeType===1&&(_n&&_n.__depth?ct.__depth=(ct.__removalCount||0)+_n.__depth+1:ct.__depth=1),ct.__depth>=jn&&In(ct),ct.content instanceof c&&(ct.content.__depth=ct.__depth,ci(ct.content)),Va(ct)}if(je)return Xe;if(le){if(J)for(Wt=M.call(Le.ownerDocument);Le.firstChild;)Wt.appendChild(Le.firstChild);else Wt=Le;return(A.shadowroot||A.shadowrootmode)&&(Wt=R.call(i,Wt,!0)),Wt}let wt=Re?Le.outerHTML:Le.innerHTML;return Re&&me["!doctype"]&&Le.ownerDocument&&Le.ownerDocument.doctype&&Le.ownerDocument.doctype.name&&dr(D0,Le.ownerDocument.doctype.name)&&(wt="<!DOCTYPE "+Le.ownerDocument.doctype.name+`>
`+wt),Be&&nu([re,B,X],_n=>{wt=sl(wt,_n," ")}),U&&Q?U.createHTML(wt):wt},a.setConfig=function(){let Xe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};qe(Xe),N=!0},a.clearConfig=function(){ln=null,N=!1},a.isValidAttribute=function(Xe,oe,Le){ln||qe({});const Ze=Ft(Xe),ct=Ft(oe);return Or(Ze,ct,Le)},a.addHook=function(Xe,oe){typeof oe=="function"&&(P[Xe]=P[Xe]||[],al(P[Xe],oe))},a.removeHook=function(Xe){if(P[Xe])return Kv(P[Xe])},a.removeHooks=function(Xe){P[Xe]&&(P[Xe]=[])},a.removeAllHooks=function(){P={}},a}var MT=C0();const O0=({html:n,className:a,as:s="div"})=>{const i=`html-container-${Wi.useId()}`,l=Wi.useMemo(()=>MT.sanitize(n,{ADD_TAGS:["script","style","iframe","video","audio","source","track","img"],ADD_ATTR:["allow","allowfullscreen","frameborder","scrolling","target","src","data-src","type","controls","autoplay","loop","muted","poster","preload","class","id","style"],FORCE_BODY:!0}),[n]);return Wi.useEffect(()=>{const c=document.getElementById(i);if(!c)return;Array.from(c.getElementsByTagName("img")).forEach(p=>{p.hasAttribute("loading")||p.setAttribute("loading","lazy"),p.hasAttribute("decoding")||p.setAttribute("decoding","async")});const d=Array.from(c.getElementsByTagName("script")),m=[];return d.forEach(p=>{const v=document.createElement("script");Array.from(p.attributes).forEach(x=>{v.setAttribute(x.name,x.value)}),p.text&&!p.src?v.text=`try { ${p.text} } catch (e) { console.error('Error in custom card script:', e); }`:v.text=p.text,document.body.appendChild(v),m.push(v)}),()=>{m.forEach(p=>{document.body.contains(p)&&document.body.removeChild(p)})}},[l,i]),u.jsx(s,{id:i,className:a,dangerouslySetInnerHTML:{__html:l}})},UT=()=>{throw new Error("AI features are disabled. A Google Gemini API key is required.")},LT={type:Se.ARRAY,description:"An array of one or more actions the user wants to perform. If the user is just chatting, return an array with a single NO_ACTION.",items:{type:Se.OBJECT,properties:{action:{type:Se.STRING,enum:Object.values(Uh),description:"The specific action the user wants to perform. Use NO_ACTION for conversational replies."},payload:{type:Se.OBJECT,description:"The data needed to perform the action. Include only necessary fields.",properties:{deckId:{type:Se.STRING,description:"The ID of the target deck."},folderId:{type:Se.STRING,description:"The ID of the target folder. Use null to move a deck out of a folder."},name:{type:Se.STRING,description:"The name for a new deck or folder."},newName:{type:Se.STRING,description:"The new name for a deck or folder being renamed."},seriesId:{type:Se.STRING,description:"The ID of the target series for expansion."},levelIndex:{type:Se.NUMBER,description:"The 0-based index of the level within the series to add decks to."},count:{type:Se.NUMBER,description:"The number of questions to generate for a deck."}}},confirmationMessage:{type:Se.STRING,description:"A friendly message to the user asking them to confirm the action. For a NO_ACTION, this should be the AI's conversational reply."}},required:["action","payload","confirmationMessage"]}},zT=async(n,a)=>{const s=UT(),i=a.decks.map(d=>`- Deck: "${d.name}" (id: ${d.id}, folderId: ${d.folderId||"none"})`).join(`
`),l=a.folders.map(d=>`- Folder: "${d.name}" (id: ${d.id})`).join(`
`),c=a.series.map(d=>{const m=(d.levels||[]).map((p,v)=>`  - Level ${v}: ${p.title} (${(p.deckIds||[]).length} decks)`).join(`
`);return`- Series: "${d.name}" (id: ${d.id})
${m}`}).join(`
`),h=`
        You are an AI assistant for the 'CogniFlow' flashcard app. Your goal is to help users manage their decks and folders by interpreting their natural language requests.

        You MUST respond with a JSON object that is an array of actions, conforming to the provided schema.

        **Your Capabilities:**
        - Create, rename, move, and delete decks.
        - Create, rename, and delete folders.
        - Analyze and expand learning series by adding new levels or decks.
        - Generate new, unique questions for a specific quiz deck, with support for HTML formatting (e.g., \`<b>\`, \`<i>\`, \`<ruby>\`).

        **Instructions:**
        1.  Analyze the user's request.
        2.  Analyze the provided application state to find the relevant IDs for decks and folders mentioned by name.
        3.  If the user's request is ambiguous (e.g., "delete the history deck" when multiple exist), ask for clarification by using the 'NO_ACTION' type and formulating a question in the 'confirmationMessage'.
        4.  If the user is just chatting or asking a question you can't perform an action for, use the 'NO_ACTION' type and provide a helpful response in the 'confirmationMessage'.
        5.  For any action that modifies data, construct a clear and concise 'confirmationMessage' that will be presented as a button for the user to approve. Example: "Delete 'Ancient Rome' Deck?" or "Create 'Languages' Folder?".
        6.  For MOVE_DECK_TO_FOLDER, if the user wants to move a deck out of a folder, the 'folderId' in the payload should be \`null\`.
        7.  For EXPAND_SERIES_ADD_DECKS, you must identify the correct series by name to get its ID, and determine the correct 0-based 'levelIndex' from the user's request (e.g., "add a deck to the first level" means levelIndex: 0).
        8.  For GENERATE_QUESTIONS_FOR_DECK, identify the target deck by name to get its ID. If the user specifies a number (e.g., "add 10 questions"), include it in the 'count' payload property. The generated content should leverage HTML formatting where appropriate for clarity (e.g., using <b> for emphasis or <ruby> for annotations in language decks).

        **Current Application State:**
        
        **Folders:**
        ${l||"No folders exist."}
        
        **Decks:**
        ${i||"No decks exist."}

        **Series:**
        ${c||"No series exist."}
    `;try{const m=(await s.models.generateContent({model:"gemini-2.5-pro",contents:n,config:{systemInstruction:h,responseMimeType:"application/json",responseSchema:LT,thinkingConfig:{thinkingBudget:32768}}})).text.trim(),p=JSON.parse(m);if(!Array.isArray(p))throw new Error("AI response was not a valid array of actions.");return p}catch(d){throw console.error("Error getting AI response:",d),d instanceof Error&&d.message.includes("SAFETY")?new Error("The request was blocked due to safety settings. Please try a different request."):new Error("Sorry, I had trouble understanding that. Could you try rephrasing?")}},BT=({isOpen:n,onClose:a,onExecuteAction:s,history:i})=>{const{dispatch:l}=tt(),c=Lh(),h=V_(),d=zh(),[m,p]=H.useState(""),v=H.useRef(null);H.useEffect(()=>{var E;(E=v.current)==null||E.scrollIntoView({behavior:"smooth"})},[i]),H.useEffect(()=>{n&&v0(i)},[i,n]);const x=async E=>{var U;E.preventDefault();const S=m.trim();if(!S)return;p("");const w={id:crypto.randomUUID(),role:"user",text:S},O={id:crypto.randomUUID(),role:"model",text:"",isLoading:!0},I=[...i,w,O];l({type:"SET_AI_CHAT_HISTORY",payload:I});try{const z=await zT(S,{decks:c,folders:h,series:d}),F={id:crypto.randomUUID(),role:"model",text:((U=z.find(V=>V.confirmationMessage))==null?void 0:U.confirmationMessage)||"Here are the actions I can perform for you.",actions:z};l({type:"SET_AI_CHAT_HISTORY",payload:[...i,w,F]})}catch(z){const F={id:crypto.randomUUID(),role:"model",text:z instanceof Error?z.message:"An unknown error occurred."};l({type:"SET_AI_CHAT_HISTORY",payload:[...i,w,F]})}},T=E=>{s(E),a()},_=E=>E.replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/```([\s\S]*?)```/g,'<pre class="bg-gray-800 text-white p-2 rounded my-2 overflow-x-auto text-xs"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-gray-200 dark:bg-gray-700 px-1 rounded text-sm font-mono">$1</code>').replace(/\n/g,"<br />");return n?u.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[60] flex flex-col items-center justify-end",onClick:a,children:[u.jsxs("div",{className:"bg-surface w-full max-w-2xl h-[70vh] max-h-[600px] rounded-t-2xl shadow-2xl flex flex-col transform transition-transform duration-300 animate-fade-in",style:{animationName:"slideUp",animationDuration:"0.3s"},onClick:E=>E.stopPropagation(),children:[u.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-bold text-text",children:"AI Assistant"})]}),u.jsx(Ye,{variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsx("main",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[i.map(E=>u.jsxs("div",{className:`flex gap-3 ${E.role==="user"?"justify-end":"justify-start"}`,children:[E.role==="model"&&u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),u.jsxs("div",{className:`max-w-md p-3 rounded-2xl ${E.role==="user"?"bg-primary text-on-primary rounded-br-lg":"bg-background rounded-bl-lg"}`,children:[E.isLoading?u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Yr,{size:"sm"}),u.jsx("span",{className:"text-text-muted",children:"Thinking..."})]}):u.jsx(O0,{html:_(E.text),className:"prose dark:prose-invert max-w-none text-sm"}),E.actions&&E.actions.length>0&&u.jsx("div",{className:"mt-3 pt-3 border-t border-border/50 flex flex-wrap gap-2",children:E.actions.map((S,w)=>S.action!=="NO_ACTION"&&u.jsx(Ye,{size:"sm",variant:"secondary",onClick:()=>T(S),children:S.confirmationMessage},w))})]})]},E.id)),u.jsx("div",{ref:v})]})}),u.jsx("footer",{className:"flex-shrink-0 p-4 border-t border-border",children:u.jsxs("form",{onSubmit:x,className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:m,onChange:E=>p(E.target.value),placeholder:"e.g., 'Rename my history deck...'",className:"flex-grow p-2 bg-background border border-border rounded-full focus:ring-2 focus:ring-primary focus:outline-none px-4",autoFocus:!0}),u.jsx(Ye,{type:"submit",variant:"primary",className:"rounded-full w-10 h-10 p-0","aria-label":"Send message",children:u.jsx(Fe,{name:"arrow-down",className:"w-5 h-5 -rotate-90"})})]})})]}),u.jsx("style",{children:`
              @keyframes slideUp {
                from { transform: translateY(100%); }
                to { transform: translateY(0); }
              }
            `})]}):null},FT=({isOpen:n,onClose:a,onRestore:s,files:i})=>{const[l,c]=H.useState(""),h=H.useRef(null);On(h,n);const d=()=>{l&&s(l)};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:h,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg transform transition-all relative max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Restore from Google Drive"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6 overflow-y-auto",children:[u.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"Select a backup file to restore. Restoring will overwrite decks with the same ID."}),i.length>0?u.jsx("div",{className:"space-y-2 border border-gray-200 dark:border-gray-700 rounded-md",children:i.map(m=>u.jsxs("label",{className:"flex items-center p-3 hover:bg-gray-100 dark:hover:bg-gray-700/50 cursor-pointer border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[u.jsx("input",{type:"radio",name:"backup-file",value:m.id,checked:l===m.id,onChange:()=>c(m.id),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 dark:border-gray-600 dark:bg-gray-900"}),u.jsxs("div",{className:"ml-3 text-sm",children:[u.jsx("p",{className:"font-medium text-gray-900 dark:text-gray-100",children:m.name}),u.jsxs("p",{className:"text-gray-500 dark:text-gray-400",children:["Last modified: ",new Date(m.modifiedTime).toLocaleString()]})]})]},m.id))}):u.jsx("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:u.jsx("p",{children:"No backup files found in your Google Drive application folder."})})]}),u.jsxs("div",{className:"flex-shrink-0 flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:a,className:"mr-2",children:"Cancel"}),u.jsx(Ye,{type:"button",variant:"danger",onClick:d,disabled:!l,children:"Restore Selected"})]})]})}):null},ab=n=>{var a,s;return n.type===Ue.Flashcard?((a=n.cards)==null?void 0:a.length)||0:((s=n.questions)==null?void 0:s.length)||0},mh=({label:n,localValue:a,remoteValue:s})=>u.jsxs("div",{className:"text-sm",children:[u.jsxs("span",{className:"font-semibold",children:[n,": "]}),u.jsx("span",{className:"text-text-muted",children:a}),u.jsx(Fe,{name:"arrow-down",className:"inline w-3 h-3 mx-1 rotate-[-90deg]"}),u.jsx("span",{className:"text-primary font-semibold",children:s})]}),GT=({isOpen:n,onClose:a,onResolve:s,comparison:i,remoteData:l})=>{const c=H.useRef(null);On(c,n);const{seriesProgress:h}=tt(),[d,m]=H.useState({decks:{},series:{}}),[p,v]=H.useState(null);H.useMemo(()=>{const E={decks:{},series:{}};i.changedDecks.forEach(S=>E.decks[S.local.id]="remote"),i.changedSeries.forEach(S=>E.series[S.local.id]="remote"),m(E)},[i]);const x=(E,S)=>{m(w=>({...w,[E]:{...w[E],[S]:w[E][S]==="local"?"remote":"local"}})),v("mixed")},T=E=>{const S={decks:{},series:{}};i.changedDecks.forEach(w=>S.decks[w.local.id]=E),i.changedSeries.forEach(w=>S.series[w.local.id]=E),m(S),v(E)},_=()=>{s(d,l)};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:c,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[90vh] flex flex-col",role:"alertdialog","aria-modal":"true","aria-labelledby":"conflict-title",children:[u.jsx("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:u.jsx("h2",{id:"conflict-title",className:"text-xl font-bold text-yellow-600 dark:text-yellow-400",children:"Sync Conflict"})}),u.jsxs("div",{className:"p-6 overflow-y-auto space-y-4",children:[u.jsx("p",{className:"text-text-muted",children:"Both your local data and the server data have changed since the last sync. Please choose which version to keep for each item."}),u.jsxs("div",{className:"flex gap-2 mb-4",children:[u.jsx(Ye,{variant:p==="local"?"primary":"secondary",size:"sm",onClick:()=>T("local"),children:"Keep All Local"}),u.jsx(Ye,{variant:p==="remote"?"primary":"secondary",size:"sm",onClick:()=>T("remote"),children:"Take All Remote"})]}),u.jsxs("div",{className:"space-y-6",children:[(i.newSeries.length>0||i.newDecks.length>0)&&u.jsxs("div",{children:[u.jsxs("h3",{className:"font-semibold text-text mb-2 flex items-center gap-2",children:[u.jsx(Fe,{name:"plus",className:"w-4 h-4 text-green-500"}),"New Items on Server (Will be added)"]}),u.jsxs("ul",{className:"text-sm list-disc list-inside text-text-muted bg-background p-3 rounded-md border border-border",children:[i.newSeries.map(E=>u.jsxs("li",{children:['Series: "',E.name,'"']},E.id)),i.newDecks.map(E=>u.jsxs("li",{children:['Deck: "',E.name,'"']},E.id))]})]}),i.changedSeries.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-text mb-2",children:"Changed Series"}),u.jsx("div",{className:"space-y-3",children:i.changedSeries.map(({local:E,backup:S})=>{var F,V;const w=(E.levels||[]).reduce((M,j)=>{var R;return M+(((R=j.deckIds)==null?void 0:R.length)||0)},0),O=(S.levels||[]).reduce((M,j)=>{var R;return M+(((R=j.deckIds)==null?void 0:R.length)||0)},0),I=((F=h.get(E.id))==null?void 0:F.size)||0,U=(((V=l.seriesProgress)==null?void 0:V[S.id])||[]).length,z=d.series[E.id]==="local";return u.jsxs("div",{className:`p-3 rounded-md border transition-colors cursor-pointer ${z?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,onClick:()=>x("series",E.id),children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("p",{className:"font-bold",children:E.name}),u.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${z?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:z?"Keeping Local":"Taking Server"})]}),u.jsx(mh,{label:"Progress",localValue:`${I}/${w}`,remoteValue:`${U}/${O}`}),u.jsx("p",{className:"text-xs text-text-muted mt-2 text-right",children:"Tap to toggle"})]},E.id)})})]}),i.changedDecks.length>0&&u.jsxs("div",{children:[u.jsx("h3",{className:"font-semibold text-text mb-2",children:"Changed Decks"}),u.jsx("div",{className:"space-y-3",children:i.changedDecks.map(({local:E,backup:S})=>{const w=i.dueCounts.get(`local-${E.id}`)||0,O=i.dueCounts.get(S.id)||0,I=d.decks[E.id]==="local";return u.jsxs("div",{className:`p-3 rounded-md border transition-colors cursor-pointer ${I?"bg-blue-50 dark:bg-blue-900/20 border-blue-200 dark:border-blue-800":"bg-green-50 dark:bg-green-900/20 border-green-200 dark:border-green-800"}`,onClick:()=>x("decks",E.id),children:[u.jsxs("div",{className:"flex justify-between items-center mb-2",children:[u.jsx("p",{className:"font-bold",children:E.name}),u.jsx("span",{className:`text-xs font-semibold px-2 py-1 rounded ${I?"bg-blue-100 text-blue-700":"bg-green-100 text-green-700"}`,children:I?"Keeping Local":"Taking Server"})]}),u.jsx(mh,{label:"Items",localValue:ab(E),remoteValue:ab(S)}),u.jsx(mh,{label:"Due",localValue:w,remoteValue:O}),u.jsx("p",{className:"text-xs text-text-muted mt-2 text-right",children:"Tap to toggle"})]},E.id)})})]})]})]}),u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"danger",onClick:a,children:"Cancel Sync"}),u.jsxs(Ye,{variant:"primary",onClick:_,children:[u.jsx(Fe,{name:"check-circle",className:"mr-2"}),"Resolve & Merge"]})]})]})}):null},sb=n=>{if(!n)return"";try{return new DOMParser().parseFromString(n,"text/html").body.textContent||""}catch{return String(n).replace(/<[^>]+>/g,"")}},J2=async(n,a=24e3)=>{const s=atob(n),i=s.length,l=new Uint8Array(i);for(let T=0;T<i;T++)l[T]=s.charCodeAt(T);const c=window.AudioContext||window.webkitAudioContext,h=new c({sampleRate:a}),d=new Int16Array(l.buffer),m=1,p=d.length/m,v=h.createBuffer(m,p,a);for(let T=0;T<m;T++){const _=v.getChannelData(T);for(let E=0;E<p;E++)_[E]=d[E*m+T]/32768}const x=h.createBufferSource();return x.buffer=v,x.connect(h.destination),x.start(),new Promise(T=>{x.onended=()=>{h.close(),T()}})},qT=({isOpen:n,onClose:a,actions:s})=>{const[i,l]=H.useState(""),[c,h]=H.useState(0),d=H.useRef(null),m=H.useRef(null),{navigate:p}=Rs(),v=Lh(),x=zh();On(d,n);const T=H.useMemo(()=>{const z=[];return s.forEach(F=>z.push({type:"action",id:F.id,label:F.label,icon:F.icon,run:F.action,keywords:F.keywords,searchableOnly:F.searchableOnly})),v.filter(F=>!F.archived&&!F.deletedAt).forEach(F=>z.push({type:"deck",id:F.id,name:F.name,itemType:F.type})),x.filter(F=>!F.archived&&!F.deletedAt).forEach(F=>z.push({type:"series",id:F.id,name:F.name})),v.filter(F=>!F.archived&&!F.deletedAt).forEach(F=>{F.type==="flashcard"?(F.cards||[]).forEach(V=>z.push({type:"card",id:V.id,deckId:F.id,deckName:F.name,front:V.front})):(F.questions||[]).forEach(V=>z.push({type:"question",id:V.id,deckId:F.id,deckName:F.name,text:V.questionText}))}),z},[s,v,x]),_=H.useMemo(()=>{if(!i.trim())return T.filter(V=>V.type==="action"&&!V.searchableOnly);const z=i.toLowerCase();return T.filter(V=>{switch(V.type){case"action":{const M=V,j=M.label.toLowerCase().includes(z),R=(M.keywords||[]).some(P=>P.toLowerCase().includes(z));return j||R}case"deck":return V.name.toLowerCase().includes(z);case"series":return V.name.toLowerCase().includes(z);case"card":return sb(V.front).toLowerCase().includes(z);case"question":return V.text.toLowerCase().includes(z);default:return!1}}).slice(0,50)},[i,T]),E=H.useMemo(()=>{const z={Actions:[],Series:[],Decks:[],Cards:[]};return _.forEach(F=>{F.type==="action"?z.Actions.push(F):F.type==="series"?z.Series.push(F):F.type==="deck"?z.Decks.push(F):(F.type==="card"||F.type==="question")&&z.Cards.push(F)}),Object.entries(z).filter(([,F])=>F.length>0)},[_]),S=H.useMemo(()=>E.flatMap(([,z])=>z),[E]),w=H.useCallback(z=>{switch(z.type){case"action":z.run();break;case"deck":p(`/decks/${z.id}`);break;case"series":p(`/series/${z.id}`);break;case"card":case"question":p(`/decks/${z.deckId}`);break}a()},[p,a]);H.useEffect(()=>{const z=F=>{if(n)if(F.key==="ArrowDown")F.preventDefault(),h(V=>(V+1)%(S.length||1));else if(F.key==="ArrowUp")F.preventDefault(),h(V=>(V-1+(S.length||1))%(S.length||1));else if(F.key==="Enter"){F.preventDefault();const V=S[c];V&&w(V)}else F.key==="Escape"&&a()};return window.addEventListener("keydown",z),()=>window.removeEventListener("keydown",z)},[n,c,S,w,a]),H.useEffect(()=>{n&&(l(""),h(0))},[n]),H.useEffect(()=>{h(0)},[i]),H.useEffect(()=>{var z;(z=document.getElementById(`cmdk-item-${c}`))==null||z.scrollIntoView({block:"nearest"})},[c]);const O=z=>{z.target===z.currentTarget&&a()};if(!n)return null;const I=(z,F)=>{let V,M="",j;switch(z.type){case"action":V=z.icon,M=z.label;break;case"deck":V="help-circle",z.itemType===Ue.Flashcard?V="laptop":z.itemType===Ue.Learning&&(V="layers"),M=z.name;break;case"series":V="layers",M=z.name;break;case"card":V="laptop",M=sb(z.front),j=`In: ${z.deckName}`;break;case"question":V="help-circle",M=z.text,j=`In: ${z.deckName}`;break}return u.jsxs("li",{id:`cmdk-item-${F}`,role:"option","aria-selected":c===F,onClick:()=>w(z),className:`flex items-center gap-4 px-4 py-3 cursor-pointer rounded-md ${c===F?"bg-primary/10":"hover:bg-border/30"}`,children:[u.jsx(Fe,{name:V,className:"w-5 h-5 text-text-muted flex-shrink-0"}),u.jsxs("div",{className:"flex-grow min-w-0",children:[u.jsx("p",{className:`font-medium truncate ${c===F?"text-primary":"text-text"}`,children:M}),j&&u.jsx("p",{className:`text-sm truncate ${c===F?"text-primary/80":"text-text-muted"}`,children:j})]})]},z.id)};let U=0;return u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-start pt-4 sm:pt-[15vh] z-[60] p-4",onClick:O,children:u.jsxs("div",{ref:d,role:"dialog","aria-modal":"true",className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[70vh] flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-border",children:[u.jsx(Fe,{name:"search",className:"w-5 h-5 text-text-muted"}),u.jsx("input",{type:"text",value:i,onChange:z=>l(z.target.value),placeholder:"Search for anything or type a command...",className:"w-full bg-transparent focus:outline-none text-lg placeholder:text-text-muted",autoFocus:!0}),u.jsx("div",{className:"hidden sm:block text-xs text-text-muted border border-border rounded px-1.5 py-0.5",children:"ESC"})]}),u.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:S.length>0?u.jsx("ul",{ref:m,role:"listbox",children:E.map(([z,F])=>u.jsxs("li",{children:[u.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-text-muted uppercase tracking-wider",children:z}),u.jsx("ul",{className:"space-y-1",children:F.map(V=>I(V,U++))})]},z))}):u.jsx("div",{className:"text-center py-10 px-4",children:u.jsxs("p",{className:"text-text-muted",children:['No results found for "',i,'".']})})}),u.jsx("div",{className:"hidden sm:flex flex-shrink-0 justify-end items-center p-2 border-t border-border",children:u.jsxs("span",{className:"text-sm text-text-muted",children:[u.jsx(Fe,{name:"terminal",className:"inline-block w-4 h-4 mr-2"}),u.jsx("kbd",{className:"font-sans",children:"Cmd+K"})," to toggle"]})})]})})},HT=({isOpen:n,onClose:a,onAddDeck:s})=>{const[i,l]=H.useState(""),{addToast:c}=Rn(),h=H.useRef(null);On(h,n);const d=`{
  "name": "New Quiz Deck Name",
  "description": "A description for the new deck.",
  "questions": [
    {
      "questionText": "What is 2+2?",
      "options": [{"id":"1","text":"4"}, {"id":"2","text":"3"}],
      "correctAnswerId": "1",
      "detailedExplanation": "It's basic math.",
      "tags": []
    }
  ]
}`,m=v=>{if(v.preventDefault(),!i.trim()){c("JSON content cannot be empty.","error");return}try{const x=xu(i);if(x.type!==Ue.Quiz){c("The provided JSON is not a valid Quiz Deck format.","error");return}const T={id:crypto.randomUUID(),name:x.data.name,description:x.data.description,type:Ue.Quiz,questions:x.data.questions.map(_=>({..._,id:crypto.randomUUID(),questionType:"multipleChoice",dueDate:new Date().toISOString(),interval:0,easeFactor:2.5,suspended:!1,detailedExplanation:_.detailedExplanation||"",options:_.options.map(E=>({id:E.id||crypto.randomUUID(),text:E.text,explanation:E.explanation}))}))};s(T),c(`Successfully created and added deck: "${T.name}"`,"success"),a()}catch(x){c(x instanceof Error?x.message:"Invalid JSON format.","error")}},p=v=>{if(v.key==="Tab"){v.preventDefault();const x=v.target,T=x.selectionStart,_=x.selectionEnd;x.value=x.value.substring(0,T)+"  "+x.value.substring(_),x.selectionStart=x.selectionEnd=T+2}};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsx("div",{ref:h,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:u.jsxs("form",{onSubmit:m,children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Add New Deck to Series"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"p-6",children:[u.jsx("label",{htmlFor:"json-content",className:"block text-sm font-medium text-text-muted mb-1",children:"Paste a complete quiz deck object in JSON format."}),u.jsx("textarea",{id:"json-content",value:i,onChange:v=>l(v.target.value),onKeyDown:p,rows:15,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none font-mono text-sm",placeholder:d})]}),u.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:a,className:"mr-2",children:"Cancel"}),u.jsx(Ye,{type:"submit",variant:"primary",children:"Create & Add Deck"})]})]})})}):null},PT=({isOpen:n,onClose:a,badJson:s,onRetry:i,onCancel:l})=>{const[c,h]=H.useState(s),{addToast:d}=Rn(),m=H.useRef(null);On(m,n);const p=()=>{try{const T=JSON.parse(c);i(T),a()}catch(T){d(`Still not valid JSON. ${T.message}`,"error")}},v=()=>{l(),a()},x=T=>{if(T.key==="Tab"){T.preventDefault();const _=T.target,E=_.selectionStart,S=_.selectionEnd;_.value=_.value.substring(0,E)+"  "+_.value.substring(S),_.selectionStart=_.selectionEnd=E+2}};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[70] p-4",children:u.jsxs("div",{ref:m,className:"bg-surface rounded-lg shadow-xl w-full max-w-3xl transform transition-all relative max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsx("h2",{className:"text-xl font-bold",children:"Fix AI Response"}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:v,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("div",{className:"flex-grow p-6 space-y-4 overflow-y-auto",children:[u.jsxs("div",{className:"bg-yellow-900/10 border border-yellow-500/30 rounded-lg p-4 text-sm text-yellow-800 dark:text-yellow-200",children:[u.jsxs("p",{children:[u.jsx("strong",{className:"font-bold",children:"Error:"})," The AI returned malformed JSON. This can happen if the response is too long and gets cut off. You can try to fix it manually below."]}),u.jsx("p",{className:"mt-2",children:'Common fixes include adding a missing closing quote (`"`) or bracket/brace (`]` or `}`).'})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"json-fix-content",className:"block text-sm font-medium text-text-muted mb-1",children:"Edit JSON response:"}),u.jsx("textarea",{id:"json-fix-content",value:c,onChange:T=>h(T.target.value),onKeyDown:x,rows:20,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none font-mono text-sm"})]})]}),u.jsxs("div",{className:"flex-shrink-0 flex justify-end p-4 bg-background/50 border-t border-border",children:[u.jsx(Ye,{type:"button",variant:"secondary",onClick:v,className:"mr-2",children:"Cancel"}),u.jsxs(Ye,{type:"button",variant:"primary",onClick:p,children:[u.jsx(Fe,{name:"refresh-ccw",className:"w-4 h-4 mr-2"}),"Retry with Fix"]})]})]})}):null},YT=({isOpen:n,onClose:a,params:s})=>{const[i,l]=H.useState([]),[c,h]=H.useState(!0),[d,m]=H.useState(""),[p,v]=H.useState({}),[x,T]=H.useState(""),{options:_}=Ou();Tu();const{addToast:E}=Rn(),{dispatch:S,deckSeries:w}=tt(),O=H.useRef(null),I=H.useRef(!1);H.useEffect(()=>{var V;(V=O.current)==null||V.scrollIntoView({behavior:"smooth"})},[i]),H.useEffect(()=>{if(!n){I.current=!1;return}if(I.current)return;I.current=!0,(async()=>{h(!0),l([]);const M=_.personas.find(P=>P.id===s.persona)||_.personas[0],j=s.seriesId?w[s.seriesId]:null,R=j?{name:j.name,description:j.description}:void 0;try{const{outline:P,metadata:re}=await V1(s,M,R);m(P),v(re),l([{id:crypto.randomUUID(),role:"model",text:`Here is a draft outline for your ${s.generationType.startsWith("series-")?"series":"deck"} on "${s.topic}":

${P}`}])}catch(P){const re=P instanceof Error?P.message:"Failed to generate initial outline.";E(re,"error"),l([{id:crypto.randomUUID(),role:"model",text:`Sorry, I couldn't generate an outline. Error: ${re}`}])}finally{h(!1)}})()},[n,s,_.personas,E,w]);const U=async V=>{V.preventDefault();const M=x.trim();if(!M||c)return;T("");const j={id:crypto.randomUUID(),role:"user",text:M},R=[...i,j];l(R),h(!0);const P=_.personas.find(re=>re.id===s.persona)||_.personas[0];try{const re=await $1(R,s,P);m(re),l(B=>[...B,{id:crypto.randomUUID(),role:"model",text:`Here is the refined outline:

${re}`}])}catch(re){const B=re instanceof Error?re.message:"Failed to refine outline.";E(B,"error"),l(X=>[...X,{id:crypto.randomUUID(),role:"model",text:`Sorry, I had trouble with that request. Error: ${B}`}])}finally{h(!1)}},z=async()=>{const V=crypto.randomUUID(),{generationType:M}=s;if(M.startsWith("series-")){const j={id:V,type:"generateFullSeriesFromScaffold",payload:{outline:d,generationType:s.generationType},statusText:`Generating series structure for "${s.topic}"`};S({type:"ADD_AI_TASK_TO_QUEUE",payload:j}),E("Series generation started. Check the status indicator below.","info")}else if(["deck-flashcard","deck-vocab","deck-atomic"].includes(M)){const j={id:V,type:"generateFlashcardDeckWithAI",payload:s,statusText:`Generating flashcards for "${s.topic}"`};S({type:"ADD_AI_TASK_TO_QUEUE",payload:j}),E("Flashcard generation started. Check the status indicator below.","info")}else if(["single-deck-learning","deck-course"].includes(M)){const j={id:V,type:"generateLearningDeckWithAI",payload:s,statusText:`Generating learning content for "${s.topic}"`};S({type:"ADD_AI_TASK_TO_QUEUE",payload:j}),E("Learning content generation started. Check the status indicator below.","info")}else if(["single-deck-quiz","quiz-blooms"].includes(M)){const j={id:V,type:"generateDeckFromOutline",payload:{outline:d,metadata:p,seriesId:s.seriesId,levelIndex:s.levelIndex},statusText:`Generating deck content for "${s.topic}"`};S({type:"ADD_AI_TASK_TO_QUEUE",payload:j}),E("Deck generation started. Check the status indicator below.","info")}a()},F=V=>V.replace(/^### (.*$)/gim,'<h3 class="text-lg font-bold mt-2">$1</h3>').replace(/^## (.*$)/gim,'<h2 class="text-xl font-bold mt-3 border-b border-border pb-1">$1</h2>').replace(/^# (.*$)/gim,'<h1 class="text-2xl font-bold mt-4 mb-2">$1</h1>').replace(/\*\*(.*?)\*\*/g,"<b>$1</b>").replace(/\*(.*?)\*/g,"<i>$1</i>").replace(/^- (.*$)/gim,'<li class="ml-4">$1</li>').replace(/```([\s\S]*?)```/g,'<pre class="bg-gray-800 text-white p-2 rounded my-2 overflow-x-auto text-xs"><code>$1</code></pre>').replace(/`([^`]+)`/g,'<code class="bg-gray-200 dark:bg-gray-700 px-1 rounded text-sm font-mono">$1</code>').replace(/\n/g,"<br />");return n?u.jsxs("div",{className:"fixed inset-0 bg-black/50 z-[70] flex flex-col items-center justify-end",onClick:a,children:[u.jsxs("div",{className:"bg-surface w-full max-w-3xl h-[85vh] max-h-[800px] rounded-t-2xl shadow-2xl flex flex-col transform transition-transform duration-300 animate-fade-in",style:{animationName:"slideUp",animationDuration:"0.3s"},onClick:V=>V.stopPropagation(),children:[u.jsxs("header",{className:"flex-shrink-0 flex items-center justify-between p-4 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-bold text-text",children:"AI Content Generation"})]}),u.jsx(Ye,{variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsx("main",{className:"flex-grow p-4 overflow-y-auto",children:u.jsxs("div",{className:"space-y-4",children:[i.map(V=>u.jsxs("div",{className:`flex gap-3 ${V.role==="user"?"justify-end":"justify-start"}`,children:[V.role==="model"&&u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),u.jsx("div",{className:`max-w-xl p-3 rounded-2xl ${V.role==="user"?"bg-primary text-on-primary rounded-br-lg":"bg-background rounded-bl-lg"}`,children:u.jsx(O0,{html:F(V.text),className:"prose dark:prose-invert max-w-none text-sm"})})]},V.id)),c&&u.jsxs("div",{className:"flex justify-start gap-3",children:[u.jsx(Fe,{name:"bot",className:"w-6 h-6 text-primary flex-shrink-0 mt-1"}),u.jsx("div",{className:"max-w-xl p-3 rounded-2xl bg-background rounded-bl-lg",children:u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Yr,{size:"sm"}),u.jsx("span",{className:"text-text-muted",children:"Thinking..."})]})})]}),u.jsx("div",{ref:O})]})}),u.jsxs("footer",{className:"flex-shrink-0 p-4 border-t border-border space-y-3",children:[u.jsxs("form",{onSubmit:U,className:"flex items-center gap-2",children:[u.jsx("input",{type:"text",value:x,onChange:V=>T(V.target.value),placeholder:"Refine the outline...",className:"flex-grow p-2 bg-background border border-border rounded-full focus:ring-2 focus:ring-primary focus:outline-none px-4",disabled:c}),u.jsx(Ye,{type:"submit",variant:"secondary",className:"rounded-full w-10 h-10 p-0","aria-label":"Send message",disabled:c,children:u.jsx(Fe,{name:"arrow-down",className:"w-5 h-5 -rotate-90"})})]}),u.jsxs("div",{className:"flex justify-end gap-2",children:[u.jsx(Ye,{variant:"secondary",onClick:a,disabled:c,children:"Cancel"}),u.jsxs(Ye,{variant:"primary",onClick:z,disabled:c||i.length===0,children:[u.jsx(Fe,{name:"zap",className:"w-5 h-5 mr-2"}),`Generate ${s.generationType.startsWith("series-")?"Series":"Deck"}`]})]})]})]}),u.jsx("style",{children:`
              @keyframes slideUp {
                from { transform: translateY(100%); }
                to { transform: translateY(0); }
              }
            `})]}):null},VT=({isOpen:n,onClose:a,deck:s,onUpdateDeck:i})=>{const[l,c]=H.useState("analyzing"),[h,d]=H.useState([]),[m,p]=H.useState(new Set),{addToast:v}=Rn(),x=H.useRef(null);On(x,n),H.useEffect(()=>{n&&l==="analyzing"&&(async()=>{try{const S=await rw(s);d(S),p(new Set(S.map(w=>w.id))),c("review")}catch{v("Analysis failed. Please try again.","error"),a()}})()},[n,s,v,a,l]);const T=E=>{const S=new Set(m);S.has(E)?S.delete(E):S.add(E),p(S)},_=async()=>{c("applying");try{const E=h.filter(w=>m.has(w.id)),S=await aw(s,E);i(S,{toastMessage:"Deck improvements applied successfully!"}),a()}catch{v("Failed to apply improvements.","error"),c("review")}};return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[70] p-4",children:u.jsxs("div",{ref:x,className:"bg-surface rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative flex flex-col max-h-[90vh]",children:[u.jsxs("header",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-border",children:[u.jsxs("div",{className:"flex items-center gap-2",children:[u.jsx(Fe,{name:"zap",className:"w-6 h-6 text-primary"}),u.jsx("h2",{className:"text-xl font-bold text-text",children:"AI Deck Analyzer"})]}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsxs("main",{className:"flex-grow p-6 overflow-y-auto",children:[l==="analyzing"&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[u.jsx(Yr,{size:"lg"}),u.jsx("p",{className:"mt-4 text-lg font-medium text-text",children:"Analyzing deck content..."}),u.jsx("p",{className:"text-sm text-text-muted",children:"Checking for accuracy, clarity, and formatting."})]}),l==="applying"&&u.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[u.jsx(Yr,{size:"lg"}),u.jsx("p",{className:"mt-4 text-lg font-medium text-text",children:"Applying improvements..."}),u.jsx("p",{className:"text-sm text-text-muted",children:"Rewriting content based on your selection."})]}),l==="review"&&u.jsxs("div",{className:"space-y-4",children:[u.jsxs("div",{className:"flex justify-between items-center",children:[u.jsxs("p",{className:"text-text-muted",children:["Found ",h.length," suggestion",h.length!==1?"s":"","."]}),u.jsxs("div",{className:"text-sm space-x-2",children:[u.jsx("button",{onClick:()=>p(new Set(h.map(E=>E.id))),className:"text-primary hover:underline",children:"Select All"}),u.jsx("button",{onClick:()=>p(new Set),className:"text-text-muted hover:underline",children:"Deselect All"})]})]}),h.length===0?u.jsxs("div",{className:"text-center py-10 border-2 border-dashed border-border rounded-lg",children:[u.jsx(Fe,{name:"check-circle",className:"w-12 h-12 text-green-500 mx-auto mb-2"}),u.jsx("p",{className:"text-text font-medium",children:"No issues found!"}),u.jsx("p",{className:"text-text-muted text-sm",children:"Your deck looks great."})]}):u.jsx("ul",{className:"space-y-3",children:h.map(E=>u.jsxs("li",{className:"p-4 bg-background rounded-lg border border-border flex gap-4",children:[u.jsx("div",{className:"pt-1",children:u.jsx("input",{type:"checkbox",checked:m.has(E.id),onChange:()=>T(E.id),className:"w-5 h-5 text-primary rounded border-gray-300 focus:ring-primary cursor-pointer"})}),u.jsxs("div",{className:"flex-grow",children:[u.jsxs("div",{className:"flex justify-between items-start",children:[u.jsx("h4",{className:"font-bold text-text",children:E.title}),u.jsx("span",{className:"text-xs px-2 py-1 rounded-full bg-surface border border-border font-medium uppercase tracking-wider text-text-muted",children:E.category})]}),u.jsx("p",{className:"text-sm text-text mt-1",children:E.description}),u.jsxs("p",{className:"text-xs text-text-muted mt-2 italic",children:['"',E.rationale,'"']})]})]},E.id))})]})]}),u.jsx("footer",{className:"flex-shrink-0 p-4 border-t border-border flex justify-end gap-2 bg-background/50",children:l==="review"&&u.jsxs(u.Fragment,{children:[u.jsx(Ye,{variant:"secondary",onClick:a,children:"Cancel"}),u.jsxs(Ye,{variant:"primary",onClick:_,disabled:m.size===0,children:["Apply ",m.size," Improvement",m.size!==1?"s":""]})]})})]})}):null},$T=(n,a,s,i)=>{const l=[],c=[];n.forEach(m=>{if(m.suspended)return;const p={id:m.id,dueDate:m.dueDate,interval:m.interval,easeFactor:m.easeFactor,lapses:m.lapses,isNew:m.interval===0};p.isNew?c.push(p):l.push(p)});const h=[],d=new Date;d.setHours(0,0,0,0);for(let m=0;m<a;m++){const p=new Date(d);p.setDate(d.getDate()+m),p.getTime();const v=new Date(p).setHours(23,59,59,999),x=[],T=[];l.forEach(S=>{new Date(S.dueDate).getTime()<=v?x.push(S):T.push(S)});const _=[];x.forEach(S=>{const O=Math.random()<i?Sr.Good:Sr.Again;let I=0,U=S.easeFactor;O===Sr.Again?(I=1,U=Math.max(1.3,S.easeFactor-.2)):(U=S.easeFactor,S.interval===0?I=1:I=Math.ceil(S.interval*S.easeFactor));const z=new Date(p);z.setDate(p.getDate()+I);const F={...S,interval:I,easeFactor:U,dueDate:z.toISOString(),isNew:!1};_.push(F)}),_.forEach(S=>T.push(S)),l.length=0,T.forEach(S=>l.push(S));const E=Math.min(s,c.length);for(let S=0;S<E;S++){const w=c.shift();if(w){const O=new Date(p);O.setDate(p.getDate()+1);const I={...w,interval:1,dueDate:O.toISOString(),isNew:!1};l.push(I)}}h.push({day:m,date:p.toLocaleDateString(void 0,{month:"short",day:"numeric"}),reviewCount:x.length,newCount:E,totalLoad:x.length+E})}return h},ZT=({data:n})=>{if(n.length===0)return null;const a=Math.max(...n.map(v=>v.totalLoad),10),s=500,i=250,l={top:20,right:10,bottom:30,left:40},c=s-l.left-l.right,h=i-l.top-l.bottom,d=n,m=Math.max(2,c/d.length-1),p=v=>h-v/a*h;return u.jsxs("svg",{viewBox:`0 0 ${s} ${i}`,className:"w-full h-full overflow-visible",children:[[0,.25,.5,.75,1].map(v=>{const x=Math.round(a*v),T=p(x)+l.top;return u.jsxs("g",{children:[u.jsx("line",{x1:l.left,y1:T,x2:s-l.right,y2:T,className:"stroke-border/50",strokeDasharray:"3,3"}),u.jsx("text",{x:l.left-5,y:T+4,className:"text-[10px] fill-text-muted",textAnchor:"end",children:x})]},v)}),d.map((v,x)=>{const T=l.left+x*(c/d.length),_=p(v.totalLoad)+l.top,E=h-p(v.totalLoad),S=v.newCount/v.totalLoad*E||0,w=E-S,O=_,I=_+S;return u.jsxs("g",{className:"group",children:[u.jsx("title",{children:`${v.date}: ${v.reviewCount} reviews + ${v.newCount} new = ${v.totalLoad} total`}),v.newCount>0&&u.jsx("rect",{x:T,y:O,width:m,height:S,className:"fill-blue-400 dark:fill-blue-500 hover:fill-blue-300 transition-colors"}),v.reviewCount>0&&u.jsx("rect",{x:T,y:I,width:m,height:w,className:"fill-green-500 dark:fill-green-600 hover:fill-green-400 transition-colors"})]},x)}),d.map((v,x)=>x%Math.ceil(d.length/5)===0?u.jsx("text",{x:l.left+x*(c/d.length)+m/2,y:i-10,className:"text-[10px] fill-text-muted",textAnchor:"middle",children:v.date},x):null)]})},QT=({isOpen:n,onClose:a,items:s})=>{const[i,l]=H.useState(30),[c,h]=H.useState(0),[d,m]=H.useState(90),[p,v]=H.useState(!1),[x,T]=H.useState([]),_=H.useRef(null);On(_,n),H.useEffect(()=>{if(!n)return;v(!0);const S=setTimeout(()=>{const w=$T(s,i,c,d/100);T(w),v(!1)},100);return()=>clearTimeout(S)},[i,c,d,s,n]);const E=H.useMemo(()=>{if(x.length===0)return null;const S=Math.max(...x.map(I=>I.totalLoad)),w=Math.round(x.reduce((I,U)=>I+U.totalLoad,0)/x.length),O=x.reduce((I,U)=>I+U.newCount,0);return{maxLoad:S,avgLoad:w,totalNew:O}},[x]);return n?u.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:u.jsxs("div",{ref:_,className:"bg-surface rounded-lg shadow-xl w-full max-w-3xl transform transition-all relative max-h-[90vh] flex flex-col",children:[u.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[u.jsxs("h2",{className:"text-xl font-bold text-text flex items-center gap-2",children:[u.jsx(Fe,{name:"trending-up",className:"text-primary"})," Workload Simulator"]}),u.jsx(Ye,{type:"button",variant:"ghost",onClick:a,className:"p-1 h-auto",children:u.jsx(Fe,{name:"x"})})]}),u.jsx("div",{className:"p-6 overflow-y-auto flex-grow space-y-6",children:u.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[u.jsxs("div",{className:"space-y-4 md:col-span-1 border-b md:border-b-0 md:border-r border-border pb-4 md:pb-0 md:pr-4",children:[u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-text-muted mb-1",children:["Duration: ",i," days"]}),u.jsx("input",{type:"range",min:"7",max:"180",step:"7",value:i,onChange:S=>l(Number(S.target.value)),className:"w-full accent-primary"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-text-muted mb-1",children:["New Cards / Day: ",c]}),u.jsx("input",{type:"range",min:"0",max:"50",step:"5",value:c,onChange:S=>h(Number(S.target.value)),className:"w-full accent-primary"})]}),u.jsxs("div",{children:[u.jsxs("label",{className:"block text-sm font-medium text-text-muted mb-1",children:["Est. Retention: ",d,"%"]}),u.jsx("input",{type:"range",min:"70",max:"99",step:"1",value:d,onChange:S=>m(Number(S.target.value)),className:"w-full accent-primary"})]}),E&&u.jsxs("div",{className:"bg-background rounded-lg p-3 space-y-2 text-sm border border-border",children:[u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-text-muted",children:"Peak Load:"}),u.jsx("span",{className:"font-bold text-text",children:E.maxLoad})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-text-muted",children:"Average Load:"}),u.jsx("span",{className:"font-bold text-text",children:E.avgLoad})]}),u.jsxs("div",{className:"flex justify-between",children:[u.jsx("span",{className:"text-text-muted",children:"Total New:"}),u.jsx("span",{className:"font-bold text-blue-500",children:E.totalNew})]})]})]}),u.jsxs("div",{className:"md:col-span-2 h-64 md:h-auto flex flex-col",children:[u.jsxs("div",{className:"flex items-center gap-4 text-xs text-text-muted mb-2 justify-end",children:[u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"w-3 h-3 bg-blue-400 rounded-sm"})," New Cards"]}),u.jsxs("div",{className:"flex items-center gap-1",children:[u.jsx("span",{className:"w-3 h-3 bg-green-500 rounded-sm"})," Reviews"]})]}),u.jsx("div",{className:"flex-grow relative bg-background/50 rounded-lg border border-border p-2",children:p?u.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-surface/50 backdrop-blur-sm",children:u.jsx(Yr,{size:"lg"})}):u.jsx(ZT,{data:x})}),u.jsx("p",{className:"text-xs text-text-muted mt-2 text-center",children:"This is a projection based on the SM-2 algorithm. Actual workload may vary."})]})]})}),u.jsx("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border",children:u.jsx(Ye,{type:"button",variant:"primary",onClick:a,children:"Done"})})]})}):null},JT=({driveFiles:n})=>{const{modalType:a,modalPayload:s,closeModal:i,openModal:l}=Dl(),c=Tu(),{aiChatHistory:h}=tt(),d=Lh(),{navigate:m}=Rs();if(!a)return null;const p=s||{},v=()=>d.reduce((x,T)=>T.type===Ue.Flashcard?x.concat(T.cards||[]):x.concat(T.questions||[]),[]);return u.jsxs(u.Fragment,{children:[a==="import"&&u.jsx(dw,{isOpen:!0,onClose:i,onAddDecks:c.handleAddDecks,onAddSeriesWithDecks:c.handleAddSeriesWithDecks}),a==="restore"&&u.jsx(hw,{isOpen:!0,onClose:i,onCompare:c.handleCompareBackup,onRestoreSelected:c.handleRestoreSelectedItems,file:p.file,onFullRestore:c.onRestoreData,openConfirmModal:x=>l("confirm",x)}),a==="resetProgress"&&u.jsx(pw,{isOpen:!0,onClose:i,onReset:c.handleResetDeckProgress,decks:d}),a==="confirm"&&u.jsx(mw,{isOpen:!0,onClose:i,...p}),a==="folder"&&u.jsx(gw,{isOpen:!0,onClose:i,onSave:c.handleSaveFolder,folder:p.folder==="new"?null:p.folder}),a==="series"&&u.jsx(yw,{isOpen:!0,onClose:i,onSave:c.handleSaveSeries,series:p.series==="new"?null:p.series}),a==="aiGeneration"&&u.jsx(_w,{isOpen:!0,onClose:i,onStartAIGeneration:c.handleStartAIGeneration,initialTopic:p.initialTopic,context:p.context}),a==="aiGenerationChat"&&u.jsx(YT,{isOpen:!0,onClose:i,params:p.params}),a==="aiStatus"&&u.jsx(Sw,{isOpen:!0,onClose:i,onCancel:c.handleCancelAIGeneration}),a==="serverBackup"&&u.jsx(pT,{isOpen:!0,onClose:i,onRestore:c.handleRestoreFromServerBackup,onDelete:c.handleDeleteServerBackup}),a==="droppedFile"&&u.jsx(mT,{isOpen:!0,onClose:i,onConfirm:c.handleDroppedFileConfirm,analysis:p.analysis}),a==="aiChat"&&u.jsx(BT,{isOpen:!0,onClose:i,onExecuteAction:c.handleExecuteAIAction,history:h}),a==="restoreFromDrive"&&u.jsx(FT,{isOpen:!0,onClose:i,onRestore:c.handleRestoreFromDrive,files:n}),a==="addDeckToSeries"&&u.jsx(HT,{isOpen:!0,onClose:i,onAddDeck:x=>c.handleAddDeckToSeries(p.seriesId,x)}),a==="mergeConflict"&&u.jsx(GT,{isOpen:!0,onClose:i,onResolve:c.handleMergeResolution,comparison:p.comparison,remoteData:p.remoteData}),a==="commandPalette"&&u.jsx(qT,{isOpen:!0,onClose:i,actions:[{id:"import",label:"Create / Import Deck",icon:"plus",action:()=>l("import"),keywords:["new","add"]},{id:"settings",label:"Settings",icon:"settings",action:()=>m("/settings")},{id:"trash",label:"View Trash",icon:"trash-2",action:()=>m("/trash")},{id:"archive",label:"View Archive",icon:"archive",action:()=>m("/archive")},{id:"progress",label:"View Progress",icon:"trending-up",action:()=>m("/progress")},{id:"simulate",label:"Simulate Workload",icon:"trending-up",action:()=>l("workloadSimulator")}]}),a==="aiResponseFix"&&u.jsx(PT,{isOpen:!0,onClose:i,...p}),a==="deckAnalysis"&&u.jsx(VT,{isOpen:!0,onClose:i,deck:p.deck,onUpdateDeck:c.handleUpdateDeck}),a==="workloadSimulator"&&u.jsx(QT,{isOpen:!0,onClose:i,items:v()})]})},KT=({onOpen:n,onCancel:a})=>{const{currentTask:s,queue:i}=tt(p=>p.aiGenerationStatus),{aiFeaturesEnabled:l}=js(),c=s!==null,h=(i==null?void 0:i.length)||0,d=(c?1:0)+h;if(!l||d===0)return null;const m=(s==null?void 0:s.statusText)||`${h} task(s) queued...`;return u.jsx("div",{className:"fixed bottom-6 left-6 z-40",children:u.jsxs("button",{onClick:n,className:"bg-surface rounded-lg shadow-lg flex items-center p-2 gap-3 transition-all hover:shadow-xl animate-fade-in","aria-label":"View AI generation status",children:[u.jsxs("div",{className:"relative w-10 h-10 flex items-center justify-center",children:[u.jsx("svg",{className:"absolute w-full h-full",style:{animation:c?"spin 1.5s linear infinite":"none"},viewBox:"0 0 24 24",children:u.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none",className:c?"text-primary/50":"text-text-muted/50",strokeDasharray:c?"40 100":"5 15"})}),u.jsx(Fe,{name:"bot",className:`w-6 h-6 ${c?"text-primary":"text-text-muted"}`})]}),u.jsxs("div",{className:"flex flex-col text-left pr-2",children:[u.jsx("span",{className:"font-semibold text-sm text-text",children:c?"AI is working...":"AI Queue"}),u.jsx("span",{className:"text-xs text-text-muted truncate max-w-[200px]",title:m,children:m})]}),d>0&&u.jsx("div",{className:"bg-primary text-on-primary text-xs font-bold rounded-full h-6 w-6 flex items-center justify-center self-center mr-2",children:d})]})})},XT=()=>{const{openModal:n}=Dl(),{aiFeaturesEnabled:a}=js(),s=()=>{n("aiChat")};return a?u.jsx("div",{className:"fixed bottom-6 right-6 z-40 animate-fade-in",children:u.jsx(Ye,{variant:"primary",onClick:s,className:"rounded-full w-16 h-16 shadow-lg flex items-center justify-center","aria-label":"Open AI Assistant",children:u.jsx(Fe,{name:"bot",className:"w-8 h-8"})})}):null},WT=()=>{const n=()=>{const i=navigator,l=i.connection;return{isOnline:i.onLine,isMetered:l?l.type==="cellular"||l.saveData===!0:!1}},[a,s]=H.useState(n);return H.useEffect(()=>{const i=()=>s(n()),c=navigator.connection;return window.addEventListener("online",i),window.addEventListener("offline",i),c==null||c.addEventListener("change",i),()=>{window.removeEventListener("online",i),window.removeEventListener("offline",i),c==null||c.removeEventListener("change",i)}},[]),a},e2=()=>{const{isOnline:n}=WT();return n?null:u.jsx("div",{role:"status","aria-live":"assertive",title:"You are currently offline",className:"fixed bottom-6 right-6 z-50 bg-surface rounded-full w-12 h-12 shadow-lg flex items-center justify-center border-2 border-border animate-fade-in",children:u.jsx(Fe,{name:"wifi-off",className:"w-6 h-6 text-text-muted"})})},t2=({pullDistance:n,isRefreshing:a,threshold:s})=>{if(a)return u.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-50 transition-all duration-300",children:u.jsx(Yr,{size:"md"})});if(n<=0)return null;const i=Math.min(n/s,1),l=i>=1,c=Math.min(.5+i*.5,1),h=20,d=2*Math.PI*h,m=d-i*d;return u.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-10 pointer-events-none",style:{transform:`translateY(${Math.min(n,s*1.5)-80}px) scale(${c})`,opacity:Math.min(n/(s/2),1)},children:u.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-800 rounded-full shadow-lg transition-transform duration-200",style:{transform:l?"scale(1.1)":"scale(1)"},children:[u.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",viewBox:"0 0 44 44",children:[u.jsx("circle",{className:"text-gray-300/50 dark:text-gray-600/50",stroke:"currentColor",strokeWidth:"4",fill:"transparent",r:h,cx:"22",cy:"22"}),u.jsx("circle",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",fill:"transparent",r:h,cx:"22",cy:"22",style:{strokeDasharray:d,strokeDashoffset:m,transition:l?"stroke-dashoffset 0.1s linear":"none"}})]}),u.jsx(Fe,{name:l?"refresh-ccw":"arrow-down",className:`w-6 h-6 transition-colors duration-200 ${l?"text-blue-500":"text-gray-500 dark:text-gray-400"}`})]})})},Nn={...sT},Hr=(n,a,s)=>{const i=new Date;i.setHours(0,0,0,0);const l=a.map(h=>({id:crypto.randomUUID(),text:h.text,explanation:h.explanation})),c=l[a.findIndex(h=>h.correct)];if(!c)throw new Error(`No correct option specified for question: "${n}"`);return{id:crypto.randomUUID(),questionType:"multipleChoice",questionText:n,tags:["nature","sample"],detailedExplanation:s,options:l,correctAnswerId:c.id,dueDate:i.toISOString(),interval:0,easeFactor:Er,suspended:!1,masteryLevel:0,lastReviewed:void 0}},n2=()=>{const n={id:crypto.randomUUID(),name:"Level 1.1: Simple Addition",description:"Practice basic addition problems.",type:Ue.Quiz,questions:[Hr("What is 1 + 1?",[{text:"2",correct:!0},{text:"1"},{text:"3"}],"1 plus 1 equals 2."),Hr("What is 2 + 3?",[{text:"5",correct:!0},{text:"4"},{text:"6"}],"2 plus 3 equals 5."),Hr("What is 5 + 4?",[{text:"9",correct:!0},{text:"8"},{text:"10"}],"5 plus 4 equals 9.")]},a={id:crypto.randomUUID(),name:"Level 1.2: Simple Subtraction",description:"Practice basic subtraction problems.",type:Ue.Quiz,questions:[Hr("What is 5 - 2?",[{text:"3",correct:!0},{text:"2"},{text:"4"}],"5 minus 2 equals 3."),Hr("What is 10 - 4?",[{text:"6",correct:!0},{text:"5"},{text:"7"}],"10 minus 4 equals 6.")]},s={id:crypto.randomUUID(),name:"Level 2.1: Simple Multiplication",description:"Practice basic multiplication problems.",type:Ue.Quiz,questions:[Hr("What is 2 * 3?",[{text:"6",correct:!0},{text:"5"},{text:"8"}],"2 times 3 is 6."),Hr("What is 4 * 5?",[{text:"20",correct:!0},{text:"15"},{text:"25"}],"4 times 5 is 20.")]},i=[n,a,s];return{series:{id:crypto.randomUUID(),type:"series",name:"Sample: Basic Math Series",description:"A sample series to demonstrate the progressive learning path feature. Complete each deck to unlock the next!",levels:[{title:"Level 1: Fundamentals",deckIds:[n.id,a.id]},{title:"Level 2: Next Steps",deckIds:[s.id]}],createdAt:new Date().toISOString()},decks:i}},ib=()=>{const n=[Hr("Which process allows plants to convert light energy into chemical energy?",[{text:"Respiration"},{text:"Photosynthesis",correct:!0},{text:"Transpiration"},{text:"Germination"}],"Photosynthesis is the vital process used by plants, algae, and certain bacteria to harness energy from sunlight and turn it into chemical energy in the form of glucose."),Hr("What is the largest rainforest in the world?",[{text:"The Congo Rainforest"},{text:"The Valdivian Temperate Rainforest"},{text:"The Daintree Rainforest"},{text:"The Amazon Rainforest",correct:!0}],"The Amazon Rainforest is the world's largest tropical rainforest, famed for its biodiversity. It spans across nine countries in South America."),Hr("What type of rock is formed from the cooling and solidification of magma or lava?",[{text:"Igneous Rock",correct:!0},{text:"Sedimentary Rock"},{text:"Metamorphic Rock"},{text:"Sandstone"}],"Igneous rock is formed through the cooling and solidification of magma (molten rock below the surface) or lava (molten rock on the surface). Examples include granite and basalt."),Hr("Which layer of the Earth's atmosphere is closest to the surface?",[{text:"Stratosphere"},{text:"Mesosphere"},{text:"Troposphere",correct:!0},{text:"Thermosphere"}],"The Troposphere is the lowest layer of Earth's atmosphere, and is also where nearly all weather conditions take place. It contains about 75% of the atmosphere's mass."),Hr("What is the name for the process of water movement through a plant and its evaporation from aerial parts, such as leaves, stems and flowers?",[{text:"Condensation"},{text:"Precipitation"},{text:"Transpiration",correct:!0},{text:"Photosynthesis"}],"Transpiration is essentially evaporation of water from plant leaves. It is a key part of the water cycle, and an important process in plant life.")];return{id:crypto.randomUUID(),name:"Sample: Wonders of Nature",description:"A sample quiz deck to introduce you to CogniFlow. Test your knowledge about the natural world!",type:Ue.Quiz,questions:n,lastOpened:new Date().toISOString()}},r2=()=>({id:crypto.randomUUID(),name:"Sample: Spanish Basics",description:"Common Spanish words and phrases.",type:Ue.Flashcard,cards:[{id:crypto.randomUUID(),front:"Hola",back:"Hello",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0},{id:crypto.randomUUID(),front:"Gracias",back:"Thank you",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0},{id:crypto.randomUUID(),front:"Por favor",back:"Please",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0},{id:crypto.randomUUID(),front:"Buenos das",back:"Good morning",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0},{id:crypto.randomUUID(),front:"Amigo",back:"Friend",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,masteryLevel:0,lapses:0}],lastOpened:new Date().toISOString()}),a2=()=>{const n=crypto.randomUUID(),a=crypto.randomUUID(),s=crypto.randomUUID(),i=crypto.randomUUID(),l=[{id:n,content:`<h3>Digital Photography: The Exposure Triangle</h3><p>Exposure is determined by three key elements, often called the "Exposure Triangle":</p><ul><li><b>Aperture:</b> The size of the lens opening (f-stop). Controls depth of field.</li><li><b>Shutter Speed:</b> How long the sensor is exposed to light. Controls motion blur.</li><li><b>ISO:</b> The sensor's sensitivity to light. Controls digital noise.</li></ul><p>Balancing these three is the key to a properly exposed image.</p>`,unlocksQuestionIds:[s]},{id:a,content:"<h3>Digital Photography: Composition</h3><p>Good composition guides the viewer's eye. One of the most fundamental rules is the <b>Rule of Thirds</b>.</p><p>Imagine breaking an image down into thirds (both horizontally and vertically) so that you have 9 parts. The rule suggests that you should place key elements of your scene along these lines or at their intersections.</p>",unlocksQuestionIds:[i]}],c=[{id:s,questionType:"multipleChoice",questionText:"Which element of the exposure triangle primarily controls depth of field (how much of the scene is in focus)?",options:[{id:crypto.randomUUID(),text:"ISO",explanation:"ISO controls sensitivity and noise."},{id:crypto.randomUUID(),text:"Shutter Speed",explanation:"Shutter speed controls motion blur."},{id:crypto.randomUUID(),text:"Aperture",explanation:"Correct! A wide aperture (low f-number) creates a shallow depth of field."}],correctAnswerId:"",detailedExplanation:"Aperture refers to the opening of the lens's diaphragm through which light travels. Large openings (small f-numbers) create a shallow depth of field (blurry background), while small openings (large f-numbers) keep more in focus.",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,suspended:!1,masteryLevel:0,lapses:0,infoCardIds:[n]},{id:i,questionType:"multipleChoice",questionText:"According to the Rule of Thirds, where is the best place to put your main subject?",options:[{id:crypto.randomUUID(),text:"Dead center",explanation:"Centering is valid but can be static. The Rule of Thirds suggests off-center placement."},{id:crypto.randomUUID(),text:"At the intersections of the grid lines",explanation:'Correct! These "power points" create a more balanced and interesting image.'},{id:crypto.randomUUID(),text:"In the extreme corner",explanation:"This can make the subject feel like it is falling out of the frame."}],correctAnswerId:"",detailedExplanation:"The Rule of Thirds grid creates four intersection points. Placing your subject on one of these points generally creates a more energetic and interesting composition than simply centering the subject.",dueDate:new Date().toISOString(),interval:0,easeFactor:Er,suspended:!1,masteryLevel:0,lapses:0,infoCardIds:[a]}];return c[0].correctAnswerId=c[0].options[2].id,c[1].correctAnswerId=c[1].options[1].id,{id:crypto.randomUUID(),name:"Sample: Photography Basics",description:"A mini-course covering exposure and composition fundamentals.",type:Ue.Learning,infoCards:l,questions:c,learningMode:"separate",lastOpened:new Date().toISOString()}};function Qh(n,a,s){const i=new Blob([n],{type:s}),l=URL.createObjectURL(i),c=document.createElement("a");c.style.display="none",c.href=l,c.download=a,document.body.appendChild(c),c.click(),window.URL.revokeObjectURL(l),document.body.removeChild(c)}function Jh(n){return n.replace(/[^a-z0-9 -]/gi,"_").replace(/\s+/g,"-").toLowerCase().substring(0,30)}const s2=n=>{let a;const s=`cogniflow-deck-${Jh(n.name)}.json`;if(n.type===Ue.Flashcard)a=(n.cards||[]).map(h=>({front:h.front,back:h.back}));else if(n.type===Ue.Quiz||n.type===Ue.Learning){const l=n;a={name:l.name,description:l.description,questions:(l.questions||[]).map(h=>({questionType:h.questionType,questionText:h.questionText,options:(h.options||[]).map(d=>({id:d.id,text:d.text,explanation:d.explanation})),correctAnswerId:h.correctAnswerId,detailedExplanation:h.detailedExplanation,tags:h.tags}))}}else throw new Error(`Unsupported deck type for export: ${n.type}`);const i=JSON.stringify(a,null,2);Qh(i,s,"application/json")},i2=n=>{if(n.type!==Ue.Flashcard)throw new Error("CSV export is currently only supported for Flashcard decks.");const s=(n.cards||[]).map(c=>({Front:c.front,Back:c.back})),i=Ub.unparse(s),l=`cogniflow-deck-${Jh(n.name)}.csv`;Qh(i,l,"text/csv")},o2=(n,a)=>{const s=new Map,i=new Set((n.levels||[]).flatMap(m=>(m==null?void 0:m.deckIds)||[]));a.forEach(m=>{i.has(m.id)&&s.set(m.id,m)});const l=(n.levels||[]).map(m=>{const p=(m.deckIds||[]).map(v=>s.get(v)).filter(v=>!!v).map(v=>{if(v.type===Ue.Flashcard){const x=v;return{type:Ue.Flashcard,name:x.name,description:x.description,cards:(x.cards||[]).map(T=>({front:T.front,back:T.back}))}}else if(v.type===Ue.Quiz||v.type===Ue.Learning){const x=v;return{type:Ue.Quiz,name:x.name,description:x.description,questions:(x.questions||[]).map(T=>({questionType:T.questionType,questionText:T.questionText,options:(T.options||[]).map(_=>({id:_.id,text:_.text,explanation:_.explanation})),correctAnswerId:T.correctAnswerId,detailedExplanation:T.detailedExplanation,tags:T.tags}))}}return null}).filter(Boolean);return{title:m.title,decks:p}}),c={seriesName:n.name,seriesDescription:n.description,levels:l},h=`cogniflow-series-${Jh(n.name)}.json`,d=JSON.stringify(c,null,2);Qh(d,h,"application/json")},l2=({triggerSync:n,openConfirmModal:a})=>{const{dispatch:s}=tt(),{addToast:i}=Rn(),l=H.useCallback(async M=>{const j=Object.values(tt.getState().decks),R=new Set(j.map(re=>re.name)),P=M.map(re=>{let B=re.name,X=1;for(;R.has(B);)B=`${re.name} (Copy ${X})`,X++;return R.add(B),{...re,name:B}});s({type:"ADD_DECKS",payload:P});try{await Nn.addDecks(P),n({isManual:!1})}catch(re){i("Error saving new deck(s).","error"),console.error(re)}},[s,i,n]),c=H.useCallback(async(M,j)=>{const R={...M,lastModified:Date.now()};s({type:"UPDATE_DECK",payload:R});try{await Nn.updateDeck(R),j!=null&&j.silent||(j!=null&&j.toastMessage&&i(j.toastMessage,"success"),n({isManual:!1}))}catch(P){i(`Error updating deck "${M.name}".`,"error"),console.error(P)}},[s,i,n]),h=H.useCallback(async(M,j)=>{const R=M.map(P=>({...P,lastModified:Date.now()}));s({type:"BULK_UPDATE_DECKS",payload:R});try{await Nn.bulkUpdateDecks(R),j!=null&&j.silent||n({isManual:!1})}catch{i("Error updating decks.","error")}},[s,n,i]),d=H.useCallback(async(M,j)=>{const R=tt.getState().decks[M];R&&(await c({...R,folderId:j}),i("Deck moved.","success"))},[c,i]),m=H.useCallback(async M=>{const j=tt.getState().decks[M];if(j){const R={...j,deletedAt:new Date().toISOString(),archived:!1};await c(R,{toastMessage:`Deck "${j.name}" moved to trash.`})}},[c]),p=H.useCallback(async M=>{const j=tt.getState().decks[M];j&&await c({...j,deletedAt:null},{toastMessage:`Deck "${j.name}" restored.`})},[c]),v=H.useCallback(async M=>{s({type:"DELETE_DECK",payload:M});try{await Nn.deleteDeck(M),i("Deck permanently deleted.","success"),n({isManual:!1})}catch{i("Error deleting deck permanently.","error")}},[s,i,n]),x=H.useCallback(async M=>{if(M.id){const j={id:M.id,name:M.name};s({type:"UPDATE_FOLDER",payload:j});try{await Nn.updateFolder(j),i(`Folder renamed to "${j.name}".`,"success"),n({isManual:!1})}catch{i("Error renaming folder.","error")}}else{const j={id:crypto.randomUUID(),name:M.name};s({type:"ADD_FOLDER",payload:j});try{await Nn.addFolder(j),i(`Folder "${j.name}" created.`,"success"),n({isManual:!1})}catch{i("Error creating folder.","error")}}},[s,i,n]),T=H.useCallback(async M=>{const j=tt.getState().folders[M];j&&a({title:"Delete Folder",message:`Are you sure you want to delete the folder "${j.name}"? Decks inside will be moved to the main list.`,onConfirm:async()=>{s({type:"DELETE_FOLDER",payload:M});try{await Nn.deleteFolder(M);const R=Object.values(tt.getState().decks).filter(P=>P.folderId===M);R.length>0&&await Nn.bulkUpdateDecks(R.map(P=>({...P,folderId:null}))),i(`Folder "${j.name}" deleted.`,"success"),n({isManual:!1})}catch{i("Error deleting folder.","error")}}})},[s,i,n,a]),_=H.useCallback(M=>{const j=tt.getState().decks[M];if(j&&j.id!=="general-study-deck"){const R=new Date,P=j.lastOpened?new Date(j.lastOpened):new Date(0);R.getTime()-P.getTime()>5e3&&c({...j,lastOpened:R.toISOString()},{silent:!0})}},[c]),E=H.useCallback(()=>{const M=ib();l([M]),i(`Sample quiz "${M.name}" created.`,"success")},[l,i]),S=H.useCallback(()=>{const M=ib();l([M]),i(`Sample quiz "${M.name}" created.`,"success")},[l,i]),w=H.useCallback(()=>{const M=r2();l([M]),i(`Sample flashcard deck "${M.name}" created.`,"success")},[l,i]),O=H.useCallback(()=>{const M=a2();l([M]),i(`Sample learning deck "${M.name}" created.`,"success")},[l,i]),I=H.useCallback(async(M,j)=>{const R=tt.getState().decks[M];if(!R)return;const P=R.infoCards||[],B=P.some($=>$.id===j.infoCard.id)?P.map($=>$.id===j.infoCard.id?j.infoCard:$):[...P,j.infoCard],X=R.questions||[],C=new Map(X.map($=>[$.id,$]));j.questions.forEach($=>C.set($.id,$));const ie={...R,infoCards:B,questions:Array.from(C.values())};await c(ie,{toastMessage:"Learning block saved."})},[c]),U=H.useCallback(async(M,j)=>{var ie;const R=tt.getState().decks[M];if(!R)return;const P=R.infoCards||[],re=P.filter($=>$.id!==j),B=new Set(((ie=P.find($=>$.id===j))==null?void 0:ie.unlocksQuestionIds)||[]),X=(R.questions||[]).filter($=>!B.has($.id)),C={...R,infoCards:re,questions:X};await c(C,{toastMessage:"Learning block deleted."})},[c]),z=H.useCallback(M=>{try{s2(M),i(`Deck "${M.name}" exported as JSON.`,"success")}catch(j){i(`Failed to export deck: ${j.message}`,"error")}},[i]),F=H.useCallback(M=>{try{i2(M),i(`Deck "${M.name}" exported as CSV.`,"success")}catch(j){i(`Failed to export deck: ${j.message}`,"error")}},[i]),V=H.useCallback(async M=>{a({title:"Shift Schedule",message:`Are you sure you want to shift all due dates forward by ${M} day(s)? This affects all active cards in all decks.`,confirmText:"Shift Schedule",onConfirm:async()=>{const j=Object.values(tt.getState().decks),R=[];let P=0;j.forEach(re=>{let B=!1,X={...re};if(re.type===Ue.Flashcard){const C=re,ie=C.cards.map($=>{if(!$.suspended&&$.dueDate){const q=new Date($.dueDate);return q.setDate(q.getDate()+M),P++,B=!0,{...$,dueDate:q.toISOString()}}return $});B&&(X={...C,cards:ie})}else{const C=re,ie=C.questions.map($=>{if(!$.suspended&&$.dueDate){const q=new Date($.dueDate);return q.setDate(q.getDate()+M),P++,B=!0,{...$,dueDate:q.toISOString()}}return $});B&&(X={...C,questions:ie})}B&&R.push(X)}),R.length>0?(await h(R),i(`Schedule shifted! ${P} items moved forward by ${M} days.`,"success")):i("No active items found to shift.","info")}})},[a,h,i]);return H.useMemo(()=>({handleAddDecks:l,handleUpdateDeck:c,handleBulkUpdateDecks:h,handleMoveDeck:d,handleDeleteDeck:m,handleRestoreDeck:p,handleDeleteDeckPermanently:v,handleSaveFolder:x,handleDeleteFolder:T,updateLastOpened:_,handleCreateSampleDeck:E,handleCreateSampleQuizDeck:S,handleCreateSampleFlashcardDeck:w,handleCreateSampleLearningDeck:O,handleSaveLearningBlock:I,handleDeleteLearningBlock:U,handleExportDeck:z,handleExportDeckCSV:F,handleShiftSchedule:V}),[l,c,h,d,m,p,v,x,T,_,E,S,w,O,I,U,z,F,V])},c2=({triggerSync:n,handleAddDecks:a,handleUpdateDeck:s})=>{const{dispatch:i}=tt(),{addToast:l}=Rn(),{navigate:c}=Rs(),h=H.useCallback(async(w,O)=>{i({type:"ADD_SERIES_WITH_DECKS",payload:{series:w,decks:O}});try{await Nn.addDeckSeries([w]),await Nn.addDecks(O),l(`Series "${w.name}" created with ${O.length} deck(s).`,"success"),c(`/series/${w.id}`),n({isManual:!1})}catch{l("Error creating new series.","error")}},[i,l,c,n]),d=H.useCallback(async(w,O)=>{const I={...w,lastModified:Date.now()};i({type:"UPDATE_SERIES",payload:I});try{await Nn.updateDeckSeries(I),O!=null&&O.silent||(O!=null&&O.toastMessage&&l(O.toastMessage,"success"),n({isManual:!1}))}catch{l(`Error updating series "${w.name}".`,"error")}},[i,l,n]),m=H.useCallback(async w=>{const O=tt.getState().deckSeries[w];if(O){const I={...O,deletedAt:new Date().toISOString(),archived:!1};d(I,{toastMessage:`Series "${O.name}" moved to trash.`});const U=new Set((O.levels||[]).flatMap(F=>(F==null?void 0:F.deckIds)||[])),z=Object.values(tt.getState().decks).filter(F=>U.has(F.id));for(const F of z)s({...F,deletedAt:new Date().toISOString(),archived:!1},{silent:!0})}},[d,s]),p=H.useCallback(async w=>{const O=tt.getState().deckSeries[w];if(O){d({...O,deletedAt:null},{toastMessage:`Series "${O.name}" restored.`});const I=new Set((O.levels||[]).flatMap(z=>(z==null?void 0:z.deckIds)||[])),U=Object.values(tt.getState().decks).filter(z=>I.has(z.id));for(const z of U)z.deletedAt&&s({...z,deletedAt:null},{silent:!0})}},[d,s]),v=H.useCallback(async w=>{const O=tt.getState().deckSeries[w];if(!O)return;const I=new Set((O.levels||[]).flatMap(z=>(z==null?void 0:z.deckIds)||[])),U=Object.values(tt.getState().decks).filter(z=>I.has(z.id));i({type:"DELETE_SERIES",payload:w});for(const z of U)i({type:"DELETE_DECK",payload:z.id});try{await Nn.deleteDeckSeries(w);for(const z of U)await Nn.deleteDeck(z.id);l("Series and its decks permanently deleted.","success"),n({isManual:!1})}catch{l("Error deleting series permanently.","error")}},[i,l,n]),x=H.useCallback(async w=>{if(w.id){const O=tt.getState().deckSeries[w.id];O&&d({...O,name:w.name,description:w.description})}else if(w.scaffold){const{seriesName:O,seriesDescription:I,levels:U}=w.scaffold,z=[],F=(U||[]).map(M=>{const j=(M.decks||[]).map(R=>{const P={id:crypto.randomUUID(),name:R.name,description:R.description};return R.type===Ue.Quiz?{...P,type:Ue.Quiz,questions:R.questions||[]}:R.type===Ue.Learning?{...P,type:Ue.Learning,questions:R.questions||[],infoCards:R.infoCards||[]}:R.type===Ue.Flashcard?{...P,type:Ue.Flashcard,cards:R.cards||[]}:null}).filter(R=>R!==null);return z.push(...j),{title:M.title,deckIds:j.map(R=>R.id)}}),V={id:crypto.randomUUID(),type:"series",name:O,description:I,levels:F,archived:!1,createdAt:new Date().toISOString()};await h(V,z)}else{const O={id:crypto.randomUUID(),type:"series",name:w.name,description:w.description,levels:[],createdAt:new Date().toISOString(),archived:!1};i({type:"ADD_SERIES",payload:O});try{await Nn.addDeckSeries([O]),l(`Series "${O.name}" created.`,"success"),c(`/series/${O.id}`)}catch{l("Error saving new series.","error")}}},[i,l,c,d,h]),T=H.useCallback(()=>{const{series:w,decks:O}=n2();h(w,O)},[h]),_=H.useCallback(w=>{const O=tt.getState().deckSeries[w];if(O){const I=new Date,U=new Date(O.lastOpened||0);I.getTime()-U.getTime()>5e3&&d({...O,lastOpened:I.toISOString()},{silent:!0})}},[d]),E=H.useCallback(async(w,O)=>{const I=tt.getState().deckSeries[w];if(!I){l("Could not find the series to add the deck to.","error");return}await a([O]);const U=I.levels[I.levels.length-1];if(U){const z={...I,levels:[...I.levels.slice(0,-1),{...U,deckIds:[...U.deckIds,O.id]}]};d(z)}},[a,d,l]),S=H.useCallback(w=>{try{const O=Object.values(tt.getState().decks);o2(w,O),l(`Series "${w.name}" exported.`,"success")}catch(O){l(`Failed to export series: ${O.message}`,"error")}},[l]);return H.useMemo(()=>({handleAddSeriesWithDecks:h,handleUpdateSeries:d,handleDeleteSeries:m,handleRestoreSeries:p,handleDeleteSeriesPermanently:v,handleSaveSeries:x,handleCreateSampleSeries:T,updateLastOpenedSeries:_,handleAddDeckToSeries:E,handleExportSeries:S}),[h,d,m,p,v,x,T,_,E,S])};function u2(n,a){const s=new Date(n);return s.setDate(s.getDate()+a),s}const K2=(n,a)=>{const s=new Date;s.setHours(0,0,0,0);let i=n.lapses||0;a===Sr.Again?i++:i>0&&(i=0);let l=gS[a];a===Sr.Again&&i>2&&(l-=(i-2)*.05);let c=n.easeFactor+l;c<Sh&&(c=Sh);let h;if(a===Sr.Again)h=hS;else if(n.interval===0)switch(a){case Sr.Hard:h=1;break;case Sr.Good:h=3;break;case Sr.Easy:h=5;break;default:h=1}else{let p=1;a===Sr.Hard&&(p=pS),a===Sr.Easy&&(p=mS),h=Math.ceil(n.interval*c*p)}const d=u2(s,h),m=Math.min(1,Math.log1p(h)/Math.log1p(90));return{...n,interval:h,easeFactor:c,dueDate:d.toISOString(),lastReviewed:s.toISOString(),masteryLevel:m,lapses:i}},ob=n=>{const a=new Date;return a.setHours(0,0,0,0),{...n,dueDate:a.toISOString(),interval:0,easeFactor:Er,suspended:!1,masteryLevel:0,lastReviewed:void 0,lapses:0}},d2=n=>{const a=n.masteryLevel||0;if(a===0||!n.lastReviewed||n.suspended)return 0;const s=(n.interval||1)*2,i=new Date(n.lastReviewed),c=Math.max(0,(new Date().getTime()-i.getTime())/(1e3*60*60*24));if(c<=0)return a;const h=Math.pow(.5,c/s);return a*h},ol=n=>{const a=new Date;a.setHours(23,59,59,999);const s=(n.type===Ue.Quiz||n.type===Ue.Learning?n.questions:n.cards)||[];return Array.isArray(s)?s.filter(i=>!i.suspended&&new Date(i.dueDate)<=a).length:0},f2=({sessionsToResume:n,setSessionsToResume:a,setGeneralStudyDeck:s,handleUpdateDeck:i})=>{const{navigate:l,path:c}=Rs(),{dispatch:h}=tt(),{addToast:d}=Rn(),m=H.useCallback(async(S,w)=>{const O=`session_deck_${S}`;if(n.has(S)){const I=new Set(n);I.delete(S),a(I)}try{await Nn.deleteSessionState(O)}catch(I){console.error(`Failed to clean up session state for ${O} from DB`,I)}S==="general-study-deck"&&s(null),l(w?`/series/${w}`:"/")},[l,n,a,s]),p=H.useCallback(async(S,w,O)=>{const I=`session_deck_${S}`;if(n.has(S)){const U=new Set(n);U.delete(S),a(U)}try{await Nn.deleteSessionState(I)}catch(U){console.error(`Failed to clean up session state for ${I} from DB`,U)}S==="general-study-deck"&&s(null),l(`/decks/${O}/study?seriesId=${w}`)},[l,n,a,s]),v=H.useCallback(async(S,w,O,I)=>{const{decks:U,deckSeries:z,seriesProgress:F}=tt.getState(),V=U[S];if(!V)return;let M;const{id:j,dueDate:R,interval:P,easeFactor:re,suspended:B,masteryLevel:X,lastReviewed:C,lapses:ie}=w,$={dueDate:R,interval:P,easeFactor:re,suspended:B,masteryLevel:X,lastReviewed:C,lapses:ie};V.type===Ue.Flashcard?M={...V,cards:(V.cards||[]).map(q=>q.id===j?{...q,...$}:q)}:V.type===Ue.Learning?M={...V,questions:(V.questions||[]).map(q=>q.id===j?{...q,...$}:q)}:M={...V,questions:(V.questions||[]).map(q=>q.id===j?{...q,...$}:q)},await i(M,{silent:!0});try{const q={itemId:w.id,deckId:S,seriesId:I,timestamp:new Date().toISOString(),rating:O,newInterval:w.interval,easeFactor:w.easeFactor,masteryLevel:w.masteryLevel||0};await Nn.addReviewLog(q)}catch(q){console.error("Failed to log review:",q)}if(I){const q=M,se="cards"in q?q.cards:q.questions,W=Array.isArray(se)&&se.some(L=>!L.suspended&&L.interval===0),me=(F.get(I)||new Set).has(S);if(!W&&!me&&(se==null?void 0:se.length)>0){const L=new Map(F),A=L.get(I),Z=new Set(A instanceof Set?A:[]);Z.add(S),L.set(I,Z);try{await Nn.saveSeriesProgress(I,Z);const K=z[I],te=((K==null?void 0:K.levels)||[]).flatMap(Ee=>(Ee==null?void 0:Ee.deckIds)||[]);te.indexOf(S)===te.length-1&&te.length>0?d(`Congratulations! You've completed the series: "${K==null?void 0:K.name}"!`,"success"):d(`Deck "${q.name}" completed! Next chapter unlocked.`,"success"),h({type:"SET_SERIES_PROGRESS",payload:L})}catch(K){console.error("Could not save series progress",K)}}}},[i,d,h]),x=H.useCallback(async S=>{const w=tt.getState().decks[S];if(!w)return;let O;w.type===Ue.Flashcard?O={...w,cards:(w.cards||[]).map(I=>ob(I))}:O={...w,questions:(w.questions||[]).map(I=>ob(I))},await i(O,{toastMessage:`Progress for deck "${O.name}" has been reset.`})},[i]),T=H.useCallback(()=>{const{decks:S,deckSeries:w,seriesProgress:O}=tt.getState(),I=new Set;Object.values(w).forEach(M=>(M.levels||[]).filter(Boolean).forEach(j=>(j.deckIds||[]).forEach(R=>I.add(R))));const U=new Set;Object.values(w).forEach(M=>{var j;if(!M.archived&&!M.deletedAt){const R=((j=O.get(M.id))==null?void 0:j.size)||0;let P=0;(M.levels||[]).filter(Boolean).forEach(re=>{(re.deckIds||[]).forEach(B=>{P<=R&&U.add(B),P++})})}});const z=new Date;z.setHours(23,59,59,999);const F=Object.values(S).filter(M=>!(M.type!==Ue.Quiz||M.archived||M.deletedAt||I.has(M.id)&&!U.has(M.id))).flatMap(M=>{const j=Object.values(w).find(R=>(R.levels||[]).some(P=>(P.deckIds||[]).includes(M.id)));return(M.questions||[]).filter(R=>!R.suspended&&new Date(R.dueDate)<=z).map(R=>({...R,originalDeckId:M.id,originalDeckName:M.name,originalSeriesName:j==null?void 0:j.name,originalSeriesId:j==null?void 0:j.id}))}).sort(()=>Math.random()-.5),V={id:"general-study-deck",name:"General Study Session",description:"A mix of all due questions.",type:Ue.Quiz,questions:F};s(V),l(`/study/general?from=${encodeURIComponent(c)}`)},[l,s,c]),_=H.useCallback(async S=>{var re;const{decks:w,deckSeries:O,seriesProgress:I}=tt.getState(),U=O[S];if(!U)return;const z=new Set,F=((re=I.get(U.id))==null?void 0:re.size)||0;let V=0;(U.levels||[]).filter(Boolean).forEach(B=>{(B.deckIds||[]).forEach(X=>{V<=F&&z.add(X),V++})});const M=new Date;M.setHours(23,59,59,999);const R=(U.levels||[]).filter(Boolean).flatMap(B=>B.deckIds||[]).map(B=>w[B]).filter(B=>!!(B&&(B.type===Ue.Quiz||B.type===Ue.Learning))).filter(B=>z.has(B.id)).flatMap(B=>(B.questions||[]).filter(X=>!X.suspended&&new Date(X.dueDate)<=M).map(X=>({...X,originalDeckId:B.id,originalDeckName:B.name}))).sort(()=>Math.random()-.5),P={id:"general-study-deck",name:`${U.name} - Study Session`,description:`A study session for due items in the series: ${U.name}`,type:Ue.Quiz,questions:R};s(P),l(`/study/general?seriesId=${S}&from=${encodeURIComponent(c)}`)},[l,s,c]),E=H.useCallback(async S=>{h({type:"UPDATE_LEARNING_PROGRESS",payload:S});try{await Nn.saveLearningProgress(S)}catch(w){console.error("Failed to save learning progress",w)}},[h]);return H.useMemo(()=>({handleSessionEnd:m,handleStudyNextDeckInSeries:p,handleItemReviewed:v,handleResetDeckProgress:x,handleStartGeneralStudy:T,handleStartSeriesStudy:_,handleUpdateLearningProgress:E}),[m,p,v,x,T,_,E])},lb=(n,a,s)=>{var T;const i={...a,decks:[...a.decks],deckSeries:[...a.deckSeries],seriesProgress:{...a.seriesProgress}},l=new Map(a.decks.map(_=>[_.id,_])),c=new Map(n.decks.map(_=>[_.id,_])),h=[];a.decks.forEach(_=>{s.decks[_.id]==="local"&&c.has(_.id)?h.push(c.get(_.id)):h.push(_)}),n.decks.forEach(_=>{l.has(_.id)||h.push(_)}),i.decks=h;const d=new Map(a.deckSeries.map(_=>[_.id,_])),m=new Map(n.deckSeries.map(_=>[_.id,_])),p=[];a.deckSeries.forEach(_=>{s.series[_.id]==="local"&&m.has(_.id)?(p.push(m.get(_.id)),n.seriesProgress&&n.seriesProgress[_.id]&&(i.seriesProgress[_.id]=n.seriesProgress[_.id])):p.push(_)}),n.deckSeries.forEach(_=>{d.has(_.id)||(p.push(_),n.seriesProgress&&n.seriesProgress[_.id]&&(i.seriesProgress[_.id]=n.seriesProgress[_.id]))}),i.deckSeries=p;const v=new Set((T=a.reviews)==null?void 0:T.map(_=>_.timestamp+_.itemId)),x=(n.reviews||[]).filter(_=>!v.has(_.timestamp+_.itemId));return i.reviews=[...i.reviews||[],...x],i.sessions=n.sessions,i},h2=({addToast:n,openModal:a,closeModal:s,dispatch:i,setLastSyncStatus:l,setIsSyncing:c,backupEnabled:h})=>{const d=M=>!M||M.length===0?0:M.reduce((j,R)=>j+d2(R),0)/M.length,m=H.useCallback(M=>{const j=tt.getState().decks,R=tt.getState().deckSeries,P=[],re=[],B=[],X=[],C=new Map,ie=new Map;return M.decks.forEach($=>{const q=j[$.id];if(!q)P.push($),C.set($.id,ol($));else if(q.lastModified!==$.lastModified){const se=(q.type===Ue.Flashcard?q.cards:(q.type===Ue.Learning,q.questions))||[],W=($.type===Ue.Flashcard?$.cards:($.type===Ue.Learning,$.questions))||[],me={content:se.length!==W.length,dueCount:ol(q)!==ol($),mastery:!1};B.push({local:q,backup:$,diff:me}),C.set(`local-${q.id}`,ol(q)),C.set($.id,ol($));const L=se,A=W,Z=d(L),K=d(A);ie.set(`local-${q.id}`,Z),ie.set($.id,K),me.mastery=Math.abs(Z-K)>.01}}),M.deckSeries.forEach($=>{const q=R[$.id];if(!q)re.push($);else if(q.lastModified!==$.lastModified){const se={structure:JSON.stringify(q.levels)!==JSON.stringify($.levels),completion:!1,mastery:!1};X.push({local:q,backup:$,diff:se})}}),{newDecks:P,newSeries:re,changedDecks:B,changedSeries:X,dueCounts:C,masteryLevels:ie}},[]),p=H.useCallback(async(M={})=>{if(!h){M.isManual&&n("Backup is disabled in settings.","info");return}c(!0),l("Syncing...");try{const{timestamp:j}=await lh(void 0,M.force),R=new Date(j);l(`Synced: ${R.toLocaleTimeString()}`),M.isManual&&n("Sync successful.","success")}catch(j){if(console.error("Sync failed",j),j.status===412||j.status===409){l("Sync Conflict");try{const R=await ch(),P=m(R);a("mergeConflict",{comparison:P,remoteData:R})}catch{n("Sync failed and could not read server data for resolution.","error")}}else l("Sync Failed"),M.isManual&&n(`Sync failed: ${j.message}`,"error")}finally{c(!1)}},[h,n,c,l,m,a]),v=H.useCallback(async M=>{try{await dl(M),i({type:"RESTORE_DATA",payload:M}),M.aiChatHistory&&i({type:"SET_AI_CHAT_HISTORY",payload:M.aiChatHistory}),n("Data restored successfully.","success"),h&&p({isManual:!1,force:!0})}catch(j){console.error(j),n("Failed to restore data.","error")}},[i,n,p,h]),x=H.useCallback(()=>{p({isManual:!0})},[p]),T=H.useCallback(async()=>{c(!0);try{const M=await ks();localStorage.setItem("cogniflow-pre-fetch-backup",JSON.stringify(M));const j=await ch();await dl(j),i({type:"RESTORE_DATA",payload:j}),j.aiChatHistory&&i({type:"SET_AI_CHAT_HISTORY",payload:j.aiChatHistory}),n("Force fetch successful.","success"),l(`Fetched: ${new Date().toLocaleTimeString()}`)}catch(M){n(`Force fetch failed: ${M.message}`,"error")}finally{c(!1)}},[i,c,n,l]),_=H.useCallback(async()=>{const M=localStorage.getItem("cogniflow-pre-fetch-backup");if(!M){n("No backup found to revert to.","error");return}try{const j=JSON.parse(M);await v(j),n("Reverted to state before last fetch.","success")}catch{n("Failed to revert.","error")}},[v,n]),E=H.useCallback(async()=>{c(!0);try{await lh(void 0,!0),n("Force upload successful.","success"),l(`Synced: ${new Date().toLocaleTimeString()}`)}catch(M){n(`Force upload failed: ${M.message}`,"error")}finally{c(!1)}},[c,n,l]),S=H.useCallback(async()=>{c(!0);try{const M=await dT();n(`Backup created: ${M.filename}`,"success")}catch(M){n(`Backup failed: ${M.message}`,"error")}finally{c(!1)}},[c,n]),w=H.useCallback(async M=>{c(!0);try{await fT(M);const j=await ch();await dl(j),i({type:"RESTORE_DATA",payload:j}),j.aiChatHistory&&i({type:"SET_AI_CHAT_HISTORY",payload:j.aiChatHistory}),n("Restored from server backup.","success"),l(`Restored: ${new Date().toLocaleTimeString()}`)}catch(j){n(`Restore failed: ${j.message}`,"error")}finally{c(!1)}},[c,n,i,l]),O=H.useCallback(async M=>{try{await hT(M)}catch(j){throw n(`Delete failed: ${j.message}`,"error"),j}},[n]),I=H.useCallback(async({selectedIds:M,backupData:j})=>{const R=await ks(),P={decks:{},series:{}};j.decks.forEach(B=>{M.has(B.id)?P.decks[B.id]="remote":P.decks[B.id]="local"}),j.deckSeries.forEach(B=>{M.has(B.id)?P.series[B.id]="remote":P.series[B.id]="local"});const re=lb({...R},j,P);await v(re)},[v]),U=H.useCallback(async(M,j)=>{s();const R=await ks(),P=lb({...R},j,M);await dl(P),i({type:"RESTORE_DATA",payload:P}),P.aiChatHistory&&i({type:"SET_AI_CHAT_HISTORY",payload:P.aiChatHistory}),c(!0);try{await lh(P,!0),n("Sync conflict resolved.","success"),l(`Synced: ${new Date().toLocaleTimeString()}`)}catch{n("Failed to push resolved data to server.","error")}finally{c(!1)}},[s,i,n,c,l]),z=H.useCallback(async()=>{try{await x0(),n("Export started.","info")}catch(M){n(`Export failed: ${M.message}`,"error")}},[n]),F=H.useCallback(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"CLEAR_APP_CACHE"}),n("App cache cleared. Reloading...","success"),setTimeout(()=>window.location.reload(),1e3)):n("Service worker not active.","error")},[n]),V=H.useCallback(()=>{"serviceWorker"in navigator&&navigator.serviceWorker.controller?(navigator.serviceWorker.controller.postMessage({type:"CLEAR_CDN_CACHE"}),n("CDN cache cleared.","success")):n("Service worker not active.","error")},[n]);return{triggerSync:p,handleManualSync:x,onRestoreData:v,handleCompareBackup:m,handleRestoreSelectedItems:I,handleForceFetchFromServer:T,handleForceUploadToServer:E,handleCreateServerBackup:S,handleRestoreFromServerBackup:w,handleDeleteServerBackup:O,handleMergeResolution:U,handleExportData:z,handleClearAppCache:F,handleClearCdnCache:V,handleRevertLastFetch:_}};var R0={};const cb=R0.GDRIVE_API_KEY,gh=R0.GDRIVE_CLIENT_ID,p2="https://www.googleapis.com/discovery/v1/apis/drive/v3/rest",m2="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email";let uu=!1,du=!1,kl=null,fu=[],g2=[];const Mh=(n,a)=>{fu.forEach(s=>s(n,a))},y2=n=>{g2.forEach(a=>a(n))},v2=async n=>{if(n.error){localStorage.removeItem("gdrive-previously-signed-in"),Mh(!1);return}localStorage.setItem("gdrive-previously-signed-in","true"),gapi.client.setToken({access_token:n.access_token});const a=await w2(n.access_token);Mh(!0,a)};let su=null;const b2=()=>su||(su=new Promise((n,a)=>{const s=()=>{uu&&du&&(y2(!0),n())},i=()=>{gapi.load("client",async()=>{try{if(!cb||!gh){console.warn("Google Drive API Key or Client ID is not configured. Drive features will be disabled."),uu=!0,s();return}await gapi.client.init({apiKey:cb,discoveryDocs:[p2]}),uu=!0,s()}catch(d){console.error("Error initializing GAPI client",d),a(d)}})},l=()=>{try{if(!gh){console.warn("Google Drive Client ID is not configured. Drive features will be disabled."),du=!0,s();return}kl=google.accounts.oauth2.initTokenClient({client_id:gh,scope:m2,callback:v2}),du=!0,s()}catch(d){console.error("Error initializing GIS client",d),a(d)}},c=document.createElement("script");c.src="https://apis.google.com/js/api.js",c.async=!0,c.defer=!0,c.onload=i,c.onerror=()=>a(new Error("Failed to load GAPI script")),document.body.appendChild(c);const h=document.createElement("script");h.src="https://accounts.google.com/gsi/client",h.async=!0,h.defer=!0,h.onload=l,h.onerror=()=>a(new Error("Failed to load GIS script")),document.body.appendChild(h)}),su),x2=n=>(fu.push(n),()=>{fu=fu.filter(a=>a!==n)}),_2=()=>{if(!du||!uu||!kl){console.error("Google services not ready for sign-in.");return}kl.requestAccessToken({prompt:"consent"})},S2=()=>{kl&&kl.requestAccessToken({prompt:"none"})},E2=()=>{const n=gapi.client.getToken();gapi.client.setToken(null),localStorage.removeItem("gdrive-previously-signed-in"),Mh(!1),n!==null&&google.accounts.oauth2.revoke(n.access_token,()=>{console.log("Google token revoked.")})},w2=async n=>{const a=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${n}`}});if(!a.ok)throw new Error("Failed to fetch user profile.");return a.json()},T2=async()=>{const n=await ks();if(n.decks.length===0&&n.folders.length===0&&n.deckSeries.length===0)throw new Error("There is no data to back up.");const a={version:7,...n},s=JSON.stringify(a),c={name:`cogniflow-backup-${Vh()}.json`,parents:["appDataFolder"]},h="-------314159265358979323846",d=`\r
--${h}\r
`,m=`\r
--${h}--`,p=d+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(c)+d+`Content-Type: application/json; charset=UTF-8\r
\r
`+s+m,v=await gapi.client.request({path:"https://www.googleapis.com/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart",fields:"id, name, modifiedTime"},headers:{"Content-Type":`multipart/related; boundary=${h}`},body:p});if(v.status!==200)throw new Error("Failed to upload backup file.");return v.result},A2=async()=>(await gapi.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, name, modifiedTime)",orderBy:"modifiedTime desc"})).result.files,k2=async n=>{const a=await gapi.client.drive.files.get({fileId:n,alt:"media"});if(a.status!==200)throw new Error("Failed to download backup file.");const s=typeof a.body=="string"?a.body:JSON.stringify(a.result);return await ku(s)},N2=({openConfirmModal:n,openRestoreFromDriveModal:a,setDriveFiles:s,onRestoreData:i})=>{const{addToast:l}=Rn(),c=H.useCallback(()=>{_2()},[]),h=H.useCallback(()=>{E2(),l("Signed out of Google Drive.","info")},[l]),d=H.useCallback(()=>{n({title:"Backup to Google Drive",message:"This will create a new backup file in a private application folder in your Google Drive. Are you sure?",onConfirm:async()=>{try{const v=await T2();l(`Successfully created backup: ${v.name}`,"success")}catch(v){const x=v instanceof Error?v.message:"Failed to create backup.";l(x,"error")}}})},[l,n]),m=H.useCallback(async()=>{try{const v=await A2();s(v),a()}catch(v){const x=v instanceof Error?v.message:"Failed to list files from Google Drive.";l(x,"error")}},[l,s,a]),p=H.useCallback(async v=>{n({title:"Restore from Google Drive",message:"Restoring will merge and overwrite data. Are you sure?",onConfirm:async()=>{try{const x=await k2(v);await i(x)}catch(x){const T=x instanceof Error?x.message:"Failed to restore from backup.";l(T,"error")}}})},[l,n,i]);return H.useMemo(()=>({handleGoogleSignIn:c,handleGoogleSignOut:h,handleBackupToDrive:d,handleListDriveFiles:m,handleRestoreFromDrive:p,openRestoreFromDriveModal:m}),[c,h,d,m,p])},D2=({handleUpdateDeck:n,handleAddDecks:a,handleAddSeriesWithDecks:s,handleUpdateSeries:i,openConfirmModal:l,openModal:c,closeModal:h})=>{const{dispatch:d}=tt(),{addToast:m}=Rn(),p=H.useCallback(A=>{c("aiGenerationChat",{params:A})},[c]),v=H.useCallback(A=>{d({type:"CANCEL_AI_TASK",payload:{taskId:A}}),m("Generation cancelled.","info")},[d,m]),x=H.useCallback(async A=>{try{switch(A.action){case Uh.CREATE_DECK:await a([{id:crypto.randomUUID(),name:A.payload.name,type:Ue.Flashcard,cards:[],folderId:A.payload.folderId||null,description:"Created by AI"}]),m(`Deck "${A.payload.name}" created.`,"success");break;default:console.log("Action not implemented yet:",A.action),m("This action is not fully implemented yet.","info")}}catch(Z){m(`Failed to execute action: ${Z.message}`,"error")}},[a,m]),T=H.useCallback(A=>{c("aiGeneration",{context:{deckId:A.id,deckName:A.name,deckType:A.type}})},[c]),_=H.useCallback((A,Z)=>{const K=tt.getState().deckSeries[A];c("aiGeneration",{initialGenerationType:"single-deck-quiz",context:{seriesId:A,seriesName:K==null?void 0:K.name,seriesDescription:K==null?void 0:K.description,levelIndex:Z}})},[c]),E=H.useCallback(A=>{const Z=tt.getState().deckSeries[A];c("aiGeneration",{initialGenerationType:"series-auto-fill",context:{seriesId:A,seriesName:Z==null?void 0:Z.name,seriesDescription:Z==null?void 0:Z.description}})},[c]),S=H.useCallback(async(A,Z)=>{d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Structuring series..."}});const{outline:K,generationType:te}=A;let fe=Ue.Quiz;te&&(te.includes("flashcard")||te.includes("vocab"))?fe=Ue.Flashcard:te&&(te.includes("course")||te.includes("learning"))&&(fe=Ue.Learning);const Ee=await Z1(K,fe);if(Z.aborted)throw new Error("Cancelled by user");const{seriesName:Te,seriesDescription:he,levels:He}=Ee,Be=[],Pe=(He||[]).map(N=>{const be=(N.decks||[]).map(le=>le.type==="quiz"||!le.type&&fe===Ue.Quiz?{id:crypto.randomUUID(),name:le.name,description:le.description,type:Ue.Quiz,questions:Ts(le.questions||[])}:le.type==="flashcard"||!le.type&&fe===Ue.Flashcard?{id:crypto.randomUUID(),name:le.name,description:le.description,type:Ue.Flashcard,cards:As(le.cards||[])}:le.type==="learning"||!le.type&&fe===Ue.Learning?{id:crypto.randomUUID(),name:le.name,description:le.description,type:Ue.Learning,questions:[],infoCards:[]}:null).filter(le=>le!==null);return Be.push(...be),{title:N.title,deckIds:be.map(le=>le.id)}}),Re={id:crypto.randomUUID(),type:"series",name:Te,description:he,levels:Pe,archived:!1,createdAt:new Date().toISOString()};await s(Re,Be),m(`Series "${Re.name}" generated!`,"success")},[d,m,s]),w=H.useCallback(async(A,Z,K)=>{try{const fe=(K==="front"?Z.front:Z.back).replace(/<[^>]+>/g,"").trim();if(!fe)return;m("Generating audio...","info");const Ee=await nw(fe),Te=tt.getState().decks[A];if(Te&&Te.type===Ue.Flashcard){const he=Te,He=(he.cards||[]).map(Be=>Be.id===Z.id?{...Be,[K==="front"?"frontAudio":"backAudio"]:Ee}:Be);return await n({...he,cards:He},{silent:!0}),Ee}}catch(te){m(`Audio generation failed: ${te.message}`,"error")}},[n,m]),O=H.useCallback(async A=>{try{m("Analyzing deck for icon...","info");const Z=await sw(A.name,A.description);await n({...A,icon:Z}),m("Icon updated!","success")}catch{m("Failed to suggest icon.","error")}},[n,m]),I=H.useCallback(A=>{c("deckAnalysis",{deck:A})},[c]),U=H.useCallback(async A=>{try{m("Generating tags...","info");const Z=A.questions.map(fe=>({id:fe.id,text:fe.questionText})),K=await iw(Z),te=A.questions.map(fe=>{if(K[fe.id]){const Ee=Array.from(new Set([...fe.tags||[],...K[fe.id]]));return{...fe,tags:Ee}}return fe});await n({...A,questions:te}),m("Questions tagged!","success")}catch(Z){m(`Tagging failed: ${Z.message}`,"error")}},[n,m]),z=H.useCallback(async(A,Z,K)=>await W1(A,Z,K),[]),F=H.useCallback(async(A,Z)=>{var Te;const K=A.options.filter(he=>he.id!==A.correctAnswerId).map(he=>he.text),te=((Te=A.options.find(he=>he.id===A.correctAnswerId))==null?void 0:Te.text)||"",fe=await X1(A.questionText,te,K,Z),Ee=A.options.find(he=>he.id===A.correctAnswerId);if(!Ee)throw new Error("Correct answer not found in options");return[Ee,...fe.map(he=>({id:crypto.randomUUID(),text:he.text,explanation:he.explanation}))].sort(()=>Math.random()-.5)},[]),V=H.useCallback(async A=>{const Z=tt.getState().deckSeries[A];if(!Z)return;const K={id:crypto.randomUUID(),type:"autoPopulateSeries",payload:{seriesId:A},statusText:`Expanding series "${Z.name}"...`,seriesId:A};d({type:"ADD_AI_TASK_TO_QUEUE",payload:K}),m("Series expansion added to queue.","info")},[d,m]),M=H.useCallback(async(A,Z)=>{const K={id:crypto.randomUUID(),type:"autoPopulateLevel",payload:{seriesId:A,levelIndex:Z},statusText:`Adding decks to level ${Z+1}...`,seriesId:A};d({type:"ADD_AI_TASK_TO_QUEUE",payload:K}),m("Level population added to queue.","info")},[d,m]),j=H.useCallback(A=>{const Z={id:crypto.randomUUID(),type:"generateQuestionsForDeck",payload:{deck:A,count:5},statusText:`Generating questions for "${A.name}"...`,deckId:A.id};d({type:"ADD_AI_TASK_TO_QUEUE",payload:Z}),m("Question generation added to queue.","info")},[d,m]),R=H.useCallback(A=>{const Z={id:crypto.randomUUID(),type:"generateSeriesLearningContentInBatches",payload:{deck:A},statusText:`Generating content for "${A.name}"...`,deckId:A.id};d({type:"ADD_AI_TASK_TO_QUEUE",payload:Z}),m("Content generation added to queue.","info")},[d,m]),P=H.useCallback(A=>{const Z={id:crypto.randomUUID(),type:"generateSeriesQuestionsInBatches",payload:{seriesId:A},statusText:"Generating questions for empty decks...",seriesId:A};d({type:"ADD_AI_TASK_TO_QUEUE",payload:Z}),m("Batch generation added to queue.","info")},[d,m]),re=H.useCallback(async(A,Z)=>{const K={id:crypto.randomUUID(),type:"regenerateQuestion",payload:{deckId:A.id,questionId:Z.id},statusText:"Regenerating question...",deckId:A.id};d({type:"ADD_AI_TASK_TO_QUEUE",payload:K})},[d]),B=H.useCallback(async(A,Z,K)=>await tw(A,Z,K),[]),X=H.useCallback(async(A,Z)=>{const{seriesId:K}=A,te=tt.getState().deckSeries[K];if(!te)return;let fe=te;if((te.levels||[]).length===0){d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Designing series structure..."}});const Ee=await Zv(te.name,te.description);if(Z.aborted)return;const Te=[],he=(Ee.levels||[]).map(He=>{const Be=(He.decks||[]).map(Pe=>({id:crypto.randomUUID(),name:Pe.name,description:Pe.description,type:Ue.Quiz,questions:[]}));return Te.push(...Be),{title:He.title,deckIds:Be.map(Pe=>Pe.id)}});fe={...te,levels:he},await s(fe,Te)}if(te.levels.length>0){d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Expanding series with new levels..."}});const Ee=te.levels.map(he=>`${he.title}: ${(he.deckIds||[]).length} decks`).join(`
`),Te=await Zv(te.name,te.description,Ee);if(Z.aborted)return;if(Te.levels&&Te.levels.length>0){const he=[],He=(Te.levels||[]).map(Pe=>{const Re=(Pe.decks||[]).map(N=>({id:crypto.randomUUID(),name:N.name,description:N.description,type:Ue.Quiz,questions:[]}));return he.push(...Re),{title:Pe.title,deckIds:Re.map(N=>N.id)}}),Be={...fe,levels:[...fe.levels,...He]};await s(Be,he)}}},[d,s]),C=H.useCallback(async(A,Z)=>{const{seriesId:K,levelIndex:te}=A,fe=tt.getState().deckSeries[K];if(!fe||!fe.levels[te])return;const Ee=fe.levels[te],Te=Ee.deckIds.map(Pe=>{var Re;return(Re=tt.getState().decks[Pe])==null?void 0:Re.name}).filter(Boolean),he=await Y1(fe.name,fe.description,Ee.title,Te);if(Z.aborted)return;const He=he.map(Pe=>({id:crypto.randomUUID(),name:Pe.name,description:Pe.description,type:Ue.Quiz,questions:[]}));await a(He);const Be={...fe,levels:fe.levels.map((Pe,Re)=>Re===te?{...Pe,deckIds:[...Pe.deckIds,...He.map(N=>N.id)]}:Pe)};await i(Be,{silent:!0})},[a,i]),ie=H.useCallback(async(A,Z,K,te)=>{const fe=await J1(A,Z||5,K);if(te.aborted)return;const Ee=Ts(fe),Te={...A,questions:[...A.questions||[],...Ee]};await n(Te,{silent:!0})},[n]),$=H.useCallback(async(A,Z)=>{const{deck:K}=A,{infoCards:te,questions:fe}=await Qv(K.name,K.description);if(Z.aborted)return;const Ee=new Date().toISOString(),Te=te.map(Be=>({...Be,unlocksQuestionIds:Be.unlocksQuestionIds||[]})),he=fe.map(Be=>({...Be,id:Be.id||crypto.randomUUID(),questionType:"multipleChoice",dueDate:Ee,interval:0,easeFactor:2.5,lapses:0,masteryLevel:0,suspended:!1,options:Be.options.map(Pe=>({...Pe,id:crypto.randomUUID()}))}));he.forEach(Be=>{(Be.infoCardIds||[]).forEach(Pe=>{const Re=Te.find(N=>N.id===Pe);Re&&(Re.unlocksQuestionIds=Array.from(new Set([...Re.unlocksQuestionIds||[],Be.id])))})});const He={...K,infoCards:[...K.infoCards||[],...Te],questions:[...K.questions||[],...he]};await n(He,{silent:!0})},[n]),q=H.useCallback(async(A,Z)=>{const{seriesId:K}=A,te=tt.getState().deckSeries[K];if(!te)return;const fe=(te.levels||[]).flatMap(Te=>Te.deckIds),Ee=tt.getState().decks;for(const Te of fe){if(Z.aborted)return;const he=Ee[Te];he&&he.type===Ue.Quiz&&he.questions.length===0&&(d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:`Generating questions for "${he.name}"...`}}),await ie(he,5,{name:te.name,description:te.description},Z))}},[ie,d]),se=H.useCallback(async(A,Z)=>{const{deckId:K,questionId:te}=A,fe=tt.getState().decks[K];if(!fe)return;const Ee=fe.questions,Te=Ee.find(Pe=>Pe.id===te);if(!Te)return;const he=await K1(Te,fe.name);if(Z.aborted)return;const He={...Te,...he},Be={...fe,questions:Ee.map(Pe=>Pe.id===te?He:Pe)};await n(Be,{silent:!0})},[n]),W=H.useCallback(async(A,Z,K,te,fe)=>{d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Generating deck content..."}});const Ee=await Q1(A,Z);if(fe.aborted)throw new Error("Cancelled by user");const Te={id:crypto.randomUUID(),name:Ee.name,description:Ee.description,type:Ue.Quiz,questions:Ts(Ee.questions||[])};if(await a([Te]),K&&te!==void 0){const he=tt.getState().deckSeries[K];if(he&&he.levels[te]){const He={...he,levels:he.levels.map((Be,Pe)=>Pe===te?{...Be,deckIds:[...Be.deckIds,Te.id]}:Be)};await i(He,{silent:!0})}}m(`Deck "${Te.name}" generated!`,"success")},[d,a,i,m]),me=H.useCallback(async(A,Z)=>{d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Generating flashcards..."}});const{persona:K}=A,te=localStorage.getItem("cogniflow-ai-options");let fe=[];te&&(fe=JSON.parse(te).personas||[]);const Ee=fe.find(He=>He.id===K)||{name:"Assistant",instruction:"You are a helpful assistant."},Te=await ew(A,Ee);if(Z.aborted)throw new Error("Cancelled by user");const he={id:crypto.randomUUID(),name:Te.name,description:Te.description,type:Ue.Flashcard,cards:As(Te.cards||[])};await a([he]),m(`Deck "${he.name}" generated!`,"success")},[d,a,m]),L=H.useCallback(async(A,Z)=>{d({type:"UPDATE_CURRENT_AI_TASK_STATUS",payload:{statusText:"Generating learning content..."}});const K=A.generationType==="deck-course",{infoCards:te,questions:fe}=await Qv(A.topic,void 0,K);if(Z.aborted)throw new Error("Cancelled by user");const Ee={id:crypto.randomUUID(),name:A.topic,description:`Generated ${K?"course":"learning guide"} on ${A.topic}`,type:Ue.Learning,infoCards:te.map(Te=>({...Te,unlocksQuestionIds:Te.unlocksQuestionIds||[]})),questions:Ts(fe)};await a([Ee]),m("Learning Deck generated!","success")},[d,a,m]);return{handleStartAIGeneration:p,handleCancelAIGeneration:v,handleExecuteAIAction:x,handleOpenAIGenerationForDeck:T,handleOpenAIGenerationForSeriesLevel:_,handleOpenAIAutoExpandSeries:E,handleGenerateAudioForCard:w,handleSuggestDeckIcon:O,handleOpenDeckAnalysis:I,handleAutoTagQuestions:U,handleGenerateCardExamples:z,handleHardenDistractors:F,handleAiAddLevelsToSeries:V,handleAiAddDecksToLevel:M,handleGenerateQuestionsForDeck:j,handleGenerateContentForLearningDeck:R,handleGenerateQuestionsForEmptyDecksInSeries:P,handleRegenerateQuestion:re,handleExpandText:B,onAutoPopulateSeries:X,onAutoPopulateLevel:C,onGenerateQuestionsForDeck:ie,onGenerateLearningContentForDeck:$,onGenerateSeriesQuestionsInBatches:q,onRegenerateQuestion:se,onGenerateFullSeriesFromScaffold:S,onGenerateDeckFromOutline:W,onGenerateFlashcardDeck:me,onGenerateLearningDeckWithAI:L}};var yh={exports:{}};const C2={},O2=Object.freeze(Object.defineProperty({__proto__:null,default:C2},Symbol.toStringTag,{value:"Module"})),vh=l_(O2);var ub;function R2(){return ub||(ub=1,(function(n,a){var s=void 0,i=function(l){return s||(s=new Promise(function(c,h){var d=typeof l<"u"?l:{},m=d.onAbort;d.onAbort=function(y){h(new Error(y)),m&&m(y)},d.postRun=d.postRun||[],d.postRun.push(function(){c(d)}),n=void 0;var p;p||(p=typeof d<"u"?d:{}),p.onRuntimeInitialized=function(){function y(ge,Me){switch(typeof Me){case"boolean":Bs(ge,Me?1:0);break;case"number":Qu(ge,Me);break;case"string":Ju(ge,Me,-1,-1);break;case"object":if(Me===null)Gl(ge);else if(Me.length!=null){var We=mi(Me,Ka);go(ge,We,Me.length,-1),ia(We)}else yi(ge,"Wrong API use : tried to return a value of an unknown type ("+Me+").",-1);break;default:Gl(ge)}}function b(ge,Me){for(var We=[],ot=0;ot<ge;ot+=1){var _t=le(Me+4*ot,"i32"),Yt=Pu(_t);if(Yt===1||Yt===2)_t=Zu(_t);else if(Yt===3)_t=Vu(_t);else if(Yt===4){Yt=_t,_t=Yu(Yt),Yt=$u(Yt);for(var pr=new Uint8Array(_t),Jn=0;Jn<_t;Jn+=1)pr[Jn]=P[Yt+Jn];_t=pr}else _t=null;We.push(_t)}return We}function D(ge,Me){this.La=ge,this.db=Me,this.Ja=1,this.fb=[]}function Y(ge,Me){if(this.db=Me,Me=Rt(ge)+1,this.Ya=Us(Me),this.Ya===null)throw Error("Unable to allocate memory for the SQL string");Qt(ge,re,this.Ya,Me),this.eb=this.Ya,this.Ua=this.ib=null}function ee(ge){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),ge!=null){var Me=this.filename,We="/",ot=Me;if(We&&(We=typeof We=="string"?We:fr(We),ot=Me?ue(We+"/"+Me):We),Me=qa(!0,!0),ot=Xe(ot,(Me!==void 0?Me:438)&4095|32768,0),ge){if(typeof ge=="string"){We=Array(ge.length);for(var _t=0,Yt=ge.length;_t<Yt;++_t)We[_t]=ge.charCodeAt(_t);ge=We}hr(ot,Me|146),We=Pn(ot,577),Rl(We,ge,0,ge.length,0),$a(We),hr(ot,Me)}}this.handleError(it(this.filename,_e)),this.db=le(_e,"i32"),vo(this.db),this.Za={},this.Na={}}var _e=Un(4),Ce=p.cwrap,it=Ce("sqlite3_open","number",["string","number"]),Ct=Ce("sqlite3_close_v2","number",["number"]),mt=Ce("sqlite3_exec","number",["number","string","number","number","number"]),rn=Ce("sqlite3_changes","number",["number"]),an=Ce("sqlite3_prepare_v2","number",["number","string","number","number","number"]),zs=Ce("sqlite3_sql","string",["number"]),Il=Ce("sqlite3_normalized_sql","string",["number"]),Ml=Ce("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Ru=Ce("sqlite3_bind_text","number",["number","number","number","number","number"]),Ul=Ce("sqlite3_bind_blob","number",["number","number","number","number","number"]),po=Ce("sqlite3_bind_double","number",["number","number","number"]),ju=Ce("sqlite3_bind_int","number",["number","number","number"]),Iu=Ce("sqlite3_bind_parameter_index","number",["number","string"]),Mu=Ce("sqlite3_step","number",["number"]),Uu=Ce("sqlite3_errmsg","string",["number"]),Lu=Ce("sqlite3_column_count","number",["number"]),Ll=Ce("sqlite3_data_count","number",["number"]),zu=Ce("sqlite3_column_double","number",["number","number"]),zl=Ce("sqlite3_column_text","string",["number","number"]),Bu=Ce("sqlite3_column_blob","number",["number","number"]),Fu=Ce("sqlite3_column_bytes","number",["number","number"]),mo=Ce("sqlite3_column_type","number",["number","number"]),Gu=Ce("sqlite3_column_name","string",["number","number"]),qu=Ce("sqlite3_reset","number",["number"]),Hu=Ce("sqlite3_clear_bindings","number",["number"]),Bl=Ce("sqlite3_finalize","number",["number"]),Fl=Ce("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),Pu=Ce("sqlite3_value_type","number",["number"]),Yu=Ce("sqlite3_value_bytes","number",["number"]),Vu=Ce("sqlite3_value_text","string",["number"]),$u=Ce("sqlite3_value_blob","number",["number"]),Zu=Ce("sqlite3_value_double","number",["number"]),Qu=Ce("sqlite3_result_double","",["number","number"]),Gl=Ce("sqlite3_result_null","",["number"]),Ju=Ce("sqlite3_result_text","",["number","string","number","number"]),go=Ce("sqlite3_result_blob","",["number","number","number","number"]),Bs=Ce("sqlite3_result_int","",["number","number"]),yi=Ce("sqlite3_result_error","",["number","string","number"]),yo=Ce("sqlite3_aggregate_context","number",["number","number"]),vo=Ce("RegisterExtensionFunctions","number",["number"]);D.prototype.bind=function(ge){if(!this.La)throw"Statement closed";return this.reset(),Array.isArray(ge)?this.wb(ge):ge!=null&&typeof ge=="object"?this.xb(ge):!0},D.prototype.step=function(){if(!this.La)throw"Statement closed";this.Ja=1;var ge=Mu(this.La);switch(ge){case 100:return!0;case 101:return!1;default:throw this.db.handleError(ge)}},D.prototype.rb=function(ge){return ge==null&&(ge=this.Ja,this.Ja+=1),zu(this.La,ge)},D.prototype.Ab=function(ge){if(ge==null&&(ge=this.Ja,this.Ja+=1),ge=zl(this.La,ge),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(ge)},D.prototype.Bb=function(ge){return ge==null&&(ge=this.Ja,this.Ja+=1),zl(this.La,ge)},D.prototype.getBlob=function(ge){ge==null&&(ge=this.Ja,this.Ja+=1);var Me=Fu(this.La,ge);ge=Bu(this.La,ge);for(var We=new Uint8Array(Me),ot=0;ot<Me;ot+=1)We[ot]=P[ge+ot];return We},D.prototype.get=function(ge,Me){Me=Me||{},ge!=null&&this.bind(ge)&&this.step(),ge=[];for(var We=Ll(this.La),ot=0;ot<We;ot+=1)switch(mo(this.La,ot)){case 1:var _t=Me.useBigInt?this.Ab(ot):this.rb(ot);ge.push(_t);break;case 2:ge.push(this.rb(ot));break;case 3:ge.push(this.Bb(ot));break;case 4:ge.push(this.getBlob(ot));break;default:ge.push(null)}return ge},D.prototype.getColumnNames=function(){for(var ge=[],Me=Lu(this.La),We=0;We<Me;We+=1)ge.push(Gu(this.La,We));return ge},D.prototype.getAsObject=function(ge,Me){ge=this.get(ge,Me),Me=this.getColumnNames();for(var We={},ot=0;ot<Me.length;ot+=1)We[Me[ot]]=ge[ot];return We},D.prototype.getSQL=function(){return zs(this.La)},D.prototype.getNormalizedSQL=function(){return Il(this.La)},D.prototype.run=function(ge){return ge!=null&&this.bind(ge),this.step(),this.reset()},D.prototype.nb=function(ge,Me){Me==null&&(Me=this.Ja,this.Ja+=1),ge=Bt(ge);var We=mi(ge,Ka);this.fb.push(We),this.db.handleError(Ru(this.La,Me,We,ge.length-1,0))},D.prototype.vb=function(ge,Me){Me==null&&(Me=this.Ja,this.Ja+=1);var We=mi(ge,Ka);this.fb.push(We),this.db.handleError(Ul(this.La,Me,We,ge.length,0))},D.prototype.mb=function(ge,Me){Me==null&&(Me=this.Ja,this.Ja+=1),this.db.handleError((ge===(ge|0)?ju:po)(this.La,Me,ge))},D.prototype.yb=function(ge){ge==null&&(ge=this.Ja,this.Ja+=1),Ul(this.La,ge,0,0,0)},D.prototype.ob=function(ge,Me){switch(Me==null&&(Me=this.Ja,this.Ja+=1),typeof ge){case"string":this.nb(ge,Me);return;case"number":this.mb(ge,Me);return;case"bigint":this.nb(ge.toString(),Me);return;case"boolean":this.mb(ge+0,Me);return;case"object":if(ge===null){this.yb(Me);return}if(ge.length!=null){this.vb(ge,Me);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+ge+")."},D.prototype.xb=function(ge){var Me=this;return Object.keys(ge).forEach(function(We){var ot=Iu(Me.La,We);ot!==0&&Me.ob(ge[We],ot)}),!0},D.prototype.wb=function(ge){for(var Me=0;Me<ge.length;Me+=1)this.ob(ge[Me],Me+1);return!0},D.prototype.reset=function(){return this.freemem(),Hu(this.La)===0&&qu(this.La)===0},D.prototype.freemem=function(){for(var ge;(ge=this.fb.pop())!==void 0;)ia(ge)},D.prototype.free=function(){this.freemem();var ge=Bl(this.La)===0;return delete this.db.Za[this.La],this.La=0,ge},Y.prototype.next=function(){if(this.Ya===null)return{done:!0};if(this.Ua!==null&&(this.Ua.free(),this.Ua=null),!this.db.db)throw this.gb(),Error("Database closed");var ge=Sa(),Me=Un(4);J(_e),J(Me);try{this.db.handleError(Ml(this.db.db,this.eb,-1,_e,Me)),this.eb=le(Me,"i32");var We=le(_e,"i32");return We===0?(this.gb(),{done:!0}):(this.Ua=new D(We,this.db),this.db.Za[We]=this.Ua,{value:this.Ua,done:!1})}catch(ot){throw this.ib=ke(this.eb),this.gb(),ot}finally{Zr(ge)}},Y.prototype.gb=function(){ia(this.Ya),this.Ya=null},Y.prototype.getRemainingSQL=function(){return this.ib!==null?this.ib:ke(this.eb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(Y.prototype[Symbol.iterator]=function(){return this}),ee.prototype.run=function(ge,Me){if(!this.db)throw"Database closed";if(Me){ge=this.prepare(ge,Me);try{ge.step()}finally{ge.free()}}else this.handleError(mt(this.db,ge,0,0,_e));return this},ee.prototype.exec=function(ge,Me,We){if(!this.db)throw"Database closed";var ot=Sa(),_t=null;try{var Yt=pi(ge),pr=Un(4);for(ge=[];le(Yt,"i8")!==0;){J(_e),J(pr),this.handleError(Ml(this.db,Yt,-1,_e,pr));var Jn=le(_e,"i32");if(Yt=le(pr,"i32"),Jn!==0){var Yn=null;for(_t=new D(Jn,this),Me!=null&&_t.bind(Me);_t.step();)Yn===null&&(Yn={columns:_t.getColumnNames(),values:[]},ge.push(Yn)),Yn.values.push(_t.get(null,We));_t.free()}}return ge}catch(Ln){throw _t&&_t.free(),Ln}finally{Zr(ot)}},ee.prototype.each=function(ge,Me,We,ot,_t){typeof Me=="function"&&(ot=We,We=Me,Me=void 0),ge=this.prepare(ge,Me);try{for(;ge.step();)We(ge.getAsObject(null,_t))}finally{ge.free()}if(typeof ot=="function")return ot()},ee.prototype.prepare=function(ge,Me){if(J(_e),this.handleError(an(this.db,ge,-1,_e,0)),ge=le(_e,"i32"),ge===0)throw"Nothing to prepare";var We=new D(ge,this);return Me!=null&&We.bind(Me),this.Za[ge]=We},ee.prototype.iterateStatements=function(ge){return new Y(ge,this)},ee.prototype.export=function(){Object.values(this.Za).forEach(function(Me){Me.free()}),Object.values(this.Na).forEach(sa),this.Na={},this.handleError(Ct(this.db));var ge=ui(this.filename);return this.handleError(it(this.filename,_e)),this.db=le(_e,"i32"),vo(this.db),ge},ee.prototype.close=function(){this.db!==null&&(Object.values(this.Za).forEach(function(ge){ge.free()}),Object.values(this.Na).forEach(sa),this.Na={},this.handleError(Ct(this.db)),Wt("/"+this.filename),this.db=null)},ee.prototype.handleError=function(ge){if(ge===0)return null;throw ge=Uu(this.db),Error(ge)},ee.prototype.getRowsModified=function(){return rn(this.db)},ee.prototype.create_function=function(ge,Me){Object.prototype.hasOwnProperty.call(this.Na,ge)&&(sa(this.Na[ge]),delete this.Na[ge]);var We=Wa(function(ot,_t,Yt){_t=b(_t,Yt);try{var pr=Me.apply(null,_t)}catch(Jn){yi(ot,Jn,-1);return}y(ot,pr)},"viii");return this.Na[ge]=We,this.handleError(Fl(this.db,ge,Me.length,1,0,We,0,0,0)),this},ee.prototype.create_aggregate=function(ge,Me){var We=Me.init||function(){return null},ot=Me.finalize||function(Yn){return Yn},_t=Me.step;if(!_t)throw"An aggregate function must have a step function in "+ge;var Yt={};Object.hasOwnProperty.call(this.Na,ge)&&(sa(this.Na[ge]),delete this.Na[ge]),Me=ge+"__finalize",Object.hasOwnProperty.call(this.Na,Me)&&(sa(this.Na[Me]),delete this.Na[Me]);var pr=Wa(function(Yn,Ln,Ea){var wa=yo(Yn,1);Object.hasOwnProperty.call(Yt,wa)||(Yt[wa]=We()),Ln=b(Ln,Ea),Ln=[Yt[wa]].concat(Ln);try{Yt[wa]=_t.apply(null,Ln)}catch(vi){delete Yt[wa],yi(Yn,vi,-1)}},"viii"),Jn=Wa(function(Yn){var Ln=yo(Yn,1);try{var Ea=ot(Yt[Ln])}catch(wa){delete Yt[Ln],yi(Yn,wa,-1);return}y(Yn,Ea),delete Yt[Ln]},"vi");return this.Na[ge]=pr,this.Na[Me]=Jn,this.handleError(Fl(this.db,ge,_t.length-1,1,0,0,pr,Jn,0)),this},p.Database=ee};var v=Object.assign({},p),x="./this.program",T=typeof window=="object",_=typeof importScripts=="function",E=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",S="",w,O,I;if(E){var U=vh,z=vh;S=_?z.dirname(S)+"/":__dirname+"/",w=(y,b)=>(y=fe(y)?new URL(y):z.normalize(y),U.readFileSync(y,b?void 0:"utf8")),I=y=>(y=w(y,!0),y.buffer||(y=new Uint8Array(y)),y),O=(y,b,D,Y=!0)=>{y=fe(y)?new URL(y):z.normalize(y),U.readFile(y,Y?void 0:"utf8",(ee,_e)=>{ee?D(ee):b(Y?_e.buffer:_e)})},!p.thisProgram&&1<process.argv.length&&(x=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),n.exports=p,p.inspect=()=>"[Emscripten Module object]"}else(T||_)&&(_?S=self.location.href:typeof document<"u"&&document.currentScript&&(S=document.currentScript.src),S=S.indexOf("blob:")!==0?S.substr(0,S.replace(/[?#].*/,"").lastIndexOf("/")+1):"",w=y=>{var b=new XMLHttpRequest;return b.open("GET",y,!1),b.send(null),b.responseText},_&&(I=y=>{var b=new XMLHttpRequest;return b.open("GET",y,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),O=(y,b,D)=>{var Y=new XMLHttpRequest;Y.open("GET",y,!0),Y.responseType="arraybuffer",Y.onload=()=>{Y.status==200||Y.status==0&&Y.response?b(Y.response):D()},Y.onerror=D,Y.send(null)});var F=p.print||console.log.bind(console),V=p.printErr||console.error.bind(console);Object.assign(p,v),v=null,p.thisProgram&&(x=p.thisProgram);var M;p.wasmBinary&&(M=p.wasmBinary),typeof WebAssembly!="object"&&K("no native wasm support detected");var j,R=!1,P,re,B,X,C,ie,$;function q(){var y=j.buffer;p.HEAP8=P=new Int8Array(y),p.HEAP16=B=new Int16Array(y),p.HEAPU8=re=new Uint8Array(y),p.HEAPU16=new Uint16Array(y),p.HEAP32=X=new Int32Array(y),p.HEAPU32=C=new Uint32Array(y),p.HEAPF32=ie=new Float32Array(y),p.HEAPF64=$=new Float64Array(y)}var se=[],W=[],me=[];function L(){var y=p.preRun.shift();se.unshift(y)}var A=0,Z=null;function K(y){var b;throw(b=p.onAbort)==null||b.call(p,y),y="Aborted("+y+")",V(y),R=!0,new WebAssembly.RuntimeError(y+". Build with -sASSERTIONS for more info.")}var te=y=>y.startsWith("data:application/octet-stream;base64,"),fe=y=>y.startsWith("file://"),Ee;if(Ee="sql-wasm.wasm",!te(Ee)){var Te=Ee;Ee=p.locateFile?p.locateFile(Te,S):S+Te}function he(y){if(y==Ee&&M)return new Uint8Array(M);if(I)return I(y);throw"both async and sync fetching of the wasm failed"}function He(y){if(!M&&(T||_)){if(typeof fetch=="function"&&!fe(y))return fetch(y,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+y+"'";return b.arrayBuffer()}).catch(()=>he(y));if(O)return new Promise((b,D)=>{O(y,Y=>b(new Uint8Array(Y)),D)})}return Promise.resolve().then(()=>he(y))}function Be(y,b,D){return He(y).then(Y=>WebAssembly.instantiate(Y,b)).then(Y=>Y).then(D,Y=>{V(`failed to asynchronously prepare wasm: ${Y}`),K(Y)})}function Pe(y,b){var D=Ee;M||typeof WebAssembly.instantiateStreaming!="function"||te(D)||fe(D)||E||typeof fetch!="function"?Be(D,y,b):fetch(D,{credentials:"same-origin"}).then(Y=>WebAssembly.instantiateStreaming(Y,y).then(b,function(ee){return V(`wasm streaming compile failed: ${ee}`),V("falling back to ArrayBuffer instantiation"),Be(D,y,b)}))}var Re,N,be=y=>{for(;0<y.length;)y.shift()(p)};function le(y,b="i8"){switch(b.endsWith("*")&&(b="*"),b){case"i1":return P[y>>0];case"i8":return P[y>>0];case"i16":return B[y>>1];case"i32":return X[y>>2];case"i64":K("to do getValue(i64) use WASM_BIGINT");case"float":return ie[y>>2];case"double":return $[y>>3];case"*":return C[y>>2];default:K(`invalid type for getValue: ${b}`)}}function J(y){var b="i32";switch(b.endsWith("*")&&(b="*"),b){case"i1":P[y>>0]=0;break;case"i8":P[y>>0]=0;break;case"i16":B[y>>1]=0;break;case"i32":X[y>>2]=0;break;case"i64":K("to do setValue(i64) use WASM_BIGINT");case"float":ie[y>>2]=0;break;case"double":$[y>>3]=0;break;case"*":C[y>>2]=0;break;default:K(`invalid type for setValue: ${b}`)}}var Q=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,ae=(y,b,D)=>{var Y=b+D;for(D=b;y[D]&&!(D>=Y);)++D;if(16<D-b&&y.buffer&&Q)return Q.decode(y.subarray(b,D));for(Y="";b<D;){var ee=y[b++];if(ee&128){var _e=y[b++]&63;if((ee&224)==192)Y+=String.fromCharCode((ee&31)<<6|_e);else{var Ce=y[b++]&63;ee=(ee&240)==224?(ee&15)<<12|_e<<6|Ce:(ee&7)<<18|_e<<12|Ce<<6|y[b++]&63,65536>ee?Y+=String.fromCharCode(ee):(ee-=65536,Y+=String.fromCharCode(55296|ee>>10,56320|ee&1023))}}else Y+=String.fromCharCode(ee)}return Y},ke=(y,b)=>y?ae(re,y,b):"",De=(y,b)=>{for(var D=0,Y=y.length-1;0<=Y;Y--){var ee=y[Y];ee==="."?y.splice(Y,1):ee===".."?(y.splice(Y,1),D++):D&&(y.splice(Y,1),D--)}if(b)for(;D;D--)y.unshift("..");return y},ue=y=>{var b=y.charAt(0)==="/",D=y.substr(-1)==="/";return(y=De(y.split("/").filter(Y=>!!Y),!b).join("/"))||b||(y="."),y&&D&&(y+="/"),(b?"/":"")+y},je=y=>{var b=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(y).slice(1);return y=b[0],b=b[1],!y&&!b?".":(b&&(b=b.substr(0,b.length-1)),y+b)},ze=y=>{if(y==="/")return"/";y=ue(y),y=y.replace(/\/$/,"");var b=y.lastIndexOf("/");return b===-1?y:y.substr(b+1)},Ne=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return D=>crypto.getRandomValues(D);if(E)try{var y=vh;if(y.randomFillSync)return D=>y.randomFillSync(D);var b=y.randomBytes;return D=>(D.set(b(D.byteLength)),D)}catch{}K("initRandomDevice")},Je=y=>(Je=Ne())(y);function ht(){for(var y="",b=!1,D=arguments.length-1;-1<=D&&!b;D--){if(b=0<=D?arguments[D]:"/",typeof b!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!b)return"";y=b+"/"+y,b=b.charAt(0)==="/"}return y=De(y.split("/").filter(Y=>!!Y),!b).join("/"),(b?"/":"")+y||"."}var st=[],Rt=y=>{for(var b=0,D=0;D<y.length;++D){var Y=y.charCodeAt(D);127>=Y?b++:2047>=Y?b+=2:55296<=Y&&57343>=Y?(b+=4,++D):b+=3}return b},Qt=(y,b,D,Y)=>{if(!(0<Y))return 0;var ee=D;Y=D+Y-1;for(var _e=0;_e<y.length;++_e){var Ce=y.charCodeAt(_e);if(55296<=Ce&&57343>=Ce){var it=y.charCodeAt(++_e);Ce=65536+((Ce&1023)<<10)|it&1023}if(127>=Ce){if(D>=Y)break;b[D++]=Ce}else{if(2047>=Ce){if(D+1>=Y)break;b[D++]=192|Ce>>6}else{if(65535>=Ce){if(D+2>=Y)break;b[D++]=224|Ce>>12}else{if(D+3>=Y)break;b[D++]=240|Ce>>18,b[D++]=128|Ce>>12&63}b[D++]=128|Ce>>6&63}b[D++]=128|Ce&63}}return b[D]=0,D-ee};function Bt(y,b){var D=Array(Rt(y)+1);return y=Qt(y,D,0,D.length),b&&(D.length=y),D}var Pt=[];function pt(y,b){Pt[y]={input:[],output:[],Xa:b},Va(y,xt)}var xt={open(y){var b=Pt[y.node.rdev];if(!b)throw new qe(43);y.tty=b,y.seekable=!1},close(y){y.tty.Xa.fsync(y.tty)},fsync(y){y.tty.Xa.fsync(y.tty)},read(y,b,D,Y){if(!y.tty||!y.tty.Xa.sb)throw new qe(60);for(var ee=0,_e=0;_e<Y;_e++){try{var Ce=y.tty.Xa.sb(y.tty)}catch{throw new qe(29)}if(Ce===void 0&&ee===0)throw new qe(6);if(Ce==null)break;ee++,b[D+_e]=Ce}return ee&&(y.node.timestamp=Date.now()),ee},write(y,b,D,Y){if(!y.tty||!y.tty.Xa.jb)throw new qe(60);try{for(var ee=0;ee<Y;ee++)y.tty.Xa.jb(y.tty,b[D+ee])}catch{throw new qe(29)}return Y&&(y.node.timestamp=Date.now()),ee}},mn={sb(){e:{if(!st.length){var y=null;if(E){var b=Buffer.alloc(256),D=0,Y=process.stdin.fd;try{D=U.readSync(Y,b)}catch(ee){if(ee.toString().includes("EOF"))D=0;else throw ee}0<D?y=b.slice(0,D).toString("utf-8"):y=null}else typeof window<"u"&&typeof window.prompt=="function"?(y=window.prompt("Input: "),y!==null&&(y+=`
`)):typeof readline=="function"&&(y=readline(),y!==null&&(y+=`
`));if(!y){y=null;break e}st=Bt(y,!0)}y=st.shift()}return y},jb(y,b){b===null||b===10?(F(ae(y.output,0)),y.output=[]):b!=0&&y.output.push(b)},fsync(y){y.output&&0<y.output.length&&(F(ae(y.output,0)),y.output=[])},Mb(){return{Ib:25856,Kb:5,Hb:191,Jb:35387,Gb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Nb(){return 0},Ob(){return[24,80]}},It={jb(y,b){b===null||b===10?(V(ae(y.output,0)),y.output=[]):b!=0&&y.output.push(b)},fsync(y){y.output&&0<y.output.length&&(V(ae(y.output,0)),y.output=[])}};function ma(y,b){var D=y.Ia?y.Ia.length:0;D>=b||(b=Math.max(b,D*(1048576>D?2:1.125)>>>0),D!=0&&(b=Math.max(b,256)),D=y.Ia,y.Ia=new Uint8Array(b),0<y.Ma&&y.Ia.set(D.subarray(0,y.Ma),0))}var dt={Qa:null,Ra(){return dt.createNode(null,"/",16895,0)},createNode(y,b,D,Y){if((D&61440)===24576||(D&61440)===4096)throw new qe(63);return dt.Qa||(dt.Qa={dir:{node:{Pa:dt.Ga.Pa,Oa:dt.Ga.Oa,lookup:dt.Ga.lookup,ab:dt.Ga.ab,rename:dt.Ga.rename,unlink:dt.Ga.unlink,rmdir:dt.Ga.rmdir,readdir:dt.Ga.readdir,symlink:dt.Ga.symlink},stream:{Ta:dt.Ha.Ta}},file:{node:{Pa:dt.Ga.Pa,Oa:dt.Ga.Oa},stream:{Ta:dt.Ha.Ta,read:dt.Ha.read,write:dt.Ha.write,lb:dt.Ha.lb,bb:dt.Ha.bb,cb:dt.Ha.cb}},link:{node:{Pa:dt.Ga.Pa,Oa:dt.Ga.Oa,readlink:dt.Ga.readlink},stream:{}},pb:{node:{Pa:dt.Ga.Pa,Oa:dt.Ga.Oa},stream:Ya}}),D=In(y,b,D,Y),xn(D.mode)?(D.Ga=dt.Qa.dir.node,D.Ha=dt.Qa.dir.stream,D.Ia={}):(D.mode&61440)===32768?(D.Ga=dt.Qa.file.node,D.Ha=dt.Qa.file.stream,D.Ma=0,D.Ia=null):(D.mode&61440)===40960?(D.Ga=dt.Qa.link.node,D.Ha=dt.Qa.link.stream):(D.mode&61440)===8192&&(D.Ga=dt.Qa.pb.node,D.Ha=dt.Qa.pb.stream),D.timestamp=Date.now(),y&&(y.Ia[b]=D,y.timestamp=D.timestamp),D},Lb(y){return y.Ia?y.Ia.subarray?y.Ia.subarray(0,y.Ma):new Uint8Array(y.Ia):new Uint8Array(0)},Ga:{Pa(y){var b={};return b.dev=(y.mode&61440)===8192?y.id:1,b.ino=y.id,b.mode=y.mode,b.nlink=1,b.uid=0,b.gid=0,b.rdev=y.rdev,xn(y.mode)?b.size=4096:(y.mode&61440)===32768?b.size=y.Ma:(y.mode&61440)===40960?b.size=y.link.length:b.size=0,b.atime=new Date(y.timestamp),b.mtime=new Date(y.timestamp),b.ctime=new Date(y.timestamp),b.zb=4096,b.blocks=Math.ceil(b.size/b.zb),b},Oa(y,b){if(b.mode!==void 0&&(y.mode=b.mode),b.timestamp!==void 0&&(y.timestamp=b.timestamp),b.size!==void 0&&(b=b.size,y.Ma!=b))if(b==0)y.Ia=null,y.Ma=0;else{var D=y.Ia;y.Ia=new Uint8Array(b),D&&y.Ia.set(D.subarray(0,Math.min(b,y.Ma))),y.Ma=b}},lookup(){throw ga[44]},ab(y,b,D,Y){return dt.createNode(y,b,D,Y)},rename(y,b,D){if(xn(y.mode)){try{var Y=Dr(b,D)}catch{}if(Y)for(var ee in Y.Ia)throw new qe(55)}delete y.parent.Ia[y.name],y.parent.timestamp=Date.now(),y.name=D,b.Ia[D]=y,b.timestamp=y.parent.timestamp,y.parent=b},unlink(y,b){delete y.Ia[b],y.timestamp=Date.now()},rmdir(y,b){var D=Dr(y,b),Y;for(Y in D.Ia)throw new qe(55);delete y.Ia[b],y.timestamp=Date.now()},readdir(y){var b=[".",".."],D;for(D of Object.keys(y.Ia))b.push(D);return b},symlink(y,b,D){return y=dt.createNode(y,b,41471,0),y.link=D,y},readlink(y){if((y.mode&61440)!==40960)throw new qe(28);return y.link}},Ha:{read(y,b,D,Y,ee){var _e=y.node.Ia;if(ee>=y.node.Ma)return 0;if(y=Math.min(y.node.Ma-ee,Y),8<y&&_e.subarray)b.set(_e.subarray(ee,ee+y),D);else for(Y=0;Y<y;Y++)b[D+Y]=_e[ee+Y];return y},write(y,b,D,Y,ee,_e){if(b.buffer===P.buffer&&(_e=!1),!Y)return 0;if(y=y.node,y.timestamp=Date.now(),b.subarray&&(!y.Ia||y.Ia.subarray)){if(_e)return y.Ia=b.subarray(D,D+Y),y.Ma=Y;if(y.Ma===0&&ee===0)return y.Ia=b.slice(D,D+Y),y.Ma=Y;if(ee+Y<=y.Ma)return y.Ia.set(b.subarray(D,D+Y),ee),Y}if(ma(y,ee+Y),y.Ia.subarray&&b.subarray)y.Ia.set(b.subarray(D,D+Y),ee);else for(_e=0;_e<Y;_e++)y.Ia[ee+_e]=b[D+_e];return y.Ma=Math.max(y.Ma,ee+Y),Y},Ta(y,b,D){if(D===1?b+=y.position:D===2&&(y.node.mode&61440)===32768&&(b+=y.node.Ma),0>b)throw new qe(28);return b},lb(y,b,D){ma(y.node,b+D),y.node.Ma=Math.max(y.node.Ma,b+D)},bb(y,b,D,Y,ee){if((y.node.mode&61440)!==32768)throw new qe(43);if(y=y.node.Ia,ee&2||y.buffer!==P.buffer){if((0<D||D+b<y.length)&&(y.subarray?y=y.subarray(D,D+b):y=Array.prototype.slice.call(y,D,D+b)),D=!0,b=65536*Math.ceil(b/65536),(ee=Ir(65536,b))?(re.fill(0,ee,ee+b),b=ee):b=0,!b)throw new qe(48);P.set(y,b)}else D=!1,b=y.byteOffset;return{Db:b,ub:D}},cb(y,b,D,Y){return dt.Ha.write(y,b,0,Y,D,!1),0}}},qa=(y,b)=>{var D=0;return y&&(D|=365),b&&(D|=146),D},Nr=null,Ft={},ln=[],jn=1,Qn=null,$r=!0,qe=null,ga={};function gn(y,b={}){if(y=ht(y),!y)return{path:"",node:null};if(b=Object.assign({qb:!0,kb:0},b),8<b.kb)throw new qe(32);y=y.split("/").filter(Ce=>!!Ce);for(var D=Nr,Y="/",ee=0;ee<y.length;ee++){var _e=ee===y.length-1;if(_e&&b.parent)break;if(D=Dr(D,y[ee]),Y=ue(Y+"/"+y[ee]),D.Va&&(!_e||_e&&b.qb)&&(D=D.Va.root),!_e||b.Sa){for(_e=0;(D.mode&61440)===40960;)if(D=Xt(Y),Y=ht(je(Y),D),D=gn(Y,{kb:b.kb+1}).node,40<_e++)throw new qe(32)}}return{path:Y,node:D}}function fr(y){for(var b;;){if(y===y.parent)return y=y.Ra.tb,b?y[y.length-1]!=="/"?`${y}/${b}`:y+b:y;b=b?`${y.name}/${b}`:y.name,y=y.parent}}function Ha(y,b){for(var D=0,Y=0;Y<b.length;Y++)D=(D<<5)-D+b.charCodeAt(Y)|0;return(y+D>>>0)%Qn.length}function Pa(y){var b=Ha(y.parent.id,y.name);if(Qn[b]===y)Qn[b]=y.Wa;else for(b=Qn[b];b;){if(b.Wa===y){b.Wa=y.Wa;break}b=b.Wa}}function Dr(y,b){var D;if(D=(D=Cr(y,"x"))?D:y.Ga.lookup?0:2)throw new qe(D,y);for(D=Qn[Ha(y.id,b)];D;D=D.Wa){var Y=D.name;if(D.parent.id===y.id&&Y===b)return D}return y.Ga.lookup(y,b)}function In(y,b,D,Y){return y=new _a(y,b,D,Y),b=Ha(y.parent.id,y.name),y.Wa=Qn[b],Qn[b]=y}function xn(y){return(y&61440)===16384}function ya(y){var b=["r","w","rw"][y&3];return y&512&&(b+="w"),b}function Cr(y,b){if($r)return 0;if(!b.includes("r")||y.mode&292){if(b.includes("w")&&!(y.mode&146)||b.includes("x")&&!(y.mode&73))return 2}else return 2;return 0}function Is(y,b){try{return Dr(y,b),20}catch{}return Cr(y,"wx")}function sr(y,b,D){try{var Y=Dr(y,b)}catch(ee){return ee.Ka}if(y=Cr(y,"wx"))return y;if(D){if(!xn(Y.mode))return 54;if(Y===Y.parent||fr(Y)==="/")return 10}else if(xn(Y.mode))return 31;return 0}function Gt(){for(var y=0;4096>=y;y++)if(!ln[y])return y;throw new qe(33)}function Mt(y){if(y=ln[y],!y)throw new qe(8);return y}function Or(y,b=-1){return va||(va=function(){this.$a={}},va.prototype={},Object.defineProperties(va.prototype,{object:{get(){return this.node},set(D){this.node=D}},flags:{get(){return this.$a.flags},set(D){this.$a.flags=D}},position:{get(){return this.$a.position},set(D){this.$a.position=D}}})),y=Object.assign(new va,y),b==-1&&(b=Gt()),y.fd=b,ln[b]=y}var Ya={open(y){var b,D;y.Ha=Ft[y.node.rdev].Ha,(D=(b=y.Ha).open)==null||D.call(b,y)},Ta(){throw new qe(70)}};function Va(y,b){Ft[y]={Ha:b}}function ci(y,b){var D=b==="/",Y=!b;if(D&&Nr)throw new qe(10);if(!D&&!Y){var ee=gn(b,{qb:!1});if(b=ee.path,ee=ee.node,ee.Va)throw new qe(10);if(!xn(ee.mode))throw new qe(54)}b={type:y,Pb:{},tb:b,Cb:[]},y=y.Ra(b),y.Ra=b,b.root=y,D?Nr=y:ee&&(ee.Va=b,ee.Ra&&ee.Ra.Cb.push(b))}function Xe(y,b,D){var Y=gn(y,{parent:!0}).node;if(y=ze(y),!y||y==="."||y==="..")throw new qe(28);var ee=Is(Y,y);if(ee)throw new qe(ee);if(!Y.Ga.ab)throw new qe(63);return Y.Ga.ab(Y,y,b,D)}function oe(y,b){return Xe(y,(b!==void 0?b:511)&1023|16384,0)}function Le(y,b,D){typeof D>"u"&&(D=b,b=438),Xe(y,b|8192,D)}function Ze(y,b){if(!ht(y))throw new qe(44);var D=gn(b,{parent:!0}).node;if(!D)throw new qe(44);b=ze(b);var Y=Is(D,b);if(Y)throw new qe(Y);if(!D.Ga.symlink)throw new qe(63);D.Ga.symlink(D,b,y)}function ct(y){var b=gn(y,{parent:!0}).node;y=ze(y);var D=Dr(b,y),Y=sr(b,y,!0);if(Y)throw new qe(Y);if(!b.Ga.rmdir)throw new qe(63);if(D.Va)throw new qe(10);b.Ga.rmdir(b,y),Pa(D)}function Wt(y){var b=gn(y,{parent:!0}).node;if(!b)throw new qe(44);y=ze(y);var D=Dr(b,y),Y=sr(b,y,!1);if(Y)throw new qe(Y);if(!b.Ga.unlink)throw new qe(63);if(D.Va)throw new qe(10);b.Ga.unlink(b,y),Pa(D)}function Xt(y){if(y=gn(y).node,!y)throw new qe(44);if(!y.Ga.readlink)throw new qe(28);return ht(fr(y.parent),y.Ga.readlink(y))}function wt(y,b){if(y=gn(y,{Sa:!b}).node,!y)throw new qe(44);if(!y.Ga.Pa)throw new qe(63);return y.Ga.Pa(y)}function _n(y){return wt(y,!0)}function hr(y,b){if(y=typeof y=="string"?gn(y,{Sa:!0}).node:y,!y.Ga.Oa)throw new qe(63);y.Ga.Oa(y,{mode:b&4095|y.mode&-4096,timestamp:Date.now()})}function en(y,b){if(0>b)throw new qe(28);if(y=typeof y=="string"?gn(y,{Sa:!0}).node:y,!y.Ga.Oa)throw new qe(63);if(xn(y.mode))throw new qe(31);if((y.mode&61440)!==32768)throw new qe(28);var D=Cr(y,"w");if(D)throw new qe(D);y.Ga.Oa(y,{size:b,timestamp:Date.now()})}function Pn(y,b,D){if(y==="")throw new qe(44);if(typeof b=="string"){var Y={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[b];if(typeof Y>"u")throw Error(`Unknown file open mode: ${b}`);b=Y}if(D=b&64?(typeof D>"u"?438:D)&4095|32768:0,typeof y=="object")var ee=y;else{y=ue(y);try{ee=gn(y,{Sa:!(b&131072)}).node}catch{}}if(Y=!1,b&64)if(ee){if(b&128)throw new qe(20)}else ee=Xe(y,D,0),Y=!0;if(!ee)throw new qe(44);if((ee.mode&61440)===8192&&(b&=-513),b&65536&&!xn(ee.mode))throw new qe(54);if(!Y&&(D=ee?(ee.mode&61440)===40960?32:xn(ee.mode)&&(ya(b)!=="r"||b&512)?31:Cr(ee,ya(b)):44))throw new qe(D);return b&512&&!Y&&en(ee,0),b&=-131713,ee=Or({node:ee,path:fr(ee),flags:b,seekable:!0,position:0,Ha:ee.Ha,Fb:[],error:!1}),ee.Ha.open&&ee.Ha.open(ee),!p.logReadFiles||b&1||(di||(di={}),y in di||(di[y]=1)),ee}function $a(y){if(y.fd===null)throw new qe(8);y.hb&&(y.hb=null);try{y.Ha.close&&y.Ha.close(y)}catch(b){throw b}finally{ln[y.fd]=null}y.fd=null}function oo(y,b,D){if(y.fd===null)throw new qe(8);if(!y.seekable||!y.Ha.Ta)throw new qe(70);if(D!=0&&D!=1&&D!=2)throw new qe(28);y.position=y.Ha.Ta(y,b,D),y.Fb=[]}function lo(y,b,D,Y,ee){if(0>Y||0>ee)throw new qe(28);if(y.fd===null)throw new qe(8);if((y.flags&2097155)===1)throw new qe(8);if(xn(y.node.mode))throw new qe(31);if(!y.Ha.read)throw new qe(28);var _e=typeof ee<"u";if(!_e)ee=y.position;else if(!y.seekable)throw new qe(70);return b=y.Ha.read(y,b,D,Y,ee),_e||(y.position+=b),b}function Rl(y,b,D,Y,ee){if(0>Y||0>ee)throw new qe(28);if(y.fd===null)throw new qe(8);if((y.flags&2097155)===0)throw new qe(8);if(xn(y.node.mode))throw new qe(31);if(!y.Ha.write)throw new qe(28);y.seekable&&y.flags&1024&&oo(y,0,2);var _e=typeof ee<"u";if(!_e)ee=y.position;else if(!y.seekable)throw new qe(70);return b=y.Ha.write(y,b,D,Y,ee,void 0),_e||(y.position+=b),b}function ui(y){var b,D=Pn(y,D||0);y=wt(y).size;var Y=new Uint8Array(y);return lo(D,Y,0,y,0),b=Y,$a(D),b}function Ms(){qe||(qe=function(y,b){this.name="ErrnoError",this.node=b,this.Eb=function(D){this.Ka=D},this.Eb(y),this.message="FS error"},qe.prototype=Error(),qe.prototype.constructor=qe,[44].forEach(y=>{ga[y]=new qe(y),ga[y].stack="<generic error, no stack>"}))}var Rr;function Dn(y,b,D){y=ue("/dev/"+y);var Y=qa(!!b,!!D);co||(co=64);var ee=co++<<8|0;Va(ee,{open(_e){_e.seekable=!1},close(){var _e;(_e=D==null?void 0:D.buffer)!=null&&_e.length&&D(10)},read(_e,Ce,it,Ct){for(var mt=0,rn=0;rn<Ct;rn++){try{var an=b()}catch{throw new qe(29)}if(an===void 0&&mt===0)throw new qe(6);if(an==null)break;mt++,Ce[it+rn]=an}return mt&&(_e.node.timestamp=Date.now()),mt},write(_e,Ce,it,Ct){for(var mt=0;mt<Ct;mt++)try{D(Ce[it+mt])}catch{throw new qe(29)}return Ct&&(_e.node.timestamp=Date.now()),mt}}),Le(y,Y,ee)}var co,Jt={},va,di;function jr(y,b,D){if(b.charAt(0)==="/")return b;if(y=y===-100?"/":Mt(y).path,b.length==0){if(!D)throw new qe(44);return y}return ue(y+"/"+b)}function fi(y,b,D){try{var Y=y(b)}catch(_e){if(_e&&_e.node&&ue(b)!==ue(fr(_e.node)))return-54;throw _e}X[D>>2]=Y.dev,X[D+4>>2]=Y.mode,C[D+8>>2]=Y.nlink,X[D+12>>2]=Y.uid,X[D+16>>2]=Y.gid,X[D+20>>2]=Y.rdev,N=[Y.size>>>0,(Re=Y.size,1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[D+24>>2]=N[0],X[D+28>>2]=N[1],X[D+32>>2]=4096,X[D+36>>2]=Y.blocks,y=Y.atime.getTime(),b=Y.mtime.getTime();var ee=Y.ctime.getTime();return N=[Math.floor(y/1e3)>>>0,(Re=Math.floor(y/1e3),1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[D+40>>2]=N[0],X[D+44>>2]=N[1],C[D+48>>2]=y%1e3*1e3,N=[Math.floor(b/1e3)>>>0,(Re=Math.floor(b/1e3),1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[D+56>>2]=N[0],X[D+60>>2]=N[1],C[D+64>>2]=b%1e3*1e3,N=[Math.floor(ee/1e3)>>>0,(Re=Math.floor(ee/1e3),1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[D+72>>2]=N[0],X[D+76>>2]=N[1],C[D+80>>2]=ee%1e3*1e3,N=[Y.ino>>>0,(Re=Y.ino,1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[D+88>>2]=N[0],X[D+92>>2]=N[1],0}var Mn=void 0;function Za(){var y=X[+Mn>>2];return Mn+=4,y}var Qa=(y,b)=>b+2097152>>>0<4194305-!!y?(y>>>0)+4294967296*b:NaN,uo=[0,31,60,91,121,152,182,213,244,274,305,335],Ja=[0,31,59,90,120,151,181,212,243,273,304,334],fo=y=>{var b=Rt(y)+1,D=Us(b);return D&&Qt(y,re,D,b),D},hi={},ba=()=>{if(!ho){var y={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:x||"./this.program"},b;for(b in hi)hi[b]===void 0?delete y[b]:y[b]=hi[b];var D=[];for(b in y)D.push(`${b}=${y[b]}`);ho=D}return ho},ho,pi=y=>{var b=Rt(y)+1,D=Un(b);return Qt(y,re,D,b),D},jl=(y,b,D,Y)=>{var ee={string:mt=>{var rn=0;return mt!=null&&mt!==0&&(rn=pi(mt)),rn},array:mt=>{var rn=Un(mt.length);return P.set(mt,rn),rn}};y=p["_"+y];var _e=[],Ce=0;if(Y)for(var it=0;it<Y.length;it++){var Ct=ee[D[it]];Ct?(Ce===0&&(Ce=Sa()),_e[it]=Ct(Y[it])):_e[it]=Y[it]}return D=y.apply(null,_e),D=(function(mt){return Ce!==0&&Zr(Ce),b==="string"?mt?ae(re,mt):"":b==="boolean"?!!mt:mt})(D)},Ka=0,mi=(y,b)=>(b=b==1?Un(y.length):Us(y.length),y.subarray||y.slice||(y=new Uint8Array(y)),re.set(y,b),b),xa,Xa=[],An,sa=y=>{xa.delete(An.get(y)),An.set(y,null),Xa.push(y)},Wa=(y,b)=>{if(!xa){xa=new WeakMap;var D=An.length;if(xa)for(var Y=0;Y<0+D;Y++){var ee=An.get(Y);ee&&xa.set(ee,Y)}}if(D=xa.get(y)||0)return D;if(Xa.length)D=Xa.pop();else{try{An.grow(1)}catch(it){throw it instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":it}D=An.length-1}try{An.set(D,y)}catch(it){if(!(it instanceof TypeError))throw it;if(typeof WebAssembly.Function=="function"){Y=WebAssembly.Function,ee={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var _e={parameters:[],results:b[0]=="v"?[]:[ee[b[0]]]},Ce=1;Ce<b.length;++Ce)_e.parameters.push(ee[b[Ce]]);b=new Y(_e,y)}else{for(Y=[1],ee=b.slice(0,1),b=b.slice(1),_e={i:127,p:127,j:126,f:125,d:124,e:111},Y.push(96),Ce=b.length,128>Ce?Y.push(Ce):Y.push(Ce%128|128,Ce>>7),Ce=0;Ce<b.length;++Ce)Y.push(_e[b[Ce]]);ee=="v"?Y.push(0):Y.push(1,_e[ee]),b=[0,97,115,109,1,0,0,0,1],ee=Y.length,128>ee?b.push(ee):b.push(ee%128|128,ee>>7),b.push.apply(b,Y),b.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),b=new WebAssembly.Module(new Uint8Array(b)),b=new WebAssembly.Instance(b,{e:{f:y}}).exports.f}An.set(D,b)}return xa.set(y,D),D};function _a(y,b,D,Y){y||(y=this),this.parent=y,this.Ra=y.Ra,this.Va=null,this.id=jn++,this.name=b,this.mode=D,this.Ga={},this.Ha={},this.rdev=Y}Object.defineProperties(_a.prototype,{read:{get:function(){return(this.mode&365)===365},set:function(y){y?this.mode|=365:this.mode&=-366}},write:{get:function(){return(this.mode&146)===146},set:function(y){y?this.mode|=146:this.mode&=-147}}}),Ms(),Qn=Array(4096),ci(dt,"/"),oe("/tmp"),oe("/home"),oe("/home/web_user"),(function(){oe("/dev"),Va(259,{read:()=>0,write:(Y,ee,_e,Ce)=>Ce}),Le("/dev/null",259),pt(1280,mn),pt(1536,It),Le("/dev/tty",1280),Le("/dev/tty1",1536);var y=new Uint8Array(1024),b=0,D=()=>(b===0&&(b=Je(y).byteLength),y[--b]);Dn("random",D),Dn("urandom",D),oe("/dev/shm"),oe("/dev/shm/tmp")})(),(function(){oe("/proc");var y=oe("/proc/self");oe("/proc/self/fd"),ci({Ra(){var b=In(y,"fd",16895,73);return b.Ga={lookup(D,Y){var ee=Mt(+Y);return D={parent:null,Ra:{tb:"fake"},Ga:{readlink:()=>ee.path}},D.parent=D}},b}},"/proc/self/fd")})();var es={a:(y,b,D,Y)=>{K(`Assertion failed: ${y?ae(re,y):""}, at: `+[b?b?ae(re,b):"":"unknown filename",D,Y?Y?ae(re,Y):"":"unknown function"])},h:function(y,b){try{return y=y?ae(re,y):"",hr(y,b),0}catch(D){if(typeof Jt>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},H:function(y,b,D){try{if(b=b?ae(re,b):"",b=jr(y,b),D&-8)return-28;var Y=gn(b,{Sa:!0}).node;return Y?(y="",D&4&&(y+="r"),D&2&&(y+="w"),D&1&&(y+="x"),y&&Cr(Y,y)?-2:0):-44}catch(ee){if(typeof Jt>"u"||ee.name!=="ErrnoError")throw ee;return-ee.Ka}},i:function(y,b){try{var D=Mt(y);return hr(D.node,b),0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},g:function(y){try{var b=Mt(y).node,D=typeof b=="string"?gn(b,{Sa:!0}).node:b;if(!D.Ga.Oa)throw new qe(63);return D.Ga.Oa(D,{timestamp:Date.now()}),0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},b:function(y,b,D){Mn=D;try{var Y=Mt(y);switch(b){case 0:var ee=Za();if(0>ee)return-28;for(;ln[ee];)ee++;return Or(Y,ee).fd;case 1:case 2:return 0;case 3:return Y.flags;case 4:return ee=Za(),Y.flags|=ee,0;case 5:return ee=Za(),B[ee+0>>1]=2,0;case 6:case 7:return 0;case 16:case 8:return-28;case 9:return X[gi()>>2]=28,-1;default:return-28}}catch(_e){if(typeof Jt>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Ka}},f:function(y,b){try{var D=Mt(y);return fi(wt,D.path,b)}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},n:function(y,b,D){b=Qa(b,D);try{if(isNaN(b))return 61;var Y=Mt(y);if((Y.flags&2097155)===0)throw new qe(28);return en(Y.node,b),0}catch(ee){if(typeof Jt>"u"||ee.name!=="ErrnoError")throw ee;return-ee.Ka}},C:function(y,b){try{if(b===0)return-28;var D=Rt("/")+1;return b<D?-68:(Qt("/",re,y,b),D)}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},F:function(y,b){try{return y=y?ae(re,y):"",fi(_n,y,b)}catch(D){if(typeof Jt>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},z:function(y,b,D){try{return b=b?ae(re,b):"",b=jr(y,b),b=ue(b),b[b.length-1]==="/"&&(b=b.substr(0,b.length-1)),oe(b,D),0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},E:function(y,b,D,Y){try{b=b?ae(re,b):"";var ee=Y&256;return b=jr(y,b,Y&4096),fi(ee?_n:wt,b,D)}catch(_e){if(typeof Jt>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Ka}},y:function(y,b,D,Y){Mn=Y;try{b=b?ae(re,b):"",b=jr(y,b);var ee=Y?Za():0;return Pn(b,D,ee).fd}catch(_e){if(typeof Jt>"u"||_e.name!=="ErrnoError")throw _e;return-_e.Ka}},w:function(y,b,D,Y){try{if(b=b?ae(re,b):"",b=jr(y,b),0>=Y)return-28;var ee=Xt(b),_e=Math.min(Y,Rt(ee)),Ce=P[D+_e];return Qt(ee,re,D,Y+1),P[D+_e]=Ce,_e}catch(it){if(typeof Jt>"u"||it.name!=="ErrnoError")throw it;return-it.Ka}},v:function(y){try{return y=y?ae(re,y):"",ct(y),0}catch(b){if(typeof Jt>"u"||b.name!=="ErrnoError")throw b;return-b.Ka}},G:function(y,b){try{return y=y?ae(re,y):"",fi(wt,y,b)}catch(D){if(typeof Jt>"u"||D.name!=="ErrnoError")throw D;return-D.Ka}},r:function(y,b,D){try{return b=b?ae(re,b):"",b=jr(y,b),D===0?Wt(b):D===512?ct(b):K("Invalid flags passed to unlinkat"),0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return-Y.Ka}},q:function(y,b,D){try{if(b=b?ae(re,b):"",b=jr(y,b,!0),D){var Y=C[D>>2]+4294967296*X[D+4>>2],ee=X[D+8>>2];_e=1e3*Y+ee/1e6,D+=16,Y=C[D>>2]+4294967296*X[D+4>>2],ee=X[D+8>>2],Ce=1e3*Y+ee/1e6}else var _e=Date.now(),Ce=_e;y=_e;var it=gn(b,{Sa:!0}).node;return it.Ga.Oa(it,{timestamp:Math.max(y,Ce)}),0}catch(Ct){if(typeof Jt>"u"||Ct.name!=="ErrnoError")throw Ct;return-Ct.Ka}},l:function(y,b,D){y=new Date(1e3*Qa(y,b)),X[D>>2]=y.getSeconds(),X[D+4>>2]=y.getMinutes(),X[D+8>>2]=y.getHours(),X[D+12>>2]=y.getDate(),X[D+16>>2]=y.getMonth(),X[D+20>>2]=y.getFullYear()-1900,X[D+24>>2]=y.getDay(),b=y.getFullYear(),X[D+28>>2]=(b%4!==0||b%100===0&&b%400!==0?Ja:uo)[y.getMonth()]+y.getDate()-1|0,X[D+36>>2]=-(60*y.getTimezoneOffset()),b=new Date(y.getFullYear(),6,1).getTimezoneOffset();var Y=new Date(y.getFullYear(),0,1).getTimezoneOffset();X[D+32>>2]=(b!=Y&&y.getTimezoneOffset()==Math.min(Y,b))|0},j:function(y,b,D,Y,ee,_e,Ce,it){ee=Qa(ee,_e);try{if(isNaN(ee))return 61;var Ct=Mt(Y);if((b&2)!==0&&(D&2)===0&&(Ct.flags&2097155)!==2)throw new qe(2);if((Ct.flags&2097155)===1)throw new qe(2);if(!Ct.Ha.bb)throw new qe(43);var mt=Ct.Ha.bb(Ct,y,ee,b,D),rn=mt.Db;return X[Ce>>2]=mt.ub,C[it>>2]=rn,0}catch(an){if(typeof Jt>"u"||an.name!=="ErrnoError")throw an;return-an.Ka}},k:function(y,b,D,Y,ee,_e,Ce){_e=Qa(_e,Ce);try{if(isNaN(_e))return 61;var it=Mt(ee);if(D&2){if((it.node.mode&61440)!==32768)throw new qe(43);if(!(Y&2)){var Ct=re.slice(y,y+b);it.Ha.cb&&it.Ha.cb(it,Ct,_e,b,Y)}}}catch(mt){if(typeof Jt>"u"||mt.name!=="ErrnoError")throw mt;return-mt.Ka}},s:(y,b,D)=>{function Y(Ct){return(Ct=Ct.toTimeString().match(/\(([A-Za-z ]+)\)$/))?Ct[1]:"GMT"}var ee=new Date().getFullYear(),_e=new Date(ee,0,1),Ce=new Date(ee,6,1);ee=_e.getTimezoneOffset();var it=Ce.getTimezoneOffset();C[y>>2]=60*Math.max(ee,it),X[b>>2]=+(ee!=it),y=Y(_e),b=Y(Ce),y=fo(y),b=fo(b),it<ee?(C[D>>2]=y,C[D+4>>2]=b):(C[D>>2]=b,C[D+4>>2]=y)},d:()=>Date.now(),t:()=>2147483648,c:()=>performance.now(),o:y=>{var b=re.length;if(y>>>=0,2147483648<y)return!1;for(var D=1;4>=D;D*=2){var Y=b*(1+.2/D);Y=Math.min(Y,y+100663296);var ee=Math;Y=Math.max(y,Y);e:{ee=(ee.min.call(ee,2147483648,Y+(65536-Y%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(ee),q();var _e=1;break e}catch{}_e=void 0}if(_e)return!0}return!1},A:(y,b)=>{var D=0;return ba().forEach((Y,ee)=>{var _e=b+D;for(ee=C[y+4*ee>>2]=_e,_e=0;_e<Y.length;++_e)P[ee++>>0]=Y.charCodeAt(_e);P[ee>>0]=0,D+=Y.length+1}),0},B:(y,b)=>{var D=ba();C[y>>2]=D.length;var Y=0;return D.forEach(ee=>Y+=ee.length+1),C[b>>2]=Y,0},e:function(y){try{var b=Mt(y);return $a(b),0}catch(D){if(typeof Jt>"u"||D.name!=="ErrnoError")throw D;return D.Ka}},p:function(y,b){try{var D=Mt(y);return P[b>>0]=D.tty?2:xn(D.mode)?3:(D.mode&61440)===40960?7:4,B[b+2>>1]=0,N=[0,(Re=0,1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[b+8>>2]=N[0],X[b+12>>2]=N[1],N=[0,(Re=0,1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[b+16>>2]=N[0],X[b+20>>2]=N[1],0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return Y.Ka}},x:function(y,b,D,Y){try{e:{var ee=Mt(y);y=b;for(var _e,Ce=b=0;Ce<D;Ce++){var it=C[y>>2],Ct=C[y+4>>2];y+=8;var mt=lo(ee,P,it,Ct,_e);if(0>mt){var rn=-1;break e}if(b+=mt,mt<Ct)break;typeof _e<"u"&&(_e+=mt)}rn=b}return C[Y>>2]=rn,0}catch(an){if(typeof Jt>"u"||an.name!=="ErrnoError")throw an;return an.Ka}},m:function(y,b,D,Y,ee){b=Qa(b,D);try{if(isNaN(b))return 61;var _e=Mt(y);return oo(_e,b,Y),N=[_e.position>>>0,(Re=_e.position,1<=+Math.abs(Re)?0<Re?+Math.floor(Re/4294967296)>>>0:~~+Math.ceil((Re-+(~~Re>>>0))/4294967296)>>>0:0)],X[ee>>2]=N[0],X[ee+4>>2]=N[1],_e.hb&&b===0&&Y===0&&(_e.hb=null),0}catch(Ce){if(typeof Jt>"u"||Ce.name!=="ErrnoError")throw Ce;return Ce.Ka}},D:function(y){var D;try{var b=Mt(y);return(D=b.Ha)!=null&&D.fsync?b.Ha.fsync(b):0}catch(Y){if(typeof Jt>"u"||Y.name!=="ErrnoError")throw Y;return Y.Ka}},u:function(y,b,D,Y){try{e:{var ee=Mt(y);y=b;for(var _e,Ce=b=0;Ce<D;Ce++){var it=C[y>>2],Ct=C[y+4>>2];y+=8;var mt=Rl(ee,P,it,Ct,_e);if(0>mt){var rn=-1;break e}b+=mt,typeof _e<"u"&&(_e+=mt)}rn=b}return C[Y>>2]=rn,0}catch(an){if(typeof Jt>"u"||an.name!=="ErrnoError")throw an;return an.Ka}}},nt=(function(){var D;function y(Y){var ee;return nt=Y.exports,j=nt.I,q(),An=nt.Aa,W.unshift(nt.J),A--,(ee=p.monitorRunDependencies)==null||ee.call(p,A),A==0&&Z&&(Y=Z,Z=null,Y()),nt}var b={a:es};if(A++,(D=p.monitorRunDependencies)==null||D.call(p,A),p.instantiateWasm)try{return p.instantiateWasm(b,y)}catch(Y){return V(`Module.instantiateWasm callback failed with error: ${Y}`),!1}return Pe(b,function(Y){y(Y.instance)}),{}})();p._sqlite3_free=y=>(p._sqlite3_free=nt.K)(y),p._sqlite3_value_text=y=>(p._sqlite3_value_text=nt.L)(y);var gi=()=>(gi=nt.M)();p._sqlite3_prepare_v2=(y,b,D,Y,ee)=>(p._sqlite3_prepare_v2=nt.N)(y,b,D,Y,ee),p._sqlite3_step=y=>(p._sqlite3_step=nt.O)(y),p._sqlite3_reset=y=>(p._sqlite3_reset=nt.P)(y),p._sqlite3_exec=(y,b,D,Y,ee)=>(p._sqlite3_exec=nt.Q)(y,b,D,Y,ee),p._sqlite3_finalize=y=>(p._sqlite3_finalize=nt.R)(y),p._sqlite3_column_name=(y,b)=>(p._sqlite3_column_name=nt.S)(y,b),p._sqlite3_column_text=(y,b)=>(p._sqlite3_column_text=nt.T)(y,b),p._sqlite3_column_type=(y,b)=>(p._sqlite3_column_type=nt.U)(y,b),p._sqlite3_errmsg=y=>(p._sqlite3_errmsg=nt.V)(y),p._sqlite3_clear_bindings=y=>(p._sqlite3_clear_bindings=nt.W)(y),p._sqlite3_value_blob=y=>(p._sqlite3_value_blob=nt.X)(y),p._sqlite3_value_bytes=y=>(p._sqlite3_value_bytes=nt.Y)(y),p._sqlite3_value_double=y=>(p._sqlite3_value_double=nt.Z)(y),p._sqlite3_value_int=y=>(p._sqlite3_value_int=nt._)(y),p._sqlite3_value_type=y=>(p._sqlite3_value_type=nt.$)(y),p._sqlite3_result_blob=(y,b,D,Y)=>(p._sqlite3_result_blob=nt.aa)(y,b,D,Y),p._sqlite3_result_double=(y,b)=>(p._sqlite3_result_double=nt.ba)(y,b),p._sqlite3_result_error=(y,b,D)=>(p._sqlite3_result_error=nt.ca)(y,b,D),p._sqlite3_result_int=(y,b)=>(p._sqlite3_result_int=nt.da)(y,b),p._sqlite3_result_int64=(y,b,D)=>(p._sqlite3_result_int64=nt.ea)(y,b,D),p._sqlite3_result_null=y=>(p._sqlite3_result_null=nt.fa)(y),p._sqlite3_result_text=(y,b,D,Y)=>(p._sqlite3_result_text=nt.ga)(y,b,D,Y),p._sqlite3_aggregate_context=(y,b)=>(p._sqlite3_aggregate_context=nt.ha)(y,b),p._sqlite3_column_count=y=>(p._sqlite3_column_count=nt.ia)(y),p._sqlite3_data_count=y=>(p._sqlite3_data_count=nt.ja)(y),p._sqlite3_column_blob=(y,b)=>(p._sqlite3_column_blob=nt.ka)(y,b),p._sqlite3_column_bytes=(y,b)=>(p._sqlite3_column_bytes=nt.la)(y,b),p._sqlite3_column_double=(y,b)=>(p._sqlite3_column_double=nt.ma)(y,b),p._sqlite3_bind_blob=(y,b,D,Y,ee)=>(p._sqlite3_bind_blob=nt.na)(y,b,D,Y,ee),p._sqlite3_bind_double=(y,b,D)=>(p._sqlite3_bind_double=nt.oa)(y,b,D),p._sqlite3_bind_int=(y,b,D)=>(p._sqlite3_bind_int=nt.pa)(y,b,D),p._sqlite3_bind_text=(y,b,D,Y,ee)=>(p._sqlite3_bind_text=nt.qa)(y,b,D,Y,ee),p._sqlite3_bind_parameter_index=(y,b)=>(p._sqlite3_bind_parameter_index=nt.ra)(y,b),p._sqlite3_sql=y=>(p._sqlite3_sql=nt.sa)(y),p._sqlite3_normalized_sql=y=>(p._sqlite3_normalized_sql=nt.ta)(y),p._sqlite3_changes=y=>(p._sqlite3_changes=nt.ua)(y),p._sqlite3_close_v2=y=>(p._sqlite3_close_v2=nt.va)(y),p._sqlite3_create_function_v2=(y,b,D,Y,ee,_e,Ce,it,Ct)=>(p._sqlite3_create_function_v2=nt.wa)(y,b,D,Y,ee,_e,Ce,it,Ct),p._sqlite3_open=(y,b)=>(p._sqlite3_open=nt.xa)(y,b);var Us=p._malloc=y=>(Us=p._malloc=nt.ya)(y),ia=p._free=y=>(ia=p._free=nt.za)(y);p._RegisterExtensionFunctions=y=>(p._RegisterExtensionFunctions=nt.Ba)(y);var Ir=(y,b)=>(Ir=nt.Ca)(y,b),Sa=()=>(Sa=nt.Da)(),Zr=y=>(Zr=nt.Ea)(y),Un=y=>(Un=nt.Fa)(y);p.stackAlloc=Un,p.stackSave=Sa,p.stackRestore=Zr,p.cwrap=(y,b,D,Y)=>{var ee=!D||D.every(_e=>_e==="number"||_e==="boolean");return b!=="string"&&ee&&!Y?p["_"+y]:function(){return jl(y,b,D,arguments)}},p.addFunction=Wa,p.removeFunction=sa,p.UTF8ToString=ke,p.ALLOC_NORMAL=Ka,p.allocate=mi,p.allocateUTF8OnStack=pi;var ts;Z=function y(){ts||Ls(),ts||(Z=y)};function Ls(){function y(){if(!ts&&(ts=!0,p.calledRun=!0,!R)){if(p.noFSInit||Rr||(Rr=!0,Ms(),p.stdin=p.stdin,p.stdout=p.stdout,p.stderr=p.stderr,p.stdin?Dn("stdin",p.stdin):Ze("/dev/tty","/dev/stdin"),p.stdout?Dn("stdout",null,p.stdout):Ze("/dev/tty","/dev/stdout"),p.stderr?Dn("stderr",null,p.stderr):Ze("/dev/tty1","/dev/stderr"),Pn("/dev/stdin",0),Pn("/dev/stdout",1),Pn("/dev/stderr",1)),$r=!1,be(W),p.onRuntimeInitialized&&p.onRuntimeInitialized(),p.postRun)for(typeof p.postRun=="function"&&(p.postRun=[p.postRun]);p.postRun.length;){var b=p.postRun.shift();me.unshift(b)}be(me)}}if(!(0<A)){if(p.preRun)for(typeof p.preRun=="function"&&(p.preRun=[p.preRun]);p.preRun.length;)L();be(se),0<A||(p.setStatus?(p.setStatus("Running..."),setTimeout(function(){setTimeout(function(){p.setStatus("")},1),y()},1)):y())}}if(p.preInit)for(typeof p.preInit=="function"&&(p.preInit=[p.preInit]);0<p.preInit.length;)p.preInit.pop()();return Ls(),d}),s)};n.exports=i,n.exports.default=i})(yh)),yh.exports}var j2=R2();const I2=io(j2);function M2(n){return new Promise((a,s)=>{const i=new Worker(new URL("/CogniFlow/assets/ankiImport.worker-DXXYc2v4.js",import.meta.url),{type:"module"});i.onmessage=l=>{const{status:c,decks:h,error:d}=l.data;c==="success"?a(h):s(new Error(d)),i.terminate()},i.onerror=l=>{console.error("Worker error:",l);const c=l.message||"The worker script could not be loaded or an unexpected error occurred.";s(new Error(`Anki import worker failed: ${c}`)),i.terminate()},i.postMessage(n,[n])})}let bh=null;async function U2(){return bh||(bh=await I2({locateFile:n=>`https://esm.sh/sql.js@1.10.3/dist/${n}`})),bh}function db(n,a){let s=n;return s=s.replace(/<img\s[^>]*?src=(["'])(.*?)\1[^>]*?>/gi,(i,l,c)=>{const h=decodeURIComponent(c),d=a.get(h);if(d){const m=btoa(new Uint8Array(d.data).reduce((v,x)=>v+String.fromCharCode(x),"")),p=`src="data:${d.type};base64,${m}"`;return i.replace(/src=(["']).*?\1/i,p)}return i}),s=s.replace(/\[sound:(.*?)\]/g,(i,l)=>{const c=decodeURIComponent(l.trim()),h=a.get(c);if(h){const d=btoa(new Uint8Array(h.data).reduce((m,p)=>m+String.fromCharCode(p),""));return h.type.startsWith("video/")?`<video controls playsinline src="data:${h.type};base64,${d}"></video>`:`<audio controls src="data:${h.type};base64,${d}"></audio>`}return""}),s}function fb(n,a,s,i,l){let c=n;const h=/{{c(\d+)::(.*?)(?:::(.*?))?}}/gs;c=c.replace(h,(v,x,T,_)=>{const E=parseInt(x,10);return i?E===s+1?`<span class="cloze">[${_||"..."}]</span>`:`<span class="cloze-inactive">${T}</span>`:E===s+1?`<span class="cloze"><b>${T}</b></span>`:`<span class="cloze-inactive">${T}</span>`}),l&&(c=c.replace(/<hr id=answer>/g,"").replace(/{{FrontSide}}/g,l));const d=/{{#([^}]+?)}}(.*?){{\/\1}}/gs;let m;do m=c,c=c.replace(d,(v,x,T)=>{const _=a.get(x.trim());return _&&_.trim()!==""?T:""});while(c!==m);const p=/{{\^([^}]+?)}}(.*?){{\/\1}}/gs;do m=c,c=c.replace(p,(v,x,T)=>{const _=a.get(x.trim());return!_||_.trim()===""?T:""});while(c!==m);return a.forEach((v,x)=>{const T=new RegExp(`{{${x}}}`,"g");c=c.replace(T,v)}),c=c.replace(/{{(.*?)}}/g,""),c}async function L2(n){var z;const a=await U2(),s=await Hh.loadAsync(n),i=s.file(/collection.anki2[1]?/);if(!i||i.length===0)throw new Error("collection.anki2 or .anki21 file not found.");const l=await i[0].async("uint8array"),c=new a.Database(l),h=s.file("media");let d={};if(h)try{d=JSON.parse(await h.async("string"))}catch(F){console.warn("Could not parse media file.",F)}const m=new Map;for(const F in d){const V=d[F],M=s.file(F);if(M){const j=await M.async("uint8array"),R=((z=V.split(".").pop())==null?void 0:z.toLowerCase())||"";let P="application/octet-stream";["jpg","jpeg"].includes(R)?P="image/jpeg":R==="png"?P="image/png":R==="gif"?P="image/gif":R==="svg"?P="image/svg+xml":R==="mp3"?P="audio/mpeg":R==="ogg"?P="audio/ogg":R==="wav"?P="audio/wav":R==="m4a"?P="audio/mp4":R==="opus"?P="audio/opus":R==="mp4"?P="video/mp4":R==="webm"?P="video/webm":R==="ogv"&&(P="video/ogg"),m.set(V,{data:j,type:P})}}const p=c.exec("SELECT models, decks, crt FROM col");if(!p[0])throw new Error("Could not read collection data.");const[v,x,T]=p[0].values[0],_=JSON.parse(v),E=JSON.parse(x),S=c.exec("SELECT id, mid, flds FROM notes"),w=new Map(S[0].values.map(F=>[F[0],{mid:F[1],flds:F[2].split("")}])),I=c.exec("SELECT id, nid, did, ord, due, ivl, factor, type, lapses FROM cards")[0].values,U=new Map;for(const F in E){const V=E[F];U.set(F,{id:crypto.randomUUID(),name:V.name,description:V.desc||"Imported Anki deck.",type:Ue.Flashcard,cards:[]})}for(const F of I){const[V,M,j,R,P,re,B,X,C]=F,ie=w.get(M);if(!ie)continue;const $=_[ie.mid];if(!($!=null&&$.tmpls))continue;const q=U.get(j.toString());if(!q)continue;const se=$.tmpls[R];if(!se)continue;const W=new Map(($.flds||[]).map((te,fe)=>[te.name,ie.flds[fe]||""]));let me=fb(se.qfmt,W,R,!0),L=fb(se.afmt,W,R,!1,me);me=db(me,m),L=db(L,m);let A,Z;X===2&&re>0?(A=new Date(T*1e3),A.setDate(A.getDate()+P),Z=new Date(A.getTime()),Z.setDate(Z.getDate()-re)):(A=new Date,A.setHours(0,0,0,0));const K=Math.min(1,Math.log1p(re)/Math.log1p(90));q.cards.push({id:V.toString(),front:me,back:L,css:$.css?`<style>${$.css}</style>`:"",dueDate:A.toISOString(),interval:re,easeFactor:B?Math.max(B/1e3,Sh):Er,masteryLevel:K,lastReviewed:Z==null?void 0:Z.toISOString(),lapses:C||0})}return c.close(),Array.from(U.values()).filter(F=>F.cards.length>0)}const z2=n=>{const{dispatch:a}=tt(),{openModal:s,closeModal:i}=Dl(),{addToast:l}=Rn(),{navigate:c}=Rs(),h=h2({...n,addToast:l,openModal:s,closeModal:i,dispatch:a}),{triggerSync:d}=h,m=l2({triggerSync:d,openConfirmModal:E=>s("confirm",E)}),p=c2({triggerSync:d,handleAddDecks:m.handleAddDecks,handleUpdateDeck:m.handleUpdateDeck}),v=f2({...n,handleUpdateDeck:m.handleUpdateDeck}),x=N2({...n,openConfirmModal:E=>s("confirm",E),openRestoreFromDriveModal:()=>s("restoreFromDrive"),onRestoreData:h.onRestoreData}),T=D2({handleUpdateDeck:m.handleUpdateDeck,handleAddDecks:m.handleAddDecks,handleAddSeriesWithDecks:p.handleAddSeriesWithDecks,handleUpdateSeries:p.handleUpdateSeries,openConfirmModal:E=>s("confirm",E),openModal:s,closeModal:i}),_=H.useCallback(async(E,S={})=>{if(i(),!E)return;const{deckName:w,imageHint:O}=S;try{if(E.type==="series"){const{seriesName:I,seriesDescription:U,levels:z}=E.data,F=[],V=(z||[]).map(j=>{const R=(j.decks||[]).map(P=>P.type==="quiz"?{id:crypto.randomUUID(),name:P.name,description:P.description,type:Ue.Quiz,questions:Ts(P.questions||[])}:P.type==="flashcard"?{id:crypto.randomUUID(),name:P.name,description:P.description,type:Ue.Flashcard,cards:As(P.cards||[])}:null).filter(P=>P!==null);return F.push(...R),{title:j.title,deckIds:R.map(P=>P.id)}}),M={id:crypto.randomUUID(),type:"series",name:I,description:U,levels:V,archived:!1,createdAt:new Date().toISOString()};await p.handleAddSeriesWithDecks(M,F)}else if(E.type==="quiz"){const I={id:crypto.randomUUID(),name:w||E.data.name,description:E.data.description,type:Ue.Quiz,questions:Ts(E.data.questions)};await m.handleAddDecks([I]),l(`Deck "${I.name}" imported successfully.`,"success")}else if(E.type==="flashcard"){if(!w){l("Deck name is required for flashcard import.","error");return}const I=As(E.data),U={id:crypto.randomUUID(),name:w,type:Ue.Flashcard,cards:I,description:`${I.length} imported flashcard${I.length===1?"":"s"}.`};await m.handleAddDecks([U]),l(`Deck "${U.name}" imported successfully.`,"success")}else if(E.type==="anki"&&E.file){l("Processing Anki package...","info");const I=await E.file.arrayBuffer();let U=[];try{U=await M2(I)}catch(z){console.warn("Anki worker failed, trying fallback:",z);const F=await E.file.arrayBuffer();U=await L2(F)}U.length>0?(await m.handleAddDecks(U),l(`Successfully imported ${U.length} deck(s) from Anki package.`,"success")):l("No valid decks found in the Anki package.","error")}else if(E.type==="image"&&E.file){l("Analyzing image with AI...","info");const I=new FileReader;I.readAsDataURL(E.file),I.onload=async()=>{try{const U=I.result.split(",")[1],{name:z,description:F,cards:V}=await a0(U,E.file.type,O),M={id:crypto.randomUUID(),name:z||`Image Deck - ${E.file.name}`,description:F||`Generated from ${E.file.name}`,type:Ue.Flashcard,cards:As(V)};await m.handleAddDecks([M]),l(`Deck "${M.name}" generated successfully.`,"success")}catch(U){console.error(U),l(`Image generation failed: ${U.message}`,"error")}},I.onerror=()=>l("Failed to read image file.","error")}else E.type==="backup"&&E.data&&await h.onRestoreData(E.data)}catch(I){l(I.message,"error")}},[p,m,h,l,i]);return H.useMemo(()=>({...n,...m,...p,...v,...h,...x,...T,openModal:s,closeModal:i,handleDroppedFileConfirm:_,openConfirmModal:E=>s("confirm",E),addToast:l}),[n,m,p,v,h,x,T,s,i,_,l])},B2=10,F2=()=>{const[n,a]=H.useState(!0),s=H.useRef(0),i=H.useRef(!1),l=H.useCallback(()=>{const c=window.scrollY;c<=0||c<s.current?a(!0):c>s.current&&c>B2&&a(!1),s.current=c},[]);return H.useEffect(()=>{const c=()=>{i.current||(window.requestAnimationFrame(()=>{l(),i.current=!1}),i.current=!0)};return window.addEventListener("scroll",c,{passive:!0}),()=>window.removeEventListener("scroll",c)},[l]),n},iu=120,G2=()=>{const[n,a]=H.useState({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}),{hapticsEnabled:s}=js(),i=H.useCallback(h=>{if(h.touches.length===0)return;const d=h.target;window.scrollY===0&&!d.closest('input, textarea, button, a[href], select, [role="button"], [role="switch"]')?a(m=>({...m,startY:h.touches[0].clientY,pullDistance:0,isRefreshing:!1,thresholdMet:!1})):a(m=>({...m,startY:0}))},[]),l=H.useCallback(h=>{if(n.startY===0||h.touches.length===0)return;const d=h.touches[0].clientY-n.startY;d>5&&(h.preventDefault(),d>iu&&!n.thresholdMet&&s&&"vibrate"in navigator&&navigator.vibrate(50),a(p=>({...p,pullDistance:d,thresholdMet:d>iu})))},[n.startY,n.thresholdMet,s]),c=H.useCallback(()=>{n.startY!==0&&(n.pullDistance>iu?(a(h=>({...h,isRefreshing:!0})),setTimeout(()=>{window.location.reload()},500)):a({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}))},[n.startY,n.pullDistance]);return{pullToRefreshState:n,handleTouchStart:i,handleTouchMove:l,handleTouchEnd:c,REFRESH_THRESHOLD:iu}},q2=()=>{var C,ie;const{aiGenerationStatus:n,dispatch:a,isLoading:s}=tt(),i=Tu();js();const l=F2(),{pullToRefreshState:c,handleTouchStart:h,handleTouchMove:d,handleTouchEnd:m,REFRESH_THRESHOLD:p}=G2(),[v,x]=H.useState(!1),[T,_]=H.useState(!1),[E,S]=H.useState(!1),[w,O]=H.useState(null),[I,U]=H.useState([]),[z,F]=H.useState(!1),{decks:V,deckSeries:M,isLoading:j}=tt(),R=(C=window.location.hash.match(/\/decks\/([^/?]+)/))==null?void 0:C[1],P=(ie=window.location.hash.match(/\/series\/([^/?]+)/))==null?void 0:ie[1],re=R&&V[R]||null,B=P&&M[P]||null;if(H.useEffect(()=>{b2().then(()=>{_(!0),x2((q,se)=>{S(q),O(se)}),localStorage.getItem("gdrive-previously-signed-in")&&S2()}).catch($=>console.error("GAPI Init Error",$))},[]),H.useEffect(()=>{const $=se=>{var W;(W=se.dataTransfer)!=null&&W.types.includes("Files")&&se.preventDefault()},q=async se=>{var W;if((W=se.dataTransfer)!=null&&W.types.includes("Files")&&(se.preventDefault(),se.dataTransfer.files&&se.dataTransfer.files.length>0)){const me=se.dataTransfer.files[0];try{const L=await Lb(me);L?i==null||i.openModal("droppedFile",{analysis:L}):i==null||i.addToast(`Could not recognize format of "${me.name}".`,"error")}catch(L){console.error("File analysis failed",L),i==null||i.addToast("Failed to analyze dropped file.","error")}}};return window.addEventListener("dragover",$),window.addEventListener("drop",q),()=>{window.removeEventListener("dragover",$),window.removeEventListener("drop",q)}},[i]),H.useEffect(()=>{(async()=>{try{const[q,se,W,me,L,A,Z]=await Promise.all([f0(),p0(),m0(),g0(),b0(),y0(),Ol()]);a({type:"LOAD_DATA",payload:{decks:q,folders:se,deckSeries:W}}),a({type:"SET_AI_CHAT_HISTORY",payload:Z});const K=new Map;Object.entries(L).forEach(([te,fe])=>{K.set(te,new Set(fe))}),a({type:"SET_SERIES_PROGRESS",payload:K}),a({type:"SET_LEARNING_PROGRESS",payload:A}),i&&i.setSessionsToResume&&i.setSessionsToResume(new Set(me.map(te=>te.id.replace("session_deck_","")))),i&&i.triggerSync({isManual:!1})}catch(q){console.error("Failed to load initial data from DB. Falling back to empty state.",q),F(!0),a({type:"LOAD_DATA",payload:{decks:[],folders:[],deckSeries:[]}}),i&&i.addToast("Storage error: Data may not persist between reloads.","warning")}finally{a({type:"SET_LOADING",payload:!1})}})()},[a]),H.useEffect(()=>{(async()=>{if(n.isGenerating||n.queue.length===0||!i)return;const q=n.queue[0],se=new AbortController;a({type:"START_NEXT_AI_TASK",payload:{task:q,abortController:se}});try{switch(q.type){case"generateFullSeriesFromScaffold":await i.onGenerateFullSeriesFromScaffold(q.payload,se.signal);break;case"generateFlashcardDeckWithAI":await i.onGenerateFlashcardDeck(q.payload,se.signal);break;case"generateLearningDeckWithAI":await i.onGenerateLearningDeckWithAI(q.payload,se.signal);break;case"generateQuestionsForDeck":await i.onGenerateQuestionsForDeck(q.payload.deck,q.payload.count,q.payload.seriesContext,se.signal);break;case"generateDeckFromOutline":await i.onGenerateDeckFromOutline(q.payload.outline,q.payload.metadata,q.payload.seriesId,q.payload.levelIndex,se.signal);break;case"autoPopulateSeries":await i.onAutoPopulateSeries(q.payload,se.signal);break;case"autoPopulateLevel":await i.onAutoPopulateLevel(q.payload,se.signal);break;case"generateSeriesQuestionsInBatches":await i.onGenerateSeriesQuestionsInBatches(q.payload,se.signal);break;case"regenerateQuestion":await i.onRegenerateQuestion(q.payload,se.signal);break;case"generateSeriesLearningContentInBatches":await i.onGenerateLearningContentForDeck(q.payload,se.signal);break;default:console.warn(`Unknown AI task type: ${q.type}`);break}}catch(W){W.message!=="Cancelled by user"&&W.name!=="AbortError"&&(console.error("AI Task Failed",W),i.addToast(`AI Task Failed: ${W.message}`,"error"))}finally{a({type:"FINISH_CURRENT_AI_TASK"})}})()},[n.isGenerating,n.queue,a,i]),s)return u.jsxs("div",{className:"flex flex-col items-center justify-center h-screen bg-background text-text",children:[u.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mb-4"}),u.jsx("p",{className:"text-lg font-medium animate-pulse",children:"Loading Library..."})]});const X={activeDeck:re,activeSeries:B,generalStudyDeck:null,sessionsToResume:new Set,onSync:()=>i==null?void 0:i.handleManualSync(),isSyncing:!1,lastSyncStatus:"",isGapiReady:T,isGapiSignedIn:E,gapiUser:w,sortPreference:"lastOpened",setSortPreference:()=>{},draggedDeckId:null,setDraggedDeckId:()=>{},openFolderIds:new Set,onToggleFolder:$=>{}};return u.jsxs("div",{className:"min-h-screen bg-background text-text transition-colors duration-200",onTouchStart:h,onTouchMove:d,onTouchEnd:m,children:[u.jsx(S_,{onOpenMenu:()=>x(!0),onOpenCommandPalette:()=>i==null?void 0:i.openModal("commandPalette"),activeDeck:re,isVisible:l}),z&&u.jsx("div",{className:"bg-red-500 text-white text-center text-xs py-1 px-2 fixed top-16 left-0 right-0 z-30",children:"Storage Warning: Changes may not be saved locally due to a browser database error."}),u.jsx(A_,{isOpen:v,onClose:()=>x(!1),onImport:()=>i==null?void 0:i.openModal("import"),onCreateSeries:()=>i==null?void 0:i.openModal("series",{series:"new"}),onGenerateAI:()=>i==null?void 0:i.openModal("aiGeneration"),onInstall:null}),u.jsxs("main",{className:`pt-20 pb-20 px-4 max-w-7xl mx-auto min-h-[calc(100vh-5rem)] ${z?"mt-6":""}`,children:[u.jsx(t2,{pullDistance:c.pullDistance,isRefreshing:c.isRefreshing,threshold:p}),u.jsx(fS,{...X,sessionsToResume:i.sessionsToResume||new Set,isSyncing:i.isSyncing||!1,lastSyncStatus:i.lastSyncStatus||"",sortPreference:i.sortPreference||"lastOpened",setSortPreference:i.setSortPreference||(()=>{}),draggedDeckId:i.draggedDeckId||null,setDraggedDeckId:i.setDraggedDeckId||(()=>{}),openFolderIds:i.openFolderIds||new Set,onToggleFolder:i.onToggleFolder||(()=>{}),generalStudyDeck:i.generalStudyDeck||null})]}),u.jsx(JT,{driveFiles:I}),u.jsx(KT,{onOpen:()=>i==null?void 0:i.openModal("aiStatus"),onCancel:()=>i==null?void 0:i.handleCancelAIGeneration()}),u.jsx(XT,{}),u.jsx(e2,{})]})},H2=()=>{const[n,a]=H.useState(new Set),[s,i]=H.useState(null),[l,c]=H.useState([]),[h,d]=H.useState(!1),[m,p]=H.useState(""),[v,x]=H.useState("lastOpened"),[T,_]=H.useState(null),[E,S]=H.useState(new Set),w=js(),O={sessionsToResume:n,setSessionsToResume:a,generalStudyDeck:s,setGeneralStudyDeck:i,driveFiles:l,setDriveFiles:c,isSyncing:h,setIsSyncing:d,lastSyncStatus:m,setLastSyncStatus:p,sortPreference:v,setSortPreference:x,draggedDeckId:T,setDraggedDeckId:_,openFolderIds:E,setOpenFolderIds:S,onToggleFolder:z=>{const F=new Set(E);F.has(z)?F.delete(z):F.add(z),S(F)},backupEnabled:w.backupEnabled,backupApiKey:w.backupApiKey,syncOnCellular:w.syncOnCellular},U={...z2(O),sessionsToResume:n,generalStudyDeck:s,isSyncing:h,lastSyncStatus:m,sortPreference:v,setSortPreference:x,draggedDeckId:T,setDraggedDeckId:_,openFolderIds:E,onToggleFolder:O.onToggleFolder};return u.jsx(J_,{value:U,children:u.jsx(q2,{})})};class P2 extends Wi.Component{constructor(){super(...arguments),this.state={hasError:!1,error:null,errorInfo:null},this.handleReload=()=>{window.location.reload()},this.handleCopyReport=()=>{const{error:a,errorInfo:s}=this.state,i=`
Error Report
Date: ${new Date().toISOString()}
URL: ${window.location.href}
User Agent: ${navigator.userAgent}

Error: ${a==null?void 0:a.toString()}

Stack Trace:
${a==null?void 0:a.stack}

Component Stack:
${s==null?void 0:s.componentStack}
    `.trim();navigator.clipboard.writeText(i).then(()=>{alert("Error report copied to clipboard.")}).catch(l=>{console.error("Failed to copy report:",l),alert("Failed to copy report to clipboard.")})}}static getDerivedStateFromError(a){return{hasError:!0,error:a,errorInfo:null}}componentDidCatch(a,s){console.error("Uncaught error:",a,s),this.setState({errorInfo:s})}render(){const{hasError:a,error:s}=this.state,{children:i}=this.props;return a?u.jsx("div",{className:"min-h-screen flex items-center justify-center p-4 bg-background",children:u.jsxs("div",{className:"text-center bg-surface p-8 rounded-lg shadow-xl max-w-lg w-full border border-border",children:[u.jsx(Fe,{name:"x-circle",className:"w-16 h-16 text-red-500 mx-auto mb-4"}),u.jsx("h1",{className:"text-3xl font-bold text-red-500 mb-4",children:"Something went wrong"}),u.jsx("p",{className:"text-text-muted mb-6",children:"An unexpected error occurred. Please try reloading the page."}),s&&u.jsxs("details",{className:"text-left bg-background p-4 rounded-md mb-6 overflow-auto max-h-64",children:[u.jsx("summary",{className:"cursor-pointer text-sm text-text-muted font-bold",children:"Error Details"}),u.jsx("pre",{className:"mt-2 text-xs text-red-400 whitespace-pre-wrap break-all",children:u.jsx("code",{children:s.toString()})})]}),u.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[u.jsxs(Ye,{variant:"secondary",onClick:this.handleCopyReport,children:[u.jsx(Fe,{name:"file-text",className:"w-4 h-4 mr-2"}),"Copy Report"]}),u.jsxs(Ye,{variant:"danger",onClick:this.handleReload,children:[u.jsx(Fe,{name:"refresh-ccw",className:"w-4 h-4 mr-2"}),"Reload Page"]})]})]})}):i}}const xh="cogniflow-themeId",hb="cogniflow-custom-themes",no=[{id:"system",name:"System",isDark:!1,metaColor:"#f9fafb",metaColorDark:"#111827",palette:{background:"249 250 251",surface:"255 255 255",primary:"37 99 235",text:"17 24 39"},paletteDark:{background:"17 24 39",surface:"31 41 55",primary:"37 99 235",text:"243 244 246"}},{id:"light",name:"Light",isDark:!1,metaColor:"#f9fafb",palette:{background:"249 250 251",surface:"255 255 255",primary:"37 99 235",text:"17 24 39"}},{id:"rose",name:"Rose",isDark:!1,metaColor:"#fff1f2",palette:{background:"255 241 242",surface:"254 226 226",primary:"225 29 72",text:"136 25 55"}},{id:"matcha",name:"Matcha",isDark:!1,metaColor:"#f0fdf4",palette:{background:"240 253 244",surface:"220 252 231",primary:"22 163 74",text:"21 94 53"}},{id:"latte",name:"Latte",isDark:!1,metaColor:"#fffbeb",palette:{background:"255 251 235",surface:"254 243 199",primary:"217 119 6",text:"113 63 18"}},{id:"sky",name:"Sky",isDark:!1,metaColor:"#f0f9ff",palette:{background:"240 249 255",surface:"224 242 254",primary:"14 165 233",text:"7 89 133"}},{id:"sunrise",name:"Sunrise",isDark:!1,metaColor:"#fffbeb",palette:{background:"255 251 235",surface:"254 243 199",primary:"249 115 22",text:"124 45 18"}},{id:"lavender",name:"Lavender",isDark:!1,metaColor:"#f5f3ff",palette:{background:"245 243 255",surface:"237 233 254",primary:"124 58 237",text:"76 29 149"}},{id:"terracotta",name:"Terracotta",isDark:!1,metaColor:"#faf3e8",palette:{background:"250 243 232",surface:"245 233 218",primary:"226 114 91",text:"93 64 55"}},{id:"alabaster",name:"Alabaster",isDark:!1,metaColor:"#fcfcfc",palette:{background:"252 252 252",surface:"255 255 255",primary:"96 165 250",text:"50 50 50"}},{id:"dark",name:"Dark",isDark:!0,metaColor:"#111827",palette:{background:"17 24 39",surface:"31 41 55",primary:"37 99 235",text:"243 244 246"}},{id:"espresso",name:"Espresso",isDark:!0,metaColor:"#211713",palette:{background:"33 23 19",surface:"58 45 39",primary:"196 154 108",text:"224 213 208"}},{id:"midnight",name:"Midnight",isDark:!0,metaColor:"#0c0d11",palette:{background:"12 13 17",surface:"26 27 38",primary:"133 137 230",text:"200 201 215"}}],j0=H.createContext(void 0),pb=(n,a=[])=>{let s=no.find(d=>d.id===n);s||(s=a.find(d=>d.id===n)),s||(s=no[0]);const i=window.document.documentElement,l=document.querySelector('meta[name="theme-color"]');let c,h;if(s.id==="system"?(c=window.matchMedia("(prefers-color-scheme: dark)").matches,h=c?s.metaColorDark:s.metaColor):(c=s.isDark,h=s.metaColor),no.forEach(d=>{d.id!=="system"&&i.classList.remove(`theme-${d.id}`)}),a.forEach(d=>i.classList.remove(`theme-${d.id}`)),i.classList.remove("theme-dark","theme-light"),i.classList.toggle("dark",c),l&&h&&l.setAttribute("content",h),s.isCustom){i.classList.add(`theme-${s.id}`);const d=s.palette;i.style.setProperty("--color-background",d.background),i.style.setProperty("--color-surface",d.surface),i.style.setProperty("--color-primary",d.primary),i.style.setProperty("--color-text",d.text),i.style.setProperty("--color-primary-hover",d.primary),i.style.setProperty("--color-text-muted",d.text),i.style.setProperty("--color-border",d.surface),d.onPrimary?i.style.setProperty("--color-on-primary",d.onPrimary):i.style.setProperty("--color-on-primary","255 255 255")}else i.style.removeProperty("--color-background"),i.style.removeProperty("--color-surface"),i.style.removeProperty("--color-primary"),i.style.removeProperty("--color-text"),i.style.removeProperty("--color-primary-hover"),i.style.removeProperty("--color-text-muted"),i.style.removeProperty("--color-border"),i.style.removeProperty("--color-on-primary"),s.id!=="system"&&i.classList.add(`theme-${s.id}`)},Y2=({children:n})=>{const[a,s]=H.useState(()=>{try{const p=localStorage.getItem(hb);return p?JSON.parse(p):[]}catch{return[]}}),[i,l]=H.useState(()=>{try{const p=localStorage.getItem(xh);return no.some(v=>v.id===p)||a.some(v=>v.id===p)?p:"system"}catch(p){return console.error("Could not access localStorage. Defaulting to 'system'.",p),"system"}});H.useEffect(()=>{localStorage.setItem(hb,JSON.stringify(a))},[a]),H.useEffect(()=>{try{localStorage.setItem(xh,i)}catch(p){console.error("Could not set theme in localStorage.",p)}pb(i,a)},[i,a]),H.useEffect(()=>{const p=window.matchMedia("(prefers-color-scheme: dark)"),v=()=>{let x="system";try{x=localStorage.getItem(xh)||"system"}catch{}x==="system"&&pb("system",a)};return p.addEventListener("change",v),()=>p.removeEventListener("change",v)},[a]);const c=H.useCallback(p=>{l(p)},[]),h=H.useCallback(p=>{s(v=>[...v,p]),l(p.id)},[]),d=H.useCallback(p=>{s(v=>v.filter(x=>x.id!==p)),i===p&&l("system")},[i]),m=no.find(p=>p.id===i)||a.find(p=>p.id===i)||no[0];return u.jsx(j0.Provider,{value:{themeId:i,setThemeById:c,currentTheme:m,customThemes:a,addCustomTheme:h,deleteCustomTheme:d},children:n})},X2=()=>{const n=H.useContext(j0);if(n===void 0)throw new Error("useTheme must be used within a ThemeProvider");return n};function I0(n,a,s={}){const i=a instanceof Error;console.groupCollapsed(`%c[${n}] ${i?a.message:"An error occurred"}`,"color: red; font-weight: bold;"),console.error(a),Object.keys(s).length>0&&console.log("Additional Info:",s),i&&a.stack&&console.log("Stack Trace:",a.stack),console.groupEnd()}window.addEventListener("error",n=>{I0("Unhandled Global Error",n.error||n.message,{message:n.message,filename:n.filename,lineno:n.lineno,colno:n.colno})});window.addEventListener("unhandledrejection",n=>{I0("Unhandled Promise Rejection",n.reason)});console.log(window.location);const M0=document.getElementById("root");if(!M0)throw new Error("Could not find root element to mount to");const V2=b_.createRoot(M0);V2.render(u.jsx(Wi.StrictMode,{children:u.jsx(Y2,{children:u.jsx(cw,{children:u.jsx(T_,{children:u.jsx(x_,{children:u.jsx(X_,{children:u.jsx(P2,{children:u.jsx(H2,{})})})})})})})}));export{fw as A,Ye as B,mw as C,O0 as D,Rs as E,zh as F,ol as G,__ as H,Fe as I,As as J,Ts as K,Wr as L,Ww as M,Lh as N,V_ as O,Z_ as P,Dl as Q,Sr as R,Yr as S,Zw as T,Rn as a,Q2 as b,On as c,tt as d,Ue as e,Lw as f,d2 as g,Fw as h,Tu as i,u as j,Uw as k,K2 as l,Z2 as m,X2 as n,Xc as o,J2 as p,Wc as q,H as r,sb as s,no as t,js as u,eu as v,Wi as w,$2 as x,Er as y,on as z};
