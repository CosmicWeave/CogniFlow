var rm=(a,i)=>()=>(i||a((i={exports:{}}).exports,i),i.exports);var ep=rm((rp,as)=>{(function(){const i=document.createElement("link").relList;if(i&&i.supports&&i.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))m(f);new MutationObserver(f=>{for(const h of f)if(h.type==="childList")for(const p of h.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&m(p)}).observe(document,{childList:!0,subtree:!0});function c(f){const h={};return f.integrity&&(h.integrity=f.integrity),f.referrerPolicy&&(h.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?h.credentials="include":f.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function m(f){if(f.ep)return;f.ep=!0;const h=c(f);fetch(f.href,h)}})();function Qd(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var yo={exports:{}},rs={},xo={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wd;function nm(){if(wd)return Ae;wd=1;var a=Symbol.for("react.element"),i=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),p=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),F=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),I=Symbol.iterator;function R(d){return d===null||typeof d!="object"?null:(d=I&&d[I]||d["@@iterator"],typeof d=="function"?d:null)}var U={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,_={};function H(d,b,y){this.props=d,this.context=b,this.refs=_,this.updater=y||U}H.prototype.isReactComponent={},H.prototype.setState=function(d,b){if(typeof d!="object"&&typeof d!="function"&&d!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,d,b,"setState")},H.prototype.forceUpdate=function(d){this.updater.enqueueForceUpdate(this,d,"forceUpdate")};function V(){}V.prototype=H.prototype;function X(d,b,y){this.props=d,this.context=b,this.refs=_,this.updater=y||U}var Y=X.prototype=new V;Y.constructor=X,Q(Y,H.prototype),Y.isPureReactComponent=!0;var T=Array.isArray,M=Object.prototype.hasOwnProperty,B={current:null},W={key:!0,ref:!0,__self:!0,__source:!0};function te(d,b,y){var k,v={},D=null,$=null;if(b!=null)for(k in b.ref!==void 0&&($=b.ref),b.key!==void 0&&(D=""+b.key),b)M.call(b,k)&&!W.hasOwnProperty(k)&&(v[k]=b[k]);var A=arguments.length-2;if(A===1)v.children=y;else if(1<A){for(var se=Array(A),de=0;de<A;de++)se[de]=arguments[de+2];v.children=se}if(d&&d.defaultProps)for(k in A=d.defaultProps,A)v[k]===void 0&&(v[k]=A[k]);return{$$typeof:a,type:d,key:D,ref:$,props:v,_owner:B.current}}function we(d,b){return{$$typeof:a,type:d.type,key:b,ref:d.ref,props:d.props,_owner:d._owner}}function Ee(d){return typeof d=="object"&&d!==null&&d.$$typeof===a}function ee(d){var b={"=":"=0",":":"=2"};return"$"+d.replace(/[=:]/g,function(y){return b[y]})}var J=/\/+/g;function ae(d,b){return typeof d=="object"&&d!==null&&d.key!=null?ee(""+d.key):b.toString(36)}function ie(d,b,y,k,v){var D=typeof d;(D==="undefined"||D==="boolean")&&(d=null);var $=!1;if(d===null)$=!0;else switch(D){case"string":case"number":$=!0;break;case"object":switch(d.$$typeof){case a:case i:$=!0}}if($)return $=d,v=v($),d=k===""?"."+ae($,0):k,T(v)?(y="",d!=null&&(y=d.replace(J,"$&/")+"/"),ie(v,b,y,"",function(de){return de})):v!=null&&(Ee(v)&&(v=we(v,y+(!v.key||$&&$.key===v.key?"":(""+v.key).replace(J,"$&/")+"/")+d)),b.push(v)),1;if($=0,k=k===""?".":k+":",T(d))for(var A=0;A<d.length;A++){D=d[A];var se=k+ae(D,A);$+=ie(D,b,y,se,v)}else if(se=R(d),typeof se=="function")for(d=se.call(d),A=0;!(D=d.next()).done;)D=D.value,se=k+ae(D,A++),$+=ie(D,b,y,se,v);else if(D==="object")throw b=String(d),Error("Objects are not valid as a React child (found: "+(b==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":b)+"). If you meant to render a collection of children, use an array instead.");return $}function Ne(d,b,y){if(d==null)return d;var k=[],v=0;return ie(d,k,"","",function(D){return b.call(y,D,v++)}),k}function Te(d){if(d._status===-1){var b=d._result;b=b(),b.then(function(y){(d._status===0||d._status===-1)&&(d._status=1,d._result=y)},function(y){(d._status===0||d._status===-1)&&(d._status=2,d._result=y)}),d._status===-1&&(d._status=0,d._result=b)}if(d._status===1)return d._result.default;throw d._result}var De={current:null},G={transition:null},oe={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:G,ReactCurrentOwner:B};function w(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:Ne,forEach:function(d,b,y){Ne(d,function(){b.apply(this,arguments)},y)},count:function(d){var b=0;return Ne(d,function(){b++}),b},toArray:function(d){return Ne(d,function(b){return b})||[]},only:function(d){if(!Ee(d))throw Error("React.Children.only expected to receive a single React element child.");return d}},Ae.Component=H,Ae.Fragment=c,Ae.Profiler=f,Ae.PureComponent=X,Ae.StrictMode=m,Ae.Suspense=E,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=oe,Ae.act=w,Ae.cloneElement=function(d,b,y){if(d==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+d+".");var k=Q({},d.props),v=d.key,D=d.ref,$=d._owner;if(b!=null){if(b.ref!==void 0&&(D=b.ref,$=B.current),b.key!==void 0&&(v=""+b.key),d.type&&d.type.defaultProps)var A=d.type.defaultProps;for(se in b)M.call(b,se)&&!W.hasOwnProperty(se)&&(k[se]=b[se]===void 0&&A!==void 0?A[se]:b[se])}var se=arguments.length-2;if(se===1)k.children=y;else if(1<se){A=Array(se);for(var de=0;de<se;de++)A[de]=arguments[de+2];k.children=A}return{$$typeof:a,type:d.type,key:v,ref:D,props:k,_owner:$}},Ae.createContext=function(d){return d={$$typeof:p,_currentValue:d,_currentValue2:d,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},d.Provider={$$typeof:h,_context:d},d.Consumer=d},Ae.createElement=te,Ae.createFactory=function(d){var b=te.bind(null,d);return b.type=d,b},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(d){return{$$typeof:N,render:d}},Ae.isValidElement=Ee,Ae.lazy=function(d){return{$$typeof:j,_payload:{_status:-1,_result:d},_init:Te}},Ae.memo=function(d,b){return{$$typeof:F,type:d,compare:b===void 0?null:b}},Ae.startTransition=function(d){var b=G.transition;G.transition={};try{d()}finally{G.transition=b}},Ae.unstable_act=w,Ae.useCallback=function(d,b){return De.current.useCallback(d,b)},Ae.useContext=function(d){return De.current.useContext(d)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(d){return De.current.useDeferredValue(d)},Ae.useEffect=function(d,b){return De.current.useEffect(d,b)},Ae.useId=function(){return De.current.useId()},Ae.useImperativeHandle=function(d,b,y){return De.current.useImperativeHandle(d,b,y)},Ae.useInsertionEffect=function(d,b){return De.current.useInsertionEffect(d,b)},Ae.useLayoutEffect=function(d,b){return De.current.useLayoutEffect(d,b)},Ae.useMemo=function(d,b){return De.current.useMemo(d,b)},Ae.useReducer=function(d,b,y){return De.current.useReducer(d,b,y)},Ae.useRef=function(d){return De.current.useRef(d)},Ae.useState=function(d){return De.current.useState(d)},Ae.useSyncExternalStore=function(d,b,y){return De.current.useSyncExternalStore(d,b,y)},Ae.useTransition=function(){return De.current.useTransition()},Ae.version="18.3.1",Ae}var jd;function Mo(){return jd||(jd=1,xo.exports=nm()),xo.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bd;function sm(){if(bd)return rs;bd=1;var a=Mo(),i=Symbol.for("react.element"),c=Symbol.for("react.fragment"),m=Object.prototype.hasOwnProperty,f=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function p(N,E,F){var j,I={},R=null,U=null;F!==void 0&&(R=""+F),E.key!==void 0&&(R=""+E.key),E.ref!==void 0&&(U=E.ref);for(j in E)m.call(E,j)&&!h.hasOwnProperty(j)&&(I[j]=E[j]);if(N&&N.defaultProps)for(j in E=N.defaultProps,E)I[j]===void 0&&(I[j]=E[j]);return{$$typeof:i,type:N,key:R,ref:U,props:I,_owner:f.current}}return rs.Fragment=c,rs.jsx=p,rs.jsxs=p,rs}var Nd;function am(){return Nd||(Nd=1,yo.exports=sm()),yo.exports}var n=am(),x=Mo();const ja=Qd(x);var ha={},vo={exports:{}},vt={},ko={exports:{}},wo={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sd;function lm(){return Sd||(Sd=1,function(a){function i(G,oe){var w=G.length;G.push(oe);e:for(;0<w;){var d=w-1>>>1,b=G[d];if(0<f(b,oe))G[d]=oe,G[w]=b,w=d;else break e}}function c(G){return G.length===0?null:G[0]}function m(G){if(G.length===0)return null;var oe=G[0],w=G.pop();if(w!==oe){G[0]=w;e:for(var d=0,b=G.length,y=b>>>1;d<y;){var k=2*(d+1)-1,v=G[k],D=k+1,$=G[D];if(0>f(v,w))D<b&&0>f($,v)?(G[d]=$,G[D]=w,d=D):(G[d]=v,G[k]=w,d=k);else if(D<b&&0>f($,w))G[d]=$,G[D]=w,d=D;else break e}}return oe}function f(G,oe){var w=G.sortIndex-oe.sortIndex;return w!==0?w:G.id-oe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;a.unstable_now=function(){return h.now()}}else{var p=Date,N=p.now();a.unstable_now=function(){return p.now()-N}}var E=[],F=[],j=1,I=null,R=3,U=!1,Q=!1,_=!1,H=typeof setTimeout=="function"?setTimeout:null,V=typeof clearTimeout=="function"?clearTimeout:null,X=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(G){for(var oe=c(F);oe!==null;){if(oe.callback===null)m(F);else if(oe.startTime<=G)m(F),oe.sortIndex=oe.expirationTime,i(E,oe);else break;oe=c(F)}}function T(G){if(_=!1,Y(G),!Q)if(c(E)!==null)Q=!0,Te(M);else{var oe=c(F);oe!==null&&De(T,oe.startTime-G)}}function M(G,oe){Q=!1,_&&(_=!1,V(te),te=-1),U=!0;var w=R;try{for(Y(oe),I=c(E);I!==null&&(!(I.expirationTime>oe)||G&&!ee());){var d=I.callback;if(typeof d=="function"){I.callback=null,R=I.priorityLevel;var b=d(I.expirationTime<=oe);oe=a.unstable_now(),typeof b=="function"?I.callback=b:I===c(E)&&m(E),Y(oe)}else m(E);I=c(E)}if(I!==null)var y=!0;else{var k=c(F);k!==null&&De(T,k.startTime-oe),y=!1}return y}finally{I=null,R=w,U=!1}}var B=!1,W=null,te=-1,we=5,Ee=-1;function ee(){return!(a.unstable_now()-Ee<we)}function J(){if(W!==null){var G=a.unstable_now();Ee=G;var oe=!0;try{oe=W(!0,G)}finally{oe?ae():(B=!1,W=null)}}else B=!1}var ae;if(typeof X=="function")ae=function(){X(J)};else if(typeof MessageChannel<"u"){var ie=new MessageChannel,Ne=ie.port2;ie.port1.onmessage=J,ae=function(){Ne.postMessage(null)}}else ae=function(){H(J,0)};function Te(G){W=G,B||(B=!0,ae())}function De(G,oe){te=H(function(){G(a.unstable_now())},oe)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(G){G.callback=null},a.unstable_continueExecution=function(){Q||U||(Q=!0,Te(M))},a.unstable_forceFrameRate=function(G){0>G||125<G?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):we=0<G?Math.floor(1e3/G):5},a.unstable_getCurrentPriorityLevel=function(){return R},a.unstable_getFirstCallbackNode=function(){return c(E)},a.unstable_next=function(G){switch(R){case 1:case 2:case 3:var oe=3;break;default:oe=R}var w=R;R=oe;try{return G()}finally{R=w}},a.unstable_pauseExecution=function(){},a.unstable_requestPaint=function(){},a.unstable_runWithPriority=function(G,oe){switch(G){case 1:case 2:case 3:case 4:case 5:break;default:G=3}var w=R;R=G;try{return oe()}finally{R=w}},a.unstable_scheduleCallback=function(G,oe,w){var d=a.unstable_now();switch(typeof w=="object"&&w!==null?(w=w.delay,w=typeof w=="number"&&0<w?d+w:d):w=d,G){case 1:var b=-1;break;case 2:b=250;break;case 5:b=1073741823;break;case 4:b=1e4;break;default:b=5e3}return b=w+b,G={id:j++,callback:oe,priorityLevel:G,startTime:w,expirationTime:b,sortIndex:-1},w>d?(G.sortIndex=w,i(F,G),c(E)===null&&G===c(F)&&(_?(V(te),te=-1):_=!0,De(T,w-d))):(G.sortIndex=b,i(E,G),Q||U||(Q=!0,Te(M))),G},a.unstable_shouldYield=ee,a.unstable_wrapCallback=function(G){var oe=R;return function(){var w=R;R=oe;try{return G.apply(this,arguments)}finally{R=w}}}}(wo)),wo}var Cd;function om(){return Cd||(Cd=1,ko.exports=lm()),ko.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ed;function im(){if(Ed)return vt;Ed=1;var a=Mo(),i=om();function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var m=new Set,f={};function h(e,t){p(e,t),p(e+"Capture",t)}function p(e,t){for(f[e]=t,e=0;e<t.length;e++)m.add(t[e])}var N=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),E=Object.prototype.hasOwnProperty,F=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,j={},I={};function R(e){return E.call(I,e)?!0:E.call(j,e)?!1:F.test(e)?I[e]=!0:(j[e]=!0,!1)}function U(e,t,r,s){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q(e,t,r,s){if(t===null||typeof t>"u"||U(e,t,r,s))return!0;if(s)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function _(e,t,r,s,l,o,u){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=l,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=o,this.removeEmptyString=u}var H={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){H[e]=new _(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];H[t]=new _(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){H[e]=new _(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){H[e]=new _(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){H[e]=new _(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){H[e]=new _(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){H[e]=new _(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){H[e]=new _(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){H[e]=new _(e,5,!1,e.toLowerCase(),null,!1,!1)});var V=/[\-:]([a-z])/g;function X(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(V,X);H[t]=new _(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(V,X);H[t]=new _(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(V,X);H[t]=new _(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){H[e]=new _(e,1,!1,e.toLowerCase(),null,!1,!1)}),H.xlinkHref=new _("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){H[e]=new _(e,1,!1,e.toLowerCase(),null,!0,!0)});function Y(e,t,r,s){var l=H.hasOwnProperty(t)?H[t]:null;(l!==null?l.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q(t,r,l,s)&&(r=null),s||l===null?R(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):l.mustUseProperty?e[l.propertyName]=r===null?l.type===3?!1:"":r:(t=l.attributeName,s=l.attributeNamespace,r===null?e.removeAttribute(t):(l=l.type,r=l===3||l===4&&r===!0?"":""+r,s?e.setAttributeNS(s,t,r):e.setAttribute(t,r))))}var T=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),B=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),te=Symbol.for("react.strict_mode"),we=Symbol.for("react.profiler"),Ee=Symbol.for("react.provider"),ee=Symbol.for("react.context"),J=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ie=Symbol.for("react.suspense_list"),Ne=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),G=Symbol.iterator;function oe(e){return e===null||typeof e!="object"?null:(e=G&&e[G]||e["@@iterator"],typeof e=="function"?e:null)}var w=Object.assign,d;function b(e){if(d===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);d=t&&t[1]||""}return`
`+d+e}var y=!1;function k(e,t){if(!e||y)return"";y=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(z){var s=z}Reflect.construct(e,[],t)}else{try{t.call()}catch(z){s=z}e.call(t.prototype)}else{try{throw Error()}catch(z){s=z}e()}}catch(z){if(z&&s&&typeof z.stack=="string"){for(var l=z.stack.split(`
`),o=s.stack.split(`
`),u=l.length-1,g=o.length-1;1<=u&&0<=g&&l[u]!==o[g];)g--;for(;1<=u&&0<=g;u--,g--)if(l[u]!==o[g]){if(u!==1||g!==1)do if(u--,g--,0>g||l[u]!==o[g]){var S=`
`+l[u].replace(" at new "," at ");return e.displayName&&S.includes("<anonymous>")&&(S=S.replace("<anonymous>",e.displayName)),S}while(1<=u&&0<=g);break}}}finally{y=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?b(e):""}function v(e){switch(e.tag){case 5:return b(e.type);case 16:return b("Lazy");case 13:return b("Suspense");case 19:return b("SuspenseList");case 0:case 2:case 15:return e=k(e.type,!1),e;case 11:return e=k(e.type.render,!1),e;case 1:return e=k(e.type,!0),e;default:return""}}function D(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case B:return"Portal";case we:return"Profiler";case te:return"StrictMode";case ae:return"Suspense";case ie:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case ee:return(e.displayName||"Context")+".Consumer";case Ee:return(e._context.displayName||"Context")+".Provider";case J:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Ne:return t=e.displayName||null,t!==null?t:D(e.type)||"Memo";case Te:t=e._payload,e=e._init;try{return D(e(t))}catch{}}return null}function $(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return D(t);case 8:return t===te?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function A(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function se(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function de(e){var t=se(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var l=r.get,o=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return l.call(this)},set:function(u){s=""+u,o.call(this,u)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return s},setValue:function(u){s=""+u},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function re(e){e._valueTracker||(e._valueTracker=de(e))}function me(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),s="";return e&&(s=se(e)?e.checked?"true":"false":e.value),e=s,e!==r?(t.setValue(e),!0):!1}function ye(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function he(e,t){var r=t.checked;return w({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function Ie(e,t){var r=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;r=A(t.value!=null?t.value:r),e._wrapperState={initialChecked:s,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Ue(e,t){t=t.checked,t!=null&&Y(e,"checked",t,!1)}function qe(e,t){Ue(e,t);var r=A(t.value),s=t.type;if(r!=null)s==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?wt(e,t.type,r):t.hasOwnProperty("defaultValue")&&wt(e,t.type,A(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Ze(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function wt(e,t,r){(t!=="number"||ye(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var et=Array.isArray;function be(e,t,r,s){if(e=e.options,t){t={};for(var l=0;l<r.length;l++)t["$"+r[l]]=!0;for(r=0;r<e.length;r++)l=t.hasOwnProperty("$"+e[r].value),e[r].selected!==l&&(e[r].selected=l),l&&s&&(e[r].defaultSelected=!0)}else{for(r=""+A(r),t=null,l=0;l<e.length;l++){if(e[l].value===r){e[l].selected=!0,s&&(e[l].defaultSelected=!0);return}t!==null||e[l].disabled||(t=e[l])}t!==null&&(t.selected=!0)}}function je(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(c(91));return w({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Me(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(c(92));if(et(r)){if(1<r.length)throw Error(c(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:A(r)}}function Se(e,t){var r=A(t.value),s=A(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),s!=null&&(e.defaultValue=""+s)}function Le(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function dt(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mt(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?dt(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Et,ur=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,s,l){MSApp.execUnsafeLocalFunction(function(){return e(t,r,s,l)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Et=Et||document.createElement("div"),Et.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Et.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Dt(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var _t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ea=["Webkit","ms","Moz","O"];Object.keys(_t).forEach(function(e){Ea.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),_t[t]=_t[e]})});function ls(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||_t.hasOwnProperty(e)&&_t[e]?(""+t).trim():t+"px"}function Lo(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var s=r.indexOf("--")===0,l=ls(r,t[r],s);r==="float"&&(r="cssFloat"),s?e.setProperty(r,l):e[r]=l}}var lu=w({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Da(e,t){if(t){if(lu[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(c(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(c(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(c(61))}if(t.style!=null&&typeof t.style!="object")throw Error(c(62))}}function Ta(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ia=null;function Ma(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Aa=null,Vr=null,Jr=null;function _o(e){if(e=$n(e)){if(typeof Aa!="function")throw Error(c(280));var t=e.stateNode;t&&(t=Ts(t),Aa(e.stateNode,e.type,t))}}function zo(e){Vr?Jr?Jr.push(e):Jr=[e]:Vr=e}function Uo(){if(Vr){var e=Vr,t=Jr;if(Jr=Vr=null,_o(e),t)for(e=0;e<t.length;e++)_o(t[e])}}function $o(e,t){return e(t)}function Bo(){}var Pa=!1;function Ho(e,t,r){if(Pa)return e(t,r);Pa=!0;try{return $o(e,t,r)}finally{Pa=!1,(Vr!==null||Jr!==null)&&(Bo(),Uo())}}function kn(e,t){var r=e.stateNode;if(r===null)return null;var s=Ts(r);if(s===null)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(c(231,t,typeof r));return r}var Ra=!1;if(N)try{var wn={};Object.defineProperty(wn,"passive",{get:function(){Ra=!0}}),window.addEventListener("test",wn,wn),window.removeEventListener("test",wn,wn)}catch{Ra=!1}function ou(e,t,r,s,l,o,u,g,S){var z=Array.prototype.slice.call(arguments,3);try{t.apply(r,z)}catch(Z){this.onError(Z)}}var jn=!1,os=null,is=!1,Fa=null,iu={onError:function(e){jn=!0,os=e}};function cu(e,t,r,s,l,o,u,g,S){jn=!1,os=null,ou.apply(iu,arguments)}function du(e,t,r,s,l,o,u,g,S){if(cu.apply(this,arguments),jn){if(jn){var z=os;jn=!1,os=null}else throw Error(c(198));is||(is=!0,Fa=z)}}function Pr(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,(t.flags&4098)!==0&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function Qo(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function qo(e){if(Pr(e)!==e)throw Error(c(188))}function uu(e){var t=e.alternate;if(!t){if(t=Pr(e),t===null)throw Error(c(188));return t!==e?null:e}for(var r=e,s=t;;){var l=r.return;if(l===null)break;var o=l.alternate;if(o===null){if(s=l.return,s!==null){r=s;continue}break}if(l.child===o.child){for(o=l.child;o;){if(o===r)return qo(l),e;if(o===s)return qo(l),t;o=o.sibling}throw Error(c(188))}if(r.return!==s.return)r=l,s=o;else{for(var u=!1,g=l.child;g;){if(g===r){u=!0,r=l,s=o;break}if(g===s){u=!0,s=l,r=o;break}g=g.sibling}if(!u){for(g=o.child;g;){if(g===r){u=!0,r=o,s=l;break}if(g===s){u=!0,s=o,r=l;break}g=g.sibling}if(!u)throw Error(c(189))}}if(r.alternate!==s)throw Error(c(190))}if(r.tag!==3)throw Error(c(188));return r.stateNode.current===r?e:t}function Wo(e){return e=uu(e),e!==null?Vo(e):null}function Vo(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Vo(e);if(t!==null)return t;e=e.sibling}return null}var Jo=i.unstable_scheduleCallback,Yo=i.unstable_cancelCallback,fu=i.unstable_shouldYield,mu=i.unstable_requestPaint,We=i.unstable_now,hu=i.unstable_getCurrentPriorityLevel,Oa=i.unstable_ImmediatePriority,Go=i.unstable_UserBlockingPriority,cs=i.unstable_NormalPriority,pu=i.unstable_LowPriority,Ko=i.unstable_IdlePriority,ds=null,Wt=null;function gu(e){if(Wt&&typeof Wt.onCommitFiberRoot=="function")try{Wt.onCommitFiberRoot(ds,e,void 0,(e.current.flags&128)===128)}catch{}}var zt=Math.clz32?Math.clz32:vu,yu=Math.log,xu=Math.LN2;function vu(e){return e>>>=0,e===0?32:31-(yu(e)/xu|0)|0}var us=64,fs=4194304;function bn(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ms(e,t){var r=e.pendingLanes;if(r===0)return 0;var s=0,l=e.suspendedLanes,o=e.pingedLanes,u=r&268435455;if(u!==0){var g=u&~l;g!==0?s=bn(g):(o&=u,o!==0&&(s=bn(o)))}else u=r&~l,u!==0?s=bn(u):o!==0&&(s=bn(o));if(s===0)return 0;if(t!==0&&t!==s&&(t&l)===0&&(l=s&-s,o=t&-t,l>=o||l===16&&(o&4194240)!==0))return t;if((s&4)!==0&&(s|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)r=31-zt(t),l=1<<r,s|=e[r],t&=~l;return s}function ku(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wu(e,t){for(var r=e.suspendedLanes,s=e.pingedLanes,l=e.expirationTimes,o=e.pendingLanes;0<o;){var u=31-zt(o),g=1<<u,S=l[u];S===-1?((g&r)===0||(g&s)!==0)&&(l[u]=ku(g,t)):S<=t&&(e.expiredLanes|=g),o&=~g}}function La(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Xo(){var e=us;return us<<=1,(us&4194240)===0&&(us=64),e}function _a(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Nn(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zt(t),e[t]=r}function ju(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<r;){var l=31-zt(r),o=1<<l;t[l]=0,s[l]=-1,e[l]=-1,r&=~o}}function za(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var s=31-zt(r),l=1<<s;l&t|e[s]&t&&(e[s]|=t),r&=~l}}var Fe=0;function Zo(e){return e&=-e,1<e?4<e?(e&268435455)!==0?16:536870912:4:1}var ei,Ua,ti,ri,ni,$a=!1,hs=[],fr=null,mr=null,hr=null,Sn=new Map,Cn=new Map,pr=[],bu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function si(e,t){switch(e){case"focusin":case"focusout":fr=null;break;case"dragenter":case"dragleave":mr=null;break;case"mouseover":case"mouseout":hr=null;break;case"pointerover":case"pointerout":Sn.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Cn.delete(t.pointerId)}}function En(e,t,r,s,l,o){return e===null||e.nativeEvent!==o?(e={blockedOn:t,domEventName:r,eventSystemFlags:s,nativeEvent:o,targetContainers:[l]},t!==null&&(t=$n(t),t!==null&&Ua(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,l!==null&&t.indexOf(l)===-1&&t.push(l),e)}function Nu(e,t,r,s,l){switch(t){case"focusin":return fr=En(fr,e,t,r,s,l),!0;case"dragenter":return mr=En(mr,e,t,r,s,l),!0;case"mouseover":return hr=En(hr,e,t,r,s,l),!0;case"pointerover":var o=l.pointerId;return Sn.set(o,En(Sn.get(o)||null,e,t,r,s,l)),!0;case"gotpointercapture":return o=l.pointerId,Cn.set(o,En(Cn.get(o)||null,e,t,r,s,l)),!0}return!1}function ai(e){var t=Rr(e.target);if(t!==null){var r=Pr(t);if(r!==null){if(t=r.tag,t===13){if(t=Qo(r),t!==null){e.blockedOn=t,ni(e.priority,function(){ti(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ps(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=Ha(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var s=new r.constructor(r.type,r);Ia=s,r.target.dispatchEvent(s),Ia=null}else return t=$n(r),t!==null&&Ua(t),e.blockedOn=r,!1;t.shift()}return!0}function li(e,t,r){ps(e)&&r.delete(t)}function Su(){$a=!1,fr!==null&&ps(fr)&&(fr=null),mr!==null&&ps(mr)&&(mr=null),hr!==null&&ps(hr)&&(hr=null),Sn.forEach(li),Cn.forEach(li)}function Dn(e,t){e.blockedOn===t&&(e.blockedOn=null,$a||($a=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,Su)))}function Tn(e){function t(l){return Dn(l,e)}if(0<hs.length){Dn(hs[0],e);for(var r=1;r<hs.length;r++){var s=hs[r];s.blockedOn===e&&(s.blockedOn=null)}}for(fr!==null&&Dn(fr,e),mr!==null&&Dn(mr,e),hr!==null&&Dn(hr,e),Sn.forEach(t),Cn.forEach(t),r=0;r<pr.length;r++)s=pr[r],s.blockedOn===e&&(s.blockedOn=null);for(;0<pr.length&&(r=pr[0],r.blockedOn===null);)ai(r),r.blockedOn===null&&pr.shift()}var Yr=T.ReactCurrentBatchConfig,gs=!0;function Cu(e,t,r,s){var l=Fe,o=Yr.transition;Yr.transition=null;try{Fe=1,Ba(e,t,r,s)}finally{Fe=l,Yr.transition=o}}function Eu(e,t,r,s){var l=Fe,o=Yr.transition;Yr.transition=null;try{Fe=4,Ba(e,t,r,s)}finally{Fe=l,Yr.transition=o}}function Ba(e,t,r,s){if(gs){var l=Ha(e,t,r,s);if(l===null)ll(e,t,s,ys,r),si(e,s);else if(Nu(l,e,t,r,s))s.stopPropagation();else if(si(e,s),t&4&&-1<bu.indexOf(e)){for(;l!==null;){var o=$n(l);if(o!==null&&ei(o),o=Ha(e,t,r,s),o===null&&ll(e,t,s,ys,r),o===l)break;l=o}l!==null&&s.stopPropagation()}else ll(e,t,s,null,r)}}var ys=null;function Ha(e,t,r,s){if(ys=null,e=Ma(s),e=Rr(e),e!==null)if(t=Pr(e),t===null)e=null;else if(r=t.tag,r===13){if(e=Qo(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return ys=e,null}function oi(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hu()){case Oa:return 1;case Go:return 4;case cs:case pu:return 16;case Ko:return 536870912;default:return 16}default:return 16}}var gr=null,Qa=null,xs=null;function ii(){if(xs)return xs;var e,t=Qa,r=t.length,s,l="value"in gr?gr.value:gr.textContent,o=l.length;for(e=0;e<r&&t[e]===l[e];e++);var u=r-e;for(s=1;s<=u&&t[r-s]===l[o-s];s++);return xs=l.slice(e,1<s?1-s:void 0)}function vs(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ks(){return!0}function ci(){return!1}function jt(e){function t(r,s,l,o,u){this._reactName=r,this._targetInst=l,this.type=s,this.nativeEvent=o,this.target=u,this.currentTarget=null;for(var g in e)e.hasOwnProperty(g)&&(r=e[g],this[g]=r?r(o):o[g]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?ks:ci,this.isPropagationStopped=ci,this}return w(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=ks)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=ks)},persist:function(){},isPersistent:ks}),t}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qa=jt(Gr),In=w({},Gr,{view:0,detail:0}),Du=jt(In),Wa,Va,Mn,ws=w({},In,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ya,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Mn&&(Mn&&e.type==="mousemove"?(Wa=e.screenX-Mn.screenX,Va=e.screenY-Mn.screenY):Va=Wa=0,Mn=e),Wa)},movementY:function(e){return"movementY"in e?e.movementY:Va}}),di=jt(ws),Tu=w({},ws,{dataTransfer:0}),Iu=jt(Tu),Mu=w({},In,{relatedTarget:0}),Ja=jt(Mu),Au=w({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Pu=jt(Au),Ru=w({},Gr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),Fu=jt(Ru),Ou=w({},Gr,{data:0}),ui=jt(Ou),Lu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_u={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},zu={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Uu(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=zu[e])?!!t[e]:!1}function Ya(){return Uu}var $u=w({},In,{key:function(e){if(e.key){var t=Lu[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=vs(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?_u[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ya,charCode:function(e){return e.type==="keypress"?vs(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?vs(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),Bu=jt($u),Hu=w({},ws,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fi=jt(Hu),Qu=w({},In,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ya}),qu=jt(Qu),Wu=w({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Vu=jt(Wu),Ju=w({},ws,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Yu=jt(Ju),Gu=[9,13,27,32],Ga=N&&"CompositionEvent"in window,An=null;N&&"documentMode"in document&&(An=document.documentMode);var Ku=N&&"TextEvent"in window&&!An,mi=N&&(!Ga||An&&8<An&&11>=An),hi=" ",pi=!1;function gi(e,t){switch(e){case"keyup":return Gu.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yi(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Kr=!1;function Xu(e,t){switch(e){case"compositionend":return yi(t);case"keypress":return t.which!==32?null:(pi=!0,hi);case"textInput":return e=t.data,e===hi&&pi?null:e;default:return null}}function Zu(e,t){if(Kr)return e==="compositionend"||!Ga&&gi(e,t)?(e=ii(),xs=Qa=gr=null,Kr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return mi&&t.locale!=="ko"?null:t.data;default:return null}}var ef={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xi(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!ef[e.type]:t==="textarea"}function vi(e,t,r,s){zo(s),t=Cs(t,"onChange"),0<t.length&&(r=new qa("onChange","change",null,r,s),e.push({event:r,listeners:t}))}var Pn=null,Rn=null;function tf(e){Li(e,0)}function js(e){var t=rn(e);if(me(t))return e}function rf(e,t){if(e==="change")return t}var ki=!1;if(N){var Ka;if(N){var Xa="oninput"in document;if(!Xa){var wi=document.createElement("div");wi.setAttribute("oninput","return;"),Xa=typeof wi.oninput=="function"}Ka=Xa}else Ka=!1;ki=Ka&&(!document.documentMode||9<document.documentMode)}function ji(){Pn&&(Pn.detachEvent("onpropertychange",bi),Rn=Pn=null)}function bi(e){if(e.propertyName==="value"&&js(Rn)){var t=[];vi(t,Rn,e,Ma(e)),Ho(tf,t)}}function nf(e,t,r){e==="focusin"?(ji(),Pn=t,Rn=r,Pn.attachEvent("onpropertychange",bi)):e==="focusout"&&ji()}function sf(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return js(Rn)}function af(e,t){if(e==="click")return js(t)}function lf(e,t){if(e==="input"||e==="change")return js(t)}function of(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Ut=typeof Object.is=="function"?Object.is:of;function Fn(e,t){if(Ut(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),s=Object.keys(t);if(r.length!==s.length)return!1;for(s=0;s<r.length;s++){var l=r[s];if(!E.call(t,l)||!Ut(e[l],t[l]))return!1}return!0}function Ni(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Si(e,t){var r=Ni(e);e=0;for(var s;r;){if(r.nodeType===3){if(s=e+r.textContent.length,e<=t&&s>=t)return{node:r,offset:t-e};e=s}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=Ni(r)}}function Ci(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Ci(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Ei(){for(var e=window,t=ye();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=ye(e.document)}return t}function Za(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function cf(e){var t=Ei(),r=e.focusedElem,s=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&Ci(r.ownerDocument.documentElement,r)){if(s!==null&&Za(r)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var l=r.textContent.length,o=Math.min(s.start,l);s=s.end===void 0?o:Math.min(s.end,l),!e.extend&&o>s&&(l=s,s=o,o=l),l=Si(r,o);var u=Si(r,s);l&&u&&(e.rangeCount!==1||e.anchorNode!==l.node||e.anchorOffset!==l.offset||e.focusNode!==u.node||e.focusOffset!==u.offset)&&(t=t.createRange(),t.setStart(l.node,l.offset),e.removeAllRanges(),o>s?(e.addRange(t),e.extend(u.node,u.offset)):(t.setEnd(u.node,u.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var df=N&&"documentMode"in document&&11>=document.documentMode,Xr=null,el=null,On=null,tl=!1;function Di(e,t,r){var s=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;tl||Xr==null||Xr!==ye(s)||(s=Xr,"selectionStart"in s&&Za(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),On&&Fn(On,s)||(On=s,s=Cs(el,"onSelect"),0<s.length&&(t=new qa("onSelect","select",null,t,r),e.push({event:t,listeners:s}),t.target=Xr)))}function bs(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Zr={animationend:bs("Animation","AnimationEnd"),animationiteration:bs("Animation","AnimationIteration"),animationstart:bs("Animation","AnimationStart"),transitionend:bs("Transition","TransitionEnd")},rl={},Ti={};N&&(Ti=document.createElement("div").style,"AnimationEvent"in window||(delete Zr.animationend.animation,delete Zr.animationiteration.animation,delete Zr.animationstart.animation),"TransitionEvent"in window||delete Zr.transitionend.transition);function Ns(e){if(rl[e])return rl[e];if(!Zr[e])return e;var t=Zr[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in Ti)return rl[e]=t[r];return e}var Ii=Ns("animationend"),Mi=Ns("animationiteration"),Ai=Ns("animationstart"),Pi=Ns("transitionend"),Ri=new Map,Fi="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function yr(e,t){Ri.set(e,t),h(t,[e])}for(var nl=0;nl<Fi.length;nl++){var sl=Fi[nl],uf=sl.toLowerCase(),ff=sl[0].toUpperCase()+sl.slice(1);yr(uf,"on"+ff)}yr(Ii,"onAnimationEnd"),yr(Mi,"onAnimationIteration"),yr(Ai,"onAnimationStart"),yr("dblclick","onDoubleClick"),yr("focusin","onFocus"),yr("focusout","onBlur"),yr(Pi,"onTransitionEnd"),p("onMouseEnter",["mouseout","mouseover"]),p("onMouseLeave",["mouseout","mouseover"]),p("onPointerEnter",["pointerout","pointerover"]),p("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ln="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),mf=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ln));function Oi(e,t,r){var s=e.type||"unknown-event";e.currentTarget=r,du(s,t,void 0,e),e.currentTarget=null}function Li(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var s=e[r],l=s.event;s=s.listeners;e:{var o=void 0;if(t)for(var u=s.length-1;0<=u;u--){var g=s[u],S=g.instance,z=g.currentTarget;if(g=g.listener,S!==o&&l.isPropagationStopped())break e;Oi(l,g,z),o=S}else for(u=0;u<s.length;u++){if(g=s[u],S=g.instance,z=g.currentTarget,g=g.listener,S!==o&&l.isPropagationStopped())break e;Oi(l,g,z),o=S}}}if(is)throw e=Fa,is=!1,Fa=null,e}function _e(e,t){var r=t[fl];r===void 0&&(r=t[fl]=new Set);var s=e+"__bubble";r.has(s)||(_i(t,e,2,!1),r.add(s))}function al(e,t,r){var s=0;t&&(s|=4),_i(r,e,s,t)}var Ss="_reactListening"+Math.random().toString(36).slice(2);function _n(e){if(!e[Ss]){e[Ss]=!0,m.forEach(function(r){r!=="selectionchange"&&(mf.has(r)||al(r,!1,e),al(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ss]||(t[Ss]=!0,al("selectionchange",!1,t))}}function _i(e,t,r,s){switch(oi(t)){case 1:var l=Cu;break;case 4:l=Eu;break;default:l=Ba}r=l.bind(null,t,r,e),l=void 0,!Ra||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(l=!0),s?l!==void 0?e.addEventListener(t,r,{capture:!0,passive:l}):e.addEventListener(t,r,!0):l!==void 0?e.addEventListener(t,r,{passive:l}):e.addEventListener(t,r,!1)}function ll(e,t,r,s,l){var o=s;if((t&1)===0&&(t&2)===0&&s!==null)e:for(;;){if(s===null)return;var u=s.tag;if(u===3||u===4){var g=s.stateNode.containerInfo;if(g===l||g.nodeType===8&&g.parentNode===l)break;if(u===4)for(u=s.return;u!==null;){var S=u.tag;if((S===3||S===4)&&(S=u.stateNode.containerInfo,S===l||S.nodeType===8&&S.parentNode===l))return;u=u.return}for(;g!==null;){if(u=Rr(g),u===null)return;if(S=u.tag,S===5||S===6){s=o=u;continue e}g=g.parentNode}}s=s.return}Ho(function(){var z=o,Z=Ma(r),ne=[];e:{var K=Ri.get(e);if(K!==void 0){var ce=qa,fe=e;switch(e){case"keypress":if(vs(r)===0)break e;case"keydown":case"keyup":ce=Bu;break;case"focusin":fe="focus",ce=Ja;break;case"focusout":fe="blur",ce=Ja;break;case"beforeblur":case"afterblur":ce=Ja;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=di;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=Iu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=qu;break;case Ii:case Mi:case Ai:ce=Pu;break;case Pi:ce=Vu;break;case"scroll":ce=Du;break;case"wheel":ce=Yu;break;case"copy":case"cut":case"paste":ce=Fu;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=fi}var pe=(t&4)!==0,Ve=!pe&&e==="scroll",P=pe?K!==null?K+"Capture":null:K;pe=[];for(var C=z,O;C!==null;){O=C;var le=O.stateNode;if(O.tag===5&&le!==null&&(O=le,P!==null&&(le=kn(C,P),le!=null&&pe.push(zn(C,le,O)))),Ve)break;C=C.return}0<pe.length&&(K=new ce(K,fe,null,r,Z),ne.push({event:K,listeners:pe}))}}if((t&7)===0){e:{if(K=e==="mouseover"||e==="pointerover",ce=e==="mouseout"||e==="pointerout",K&&r!==Ia&&(fe=r.relatedTarget||r.fromElement)&&(Rr(fe)||fe[rr]))break e;if((ce||K)&&(K=Z.window===Z?Z:(K=Z.ownerDocument)?K.defaultView||K.parentWindow:window,ce?(fe=r.relatedTarget||r.toElement,ce=z,fe=fe?Rr(fe):null,fe!==null&&(Ve=Pr(fe),fe!==Ve||fe.tag!==5&&fe.tag!==6)&&(fe=null)):(ce=null,fe=z),ce!==fe)){if(pe=di,le="onMouseLeave",P="onMouseEnter",C="mouse",(e==="pointerout"||e==="pointerover")&&(pe=fi,le="onPointerLeave",P="onPointerEnter",C="pointer"),Ve=ce==null?K:rn(ce),O=fe==null?K:rn(fe),K=new pe(le,C+"leave",ce,r,Z),K.target=Ve,K.relatedTarget=O,le=null,Rr(Z)===z&&(pe=new pe(P,C+"enter",fe,r,Z),pe.target=O,pe.relatedTarget=Ve,le=pe),Ve=le,ce&&fe)t:{for(pe=ce,P=fe,C=0,O=pe;O;O=en(O))C++;for(O=0,le=P;le;le=en(le))O++;for(;0<C-O;)pe=en(pe),C--;for(;0<O-C;)P=en(P),O--;for(;C--;){if(pe===P||P!==null&&pe===P.alternate)break t;pe=en(pe),P=en(P)}pe=null}else pe=null;ce!==null&&zi(ne,K,ce,pe,!1),fe!==null&&Ve!==null&&zi(ne,Ve,fe,pe,!0)}}e:{if(K=z?rn(z):window,ce=K.nodeName&&K.nodeName.toLowerCase(),ce==="select"||ce==="input"&&K.type==="file")var ge=rf;else if(xi(K))if(ki)ge=lf;else{ge=sf;var xe=nf}else(ce=K.nodeName)&&ce.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ge=af);if(ge&&(ge=ge(e,z))){vi(ne,ge,r,Z);break e}xe&&xe(e,K,z),e==="focusout"&&(xe=K._wrapperState)&&xe.controlled&&K.type==="number"&&wt(K,"number",K.value)}switch(xe=z?rn(z):window,e){case"focusin":(xi(xe)||xe.contentEditable==="true")&&(Xr=xe,el=z,On=null);break;case"focusout":On=el=Xr=null;break;case"mousedown":tl=!0;break;case"contextmenu":case"mouseup":case"dragend":tl=!1,Di(ne,r,Z);break;case"selectionchange":if(df)break;case"keydown":case"keyup":Di(ne,r,Z)}var ve;if(Ga)e:{switch(e){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Kr?gi(e,r)&&(Ce="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(Ce="onCompositionStart");Ce&&(mi&&r.locale!=="ko"&&(Kr||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Kr&&(ve=ii()):(gr=Z,Qa="value"in gr?gr.value:gr.textContent,Kr=!0)),xe=Cs(z,Ce),0<xe.length&&(Ce=new ui(Ce,e,null,r,Z),ne.push({event:Ce,listeners:xe}),ve?Ce.data=ve:(ve=yi(r),ve!==null&&(Ce.data=ve)))),(ve=Ku?Xu(e,r):Zu(e,r))&&(z=Cs(z,"onBeforeInput"),0<z.length&&(Z=new ui("onBeforeInput","beforeinput",null,r,Z),ne.push({event:Z,listeners:z}),Z.data=ve))}Li(ne,t)})}function zn(e,t,r){return{instance:e,listener:t,currentTarget:r}}function Cs(e,t){for(var r=t+"Capture",s=[];e!==null;){var l=e,o=l.stateNode;l.tag===5&&o!==null&&(l=o,o=kn(e,r),o!=null&&s.unshift(zn(e,o,l)),o=kn(e,t),o!=null&&s.push(zn(e,o,l))),e=e.return}return s}function en(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function zi(e,t,r,s,l){for(var o=t._reactName,u=[];r!==null&&r!==s;){var g=r,S=g.alternate,z=g.stateNode;if(S!==null&&S===s)break;g.tag===5&&z!==null&&(g=z,l?(S=kn(r,o),S!=null&&u.unshift(zn(r,S,g))):l||(S=kn(r,o),S!=null&&u.push(zn(r,S,g)))),r=r.return}u.length!==0&&e.push({event:t,listeners:u})}var hf=/\r\n?/g,pf=/\u0000|\uFFFD/g;function Ui(e){return(typeof e=="string"?e:""+e).replace(hf,`
`).replace(pf,"")}function Es(e,t,r){if(t=Ui(t),Ui(e)!==t&&r)throw Error(c(425))}function Ds(){}var ol=null,il=null;function cl(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var dl=typeof setTimeout=="function"?setTimeout:void 0,gf=typeof clearTimeout=="function"?clearTimeout:void 0,$i=typeof Promise=="function"?Promise:void 0,yf=typeof queueMicrotask=="function"?queueMicrotask:typeof $i<"u"?function(e){return $i.resolve(null).then(e).catch(xf)}:dl;function xf(e){setTimeout(function(){throw e})}function ul(e,t){var r=t,s=0;do{var l=r.nextSibling;if(e.removeChild(r),l&&l.nodeType===8)if(r=l.data,r==="/$"){if(s===0){e.removeChild(l),Tn(t);return}s--}else r!=="$"&&r!=="$?"&&r!=="$!"||s++;r=l}while(r);Tn(t)}function xr(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Bi(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var tn=Math.random().toString(36).slice(2),Vt="__reactFiber$"+tn,Un="__reactProps$"+tn,rr="__reactContainer$"+tn,fl="__reactEvents$"+tn,vf="__reactListeners$"+tn,kf="__reactHandles$"+tn;function Rr(e){var t=e[Vt];if(t)return t;for(var r=e.parentNode;r;){if(t=r[rr]||r[Vt]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=Bi(e);e!==null;){if(r=e[Vt])return r;e=Bi(e)}return t}e=r,r=e.parentNode}return null}function $n(e){return e=e[Vt]||e[rr],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function rn(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(c(33))}function Ts(e){return e[Un]||null}var ml=[],nn=-1;function vr(e){return{current:e}}function ze(e){0>nn||(e.current=ml[nn],ml[nn]=null,nn--)}function Oe(e,t){nn++,ml[nn]=e.current,e.current=t}var kr={},lt=vr(kr),ht=vr(!1),Fr=kr;function sn(e,t){var r=e.type.contextTypes;if(!r)return kr;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var l={},o;for(o in r)l[o]=t[o];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=l),l}function pt(e){return e=e.childContextTypes,e!=null}function Is(){ze(ht),ze(lt)}function Hi(e,t,r){if(lt.current!==kr)throw Error(c(168));Oe(lt,t),Oe(ht,r)}function Qi(e,t,r){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return r;s=s.getChildContext();for(var l in s)if(!(l in t))throw Error(c(108,$(e)||"Unknown",l));return w({},r,s)}function Ms(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||kr,Fr=lt.current,Oe(lt,e),Oe(ht,ht.current),!0}function qi(e,t,r){var s=e.stateNode;if(!s)throw Error(c(169));r?(e=Qi(e,t,Fr),s.__reactInternalMemoizedMergedChildContext=e,ze(ht),ze(lt),Oe(lt,e)):ze(ht),Oe(ht,r)}var nr=null,As=!1,hl=!1;function Wi(e){nr===null?nr=[e]:nr.push(e)}function wf(e){As=!0,Wi(e)}function wr(){if(!hl&&nr!==null){hl=!0;var e=0,t=Fe;try{var r=nr;for(Fe=1;e<r.length;e++){var s=r[e];do s=s(!0);while(s!==null)}nr=null,As=!1}catch(l){throw nr!==null&&(nr=nr.slice(e+1)),Jo(Oa,wr),l}finally{Fe=t,hl=!1}}return null}var an=[],ln=0,Ps=null,Rs=0,Tt=[],It=0,Or=null,sr=1,ar="";function Lr(e,t){an[ln++]=Rs,an[ln++]=Ps,Ps=e,Rs=t}function Vi(e,t,r){Tt[It++]=sr,Tt[It++]=ar,Tt[It++]=Or,Or=e;var s=sr;e=ar;var l=32-zt(s)-1;s&=~(1<<l),r+=1;var o=32-zt(t)+l;if(30<o){var u=l-l%5;o=(s&(1<<u)-1).toString(32),s>>=u,l-=u,sr=1<<32-zt(t)+l|r<<l|s,ar=o+e}else sr=1<<o|r<<l|s,ar=e}function pl(e){e.return!==null&&(Lr(e,1),Vi(e,1,0))}function gl(e){for(;e===Ps;)Ps=an[--ln],an[ln]=null,Rs=an[--ln],an[ln]=null;for(;e===Or;)Or=Tt[--It],Tt[It]=null,ar=Tt[--It],Tt[It]=null,sr=Tt[--It],Tt[It]=null}var bt=null,Nt=null,$e=!1,$t=null;function Ji(e,t){var r=Rt(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function Yi(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,bt=e,Nt=xr(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,bt=e,Nt=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=Or!==null?{id:sr,overflow:ar}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=Rt(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,bt=e,Nt=null,!0):!1;default:return!1}}function yl(e){return(e.mode&1)!==0&&(e.flags&128)===0}function xl(e){if($e){var t=Nt;if(t){var r=t;if(!Yi(e,t)){if(yl(e))throw Error(c(418));t=xr(r.nextSibling);var s=bt;t&&Yi(e,t)?Ji(s,r):(e.flags=e.flags&-4097|2,$e=!1,bt=e)}}else{if(yl(e))throw Error(c(418));e.flags=e.flags&-4097|2,$e=!1,bt=e}}}function Gi(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;bt=e}function Fs(e){if(e!==bt)return!1;if(!$e)return Gi(e),$e=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cl(e.type,e.memoizedProps)),t&&(t=Nt)){if(yl(e))throw Ki(),Error(c(418));for(;t;)Ji(e,t),t=xr(t.nextSibling)}if(Gi(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(c(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Nt=xr(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Nt=null}}else Nt=bt?xr(e.stateNode.nextSibling):null;return!0}function Ki(){for(var e=Nt;e;)e=xr(e.nextSibling)}function on(){Nt=bt=null,$e=!1}function vl(e){$t===null?$t=[e]:$t.push(e)}var jf=T.ReactCurrentBatchConfig;function Bn(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(c(309));var s=r.stateNode}if(!s)throw Error(c(147,e));var l=s,o=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===o?t.ref:(t=function(u){var g=l.refs;u===null?delete g[o]:g[o]=u},t._stringRef=o,t)}if(typeof e!="string")throw Error(c(284));if(!r._owner)throw Error(c(290,e))}return e}function Os(e,t){throw e=Object.prototype.toString.call(t),Error(c(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Xi(e){var t=e._init;return t(e._payload)}function Zi(e){function t(P,C){if(e){var O=P.deletions;O===null?(P.deletions=[C],P.flags|=16):O.push(C)}}function r(P,C){if(!e)return null;for(;C!==null;)t(P,C),C=C.sibling;return null}function s(P,C){for(P=new Map;C!==null;)C.key!==null?P.set(C.key,C):P.set(C.index,C),C=C.sibling;return P}function l(P,C){return P=Tr(P,C),P.index=0,P.sibling=null,P}function o(P,C,O){return P.index=O,e?(O=P.alternate,O!==null?(O=O.index,O<C?(P.flags|=2,C):O):(P.flags|=2,C)):(P.flags|=1048576,C)}function u(P){return e&&P.alternate===null&&(P.flags|=2),P}function g(P,C,O,le){return C===null||C.tag!==6?(C=uo(O,P.mode,le),C.return=P,C):(C=l(C,O),C.return=P,C)}function S(P,C,O,le){var ge=O.type;return ge===W?Z(P,C,O.props.children,le,O.key):C!==null&&(C.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Te&&Xi(ge)===C.type)?(le=l(C,O.props),le.ref=Bn(P,C,O),le.return=P,le):(le=la(O.type,O.key,O.props,null,P.mode,le),le.ref=Bn(P,C,O),le.return=P,le)}function z(P,C,O,le){return C===null||C.tag!==4||C.stateNode.containerInfo!==O.containerInfo||C.stateNode.implementation!==O.implementation?(C=fo(O,P.mode,le),C.return=P,C):(C=l(C,O.children||[]),C.return=P,C)}function Z(P,C,O,le,ge){return C===null||C.tag!==7?(C=qr(O,P.mode,le,ge),C.return=P,C):(C=l(C,O),C.return=P,C)}function ne(P,C,O){if(typeof C=="string"&&C!==""||typeof C=="number")return C=uo(""+C,P.mode,O),C.return=P,C;if(typeof C=="object"&&C!==null){switch(C.$$typeof){case M:return O=la(C.type,C.key,C.props,null,P.mode,O),O.ref=Bn(P,null,C),O.return=P,O;case B:return C=fo(C,P.mode,O),C.return=P,C;case Te:var le=C._init;return ne(P,le(C._payload),O)}if(et(C)||oe(C))return C=qr(C,P.mode,O,null),C.return=P,C;Os(P,C)}return null}function K(P,C,O,le){var ge=C!==null?C.key:null;if(typeof O=="string"&&O!==""||typeof O=="number")return ge!==null?null:g(P,C,""+O,le);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case M:return O.key===ge?S(P,C,O,le):null;case B:return O.key===ge?z(P,C,O,le):null;case Te:return ge=O._init,K(P,C,ge(O._payload),le)}if(et(O)||oe(O))return ge!==null?null:Z(P,C,O,le,null);Os(P,O)}return null}function ce(P,C,O,le,ge){if(typeof le=="string"&&le!==""||typeof le=="number")return P=P.get(O)||null,g(C,P,""+le,ge);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case M:return P=P.get(le.key===null?O:le.key)||null,S(C,P,le,ge);case B:return P=P.get(le.key===null?O:le.key)||null,z(C,P,le,ge);case Te:var xe=le._init;return ce(P,C,O,xe(le._payload),ge)}if(et(le)||oe(le))return P=P.get(O)||null,Z(C,P,le,ge,null);Os(C,le)}return null}function fe(P,C,O,le){for(var ge=null,xe=null,ve=C,Ce=C=0,nt=null;ve!==null&&Ce<O.length;Ce++){ve.index>Ce?(nt=ve,ve=null):nt=ve.sibling;var Re=K(P,ve,O[Ce],le);if(Re===null){ve===null&&(ve=nt);break}e&&ve&&Re.alternate===null&&t(P,ve),C=o(Re,C,Ce),xe===null?ge=Re:xe.sibling=Re,xe=Re,ve=nt}if(Ce===O.length)return r(P,ve),$e&&Lr(P,Ce),ge;if(ve===null){for(;Ce<O.length;Ce++)ve=ne(P,O[Ce],le),ve!==null&&(C=o(ve,C,Ce),xe===null?ge=ve:xe.sibling=ve,xe=ve);return $e&&Lr(P,Ce),ge}for(ve=s(P,ve);Ce<O.length;Ce++)nt=ce(ve,P,Ce,O[Ce],le),nt!==null&&(e&&nt.alternate!==null&&ve.delete(nt.key===null?Ce:nt.key),C=o(nt,C,Ce),xe===null?ge=nt:xe.sibling=nt,xe=nt);return e&&ve.forEach(function(Ir){return t(P,Ir)}),$e&&Lr(P,Ce),ge}function pe(P,C,O,le){var ge=oe(O);if(typeof ge!="function")throw Error(c(150));if(O=ge.call(O),O==null)throw Error(c(151));for(var xe=ge=null,ve=C,Ce=C=0,nt=null,Re=O.next();ve!==null&&!Re.done;Ce++,Re=O.next()){ve.index>Ce?(nt=ve,ve=null):nt=ve.sibling;var Ir=K(P,ve,Re.value,le);if(Ir===null){ve===null&&(ve=nt);break}e&&ve&&Ir.alternate===null&&t(P,ve),C=o(Ir,C,Ce),xe===null?ge=Ir:xe.sibling=Ir,xe=Ir,ve=nt}if(Re.done)return r(P,ve),$e&&Lr(P,Ce),ge;if(ve===null){for(;!Re.done;Ce++,Re=O.next())Re=ne(P,Re.value,le),Re!==null&&(C=o(Re,C,Ce),xe===null?ge=Re:xe.sibling=Re,xe=Re);return $e&&Lr(P,Ce),ge}for(ve=s(P,ve);!Re.done;Ce++,Re=O.next())Re=ce(ve,P,Ce,Re.value,le),Re!==null&&(e&&Re.alternate!==null&&ve.delete(Re.key===null?Ce:Re.key),C=o(Re,C,Ce),xe===null?ge=Re:xe.sibling=Re,xe=Re);return e&&ve.forEach(function(tm){return t(P,tm)}),$e&&Lr(P,Ce),ge}function Ve(P,C,O,le){if(typeof O=="object"&&O!==null&&O.type===W&&O.key===null&&(O=O.props.children),typeof O=="object"&&O!==null){switch(O.$$typeof){case M:e:{for(var ge=O.key,xe=C;xe!==null;){if(xe.key===ge){if(ge=O.type,ge===W){if(xe.tag===7){r(P,xe.sibling),C=l(xe,O.props.children),C.return=P,P=C;break e}}else if(xe.elementType===ge||typeof ge=="object"&&ge!==null&&ge.$$typeof===Te&&Xi(ge)===xe.type){r(P,xe.sibling),C=l(xe,O.props),C.ref=Bn(P,xe,O),C.return=P,P=C;break e}r(P,xe);break}else t(P,xe);xe=xe.sibling}O.type===W?(C=qr(O.props.children,P.mode,le,O.key),C.return=P,P=C):(le=la(O.type,O.key,O.props,null,P.mode,le),le.ref=Bn(P,C,O),le.return=P,P=le)}return u(P);case B:e:{for(xe=O.key;C!==null;){if(C.key===xe)if(C.tag===4&&C.stateNode.containerInfo===O.containerInfo&&C.stateNode.implementation===O.implementation){r(P,C.sibling),C=l(C,O.children||[]),C.return=P,P=C;break e}else{r(P,C);break}else t(P,C);C=C.sibling}C=fo(O,P.mode,le),C.return=P,P=C}return u(P);case Te:return xe=O._init,Ve(P,C,xe(O._payload),le)}if(et(O))return fe(P,C,O,le);if(oe(O))return pe(P,C,O,le);Os(P,O)}return typeof O=="string"&&O!==""||typeof O=="number"?(O=""+O,C!==null&&C.tag===6?(r(P,C.sibling),C=l(C,O),C.return=P,P=C):(r(P,C),C=uo(O,P.mode,le),C.return=P,P=C),u(P)):r(P,C)}return Ve}var cn=Zi(!0),ec=Zi(!1),Ls=vr(null),_s=null,dn=null,kl=null;function wl(){kl=dn=_s=null}function jl(e){var t=Ls.current;ze(Ls),e._currentValue=t}function bl(e,t,r){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===r)break;e=e.return}}function un(e,t){_s=e,kl=dn=null,e=e.dependencies,e!==null&&e.firstContext!==null&&((e.lanes&t)!==0&&(gt=!0),e.firstContext=null)}function Mt(e){var t=e._currentValue;if(kl!==e)if(e={context:e,memoizedValue:t,next:null},dn===null){if(_s===null)throw Error(c(308));dn=e,_s.dependencies={lanes:0,firstContext:e}}else dn=dn.next=e;return t}var _r=null;function Nl(e){_r===null?_r=[e]:_r.push(e)}function tc(e,t,r,s){var l=t.interleaved;return l===null?(r.next=r,Nl(t)):(r.next=l.next,l.next=r),t.interleaved=r,lr(e,s)}function lr(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var jr=!1;function Sl(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rc(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function or(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function br(e,t,r){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,(Pe&2)!==0){var l=s.pending;return l===null?t.next=t:(t.next=l.next,l.next=t),s.pending=t,lr(e,r)}return l=s.interleaved,l===null?(t.next=t,Nl(s)):(t.next=l.next,l.next=t),s.interleaved=t,lr(e,r)}function zs(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,za(e,r)}}function nc(e,t){var r=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,r===s)){var l=null,o=null;if(r=r.firstBaseUpdate,r!==null){do{var u={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};o===null?l=o=u:o=o.next=u,r=r.next}while(r!==null);o===null?l=o=t:o=o.next=t}else l=o=t;r={baseState:s.baseState,firstBaseUpdate:l,lastBaseUpdate:o,shared:s.shared,effects:s.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function Us(e,t,r,s){var l=e.updateQueue;jr=!1;var o=l.firstBaseUpdate,u=l.lastBaseUpdate,g=l.shared.pending;if(g!==null){l.shared.pending=null;var S=g,z=S.next;S.next=null,u===null?o=z:u.next=z,u=S;var Z=e.alternate;Z!==null&&(Z=Z.updateQueue,g=Z.lastBaseUpdate,g!==u&&(g===null?Z.firstBaseUpdate=z:g.next=z,Z.lastBaseUpdate=S))}if(o!==null){var ne=l.baseState;u=0,Z=z=S=null,g=o;do{var K=g.lane,ce=g.eventTime;if((s&K)===K){Z!==null&&(Z=Z.next={eventTime:ce,lane:0,tag:g.tag,payload:g.payload,callback:g.callback,next:null});e:{var fe=e,pe=g;switch(K=t,ce=r,pe.tag){case 1:if(fe=pe.payload,typeof fe=="function"){ne=fe.call(ce,ne,K);break e}ne=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=pe.payload,K=typeof fe=="function"?fe.call(ce,ne,K):fe,K==null)break e;ne=w({},ne,K);break e;case 2:jr=!0}}g.callback!==null&&g.lane!==0&&(e.flags|=64,K=l.effects,K===null?l.effects=[g]:K.push(g))}else ce={eventTime:ce,lane:K,tag:g.tag,payload:g.payload,callback:g.callback,next:null},Z===null?(z=Z=ce,S=ne):Z=Z.next=ce,u|=K;if(g=g.next,g===null){if(g=l.shared.pending,g===null)break;K=g,g=K.next,K.next=null,l.lastBaseUpdate=K,l.shared.pending=null}}while(!0);if(Z===null&&(S=ne),l.baseState=S,l.firstBaseUpdate=z,l.lastBaseUpdate=Z,t=l.shared.interleaved,t!==null){l=t;do u|=l.lane,l=l.next;while(l!==t)}else o===null&&(l.shared.lanes=0);$r|=u,e.lanes=u,e.memoizedState=ne}}function sc(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],l=s.callback;if(l!==null){if(s.callback=null,s=r,typeof l!="function")throw Error(c(191,l));l.call(s)}}}var Hn={},Jt=vr(Hn),Qn=vr(Hn),qn=vr(Hn);function zr(e){if(e===Hn)throw Error(c(174));return e}function Cl(e,t){switch(Oe(qn,t),Oe(Qn,e),Oe(Jt,Hn),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:mt(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=mt(t,e)}ze(Jt),Oe(Jt,t)}function fn(){ze(Jt),ze(Qn),ze(qn)}function ac(e){zr(qn.current);var t=zr(Jt.current),r=mt(t,e.type);t!==r&&(Oe(Qn,e),Oe(Jt,r))}function El(e){Qn.current===e&&(ze(Jt),ze(Qn))}var Be=vr(0);function $s(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if((t.flags&128)!==0)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Dl=[];function Tl(){for(var e=0;e<Dl.length;e++)Dl[e]._workInProgressVersionPrimary=null;Dl.length=0}var Bs=T.ReactCurrentDispatcher,Il=T.ReactCurrentBatchConfig,Ur=0,He=null,Ge=null,tt=null,Hs=!1,Wn=!1,Vn=0,bf=0;function ot(){throw Error(c(321))}function Ml(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Ut(e[r],t[r]))return!1;return!0}function Al(e,t,r,s,l,o){if(Ur=o,He=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Bs.current=e===null||e.memoizedState===null?Ef:Df,e=r(s,l),Wn){o=0;do{if(Wn=!1,Vn=0,25<=o)throw Error(c(301));o+=1,tt=Ge=null,t.updateQueue=null,Bs.current=Tf,e=r(s,l)}while(Wn)}if(Bs.current=Ws,t=Ge!==null&&Ge.next!==null,Ur=0,tt=Ge=He=null,Hs=!1,t)throw Error(c(300));return e}function Pl(){var e=Vn!==0;return Vn=0,e}function Yt(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?He.memoizedState=tt=e:tt=tt.next=e,tt}function At(){if(Ge===null){var e=He.alternate;e=e!==null?e.memoizedState:null}else e=Ge.next;var t=tt===null?He.memoizedState:tt.next;if(t!==null)tt=t,Ge=e;else{if(e===null)throw Error(c(310));Ge=e,e={memoizedState:Ge.memoizedState,baseState:Ge.baseState,baseQueue:Ge.baseQueue,queue:Ge.queue,next:null},tt===null?He.memoizedState=tt=e:tt=tt.next=e}return tt}function Jn(e,t){return typeof t=="function"?t(e):t}function Rl(e){var t=At(),r=t.queue;if(r===null)throw Error(c(311));r.lastRenderedReducer=e;var s=Ge,l=s.baseQueue,o=r.pending;if(o!==null){if(l!==null){var u=l.next;l.next=o.next,o.next=u}s.baseQueue=l=o,r.pending=null}if(l!==null){o=l.next,s=s.baseState;var g=u=null,S=null,z=o;do{var Z=z.lane;if((Ur&Z)===Z)S!==null&&(S=S.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),s=z.hasEagerState?z.eagerState:e(s,z.action);else{var ne={lane:Z,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};S===null?(g=S=ne,u=s):S=S.next=ne,He.lanes|=Z,$r|=Z}z=z.next}while(z!==null&&z!==o);S===null?u=s:S.next=g,Ut(s,t.memoizedState)||(gt=!0),t.memoizedState=s,t.baseState=u,t.baseQueue=S,r.lastRenderedState=s}if(e=r.interleaved,e!==null){l=e;do o=l.lane,He.lanes|=o,$r|=o,l=l.next;while(l!==e)}else l===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Fl(e){var t=At(),r=t.queue;if(r===null)throw Error(c(311));r.lastRenderedReducer=e;var s=r.dispatch,l=r.pending,o=t.memoizedState;if(l!==null){r.pending=null;var u=l=l.next;do o=e(o,u.action),u=u.next;while(u!==l);Ut(o,t.memoizedState)||(gt=!0),t.memoizedState=o,t.baseQueue===null&&(t.baseState=o),r.lastRenderedState=o}return[o,s]}function lc(){}function oc(e,t){var r=He,s=At(),l=t(),o=!Ut(s.memoizedState,l);if(o&&(s.memoizedState=l,gt=!0),s=s.queue,Ol(dc.bind(null,r,s,e),[e]),s.getSnapshot!==t||o||tt!==null&&tt.memoizedState.tag&1){if(r.flags|=2048,Yn(9,cc.bind(null,r,s,l,t),void 0,null),rt===null)throw Error(c(349));(Ur&30)!==0||ic(r,t,l)}return l}function ic(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function cc(e,t,r,s){t.value=r,t.getSnapshot=s,uc(t)&&fc(e)}function dc(e,t,r){return r(function(){uc(t)&&fc(e)})}function uc(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Ut(e,r)}catch{return!0}}function fc(e){var t=lr(e,1);t!==null&&qt(t,e,1,-1)}function mc(e){var t=Yt();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Jn,lastRenderedState:e},t.queue=e,e=e.dispatch=Cf.bind(null,He,e),[t.memoizedState,e]}function Yn(e,t,r,s){return e={tag:e,create:t,destroy:r,deps:s,next:null},t=He.updateQueue,t===null?(t={lastEffect:null,stores:null},He.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(s=r.next,r.next=e,e.next=s,t.lastEffect=e)),e}function hc(){return At().memoizedState}function Qs(e,t,r,s){var l=Yt();He.flags|=e,l.memoizedState=Yn(1|t,r,void 0,s===void 0?null:s)}function qs(e,t,r,s){var l=At();s=s===void 0?null:s;var o=void 0;if(Ge!==null){var u=Ge.memoizedState;if(o=u.destroy,s!==null&&Ml(s,u.deps)){l.memoizedState=Yn(t,r,o,s);return}}He.flags|=e,l.memoizedState=Yn(1|t,r,o,s)}function pc(e,t){return Qs(8390656,8,e,t)}function Ol(e,t){return qs(2048,8,e,t)}function gc(e,t){return qs(4,2,e,t)}function yc(e,t){return qs(4,4,e,t)}function xc(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function vc(e,t,r){return r=r!=null?r.concat([e]):null,qs(4,4,xc.bind(null,t,e),r)}function Ll(){}function kc(e,t){var r=At();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ml(t,s[1])?s[0]:(r.memoizedState=[e,t],e)}function wc(e,t){var r=At();t=t===void 0?null:t;var s=r.memoizedState;return s!==null&&t!==null&&Ml(t,s[1])?s[0]:(e=e(),r.memoizedState=[e,t],e)}function jc(e,t,r){return(Ur&21)===0?(e.baseState&&(e.baseState=!1,gt=!0),e.memoizedState=r):(Ut(r,t)||(r=Xo(),He.lanes|=r,$r|=r,e.baseState=!0),t)}function Nf(e,t){var r=Fe;Fe=r!==0&&4>r?r:4,e(!0);var s=Il.transition;Il.transition={};try{e(!1),t()}finally{Fe=r,Il.transition=s}}function bc(){return At().memoizedState}function Sf(e,t,r){var s=Er(e);if(r={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null},Nc(e))Sc(t,r);else if(r=tc(e,t,r,s),r!==null){var l=ft();qt(r,e,s,l),Cc(r,t,s)}}function Cf(e,t,r){var s=Er(e),l={lane:s,action:r,hasEagerState:!1,eagerState:null,next:null};if(Nc(e))Sc(t,l);else{var o=e.alternate;if(e.lanes===0&&(o===null||o.lanes===0)&&(o=t.lastRenderedReducer,o!==null))try{var u=t.lastRenderedState,g=o(u,r);if(l.hasEagerState=!0,l.eagerState=g,Ut(g,u)){var S=t.interleaved;S===null?(l.next=l,Nl(t)):(l.next=S.next,S.next=l),t.interleaved=l;return}}catch{}finally{}r=tc(e,t,l,s),r!==null&&(l=ft(),qt(r,e,s,l),Cc(r,t,s))}}function Nc(e){var t=e.alternate;return e===He||t!==null&&t===He}function Sc(e,t){Wn=Hs=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Cc(e,t,r){if((r&4194240)!==0){var s=t.lanes;s&=e.pendingLanes,r|=s,t.lanes=r,za(e,r)}}var Ws={readContext:Mt,useCallback:ot,useContext:ot,useEffect:ot,useImperativeHandle:ot,useInsertionEffect:ot,useLayoutEffect:ot,useMemo:ot,useReducer:ot,useRef:ot,useState:ot,useDebugValue:ot,useDeferredValue:ot,useTransition:ot,useMutableSource:ot,useSyncExternalStore:ot,useId:ot,unstable_isNewReconciler:!1},Ef={readContext:Mt,useCallback:function(e,t){return Yt().memoizedState=[e,t===void 0?null:t],e},useContext:Mt,useEffect:pc,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,Qs(4194308,4,xc.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Qs(4194308,4,e,t)},useInsertionEffect:function(e,t){return Qs(4,2,e,t)},useMemo:function(e,t){var r=Yt();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var s=Yt();return t=r!==void 0?r(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Sf.bind(null,He,e),[s.memoizedState,e]},useRef:function(e){var t=Yt();return e={current:e},t.memoizedState=e},useState:mc,useDebugValue:Ll,useDeferredValue:function(e){return Yt().memoizedState=e},useTransition:function(){var e=mc(!1),t=e[0];return e=Nf.bind(null,e[1]),Yt().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var s=He,l=Yt();if($e){if(r===void 0)throw Error(c(407));r=r()}else{if(r=t(),rt===null)throw Error(c(349));(Ur&30)!==0||ic(s,t,r)}l.memoizedState=r;var o={value:r,getSnapshot:t};return l.queue=o,pc(dc.bind(null,s,o,e),[e]),s.flags|=2048,Yn(9,cc.bind(null,s,o,r,t),void 0,null),r},useId:function(){var e=Yt(),t=rt.identifierPrefix;if($e){var r=ar,s=sr;r=(s&~(1<<32-zt(s)-1)).toString(32)+r,t=":"+t+"R"+r,r=Vn++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=bf++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Df={readContext:Mt,useCallback:kc,useContext:Mt,useEffect:Ol,useImperativeHandle:vc,useInsertionEffect:gc,useLayoutEffect:yc,useMemo:wc,useReducer:Rl,useRef:hc,useState:function(){return Rl(Jn)},useDebugValue:Ll,useDeferredValue:function(e){var t=At();return jc(t,Ge.memoizedState,e)},useTransition:function(){var e=Rl(Jn)[0],t=At().memoizedState;return[e,t]},useMutableSource:lc,useSyncExternalStore:oc,useId:bc,unstable_isNewReconciler:!1},Tf={readContext:Mt,useCallback:kc,useContext:Mt,useEffect:Ol,useImperativeHandle:vc,useInsertionEffect:gc,useLayoutEffect:yc,useMemo:wc,useReducer:Fl,useRef:hc,useState:function(){return Fl(Jn)},useDebugValue:Ll,useDeferredValue:function(e){var t=At();return Ge===null?t.memoizedState=e:jc(t,Ge.memoizedState,e)},useTransition:function(){var e=Fl(Jn)[0],t=At().memoizedState;return[e,t]},useMutableSource:lc,useSyncExternalStore:oc,useId:bc,unstable_isNewReconciler:!1};function Bt(e,t){if(e&&e.defaultProps){t=w({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}function _l(e,t,r,s){t=e.memoizedState,r=r(s,t),r=r==null?t:w({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Vs={isMounted:function(e){return(e=e._reactInternals)?Pr(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var s=ft(),l=Er(e),o=or(s,l);o.payload=t,r!=null&&(o.callback=r),t=br(e,o,l),t!==null&&(qt(t,e,l,s),zs(t,e,l))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var s=ft(),l=Er(e),o=or(s,l);o.tag=1,o.payload=t,r!=null&&(o.callback=r),t=br(e,o,l),t!==null&&(qt(t,e,l,s),zs(t,e,l))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=ft(),s=Er(e),l=or(r,s);l.tag=2,t!=null&&(l.callback=t),t=br(e,l,s),t!==null&&(qt(t,e,s,r),zs(t,e,s))}};function Ec(e,t,r,s,l,o,u){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,o,u):t.prototype&&t.prototype.isPureReactComponent?!Fn(r,s)||!Fn(l,o):!0}function Dc(e,t,r){var s=!1,l=kr,o=t.contextType;return typeof o=="object"&&o!==null?o=Mt(o):(l=pt(t)?Fr:lt.current,s=t.contextTypes,o=(s=s!=null)?sn(e,l):kr),t=new t(r,o),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Vs,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=l,e.__reactInternalMemoizedMaskedChildContext=o),t}function Tc(e,t,r,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,s),t.state!==e&&Vs.enqueueReplaceState(t,t.state,null)}function zl(e,t,r,s){var l=e.stateNode;l.props=r,l.state=e.memoizedState,l.refs={},Sl(e);var o=t.contextType;typeof o=="object"&&o!==null?l.context=Mt(o):(o=pt(t)?Fr:lt.current,l.context=sn(e,o)),l.state=e.memoizedState,o=t.getDerivedStateFromProps,typeof o=="function"&&(_l(e,t,o,r),l.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof l.getSnapshotBeforeUpdate=="function"||typeof l.UNSAFE_componentWillMount!="function"&&typeof l.componentWillMount!="function"||(t=l.state,typeof l.componentWillMount=="function"&&l.componentWillMount(),typeof l.UNSAFE_componentWillMount=="function"&&l.UNSAFE_componentWillMount(),t!==l.state&&Vs.enqueueReplaceState(l,l.state,null),Us(e,r,l,s),l.state=e.memoizedState),typeof l.componentDidMount=="function"&&(e.flags|=4194308)}function mn(e,t){try{var r="",s=t;do r+=v(s),s=s.return;while(s);var l=r}catch(o){l=`
Error generating stack: `+o.message+`
`+o.stack}return{value:e,source:t,stack:l,digest:null}}function Ul(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function $l(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var If=typeof WeakMap=="function"?WeakMap:Map;function Ic(e,t,r){r=or(-1,r),r.tag=3,r.payload={element:null};var s=t.value;return r.callback=function(){ea||(ea=!0,ro=s),$l(e,t)},r}function Mc(e,t,r){r=or(-1,r),r.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var l=t.value;r.payload=function(){return s(l)},r.callback=function(){$l(e,t)}}var o=e.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(r.callback=function(){$l(e,t),typeof s!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var u=t.stack;this.componentDidCatch(t.value,{componentStack:u!==null?u:""})}),r}function Ac(e,t,r){var s=e.pingCache;if(s===null){s=e.pingCache=new If;var l=new Set;s.set(t,l)}else l=s.get(t),l===void 0&&(l=new Set,s.set(t,l));l.has(r)||(l.add(r),e=Qf.bind(null,e,t,r),t.then(e,e))}function Pc(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Rc(e,t,r,s,l){return(e.mode&1)===0?(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=or(-1,1),t.tag=2,br(r,t,1))),r.lanes|=1),e):(e.flags|=65536,e.lanes=l,e)}var Mf=T.ReactCurrentOwner,gt=!1;function ut(e,t,r,s){t.child=e===null?ec(t,null,r,s):cn(t,e.child,r,s)}function Fc(e,t,r,s,l){r=r.render;var o=t.ref;return un(t,l),s=Al(e,t,r,s,o,l),r=Pl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ir(e,t,l)):($e&&r&&pl(t),t.flags|=1,ut(e,t,s,l),t.child)}function Oc(e,t,r,s,l){if(e===null){var o=r.type;return typeof o=="function"&&!co(o)&&o.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=o,Lc(e,t,o,s,l)):(e=la(r.type,null,s,t,t.mode,l),e.ref=t.ref,e.return=t,t.child=e)}if(o=e.child,(e.lanes&l)===0){var u=o.memoizedProps;if(r=r.compare,r=r!==null?r:Fn,r(u,s)&&e.ref===t.ref)return ir(e,t,l)}return t.flags|=1,e=Tr(o,s),e.ref=t.ref,e.return=t,t.child=e}function Lc(e,t,r,s,l){if(e!==null){var o=e.memoizedProps;if(Fn(o,s)&&e.ref===t.ref)if(gt=!1,t.pendingProps=s=o,(e.lanes&l)!==0)(e.flags&131072)!==0&&(gt=!0);else return t.lanes=e.lanes,ir(e,t,l)}return Bl(e,t,r,s,l)}function _c(e,t,r){var s=t.pendingProps,l=s.children,o=e!==null?e.memoizedState:null;if(s.mode==="hidden")if((t.mode&1)===0)t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Oe(pn,St),St|=r;else{if((r&1073741824)===0)return e=o!==null?o.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Oe(pn,St),St|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=o!==null?o.baseLanes:r,Oe(pn,St),St|=s}else o!==null?(s=o.baseLanes|r,t.memoizedState=null):s=r,Oe(pn,St),St|=s;return ut(e,t,l,r),t.child}function zc(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function Bl(e,t,r,s,l){var o=pt(r)?Fr:lt.current;return o=sn(t,o),un(t,l),r=Al(e,t,r,s,o,l),s=Pl(),e!==null&&!gt?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~l,ir(e,t,l)):($e&&s&&pl(t),t.flags|=1,ut(e,t,r,l),t.child)}function Uc(e,t,r,s,l){if(pt(r)){var o=!0;Ms(t)}else o=!1;if(un(t,l),t.stateNode===null)Ys(e,t),Dc(t,r,s),zl(t,r,s,l),s=!0;else if(e===null){var u=t.stateNode,g=t.memoizedProps;u.props=g;var S=u.context,z=r.contextType;typeof z=="object"&&z!==null?z=Mt(z):(z=pt(r)?Fr:lt.current,z=sn(t,z));var Z=r.getDerivedStateFromProps,ne=typeof Z=="function"||typeof u.getSnapshotBeforeUpdate=="function";ne||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==s||S!==z)&&Tc(t,u,s,z),jr=!1;var K=t.memoizedState;u.state=K,Us(t,s,u,l),S=t.memoizedState,g!==s||K!==S||ht.current||jr?(typeof Z=="function"&&(_l(t,r,Z,s),S=t.memoizedState),(g=jr||Ec(t,r,g,s,K,S,z))?(ne||typeof u.UNSAFE_componentWillMount!="function"&&typeof u.componentWillMount!="function"||(typeof u.componentWillMount=="function"&&u.componentWillMount(),typeof u.UNSAFE_componentWillMount=="function"&&u.UNSAFE_componentWillMount()),typeof u.componentDidMount=="function"&&(t.flags|=4194308)):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=S),u.props=s,u.state=S,u.context=z,s=g):(typeof u.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{u=t.stateNode,rc(e,t),g=t.memoizedProps,z=t.type===t.elementType?g:Bt(t.type,g),u.props=z,ne=t.pendingProps,K=u.context,S=r.contextType,typeof S=="object"&&S!==null?S=Mt(S):(S=pt(r)?Fr:lt.current,S=sn(t,S));var ce=r.getDerivedStateFromProps;(Z=typeof ce=="function"||typeof u.getSnapshotBeforeUpdate=="function")||typeof u.UNSAFE_componentWillReceiveProps!="function"&&typeof u.componentWillReceiveProps!="function"||(g!==ne||K!==S)&&Tc(t,u,s,S),jr=!1,K=t.memoizedState,u.state=K,Us(t,s,u,l);var fe=t.memoizedState;g!==ne||K!==fe||ht.current||jr?(typeof ce=="function"&&(_l(t,r,ce,s),fe=t.memoizedState),(z=jr||Ec(t,r,z,s,K,fe,S)||!1)?(Z||typeof u.UNSAFE_componentWillUpdate!="function"&&typeof u.componentWillUpdate!="function"||(typeof u.componentWillUpdate=="function"&&u.componentWillUpdate(s,fe,S),typeof u.UNSAFE_componentWillUpdate=="function"&&u.UNSAFE_componentWillUpdate(s,fe,S)),typeof u.componentDidUpdate=="function"&&(t.flags|=4),typeof u.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=fe),u.props=s,u.state=fe,u.context=S,s=z):(typeof u.componentDidUpdate!="function"||g===e.memoizedProps&&K===e.memoizedState||(t.flags|=4),typeof u.getSnapshotBeforeUpdate!="function"||g===e.memoizedProps&&K===e.memoizedState||(t.flags|=1024),s=!1)}return Hl(e,t,r,s,o,l)}function Hl(e,t,r,s,l,o){zc(e,t);var u=(t.flags&128)!==0;if(!s&&!u)return l&&qi(t,r,!1),ir(e,t,o);s=t.stateNode,Mf.current=t;var g=u&&typeof r.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&u?(t.child=cn(t,e.child,null,o),t.child=cn(t,null,g,o)):ut(e,t,g,o),t.memoizedState=s.state,l&&qi(t,r,!0),t.child}function $c(e){var t=e.stateNode;t.pendingContext?Hi(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Hi(e,t.context,!1),Cl(e,t.containerInfo)}function Bc(e,t,r,s,l){return on(),vl(l),t.flags|=256,ut(e,t,r,s),t.child}var Ql={dehydrated:null,treeContext:null,retryLane:0};function ql(e){return{baseLanes:e,cachePool:null,transitions:null}}function Hc(e,t,r){var s=t.pendingProps,l=Be.current,o=!1,u=(t.flags&128)!==0,g;if((g=u)||(g=e!==null&&e.memoizedState===null?!1:(l&2)!==0),g?(o=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(l|=1),Oe(Be,l&1),e===null)return xl(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?((t.mode&1)===0?t.lanes=1:e.data==="$!"?t.lanes=8:t.lanes=1073741824,null):(u=s.children,e=s.fallback,o?(s=t.mode,o=t.child,u={mode:"hidden",children:u},(s&1)===0&&o!==null?(o.childLanes=0,o.pendingProps=u):o=oa(u,s,0,null),e=qr(e,s,r,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=ql(r),t.memoizedState=Ql,e):Wl(t,u));if(l=e.memoizedState,l!==null&&(g=l.dehydrated,g!==null))return Af(e,t,u,s,g,l,r);if(o){o=s.fallback,u=t.mode,l=e.child,g=l.sibling;var S={mode:"hidden",children:s.children};return(u&1)===0&&t.child!==l?(s=t.child,s.childLanes=0,s.pendingProps=S,t.deletions=null):(s=Tr(l,S),s.subtreeFlags=l.subtreeFlags&14680064),g!==null?o=Tr(g,o):(o=qr(o,u,r,null),o.flags|=2),o.return=t,s.return=t,s.sibling=o,t.child=s,s=o,o=t.child,u=e.child.memoizedState,u=u===null?ql(r):{baseLanes:u.baseLanes|r,cachePool:null,transitions:u.transitions},o.memoizedState=u,o.childLanes=e.childLanes&~r,t.memoizedState=Ql,s}return o=e.child,e=o.sibling,s=Tr(o,{mode:"visible",children:s.children}),(t.mode&1)===0&&(s.lanes=r),s.return=t,s.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=s,t.memoizedState=null,s}function Wl(e,t){return t=oa({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Js(e,t,r,s){return s!==null&&vl(s),cn(t,e.child,null,r),e=Wl(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Af(e,t,r,s,l,o,u){if(r)return t.flags&256?(t.flags&=-257,s=Ul(Error(c(422))),Js(e,t,u,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(o=s.fallback,l=t.mode,s=oa({mode:"visible",children:s.children},l,0,null),o=qr(o,l,u,null),o.flags|=2,s.return=t,o.return=t,s.sibling=o,t.child=s,(t.mode&1)!==0&&cn(t,e.child,null,u),t.child.memoizedState=ql(u),t.memoizedState=Ql,o);if((t.mode&1)===0)return Js(e,t,u,null);if(l.data==="$!"){if(s=l.nextSibling&&l.nextSibling.dataset,s)var g=s.dgst;return s=g,o=Error(c(419)),s=Ul(o,s,void 0),Js(e,t,u,s)}if(g=(u&e.childLanes)!==0,gt||g){if(s=rt,s!==null){switch(u&-u){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}l=(l&(s.suspendedLanes|u))!==0?0:l,l!==0&&l!==o.retryLane&&(o.retryLane=l,lr(e,l),qt(s,e,l,-1))}return io(),s=Ul(Error(c(421))),Js(e,t,u,s)}return l.data==="$?"?(t.flags|=128,t.child=e.child,t=qf.bind(null,e),l._reactRetry=t,null):(e=o.treeContext,Nt=xr(l.nextSibling),bt=t,$e=!0,$t=null,e!==null&&(Tt[It++]=sr,Tt[It++]=ar,Tt[It++]=Or,sr=e.id,ar=e.overflow,Or=t),t=Wl(t,s.children),t.flags|=4096,t)}function Qc(e,t,r){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),bl(e.return,t,r)}function Vl(e,t,r,s,l){var o=e.memoizedState;o===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:r,tailMode:l}:(o.isBackwards=t,o.rendering=null,o.renderingStartTime=0,o.last=s,o.tail=r,o.tailMode=l)}function qc(e,t,r){var s=t.pendingProps,l=s.revealOrder,o=s.tail;if(ut(e,t,s.children,r),s=Be.current,(s&2)!==0)s=s&1|2,t.flags|=128;else{if(e!==null&&(e.flags&128)!==0)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Qc(e,r,t);else if(e.tag===19)Qc(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(Oe(Be,s),(t.mode&1)===0)t.memoizedState=null;else switch(l){case"forwards":for(r=t.child,l=null;r!==null;)e=r.alternate,e!==null&&$s(e)===null&&(l=r),r=r.sibling;r=l,r===null?(l=t.child,t.child=null):(l=r.sibling,r.sibling=null),Vl(t,!1,l,r,o);break;case"backwards":for(r=null,l=t.child,t.child=null;l!==null;){if(e=l.alternate,e!==null&&$s(e)===null){t.child=l;break}e=l.sibling,l.sibling=r,r=l,l=e}Vl(t,!0,r,null,o);break;case"together":Vl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ys(e,t){(t.mode&1)===0&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function ir(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),$r|=t.lanes,(r&t.childLanes)===0)return null;if(e!==null&&t.child!==e.child)throw Error(c(153));if(t.child!==null){for(e=t.child,r=Tr(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Tr(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function Pf(e,t,r){switch(t.tag){case 3:$c(t),on();break;case 5:ac(t);break;case 1:pt(t.type)&&Ms(t);break;case 4:Cl(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,l=t.memoizedProps.value;Oe(Ls,s._currentValue),s._currentValue=l;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(Oe(Be,Be.current&1),t.flags|=128,null):(r&t.child.childLanes)!==0?Hc(e,t,r):(Oe(Be,Be.current&1),e=ir(e,t,r),e!==null?e.sibling:null);Oe(Be,Be.current&1);break;case 19:if(s=(r&t.childLanes)!==0,(e.flags&128)!==0){if(s)return qc(e,t,r);t.flags|=128}if(l=t.memoizedState,l!==null&&(l.rendering=null,l.tail=null,l.lastEffect=null),Oe(Be,Be.current),s)break;return null;case 22:case 23:return t.lanes=0,_c(e,t,r)}return ir(e,t,r)}var Wc,Jl,Vc,Jc;Wc=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}},Jl=function(){},Vc=function(e,t,r,s){var l=e.memoizedProps;if(l!==s){e=t.stateNode,zr(Jt.current);var o=null;switch(r){case"input":l=he(e,l),s=he(e,s),o=[];break;case"select":l=w({},l,{value:void 0}),s=w({},s,{value:void 0}),o=[];break;case"textarea":l=je(e,l),s=je(e,s),o=[];break;default:typeof l.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=Ds)}Da(r,s);var u;r=null;for(z in l)if(!s.hasOwnProperty(z)&&l.hasOwnProperty(z)&&l[z]!=null)if(z==="style"){var g=l[z];for(u in g)g.hasOwnProperty(u)&&(r||(r={}),r[u]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(f.hasOwnProperty(z)?o||(o=[]):(o=o||[]).push(z,null));for(z in s){var S=s[z];if(g=l!=null?l[z]:void 0,s.hasOwnProperty(z)&&S!==g&&(S!=null||g!=null))if(z==="style")if(g){for(u in g)!g.hasOwnProperty(u)||S&&S.hasOwnProperty(u)||(r||(r={}),r[u]="");for(u in S)S.hasOwnProperty(u)&&g[u]!==S[u]&&(r||(r={}),r[u]=S[u])}else r||(o||(o=[]),o.push(z,r)),r=S;else z==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,g=g?g.__html:void 0,S!=null&&g!==S&&(o=o||[]).push(z,S)):z==="children"?typeof S!="string"&&typeof S!="number"||(o=o||[]).push(z,""+S):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(f.hasOwnProperty(z)?(S!=null&&z==="onScroll"&&_e("scroll",e),o||g===S||(o=[])):(o=o||[]).push(z,S))}r&&(o=o||[]).push("style",r);var z=o;(t.updateQueue=z)&&(t.flags|=4)}},Jc=function(e,t,r,s){r!==s&&(t.flags|=4)};function Gn(e,t){if(!$e)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var s=null;r!==null;)r.alternate!==null&&(s=r),r=r.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function it(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,s=0;if(t)for(var l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags&14680064,s|=l.flags&14680064,l.return=e,l=l.sibling;else for(l=e.child;l!==null;)r|=l.lanes|l.childLanes,s|=l.subtreeFlags,s|=l.flags,l.return=e,l=l.sibling;return e.subtreeFlags|=s,e.childLanes=r,t}function Rf(e,t,r){var s=t.pendingProps;switch(gl(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(t),null;case 1:return pt(t.type)&&Is(),it(t),null;case 3:return s=t.stateNode,fn(),ze(ht),ze(lt),Tl(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Fs(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&(t.flags&256)===0||(t.flags|=1024,$t!==null&&(ao($t),$t=null))),Jl(e,t),it(t),null;case 5:El(t);var l=zr(qn.current);if(r=t.type,e!==null&&t.stateNode!=null)Vc(e,t,r,s,l),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(c(166));return it(t),null}if(e=zr(Jt.current),Fs(t)){s=t.stateNode,r=t.type;var o=t.memoizedProps;switch(s[Vt]=t,s[Un]=o,e=(t.mode&1)!==0,r){case"dialog":_e("cancel",s),_e("close",s);break;case"iframe":case"object":case"embed":_e("load",s);break;case"video":case"audio":for(l=0;l<Ln.length;l++)_e(Ln[l],s);break;case"source":_e("error",s);break;case"img":case"image":case"link":_e("error",s),_e("load",s);break;case"details":_e("toggle",s);break;case"input":Ie(s,o),_e("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!o.multiple},_e("invalid",s);break;case"textarea":Me(s,o),_e("invalid",s)}Da(r,o),l=null;for(var u in o)if(o.hasOwnProperty(u)){var g=o[u];u==="children"?typeof g=="string"?s.textContent!==g&&(o.suppressHydrationWarning!==!0&&Es(s.textContent,g,e),l=["children",g]):typeof g=="number"&&s.textContent!==""+g&&(o.suppressHydrationWarning!==!0&&Es(s.textContent,g,e),l=["children",""+g]):f.hasOwnProperty(u)&&g!=null&&u==="onScroll"&&_e("scroll",s)}switch(r){case"input":re(s),Ze(s,o,!0);break;case"textarea":re(s),Le(s);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(s.onclick=Ds)}s=l,t.updateQueue=s,s!==null&&(t.flags|=4)}else{u=l.nodeType===9?l:l.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=dt(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=u.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=u.createElement(r,{is:s.is}):(e=u.createElement(r),r==="select"&&(u=e,s.multiple?u.multiple=!0:s.size&&(u.size=s.size))):e=u.createElementNS(e,r),e[Vt]=t,e[Un]=s,Wc(e,t,!1,!1),t.stateNode=e;e:{switch(u=Ta(r,s),r){case"dialog":_e("cancel",e),_e("close",e),l=s;break;case"iframe":case"object":case"embed":_e("load",e),l=s;break;case"video":case"audio":for(l=0;l<Ln.length;l++)_e(Ln[l],e);l=s;break;case"source":_e("error",e),l=s;break;case"img":case"image":case"link":_e("error",e),_e("load",e),l=s;break;case"details":_e("toggle",e),l=s;break;case"input":Ie(e,s),l=he(e,s),_e("invalid",e);break;case"option":l=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},l=w({},s,{value:void 0}),_e("invalid",e);break;case"textarea":Me(e,s),l=je(e,s),_e("invalid",e);break;default:l=s}Da(r,l),g=l;for(o in g)if(g.hasOwnProperty(o)){var S=g[o];o==="style"?Lo(e,S):o==="dangerouslySetInnerHTML"?(S=S?S.__html:void 0,S!=null&&ur(e,S)):o==="children"?typeof S=="string"?(r!=="textarea"||S!=="")&&Dt(e,S):typeof S=="number"&&Dt(e,""+S):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(f.hasOwnProperty(o)?S!=null&&o==="onScroll"&&_e("scroll",e):S!=null&&Y(e,o,S,u))}switch(r){case"input":re(e),Ze(e,s,!1);break;case"textarea":re(e),Le(e);break;case"option":s.value!=null&&e.setAttribute("value",""+A(s.value));break;case"select":e.multiple=!!s.multiple,o=s.value,o!=null?be(e,!!s.multiple,o,!1):s.defaultValue!=null&&be(e,!!s.multiple,s.defaultValue,!0);break;default:typeof l.onClick=="function"&&(e.onclick=Ds)}switch(r){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return it(t),null;case 6:if(e&&t.stateNode!=null)Jc(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(c(166));if(r=zr(qn.current),zr(Jt.current),Fs(t)){if(s=t.stateNode,r=t.memoizedProps,s[Vt]=t,(o=s.nodeValue!==r)&&(e=bt,e!==null))switch(e.tag){case 3:Es(s.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Es(s.nodeValue,r,(e.mode&1)!==0)}o&&(t.flags|=4)}else s=(r.nodeType===9?r:r.ownerDocument).createTextNode(s),s[Vt]=t,t.stateNode=s}return it(t),null;case 13:if(ze(Be),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if($e&&Nt!==null&&(t.mode&1)!==0&&(t.flags&128)===0)Ki(),on(),t.flags|=98560,o=!1;else if(o=Fs(t),s!==null&&s.dehydrated!==null){if(e===null){if(!o)throw Error(c(318));if(o=t.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(c(317));o[Vt]=t}else on(),(t.flags&128)===0&&(t.memoizedState=null),t.flags|=4;it(t),o=!1}else $t!==null&&(ao($t),$t=null),o=!0;if(!o)return t.flags&65536?t:null}return(t.flags&128)!==0?(t.lanes=r,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,(t.mode&1)!==0&&(e===null||(Be.current&1)!==0?Ke===0&&(Ke=3):io())),t.updateQueue!==null&&(t.flags|=4),it(t),null);case 4:return fn(),Jl(e,t),e===null&&_n(t.stateNode.containerInfo),it(t),null;case 10:return jl(t.type._context),it(t),null;case 17:return pt(t.type)&&Is(),it(t),null;case 19:if(ze(Be),o=t.memoizedState,o===null)return it(t),null;if(s=(t.flags&128)!==0,u=o.rendering,u===null)if(s)Gn(o,!1);else{if(Ke!==0||e!==null&&(e.flags&128)!==0)for(e=t.child;e!==null;){if(u=$s(e),u!==null){for(t.flags|=128,Gn(o,!1),s=u.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=r,r=t.child;r!==null;)o=r,e=s,o.flags&=14680066,u=o.alternate,u===null?(o.childLanes=0,o.lanes=e,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,e=u.dependencies,o.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return Oe(Be,Be.current&1|2),t.child}e=e.sibling}o.tail!==null&&We()>gn&&(t.flags|=128,s=!0,Gn(o,!1),t.lanes=4194304)}else{if(!s)if(e=$s(u),e!==null){if(t.flags|=128,s=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Gn(o,!0),o.tail===null&&o.tailMode==="hidden"&&!u.alternate&&!$e)return it(t),null}else 2*We()-o.renderingStartTime>gn&&r!==1073741824&&(t.flags|=128,s=!0,Gn(o,!1),t.lanes=4194304);o.isBackwards?(u.sibling=t.child,t.child=u):(r=o.last,r!==null?r.sibling=u:t.child=u,o.last=u)}return o.tail!==null?(t=o.tail,o.rendering=t,o.tail=t.sibling,o.renderingStartTime=We(),t.sibling=null,r=Be.current,Oe(Be,s?r&1|2:r&1),t):(it(t),null);case 22:case 23:return oo(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&(t.mode&1)!==0?(St&1073741824)!==0&&(it(t),t.subtreeFlags&6&&(t.flags|=8192)):it(t),null;case 24:return null;case 25:return null}throw Error(c(156,t.tag))}function Ff(e,t){switch(gl(t),t.tag){case 1:return pt(t.type)&&Is(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return fn(),ze(ht),ze(lt),Tl(),e=t.flags,(e&65536)!==0&&(e&128)===0?(t.flags=e&-65537|128,t):null;case 5:return El(t),null;case 13:if(ze(Be),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(c(340));on()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ze(Be),null;case 4:return fn(),null;case 10:return jl(t.type._context),null;case 22:case 23:return oo(),null;case 24:return null;default:return null}}var Gs=!1,ct=!1,Of=typeof WeakSet=="function"?WeakSet:Set,ue=null;function hn(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(s){Qe(e,t,s)}else r.current=null}function Yl(e,t,r){try{r()}catch(s){Qe(e,t,s)}}var Yc=!1;function Lf(e,t){if(ol=gs,e=Ei(),Za(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var s=r.getSelection&&r.getSelection();if(s&&s.rangeCount!==0){r=s.anchorNode;var l=s.anchorOffset,o=s.focusNode;s=s.focusOffset;try{r.nodeType,o.nodeType}catch{r=null;break e}var u=0,g=-1,S=-1,z=0,Z=0,ne=e,K=null;t:for(;;){for(var ce;ne!==r||l!==0&&ne.nodeType!==3||(g=u+l),ne!==o||s!==0&&ne.nodeType!==3||(S=u+s),ne.nodeType===3&&(u+=ne.nodeValue.length),(ce=ne.firstChild)!==null;)K=ne,ne=ce;for(;;){if(ne===e)break t;if(K===r&&++z===l&&(g=u),K===o&&++Z===s&&(S=u),(ce=ne.nextSibling)!==null)break;ne=K,K=ne.parentNode}ne=ce}r=g===-1||S===-1?null:{start:g,end:S}}else r=null}r=r||{start:0,end:0}}else r=null;for(il={focusedElem:e,selectionRange:r},gs=!1,ue=t;ue!==null;)if(t=ue,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ue=e;else for(;ue!==null;){t=ue;try{var fe=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(fe!==null){var pe=fe.memoizedProps,Ve=fe.memoizedState,P=t.stateNode,C=P.getSnapshotBeforeUpdate(t.elementType===t.type?pe:Bt(t.type,pe),Ve);P.__reactInternalSnapshotBeforeUpdate=C}break;case 3:var O=t.stateNode.containerInfo;O.nodeType===1?O.textContent="":O.nodeType===9&&O.documentElement&&O.removeChild(O.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(c(163))}}catch(le){Qe(t,t.return,le)}if(e=t.sibling,e!==null){e.return=t.return,ue=e;break}ue=t.return}return fe=Yc,Yc=!1,fe}function Kn(e,t,r){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var l=s=s.next;do{if((l.tag&e)===e){var o=l.destroy;l.destroy=void 0,o!==void 0&&Yl(t,r,o)}l=l.next}while(l!==s)}}function Ks(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var s=r.create;r.destroy=s()}r=r.next}while(r!==t)}}function Gl(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function Gc(e){var t=e.alternate;t!==null&&(e.alternate=null,Gc(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vt],delete t[Un],delete t[fl],delete t[vf],delete t[kf])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Kc(e){return e.tag===5||e.tag===3||e.tag===4}function Xc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Kc(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=Ds));else if(s!==4&&(e=e.child,e!==null))for(Kl(e,t,r),e=e.sibling;e!==null;)Kl(e,t,r),e=e.sibling}function Xl(e,t,r){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Xl(e,t,r),e=e.sibling;e!==null;)Xl(e,t,r),e=e.sibling}var st=null,Ht=!1;function Nr(e,t,r){for(r=r.child;r!==null;)Zc(e,t,r),r=r.sibling}function Zc(e,t,r){if(Wt&&typeof Wt.onCommitFiberUnmount=="function")try{Wt.onCommitFiberUnmount(ds,r)}catch{}switch(r.tag){case 5:ct||hn(r,t);case 6:var s=st,l=Ht;st=null,Nr(e,t,r),st=s,Ht=l,st!==null&&(Ht?(e=st,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):st.removeChild(r.stateNode));break;case 18:st!==null&&(Ht?(e=st,r=r.stateNode,e.nodeType===8?ul(e.parentNode,r):e.nodeType===1&&ul(e,r),Tn(e)):ul(st,r.stateNode));break;case 4:s=st,l=Ht,st=r.stateNode.containerInfo,Ht=!0,Nr(e,t,r),st=s,Ht=l;break;case 0:case 11:case 14:case 15:if(!ct&&(s=r.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){l=s=s.next;do{var o=l,u=o.destroy;o=o.tag,u!==void 0&&((o&2)!==0||(o&4)!==0)&&Yl(r,t,u),l=l.next}while(l!==s)}Nr(e,t,r);break;case 1:if(!ct&&(hn(r,t),s=r.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=r.memoizedProps,s.state=r.memoizedState,s.componentWillUnmount()}catch(g){Qe(r,t,g)}Nr(e,t,r);break;case 21:Nr(e,t,r);break;case 22:r.mode&1?(ct=(s=ct)||r.memoizedState!==null,Nr(e,t,r),ct=s):Nr(e,t,r);break;default:Nr(e,t,r)}}function ed(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new Of),t.forEach(function(s){var l=Wf.bind(null,e,s);r.has(s)||(r.add(s),s.then(l,l))})}}function Qt(e,t){var r=t.deletions;if(r!==null)for(var s=0;s<r.length;s++){var l=r[s];try{var o=e,u=t,g=u;e:for(;g!==null;){switch(g.tag){case 5:st=g.stateNode,Ht=!1;break e;case 3:st=g.stateNode.containerInfo,Ht=!0;break e;case 4:st=g.stateNode.containerInfo,Ht=!0;break e}g=g.return}if(st===null)throw Error(c(160));Zc(o,u,l),st=null,Ht=!1;var S=l.alternate;S!==null&&(S.return=null),l.return=null}catch(z){Qe(l,t,z)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)td(t,e),t=t.sibling}function td(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Qt(t,e),Gt(e),s&4){try{Kn(3,e,e.return),Ks(3,e)}catch(pe){Qe(e,e.return,pe)}try{Kn(5,e,e.return)}catch(pe){Qe(e,e.return,pe)}}break;case 1:Qt(t,e),Gt(e),s&512&&r!==null&&hn(r,r.return);break;case 5:if(Qt(t,e),Gt(e),s&512&&r!==null&&hn(r,r.return),e.flags&32){var l=e.stateNode;try{Dt(l,"")}catch(pe){Qe(e,e.return,pe)}}if(s&4&&(l=e.stateNode,l!=null)){var o=e.memoizedProps,u=r!==null?r.memoizedProps:o,g=e.type,S=e.updateQueue;if(e.updateQueue=null,S!==null)try{g==="input"&&o.type==="radio"&&o.name!=null&&Ue(l,o),Ta(g,u);var z=Ta(g,o);for(u=0;u<S.length;u+=2){var Z=S[u],ne=S[u+1];Z==="style"?Lo(l,ne):Z==="dangerouslySetInnerHTML"?ur(l,ne):Z==="children"?Dt(l,ne):Y(l,Z,ne,z)}switch(g){case"input":qe(l,o);break;case"textarea":Se(l,o);break;case"select":var K=l._wrapperState.wasMultiple;l._wrapperState.wasMultiple=!!o.multiple;var ce=o.value;ce!=null?be(l,!!o.multiple,ce,!1):K!==!!o.multiple&&(o.defaultValue!=null?be(l,!!o.multiple,o.defaultValue,!0):be(l,!!o.multiple,o.multiple?[]:"",!1))}l[Un]=o}catch(pe){Qe(e,e.return,pe)}}break;case 6:if(Qt(t,e),Gt(e),s&4){if(e.stateNode===null)throw Error(c(162));l=e.stateNode,o=e.memoizedProps;try{l.nodeValue=o}catch(pe){Qe(e,e.return,pe)}}break;case 3:if(Qt(t,e),Gt(e),s&4&&r!==null&&r.memoizedState.isDehydrated)try{Tn(t.containerInfo)}catch(pe){Qe(e,e.return,pe)}break;case 4:Qt(t,e),Gt(e);break;case 13:Qt(t,e),Gt(e),l=e.child,l.flags&8192&&(o=l.memoizedState!==null,l.stateNode.isHidden=o,!o||l.alternate!==null&&l.alternate.memoizedState!==null||(to=We())),s&4&&ed(e);break;case 22:if(Z=r!==null&&r.memoizedState!==null,e.mode&1?(ct=(z=ct)||Z,Qt(t,e),ct=z):Qt(t,e),Gt(e),s&8192){if(z=e.memoizedState!==null,(e.stateNode.isHidden=z)&&!Z&&(e.mode&1)!==0)for(ue=e,Z=e.child;Z!==null;){for(ne=ue=Z;ue!==null;){switch(K=ue,ce=K.child,K.tag){case 0:case 11:case 14:case 15:Kn(4,K,K.return);break;case 1:hn(K,K.return);var fe=K.stateNode;if(typeof fe.componentWillUnmount=="function"){s=K,r=K.return;try{t=s,fe.props=t.memoizedProps,fe.state=t.memoizedState,fe.componentWillUnmount()}catch(pe){Qe(s,r,pe)}}break;case 5:hn(K,K.return);break;case 22:if(K.memoizedState!==null){sd(ne);continue}}ce!==null?(ce.return=K,ue=ce):sd(ne)}Z=Z.sibling}e:for(Z=null,ne=e;;){if(ne.tag===5){if(Z===null){Z=ne;try{l=ne.stateNode,z?(o=l.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(g=ne.stateNode,S=ne.memoizedProps.style,u=S!=null&&S.hasOwnProperty("display")?S.display:null,g.style.display=ls("display",u))}catch(pe){Qe(e,e.return,pe)}}}else if(ne.tag===6){if(Z===null)try{ne.stateNode.nodeValue=z?"":ne.memoizedProps}catch(pe){Qe(e,e.return,pe)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===e)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===e)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===e)break e;Z===ne&&(Z=null),ne=ne.return}Z===ne&&(Z=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:Qt(t,e),Gt(e),s&4&&ed(e);break;case 21:break;default:Qt(t,e),Gt(e)}}function Gt(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Kc(r)){var s=r;break e}r=r.return}throw Error(c(160))}switch(s.tag){case 5:var l=s.stateNode;s.flags&32&&(Dt(l,""),s.flags&=-33);var o=Xc(e);Xl(e,o,l);break;case 3:case 4:var u=s.stateNode.containerInfo,g=Xc(e);Kl(e,g,u);break;default:throw Error(c(161))}}catch(S){Qe(e,e.return,S)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function _f(e,t,r){ue=e,rd(e)}function rd(e,t,r){for(var s=(e.mode&1)!==0;ue!==null;){var l=ue,o=l.child;if(l.tag===22&&s){var u=l.memoizedState!==null||Gs;if(!u){var g=l.alternate,S=g!==null&&g.memoizedState!==null||ct;g=Gs;var z=ct;if(Gs=u,(ct=S)&&!z)for(ue=l;ue!==null;)u=ue,S=u.child,u.tag===22&&u.memoizedState!==null?ad(l):S!==null?(S.return=u,ue=S):ad(l);for(;o!==null;)ue=o,rd(o),o=o.sibling;ue=l,Gs=g,ct=z}nd(e)}else(l.subtreeFlags&8772)!==0&&o!==null?(o.return=l,ue=o):nd(e)}}function nd(e){for(;ue!==null;){var t=ue;if((t.flags&8772)!==0){var r=t.alternate;try{if((t.flags&8772)!==0)switch(t.tag){case 0:case 11:case 15:ct||Ks(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!ct)if(r===null)s.componentDidMount();else{var l=t.elementType===t.type?r.memoizedProps:Bt(t.type,r.memoizedProps);s.componentDidUpdate(l,r.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var o=t.updateQueue;o!==null&&sc(t,o,s);break;case 3:var u=t.updateQueue;if(u!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}sc(t,u,r)}break;case 5:var g=t.stateNode;if(r===null&&t.flags&4){r=g;var S=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":S.autoFocus&&r.focus();break;case"img":S.src&&(r.src=S.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var z=t.alternate;if(z!==null){var Z=z.memoizedState;if(Z!==null){var ne=Z.dehydrated;ne!==null&&Tn(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(c(163))}ct||t.flags&512&&Gl(t)}catch(K){Qe(t,t.return,K)}}if(t===e){ue=null;break}if(r=t.sibling,r!==null){r.return=t.return,ue=r;break}ue=t.return}}function sd(e){for(;ue!==null;){var t=ue;if(t===e){ue=null;break}var r=t.sibling;if(r!==null){r.return=t.return,ue=r;break}ue=t.return}}function ad(e){for(;ue!==null;){var t=ue;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Ks(4,t)}catch(S){Qe(t,r,S)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var l=t.return;try{s.componentDidMount()}catch(S){Qe(t,l,S)}}var o=t.return;try{Gl(t)}catch(S){Qe(t,o,S)}break;case 5:var u=t.return;try{Gl(t)}catch(S){Qe(t,u,S)}}}catch(S){Qe(t,t.return,S)}if(t===e){ue=null;break}var g=t.sibling;if(g!==null){g.return=t.return,ue=g;break}ue=t.return}}var zf=Math.ceil,Xs=T.ReactCurrentDispatcher,Zl=T.ReactCurrentOwner,Pt=T.ReactCurrentBatchConfig,Pe=0,rt=null,Ye=null,at=0,St=0,pn=vr(0),Ke=0,Xn=null,$r=0,Zs=0,eo=0,Zn=null,yt=null,to=0,gn=1/0,cr=null,ea=!1,ro=null,Sr=null,ta=!1,Cr=null,ra=0,es=0,no=null,na=-1,sa=0;function ft(){return(Pe&6)!==0?We():na!==-1?na:na=We()}function Er(e){return(e.mode&1)===0?1:(Pe&2)!==0&&at!==0?at&-at:jf.transition!==null?(sa===0&&(sa=Xo()),sa):(e=Fe,e!==0||(e=window.event,e=e===void 0?16:oi(e.type)),e)}function qt(e,t,r,s){if(50<es)throw es=0,no=null,Error(c(185));Nn(e,r,s),((Pe&2)===0||e!==rt)&&(e===rt&&((Pe&2)===0&&(Zs|=r),Ke===4&&Dr(e,at)),xt(e,s),r===1&&Pe===0&&(t.mode&1)===0&&(gn=We()+500,As&&wr()))}function xt(e,t){var r=e.callbackNode;wu(e,t);var s=ms(e,e===rt?at:0);if(s===0)r!==null&&Yo(r),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(r!=null&&Yo(r),t===1)e.tag===0?wf(od.bind(null,e)):Wi(od.bind(null,e)),yf(function(){(Pe&6)===0&&wr()}),r=null;else{switch(Zo(s)){case 1:r=Oa;break;case 4:r=Go;break;case 16:r=cs;break;case 536870912:r=Ko;break;default:r=cs}r=pd(r,ld.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function ld(e,t){if(na=-1,sa=0,(Pe&6)!==0)throw Error(c(327));var r=e.callbackNode;if(yn()&&e.callbackNode!==r)return null;var s=ms(e,e===rt?at:0);if(s===0)return null;if((s&30)!==0||(s&e.expiredLanes)!==0||t)t=aa(e,s);else{t=s;var l=Pe;Pe|=2;var o=cd();(rt!==e||at!==t)&&(cr=null,gn=We()+500,Hr(e,t));do try{Bf();break}catch(g){id(e,g)}while(!0);wl(),Xs.current=o,Pe=l,Ye!==null?t=0:(rt=null,at=0,t=Ke)}if(t!==0){if(t===2&&(l=La(e),l!==0&&(s=l,t=so(e,l))),t===1)throw r=Xn,Hr(e,0),Dr(e,s),xt(e,We()),r;if(t===6)Dr(e,s);else{if(l=e.current.alternate,(s&30)===0&&!Uf(l)&&(t=aa(e,s),t===2&&(o=La(e),o!==0&&(s=o,t=so(e,o))),t===1))throw r=Xn,Hr(e,0),Dr(e,s),xt(e,We()),r;switch(e.finishedWork=l,e.finishedLanes=s,t){case 0:case 1:throw Error(c(345));case 2:Qr(e,yt,cr);break;case 3:if(Dr(e,s),(s&130023424)===s&&(t=to+500-We(),10<t)){if(ms(e,0)!==0)break;if(l=e.suspendedLanes,(l&s)!==s){ft(),e.pingedLanes|=e.suspendedLanes&l;break}e.timeoutHandle=dl(Qr.bind(null,e,yt,cr),t);break}Qr(e,yt,cr);break;case 4:if(Dr(e,s),(s&4194240)===s)break;for(t=e.eventTimes,l=-1;0<s;){var u=31-zt(s);o=1<<u,u=t[u],u>l&&(l=u),s&=~o}if(s=l,s=We()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*zf(s/1960))-s,10<s){e.timeoutHandle=dl(Qr.bind(null,e,yt,cr),s);break}Qr(e,yt,cr);break;case 5:Qr(e,yt,cr);break;default:throw Error(c(329))}}}return xt(e,We()),e.callbackNode===r?ld.bind(null,e):null}function so(e,t){var r=Zn;return e.current.memoizedState.isDehydrated&&(Hr(e,t).flags|=256),e=aa(e,t),e!==2&&(t=yt,yt=r,t!==null&&ao(t)),e}function ao(e){yt===null?yt=e:yt.push.apply(yt,e)}function Uf(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var s=0;s<r.length;s++){var l=r[s],o=l.getSnapshot;l=l.value;try{if(!Ut(o(),l))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Dr(e,t){for(t&=~eo,t&=~Zs,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-zt(t),s=1<<r;e[r]=-1,t&=~s}}function od(e){if((Pe&6)!==0)throw Error(c(327));yn();var t=ms(e,0);if((t&1)===0)return xt(e,We()),null;var r=aa(e,t);if(e.tag!==0&&r===2){var s=La(e);s!==0&&(t=s,r=so(e,s))}if(r===1)throw r=Xn,Hr(e,0),Dr(e,t),xt(e,We()),r;if(r===6)throw Error(c(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Qr(e,yt,cr),xt(e,We()),null}function lo(e,t){var r=Pe;Pe|=1;try{return e(t)}finally{Pe=r,Pe===0&&(gn=We()+500,As&&wr())}}function Br(e){Cr!==null&&Cr.tag===0&&(Pe&6)===0&&yn();var t=Pe;Pe|=1;var r=Pt.transition,s=Fe;try{if(Pt.transition=null,Fe=1,e)return e()}finally{Fe=s,Pt.transition=r,Pe=t,(Pe&6)===0&&wr()}}function oo(){St=pn.current,ze(pn)}function Hr(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,gf(r)),Ye!==null)for(r=Ye.return;r!==null;){var s=r;switch(gl(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&Is();break;case 3:fn(),ze(ht),ze(lt),Tl();break;case 5:El(s);break;case 4:fn();break;case 13:ze(Be);break;case 19:ze(Be);break;case 10:jl(s.type._context);break;case 22:case 23:oo()}r=r.return}if(rt=e,Ye=e=Tr(e.current,null),at=St=t,Ke=0,Xn=null,eo=Zs=$r=0,yt=Zn=null,_r!==null){for(t=0;t<_r.length;t++)if(r=_r[t],s=r.interleaved,s!==null){r.interleaved=null;var l=s.next,o=r.pending;if(o!==null){var u=o.next;o.next=l,s.next=u}r.pending=s}_r=null}return e}function id(e,t){do{var r=Ye;try{if(wl(),Bs.current=Ws,Hs){for(var s=He.memoizedState;s!==null;){var l=s.queue;l!==null&&(l.pending=null),s=s.next}Hs=!1}if(Ur=0,tt=Ge=He=null,Wn=!1,Vn=0,Zl.current=null,r===null||r.return===null){Ke=1,Xn=t,Ye=null;break}e:{var o=e,u=r.return,g=r,S=t;if(t=at,g.flags|=32768,S!==null&&typeof S=="object"&&typeof S.then=="function"){var z=S,Z=g,ne=Z.tag;if((Z.mode&1)===0&&(ne===0||ne===11||ne===15)){var K=Z.alternate;K?(Z.updateQueue=K.updateQueue,Z.memoizedState=K.memoizedState,Z.lanes=K.lanes):(Z.updateQueue=null,Z.memoizedState=null)}var ce=Pc(u);if(ce!==null){ce.flags&=-257,Rc(ce,u,g,o,t),ce.mode&1&&Ac(o,z,t),t=ce,S=z;var fe=t.updateQueue;if(fe===null){var pe=new Set;pe.add(S),t.updateQueue=pe}else fe.add(S);break e}else{if((t&1)===0){Ac(o,z,t),io();break e}S=Error(c(426))}}else if($e&&g.mode&1){var Ve=Pc(u);if(Ve!==null){(Ve.flags&65536)===0&&(Ve.flags|=256),Rc(Ve,u,g,o,t),vl(mn(S,g));break e}}o=S=mn(S,g),Ke!==4&&(Ke=2),Zn===null?Zn=[o]:Zn.push(o),o=u;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t;var P=Ic(o,S,t);nc(o,P);break e;case 1:g=S;var C=o.type,O=o.stateNode;if((o.flags&128)===0&&(typeof C.getDerivedStateFromError=="function"||O!==null&&typeof O.componentDidCatch=="function"&&(Sr===null||!Sr.has(O)))){o.flags|=65536,t&=-t,o.lanes|=t;var le=Mc(o,g,t);nc(o,le);break e}}o=o.return}while(o!==null)}ud(r)}catch(ge){t=ge,Ye===r&&r!==null&&(Ye=r=r.return);continue}break}while(!0)}function cd(){var e=Xs.current;return Xs.current=Ws,e===null?Ws:e}function io(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),rt===null||($r&268435455)===0&&(Zs&268435455)===0||Dr(rt,at)}function aa(e,t){var r=Pe;Pe|=2;var s=cd();(rt!==e||at!==t)&&(cr=null,Hr(e,t));do try{$f();break}catch(l){id(e,l)}while(!0);if(wl(),Pe=r,Xs.current=s,Ye!==null)throw Error(c(261));return rt=null,at=0,Ke}function $f(){for(;Ye!==null;)dd(Ye)}function Bf(){for(;Ye!==null&&!fu();)dd(Ye)}function dd(e){var t=hd(e.alternate,e,St);e.memoizedProps=e.pendingProps,t===null?ud(e):Ye=t,Zl.current=null}function ud(e){var t=e;do{var r=t.alternate;if(e=t.return,(t.flags&32768)===0){if(r=Rf(r,t,St),r!==null){Ye=r;return}}else{if(r=Ff(r,t),r!==null){r.flags&=32767,Ye=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ke=6,Ye=null;return}}if(t=t.sibling,t!==null){Ye=t;return}Ye=t=e}while(t!==null);Ke===0&&(Ke=5)}function Qr(e,t,r){var s=Fe,l=Pt.transition;try{Pt.transition=null,Fe=1,Hf(e,t,r,s)}finally{Pt.transition=l,Fe=s}return null}function Hf(e,t,r,s){do yn();while(Cr!==null);if((Pe&6)!==0)throw Error(c(327));r=e.finishedWork;var l=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(c(177));e.callbackNode=null,e.callbackPriority=0;var o=r.lanes|r.childLanes;if(ju(e,o),e===rt&&(Ye=rt=null,at=0),(r.subtreeFlags&2064)===0&&(r.flags&2064)===0||ta||(ta=!0,pd(cs,function(){return yn(),null})),o=(r.flags&15990)!==0,(r.subtreeFlags&15990)!==0||o){o=Pt.transition,Pt.transition=null;var u=Fe;Fe=1;var g=Pe;Pe|=4,Zl.current=null,Lf(e,r),td(r,e),cf(il),gs=!!ol,il=ol=null,e.current=r,_f(r),mu(),Pe=g,Fe=u,Pt.transition=o}else e.current=r;if(ta&&(ta=!1,Cr=e,ra=l),o=e.pendingLanes,o===0&&(Sr=null),gu(r.stateNode),xt(e,We()),t!==null)for(s=e.onRecoverableError,r=0;r<t.length;r++)l=t[r],s(l.value,{componentStack:l.stack,digest:l.digest});if(ea)throw ea=!1,e=ro,ro=null,e;return(ra&1)!==0&&e.tag!==0&&yn(),o=e.pendingLanes,(o&1)!==0?e===no?es++:(es=0,no=e):es=0,wr(),null}function yn(){if(Cr!==null){var e=Zo(ra),t=Pt.transition,r=Fe;try{if(Pt.transition=null,Fe=16>e?16:e,Cr===null)var s=!1;else{if(e=Cr,Cr=null,ra=0,(Pe&6)!==0)throw Error(c(331));var l=Pe;for(Pe|=4,ue=e.current;ue!==null;){var o=ue,u=o.child;if((ue.flags&16)!==0){var g=o.deletions;if(g!==null){for(var S=0;S<g.length;S++){var z=g[S];for(ue=z;ue!==null;){var Z=ue;switch(Z.tag){case 0:case 11:case 15:Kn(8,Z,o)}var ne=Z.child;if(ne!==null)ne.return=Z,ue=ne;else for(;ue!==null;){Z=ue;var K=Z.sibling,ce=Z.return;if(Gc(Z),Z===z){ue=null;break}if(K!==null){K.return=ce,ue=K;break}ue=ce}}}var fe=o.alternate;if(fe!==null){var pe=fe.child;if(pe!==null){fe.child=null;do{var Ve=pe.sibling;pe.sibling=null,pe=Ve}while(pe!==null)}}ue=o}}if((o.subtreeFlags&2064)!==0&&u!==null)u.return=o,ue=u;else e:for(;ue!==null;){if(o=ue,(o.flags&2048)!==0)switch(o.tag){case 0:case 11:case 15:Kn(9,o,o.return)}var P=o.sibling;if(P!==null){P.return=o.return,ue=P;break e}ue=o.return}}var C=e.current;for(ue=C;ue!==null;){u=ue;var O=u.child;if((u.subtreeFlags&2064)!==0&&O!==null)O.return=u,ue=O;else e:for(u=C;ue!==null;){if(g=ue,(g.flags&2048)!==0)try{switch(g.tag){case 0:case 11:case 15:Ks(9,g)}}catch(ge){Qe(g,g.return,ge)}if(g===u){ue=null;break e}var le=g.sibling;if(le!==null){le.return=g.return,ue=le;break e}ue=g.return}}if(Pe=l,wr(),Wt&&typeof Wt.onPostCommitFiberRoot=="function")try{Wt.onPostCommitFiberRoot(ds,e)}catch{}s=!0}return s}finally{Fe=r,Pt.transition=t}}return!1}function fd(e,t,r){t=mn(r,t),t=Ic(e,t,1),e=br(e,t,1),t=ft(),e!==null&&(Nn(e,1,t),xt(e,t))}function Qe(e,t,r){if(e.tag===3)fd(e,e,r);else for(;t!==null;){if(t.tag===3){fd(t,e,r);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(Sr===null||!Sr.has(s))){e=mn(r,e),e=Mc(t,e,1),t=br(t,e,1),e=ft(),t!==null&&(Nn(t,1,e),xt(t,e));break}}t=t.return}}function Qf(e,t,r){var s=e.pingCache;s!==null&&s.delete(t),t=ft(),e.pingedLanes|=e.suspendedLanes&r,rt===e&&(at&r)===r&&(Ke===4||Ke===3&&(at&130023424)===at&&500>We()-to?Hr(e,0):eo|=r),xt(e,t)}function md(e,t){t===0&&((e.mode&1)===0?t=1:(t=fs,fs<<=1,(fs&130023424)===0&&(fs=4194304)));var r=ft();e=lr(e,t),e!==null&&(Nn(e,t,r),xt(e,r))}function qf(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),md(e,r)}function Wf(e,t){var r=0;switch(e.tag){case 13:var s=e.stateNode,l=e.memoizedState;l!==null&&(r=l.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(c(314))}s!==null&&s.delete(t),md(e,r)}var hd;hd=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||ht.current)gt=!0;else{if((e.lanes&r)===0&&(t.flags&128)===0)return gt=!1,Pf(e,t,r);gt=(e.flags&131072)!==0}else gt=!1,$e&&(t.flags&1048576)!==0&&Vi(t,Rs,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Ys(e,t),e=t.pendingProps;var l=sn(t,lt.current);un(t,r),l=Al(null,t,s,e,l,r);var o=Pl();return t.flags|=1,typeof l=="object"&&l!==null&&typeof l.render=="function"&&l.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,pt(s)?(o=!0,Ms(t)):o=!1,t.memoizedState=l.state!==null&&l.state!==void 0?l.state:null,Sl(t),l.updater=Vs,t.stateNode=l,l._reactInternals=t,zl(t,s,e,r),t=Hl(null,t,s,!0,o,r)):(t.tag=0,$e&&o&&pl(t),ut(null,t,l,r),t=t.child),t;case 16:s=t.elementType;e:{switch(Ys(e,t),e=t.pendingProps,l=s._init,s=l(s._payload),t.type=s,l=t.tag=Jf(s),e=Bt(s,e),l){case 0:t=Bl(null,t,s,e,r);break e;case 1:t=Uc(null,t,s,e,r);break e;case 11:t=Fc(null,t,s,e,r);break e;case 14:t=Oc(null,t,s,Bt(s.type,e),r);break e}throw Error(c(306,s,""))}return t;case 0:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Bt(s,l),Bl(e,t,s,l,r);case 1:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Bt(s,l),Uc(e,t,s,l,r);case 3:e:{if($c(t),e===null)throw Error(c(387));s=t.pendingProps,o=t.memoizedState,l=o.element,rc(e,t),Us(t,s,null,r);var u=t.memoizedState;if(s=u.element,o.isDehydrated)if(o={element:s,isDehydrated:!1,cache:u.cache,pendingSuspenseBoundaries:u.pendingSuspenseBoundaries,transitions:u.transitions},t.updateQueue.baseState=o,t.memoizedState=o,t.flags&256){l=mn(Error(c(423)),t),t=Bc(e,t,s,r,l);break e}else if(s!==l){l=mn(Error(c(424)),t),t=Bc(e,t,s,r,l);break e}else for(Nt=xr(t.stateNode.containerInfo.firstChild),bt=t,$e=!0,$t=null,r=ec(t,null,s,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(on(),s===l){t=ir(e,t,r);break e}ut(e,t,s,r)}t=t.child}return t;case 5:return ac(t),e===null&&xl(t),s=t.type,l=t.pendingProps,o=e!==null?e.memoizedProps:null,u=l.children,cl(s,l)?u=null:o!==null&&cl(s,o)&&(t.flags|=32),zc(e,t),ut(e,t,u,r),t.child;case 6:return e===null&&xl(t),null;case 13:return Hc(e,t,r);case 4:return Cl(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=cn(t,null,s,r):ut(e,t,s,r),t.child;case 11:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Bt(s,l),Fc(e,t,s,l,r);case 7:return ut(e,t,t.pendingProps,r),t.child;case 8:return ut(e,t,t.pendingProps.children,r),t.child;case 12:return ut(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(s=t.type._context,l=t.pendingProps,o=t.memoizedProps,u=l.value,Oe(Ls,s._currentValue),s._currentValue=u,o!==null)if(Ut(o.value,u)){if(o.children===l.children&&!ht.current){t=ir(e,t,r);break e}}else for(o=t.child,o!==null&&(o.return=t);o!==null;){var g=o.dependencies;if(g!==null){u=o.child;for(var S=g.firstContext;S!==null;){if(S.context===s){if(o.tag===1){S=or(-1,r&-r),S.tag=2;var z=o.updateQueue;if(z!==null){z=z.shared;var Z=z.pending;Z===null?S.next=S:(S.next=Z.next,Z.next=S),z.pending=S}}o.lanes|=r,S=o.alternate,S!==null&&(S.lanes|=r),bl(o.return,r,t),g.lanes|=r;break}S=S.next}}else if(o.tag===10)u=o.type===t.type?null:o.child;else if(o.tag===18){if(u=o.return,u===null)throw Error(c(341));u.lanes|=r,g=u.alternate,g!==null&&(g.lanes|=r),bl(u,r,t),u=o.sibling}else u=o.child;if(u!==null)u.return=o;else for(u=o;u!==null;){if(u===t){u=null;break}if(o=u.sibling,o!==null){o.return=u.return,u=o;break}u=u.return}o=u}ut(e,t,l.children,r),t=t.child}return t;case 9:return l=t.type,s=t.pendingProps.children,un(t,r),l=Mt(l),s=s(l),t.flags|=1,ut(e,t,s,r),t.child;case 14:return s=t.type,l=Bt(s,t.pendingProps),l=Bt(s.type,l),Oc(e,t,s,l,r);case 15:return Lc(e,t,t.type,t.pendingProps,r);case 17:return s=t.type,l=t.pendingProps,l=t.elementType===s?l:Bt(s,l),Ys(e,t),t.tag=1,pt(s)?(e=!0,Ms(t)):e=!1,un(t,r),Dc(t,s,l),zl(t,s,l,r),Hl(null,t,s,!0,e,r);case 19:return qc(e,t,r);case 22:return _c(e,t,r)}throw Error(c(156,t.tag))};function pd(e,t){return Jo(e,t)}function Vf(e,t,r,s){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Rt(e,t,r,s){return new Vf(e,t,r,s)}function co(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Jf(e){if(typeof e=="function")return co(e)?1:0;if(e!=null){if(e=e.$$typeof,e===J)return 11;if(e===Ne)return 14}return 2}function Tr(e,t){var r=e.alternate;return r===null?(r=Rt(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function la(e,t,r,s,l,o){var u=2;if(s=e,typeof e=="function")co(e)&&(u=1);else if(typeof e=="string")u=5;else e:switch(e){case W:return qr(r.children,l,o,t);case te:u=8,l|=8;break;case we:return e=Rt(12,r,t,l|2),e.elementType=we,e.lanes=o,e;case ae:return e=Rt(13,r,t,l),e.elementType=ae,e.lanes=o,e;case ie:return e=Rt(19,r,t,l),e.elementType=ie,e.lanes=o,e;case De:return oa(r,l,o,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Ee:u=10;break e;case ee:u=9;break e;case J:u=11;break e;case Ne:u=14;break e;case Te:u=16,s=null;break e}throw Error(c(130,e==null?e:typeof e,""))}return t=Rt(u,r,t,l),t.elementType=e,t.type=s,t.lanes=o,t}function qr(e,t,r,s){return e=Rt(7,e,s,t),e.lanes=r,e}function oa(e,t,r,s){return e=Rt(22,e,s,t),e.elementType=De,e.lanes=r,e.stateNode={isHidden:!1},e}function uo(e,t,r){return e=Rt(6,e,null,t),e.lanes=r,e}function fo(e,t,r){return t=Rt(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Yf(e,t,r,s,l){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_a(0),this.expirationTimes=_a(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_a(0),this.identifierPrefix=s,this.onRecoverableError=l,this.mutableSourceEagerHydrationData=null}function mo(e,t,r,s,l,o,u,g,S){return e=new Yf(e,t,r,g,S),t===1?(t=1,o===!0&&(t|=8)):t=0,o=Rt(3,null,null,t),e.current=o,o.stateNode=e,o.memoizedState={element:s,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},Sl(o),e}function Gf(e,t,r){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:B,key:s==null?null:""+s,children:e,containerInfo:t,implementation:r}}function gd(e){if(!e)return kr;e=e._reactInternals;e:{if(Pr(e)!==e||e.tag!==1)throw Error(c(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(pt(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(c(171))}if(e.tag===1){var r=e.type;if(pt(r))return Qi(e,r,t)}return t}function yd(e,t,r,s,l,o,u,g,S){return e=mo(r,s,!0,e,l,o,u,g,S),e.context=gd(null),r=e.current,s=ft(),l=Er(r),o=or(s,l),o.callback=t??null,br(r,o,l),e.current.lanes=l,Nn(e,l,s),xt(e,s),e}function ia(e,t,r,s){var l=t.current,o=ft(),u=Er(l);return r=gd(r),t.context===null?t.context=r:t.pendingContext=r,t=or(o,u),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=br(l,t,u),e!==null&&(qt(e,l,u,o),zs(e,l,u)),u}function ca(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function xd(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function ho(e,t){xd(e,t),(e=e.alternate)&&xd(e,t)}function Kf(){return null}var vd=typeof reportError=="function"?reportError:function(e){console.error(e)};function po(e){this._internalRoot=e}da.prototype.render=po.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(c(409));ia(e,t,null,null)},da.prototype.unmount=po.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Br(function(){ia(null,e,null,null)}),t[rr]=null}};function da(e){this._internalRoot=e}da.prototype.unstable_scheduleHydration=function(e){if(e){var t=ri();e={blockedOn:null,target:e,priority:t};for(var r=0;r<pr.length&&t!==0&&t<pr[r].priority;r++);pr.splice(r,0,e),r===0&&ai(e)}};function go(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function ua(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function kd(){}function Xf(e,t,r,s,l){if(l){if(typeof s=="function"){var o=s;s=function(){var z=ca(u);o.call(z)}}var u=yd(t,s,e,0,null,!1,!1,"",kd);return e._reactRootContainer=u,e[rr]=u.current,_n(e.nodeType===8?e.parentNode:e),Br(),u}for(;l=e.lastChild;)e.removeChild(l);if(typeof s=="function"){var g=s;s=function(){var z=ca(S);g.call(z)}}var S=mo(e,0,!1,null,null,!1,!1,"",kd);return e._reactRootContainer=S,e[rr]=S.current,_n(e.nodeType===8?e.parentNode:e),Br(function(){ia(t,S,r,s)}),S}function fa(e,t,r,s,l){var o=r._reactRootContainer;if(o){var u=o;if(typeof l=="function"){var g=l;l=function(){var S=ca(u);g.call(S)}}ia(t,u,e,l)}else u=Xf(r,t,e,l,s);return ca(u)}ei=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=bn(t.pendingLanes);r!==0&&(za(t,r|1),xt(t,We()),(Pe&6)===0&&(gn=We()+500,wr()))}break;case 13:Br(function(){var s=lr(e,1);if(s!==null){var l=ft();qt(s,e,1,l)}}),ho(e,1)}},Ua=function(e){if(e.tag===13){var t=lr(e,134217728);if(t!==null){var r=ft();qt(t,e,134217728,r)}ho(e,134217728)}},ti=function(e){if(e.tag===13){var t=Er(e),r=lr(e,t);if(r!==null){var s=ft();qt(r,e,t,s)}ho(e,t)}},ri=function(){return Fe},ni=function(e,t){var r=Fe;try{return Fe=e,t()}finally{Fe=r}},Aa=function(e,t,r){switch(t){case"input":if(qe(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var l=Ts(s);if(!l)throw Error(c(90));me(s),qe(s,l)}}}break;case"textarea":Se(e,r);break;case"select":t=r.value,t!=null&&be(e,!!r.multiple,t,!1)}},$o=lo,Bo=Br;var Zf={usingClientEntryPoint:!1,Events:[$n,rn,Ts,zo,Uo,lo]},ts={findFiberByHostInstance:Rr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},em={bundleType:ts.bundleType,version:ts.version,rendererPackageName:ts.rendererPackageName,rendererConfig:ts.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:T.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Wo(e),e===null?null:e.stateNode},findFiberByHostInstance:ts.findFiberByHostInstance||Kf,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ma=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ma.isDisabled&&ma.supportsFiber)try{ds=ma.inject(em),Wt=ma}catch{}}return vt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zf,vt.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!go(t))throw Error(c(200));return Gf(e,t,null,r)},vt.createRoot=function(e,t){if(!go(e))throw Error(c(299));var r=!1,s="",l=vd;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(l=t.onRecoverableError)),t=mo(e,1,!1,null,null,r,!1,s,l),e[rr]=t.current,_n(e.nodeType===8?e.parentNode:e),new po(t)},vt.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(c(188)):(e=Object.keys(e).join(","),Error(c(268,e)));return e=Wo(t),e=e===null?null:e.stateNode,e},vt.flushSync=function(e){return Br(e)},vt.hydrate=function(e,t,r){if(!ua(t))throw Error(c(200));return fa(null,e,t,!0,r)},vt.hydrateRoot=function(e,t,r){if(!go(e))throw Error(c(405));var s=r!=null&&r.hydratedSources||null,l=!1,o="",u=vd;if(r!=null&&(r.unstable_strictMode===!0&&(l=!0),r.identifierPrefix!==void 0&&(o=r.identifierPrefix),r.onRecoverableError!==void 0&&(u=r.onRecoverableError)),t=yd(t,null,e,1,r??null,l,!1,o,u),e[rr]=t.current,_n(e),s)for(e=0;e<s.length;e++)r=s[e],l=r._getVersion,l=l(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,l]:t.mutableSourceEagerHydrationData.push(r,l);return new da(t)},vt.render=function(e,t,r){if(!ua(t))throw Error(c(200));return fa(null,e,t,!1,r)},vt.unmountComponentAtNode=function(e){if(!ua(e))throw Error(c(40));return e._reactRootContainer?(Br(function(){fa(null,null,e,!1,function(){e._reactRootContainer=null,e[rr]=null})}),!0):!1},vt.unstable_batchedUpdates=lo,vt.unstable_renderSubtreeIntoContainer=function(e,t,r,s){if(!ua(r))throw Error(c(200));if(e==null||e._reactInternals===void 0)throw Error(c(38));return fa(e,t,r,!1,s)},vt.version="18.3.1-next-f1338f8080-20240426",vt}var Dd;function cm(){if(Dd)return vo.exports;Dd=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(i){console.error(i)}}return a(),vo.exports=im(),vo.exports}var Td;function dm(){if(Td)return ha;Td=1;var a=cm();return ha.createRoot=a.createRoot,ha.hydrateRoot=a.hydrateRoot,ha}var um=dm();const fm=Qd(um),mm="cogniflow-sync";let jo=null;const qd=()=>(jo||(jo=new BroadcastChannel(mm)),jo),tr=()=>{qd().postMessage({type:"data-changed"})},hm=a=>{const i=qd(),c=()=>{a()};return i.addEventListener("message",c),()=>{i.removeEventListener("message",c)}},Ao="Europe/Stockholm",pm=()=>new Date().toLocaleDateString("sv-SE",{timeZone:Ao}),Wd=()=>new Date().toLocaleString("sv-SE",{timeZone:Ao,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).replace(/ /g,"_").replace(/:/g,"-"),gm=a=>{if(!a)return"N/A";try{return new Date(a).toLocaleString("sv-SE",{timeZone:Ao,year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})}catch(i){return console.error("Failed to format date string:",a,i),"Invalid Date"}},Vd="CogniFlowDB",ym=3,Kt="decks",Ot="folders",Xt="deckSeries";let Ar=null;function Ct(){return Ar||(Ar=new Promise((a,i)=>{const c=indexedDB.open(Vd,ym);c.onblocked=m=>{console.error("IndexedDB open request blocked. Please close other tabs with this app open.",m),i(new Error("Database upgrade is required, but it is blocked by another open tab of this application. Please close all other tabs and reload."))},c.onerror=()=>{var m;console.error("IndexedDB error:",c.error),Ar=null,i(new Error(`IndexedDB error: ${((m=c.error)==null?void 0:m.message)||"Unknown error"}`))},c.onsuccess=()=>{const m=c.result;m.onclose=()=>{Ar=null,console.warn("Database connection closed.")},a(m)},c.onupgradeneeded=m=>{const f=m.target.result;f.objectStoreNames.contains(Kt)||f.createObjectStore(Kt,{keyPath:"id"}),f.objectStoreNames.contains(Ot)||f.createObjectStore(Ot,{keyPath:"id"}),m.oldVersion<3&&!f.objectStoreNames.contains(Xt)&&f.createObjectStore(Xt,{keyPath:"id"})}}),Ar)}async function Po(){const a=await Ct();return new Promise((i,c)=>{const h=a.transaction(Kt,"readonly").objectStore(Kt).getAll();h.onerror=()=>c("Error fetching decks"),h.onsuccess=()=>i(h.result)})}async function ns(a){if(a.length===0)return;const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Kt,"readwrite"),h=f.objectStore(Kt);f.oncomplete=()=>{tr(),c()},f.onerror=()=>{console.error("Transaction error adding/updating decks",f.error),m("Transaction error adding/updating decks")},a.forEach(p=>{const N=h.put(p);N.onerror=()=>{console.error(`Error putting deck ${p.name}`,N.error)}})})}async function Id(a){await ns(a)}async function Co(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Kt,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error deleting deck"),f.objectStore(Kt).delete(a)})}async function xm(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Kt,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error updating deck"),f.objectStore(Kt).put(a)})}async function Ro(){const a=await Ct();return new Promise((i,c)=>{const h=a.transaction(Ot,"readonly").objectStore(Ot).getAll();h.onerror=()=>c("Error fetching folders"),h.onsuccess=()=>i(h.result)})}async function vm(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Ot,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error adding folder"),f.objectStore(Ot).add(a)})}async function km(a){if(a.length===0)return;const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Ot,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>{console.error("Transaction error adding/updating folders",f.error),m("Transaction error adding/updating folders")};const h=f.objectStore(Ot);a.forEach(p=>{const N=h.put(p);N.onerror=()=>{console.error(`Error putting folder ${p.name}`,N.error)}})})}async function wm(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Ot,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error updating folder"),f.objectStore(Ot).put(a)})}async function jm(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Ot,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error deleting folder"),f.objectStore(Ot).delete(a)})}async function Fo(){const a=await Ct();return new Promise((i,c)=>{const h=a.transaction(Xt,"readonly").objectStore(Xt).getAll();h.onerror=()=>c("Error fetching deck series"),h.onsuccess=()=>i(h.result)})}async function pa(a){if(a.length===0)return;const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Xt,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Transaction error adding deck series");const h=f.objectStore(Xt);a.forEach(p=>h.put(p))})}async function Md(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Xt,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Error updating deck series"),f.objectStore(Xt).put(a)})}async function Jd(a){const i=await Ct();return new Promise((c,m)=>{const f=i.transaction(Xt,"readwrite");f.oncomplete=()=>{tr(),c()},f.onerror=()=>m("Error deleting deck series"),f.objectStore(Xt).delete(a)})}async function bm(){const[a,i,c]=await Promise.all([Po(),Ro(),Fo()]);if(a.length===0&&i.length===0&&c.length===0)throw new Error("There is no data to export.");const f=JSON.stringify({version:3,decks:a,folders:i,deckSeries:c},null,2),h=new Blob([f],{type:"application/json"}),p=URL.createObjectURL(h),N=document.createElement("a");N.style.display="none",N.href=p;const E=Wd();return N.download=`cogniflow-backup-${E}.json`,document.body.appendChild(N),N.click(),window.URL.revokeObjectURL(p),document.body.removeChild(N),N.download}async function Nm(){return Ar&&(await Ar).close(),new Promise((a,i)=>{const c=indexedDB.deleteDatabase(Vd);c.onerror=m=>{console.error("Error deleting database.",m),i(new Error("Error deleting database."))},c.onsuccess=()=>{console.log("Database deleted successfully."),a()},c.onblocked=()=>{console.error("Database deletion blocked. Please close other tabs of this app and try again."),i(new Error("Deletion blocked. Please close other tabs of this app."))}})}const Sm=()=>{const[a,i]=x.useState(null);return x.useEffect(()=>{const m=f=>{f.preventDefault(),i(f)};return window.addEventListener("beforeinstallprompt",m),()=>{window.removeEventListener("beforeinstallprompt",m)}},[]),[a,()=>{a&&(a.prompt(),a.userChoice.then(m=>{m.outcome==="accepted"?console.log("User accepted the install prompt"):console.log("User dismissed the install prompt"),i(null)}))}]},Cm=()=>{const[a,i]=x.useState(navigator.onLine);return x.useEffect(()=>{const c=()=>i(!0),m=()=>i(!1);return window.addEventListener("online",c),window.addEventListener("offline",m),()=>{window.removeEventListener("online",c),window.removeEventListener("offline",m)}},[]),a},Em=()=>Cm()?null:n.jsx("div",{role:"status","aria-live":"assertive",className:"fixed bottom-0 left-0 right-0 bg-red-600 text-white text-center p-3 z-50 animate-fade-in",children:n.jsx("p",{className:"text-sm font-semibold",children:"You are currently offline. Some features may be unavailable."})}),Dm={plus:n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("line",{x1:"5",y1:"12",x2:"19",y2:"12"})]}),"upload-cloud":n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M20 16.58A5 5 0 0 0 18 7h-1.26A8 8 0 1 0 4 15.25"}),n.jsx("polyline",{points:"16 16 12 12 8 16"}),n.jsx("line",{x1:"12",y1:"12",x2:"12",y2:"21"})]}),x:n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),n.jsx("line",{x1:"6",y1:"6",x2:"18",y2:"18"})]}),"chevron-left":n.jsx(n.Fragment,{children:n.jsx("polyline",{points:"15 18 9 12 15 6"})}),"trash-2":n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"3 6 5 6 21 6"}),n.jsx("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),n.jsx("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),n.jsx("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]}),"check-circle":n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}),n.jsx("polyline",{points:"22 4 12 14.01 9 11.01"})]}),"x-circle":n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),n.jsx("line",{x1:"9",y1:"9",x2:"15",y2:"15"})]}),download:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),n.jsx("polyline",{points:"7 10 12 15 17 10"}),n.jsx("line",{x1:"12",y1:"15",x2:"12",y2:"3"})]}),laptop:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M20 16V7a2 2 0 0 0-2-2H6a2 2 0 0 0-2 2v9h16z"}),n.jsx("rect",{x:"2",y:"17",width:"20",height:"4",rx:"1"})]}),menu:n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),n.jsx("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),n.jsx("line",{x1:"3",y1:"18",x2:"21",y2:"18"})]}),edit:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),n.jsx("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]}),save:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),n.jsx("polyline",{points:"17 21 17 13 7 13 7 21"}),n.jsx("polyline",{points:"7 3 7 8 15 8"})]}),sun:n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"5"}),n.jsx("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),n.jsx("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),n.jsx("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),n.jsx("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),n.jsx("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),n.jsx("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),n.jsx("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),n.jsx("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"})]}),moon:n.jsx(n.Fragment,{children:n.jsx("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"})}),code:n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"16 18 22 12 16 6"}),n.jsx("polyline",{points:"8 6 2 12 8 18"})]}),"refresh-ccw":n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"1 4 1 10 7 10"}),n.jsx("polyline",{points:"23 20 23 14 17 14"}),n.jsx("path",{d:"M20.49 9A9 9 0 0 0 7.2 6.51"}),n.jsx("path",{d:"M3.51 15A9 9 0 0 0 16.8 17.49"})]}),broom:n.jsx(n.Fragment,{children:n.jsx("path",{d:"M9.59 4.59A2 2 0 1 1 11 8H2m10.59 11.41A2 2 0 1 0 14 16H2m15.73-8.27A2.5 2.5 0 1 1 19.5 12H2"})}),settings:n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"3"}),n.jsx("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"})]}),info:n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),n.jsx("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"})]}),"chevron-down":n.jsx(n.Fragment,{children:n.jsx("polyline",{points:"6 9 12 15 18 9"})}),eye:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),n.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),"eye-off":n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),n.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),zap:n.jsx(n.Fragment,{children:n.jsx("polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"})}),"help-circle":n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"10"}),n.jsx("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),n.jsx("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"})]}),google:n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M17.64 9.2c0-.63-.06-1.25-.16-1.84H9v3.48h4.84c-.2 1.12-.84 2.08-1.74 2.71v2.26h2.92c1.7-1.56 2.68-3.88 2.68-6.61z"}),n.jsx("path",{d:"M9 18c2.43 0 4.47-.8 5.96-2.18l-2.92-2.26c-.8.54-1.82.86-3.04.86-2.34 0-4.32-1.58-5.04-3.7H1v2.34C2.64 16.32 5.57 18 9 18z"}),n.jsx("path",{d:"M3.96 10.71c-.18-.54-.28-1.12-.28-1.71s.1-1.17.28-1.71V4.96H1c-.64 1.28-1 2.74-1 4.34s.36 3.06 1 4.34l2.96-2.34z"}),n.jsx("path",{d:"M9 3.6c1.32 0 2.52.45 3.44 1.34l2.6-2.6C13.46.8 11.43 0 9 0 5.57 0 2.64 1.68 1 4.34l2.96 2.34C4.68 4.54 6.66 3.6 9 3.6z"})]}),folder:n.jsx(n.Fragment,{children:n.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"})}),"folder-plus":n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),n.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"}),n.jsx("line",{x1:"9",y1:"14",x2:"15",y2:"14"})]}),"folder-edit":n.jsxs(n.Fragment,{children:[n.jsx("path",{d:"M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"}),n.jsx("path",{d:"M14 13.5l2 2-4 4-2-2 4-4zm-1.5 2.5l2-2"})]}),list:n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),n.jsx("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),n.jsx("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),n.jsx("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),n.jsx("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),n.jsx("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"})]}),lock:n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),n.jsx("path",{d:"M7 11V7a5 5 0 0 1 10 0v4"})]}),unlock:n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}),n.jsx("path",{d:"M7 11V7a5 5 0 0 1 9.9-1"})]}),archive:n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),n.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),n.jsx("line",{x1:"10",y1:"12",x2:"14",y2:"12"})]}),unarchive:n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"21 8 21 21 3 21 3 8"}),n.jsx("rect",{x:"1",y:"3",width:"22",height:"5"}),n.jsx("polyline",{points:"10 13 12 11 14 13"}),n.jsx("line",{x1:"12",y1:"11",x2:"12",y2:"17"})]}),"arrow-down":n.jsxs(n.Fragment,{children:[n.jsx("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),n.jsx("polyline",{points:"19 12 12 19 5 12"})]}),monitor:n.jsxs(n.Fragment,{children:[n.jsx("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),n.jsx("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),n.jsx("line",{x1:"12",y1:"17",x2:"12",y2:"21"})]}),"more-vertical":n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"12",cy:"12",r:"1"}),n.jsx("circle",{cx:"12",cy:"5",r:"1"}),n.jsx("circle",{cx:"12",cy:"19",r:"1"})]}),search:n.jsxs(n.Fragment,{children:[n.jsx("circle",{cx:"11",cy:"11",r:"8"}),n.jsx("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"})]}),filter:n.jsx(n.Fragment,{children:n.jsx("polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"})}),layers:n.jsxs(n.Fragment,{children:[n.jsx("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),n.jsx("polyline",{points:"2 17 12 22 22 17"}),n.jsx("polyline",{points:"2 12 12 17 22 12"})]}),terminal:n.jsxs(n.Fragment,{children:[n.jsx("polyline",{points:"4 17 10 11 4 5"}),n.jsx("line",{x1:"12",y1:"19",x2:"20",y2:"19"})]})},L=({name:a,className:i="w-6 h-6",...c})=>n.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:i,...c,children:Dm[a]}),q=({children:a,variant:i="primary",size:c="md",className:m="",...f})=>{const h="inline-flex items-center justify-center rounded-md font-medium transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-white dark:focus:ring-offset-gray-900 disabled:opacity-50 disabled:pointer-events-none",p={primary:"bg-blue-600 text-white hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-700 focus:ring-blue-500",secondary:"bg-gray-200 text-gray-800 hover:bg-gray-300 dark:bg-gray-700 dark:text-gray-100 dark:hover:bg-gray-600 focus:ring-gray-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500",ghost:"text-gray-600 dark:text-gray-400 hover:bg-gray-200 dark:hover:bg-gray-700 hover:text-gray-900 dark:hover:text-gray-100 focus:ring-gray-500"},N={sm:"px-2 py-1 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return n.jsx("button",{className:`${h} ${p[i]} ${N[c]} ${m}`,...f,children:a})},Tm='a[href], button:not([disabled]), textarea, input, select, [tabindex]:not([tabindex="-1"])',Lt=(a,i)=>{const c=x.useRef([]);x.useEffect(()=>{if(i&&a.current){c.current=Array.from(a.current.querySelectorAll(Tm));const m=c.current[0];m&&setTimeout(()=>m.focus(),100);const f=h=>{var E;if(h.key!=="Tab"||!((E=a.current)!=null&&E.contains(document.activeElement)))return;const p=c.current[0],N=c.current[c.current.length-1];h.shiftKey?document.activeElement===p&&(h.preventDefault(),N==null||N.focus()):document.activeElement===N&&(h.preventDefault(),p==null||p.focus())};return document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}}},[i,a])},Yd=x.createContext(void 0),Ad=()=>window.location.hash.startsWith("#/")?window.location.hash.substring(1):"/",Im=({children:a})=>{const[i,c]=x.useState(Ad()),m=x.useCallback(()=>{c(Ad())},[]);x.useEffect(()=>(window.addEventListener("hashchange",m),()=>{window.removeEventListener("hashchange",m)}),[m]);const f=x.useCallback(p=>{window.location.hash=`#${p}`},[]),h={path:i,navigate:f};return n.jsx(Yd.Provider,{value:h,children:a})},dr=()=>{const a=x.useContext(Yd);if(a===void 0)throw new Error("useRouter must be used within a RouterProvider");return a},Xe=({href:a,children:i,passAs:c,...m})=>{const{navigate:f}=dr(),h=N=>{N.currentTarget.tagName==="A"&&(N.metaKey||N.ctrlKey)||(N.preventDefault(),m.onClick&&m.onClick(N),f(a))},p=`#${a}`;return c?n.jsx(c,{...m,onClick:h,children:i}):n.jsx("a",{...m,href:p,onClick:h,children:i})},Mm=({isOpen:a,onClose:i,onImport:c,onCreateSeries:m,onInstall:f})=>{const h=x.useRef(null);return Lt(h,a),n.jsxs(n.Fragment,{children:[n.jsx("div",{className:`fixed inset-0 bg-black/60 z-30 transition-opacity duration-300 ${a?"opacity-100":"opacity-0 pointer-events-none"}`,onClick:i,"aria-hidden":"true"}),n.jsx("div",{ref:h,className:`fixed top-0 right-0 h-full w-full max-w-xs bg-white dark:bg-gray-800 shadow-xl z-40 transform transition-transform duration-300 ease-in-out ${a?"translate-x-0":"translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"sidebar-title",children:n.jsxs("div",{className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{id:"sidebar-title",className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Menu"}),n.jsx(q,{variant:"ghost",onClick:i,className:"p-1 h-auto","aria-label":"Close menu",children:n.jsx(L,{name:"x"})})]}),n.jsxs("nav",{className:"flex-grow p-4 space-y-2",children:[n.jsxs(Xe,{href:"/",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"laptop",className:"w-6 h-6 mr-3"})," Home"]}),n.jsxs(Xe,{href:"/series",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"layers",className:"w-6 h-6 mr-3"})," Series"]}),n.jsxs(Xe,{href:"/decks",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"folder",className:"w-6 h-6 mr-3"})," Decks"]}),n.jsxs(Xe,{href:"/archive",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"archive",className:"w-6 h-6 mr-3"}),"Archive"]}),n.jsxs(Xe,{href:"/trash",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"trash-2",className:"w-6 h-6 mr-3"}),"Trash"]}),n.jsxs(Xe,{href:"/settings",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"settings",className:"w-6 h-6 mr-3"}),"Settings"]}),n.jsxs(Xe,{href:"/instructions/json",onClick:i,className:"flex items-center px-3 py-2 text-gray-700 dark:text-gray-200 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 text-lg",children:[n.jsx(L,{name:"help-circle",className:"w-6 h-6 mr-3"}),"JSON Guide"]})]}),n.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-gray-700 space-y-2",children:[n.jsxs(q,{variant:"primary",onClick:m,className:"w-full",children:[n.jsx(L,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]}),n.jsxs(q,{variant:"secondary",onClick:c,className:"w-full",children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import Deck"]}),f&&n.jsxs(q,{variant:"secondary",onClick:f,className:"w-full",children:[n.jsx(L,{name:"download",className:"w-5 h-5 mr-2"}),"Install App"]})]})]})})]})},Am={success:n.jsx(L,{name:"check-circle",className:"w-6 h-6 text-green-500"}),error:n.jsx(L,{name:"x-circle",className:"w-6 h-6 text-red-500"}),info:n.jsx(L,{name:"info",className:"w-6 h-6 text-blue-500"})},Pm=({message:a,onDismiss:i})=>(x.useEffect(()=>{const c=setTimeout(()=>{i(a.id)},5e3);return()=>{clearTimeout(c)}},[a.id,i]),n.jsx("div",{className:"bg-white dark:bg-gray-800 shadow-lg rounded-lg pointer-events-auto ring-1 ring-black ring-opacity-5 overflow-hidden animate-fade-in-right",children:n.jsx("div",{className:"p-4",children:n.jsxs("div",{className:"flex items-start",children:[n.jsx("div",{className:"flex-shrink-0",children:Am[a.type]}),n.jsx("div",{className:"ml-3 w-0 flex-1 pt-0.5",children:n.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 break-words",children:a.message})}),n.jsx("div",{className:"ml-4 flex-shrink-0 flex",children:n.jsxs("button",{onClick:()=>i(a.id),className:"bg-white dark:bg-gray-800 rounded-md inline-flex text-gray-400 hover:text-gray-500 dark:hover:text-gray-300 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:ring-offset-gray-800 focus:ring-blue-500",children:[n.jsx("span",{className:"sr-only",children:"Close"}),n.jsx(L,{name:"x",className:"h-5 w-5"})]})})]})})})),Gd=x.createContext(void 0),Rm=({children:a})=>{const[i,c]=x.useState([]),m=x.useCallback((h,p)=>{const N=crypto.randomUUID();c(E=>[...E,{id:N,message:h,type:p}])},[]),f=x.useCallback(h=>{c(p=>p.filter(N=>N.id!==h))},[]);return n.jsxs(Gd.Provider,{value:{addToast:m},children:[a,n.jsx("div",{className:"fixed top-5 right-5 z-[100] w-full max-w-xs space-y-3",children:i.map(h=>n.jsx(Pm,{message:h,onDismiss:f},h.id))})]})},kt=()=>{const a=x.useContext(Gd);if(a===void 0)throw new Error("useToast must be used within a ToastProvider");return a},xn=({size:a="md"})=>{const i={sm:"h-6 w-6",md:"h-10 w-10",lg:"h-16 w-16"};return n.jsx("div",{className:"flex justify-center items-center p-4",role:"status","aria-label":"Loading",children:n.jsxs("svg",{className:`animate-spin text-blue-500 dark:text-blue-400 ${i[a]}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[n.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),n.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})})};var Je=(a=>(a[a.Again=1]="Again",a[a.Hard=2]="Hard",a[a.Good=3]="Good",a[a.Easy=4]="Easy",a))(Je||{}),ke=(a=>(a.Flashcard="flashcard",a.Quiz="quiz",a))(ke||{});const vn=2.5,Pd=1.3,Fm=1,Om=1.2,Lm=1.3,_m={1:-.2,2:-.15,3:0,4:.15},zm=a=>{try{if(!a.trim())throw new Error("File content is empty.");const i=JSON.parse(a);if(typeof i=="object"&&i!==null&&"version"in i&&Array.isArray(i.decks)){if(i.version>3)throw new Error(`Unsupported backup version: ${i.version}`);const c=i.decks,m=i.folders||[],f=i.deckSeries||[];for(const h of c)if(typeof h.id!="string"||typeof h.name!="string"||!h.type)throw new Error("Invalid deck structure in backup file.");for(const h of m)if(typeof h.id!="string"||typeof h.name!="string")throw new Error("Invalid folder structure in backup file.");for(const h of f)if(typeof h.id!="string"||typeof h.name!="string"||!Array.isArray(h.levels))throw new Error("Invalid deck series structure in backup file. Expected 'levels' array.");return{decks:c,folders:m,deckSeries:f}}if(Array.isArray(i)){if(i.length>0&&!("id"in i[0]&&"name"in i[0]&&"type"in i[0]))throw new Error("The file is not a valid CogniFlow backup file.");for(const c of i)if(typeof c.id!="string"||typeof c.name!="string"||c.type!==ke.Flashcard&&c.type!==ke.Quiz)throw new Error("Invalid backup file. One or more decks have incorrect structure.");return{decks:i,folders:[],deckSeries:[]}}throw new Error("The file is not a valid CogniFlow backup file.")}catch(i){throw console.error("Failed to parse backup file:",i),new Error(i instanceof Error?i.message:"Invalid JSON format")}},Eo=a=>{try{if(!a.trim())throw new Error("Pasted content is empty.");const i=JSON.parse(a);if(typeof i=="object"&&i!==null&&"seriesName"in i&&"levels"in i){if(typeof i.seriesName!="string"||typeof i.seriesDescription!="string"||!Array.isArray(i.levels))throw new Error("Invalid series format. Must have 'seriesName' (string), 'seriesDescription' (string), and a 'levels' (array).");for(const c of i.levels){if(typeof c.title!="string"||!Array.isArray(c.decks))throw new Error("Each level in the series must have a 'title' (string) and a 'decks' (array).");for(const m of c.decks)if(typeof m.name!="string"||typeof m.description!="string"||!Array.isArray(m.questions))throw new Error("Each deck in a level must be a valid quiz deck object with 'name', 'description', and 'questions' properties.")}return{type:"quiz_series",data:i}}if(Array.isArray(i)){const c=[];for(const m of i){if(typeof m.front!="string"||typeof m.back!="string")throw new Error("Each item in the array must be an object with 'front' and 'back' string properties.");c.push({front:m.front,back:m.back})}return{type:ke.Flashcard,data:c}}if(typeof i=="object"&&i!==null&&"questions"in i){if(typeof i.name!="string"||typeof i.description!="string"||!Array.isArray(i.questions))throw new Error("Quiz JSON must be an object with 'name' (string), 'description' (string), and 'questions' (array) properties.");for(const c of i.questions)if(typeof c.questionText!="string"||!Array.isArray(c.options)||typeof c.correctAnswerId!="string")throw new Error("Each question in a quiz must have 'questionText', an 'options' array, and a 'correctAnswerId'.");return{type:ke.Quiz,data:i}}throw new Error("Unsupported JSON structure. Expected an array of flashcards, a single quiz object, or a series object.")}catch(i){throw console.error("Failed to parse JSON:",i),new Error(i instanceof Error?i.message:"Invalid JSON format")}},Um=(a,i)=>{try{if(!a.trim())throw new Error("Pasted content is empty.");const c=JSON.parse(a);if(!Array.isArray(c))throw new Error("JSON must be an array of items.");if(c.length===0)return[];if(i===ke.Flashcard){const m=[];for(const f of c){if(typeof f.front!="string"||typeof f.back!="string")throw new Error("Each item in the array must be an object with 'front' and 'back' string properties.");m.push({front:f.front,back:f.back})}return m}else{const m=[];for(const f of c){if(typeof f.questionText!="string"||!Array.isArray(f.options)||typeof f.correctAnswerId!="string")throw new Error("Each question must have 'questionText', an 'options' array, and a 'correctAnswerId'.");m.push(f)}return m}}catch(c){throw console.error("Failed to parse items JSON:",c),new Error(c instanceof Error?c.message:"Invalid JSON format")}},Kd=a=>{const i=new Date;return i.setHours(0,0,0,0),a.map(c=>({id:crypto.randomUUID(),front:c.front,back:c.back,dueDate:i.toISOString(),interval:0,easeFactor:vn,masteryLevel:0}))},Do=a=>{const i=new Date;return i.setHours(0,0,0,0),a.map(c=>({...c,id:crypto.randomUUID(),dueDate:i.toISOString(),interval:0,easeFactor:vn,masteryLevel:0}))};function Xd(a){return new Promise((i,c)=>{const m=new Worker("/services/ankiImport.worker.ts",{type:"module"});m.onmessage=f=>{const{status:h,decks:p,error:N}=f.data;h==="success"?i(p):c(new Error(N)),m.terminate()},m.onerror=f=>{console.error("Worker error:",f),c(new Error(`Anki import worker failed: ${f.message}`)),m.terminate()},m.postMessage(a,[a])})}const $m=({isOpen:a,onClose:i,onAddDecks:c,onAddSeriesWithDecks:m})=>{const[f,h]=x.useState("create"),[p,N]=x.useState(""),[E,F]=x.useState(""),[j,I]=x.useState(""),[R,U]=x.useState(!1),Q=x.useRef(null),{addToast:_}=kt(),H=x.useRef(null);Lt(H,a);const V=x.useCallback(()=>{h("create"),N(""),F(""),I(""),U(!1)},[]),X=x.useCallback(()=>{V(),i()},[V,i]),Y=ee=>{F(ee);try{const J=Eo(ee);(J==null?void 0:J.type)===ke.Quiz?N(J.data.name):(J==null?void 0:J.type)==="quiz_series"&&N(J.data.seriesName)}catch{}},T=x.useCallback(()=>{if(f==="create"){if(!p.trim()){_("Please enter a deck name.","error");return}const ee={id:crypto.randomUUID(),name:p.trim(),type:ke.Flashcard,cards:[],description:`An empty deck created on ${pm()}`};c([ee]),_(`Deck "${ee.name}" created.`,"success"),X();return}if(!E){_("Please paste or upload content.","error");return}try{const ee=Eo(E);if(!ee)return;if(ee.type==="quiz_series"){const{seriesName:ae,seriesDescription:ie,levels:Ne}=ee.data,Te=[],De=Ne.map(oe=>{const w=oe.decks.map(d=>({id:crypto.randomUUID(),name:d.name,description:d.description,type:ke.Quiz,questions:Do(d.questions)}));return Te.push(...w),{title:oe.title,deckIds:w.map(d=>d.id)}}),G={id:crypto.randomUUID(),type:"series",name:ae,description:ie,levels:De,archived:!1};m(G,Te),X();return}if(!p.trim()){_("Please enter a deck name.","error");return}let J;if(ee.type===ke.Flashcard){const ae=Kd(ee.data);J={id:crypto.randomUUID(),name:p.trim(),type:ke.Flashcard,cards:ae,description:`${ae.length} imported flashcard${ae.length===1?"":"s"}.`}}else{const ae=Do(ee.data.questions);J={id:crypto.randomUUID(),name:p.trim(),description:ee.data.description,type:ke.Quiz,questions:ae}}c([J]),_(`Deck "${J.name}" imported successfully.`,"success"),X()}catch(ee){_(ee instanceof Error?ee.message:"Invalid JSON content.","error")}},[p,f,E,c,X,_,m]),M=async ee=>{if(ee){I(ee.name),U(!0);try{if(ee.name.toLowerCase().endsWith(".apkg")){N("");const J=await ee.arrayBuffer(),ae=await Xd(J);ae.length>0?(c(ae),_(`Successfully imported ${ae.length} deck(s) from ${ee.name}.`,"success"),X()):(_("No valid decks found in the Anki package.","info"),V())}else if(ee.name.toLowerCase().endsWith(".json")){const J=await ee.text();Y(J),U(!1),_("File loaded. Confirm name and import, or paste content directly.","info")}else _("Unsupported file type. Please upload a '.json' or '.apkg' file.","error"),I(""),U(!1)}catch(J){console.error("Failed to process file:",J),_(`An error occurred: ${J instanceof Error?J.message:"Unknown error"}`,"error"),V()}}},B=ee=>{var ae;const J=(ae=ee.target.files)==null?void 0:ae[0];J&&M(J),ee.target&&(ee.target.value="")},W=ee=>ee.preventDefault(),te=ee=>{var ae;ee.preventDefault();const J=(ae=ee.dataTransfer.files)==null?void 0:ae[0];J&&M(J)};if(!a)return null;const we=()=>{const ee=j.toLowerCase().endsWith(".apkg");if(f==="upload"&&ee)return n.jsx("div",{className:"text-gray-500 dark:text-gray-400 text-center py-12",children:"Anki file selected. Decks will be imported automatically."});switch(f){case"paste":return n.jsxs("div",{children:[n.jsx("textarea",{className:"w-full h-48 p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-gray-900 dark:text-gray-100",placeholder:'Paste JSON here... e.g., [{"front": "Q1", "back": "A1"}] or a Quiz/Series object.',value:E,onChange:J=>Y(J.target.value)}),n.jsxs(Xe,{href:"/instructions/json",onClick:i,className:"text-sm text-blue-500 dark:text-blue-400 hover:underline mt-2 inline-flex items-center gap-1",children:[n.jsx(L,{name:"help-circle",className:"w-4 h-4"}),"View JSON format guide"]})]});case"upload":return n.jsxs(n.Fragment,{children:[n.jsx("input",{type:"file",ref:Q,className:"hidden",accept:".json,application/json,.apkg,application/zip,application/x-zip-compressed",onChange:B}),n.jsxs("label",{onDragOver:W,onDrop:te,className:"flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-400 dark:border-gray-600 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:[n.jsx(L,{name:"upload-cloud",className:"w-10 h-10 text-gray-400 dark:text-gray-500 mb-2"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.jsx("span",{className:"font-semibold text-blue-500 dark:text-blue-400",onClick:J=>{var ae;J.preventDefault(),(ae=Q.current)==null||ae.click()},children:"Click to upload"})," or drag and drop"]}),n.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"JSON or Anki Package (.apkg)"}),j&&n.jsx("p",{className:"text-sm text-green-500 dark:text-green-400 mt-2 truncate",title:j,children:j})]})]});case"create":default:return n.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-center py-12",children:"Create an empty flashcard deck."})}},Ee=!(f==="upload"&&j.toLowerCase().endsWith(".apkg"));return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{ref:H,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[R&&n.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 flex flex-col items-center justify-center z-20",children:[n.jsx(xn,{}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mt-4",children:"Processing file..."})]}),n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:"Create / Import"}),n.jsx(q,{variant:"ghost",onClick:X,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[Ee&&n.jsxs("div",{children:[n.jsx("label",{htmlFor:"deck-name",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Deck / Series Name"}),n.jsx("input",{type:"text",id:"deck-name",value:p,onChange:ee=>N(ee.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g. Japanese Vocabulary"}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"For single deck or new deck creation. This is auto-filled when pasting a Series object."})]}),n.jsx("div",{className:"flex border-b border-gray-200 dark:border-gray-700",children:["create","paste","upload"].map(ee=>n.jsx("button",{onClick:()=>h(ee),className:`capitalize px-4 py-2 text-sm font-medium transition-colors ${f===ee?"border-b-2 border-blue-500 text-gray-900 dark:text-white":"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:ee==="create"?"Create Empty":ee},ee))}),n.jsx("div",{className:"mt-4",children:we()})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{variant:"secondary",onClick:X,className:"mr-2",children:"Cancel"}),n.jsx(q,{variant:"primary",onClick:T,disabled:R||f==="create"&&!p.trim()||f!=="create"&&!E&&!j,children:f==="create"?"Create Deck":"Import"})]})]})})},Sa=({isOpen:a,onClose:i,onConfirm:c,title:m,message:f,confirmText:h})=>{const[p,N]=x.useState(""),E=x.useRef(null);Lt(E,a),x.useEffect(()=>{a&&N("")},[a]);const F=!h||p===h,j=()=>{F&&(c(),i())};return a?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{ref:E,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md transform transition-all relative",role:"alertdialog","aria-modal":"true","aria-labelledby":"confirm-title","aria-describedby":"confirm-message",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{id:"confirm-title",className:"text-xl font-bold text-gray-900 dark:text-gray-100",children:m}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto","aria-label":"Close",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("p",{id:"confirm-message",className:"text-gray-600 dark:text-gray-400",children:f}),h&&n.jsxs("div",{children:[n.jsxs("label",{htmlFor:"confirm-input",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:['To confirm, type "',n.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:h}),'" below:']}),n.jsx("input",{id:"confirm-input",type:"text",value:p,onChange:I=>N(I.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-red-500 focus:outline-none"})]})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsx(q,{type:"button",variant:"danger",onClick:j,disabled:!F,children:"Confirm"})]})]})}):null},Bm=({isOpen:a,onClose:i,onRestore:c})=>{const[m,f]=x.useState(""),[h,p]=x.useState(null),[N,E]=x.useState(null),[F,j]=x.useState(!1),I=x.useRef(null),{addToast:R}=kt(),U=x.useRef(null);Lt(U,a);const Q=()=>{f(""),p(null),E(null),i()},_=async T=>{if(T){f(T.name),E(null),p("Processing file...");try{if(T.name.toLowerCase().endsWith(".json")){const M=await T.text(),B=zm(M);E(B),R(`Backup file "${T.name}" is valid and ready to restore.`,"success")}else R("Unsupported file type. Please upload a '.json' backup file.","error"),f("")}catch(M){console.error("Failed to process file:",M),R(`Restore failed: ${M instanceof Error?M.message:"Unknown error"}`,"error"),f("")}finally{p(null)}}},H=T=>{var B;if(h)return;const M=(B=T.target.files)==null?void 0:B[0];M&&_(M),T.target&&(T.target.value="")},V=T=>{var B;if(T.preventDefault(),h)return;const M=(B=T.dataTransfer.files)==null?void 0:B[0];M&&_(M)},X=T=>T.preventDefault(),Y=async()=>{if(N){j(!1),p("Restoring data...");try{await c(N),Q()}catch{p(null)}}};return a?n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{ref:U,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg overflow-hidden transform transition-all relative",children:[h&&n.jsxs("div",{className:"absolute inset-0 bg-white/80 dark:bg-gray-900/80 flex flex-col items-center justify-center z-20",children:[n.jsx(xn,{}),n.jsx("p",{className:"text-lg text-gray-700 dark:text-gray-300 mt-4",children:h})]}),n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Restore from Backup"}),n.jsx(q,{variant:"ghost",onClick:Q,className:"p-1 h-auto",disabled:!!h,children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-sm text-red-700 dark:text-red-200",children:n.jsxs("p",{children:[n.jsx("strong",{className:"font-bold",children:"Warning:"})," Restoring from a backup will merge and overwrite data. Decks and folders with the same ID will be replaced. This action cannot be undone."]})}),n.jsx("input",{type:"file",ref:I,className:"hidden",accept:".json,application/json",onChange:H,disabled:!!h}),n.jsxs("label",{onDragOver:X,onDrop:V,className:`flex flex-col items-center justify-center w-full h-48 border-2 border-dashed border-gray-300 dark:border-gray-600 rounded-lg transition-colors ${h?"cursor-not-allowed opacity-70":"cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700"}`,children:[n.jsx(L,{name:"upload-cloud",className:"w-10 h-10 text-gray-400 dark:text-gray-500 mb-2"}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.jsx("span",{className:"font-semibold text-blue-600 dark:text-blue-400",onClick:T=>{var M;h||(T.preventDefault(),(M=I.current)==null||M.click())},children:"Click to upload"})," or drag and drop"]}),n.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:"CogniFlow Backup JSON file"}),m&&n.jsx("p",{className:`text-sm mt-2 truncate ${N?"text-green-600 dark:text-green-400":"text-red-600 dark:text-red-400"}`,title:m,children:m})]})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{variant:"secondary",onClick:Q,className:"mr-2",disabled:!!h,children:"Cancel"}),n.jsx(q,{variant:"danger",onClick:()=>j(!0),disabled:!N||!!h,children:h?"Please wait...":"Restore"})]})]})}),F&&n.jsx(Sa,{isOpen:F,onClose:()=>j(!1),onConfirm:Y,title:"Confirm Restore",message:"Restoring from a backup will overwrite existing decks and folders with the same ID. This action cannot be undone. Are you sure you want to continue?"})]}):null},Hm=({isOpen:a,onClose:i,onReset:c,decks:m})=>{const[f,h]=x.useState(""),[p,N]=x.useState(""),{addToast:E}=kt(),F=x.useRef(null);Lt(F,a);const j=x.useMemo(()=>m.find(Q=>Q.id===f),[m,f]),I=j?p===j.name:!1,R=()=>{if(!I||!j){E("Confirmation text does not match.","error");return}c(j.id),i()},U=()=>{h(""),N(""),i()};return a?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsxs("div",{ref:F,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Reset Deck Progress"}),n.jsx(q,{type:"button",variant:"ghost",onClick:U,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsx("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-4 text-sm text-red-700 dark:text-red-200",children:n.jsxs("p",{children:[n.jsx("strong",{className:"font-bold",children:"Warning:"})," This will reset all spaced repetition data (due dates, intervals) for the selected deck. The cards themselves will not be deleted. This action cannot be undone."]})}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"deck-select",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Select Deck"}),n.jsxs("select",{id:"deck-select",value:f,onChange:Q=>{h(Q.target.value),N("")},className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",disabled:!0,children:"-- Select a deck --"}),m.map(Q=>n.jsx("option",{value:Q.id,children:Q.name},Q.id))]})]}),j&&n.jsxs("div",{className:"animate-fade-in",children:[n.jsxs("label",{htmlFor:"confirm-text",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:['To confirm, type "',n.jsx("strong",{className:"text-gray-900 dark:text-gray-100",children:j.name}),'" below:']}),n.jsx("input",{id:"confirm-text",type:"text",value:p,onChange:Q=>N(Q.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"})]})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:U,className:"mr-2",children:"Cancel"}),n.jsxs(q,{type:"button",variant:"danger",onClick:R,disabled:!I,children:[n.jsx(L,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Reset Progress"]})]})]})}):null},Qm=({folder:a,onClose:i,onSave:c})=>{const[m,f]=x.useState(""),{addToast:h}=kt(),p=x.useRef(null);Lt(p,!0),x.useEffect(()=>{a&&f(a.name)},[a]);const N=E=>{if(E.preventDefault(),!m.trim()){h("Folder name cannot be empty.","error");return}c({id:(a==null?void 0:a.id)||null,name:m.trim()})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:p,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-md transform transition-all relative",children:n.jsxs("form",{onSubmit:N,children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Folder":"Create New Folder"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsx("div",{className:"p-6 space-y-4",children:n.jsxs("div",{children:[n.jsx("label",{htmlFor:"folder-name",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Folder Name"}),n.jsx("input",{id:"folder-name",type:"text",value:m,onChange:E=>f(E.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., University Courses"})]})}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsxs(q,{type:"submit",variant:"primary",children:[n.jsx(L,{name:"save",className:"w-4 h-4 mr-2"}),a?"Save Changes":"Create Folder"]})]})]})})})},Zd=({series:a,onClose:i,onSave:c})=>{const[m,f]=x.useState(""),[h,p]=x.useState(""),{addToast:N}=kt(),E=x.useRef(null);Lt(E,!0);const F=a===null;x.useEffect(()=>{a?(f(a.name),p(a.description)):(f(""),p(""))},[a]);const j=I=>{if(I.preventDefault(),!m.trim()){N("Series name cannot be empty.","error");return}c({id:F?null:a.id,name:m.trim(),description:h.trim()})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:E,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-lg transform transition-all relative",children:n.jsxs("form",{onSubmit:j,children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:F?"Create New Series":"Edit Series"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"series-name",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Series Name"}),n.jsx("input",{id:"series-name",type:"text",value:m,onChange:I=>f(I.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., Introduction to Algebra"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"series-description",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Description"}),n.jsx("textarea",{id:"series-description",value:h,onChange:I=>p(I.target.value),rows:3,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"A collection of decks covering core concepts."})]})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsxs(q,{type:"submit",variant:"primary",children:[n.jsx(L,{name:"save",className:"w-4 h-4 mr-2"}),F?"Create Series":"Save Changes"]})]})]})})})},qm=({pullDistance:a,isRefreshing:i,threshold:c})=>{if(i)return n.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-50 transition-all duration-300",children:n.jsx(xn,{size:"md"})});if(a<=0)return null;const m=Math.min(a/c,1),f=m>=1,h=20,p=2*Math.PI*h,N=p-m*p;return n.jsx("div",{className:"fixed top-0 left-0 right-0 h-20 flex items-center justify-center z-10 pointer-events-none",style:{transform:`translateY(${Math.min(a,c*1.5)-80}px)`,opacity:Math.min(a/(c/2),1)},children:n.jsxs("div",{className:"relative w-12 h-12 flex items-center justify-center bg-white dark:bg-gray-800 rounded-full shadow-lg",children:[n.jsxs("svg",{className:"absolute w-full h-full transform -rotate-90",viewBox:"0 0 44 44",children:[n.jsx("circle",{className:"text-gray-300/50 dark:text-gray-600/50",stroke:"currentColor",strokeWidth:"4",fill:"transparent",r:h,cx:"22",cy:"22"}),n.jsx("circle",{className:"text-blue-500",stroke:"currentColor",strokeWidth:"4",strokeLinecap:"round",fill:"transparent",r:h,cx:"22",cy:"22",style:{strokeDasharray:p,strokeDashoffset:N,transition:f?"stroke-dashoffset 0.1s linear":"none"}})]}),n.jsx(L,{name:f?"refresh-ccw":"arrow-down",className:`w-6 h-6 transition-colors duration-200 ${f?"text-blue-500":"text-gray-500 dark:text-gray-400"}`})]})})};function Wm(a,i){switch(i.type){case"SET_LOADING":return{...a,isLoading:i.payload};case"LOAD_DATA":return{...a,...i.payload,isLoading:!1};case"ADD_DECKS":{const c=new Map(a.decks.map(m=>[m.id,m]));return i.payload.forEach(m=>c.set(m.id,m)),{...a,decks:Array.from(c.values())}}case"RESTORE_DATA":{const{decks:c,folders:m,deckSeries:f}=i.payload,h=new Map(a.decks.map(E=>[E.id,E]));c.forEach(E=>h.set(E.id,E));const p=new Map(a.folders.map(E=>[E.id,E]));m.forEach(E=>p.set(E.id,E));const N=new Map(a.deckSeries.map(E=>[E.id,E]));return f.forEach(E=>N.set(E.id,E)),{...a,decks:Array.from(h.values()),folders:Array.from(p.values()),deckSeries:Array.from(N.values())}}case"DELETE_DECK":return{...a,decks:a.decks.filter(c=>c.id!==i.payload),deckSeries:a.deckSeries.map(c=>({...c,levels:c.levels.map(m=>({...m,deckIds:m.deckIds.filter(f=>f!==i.payload)})).filter(m=>m.deckIds.length>0)}))};case"UPDATE_DECK":return{...a,decks:a.decks.map(c=>c.id===i.payload.id?i.payload:c)};case"BULK_UPDATE_DECKS":{const c=new Map(a.decks.map(m=>[m.id,m]));return i.payload.forEach(m=>c.set(m.id,m)),{...a,decks:Array.from(c.values())}}case"ADD_FOLDER":return{...a,folders:[...a.folders,i.payload]};case"UPDATE_FOLDER":return{...a,folders:a.folders.map(c=>c.id===i.payload.id?i.payload:c)};case"DELETE_FOLDER":return{...a,folders:a.folders.filter(c=>c.id!==i.payload),decks:a.decks.map(c=>c.folderId===i.payload?{...c,folderId:null}:c)};case"ADD_SERIES":return{...a,deckSeries:[...a.deckSeries,i.payload]};case"ADD_SERIES_WITH_DECKS":{const{series:c,decks:m}=i.payload,f=new Map(a.decks.map(h=>[h.id,h]));return m.forEach(h=>f.set(h.id,h)),{...a,decks:Array.from(f.values()),deckSeries:[...a.deckSeries,c]}}case"UPDATE_SERIES":return{...a,deckSeries:a.deckSeries.map(c=>c.id===i.payload.id?i.payload:c)};case"DELETE_SERIES":return{...a,deckSeries:a.deckSeries.filter(c=>c.id!==i.payload)};default:return a}}const Vm={decks:[],folders:[],deckSeries:[],isLoading:!0},Jm=()=>x.useReducer(Wm,Vm),Ft=(a,i,c)=>{const m=new Date;m.setHours(0,0,0,0);const f=i.map(p=>({id:crypto.randomUUID(),text:p.text,explanation:p.explanation})),h=f[i.findIndex(p=>p.correct)];if(!h)throw new Error(`No correct option specified for question: "${a}"`);return{id:crypto.randomUUID(),questionType:"multipleChoice",questionText:a,tags:["nature","sample"],detailedExplanation:c,options:f,correctAnswerId:h.id,dueDate:m.toISOString(),interval:0,easeFactor:vn,suspended:!1,masteryLevel:0,lastReviewed:void 0}},Ym=()=>{const a={id:crypto.randomUUID(),name:"Level 1.1: Simple Addition",description:"Practice basic addition problems.",type:ke.Quiz,questions:[Ft("What is 1 + 1?",[{text:"2",correct:!0},{text:"1"},{text:"3"}],"1 plus 1 equals 2."),Ft("What is 2 + 3?",[{text:"5",correct:!0},{text:"4"},{text:"6"}],"2 plus 3 equals 5."),Ft("What is 5 + 4?",[{text:"9",correct:!0},{text:"8"},{text:"10"}],"5 plus 4 equals 9.")]},i={id:crypto.randomUUID(),name:"Level 1.2: Simple Subtraction",description:"Practice basic subtraction problems.",type:ke.Quiz,questions:[Ft("What is 5 - 2?",[{text:"3",correct:!0},{text:"2"},{text:"4"}],"5 minus 2 equals 3."),Ft("What is 10 - 4?",[{text:"6",correct:!0},{text:"5"},{text:"7"}],"10 minus 4 equals 6.")]},c={id:crypto.randomUUID(),name:"Level 2.1: Simple Multiplication",description:"Practice basic multiplication problems.",type:ke.Quiz,questions:[Ft("What is 2 * 3?",[{text:"6",correct:!0},{text:"5"},{text:"8"}],"2 times 3 is 6."),Ft("What is 4 * 5?",[{text:"20",correct:!0},{text:"15"},{text:"25"}],"4 times 5 is 20.")]},m=[a,i,c];return{series:{id:crypto.randomUUID(),type:"series",name:"Sample: Basic Math Series",description:"A sample series to demonstrate the progressive learning path feature. Complete each deck to unlock the next!",levels:[{title:"Level 1: Fundamentals",deckIds:[a.id,i.id]},{title:"Level 2: Next Steps",deckIds:[c.id]}]},decks:m}},Gm=()=>{const a=[Ft("Which process allows plants to convert light energy into chemical energy?",[{text:"Respiration"},{text:"Photosynthesis",correct:!0},{text:"Transpiration"},{text:"Germination"}],"Photosynthesis is the vital process used by plants, algae, and certain bacteria to harness energy from sunlight and turn it into chemical energy in the form of glucose."),Ft("What is the largest rainforest in the world?",[{text:"The Congo Rainforest"},{text:"The Valdivian Temperate Rainforest"},{text:"The Daintree Rainforest"},{text:"The Amazon Rainforest",correct:!0}],"The Amazon Rainforest is the world's largest tropical rainforest, famed for its biodiversity. It spans across nine countries in South America."),Ft("What type of rock is formed from the cooling and solidification of magma or lava?",[{text:"Igneous Rock",correct:!0},{text:"Sedimentary Rock"},{text:"Metamorphic Rock"},{text:"Sandstone"}],"Igneous rock is formed through the cooling and solidification of magma (molten rock below the surface) or lava (molten rock on the surface). Examples include granite and basalt."),Ft("Which layer of the Earth's atmosphere is closest to the surface?",[{text:"Stratosphere"},{text:"Mesosphere"},{text:"Troposphere",correct:!0},{text:"Thermosphere"}],"The Troposphere is the lowest layer of Earth's atmosphere, and is also where nearly all weather conditions take place. It contains about 75% of the atmosphere's mass."),Ft("What is the name for the process of water movement through a plant and its evaporation from aerial parts, such as leaves, stems and flowers?",[{text:"Condensation"},{text:"Precipitation"},{text:"Transpiration",correct:!0},{text:"Photosynthesis"}],"Transpiration is essentially evaporation of water from plant leaves. It is a key part of the water cycle, and an important process in plant life.")];return{id:crypto.randomUUID(),name:"Sample: Wonders of Nature",description:"A sample quiz deck to introduce you to CogniFlow. Test your knowledge about the natural world!",type:ke.Quiz,questions:a,lastOpened:new Date().toISOString()}};function Km(a,i){const c=new Date(a);return c.setDate(c.getDate()+i),c}const Xm=(a,i)=>{const c=new Date;c.setHours(0,0,0,0);let m,f=a.easeFactor;if(f=a.easeFactor+_m[i],f<Pd&&(f=Pd),i===Je.Again)m=Fm;else if(a.interval===0)switch(i){case Je.Hard:m=1;break;case Je.Good:m=3;break;case Je.Easy:m=5;break;default:m=1}else{let N=1;i===Je.Hard&&(N=Om),i===Je.Easy&&(N=Lm),m=Math.ceil(a.interval*f*N)}const h=Km(c,m),p=Math.min(1,Math.log1p(m)/Math.log1p(90));return{...a,interval:m,easeFactor:f,dueDate:h.toISOString(),lastReviewed:c.toISOString(),masteryLevel:p}},Rd=a=>{const i=new Date;return i.setHours(0,0,0,0),{...a,dueDate:i.toISOString(),interval:0,easeFactor:vn,suspended:!1,masteryLevel:0,lastReviewed:void 0}},Zt=a=>{const i=a.masteryLevel||0;if(i===0||!a.lastReviewed||a.suspended)return 0;const c=(a.interval||1)*2,m=new Date(a.lastReviewed),h=Math.max(0,(new Date().getTime()-m.getTime())/(1e3*60*60*24));if(h<=0)return i;const p=Math.pow(.5,h/c);return i*p},Zm=({state:a,dispatch:i,sessionsToResume:c,setSessionsToResume:m,seriesProgress:f,setSeriesProgress:h,setGeneralStudyDeck:p,openConfirmModal:N,setFolderToEdit:E,setSeriesToEdit:F})=>{const{addToast:j}=kt(),{navigate:I}=dr(),R=x.useCallback(async(y,k)=>{i({type:"UPDATE_DECK",payload:y}),k!=null&&k.silent||(k!=null&&k.toastMessage?j(k.toastMessage,"success"):y.archived?j(`Deck "${y.name}" archived.`,"success"):y.archived===!1?j(`Deck "${y.name}" unarchived.`,"success"):j(`Deck "${y.name}" updated.`,"success"));try{await xm(y)}catch(v){console.error("Failed to update deck:",v),j("There was an error syncing the deck update.","error")}},[j,i]),U=x.useCallback(async y=>{try{i({type:"ADD_DECKS",payload:y}),await ns(y)}catch(k){console.error("Failed to add decks:",k),j("There was an error saving the new deck(s).","error")}},[j,i]),Q=x.useCallback(async y=>{const k=a.decks.find(v=>v.id===y);if(k){const v={...k,lastOpened:new Date().toISOString()};await R(v,{silent:!0})}},[a.decks,R]),_=x.useCallback(async(y,k)=>{const v=y.replace("_flip","");if(c.has(y)){const D=new Set(c);D.delete(y),m(D)}localStorage.removeItem(`session_deck_${v}`),localStorage.removeItem(`session_deck_${v}_flip`),y==="general-study-deck"&&p(null),I(k?`/series/${k}`:"/")},[I,c,m,p]),H=x.useCallback(async()=>{const y=Gm();await U([y]),j(`Sample deck "${y.name}" created!`,"success")},[U,j]),V=x.useCallback(async()=>{const{series:y,decks:k}=Ym();try{i({type:"ADD_SERIES_WITH_DECKS",payload:{series:y,decks:k}}),await Promise.all([ns(k),pa([y])]),j(`Sample series "${y.name}" created!`,"success")}catch(v){console.error("Failed to create sample series:",v),j("There was an error creating the sample series.","error")}},[j,i]),X=x.useCallback(async y=>{try{i({type:"RESTORE_DATA",payload:y}),await Promise.all([ns(y.decks),km(y.folders),pa(y.deckSeries)]),j("Successfully restored data.","success")}catch(k){throw console.error("Failed to restore from backup:",k),j("There was an error restoring from the backup file.","error"),k}},[j,i]),Y=x.useCallback(async y=>{const k=a.decks.find(D=>D.id===y);if(!k)return;const v={...k,deletedAt:new Date().toISOString(),archived:!1};await R(v,{toastMessage:`Moved "${k.name}" to Trash.`})},[a.decks,R]),T=x.useCallback(async(y,k)=>{const v=a.decks.find(se=>se.id===y),D=a.folders.find(se=>se.id===k);if(!v||v.folderId===k)return;const $={...v,folderId:k},A=D?`"${D.name}"`:"the ungrouped area";await R($,{toastMessage:`Moved "${v.name}" to ${A}.`})},[a.decks,a.folders,R]),M=x.useCallback(async(y,k,v)=>{const D=a.decks.find(A=>A.id===y);if(!D)return;let $;if(D.type===ke.Flashcard?$={...D,cards:D.cards.map(A=>A.id===k.id?k:A)}:$={...D,questions:D.questions.map(A=>A.id===k.id?{...A,dueDate:k.dueDate,interval:k.interval,easeFactor:k.easeFactor,suspended:k.suspended,masteryLevel:k.masteryLevel,lastReviewed:k.lastReviewed}:A)},await R($,{silent:!0}),v){const A=$,de=(A.type===ke.Flashcard?A.cards:A.questions).some(me=>!me.suspended&&me.interval===0),re=(f.get(v)||new Set).has(y);!de&&!re&&h(me=>{const ye=new Map(me),he=new Set(ye.get(v)||[]);he.add(y),ye.set(v,he);try{localStorage.setItem(`series-progress-${v}`,JSON.stringify(Array.from(he)));const Ie=a.deckSeries.find(Ze=>Ze.id===v),Ue=(Ie==null?void 0:Ie.levels.flatMap(Ze=>Ze.deckIds))||[];Ue.indexOf(y)===Ue.length-1&&Ue.length>0?j(`Congratulations! You've completed the series: "${Ie==null?void 0:Ie.name}"!`,"success"):j(`Deck "${A.name}" completed! Next chapter unlocked.`,"success")}catch(Ie){console.error("Could not save series progress",Ie)}return ye})}},[a.decks,R,j,f,h,a.deckSeries]),B=x.useCallback(async y=>{const k=a.decks.find(D=>D.id===y);if(!k)return;let v;k.type===ke.Flashcard?v={...k,cards:k.cards.map(D=>Rd(D))}:v={...k,questions:k.questions.map(D=>Rd(D))},await R(v,{toastMessage:`Progress for deck "${v.name}" has been reset.`})},[a.decks,R]),W=async()=>{try{const y=await bm();y&&j(`Data exported to ${y}`,"success")}catch(y){const k=y instanceof Error?y.message:"Unknown error";j(`Export failed: ${k}`,"error")}},te=x.useCallback(()=>{const y=new Set;a.deckSeries.forEach(A=>{var se;if(!A.archived&&!A.deletedAt){const de=((se=f.get(A.id))==null?void 0:se.size)||0;let re=0;A.levels.forEach(me=>{me.deckIds.forEach(()=>{re<=de&&y.add(A.id),re++})})}});const k=new Set;a.deckSeries.forEach(A=>{A.levels.forEach(se=>se.deckIds.forEach(de=>k.add(de)))});const v=new Date;v.setHours(23,59,59,999);const D=a.decks.filter(A=>!(A.type!==ke.Quiz||A.archived||A.deletedAt||k.has(A.id)&&!y.has(A.id))).flatMap(A=>A.questions.filter(se=>!se.suspended&&new Date(se.dueDate)<=v).map(se=>({...se,originalDeckId:A.id,originalDeckName:A.name}))).sort(()=>Math.random()-.5),$={id:"general-study-deck",name:"General Study Session",type:ke.Quiz,questions:D};p($),I("/study/general")},[a.decks,a.deckSeries,f,I,p]),we=x.useCallback(async y=>{var me;const k=a.deckSeries.find(ye=>ye.id===y);if(!k)return;const v=new Set,D=((me=f.get(k.id))==null?void 0:me.size)||0;let $=0;k.levels.forEach(ye=>{ye.deckIds.forEach(he=>{$<=D&&v.add(he),$++})});const A=new Date;A.setHours(23,59,59,999);const de=k.levels.flatMap(ye=>ye.deckIds).map(ye=>a.decks.find(he=>he.id===ye)).filter(ye=>!!(ye&&ye.type===ke.Quiz)).filter(ye=>v.has(ye.id)).flatMap(ye=>ye.questions.filter(he=>!he.suspended&&new Date(he.dueDate)<=A).map(he=>({...he,originalDeckId:ye.id,originalDeckName:ye.name}))).sort(()=>Math.random()-.5),re={id:"general-study-deck",name:`${k.name} - Study Session`,type:ke.Quiz,questions:de};p(re),I(`/study/general?seriesId=${y}`)},[a.decks,a.deckSeries,f,I,p]),Ee=x.useCallback(async y=>{if(y.id){const k={id:y.id,name:y.name};i({type:"UPDATE_FOLDER",payload:k}),j(`Folder "${k.name}" updated.`,"success"),await wm(k)}else{const k={id:crypto.randomUUID(),name:y.name};i({type:"ADD_FOLDER",payload:k}),j(`Folder "${k.name}" created.`,"success"),await vm(k)}E(null)},[j,i,E]),ee=x.useCallback(async y=>{const k=a.folders.find(v=>v.id===y);k&&N({title:"Delete Folder",message:`Are you sure you want to delete folder "${k.name}"? Decks inside will not be deleted.`,onConfirm:async()=>{i({type:"DELETE_FOLDER",payload:y}),j(`Folder "${k.name}" deleted.`,"success");const v=a.decks.filter(D=>D.folderId===y).map(D=>({...D,folderId:null}));v.length>0&&await Id(v),await jm(y)}})},[a.decks,a.folders,j,i,N]),J=x.useCallback(async(y,k)=>{i({type:"UPDATE_SERIES",payload:y}),k!=null&&k.silent||(k!=null&&k.toastMessage?j(k.toastMessage,"success"):y.archived?j(`Series "${y.name}" archived.`,"success"):y.archived===!1?j(`Series "${y.name}" unarchived.`,"success"):j(`Series "${y.name}" updated.`,"success"));try{await Md(y)}catch(v){console.error("Failed to update series:",v),j("There was an error updating the series.","error")}},[j,i]),ae=x.useCallback(async y=>{if(y.id){const k=a.deckSeries.find(v=>v.id===y.id);if(k){const v={...k,name:y.name,description:y.description};await J(v)}}else{const k={id:crypto.randomUUID(),type:"series",name:y.name,description:y.description,levels:[]};i({type:"ADD_SERIES",payload:k}),j(`Series "${k.name}" created.`,"success"),await pa([k])}F(null)},[j,a.deckSeries,J,i,F]),ie=x.useCallback(async y=>{const k=a.deckSeries.find(A=>A.id===y);if(!k)return;const v=k.levels.flatMap(A=>A.deckIds),D=a.decks.filter(A=>v.includes(A.id)).map(A=>({...A,deletedAt:new Date().toISOString(),archived:!1})),$={...k,deletedAt:new Date().toISOString(),archived:!1};i({type:"BULK_UPDATE_DECKS",payload:D}),i({type:"UPDATE_SERIES",payload:$}),j(`Series "${k.name}" and its ${D.length} deck(s) moved to Trash.`,"success");try{await Promise.all([Id(D),Md($)])}catch(A){console.error("Failed to move series and its decks to trash:",A),j("Error moving series to trash.","error")}},[a.deckSeries,a.decks,i,j]),Ne=x.useCallback(async(y,k)=>{const v=a.deckSeries.find(A=>A.id===y);if(!v)return;await U([k]);const D={title:k.name,deckIds:[k.id]},$={...v,levels:[...v.levels,D]};await J($)},[a.deckSeries,U,J]),Te=x.useCallback(async(y,k)=>{try{i({type:"ADD_SERIES_WITH_DECKS",payload:{series:y,decks:k}}),await Promise.all([ns(k),pa([y])]),j(`Successfully imported series "${y.name}" with ${k.length} decks.`,"success")}catch(v){console.error("Failed to create series with decks:",v),j("There was an error creating the new series.","error")}},[i,j]),De=x.useCallback(async y=>{const k=a.decks.find($=>$.id===y);if(!k)return;const{deletedAt:v,...D}=k;await R(D,{toastMessage:`Restored deck "${D.name}".`})},[a.decks,R]),G=x.useCallback(async y=>{const k=a.deckSeries.find($=>$.id===y);if(!k)return;const{deletedAt:v,...D}=k;await J(D,{toastMessage:`Restored series "${D.name}".`})},[a.deckSeries,J]),oe=x.useCallback(async y=>{var k;try{const v=(k=a.decks.find(D=>D.id===y))==null?void 0:k.name;i({type:"DELETE_DECK",payload:y}),j(`Deck "${v||"Deck"}" permanently deleted.`,"success"),await Co(y)}catch(v){console.error("Failed to permanently delete deck:",v),j("There was an error permanently deleting the deck.","error")}},[a.decks,i,j]),w=x.useCallback(async y=>{const k=a.deckSeries.find($=>$.id===y);if(!k)return;const v=k.levels.flatMap($=>$.deckIds),D=k.name;try{v.forEach($=>{i({type:"DELETE_DECK",payload:$})}),i({type:"DELETE_SERIES",payload:y}),j(`Series "${D}" and its ${v.length} deck(s) permanently deleted.`,"success"),await Promise.all([...v.map($=>Co($)),Jd(y)])}catch($){console.error("Failed to permanently delete series and its decks:",$),j("There was an error permanently deleting the series.","error")}},[a.deckSeries,i,j]),d=x.useCallback(()=>{N({title:"Factory Reset",message:"Are you sure you want to perform a factory reset? All of your decks, folders, series, and settings will be permanently deleted. This action cannot be undone.",confirmText:"RESET",onConfirm:async()=>{try{j("Resetting application...","info"),navigator.serviceWorker&&navigator.serviceWorker.controller&&(navigator.serviceWorker.controller.postMessage({type:"CLEAR_APP_CACHE"}),navigator.serviceWorker.controller.postMessage({type:"CLEAR_CDN_CACHE"})),await Nm();const y=[];for(let k=0;k<localStorage.length;k++){const v=localStorage.key(k);v&&(v.startsWith("cogniflow-")||v.startsWith("session_deck_")||v.startsWith("series-progress-"))&&y.push(v)}y.forEach(k=>localStorage.removeItem(k)),setTimeout(()=>{window.location.reload()},1500)}catch(y){console.error("Factory reset failed:",y);const k=y instanceof Error?y.message:"Factory reset failed. Please try again.";j(k,"error")}}})},[j,N]),b=x.useCallback(()=>{const{deckSeries:y,decks:k}=a;if(!y.length||!k.length)return;let v=!1;const D=new Map(f);for(const $ of y){if($.archived||$.deletedAt)continue;const A=new Set(D.get($.id)||[]);let se=!1;const de=$.levels.flatMap(re=>re.deckIds);for(const re of de){if(A.has(re))continue;const me=k.find(Ie=>Ie.id===re);if(!me)continue;(me.type===ke.Quiz?me.questions:me.cards).some(Ie=>!Ie.suspended&&Ie.interval===0)||(A.add(re),se=!0)}se&&(D.set($.id,A),v=!0)}v&&(h(D),D.forEach(($,A)=>{try{localStorage.setItem(`series-progress-${A}`,JSON.stringify(Array.from($)))}catch(se){console.error(`Could not save reconciled series progress for ${A}`,se)}}),j("Unlocked decks based on your progress.","info"))},[a.decks,a.deckSeries,f,h,j]);return{updateLastOpened:Q,handleSessionEnd:_,handleAddDecks:U,handleCreateSampleDeck:H,handleCreateSampleSeries:V,handleRestoreData:X,handleDeleteDeck:Y,handleUpdateDeck:R,handleMoveDeck:T,handleItemReviewed:M,handleResetDeckProgress:B,handleExportData:W,handleStartGeneralStudy:te,handleStartSeriesStudy:we,handleSaveFolder:Ee,handleDeleteFolder:ee,handleUpdateSeries:J,handleSaveSeries:ae,handleDeleteSeries:ie,handleAddDeckToSeries:Ne,handleAddSeriesWithDecks:Te,handleRestoreDeck:De,handleRestoreSeries:G,handleDeleteDeckPermanently:oe,handleDeleteSeriesPermanently:w,handleFactoryReset:d,reconcileSeriesProgress:b}},eu=x.createContext(void 0),Fd=(a,i)=>{if(typeof window>"u")return i;try{const c=window.localStorage.getItem(a);return c?JSON.parse(c)===!0:i}catch(c){return console.error(`Error reading ${a} from localStorage`,c),i}},eh=({children:a})=>{const[i,c]=x.useState(()=>Fd("cogniflow-disableAnimations",!1)),[m,f]=x.useState(()=>Fd("cogniflow-hapticsEnabled",!0)),h=x.useCallback(E=>{c(E);try{window.localStorage.setItem("cogniflow-disableAnimations",JSON.stringify(E))}catch(F){console.error("Error writing animation setting to localStorage",F)}},[]),p=x.useCallback(E=>{f(E);try{window.localStorage.setItem("cogniflow-hapticsEnabled",JSON.stringify(E))}catch(F){console.error("Error writing haptics setting to localStorage",F)}},[]),N={disableAnimations:i,setDisableAnimations:h,hapticsEnabled:m,setHapticsEnabled:p};return n.jsx(eu.Provider,{value:N,children:a})},Ca=()=>{const a=x.useContext(eu);if(a===void 0)throw new Error("useSettings must be used within a SettingsProvider");return a},ga=120,th=()=>{const[a,i]=x.useState({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}),{hapticsEnabled:c}=Ca(),m=x.useCallback(p=>{window.scrollY===0?i(N=>({...N,startY:p.touches[0].clientY,pullDistance:0,isRefreshing:!1,thresholdMet:!1})):i(N=>({...N,startY:0}))},[]),f=x.useCallback(p=>{if(a.startY===0)return;const N=p.touches[0].clientY-a.startY;N>0&&(p.preventDefault(),N>ga&&!a.thresholdMet&&c&&"vibrate"in navigator&&navigator.vibrate(50),i(F=>({...F,pullDistance:N,thresholdMet:N>ga})))},[a.startY,a.thresholdMet,c]),h=x.useCallback(()=>{a.startY!==0&&(a.pullDistance>ga?(i(p=>({...p,isRefreshing:!0})),setTimeout(()=>{window.location.reload()},500)):i({startY:0,pullDistance:0,isRefreshing:!1,thresholdMet:!1}))},[a.startY,a.pullDistance]);return{pullToRefreshState:a,handleTouchStart:m,handleTouchMove:f,handleTouchEnd:h,REFRESH_THRESHOLD:ga}},rh=({onOpenMenu:a,onOpenCommandPalette:i,activeDeck:c})=>{const{path:m,navigate:f}=dr();let h;const[p]=m.split("?"),N=n.jsx("span",{className:"text-xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"CogniFlow"}),E=c==null?void 0:c.id;if(p.startsWith("/decks/")&&p.endsWith("/study")){const F=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId"),j=E?`/decks/${E}?${F?`seriesId=${F}`:""}`:F?`/series/${F}`:"/decks";h=n.jsxs(q,{variant:"ghost",onClick:()=>f(j),className:"flex items-center space-x-2 -ml-3",children:[n.jsx(L,{name:"chevron-left"}),n.jsx("span",{className:"truncate",children:(c==null?void 0:c.name)||"Back"})]})}else if(p.startsWith("/decks/")){const F=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId");F?h=n.jsxs(q,{variant:"ghost",onClick:()=>f(`/series/${F}`),className:"flex items-center space-x-2 -ml-3",children:[n.jsx(L,{name:"chevron-left"}),n.jsx("span",{children:"Back to Series"})]}):h=n.jsxs(q,{variant:"ghost",onClick:()=>f("/decks"),className:"flex items-center space-x-2 -ml-3",children:[n.jsx(L,{name:"chevron-left"}),n.jsx("span",{children:"All Decks"})]})}else p.startsWith("/series/")?h=n.jsxs(q,{variant:"ghost",onClick:()=>f("/series"),className:"flex items-center space-x-2 -ml-3",children:[n.jsx(L,{name:"chevron-left"}),n.jsx("span",{children:"All Series"})]}):p==="/study/general"||["/settings","/instructions/json","/archive","/trash","/decks","/series"].includes(p)?h=n.jsxs(q,{variant:"ghost",onClick:()=>f("/"),className:"flex items-center space-x-2 -ml-3",children:[n.jsx(L,{name:"chevron-left"}),N]}):h=n.jsx(Xe,{href:"/",className:"no-underline",children:n.jsx("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"CogniFlow"})});return n.jsx("header",{className:"bg-white/80 dark:bg-gray-800/30 backdrop-blur-sm sticky top-0 z-20 border-b border-gray-200 dark:border-gray-700",children:n.jsxs("nav",{className:"container mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16",children:[n.jsx("div",{className:"flex-1 min-w-0",children:h}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(q,{variant:"ghost",onClick:i,className:"p-1 h-auto","aria-label":"Open command palette",children:n.jsx(L,{name:"search"})}),n.jsx(q,{variant:"ghost",onClick:a,className:"p-1 h-auto","aria-label":"Open menu",children:n.jsx(L,{name:"menu"})})]})]})})},bo=({html:a,className:i})=>{const c=`html-container-${ja.useId()}`;return ja.useEffect(()=>{const m=document.getElementById(c);if(!m)return;const f=Array.from(m.getElementsByTagName("script")),h=[];return f.forEach(p=>{const N=document.createElement("script");Array.from(p.attributes).forEach(E=>{N.setAttribute(E.name,E.value)}),N.text=p.text,document.body.appendChild(N),h.push(N)}),()=>{h.forEach(p=>document.body.removeChild(p))}},[a,c]),n.jsx("div",{id:c,className:i,dangerouslySetInnerHTML:{__html:a}})},er=({level:a})=>{const i=Math.round(a*100);let c="bg-red-500",m="Novice";return i>85?(c="bg-green-500",m="Mastered"):i>65?(c="bg-teal-500",m="Proficient"):i>40?(c="bg-blue-500",m="Familiar"):i>15&&(c="bg-orange-500",m="Learning"),n.jsxs("div",{className:"w-full",children:[n.jsxs("div",{className:"flex justify-between mb-1 text-xs",children:[n.jsxs("span",{className:"font-semibold text-gray-600 dark:text-gray-300",children:["Mastery: ",m]}),n.jsxs("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:[i,"%"]})]}),n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:n.jsx("div",{className:`${c} h-2 rounded-full transition-all duration-500`,style:{width:`${i}%`},role:"progressbar","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`Mastery level: ${m}, ${i}%`})})]})},nh=({card:a,isFlipped:i})=>{const{disableAnimations:c}=Ca(),m="text-2xl text-center text-gray-900 dark:text-gray-100 break-words prose dark:prose-invert max-w-none prose-img:mx-auto prose-img:max-h-48 prose-audio:mx-auto",f=Zt(a);return c?n.jsxs("div",{className:"w-full h-80",children:[a.css&&n.jsx("div",{dangerouslySetInnerHTML:{__html:a.css}}),n.jsxs("div",{className:"w-full h-full bg-gray-100 dark:bg-gray-800 rounded-lg shadow-lg flex flex-col justify-between p-6 border border-gray-200 dark:border-gray-700 overflow-y-auto",children:[n.jsx("div",{className:"flex-grow flex items-center justify-center",children:n.jsx(bo,{html:i?a.back:a.front,className:m})}),i&&n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex-shrink-0",children:n.jsx(er,{level:f})})]})]}):n.jsxs("div",{className:"w-full h-80 perspective-1000",children:[a.css&&n.jsx("div",{dangerouslySetInnerHTML:{__html:a.css}}),n.jsxs("div",{className:`relative w-full h-full transition-transform duration-700 transform-style-preserve-3d ${i?"rotate-y-180":""}`,children:[n.jsx("div",{className:"absolute w-full h-full backface-hidden bg-gray-100 dark:bg-gray-800 rounded-lg shadow-lg flex items-center justify-center p-6 border border-gray-200 dark:border-gray-700 overflow-y-auto",children:n.jsx(bo,{html:a.front,className:m})}),n.jsxs("div",{className:"absolute w-full h-full backface-hidden bg-gray-100 dark:bg-gray-800 rounded-lg shadow-lg flex flex-col justify-between p-6 border border-gray-200 dark:border-gray-700 rotate-y-180 overflow-y-auto",children:[n.jsx("div",{className:"flex-grow flex items-center justify-center",children:n.jsx(bo,{html:a.back,className:m})}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-600 flex-shrink-0",children:n.jsx(er,{level:f})})]})]})]})},sh=({question:a,selectedAnswerId:i,onSelectAnswer:c,deckName:m})=>{const f=i!==null,[h,p]=x.useState(!1),[N,E]=x.useState(null),[F,j]=x.useState(!1),I=x.useMemo(()=>{const Q=[...a.options];for(let _=Q.length-1;_>0;_--){const H=Math.floor(Math.random()*(_+1));[Q[_],Q[H]]=[Q[H],Q[_]]}return Q},[a.id]),R=Q=>{let _="flex items-start text-left w-full p-4 rounded-lg border-2 transition-all duration-200";if(f){const H=Q.id===a.correctAnswerId,V=Q.id===i;return H?`${_} bg-green-500/10 dark:bg-green-500/30 border-green-500 cursor-default`:V?`${_} bg-red-500/10 dark:bg-red-500/30 border-red-500 cursor-default`:`${_} bg-gray-100/50 dark:bg-gray-800/50 border-gray-200 dark:border-gray-700 opacity-60 cursor-default`}return`${_} bg-white dark:bg-gray-800 border-gray-300 dark:border-gray-600 hover:border-blue-500 hover:bg-gray-100 dark:hover:bg-gray-700/50`},U=Zt(a);return n.jsxs("div",{className:"bg-white/50 dark:bg-gray-800/50 rounded-lg p-6 w-full border border-gray-200 dark:border-gray-700",children:[m&&n.jsxs("div",{className:"mb-3 text-xs text-gray-500 dark:text-gray-400 font-medium tracking-wider uppercase",children:["From: ",m]}),n.jsx("p",{className:"text-lg md:text-xl font-semibold mb-6 text-gray-800 dark:text-gray-200 break-words",children:a.questionText}),n.jsx("div",{className:"space-y-3",children:I.map(Q=>{const _=Q.id===a.correctAnswerId,H=Q.id===i;return n.jsxs("button",{onClick:()=>c(Q.id),disabled:f,className:R(Q),"aria-pressed":H,children:[n.jsxs("div",{className:"flex-shrink-0 w-6 h-6 mr-4 mt-1",children:[f&&_&&n.jsx(L,{name:"check-circle",className:"text-green-500 dark:text-green-400"}),f&&H&&!_&&n.jsx(L,{name:"x-circle",className:"text-red-500 dark:text-red-400"})]}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsx("span",{className:"text-gray-900 dark:text-gray-100 break-words",children:Q.text}),f&&Q.explanation&&n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 break-words",children:Q.explanation})]})]},Q.id)})}),f&&n.jsxs("div",{className:"mt-8 p-4 bg-gray-100 dark:bg-gray-900/70 rounded-lg animate-fade-in space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"font-bold text-lg text-blue-600 dark:text-blue-300 mb-2",children:"Detailed Explanation"}),n.jsx("p",{className:"text-gray-700 dark:text-gray-300 whitespace-pre-wrap",children:a.detailedExplanation})]}),n.jsx("div",{className:"pt-4 border-t border-gray-200/50 dark:border-gray-700/50",children:n.jsx(er,{level:U})})]})]})},tu=({current:a,total:i})=>{const c=i>0?a/i*100:0;return n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2.5",children:n.jsx("div",{className:"bg-blue-600 h-2.5 rounded-full transition-all duration-500",style:{width:`${c}%`}})})};var as={};(function a(i,c,m,f){var h=!!(i.Worker&&i.Blob&&i.Promise&&i.OffscreenCanvas&&i.OffscreenCanvasRenderingContext2D&&i.HTMLCanvasElement&&i.HTMLCanvasElement.prototype.transferControlToOffscreen&&i.URL&&i.URL.createObjectURL),p=typeof Path2D=="function"&&typeof DOMMatrix=="function",N=function(){if(!i.OffscreenCanvas)return!1;var w=new OffscreenCanvas(1,1),d=w.getContext("2d");d.fillRect(0,0,1,1);var b=w.transferToImageBitmap();try{d.createPattern(b,"no-repeat")}catch{return!1}return!0}();function E(){}function F(w){var d=c.exports.Promise,b=d!==void 0?d:i.Promise;return typeof b=="function"?new b(w):(w(E,E),null)}var j=function(w,d){return{transform:function(b){if(w)return b;if(d.has(b))return d.get(b);var y=new OffscreenCanvas(b.width,b.height),k=y.getContext("2d");return k.drawImage(b,0,0),d.set(b,y),y},clear:function(){d.clear()}}}(N,new Map),I=function(){var w=Math.floor(16.666666666666668),d,b,y={},k=0;return typeof requestAnimationFrame=="function"&&typeof cancelAnimationFrame=="function"?(d=function(v){var D=Math.random();return y[D]=requestAnimationFrame(function $(A){k===A||k+w-1<A?(k=A,delete y[D],v()):y[D]=requestAnimationFrame($)}),D},b=function(v){y[v]&&cancelAnimationFrame(y[v])}):(d=function(v){return setTimeout(v,w)},b=function(v){return clearTimeout(v)}),{frame:d,cancel:b}}(),R=function(){var w,d,b={};function y(k){function v(D,$){k.postMessage({options:D||{},callback:$})}k.init=function($){var A=$.transferControlToOffscreen();k.postMessage({canvas:A},[A])},k.fire=function($,A,se){if(d)return v($,null),d;var de=Math.random().toString(36).slice(2);return d=F(function(re){function me(ye){ye.data.callback===de&&(delete b[de],k.removeEventListener("message",me),d=null,j.clear(),se(),re())}k.addEventListener("message",me),v($,de),b[de]=me.bind(null,{data:{callback:de}})}),d},k.reset=function(){k.postMessage({reset:!0});for(var $ in b)b[$](),delete b[$]}}return function(){if(w)return w;if(!m&&h){var k=["var CONFETTI, SIZE = {}, module = {};","("+a.toString()+")(this, module, true, SIZE);","onmessage = function(msg) {","  if (msg.data.options) {","    CONFETTI(msg.data.options).then(function () {","      if (msg.data.callback) {","        postMessage({ callback: msg.data.callback });","      }","    });","  } else if (msg.data.reset) {","    CONFETTI && CONFETTI.reset();","  } else if (msg.data.resize) {","    SIZE.width = msg.data.resize.width;","    SIZE.height = msg.data.resize.height;","  } else if (msg.data.canvas) {","    SIZE.width = msg.data.canvas.width;","    SIZE.height = msg.data.canvas.height;","    CONFETTI = module.exports.create(msg.data.canvas);","  }","}"].join(`
`);try{w=new Worker(URL.createObjectURL(new Blob([k])))}catch(v){return typeof console!==void 0&&typeof console.warn=="function"&&console.warn("🎊 Could not load worker",v),null}y(w)}return w}}(),U={particleCount:50,angle:90,spread:45,startVelocity:45,decay:.9,gravity:1,drift:0,ticks:200,x:.5,y:.5,shapes:["square","circle"],zIndex:100,colors:["#26ccff","#a25afd","#ff5e7e","#88ff5a","#fcff42","#ffa62d","#ff36ff"],disableForReducedMotion:!1,scalar:1};function Q(w,d){return d?d(w):w}function _(w){return w!=null}function H(w,d,b){return Q(w&&_(w[d])?w[d]:U[d],b)}function V(w){return w<0?0:Math.floor(w)}function X(w,d){return Math.floor(Math.random()*(d-w))+w}function Y(w){return parseInt(w,16)}function T(w){return w.map(M)}function M(w){var d=String(w).replace(/[^0-9a-f]/gi,"");return d.length<6&&(d=d[0]+d[0]+d[1]+d[1]+d[2]+d[2]),{r:Y(d.substring(0,2)),g:Y(d.substring(2,4)),b:Y(d.substring(4,6))}}function B(w){var d=H(w,"origin",Object);return d.x=H(d,"x",Number),d.y=H(d,"y",Number),d}function W(w){w.width=document.documentElement.clientWidth,w.height=document.documentElement.clientHeight}function te(w){var d=w.getBoundingClientRect();w.width=d.width,w.height=d.height}function we(w){var d=document.createElement("canvas");return d.style.position="fixed",d.style.top="0px",d.style.left="0px",d.style.pointerEvents="none",d.style.zIndex=w,d}function Ee(w,d,b,y,k,v,D,$,A){w.save(),w.translate(d,b),w.rotate(v),w.scale(y,k),w.arc(0,0,1,D,$,A),w.restore()}function ee(w){var d=w.angle*(Math.PI/180),b=w.spread*(Math.PI/180);return{x:w.x,y:w.y,wobble:Math.random()*10,wobbleSpeed:Math.min(.11,Math.random()*.1+.05),velocity:w.startVelocity*.5+Math.random()*w.startVelocity,angle2D:-d+(.5*b-Math.random()*b),tiltAngle:(Math.random()*(.75-.25)+.25)*Math.PI,color:w.color,shape:w.shape,tick:0,totalTicks:w.ticks,decay:w.decay,drift:w.drift,random:Math.random()+2,tiltSin:0,tiltCos:0,wobbleX:0,wobbleY:0,gravity:w.gravity*3,ovalScalar:.6,scalar:w.scalar,flat:w.flat}}function J(w,d){d.x+=Math.cos(d.angle2D)*d.velocity+d.drift,d.y+=Math.sin(d.angle2D)*d.velocity+d.gravity,d.velocity*=d.decay,d.flat?(d.wobble=0,d.wobbleX=d.x+10*d.scalar,d.wobbleY=d.y+10*d.scalar,d.tiltSin=0,d.tiltCos=0,d.random=1):(d.wobble+=d.wobbleSpeed,d.wobbleX=d.x+10*d.scalar*Math.cos(d.wobble),d.wobbleY=d.y+10*d.scalar*Math.sin(d.wobble),d.tiltAngle+=.1,d.tiltSin=Math.sin(d.tiltAngle),d.tiltCos=Math.cos(d.tiltAngle),d.random=Math.random()+2);var b=d.tick++/d.totalTicks,y=d.x+d.random*d.tiltCos,k=d.y+d.random*d.tiltSin,v=d.wobbleX+d.random*d.tiltCos,D=d.wobbleY+d.random*d.tiltSin;if(w.fillStyle="rgba("+d.color.r+", "+d.color.g+", "+d.color.b+", "+(1-b)+")",w.beginPath(),p&&d.shape.type==="path"&&typeof d.shape.path=="string"&&Array.isArray(d.shape.matrix))w.fill(De(d.shape.path,d.shape.matrix,d.x,d.y,Math.abs(v-y)*.1,Math.abs(D-k)*.1,Math.PI/10*d.wobble));else if(d.shape.type==="bitmap"){var $=Math.PI/10*d.wobble,A=Math.abs(v-y)*.1,se=Math.abs(D-k)*.1,de=d.shape.bitmap.width*d.scalar,re=d.shape.bitmap.height*d.scalar,me=new DOMMatrix([Math.cos($)*A,Math.sin($)*A,-Math.sin($)*se,Math.cos($)*se,d.x,d.y]);me.multiplySelf(new DOMMatrix(d.shape.matrix));var ye=w.createPattern(j.transform(d.shape.bitmap),"no-repeat");ye.setTransform(me),w.globalAlpha=1-b,w.fillStyle=ye,w.fillRect(d.x-de/2,d.y-re/2,de,re),w.globalAlpha=1}else if(d.shape==="circle")w.ellipse?w.ellipse(d.x,d.y,Math.abs(v-y)*d.ovalScalar,Math.abs(D-k)*d.ovalScalar,Math.PI/10*d.wobble,0,2*Math.PI):Ee(w,d.x,d.y,Math.abs(v-y)*d.ovalScalar,Math.abs(D-k)*d.ovalScalar,Math.PI/10*d.wobble,0,2*Math.PI);else if(d.shape==="star")for(var he=Math.PI/2*3,Ie=4*d.scalar,Ue=8*d.scalar,qe=d.x,Ze=d.y,wt=5,et=Math.PI/wt;wt--;)qe=d.x+Math.cos(he)*Ue,Ze=d.y+Math.sin(he)*Ue,w.lineTo(qe,Ze),he+=et,qe=d.x+Math.cos(he)*Ie,Ze=d.y+Math.sin(he)*Ie,w.lineTo(qe,Ze),he+=et;else w.moveTo(Math.floor(d.x),Math.floor(d.y)),w.lineTo(Math.floor(d.wobbleX),Math.floor(k)),w.lineTo(Math.floor(v),Math.floor(D)),w.lineTo(Math.floor(y),Math.floor(d.wobbleY));return w.closePath(),w.fill(),d.tick<d.totalTicks}function ae(w,d,b,y,k){var v=d.slice(),D=w.getContext("2d"),$,A,se=F(function(de){function re(){$=A=null,D.clearRect(0,0,y.width,y.height),j.clear(),k(),de()}function me(){m&&!(y.width===f.width&&y.height===f.height)&&(y.width=w.width=f.width,y.height=w.height=f.height),!y.width&&!y.height&&(b(w),y.width=w.width,y.height=w.height),D.clearRect(0,0,y.width,y.height),v=v.filter(function(ye){return J(D,ye)}),v.length?$=I.frame(me):re()}$=I.frame(me),A=re});return{addFettis:function(de){return v=v.concat(de),se},canvas:w,promise:se,reset:function(){$&&I.cancel($),A&&A()}}}function ie(w,d){var b=!w,y=!!H(d||{},"resize"),k=!1,v=H(d,"disableForReducedMotion",Boolean),D=h&&!!H(d||{},"useWorker"),$=D?R():null,A=b?W:te,se=w&&$?!!w.__confetti_initialized:!1,de=typeof matchMedia=="function"&&matchMedia("(prefers-reduced-motion)").matches,re;function me(he,Ie,Ue){for(var qe=H(he,"particleCount",V),Ze=H(he,"angle",Number),wt=H(he,"spread",Number),et=H(he,"startVelocity",Number),be=H(he,"decay",Number),je=H(he,"gravity",Number),Me=H(he,"drift",Number),Se=H(he,"colors",T),Le=H(he,"ticks",Number),dt=H(he,"shapes"),mt=H(he,"scalar"),Et=!!H(he,"flat"),ur=B(he),Dt=qe,_t=[],Ea=w.width*ur.x,ls=w.height*ur.y;Dt--;)_t.push(ee({x:Ea,y:ls,angle:Ze,spread:wt,startVelocity:et,color:Se[Dt%Se.length],shape:dt[X(0,dt.length)],ticks:Le,decay:be,gravity:je,drift:Me,scalar:mt,flat:Et}));return re?re.addFettis(_t):(re=ae(w,_t,A,Ie,Ue),re.promise)}function ye(he){var Ie=v||H(he,"disableForReducedMotion",Boolean),Ue=H(he,"zIndex",Number);if(Ie&&de)return F(function(et){et()});b&&re?w=re.canvas:b&&!w&&(w=we(Ue),document.body.appendChild(w)),y&&!se&&A(w);var qe={width:w.width,height:w.height};$&&!se&&$.init(w),se=!0,$&&(w.__confetti_initialized=!0);function Ze(){if($){var et={getBoundingClientRect:function(){if(!b)return w.getBoundingClientRect()}};A(et),$.postMessage({resize:{width:et.width,height:et.height}});return}qe.width=qe.height=null}function wt(){re=null,y&&(k=!1,i.removeEventListener("resize",Ze)),b&&w&&(document.body.contains(w)&&document.body.removeChild(w),w=null,se=!1)}return y&&!k&&(k=!0,i.addEventListener("resize",Ze,!1)),$?$.fire(he,qe,wt):me(he,qe,wt)}return ye.reset=function(){$&&$.reset(),re&&re.reset()},ye}var Ne;function Te(){return Ne||(Ne=ie(null,{useWorker:!0,resize:!0})),Ne}function De(w,d,b,y,k,v,D){var $=new Path2D(w),A=new Path2D;A.addPath($,new DOMMatrix(d));var se=new Path2D;return se.addPath(A,new DOMMatrix([Math.cos(D)*k,Math.sin(D)*k,-Math.sin(D)*v,Math.cos(D)*v,b,y])),se}function G(w){if(!p)throw new Error("path confetti are not supported in this browser");var d,b;typeof w=="string"?d=w:(d=w.path,b=w.matrix);var y=new Path2D(d),k=document.createElement("canvas"),v=k.getContext("2d");if(!b){for(var D=1e3,$=D,A=D,se=0,de=0,re,me,ye=0;ye<D;ye+=2)for(var he=0;he<D;he+=2)v.isPointInPath(y,ye,he,"nonzero")&&($=Math.min($,ye),A=Math.min(A,he),se=Math.max(se,ye),de=Math.max(de,he));re=se-$,me=de-A;var Ie=10,Ue=Math.min(Ie/re,Ie/me);b=[Ue,0,0,Ue,-Math.round(re/2+$)*Ue,-Math.round(me/2+A)*Ue]}return{type:"path",path:d,matrix:b}}function oe(w){var d,b=1,y="#000000",k='"Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji", "EmojiOne Color", "Android Emoji", "Twemoji Mozilla", "system emoji", sans-serif';typeof w=="string"?d=w:(d=w.text,b="scalar"in w?w.scalar:b,k="fontFamily"in w?w.fontFamily:k,y="color"in w?w.color:y);var v=10*b,D=""+v+"px "+k,$=new OffscreenCanvas(v,v),A=$.getContext("2d");A.font=D;var se=A.measureText(d),de=Math.ceil(se.actualBoundingBoxRight+se.actualBoundingBoxLeft),re=Math.ceil(se.actualBoundingBoxAscent+se.actualBoundingBoxDescent),me=2,ye=se.actualBoundingBoxLeft+me,he=se.actualBoundingBoxAscent+me;de+=me+me,re+=me+me,$=new OffscreenCanvas(de,re),A=$.getContext("2d"),A.font=D,A.fillStyle=y,A.fillText(d,ye,he);var Ie=1/b;return{type:"bitmap",bitmap:$.transferToImageBitmap(),matrix:[Ie,0,0,Ie,-de*Ie/2,-re*Ie/2]}}c.exports=function(){return Te().apply(this,arguments)},c.exports.reset=function(){Te().reset()},c.exports.create=ie,c.exports.shapeFromPath=G,c.exports.shapeFromText=oe})(function(){return typeof window<"u"?window:typeof self<"u"?self:this||{}}(),as,!1);const No=as.exports;as.exports.create;const Od=()=>(x.useEffect(()=>{const i=Date.now()+1e3,m={startVelocity:30,spread:360,ticks:90,zIndex:99,colors:["#60a5fa","#5eead4","#a78bfa","#fde047","#f9fafb"]};function f(p,N){return Math.random()*(N-p)+p}const h=window.setInterval(()=>{const p=i-Date.now();if(p<=0)return clearInterval(h);const N=50*(p/1e3);No({...m,particleCount:N,origin:{x:f(.1,.3),y:Math.random()-.2}}),No({...m,particleCount:N,origin:{x:f(.7,.9),y:Math.random()-.2}})},250);return()=>{clearInterval(h),No.reset()}},[]),null),ya=({deck:a,onSessionEnd:i,onItemReviewed:c,onUpdateLastOpened:m,sessionKeySuffix:f="",seriesId:h})=>{const[p,N]=x.useState([]),[E,F]=x.useState([]),[j,I]=x.useState(0),[R,U]=x.useState(0),[Q,_]=x.useState(!1),[H,V]=x.useState(null),[X,Y]=x.useState(!1),[T,M]=x.useState(!1),{hapticsEnabled:B}=Ca(),{addToast:W}=kt(),te=x.useMemo(()=>a.id==="general-study-deck",[a.id]),we=`session_deck_${a.id}${f}`,Ee=x.useMemo(()=>({reviewQueue:p,currentIndex:j}),[p,j]);x.useEffect(()=>{m(a.id)},[a.id]),x.useEffect(()=>{const v=te||f==="_cram"||f==="_flip";if(X&&!v)return;if(v){const A=a.type===ke.Flashcard?a.cards:a.questions;N(A),I(0),U(0),Y(!0);return}const D=localStorage.getItem(we);let $=!1;if(D)try{const A=JSON.parse(D);A.reviewQueue&&A.reviewQueue.length>0&&typeof A.currentIndex=="number"?(N(A.reviewQueue),I(A.currentIndex),U(A.currentIndex),$=!0):localStorage.removeItem(we)}catch(A){console.error("Failed to parse saved session",A),localStorage.removeItem(we)}if(!$){const A=new Date;A.setHours(23,59,59,999);const de=(a.type===ke.Quiz?a.questions:a.cards).filter(re=>!re.suspended&&new Date(re.dueDate)<=A).sort(()=>Math.random()-.5);N(de),I(0),U(0)}Y(!0)},[a,a.type,f,te,we,X]),x.useEffect(()=>{if(!te&&f===""&&X&&j<p.length)try{localStorage.setItem(we,JSON.stringify(Ee))}catch(D){console.error("Could not save session state",D)}},[Ee,te,X,we,j,p.length,f]);const ee=x.useMemo(()=>p[R],[p,R]),J=R<j,ae=R===j,ie=ee&&"questionText"in ee&&a.type===ke.Quiz,Ne=H!==null,Te=ee?ee.originalDeckName:void 0,De=x.useCallback(v=>{if(!(!ae||Ne)&&(V(v),B&&"vibrate"in navigator)){const D=(ee==null?void 0:ee.correctAnswerId)===v;navigator.vibrate(D?50:[100,50,100])}},[ae,Ne,ee,B]),G=x.useCallback(()=>{_(!1),V(null);const v=j+1;v<=p.length&&(I(v),U(v)),v>=p.length&&!te&&f===""&&localStorage.removeItem(we)},[j,p.length,te,we,f]),oe=x.useCallback(async v=>{if(!ee||!ae||T)return;if(f==="_cram"){M(!0),G(),M(!1);return}M(!0),B&&"vibrate"in navigator&&navigator.vibrate(20);const $=Zt(ee),A=Xm(ee,v),se=A.masteryLevel||0,de=Math.round($*100),re=Math.round(se*100);de<=85&&re>85&&W("Item Mastered!","success"),F(me=>[...me,{item:A,rating:v}]),N(me=>me.map((ye,he)=>he===j?A:ye));try{const me=ee.originalDeckId||a.id;await c(me,A,h)}catch(me){console.error("Failed to save review:",me),W("Failed to save review. Your progress for this card may not be saved.","error")}finally{setTimeout(()=>{G(),M(!1)},800)}},[ee,ae,T,B,G,a.id,c,W,h,j,f]),w=x.useCallback(async()=>{if(!ee||!ae||T)return;M(!0);const v={...ee,suspended:!0};F(D=>[...D,{item:v,rating:null}]);try{const D=ee.originalDeckId||a.id;await c(D,v,h),W("Card ignored for future sessions.","info")}catch(D){console.error("Failed to ignore card:",D),W("Failed to save ignored state. Please try again.","error")}finally{setTimeout(()=>{G(),M(!1)},300)}},[ee,ae,T,W,G,a.id,c,h]),d=x.useCallback(()=>{R>0&&U(v=>v-1)},[R]),b=x.useCallback(()=>{R<j&&U(v=>v+1)},[R,j]);if(x.useEffect(()=>{const v=D=>{if(!(D.target instanceof HTMLInputElement||D.target instanceof HTMLTextAreaElement)){if(D.key==="ArrowLeft"){R>0&&(D.preventDefault(),d());return}if(D.key==="ArrowRight"){R<j&&(D.preventDefault(),b());return}!ae||T||(ie&&Ne?(D.key==="1"&&oe(Je.Again),D.key==="2"&&oe(Je.Hard),D.key==="3"&&oe(Je.Good),D.key==="4"&&oe(Je.Easy)):ie||(Q?(D.key==="1"&&oe(Je.Again),D.key==="2"&&oe(Je.Hard),D.key==="3"&&oe(Je.Good),D.key==="4"&&oe(Je.Easy)):D.code==="Space"&&(D.preventDefault(),_(!0))))}};return window.addEventListener("keydown",v),()=>window.removeEventListener("keydown",v)},[Q,Ne,ie,ae,T,oe,d,b,R,j]),!X)return n.jsx("div",{className:"text-center p-8",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Initializing session..."})});if(p.length===0)return n.jsxs("div",{className:"text-center p-8",children:[n.jsx("h2",{className:"text-2xl font-bold",children:"All caught up!"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:te?"There are no quiz questions due for review across all your decks.":"There are no items due for review in this deck."}),n.jsx(q,{onClick:()=>i(a.id,h),className:"mt-6",children:"Back to Decks"})]});if(j>=p.length){if(f==="_cram")return n.jsxs("div",{className:"text-center p-8 animate-fade-in relative",children:[n.jsx(Od,{}),n.jsx("h2",{className:"text-2xl font-bold text-green-500 dark:text-green-400",children:"Cram Session Complete!"}),n.jsxs("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:["You've reviewed all ",p.length," items in this deck."]}),n.jsx(q,{onClick:()=>i(a.id,h),className:"mt-8",children:"Finish Session"})]});const v=new Date;v.setHours(0,0,0,0);const D=new Date(v);D.setDate(v.getDate()+1);const $=new Date(v);$.setDate(v.getDate()+7);let A=0,se=0;E.forEach(({item:re})=>{if(re.suspended)return;const me=new Date(re.dueDate);me.getTime()>v.getTime()&&me.getTime()<=D.getTime()&&A++,me.getTime()>D.getTime()&&me.getTime()<=$.getTime()&&se++});const de=E.filter(re=>re.rating===Je.Again||re.rating===Je.Hard).sort((re,me)=>(re.rating??5)-(me.rating??5)).slice(0,5).map(re=>re.item);return n.jsxs("div",{className:"text-center p-8 animate-fade-in relative",children:[n.jsx(Od,{}),n.jsx("h2",{className:"text-2xl font-bold text-green-500 dark:text-green-400",children:"Congratulations!"}),n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2",children:"You've completed this study session."}),n.jsxs("div",{className:"mt-6 bg-gray-100 dark:bg-gray-800/50 rounded-lg p-4 max-w-sm mx-auto space-y-2",children:[n.jsxs("div",{className:"flex justify-between items-center text-gray-700 dark:text-gray-300",children:[n.jsx("span",{children:"Due tomorrow:"}),n.jsxs("span",{className:"font-bold",children:[A," items"]})]}),n.jsxs("div",{className:"flex justify-between items-center text-gray-700 dark:text-gray-300",children:[n.jsx("span",{children:"Due in the next 7 days:"}),n.jsxs("span",{className:"font-bold",children:[se," items"]})]})]}),de.length>0&&n.jsxs("div",{className:"mt-6 bg-orange-100 dark:bg-orange-900/30 rounded-lg p-4 max-w-sm mx-auto space-y-3",children:[n.jsxs("h4",{className:"font-bold text-orange-800 dark:text-orange-200 text-left flex items-center gap-2",children:[n.jsx(L,{name:"zap",className:"w-5 h-5"}),"Challenging Items"]}),n.jsx("ul",{className:"text-left text-sm space-y-2",children:de.map(re=>{const me="questionText"in re,ye=(me?re.questionText:re.front).replace(/<[^>]+>/g,"").trim();let he;if(me){const Ie=re,Ue=Ie.options.find(qe=>qe.id===Ie.correctAnswerId);he=((Ue==null?void 0:Ue.text)??"N/A").replace(/<[^>]+>/g,"").trim()}else he=re.back.replace(/<[^>]+>/g,"").trim();return n.jsxs("li",{className:"text-orange-700 dark:text-orange-300 border-l-2 border-orange-400 pl-3",children:[n.jsx("p",{className:"font-semibold break-words",children:ye}),n.jsxs("p",{className:"text-sm opacity-80 pl-2 break-words",children:[n.jsx("span",{className:"font-semibold mr-1",children:"Answer:"})," ",he]})]},re.id)})})]}),n.jsx(q,{onClick:()=>i(a.id,h),className:"mt-8",children:"Finish Session"})]})}const y=(Q||Ne)&&ae,k=p.length>1;return n.jsxs("div",{className:"w-full max-w-3xl mx-auto p-4 flex flex-col h-full overflow-x-hidden",children:[n.jsx(tu,{current:j+1,total:p.length}),n.jsx("div",{className:"flex-grow flex flex-col items-center justify-center my-4 w-full",children:ee&&n.jsx("div",{className:"w-full relative animate-fade-in",children:ie?n.jsx(sh,{question:ee,selectedAnswerId:J?ee.correctAnswerId:H,onSelectAnswer:De,deckName:Te}):n.jsx(nh,{card:ee,isFlipped:Q||J})},R)}),n.jsxs("div",{className:"flex-shrink-0 mt-4 flex flex-col items-center justify-center space-y-4 min-h-[10rem]",children:[n.jsx("div",{className:"w-full flex-grow flex items-center justify-center",children:J?n.jsxs("div",{className:"text-center animate-fade-in",children:[n.jsx(q,{onClick:()=>U(j),variant:"primary",className:"text-lg py-3",children:"Return to Current Card"}),n.jsx("div",{className:"text-xs mt-2 font-semibold text-yellow-600 dark:text-yellow-400",children:"(Reviewing Past Item)"})]}):y?n.jsxs("div",{className:"space-y-4 animate-fade-in w-full",children:[n.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.jsxs(q,{onClick:()=>oe(Je.Again),className:"bg-red-600 hover:bg-red-700 dark:bg-red-800 dark:hover:bg-red-700 focus:ring-red-500 py-3 text-base text-white",disabled:T,children:["Again ",n.jsx("span",{className:"hidden sm:inline",children:"(1)"})]}),n.jsxs(q,{onClick:()=>oe(Je.Hard),className:"bg-orange-500 hover:bg-orange-600 dark:bg-orange-700 dark:hover:bg-orange-600 focus:ring-orange-400 py-3 text-base text-white",disabled:T,children:["Hard ",n.jsx("span",{className:"hidden sm:inline",children:"(2)"})]}),n.jsxs(q,{onClick:()=>oe(Je.Good),className:"bg-green-600 hover:bg-green-700 dark:bg-green-800 dark:hover:bg-green-700 focus:ring-green-500 py-3 text-base text-white",disabled:T,children:["Good ",n.jsx("span",{className:"hidden sm:inline",children:"(3)"})]}),n.jsxs(q,{onClick:()=>oe(Je.Easy),className:"bg-blue-600 hover:bg-blue-700 dark:bg-blue-600 dark:hover:bg-blue-500 focus:ring-blue-500 py-3 text-base text-white",disabled:T,children:["Easy ",n.jsx("span",{className:"hidden sm:inline",children:"(4)"})]})]}),f!=="_cram"&&n.jsx("div",{className:"text-center",children:n.jsxs(q,{variant:"ghost",onClick:w,className:"text-xs text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-200",disabled:T,children:[n.jsx(L,{name:"eye-off",className:"w-4 h-4 mr-1"})," Ignore this card"]})})]}):!ie&&ae&&n.jsxs(q,{onClick:()=>_(!0),variant:"primary",className:"w-full max-w-md text-lg py-3 animate-fade-in mx-auto flex items-center justify-center",children:["Show Answer ",n.jsx("span",{className:"hidden sm:inline ml-2",children:"(Space)"})]})}),k&&n.jsxs("div",{className:"flex justify-center items-center w-full max-w-xs gap-4 animate-fade-in h-12",children:[n.jsx(q,{variant:"ghost",onClick:d,disabled:R===0,className:"p-3 rounded-full disabled:opacity-30","aria-label":"Previous item",children:n.jsx(L,{name:"chevron-left",className:"w-8 h-8"})}),n.jsx("div",{className:"text-center w-28",children:n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Item ",R+1," of ",p.length]})}),n.jsx(q,{variant:"ghost",onClick:b,disabled:R>=j,className:"p-3 rounded-full disabled:opacity-30","aria-label":"Next item",children:n.jsx(L,{name:"chevron-left",className:"w-8 h-8 rotate-180"})})]})]})]})},Ld=({label:a,checked:i,onChange:c,description:m})=>{const f=ja.useId();return n.jsxs("div",{className:"flex items-center justify-between",children:[n.jsxs("span",{className:"flex flex-col",children:[n.jsx("label",{htmlFor:f,className:"font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:a}),m&&n.jsx("span",{id:`${f}-description`,className:"text-sm text-gray-500 dark:text-gray-400",children:m})]}),n.jsx("button",{id:f,type:"button",role:"switch","aria-checked":i,"aria-describedby":m?`${f}-description`:void 0,onClick:()=>c(!i),className:`${i?"bg-blue-600":"bg-gray-300 dark:bg-gray-600"} relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 dark:focus:ring-offset-gray-800`,children:n.jsx("span",{"aria-hidden":"true",className:`${i?"translate-x-5":"translate-x-0"} pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out`})})]})},ah="AIzaSyCxQD2rTQvfarBU5QQLwjHdRTJ-jq3GFMY",lh="727276393482-almsrnelboiul2343hvs643ok8onqtna.apps.googleusercontent.com",oh="https://www.googleapis.com/discovery/v1/apis/drive/v3/rest",ih="https://www.googleapis.com/auth/drive.appdata https://www.googleapis.com/auth/userinfo.profile https://www.googleapis.com/auth/userinfo.email";let ba=!1,Na=!1,ss=null,ka=[],wa=[];const To=(a,i)=>{ka.forEach(c=>c(a,i))},ch=a=>{wa.forEach(i=>i(a))},dh=async a=>{if(a.error){To(!1);return}gapi.client.setToken({access_token:a.access_token});const i=await yh(a.access_token);To(!0,i)};let xa=null;const uh=()=>xa||(xa=new Promise((a,i)=>{const c=()=>{ba&&Na&&(ch(!0),a())},m=()=>{gapi.load("client",async()=>{try{await gapi.client.init({apiKey:ah,discoveryDocs:[oh]}),ba=!0,c()}catch(N){console.error("Error initializing GAPI client",N),i(N)}})},f=()=>{try{ss=google.accounts.oauth2.initTokenClient({client_id:lh,scope:ih,callback:dh}),Na=!0,c()}catch(N){console.error("Error initializing GIS client",N),i(N)}},h=document.createElement("script");h.src="https://apis.google.com/js/api.js",h.async=!0,h.defer=!0,h.onload=m,h.onerror=()=>i(new Error("Failed to load GAPI script")),document.body.appendChild(h);const p=document.createElement("script");p.src="https://accounts.google.com/gsi/client",p.async=!0,p.defer=!0,p.onload=f,p.onerror=()=>i(new Error("Failed to load GIS script")),document.body.appendChild(p)}),xa),fh=a=>(wa.push(a),a(Na&&ba),()=>{wa=wa.filter(i=>i!==a)}),mh=a=>(ka.push(a),()=>{ka=ka.filter(i=>i!==a)}),hh=()=>{if(!Na||!ba||!ss){console.error("Google services not ready for sign-in.");return}ss.requestAccessToken({prompt:"consent"})},ph=()=>{ss&&ss.requestAccessToken({prompt:""})},gh=()=>{const a=gapi.client.getToken();a!==null&&google.accounts.oauth2.revoke(a.access_token,()=>{gapi.client.setToken(""),To(!1)})},yh=async a=>{const i=await fetch("https://www.googleapis.com/oauth2/v2/userinfo",{headers:{Authorization:`Bearer ${a}`}});if(!i.ok)throw new Error("Failed to fetch user profile.");return i.json()},xh=async()=>{const[a,i,c]=await Promise.all([Po(),Ro(),Fo()]);if(a.length===0&&i.length===0&&c.length===0)throw new Error("There is no data to back up.");const f=JSON.stringify({version:3,decks:a,folders:i,deckSeries:c}),N={name:`cogniflow-backup-${Wd()}.json`,parents:["appDataFolder"]},E="-------314159265358979323846",F=`\r
--${E}\r
`,j=`\r
--${E}--`,I=F+`Content-Type: application/json; charset=UTF-8\r
\r
`+JSON.stringify(N)+F+`Content-Type: application/json; charset=UTF-8\r
\r
`+f+j,R=await gapi.client.request({path:"https://www.googleapis.com/upload/drive/v3/files",method:"POST",params:{uploadType:"multipart",fields:"id, name, modifiedTime"},headers:{"Content-Type":`multipart/related; boundary=${E}`},body:I});if(R.status!==200)throw new Error("Failed to upload backup file.");return R.result},vh=async()=>(await gapi.client.drive.files.list({spaces:"appDataFolder",fields:"files(id, name, modifiedTime)",orderBy:"modifiedTime desc"})).result.files,kh=async a=>{const i=await gapi.client.drive.files.get({fileId:a,alt:"media"});if(i.status!==200)throw new Error("Failed to download backup file.");const c=i.result;if(typeof c=="object"&&c!==null&&"version"in c&&Array.isArray(c.decks)){const m=c.folders||[],f=c.deckSeries||[];return{decks:c.decks,folders:m,deckSeries:f}}if(Array.isArray(c))return{decks:c,folders:[],deckSeries:[]};throw new Error("Backup file content is not a valid format.")},wh=async a=>{var i,c;try{await gapi.client.drive.files.delete({fileId:a})}catch(m){console.error("Failed to delete file from Google Drive",m);const f=((c=(i=m==null?void 0:m.result)==null?void 0:i.error)==null?void 0:c.message)||"Unknown Google Drive API error.";throw new Error(`Failed to delete backup: ${f}`)}},jh=({onExport:a,onRestore:i,onRestoreData:c,onResetProgress:m,onFactoryReset:f})=>{var we,Ee,ee;const{disableAnimations:h,setDisableAnimations:p,hapticsEnabled:N,setHapticsEnabled:E}=Ca(),{addToast:F}=kt(),[j,I]=x.useState({isReady:!1,isSignedIn:!1,isProcessing:!1,user:null}),[R,U]=x.useState([]),[Q,_]=x.useState(!1),H=x.useCallback(async()=>{_(!0);try{const J=await vh();U(J)}catch(J){F(`Could not list files: ${J.message||"Unknown error"}`,"error"),U([])}finally{_(!1)}},[F]);x.useEffect(()=>{let J=!0;(async()=>{try{await uh(),J&&ph()}catch(Te){J&&(console.error("Failed to initialize Google Drive service",Te),F("Could not initialize Google Drive.","error"),I(De=>({...De,isReady:!1,isProcessing:!1})))}})();const ie=fh(Te=>{J&&I(De=>({...De,isReady:Te}))}),Ne=mh((Te,De)=>{J&&(I(G=>({...G,isSignedIn:Te,user:De,isProcessing:!1})),Te?H():U([]))});return()=>{J=!1,ie(),Ne()}},[F,H]);const V=()=>{I(J=>({...J,isProcessing:!0})),hh()},X=()=>{gh()},Y=async()=>{I(J=>({...J,isProcessing:!0}));try{const J=await xh();F("Successfully backed up data to Google Drive.","success"),U(ae=>[J,...ae])}catch(J){console.error("Google Drive Backup failed",J),F(`Backup failed: ${J.message||"Unknown error"}`,"error")}finally{I(J=>({...J,isProcessing:!1}))}},T=async J=>{I(ae=>({...ae,isProcessing:!0}));try{const ae=await kh(J);await c(ae)}catch(ae){F(`Restore failed: ${ae.message||"Unknown error"}`,"error")}finally{I(ae=>({...ae,isProcessing:!1}))}},M=J=>{window.confirm(`Are you sure you want to restore from "${J.name}"? This will merge and overwrite existing data.`)&&T(J.id)},B=async J=>{if(window.confirm(`Are you sure you want to permanently delete the backup "${J.name}"? This action cannot be undone.`)){I(ae=>({...ae,isProcessing:!0}));try{await wh(J.id),F(`Backup "${J.name}" deleted.`,"success"),U(ae=>ae.filter(ie=>ie.id!==J.id))}catch(ae){console.error("Google Drive Delete failed",ae),F(`Delete failed: ${ae.message||"Unknown error"}`,"error")}finally{I(ae=>({...ae,isProcessing:!1}))}}},W=J=>{if(!navigator.serviceWorker||!navigator.serviceWorker.controller){F("Service worker is not active. Please reload the page and try again.","error");return}const ae={type:J==="APP"?"CLEAR_APP_CACHE":"CLEAR_CDN_CACHE"};navigator.serviceWorker.controller.postMessage(ae),F(`${J} cache cleared. Please reload the page to apply changes.`,"success")},te=()=>{if(!navigator.serviceWorker||!navigator.serviceWorker.controller){F("Service worker is not active. Please reload the page and try again.","error");return}navigator.serviceWorker.controller.postMessage({type:"CLEAR_APP_CACHE"}),navigator.serviceWorker.controller.postMessage({type:"CLEAR_CDN_CACHE"}),F("All caches cleared. The application will now reload.","info"),setTimeout(()=>{window.location.reload()},1500)};return n.jsx(n.Fragment,{children:n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[n.jsx("h2",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-4",children:"Settings"}),n.jsxs("div",{id:"settings-appearance",className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Appearance"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"Customize the look and feel of the application."}),n.jsxs("div",{className:"space-y-4",children:[n.jsx(Ld,{label:"Disable card flip animation",checked:h,onChange:p,description:"For a faster, no-frills study session."}),n.jsx(Ld,{label:"Haptic feedback",checked:N,onChange:E,description:"Provides physical feedback on supported devices."})]})]}),n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Data Management"}),n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{id:"settings-local-backup",children:[n.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Local File Backup"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 my-2",children:"Backup all your decks and study progress to a JSON file on your device."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs(q,{onClick:a,variant:"secondary",className:"w-full sm:w-auto",children:[n.jsx(L,{name:"download",className:"w-5 h-5 mr-2"}),"Backup to File"]}),n.jsxs(q,{onClick:i,variant:"secondary",className:"w-full sm:w-auto",children:[n.jsx(L,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),"Restore from File"]})]})]}),n.jsxs("div",{id:"google-drive-backup",className:"border-t border-gray-200 dark:border-gray-700/60 pt-6",children:[n.jsx("h4",{className:"font-semibold text-gray-700 dark:text-gray-300",children:"Google Drive Cloud Backup"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 my-2",children:"Securely back up and restore your data to a private folder in your Google Drive."}),j.isReady?j.isSignedIn?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{className:"flex items-center gap-4",children:[n.jsx("img",{src:(we=j.user)==null?void 0:we.picture,alt:"User profile",className:"w-10 h-10 rounded-full"}),n.jsxs("div",{children:[n.jsx("p",{className:"font-semibold text-gray-800 dark:text-gray-200",children:(Ee=j.user)==null?void 0:Ee.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:(ee=j.user)==null?void 0:ee.email})]}),n.jsx(q,{variant:"ghost",onClick:X,className:"ml-auto",children:"Sign Out"})]}),n.jsx("div",{className:"flex flex-col sm:flex-row gap-4",children:n.jsxs(q,{onClick:Y,variant:"secondary",className:"w-full sm:w-auto",disabled:j.isProcessing,children:[n.jsx(L,{name:"upload-cloud",className:"w-5 h-5 mr-2"}),j.isProcessing?"Backing up...":"Backup to Drive Now"]})}),n.jsxs("div",{className:"pt-4 mt-4 border-t border-gray-200 dark:border-gray-700/50",children:[n.jsx("h5",{className:"font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Available Backups"}),Q?n.jsxs("div",{className:"flex items-center text-gray-500 dark:text-gray-400",children:[n.jsx(xn,{size:"sm"}),n.jsx("span",{className:"ml-2",children:"Loading backups..."})]}):R.length>0?n.jsx("ul",{className:"space-y-2 max-h-60 overflow-y-auto border border-gray-200 dark:border-gray-700 rounded-md p-2",children:R.map(J=>n.jsxs("li",{className:"flex justify-between items-center p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700/50",children:[n.jsxs("div",{className:"min-w-0 mr-2",children:[n.jsx("p",{className:"font-medium text-sm text-gray-800 dark:text-gray-200 truncate",title:J.name,children:J.name}),n.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:gm(J.modifiedTime)})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-1",children:[n.jsxs(q,{size:"sm",variant:"secondary",onClick:()=>M(J),disabled:j.isProcessing,children:[n.jsx(L,{name:"download",className:"w-4 h-4 mr-1"})," Restore"]}),n.jsx(q,{size:"sm",variant:"ghost",onClick:()=>B(J),disabled:j.isProcessing,"aria-label":`Delete backup file ${J.name}`,className:"text-gray-500 hover:text-red-600 dark:text-gray-400 dark:hover:text-red-400 p-2 h-auto",title:"Delete backup",children:n.jsx(L,{name:"trash-2",className:"w-4 h-4"})})]})]},J.id))}):n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No backups found in Google Drive."})]})]}):n.jsxs(q,{onClick:V,variant:"secondary",disabled:j.isProcessing,children:[n.jsx(L,{name:"google",className:"w-5 h-5 mr-2"}),j.isProcessing?"Signing in...":"Sign in with Google"]}):n.jsxs("div",{className:"h-10 flex items-center",children:[n.jsx(xn,{size:"sm"}),n.jsx("span",{className:"ml-2 text-gray-500 dark:text-gray-400",children:"Initializing Google Drive..."})]})]})]})]}),n.jsxs("div",{id:"settings-cache-management",className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Cache Management"}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"If you are experiencing issues, clearing the cache can help. You must reload the page afterwards for changes to take full effect."}),n.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[n.jsxs(q,{onClick:()=>W("APP"),variant:"secondary",className:"w-full sm:w-auto",children:[n.jsx(L,{name:"broom",className:"w-5 h-5 mr-2"}),"Clear App Cache"]}),n.jsxs(q,{onClick:()=>W("CDN"),variant:"secondary",className:"w-full sm-w-auto",children:[n.jsx(L,{name:"broom",className:"w-5 h-5 mr-2"}),"Clear CDN & Library Cache"]})]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:'"App Cache" stores the main interface files. "CDN Cache" stores third-party libraries like React.'}),n.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700/50",children:[n.jsxs(q,{variant:"danger",onClick:te,className:"w-full",children:[n.jsx(L,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Hard Reload (Clear All Caches & Refresh)"]}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-500 mt-2",children:"Use this if you are still experiencing issues after clearing individual caches. This is the most forceful option."})]})]}),n.jsxs("div",{id:"settings-danger-zone",className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-red-400 dark:text-red-300 mb-2",children:"Danger Zone"}),n.jsxs("div",{id:"settings-reset-progress",children:[n.jsx("h4",{className:"font-semibold text-red-400 dark:text-red-300",children:"Reset Deck Progress"}),n.jsx("p",{className:"text-sm text-red-500/80 dark:text-red-300/80 mt-2 mb-4",children:"This will reset the spaced repetition data (due dates, intervals) for all items in a selected deck, without deleting the cards themselves."}),n.jsxs(q,{variant:"danger",onClick:m,children:[n.jsx(L,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Reset Deck Progress..."]})]}),n.jsxs("div",{id:"settings-factory-reset",className:"mt-6 pt-6 border-t border-red-500/30",children:[n.jsx("h4",{className:"font-semibold text-red-400 dark:text-red-300",children:"Factory Reset"}),n.jsx("p",{className:"text-sm text-red-500/80 dark:text-red-300/80 mt-2 mb-4",children:"This will permanently delete all local data, including all decks, folders, series, and settings. The application will be restored to its original state."}),n.jsxs(q,{variant:"danger",onClick:f,children:[n.jsx(L,{name:"trash-2",className:"w-5 h-5 mr-2"}),"Reset Application Data"]})]})]})]})})},bh=({card:a,onClose:i,onSave:c})=>{const[m,f]=x.useState(""),[h,p]=x.useState(""),{addToast:N}=kt(),E=x.useRef(null);Lt(E,!0),x.useEffect(()=>{a&&(f(a.front),p(a.back))},[a]);const F=I=>{if(I.preventDefault(),!m.trim()||!h.trim()){N("Both front and back fields are required.","error");return}c({id:(a==null?void 0:a.id)||"",front:m.trim(),back:h.trim()})},j=I=>{if(I.key==="Tab"){I.preventDefault();const R=I.target,U=R.selectionStart,Q=R.selectionEnd;R.value=R.value.substring(0,U)+"	"+R.value.substring(Q),R.selectionStart=R.selectionEnd=U+1}};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:E,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:n.jsxs("form",{onSubmit:F,children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Card":"Add New Card"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"card-front",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Front"}),n.jsx("textarea",{id:"card-front",value:m,onChange:I=>f(I.target.value),onKeyDown:j,rows:5,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter front content (question, term, etc.)"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"card-back",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Back"}),n.jsx("textarea",{id:"card-back",value:h,onChange:I=>p(I.target.value),onKeyDown:j,rows:5,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Enter back content (answer, definition, etc.)"})]})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsx(q,{type:"submit",variant:"primary",children:a?"Save Changes":"Add Card"})]})]})})})},Nh=a=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date(a);c.setHours(0,0,0,0);const m=c.getTime()-i.getTime(),f=Math.round(m/(1e3*60*60*24)),h=f<=0;let p;return f<0?p="Due":f===0?p="Due today":f===1?p="Due tomorrow":p=`Due in ${f} days`,{text:p,isDue:h}},Sh=({cards:a,onCardsChange:i,onAddCard:c,onBulkAdd:m})=>{const[f,h]=x.useState(null),[p,N]=x.useState(!1),[E,F]=x.useState(null),[j,I]=x.useState(!0),R=x.useRef(null),U=(Y,T)=>{h(Y),T&&(R.current=T.currentTarget),N(!0)},Q=()=>{var Y;N(!1),(Y=R.current)==null||Y.focus(),h(null)},_=(Y,T)=>{F(Y),T&&(R.current=T.currentTarget)},H=()=>{E&&i(a.filter(Y=>Y.id!==E.id)),F(null)},V=Y=>{f?i(a.map(T=>T.id===Y.id?{...T,...Y}:T)):c(Y),Q()},X=Y=>{i(a.map(T=>T.id===Y?{...T,suspended:!1}:T))};return n.jsxs("div",{children:[n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:n.jsxs("button",{onClick:()=>I(!j),className:"w-full flex justify-between items-center text-left p-6","aria-expanded":j,"aria-controls":"card-list-content",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Cards"}),n.jsx(L,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${j?"":"-rotate-90"} text-gray-500`})]})}),j&&n.jsxs("div",{id:"card-list-content",className:"animate-fade-in",children:[n.jsx("div",{className:"p-6",children:a.length>0?n.jsx("ul",{className:"space-y-4",children:a.map(Y=>{const{text:T,isDue:M}=Nh(Y.dueDate);return n.jsxs("li",{className:`p-4 rounded-lg flex items-start justify-between transition-all ${Y.suspended?"bg-yellow-50 dark:bg-yellow-900/20 opacity-70":"bg-gray-50 dark:bg-gray-900/30"}`,children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 truncate",children:[n.jsx("strong",{children:"Front:"})," ",Y.front.replace(/<[^>]+>/g,"")]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:[n.jsx("strong",{children:"Back:"})," ",Y.back.replace(/<[^>]+>/g,"")]}),n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx(er,{level:Zt(Y)}),n.jsx("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:n.jsxs("span",{className:`font-semibold ${M?"text-blue-500 dark:text-blue-400":""}`,children:[n.jsx(L,{name:"zap",className:"w-3 h-3 inline-block mr-1"}),T]})})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[Y.suspended?n.jsx(q,{variant:"ghost",className:"p-2 h-auto text-yellow-600 dark:text-yellow-400",onClick:()=>X(Y.id),title:"Re-enable this card",children:n.jsx(L,{name:"eye",className:"w-4 h-4"})}):n.jsx(q,{variant:"ghost",className:"p-2 h-auto",onClick:B=>U(Y,B),title:"Edit this card",children:n.jsx(L,{name:"edit",className:"w-4 h-4"})}),n.jsx(q,{variant:"ghost",className:"p-2 h-auto text-gray-500 dark:text-gray-400 hover:text-red-500",onClick:B=>_(Y,B),title:"Delete this card",children:n.jsx(L,{name:"trash-2",className:"w-4 h-4"})})]})]},Y.id)})}):n.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-center py-4",children:"This deck has no cards."})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-wrap gap-2",children:[n.jsxs(q,{variant:"secondary",onClick:Y=>U(null,Y),className:"flex-grow sm:flex-grow-0",children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Add New Card"]}),n.jsxs(q,{variant:"ghost",onClick:m,className:"flex-grow sm:flex-grow-0",children:[n.jsx(L,{name:"code",className:"w-5 h-5 mr-2"}),"Bulk Add via JSON"]})]})]}),p&&n.jsx(bh,{card:f,onClose:Q,onSave:V}),E&&n.jsx(Sa,{isOpen:!!E,onClose:()=>F(null),onConfirm:H,title:"Delete Card",message:"Are you sure you want to delete this card? This action cannot be undone."})]})},Ch=({question:a,onClose:i,onSave:c})=>{const[m,f]=x.useState(""),[h,p]=x.useState(""),[N,E]=x.useState([]),[F,j]=x.useState(""),{addToast:I}=kt(),R=x.useRef(null);Lt(R,!0),x.useEffect(()=>{if(a)f(a.questionText),p(a.detailedExplanation),E(a.options.map(V=>({...V}))),j(a.correctAnswerId);else{const V=[{id:crypto.randomUUID(),text:""},{id:crypto.randomUUID(),text:""}];E(V)}},[a]);const U=(V,X)=>{E(N.map(Y=>Y.id===V?{...Y,text:X}:Y))},Q=()=>{E([...N,{id:crypto.randomUUID(),text:""}])},_=V=>{if(N.length<=2){I("A question must have at least two options.","error");return}E(N.filter(X=>X.id!==V)),F===V&&j("")},H=V=>{if(V.preventDefault(),!m.trim()){I("Question text is required.","error");return}if(N.some(X=>!X.text.trim())){I("All options must have text.","error");return}if(!F){I("You must select a correct answer.","error");return}c({id:a==null?void 0:a.id,questionText:m.trim(),detailedExplanation:h.trim(),options:N,correctAnswerId:F,tags:(a==null?void 0:a.tags)||[]})};return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:R,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-3xl transform transition-all relative max-h-[90vh] flex flex-col",children:n.jsxs("form",{onSubmit:H,className:"flex flex-col h-full",children:[n.jsxs("div",{className:"flex-shrink-0 flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:a?"Edit Question":"Add New Question"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6 space-y-4 overflow-y-auto",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"question-text",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Question Text"}),n.jsx("textarea",{id:"question-text",value:m,onChange:V=>f(V.target.value),rows:3,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"What is the capital of France?"})]}),n.jsxs("div",{children:[n.jsx("label",{className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Options"}),n.jsx("div",{className:"space-y-2",children:N.map((V,X)=>n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx("input",{type:"radio",name:"correct-answer",checked:F===V.id,onChange:()=>j(V.id),className:"h-5 w-5 text-blue-600 bg-gray-200 dark:bg-gray-700 border-gray-300 dark:border-gray-600 focus:ring-blue-500","aria-label":`Set option ${X+1} as correct`}),n.jsx("input",{type:"text",value:V.text,onChange:Y=>U(V.id,Y.target.value),className:"flex-grow p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:`Option ${X+1}`}),n.jsx(q,{type:"button",variant:"ghost",onClick:()=>_(V.id),className:"p-2 h-auto","aria-label":`Remove option ${X+1}`,children:n.jsx(L,{name:"trash-2",className:"w-4 h-4"})})]},V.id))}),n.jsxs(q,{type:"button",variant:"ghost",onClick:Q,className:"mt-2 text-blue-500 dark:text-blue-400 hover:text-blue-600 dark:hover:text-blue-300",children:[n.jsx(L,{name:"plus",className:"w-4 h-4 mr-2"}),"Add Option"]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"detailed-explanation",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Detailed Explanation (Optional)"}),n.jsx("textarea",{id:"detailed-explanation",value:h,onChange:V=>p(V.target.value),rows:4,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"Explain why the correct answer is right and others are wrong."})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsx(q,{type:"submit",variant:"primary",children:a?"Save Changes":"Add Question"})]})]})})})},Eh=a=>{const i=new Date;i.setHours(0,0,0,0);const c=new Date(a);c.setHours(0,0,0,0);const m=c.getTime()-i.getTime(),f=Math.round(m/(1e3*60*60*24)),h=f<=0;let p;return f<0?p="Due":f===0?p="Due today":f===1?p="Due tomorrow":p=`Due in ${f} days`,{text:p,isDue:h}},Dh=({questions:a,onQuestionsChange:i,onAddQuestion:c,onBulkAdd:m})=>{const[f,h]=x.useState(null),[p,N]=x.useState(!1),[E,F]=x.useState(null),[j,I]=x.useState(!0),[R,U]=x.useState(null),Q=x.useRef(null),_=x.useRef(null);x.useEffect(()=>{const W=te=>{_.current&&!_.current.contains(te.target)&&U(null)};return R&&document.addEventListener("mousedown",W),()=>{document.removeEventListener("mousedown",W)}},[R]);const H=(W,te)=>{h(W),te&&(Q.current=te.currentTarget),N(!0)},V=()=>{var W;N(!1),(W=Q.current)==null||W.focus(),h(null)},X=(W,te)=>{F(W),te&&(Q.current=te.currentTarget)},Y=()=>{E&&i(a.filter(W=>W.id!==E.id)),F(null)},T=W=>{if(f&&W.id)i(a.map(te=>te.id===W.id?{...te,...W}:te));else{const{id:te,...we}=W,Ee={...we,questionType:"multipleChoice",suspended:!1};c(Ee)}V()},M=W=>{i(a.map(te=>te.id===W?{...te,suspended:!0}:te)),U(null)},B=W=>{i(a.map(te=>te.id===W?{...te,suspended:!1}:te)),U(null)};return n.jsxs("div",{children:[n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700",children:n.jsxs("button",{onClick:()=>I(!j),className:"w-full flex justify-between items-center text-left p-6","aria-expanded":j,"aria-controls":"question-list-content",children:[n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:"Questions"}),n.jsx(L,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${j?"":"-rotate-90"} text-gray-500`})]})}),j&&n.jsxs("div",{id:"question-list-content",className:"animate-fade-in",children:[n.jsx("div",{className:"p-6",children:a.length>0?n.jsx("ul",{className:"space-y-4",children:a.map(W=>{const{text:te,isDue:we}=Eh(W.dueDate);return n.jsxs("li",{className:`p-4 rounded-lg flex items-start justify-between transition-all ${W.suspended?"bg-yellow-50 dark:bg-yellow-900/20 opacity-70":"bg-gray-50 dark:bg-gray-900/30"}`,children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsx("p",{className:"text-base font-medium text-gray-800 dark:text-gray-200 break-words",children:W.questionText}),n.jsxs("div",{className:"mt-3 space-y-2",children:[n.jsx(er,{level:Zt(W)}),n.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{className:`font-semibold ${we?"text-blue-500 dark:text-blue-400":""}`,children:[n.jsx(L,{name:"zap",className:"w-3 h-3 inline-block mr-1"}),te]}),n.jsxs("span",{children:[n.jsx(L,{name:"list",className:"w-3 h-3 inline-block mr-1"}),W.options.length," options"]})]})]})]}),n.jsxs("div",{className:"flex-shrink-0 relative",ref:R===W.id?_:null,children:[n.jsx(q,{variant:"ghost",className:"p-2 h-auto",onClick:Ee=>{Ee.stopPropagation(),U(ee=>ee===W.id?null:W.id)},"aria-label":"More options for question",children:n.jsx(L,{name:"more-vertical",className:"w-5 h-5"})}),R===W.id&&n.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-10 ring-1 ring-black ring-opacity-5 animate-fade-in",style:{animationDuration:"150ms"},children:[n.jsxs("button",{type:"button",onClick:Ee=>{H(W,Ee),U(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[n.jsx(L,{name:"edit",className:"w-4 h-4 mr-3"}),"Edit"]}),W.suspended?n.jsxs("button",{type:"button",onClick:()=>B(W.id),className:"flex items-center w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[n.jsx(L,{name:"eye",className:"w-4 h-4 mr-3"}),"Un-ignore"]}):n.jsxs("button",{type:"button",onClick:()=>M(W.id),className:"flex items-center w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[n.jsx(L,{name:"eye-off",className:"w-4 h-4 mr-3"}),"Ignore"]}),n.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),n.jsxs("button",{type:"button",onClick:Ee=>{X(W,Ee),U(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-3"}),"Delete"]})]})]})]},W.id)})}):n.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-center py-4",children:"This deck has no questions."})}),n.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 dark:border-gray-700 flex flex-wrap gap-2",children:[n.jsxs(q,{variant:"secondary",onClick:W=>H(null,W),className:"flex-grow sm:flex-grow-0",children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Add New Question"]}),n.jsxs(q,{variant:"ghost",onClick:m,className:"flex-grow sm:flex-grow-0",children:[n.jsx(L,{name:"code",className:"w-5 h-5 mr-2"}),"Bulk Add via JSON"]})]})]}),p&&n.jsx(Ch,{question:f,onClose:V,onSave:T}),E&&n.jsx(Sa,{isOpen:!!E,onClose:()=>F(null),onConfirm:Y,title:"Delete Question",message:"Are you sure you want to delete this question? This action cannot be undone."})]})},ru=({isOpen:a,onClose:i,onAddItems:c,deckType:m})=>{const[f,h]=x.useState(""),{addToast:p}=kt(),N=x.useRef(null);Lt(N,a);const E=x.useMemo(()=>m===ke.Flashcard?`[
  {
    "front": "What is the capital of Japan?",
    "back": "Tokyo"
  },
  {
    "front": "What is 2 + 2?",
    "back": "4"
  }
]`:`[
  {
    "questionText": "Which planet is known as the Red Planet?",
    "options": [
      { "id": "1", "text": "Earth" },
      { "id": "2", "text": "Mars" }
    ],
    "correctAnswerId": "2",
    "detailedExplanation": "Mars is called the Red Planet because of its reddish appearance."
  }
]`,[m]),F=I=>{if(I.preventDefault(),!f.trim()){p("JSON content cannot be empty.","error");return}try{const R=Um(f,m);if(R.length===0){p("The JSON array is empty. No items were added.","info"),i();return}c(R),p(`Successfully added ${R.length} item(s).`,"success"),i()}catch(R){p(R instanceof Error?R.message:"Invalid JSON format.","error")}},j=I=>{if(I.key==="Tab"){I.preventDefault();const R=I.target,U=R.selectionStart,Q=R.selectionEnd;R.value=R.value.substring(0,U)+"  "+R.value.substring(Q),R.selectionStart=R.selectionEnd=U+2}};return a?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:N,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:n.jsxs("form",{onSubmit:F,children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Bulk Add via JSON"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsxs("div",{className:"flex justify-between items-baseline mb-1",children:[n.jsxs("label",{htmlFor:"json-content",className:"block text-sm font-medium text-gray-600 dark:text-gray-300",children:["Paste an array of ",m===ke.Flashcard?"card":"question"," objects"]}),n.jsxs(Xe,{href:"/instructions/json",onClick:i,className:"text-sm text-blue-500 dark:text-blue-400 hover:underline inline-flex items-center gap-1",children:[n.jsx(L,{name:"help-circle",className:"w-4 h-4"}),"Format Guide"]})]}),n.jsx("textarea",{id:"json-content",value:f,onChange:I=>h(I.target.value),onKeyDown:j,rows:15,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm",placeholder:E})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsx(q,{type:"submit",variant:"primary",children:"Add Items"})]})]})})}):null},Th=({data:a,total:i})=>i===0?n.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-4"}):n.jsx("div",{className:"flex w-full h-4 bg-gray-200 dark:bg-gray-700 rounded-full overflow-hidden",role:"progressbar","aria-valuenow":a.reduce((c,m)=>c+m.value,0),"aria-valuemin":0,"aria-valuemax":i,children:a.map((c,m)=>{if(c.value===0)return null;const f=c.value/i*100;return n.jsx("div",{className:`${c.color} transition-all duration-500`,style:{width:`${f}%`},title:`${c.label}: ${c.value} item(s)`},m)})}),Ih=({data:a})=>{const i=Math.max(...a.map(F=>F.count),1),c=350,m=120,f={top:25,right:15,bottom:25,left:15},h=c-f.left-f.right,p=m-f.top-f.bottom,N=h/a.length,E=Math.max(6,N*.1);return n.jsxs("div",{className:"w-full",children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Upcoming Due Dates (Next 7 Days)"}),n.jsx("div",{className:"bg-gray-50 dark:bg-gray-900/50 p-2 rounded-lg border border-gray-200 dark:border-gray-700/50",children:n.jsxs("svg",{viewBox:`0 0 ${c} ${m}`,width:"100%",height:"auto","aria-labelledby":"due-date-graph-title",role:"img",className:"overflow-visible",children:[n.jsx("title",{id:"due-date-graph-title",children:"A bar chart showing the number of items due over the next 7 days."}),a.map((F,j)=>{const I=F.count>0?F.count/i*p:0,R=f.left+j*N+(N-E)/2,U=f.top+p-I;return n.jsxs("g",{className:"group",style:{cursor:"pointer"},children:[n.jsxs("title",{children:[F.date,": ",F.count," item",F.count!==1?"s":""," due"]}),n.jsx("rect",{x:R,y:U,width:E,height:I,rx:"2",className:"fill-blue-500 transition-colors group-hover:fill-blue-400"}),n.jsx("text",{x:R+E/2,y:U-6,textAnchor:"middle",className:"fill-gray-600 dark:fill-gray-300 font-semibold text-sm transition-opacity opacity-0 group-hover:opacity-100 pointer-events-none",children:F.count}),n.jsx("text",{x:R+E/2,y:m-f.bottom+15,textAnchor:"middle",className:"fill-gray-400 dark:fill-gray-500 text-xs pointer-events-none",children:F.dayLabel})]},j)})]})})]})},Mh=a=>{const i=new Date;return i.setHours(23,59,59,999),(a.type===ke.Flashcard?a.cards:a.questions).filter(m=>!m.suspended&&new Date(m.dueDate)<=i).length},Ah=a=>{const i={new:0,learning:0,young:0,mature:0};return a.forEach(c=>{c.interval===0?i.new++:c.interval<7?i.learning++:c.interval<21?i.young++:i.mature++}),i},Ph=({deck:a,folders:i,sessionsToResume:c,onUpdateDeck:m,onDeleteDeck:f,onUpdateLastOpened:h,openConfirmModal:p})=>{var w;const[N,E]=x.useState(!1),[F,j]=x.useState(a.name),[I,R]=x.useState(a.description||""),[U,Q]=x.useState(a.folderId||""),[_,H]=x.useState(!1),{navigate:V}=dr();x.useEffect(()=>{h(a.id)},[a.id,h]),x.useEffect(()=>{(a.archived||a.deletedAt)&&V("/")},[a.archived,a.deletedAt,V]);const X=()=>{m({...a,name:F,description:I,folderId:U||null}),E(!1)},Y=()=>{j(a.name),R(a.description||""),Q(a.folderId||""),E(!1)},T=d=>{a.type===ke.Flashcard&&m({...a,cards:d},{silent:!0})},M=d=>{const b=new Date;b.setHours(0,0,0,0);const y={id:crypto.randomUUID(),front:d.front,back:d.back,dueDate:b.toISOString(),interval:0,easeFactor:vn,suspended:!1};a.type===ke.Flashcard&&T([...a.cards,y])},B=d=>{a.type===ke.Quiz&&m({...a,questions:d},{silent:!0})},W=d=>{const b=new Date;b.setHours(0,0,0,0);const y={...d,id:crypto.randomUUID(),dueDate:b.toISOString(),interval:0,easeFactor:vn,suspended:!1};if(a.type===ke.Quiz){const k=[...a.questions,y];B(k)}},te=d=>{if(a.type===ke.Flashcard&&d.every(b=>"front"in b)){const b=Kd(d),y=[...a.cards,...b];m({...a,cards:y})}else if(a.type===ke.Quiz&&d.every(b=>"questionText"in b)){const b=Do(d),y=[...a.questions,...b];m({...a,questions:y})}},we=()=>{p({title:"Move Deck to Trash",message:`Are you sure you want to move the deck "${a.name}" to the trash? It will be permanently deleted after 10 days. This will also remove it from any series it belongs to.`,onConfirm:()=>f(a.id)})},Ee=a.type===ke.Flashcard?a.cards:a.questions,ee=Ee.filter(d=>!d.suspended),J=Ee.length-ee.length,ae=Ah(ee),ie=Mh(a),Ne=c.has(a.id),Te=x.useMemo(()=>ee.length===0?0:ee.reduce((b,y)=>b+Zt(y),0)/ee.length,[ee]),De=x.useMemo(()=>{const d=new Date;d.setHours(0,0,0,0);const b=Array(7).fill(0),y=[],k=[];for(let v=0;v<7;v++){const D=new Date(d);D.setDate(d.getDate()+v),v===0?y.push("Today"):v===1?y.push("Tom"):y.push(D.toLocaleDateString("en-US",{weekday:"short"})),k.push(D.toLocaleDateString("en-US",{month:"short",day:"numeric"}));const $=D.getTime();Ee.forEach(A=>{if(A.suspended)return;const se=new Date(A.dueDate);se.setHours(0,0,0,0),se.getTime()===$&&b[v]++})}return y.map((v,D)=>({dayLabel:v,count:b[D],date:k[D]}))},[Ee]),G=x.useMemo(()=>a.locked?"Deck is Locked":a.type===ke.Quiz?Ne?"Resume Quiz":`Start Quiz (${ie} due)`:Ne?"Resume Study":`Study Cards (${ie} due)`,[a.type,Ne,ie,a.locked]),oe=[{value:ae.new,color:"bg-blue-500",label:"New"},{value:ae.learning,color:"bg-orange-500",label:"Learning"},{value:ae.young,color:"bg-teal-500",label:"Young"},{value:ae.mature,color:"bg-green-500",label:"Mature"}];return n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:N?n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"deck-name",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Deck Name"}),n.jsx("input",{type:"text",id:"deck-name",value:F,onChange:d=>j(d.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none text-2xl font-bold"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"deck-folder",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Folder"}),n.jsxs("select",{id:"deck-folder",value:U,onChange:d=>Q(d.target.value),className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",children:[n.jsx("option",{value:"",children:"No folder"}),i.map(d=>n.jsx("option",{value:d.id,children:d.name},d.id))]})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"deck-desc",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Description"}),n.jsx("textarea",{id:"deck-desc",value:I,onChange:d=>R(d.target.value),rows:3,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex justify-end gap-2",children:[n.jsx(q,{variant:"secondary",onClick:Y,children:"Cancel"}),n.jsxs(q,{onClick:X,children:[n.jsx(L,{name:"save",className:"mr-2"})," Save Changes"]})]})]}):n.jsxs("div",{children:[n.jsxs("div",{className:"min-w-0",children:[n.jsx("h2",{className:"text-3xl font-bold mb-2 text-gray-900 dark:text-gray-100 break-words",children:a.name}),a.folderId&&n.jsxs("div",{className:"flex items-center text-sm text-gray-500 dark:text-gray-400 mb-2",children:[n.jsx(L,{name:"folder",className:"w-4 h-4 mr-2"}),n.jsx("span",{children:((w=i.find(d=>d.id===a.folderId))==null?void 0:w.name)||"..."})]})]}),n.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[n.jsxs(q,{variant:"ghost",onClick:()=>E(!0),children:[n.jsx(L,{name:"edit",className:"mr-2"})," Edit"]}),n.jsxs(q,{variant:"ghost",onClick:()=>m({...a,archived:!0}),children:[n.jsx(L,{name:"archive",className:"mr-2"})," Archive"]})]}),a.description&&n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1 mb-4 prose dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:a.description}}),n.jsx("div",{className:"mt-4 border-t border-gray-200 dark:border-gray-700 pt-4 space-y-6",children:n.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[n.jsxs("div",{className:"space-y-4",children:[n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Deck Statistics"}),n.jsxs("div",{className:"space-y-1",children:[n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Active Items: ",n.jsx("strong",{className:"text-gray-800 dark:text-gray-200",children:ee.length})]}),n.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:["Items Due Today: ",n.jsx("strong",{className:ie>0?"text-blue-500 dark:text-blue-400":"text-gray-800 dark:text-gray-200",children:ie})]}),J>0&&n.jsxs("p",{className:"text-sm text-yellow-600 dark:text-yellow-400",children:["Ignored Items: ",n.jsx("strong",{children:J})]})]})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Overall Mastery"}),n.jsx(er,{level:Te})]}),n.jsxs("div",{children:[n.jsx("h4",{className:"text-sm font-semibold text-gray-700 dark:text-gray-300 mb-2",children:"Progress by Stage"}),n.jsx(Th,{data:oe,total:ee.length}),n.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1 mt-3 text-xs",children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-blue-500 mr-2"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["New: ",n.jsx("strong",{children:ae.new})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-orange-500 mr-2"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Learning: ",n.jsx("strong",{children:ae.learning})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-teal-500 mr-2"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Young: ",n.jsx("strong",{children:ae.young})]})]}),n.jsxs("div",{className:"flex items-center",children:[n.jsx("span",{className:"w-2.5 h-2.5 rounded-full bg-green-500 mr-2"}),n.jsxs("span",{className:"text-gray-600 dark:text-gray-400",children:["Mature: ",n.jsx("strong",{children:ae.mature})]})]})]})]})]}),n.jsx("div",{children:n.jsx(Ih,{data:De})})]})}),n.jsxs("div",{className:"mt-8 border-t border-gray-200 dark:border-gray-700 pt-6 flex flex-wrap items-center justify-center gap-4",children:[n.jsxs(Xe,{href:`/decks/${a.id}/study`,passAs:q,variant:"primary",size:"lg",onClick:()=>h(a.id),disabled:ie===0&&!Ne||!!a.locked,className:"font-semibold w-full sm:w-auto",children:[n.jsx(L,{name:a.locked?"lock":Ne?"zap":"laptop",className:"w-5 h-5 mr-2"}),G]}),n.jsxs(Xe,{href:`/decks/${a.id}/cram`,passAs:q,variant:"secondary",size:"lg",onClick:()=>h(a.id),disabled:Ee.length===0,className:"font-semibold w-full sm:w-auto",title:"Review all cards in random order, without affecting your SRS schedule.",children:[n.jsx(L,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Cram"]}),a.type===ke.Quiz&&ee.length>0&&n.jsxs(Xe,{href:`/decks/${a.id}/study-flip`,passAs:q,variant:"secondary",size:"lg",onClick:()=>h(a.id),disabled:!!a.locked,className:"font-semibold w-full sm:w-auto",children:[n.jsx(L,{name:"refresh-ccw",className:"w-5 h-5 mr-2"}),"Review as Flashcards"]})]})]})}),n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md",children:a.type===ke.Flashcard?n.jsx(Sh,{cards:a.cards,onCardsChange:T,onAddCard:M,onBulkAdd:()=>H(!0)}):a.type===ke.Quiz?n.jsx(Dh,{questions:a.questions,onQuestionsChange:B,onAddQuestion:W,onBulkAdd:()=>H(!0)}):n.jsx("div",{className:"p-6 text-center text-gray-400 dark:text-gray-500",children:n.jsx("p",{children:"Unsupported deck type."})})}),n.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6",children:[n.jsx("h3",{className:"text-xl font-semibold text-red-400 dark:text-red-300 mb-2",children:"Danger Zone"}),n.jsx("p",{className:"text-red-500/80 dark:text-red-300/80 mb-4",children:"Moving a deck to the trash will make it unavailable for study. It will be permanently deleted after 10 days."}),n.jsxs(q,{variant:"danger",onClick:we,children:[n.jsx(L,{name:"trash-2",className:"mr-2"})," Move to Trash"]})]}),_&&n.jsx(ru,{isOpen:_,onClose:()=>H(!1),onAddItems:te,deckType:a.type})]})},Wr=({children:a})=>n.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900/70 p-4 rounded-lg overflow-x-auto text-sm text-gray-800 dark:text-gray-200 border border-gray-200 dark:border-gray-700",children:n.jsx("code",{children:a})}),Mr=({title:a,iconName:i,children:c,defaultOpen:m=!1})=>{const[f,h]=x.useState(m);return n.jsxs("div",{className:"border border-gray-200 dark:border-gray-700 rounded-lg overflow-hidden",children:[n.jsxs("button",{onClick:()=>h(!f),className:"w-full flex justify-between items-center text-left p-4 bg-gray-50 dark:bg-gray-800/50 hover:bg-gray-100 dark:hover:bg-gray-700/50 transition-colors","aria-expanded":f,children:[n.jsxs("div",{className:"flex items-center",children:[i&&n.jsx(L,{name:i,className:"w-6 h-6 mr-3 text-gray-500 dark:text-gray-400"}),n.jsx("h3",{className:"text-xl font-semibold text-gray-800 dark:text-gray-200",children:a})]}),n.jsx(L,{name:"chevron-down",className:`w-6 h-6 transition-transform duration-300 ${f?"":"-rotate-90"} text-gray-500`})]}),f&&n.jsx("div",{className:"p-6 bg-white dark:bg-gray-800 animate-fade-in",children:c})]})},_d=({fields:a})=>n.jsx("div",{className:"overflow-x-auto",children:n.jsxs("table",{className:"w-full text-left border-collapse mt-4 min-w-[500px]",children:[n.jsx("thead",{children:n.jsxs("tr",{children:[n.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Field"}),n.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Type"}),n.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Required"}),n.jsx("th",{className:"border-b-2 dark:border-gray-600 p-2 text-sm font-semibold text-gray-700 dark:text-gray-300",children:"Description"})]})}),n.jsx("tbody",{children:a.map(({field:i,type:c,description:m,required:f})=>n.jsxs("tr",{className:"border-b dark:border-gray-700/50",children:[n.jsx("td",{className:"p-2 align-top",children:n.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:i})}),n.jsx("td",{className:"p-2 align-top text-gray-600 dark:text-gray-400",children:c}),n.jsx("td",{className:"p-2 align-top",children:f?n.jsx(L,{name:"check-circle",className:"text-green-500"}):"No"}),n.jsx("td",{className:"p-2 align-top text-gray-600 dark:text-gray-400",children:m})]},i))})]})}),Rh=()=>{const{addToast:a}=kt(),[i,c]=x.useState(""),[m,f]=x.useState("Beginner"),[h,p]=x.useState(""),[N,E]=x.useState(""),[F,j]=x.useState("Beginner"),[I,R]=x.useState("Beginner"),[U,Q]=x.useState(null),_=["Novice","Beginner","Intermediate","Advanced","Expert","Mastery"],H=`[
  {
    "front": "What is the capital of France?",
    "back": "Paris"
  },
  {
    "front": "What is H2O?",
    "back": "Water"
  }
]`,V=`{
  "name": "Sample Science Quiz",
  "description": "A few questions to test your basic science knowledge.",
  "questions": [
    {
      "questionType": "multipleChoice",
      "questionText": "Which planet is known as the Red Planet?",
      "tags": ["astronomy", "planets"],
      "detailedExplanation": "Mars is often called the Red Planet...",
      "options": [
        { "id": "opt1", "text": "Venus" },
        { "id": "opt2", "text": "Mars" },
        { "id": "opt3", "text": "Jupiter", "explanation": "Jupiter is a gas giant..." }
      ],
      "correctAnswerId": "opt2"
    }
  ]
}`,X=[{field:"name",type:"string",required:!0,description:"The title of the quiz deck."},{field:"description",type:"string",required:!0,description:"A brief summary of the deck's content."},{field:"questions",type:"Array<Question>",required:!0,description:"An array containing all question objects for the deck."},{field:"questionType",type:"string",required:!0,description:'Must be "multipleChoice" for now.'},{field:"questionText",type:"string",required:!0,description:"The question being asked."},{field:"tags",type:"Array<string>",required:!1,description:"An array of keywords for organization."},{field:"detailedExplanation",type:"string",required:!0,description:"The full explanation shown after answering."},{field:"options",type:"Array<Option>",required:!0,description:"An array of possible answers."},{field:"correctAnswerId",type:"string",required:!0,description:"The `id` of the correct option."},{field:"options[].id",type:"string",required:!0,description:"A unique identifier for this option within the question."},{field:"options[].text",type:"string",required:!0,description:"The answer text shown to the user."},{field:"options[].explanation",type:"string",required:!1,description:"A brief explanation for why this specific option is right or wrong."}],Y=`{
  "seriesName": "Intro to Web Development",
  "seriesDescription": "A progressive series covering the fundamentals of web development.",
  "levels": [
    {
      "title": "Level 1: The Foundation",
      "decks": [
        {
          "name": "Deck 1.1: HTML Basics",
          "description": "The building blocks of the web.",
          "questions": [
            {
              "questionType": "multipleChoice",
              "questionText": "What does HTML stand for?",
              "tags": ["html", "basics"],
              "detailedExplanation": "HTML stands for HyperText Markup Language...",
              "options": [
                { "id": "1", "text": "HyperText Markup Language" },
                { "id": "2", "text": "High-Level Text Machine Language" }
              ],
              "correctAnswerId": "1"
            }
          ]
        },
        { "name": "Deck 1.2: CSS Fundamentals", "description": "...", "questions": [] }
      ]
    }
  ]
}`,T=[{field:"seriesName",type:"string",required:!0,description:"The title for the entire series."},{field:"seriesDescription",type:"string",required:!0,description:"A brief summary of what the whole series covers."},{field:"levels",type:"Array<Level>",required:!0,description:"An array containing all the levels in the series."},{field:"levels[].title",type:"string",required:!0,description:'The heading for a group of decks (e.g., "Level 1: Core Concepts").'},{field:"levels[].decks",type:"Array<QuizDeck>",required:!0,description:"An array of quiz decks for that level. The schema for each deck is the same as the Single Quiz Deck format."}],M=`Please act as a world-class instructional designer and subject matter expert. Your task is to generate a comprehensive, detailed, and world-class TEXT outline for a learning path. The output must be plain text, not a JSON object.

**Topic:** [YOUR TOPIC HERE]
**User's Current Level:** [USER'S LEVEL HERE]

The goal is to create a structured and progressive learning path that guides the user towards mastery, similar in quality and detail to the provided example structure.

**INSTRUCTIONS & REQUIREMENTS:**

1.  **Learning Path Structure:**
    -   Organize the learning path into logical "Levels" (e.g., Level 1, Level 2, up to Level 4 or 5). Each level must have a title and represent a significant step up in knowledge.
    -   Each Level should contain one or more related "Decks".
    -   The name of each deck must reflect this structure, e.g., "Deck 1.1: Foundations of X", "Deck 1.2: Core Concepts of Y", "Deck 2.1: Advanced Techniques in Z".

2.  **High-Quality Content (Crucial):**
    -   **Series Name & Description:** Create a compelling and descriptive name (e.g., "Topic Mastery Path: The Contextual Approach") and a comprehensive summary for the entire learning path.
    -   **Level Goal & Focus:** For each Level, provide a clear "Goal" and "Focus".
    -   **Deck Topics:** For each Deck, provide a detailed, itemized list of specific "Topics" to be covered.
    -   **Progressive Difficulty:** The path must be logically sequenced, starting with foundational definitions and historical context, moving to practical applications, then to assessment and planning, and finally to interdisciplinary challenges.
    -   **Context-Specific:** If the user's topic has a specific context (e.g., a geographical location, a particular framework), embed that context deeply into the entire outline.
    -   **Approximate Question Count:** Suggest an approximate number of questions for each deck.

**EXAMPLE STRUCTURE:**
Ecological Sustainable Forestry Mastery Path: The Scanian Approach
This learning path provides a deep understanding of...
Level 1: Core Principles & Historical Context in Skåne
Goal: Define ecological sustainable forestry...
Focus: Shifting from purely extractive forestry...
Deck 1.1: Foundations of Sustainable Forest Management (SFM) in Skåne
Topics: Definitional evolution of forestry...
Approx. Questions: 30-40

---

Now, based on all the above requirements, generate the complete text outline.
`,B=`You are an expert content creator. I have provided a text outline for a learning path. Your task is to generate the JSON for the **first deck (e.g., Deck 1.1)** from that outline.

**PRIMARY INSTRUCTIONS:**

1.  **Source Material:** Use ONLY the text outline I've provided as your source.
2.  **Question Quantity:** Generate the approximate number of questions specified in the outline for this first deck.
3.  **Content Generation:** Create world-class questions and answers based *only* on the "Topics" listed for this specific deck in the outline.

**CRITICAL CONTENT QUALITY REQUIREMENTS:**
- **Factual Accuracy:** This is paramount. The correct answer and all parts of the explanation must be unequivocally correct and verifiable.
- **Relevance & Practical Application:** Frame questions in real-world scenarios to help a user apply the information. Questions must be relevant to the deck's topics.
- **Clarity & Simplicity:** Questions must be easy to understand, unambiguous, and free of jargon (unless the jargon is the learning objective). Test only one core concept per question.
- **Problem-Solving Focus:** Design questions that require applying knowledge, not just recalling facts. Avoid trivial pursuit and focus on genuinely useful information. For practical topics, ask skill-based questions that test the ability to perform a task or make a decision.
- **High-Quality Explanations:** The \`detailedExplanation\` is crucial. It must explain the reasoning, principles, or facts behind the correct answer. Provide additional context, examples, or connections to related concepts to deepen understanding. If applicable, cite sources for complex information.
- **Engaging Content:** While factual, make the questions and explanations as engaging as possible to maintain learner interest.

**JSON OUTPUT FORMAT:**
- The final output MUST be ONLY a single, raw JSON object, starting with \`{\` and ending with \`}\`. Do not include any surrounding text, explanations, or markdown formatting.
- The JSON object must follow this exact schema:
{
  "name": "The exact name for the deck from your outline, e.g., 'Deck 1.1: Foundations...'",
  "description": "A concise description of this specific deck's content, based on its topics.",
  "questions": [
    {
      "questionType": "multipleChoice",
      "questionText": "The text of the first question...",
      "tags": ["relevant", "tags"],
      "detailedExplanation": "A thorough explanation that meets all quality requirements.",
      "options": [
        { "id": "q1_opt1", "text": "First answer option" },
        { "id": "q1_opt2", "text": "Second answer option" }
      ],
      "correctAnswerId": "q1_opt2"
    }
  ]
}

Now, based on the text outline I provided, please generate the JSON for the **first deck**.`,W=`Please act as an expert instructional designer and generate a complete, structured Deck Series in a single JSON object.

**Topic:** [YOUR TOPIC HERE]
**User's Current Level:** [USER'S LEVEL HERE]

The goal is to create a learning path that takes the user from their current level towards Mastery.

**CONTENT REQUIREMENTS FOR ALL QUESTIONS:**
-   **Factual Accuracy:** All correct answers and explanations must be verifiable and factually correct.
-   **Practical Application:** Frame questions to enable the user to put the learned information into practice.
-   **Clarity:** Questions must be easy to understand and unambiguous.

**FINAL JSON OUTPUT FORMAT:**
The final output MUST be ONLY a single, raw JSON object without any surrounding text or markdown. The root object must have this exact schema:
{
  "seriesName": "A descriptive name for the whole series",
  "seriesDescription": "A brief description of what the series covers.",
  "levels": [
    {
      "title": "Level 1: The Basics",
      "decks": [
        {
          "name": "Deck 1.1: Deck Name",
          "description": "Description of this deck's content.",
          "questions": [
            {
              "questionType": "multipleChoice",
              "questionText": "...",
              "tags": ["tag1", "tag2"],
              "detailedExplanation": "...",
              "options": [ { "id": "q1_opt1", "text": "..." }, { "id": "q1_opt2", "text": "..." } ],
              "correctAnswerId": "q1_opt2"
            }
          ]
        }
      ]
    }
  ]
}

Now, generate the complete JSON object based on all the above requirements.`,te='Please generate a JSON object for a single multiple-choice quiz.\n\n**Topic:** [YOUR TOPIC HERE]\n**Designed for Level:** [USER\'S LEVEL HERE]\n\n**CONTENT REQUIREMENTS:**\n-   **Factual Accuracy:** All correct answers and explanations must be verifiable and factually correct.\n-   **Relevance:** Questions must be directly pertinent to the chosen topic and appropriate for the specified level.\n-   **Practical Application:** Frame questions to enable the user to put the learned information into practice.\n-   **Question Quantity:** Generate 10-100 high-quality questions. Do not include multiple questions that are essentially asking the same thing.\n-   **Clarity:** Questions must be easy to understand and unambiguous.\n-   **Problem-Solving Focus:** Prioritize questions that require applying knowledge to solve a problem.\n-   **Explanation Quality:** The `detailedExplanation` must explain the reasoning behind the correct answer and provide additional context.\n\n**JSON SCHEMA & RULES:**\n-   The final output must be ONLY the raw JSON object, starting with `{` and ending with `}`.\n-   The root object must contain `name`, `description`, and `questions` (array).\n-   Each question object must contain `questionType` ("multipleChoice"), `questionText`, `tags` (array), `detailedExplanation`, `options` (array), and `correctAnswerId`.\n-   Each option object must contain a unique `id` and `text`.\n-   Do NOT include top-level SRS fields like `id` or `dueDate` on the questions.\n\nNow, generate the complete JSON deck based on all the above requirements.',we=(ie,Ne)=>{navigator.clipboard.writeText(ie).then(()=>{a("Prompt copied to clipboard!","success"),Q(Ne),setTimeout(()=>Q(null),2e3)}).catch(Te=>{a("Failed to copy prompt.","error"),console.error("Could not copy text: ",Te)})},Ee=()=>{const ie=i.trim()||"[YOUR TOPIC HERE]",Ne=M.replace("[YOUR TOPIC HERE]",ie).replace("[USER'S LEVEL HERE]",m);we(Ne,"outline-prompt")},ee=()=>{we(B,"deck-from-outline-prompt")},J=()=>{const ie=h.trim()||"[YOUR TOPIC HERE]",Ne=W.replace("[YOUR TOPIC HERE]",ie).replace("[USER'S LEVEL HERE]",F);we(Ne,"series-prompt")},ae=()=>{const ie=N.trim()||"[YOUR TOPIC HERE]",Ne=te.replace("[YOUR TOPIC HERE]",ie).replace("[USER'S LEVEL HERE]",I);we(Ne,"quiz-prompt")};return n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-6 pb-10",children:[n.jsxs("div",{children:[n.jsx("h1",{className:"text-4xl font-bold text-gray-900 dark:text-gray-100",children:"AI & JSON Import Guide"}),n.jsx("p",{className:"mt-2 text-lg text-gray-500 dark:text-gray-400",children:"Use this expert-led workflow to generate high-quality learning content with AI, or follow the formats to import your own data."})]}),n.jsx(Mr,{title:"Step 1: Generate Learning Outline (Text)",iconName:"list",defaultOpen:!0,children:n.jsxs("div",{className:"space-y-4 bg-green-900/10 dark:bg-green-900/20 p-6 rounded-lg border border-green-500/20",children:[n.jsx("p",{className:"text-green-800/90 dark:text-green-200/90",children:"Begin by generating a high-level, human-readable outline for your learning path. This allows you to review and approve the structure before generating the full content. The AI will generate plain text, not JSON."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"outline-topic-input",className:"block text-sm font-medium text-green-700 dark:text-green-300",children:"Enter Topic"}),n.jsx("input",{id:"outline-topic-input",type:"text",value:i,onChange:ie=>c(ie.target.value),className:"w-full p-2 mt-1 bg-green-50 dark:bg-gray-900 border border-green-300 dark:border-green-700 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none",placeholder:"e.g., The History of Ancient Rome"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"outline-level-select",className:"block text-sm font-medium text-green-700 dark:text-green-300",children:"My Current Level Is"}),n.jsx("select",{id:"outline-level-select",value:m,onChange:ie=>f(ie.target.value),className:"w-full p-2 mt-1 bg-green-50 dark:bg-gray-900 border border-green-300 dark:border-green-700 rounded-md focus:ring-2 focus:ring-green-500 focus:outline-none",children:_.map(ie=>n.jsx("option",{value:ie,children:ie},ie))})]})]}),n.jsx("p",{className:"text-xs text-green-600/80 dark:text-green-400/80 mt-1",children:"Your topic and level will be inserted into the prompt."}),n.jsxs("div",{className:"relative",children:[n.jsx(Wr,{children:M}),n.jsx(q,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:Ee,children:U==="outline-prompt"?n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),n.jsx(Mr,{title:"Step 2: Generate Individual Decks (JSON)",iconName:"zap",children:n.jsxs("div",{className:"space-y-4 bg-blue-900/10 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-500/20",children:[n.jsxs("p",{className:"text-blue-800/90 dark:text-blue-200/90",children:["After the AI generates your text outline, use this prompt to generate the JSON for the ",n.jsx("strong",{children:"first deck"}),'. Copy your text outline and paste it into the AI chat first, then copy this prompt. After the first deck is generated, you can copy the prompt again, edit it to ask for the next deck (e.g., "second deck (Deck 1.2)"), and continue the process.']}),n.jsxs("div",{className:"relative",children:[n.jsx(Wr,{children:B}),n.jsx(q,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:ee,children:U==="deck-from-outline-prompt"?n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]}),n.jsx("p",{className:"text-sm text-blue-700/90 dark:text-blue-300/90",children:'To import, use the main "Create / Import" modal, paste the JSON, and a new deck will be created. You can then add it to a series.'})]})}),n.jsx(Mr,{title:"Alternative: Generate Full Series at Once (JSON)",iconName:"zap",children:n.jsxs("div",{className:"space-y-4 bg-purple-900/10 dark:bg-purple-900/20 p-6 rounded-lg border border-purple-500/20",children:[n.jsx("p",{className:"text-purple-700/90 dark:text-purple-300/90",children:"For a faster, one-shot approach, use this powerful prompt to generate a complete, structured learning path on any topic. This is less controlled but much quicker."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"series-topic-input",className:"block text-sm font-medium text-purple-700 dark:text-purple-300",children:"Enter Topic"}),n.jsx("input",{id:"series-topic-input",type:"text",value:h,onChange:ie=>p(ie.target.value),className:"w-full p-2 mt-1 bg-purple-50 dark:bg-gray-900 border border-purple-300 dark:border-purple-700 rounded-md focus:ring-2 focus:ring-purple-500 focus:outline-none",placeholder:"e.g., Quantum Physics"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"series-level-select",className:"block text-sm font-medium text-purple-700 dark:text-purple-300",children:"My Current Level Is"}),n.jsx("select",{id:"series-level-select",value:F,onChange:ie=>j(ie.target.value),className:"w-full p-2 mt-1 bg-purple-50 dark:bg-gray-900 border border-purple-300 dark:border-purple-700 rounded-md focus:ring-2 focus:ring-purple-500 focus:outline-none",children:_.map(ie=>n.jsx("option",{value:ie,children:ie},ie))})]})]}),n.jsx("p",{className:"text-xs text-purple-600/80 dark:text-purple-400/80 mt-1",children:"Your topic and level will be inserted into the prompt."}),n.jsxs("div",{className:"relative",children:[n.jsx(Wr,{children:W}),n.jsx(q,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:J,children:U==="series-prompt"?n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),n.jsx(Mr,{title:"Alternative: Generate a Single Quiz Deck",iconName:"zap",children:n.jsxs("div",{className:"space-y-4 bg-blue-900/10 dark:bg-blue-900/20 p-6 rounded-lg border border-blue-500/20",children:[n.jsx("p",{className:"text-blue-700/90 dark:text-blue-300/90",children:"Use this prompt to generate a single quiz deck on any topic, tailored to a specific difficulty level."}),n.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[n.jsxs("div",{children:[n.jsx("label",{htmlFor:"quiz-topic-input",className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:"Enter Topic"}),n.jsx("input",{id:"quiz-topic-input",type:"text",value:N,onChange:ie=>E(ie.target.value),className:"w-full p-2 mt-1 bg-blue-50 dark:bg-gray-900 border border-blue-300 dark:border-blue-700 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",placeholder:"e.g., The Roman Empire"})]}),n.jsxs("div",{children:[n.jsx("label",{htmlFor:"quiz-level-select",className:"block text-sm font-medium text-blue-700 dark:text-blue-300",children:"Deck Difficulty Level"}),n.jsx("select",{id:"quiz-level-select",value:I,onChange:ie=>R(ie.target.value),className:"w-full p-2 mt-1 bg-blue-50 dark:bg-gray-900 border border-blue-300 dark:border-blue-700 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none",children:_.map(ie=>n.jsx("option",{value:ie,children:ie},ie))})]})]}),n.jsxs("div",{className:"relative",children:[n.jsx(Wr,{children:te}),n.jsx(q,{variant:"secondary",className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200/50 dark:bg-gray-900/50 border border-gray-300 dark:border-gray-600",onClick:ae,children:U==="quiz-prompt"?n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"check-circle",className:"w-4 h-4 mr-1"})," Copied!"]}):n.jsxs(n.Fragment,{children:[n.jsx(L,{name:"download",className:"w-4 h-4 mr-1"})," Copy Prompt"]})})]})]})}),n.jsxs(Mr,{title:"Format 1: Full Deck Series (JSON)",iconName:"list",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"To import an entire learning path at once, provide a single JSON object containing the series details and a `levels` array. Each level has a title and contains its own array of decks."}),n.jsx(Wr,{children:Y}),n.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Field Definitions"}),n.jsx(_d,{fields:T})]}),n.jsxs(Mr,{title:"Format 2: Single Quiz Deck (JSON)",iconName:"help-circle",children:[n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"For a single multiple-choice quiz, provide a JSON object with a name, description, and an array of question objects. See the field definitions below for more details."}),n.jsx(Wr,{children:V}),n.jsx("h4",{className:"text-lg font-semibold mt-6 mb-2",children:"Field Definitions"}),n.jsx(_d,{fields:X})]}),n.jsxs(Mr,{title:"Format 3: Simple Flashcard Deck (JSON)",iconName:"laptop",children:[n.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["For basic front-and-back flashcards, provide a JSON array. Each object in the array must have a ",n.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:"front"})," and a ",n.jsx("code",{className:"bg-gray-200 dark:bg-gray-700 px-1 py-0.5 rounded-sm",children:"back"})," key, both with string values. This format is ideal for quick, manual creation or for exporting from other simple flashcard apps."]}),n.jsx(Wr,{children:H})]}),n.jsx(Mr,{title:"General Tips & Troubleshooting",iconName:"settings",children:n.jsxs("ul",{className:"space-y-4 list-disc list-inside text-gray-600 dark:text-gray-400",children:[n.jsxs("li",{children:[n.jsx("strong",{children:"Validate Your JSON:"})," Before importing, it's a good idea to paste your JSON into an online validator to check for syntax errors. A common mistake is a trailing comma after the last item in an array or object.",n.jsx("br",{}),n.jsx("code",{children:'[ { "key": "value" }, ] &larr; Invalid Trailing Comma'})]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Check Your Quotes:"}),` All keys and string values in JSON must be enclosed in double quotes ("). Single quotes (') are not valid.`]}),n.jsxs("li",{children:[n.jsx("strong",{children:"Schema Mismatches:"}),' Ensure your JSON structure matches one of the three formats above. For example, pasting an array of flashcards into the "Bulk Add" modal inside a quiz deck will fail. The main "Import" modal is more flexible and can detect the format automatically.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"Unique IDs:"}),' When creating quiz questions, ensure the `id` for each option within a single question is unique. You can use simple strings like "opt1", "opt2", or a UUID.']}),n.jsxs("li",{children:[n.jsx("strong",{children:"AI-Generated Content:"})," Always review content generated by an AI for factual accuracy before studying it. The prompts are designed to request accuracy, but AI can still make mistakes."]})]})})]})},Fh=({isOpen:a,onClose:i,onAddDeck:c})=>{const[m,f]=x.useState(""),{addToast:h}=kt(),p=x.useRef(null);Lt(p,a);const N=`{
  "name": "New Quiz Deck Name",
  "description": "A description for the new deck.",
  "questions": [
    {
      "questionText": "What is 2+2?",
      "options": [{"id":"1","text":"4"}, {"id":"2","text":"3"}],
      "correctAnswerId": "1",
      "detailedExplanation": "It's basic math.",
      "tags": []
    }
  ]
}`,E=j=>{if(j.preventDefault(),!m.trim()){h("JSON content cannot be empty.","error");return}try{const I=Eo(m);if(I.type!==ke.Quiz){h("The provided JSON is not a valid Quiz Deck format.","error");return}const R={id:crypto.randomUUID(),name:I.data.name,description:I.data.description,type:ke.Quiz,questions:I.data.questions.map(U=>({...U,id:crypto.randomUUID(),dueDate:new Date().toISOString(),interval:0,easeFactor:2.5,suspended:!1}))};c(R),h(`Successfully created and added deck: "${R.name}"`,"success"),i()}catch(I){h(I instanceof Error?I.message:"Invalid JSON format.","error")}},F=j=>{if(j.key==="Tab"){j.preventDefault();const I=j.target,R=I.selectionStart,U=I.selectionEnd;I.value=I.value.substring(0,R)+"  "+I.value.substring(U),I.selectionStart=I.selectionEnd=R+2}};return a?n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:n.jsx("div",{ref:p,className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative",children:n.jsxs("form",{onSubmit:E,children:[n.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx("h2",{className:"text-xl font-bold",children:"Add New Deck to Series"}),n.jsx(q,{type:"button",variant:"ghost",onClick:i,className:"p-1 h-auto",children:n.jsx(L,{name:"x"})})]}),n.jsxs("div",{className:"p-6",children:[n.jsx("label",{htmlFor:"json-content",className:"block text-sm font-medium text-gray-600 dark:text-gray-300 mb-1",children:"Paste a complete quiz deck object in JSON format."}),n.jsx("textarea",{id:"json-content",value:m,onChange:j=>f(j.target.value),onKeyDown:F,rows:15,className:"w-full p-2 bg-gray-50 dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none font-mono text-sm",placeholder:N})]}),n.jsxs("div",{className:"flex justify-end p-4 bg-gray-100/50 dark:bg-gray-900/50 border-t border-gray-200 dark:border-gray-700",children:[n.jsx(q,{type:"button",variant:"secondary",onClick:i,className:"mr-2",children:"Cancel"}),n.jsx(q,{type:"submit",variant:"primary",children:"Create & Add Deck"})]})]})})}):null},zd=a=>{const i=new Date;return i.setHours(23,59,59,999),a.questions.filter(c=>!c.suspended&&new Date(c.dueDate)<=i).length},va=()=>n.jsx("div",{className:"h-1.5 my-2 w-full rounded-full bg-blue-400 dark:bg-blue-600","aria-hidden":"true"}),Oh=({series:a,decks:i,completedDeckIds:c,sessionsToResume:m,onUpdateSeries:f,onDeleteSeries:h,onAddDeckToSeries:p,onUpdateDeck:N,onStartSeriesStudy:E,openConfirmModal:F})=>{const[j,I]=x.useState(!1),[R,U]=x.useState(!1),[Q,_]=x.useState(!1),[H,V]=x.useState(null),{navigate:X}=dr(),[Y,T]=x.useState(null),M=x.useRef(null),[B,W]=x.useState(null),[te,we]=x.useState(null),Ee=x.useMemo(()=>a.levels.flatMap(d=>d.deckIds),[a.levels]);x.useEffect(()=>{(a.archived||a.deletedAt)&&X("/")},[a.archived,a.deletedAt,X]),x.useEffect(()=>{const d=b=>{M.current&&!M.current.contains(b.target)&&T(null)};return Y&&document.addEventListener("mousedown",d),()=>{document.removeEventListener("mousedown",d)}},[Y]);const ee=d=>{const b=Ee.indexOf(d);return b===-1?!1:b<=c.size},J=d=>c.has(d),ae=x.useMemo(()=>i.reduce((d,b)=>ee(b.id)?d+zd(b):d,0),[i,c,Ee]),ie=x.useMemo(()=>{const d=i.flatMap(y=>y.questions).filter(y=>!y.suspended);return d.length===0?0:d.reduce((y,k)=>y+Zt(k),0)/d.length},[i]),Ne=(d,b)=>{F({title:"Remove Deck from Series",message:`Are you sure you want to remove "${b}" from this series? The deck itself will not be deleted.`,onConfirm:()=>{const y=a.levels.map(v=>({...v,deckIds:v.deckIds.filter(D=>D!==d)})).filter(v=>v.deckIds.length>0),k={...a,levels:y};f(k)}})},Te=()=>{F({title:"Move Series to Trash",message:`Are you sure you want to move the series "${a.name}" to the trash? All ${i.length} deck(s) inside this series will also be moved to the trash.`,onConfirm:()=>h(a.id)})},De=(d,b,y,k)=>{j&&(W({type:b,sourceLevelIndex:y,deckId:k}),d.dataTransfer.effectAllowed="move",d.dataTransfer.setData("text/plain",""))},G=(d,b,y)=>{if(!j||!B)return;if(d.preventDefault(),B.type==="level"&&y){we(null);return}const k=d.currentTarget.getBoundingClientRect(),v=k.top+k.height/2;if(y){const D=a.levels[b].deckIds.indexOf(y);we({levelIndex:b,deckIndex:d.clientY<v?D:D+1})}else we({levelIndex:d.clientY<v?b:b+1,deckIndex:null})},oe=d=>{if(!j||!B||!te)return;d.preventDefault();const{type:b,sourceLevelIndex:y,deckId:k}=B,{levelIndex:v,deckIndex:D}=te,$=JSON.parse(JSON.stringify(a.levels));if(b==="level"){if(D!==null)return;const[A]=$.splice(y,1),se=y<v?v-1:v;$.splice(se,0,A)}else if(b==="deck"&&k){const A=$[y].deckIds,se=A.indexOf(k);se>-1&&A.splice(se,1);let de=D===null?0:D;const re=$[v].deckIds;y===v&&se<de&&de--,re.splice(de,0,k)}f({...a,levels:$.filter(A=>A.deckIds.length>0||A.title.trim()!=="")}),W(null),we(null)},w=()=>{W(null),we(null)};return n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[n.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md p-6",children:[n.jsxs("div",{className:"mb-4",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100 break-words",children:a.name}),a.description&&n.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a.description}),n.jsx("div",{className:"mt-4",children:n.jsx(er,{level:ie})})]}),n.jsxs("div",{className:"flex flex-wrap gap-4 items-center",children:[n.jsxs(q,{variant:"primary",onClick:()=>E(a.id),disabled:ae===0,children:[n.jsx(L,{name:"zap",className:"mr-2"})," Study All Due (",ae,")"]}),n.jsxs(q,{variant:"ghost",onClick:()=>I(!j),children:[n.jsx(L,{name:j?"x-circle":"edit",className:"mr-2"})," ",j?"Finish Editing":"Edit Series"]}),n.jsxs(q,{variant:"ghost",onClick:()=>f({...a,archived:!0}),children:[n.jsx(L,{name:"archive",className:"mr-2"})," Archive Series"]}),j&&n.jsxs(n.Fragment,{children:[n.jsx("div",{className:"w-full border-t border-gray-200 dark:border-gray-700/50 my-2"}),n.jsxs(q,{variant:"secondary",onClick:()=>U(!0),children:[n.jsx(L,{name:"plus",className:"mr-2"})," Add New Deck"]}),n.jsxs(q,{variant:"secondary",onClick:()=>_(!0),children:[n.jsx(L,{name:"edit",className:"mr-2"})," Edit Info"]}),n.jsxs(q,{variant:"danger",onClick:Te,children:[n.jsx(L,{name:"trash-2",className:"mr-2"})," Move to Trash"]})]})]})]}),n.jsxs("div",{className:"space-y-6",onDrop:oe,onDragOver:d=>d.preventDefault(),children:[j&&(te==null?void 0:te.levelIndex)===0&&te.deckIndex===null&&n.jsx(va,{}),a.levels.map((d,b)=>n.jsxs("div",{children:[n.jsx("div",{draggable:j,onDragStart:y=>De(y,"level",b),onDragOver:y=>G(y,b),onDragEnd:w,className:`transition-opacity ${j?"cursor-grab":""} ${(B==null?void 0:B.type)==="level"&&B.sourceLevelIndex===b?"opacity-40":""}`,children:n.jsx("h3",{className:"text-2xl font-bold text-gray-800 dark:text-gray-200 mb-3 border-b-2 border-gray-200 dark:border-gray-700 pb-2",children:d.title})}),n.jsx("div",{className:"space-y-4",children:d.deckIds.map((y,k)=>{const v=i.find(re=>re.id===y);if(!v)return null;const D=ee(v.id),$=J(v.id),A=zd(v),se=m.has(v.id),de=(()=>{const re=v.questions.filter(ye=>!ye.suspended);return re.length===0?0:re.reduce((ye,he)=>ye+Zt(he),0)/re.length})();return n.jsxs("div",{children:[j&&(te==null?void 0:te.levelIndex)===b&&te.deckIndex===k&&n.jsx(va,{}),n.jsx("div",{draggable:j,onDragStart:re=>De(re,"deck",b,y),onDragOver:re=>G(re,b,y),onDragEnd:w,className:`bg-white dark:bg-gray-800 rounded-lg shadow-md transition-all duration-200 ${j?"cursor-grab":""} ${(B==null?void 0:B.type)==="deck"&&B.deckId===y?"opacity-40":""}`,children:n.jsxs("div",{className:`p-4 flex items-start justify-between ${!D&&!j?"opacity-60":""}`,children:[n.jsxs("div",{className:"flex-1 mr-4 min-w-0",children:[n.jsxs("div",{className:"flex items-start",children:[n.jsxs("div",{className:"flex-shrink-0 flex flex-col items-center mr-4 w-10 text-center",children:[!D&&!j&&n.jsx(L,{name:"lock",className:"w-6 h-6 text-gray-400 dark:text-gray-500"}),D&&!$&&n.jsx(L,{name:"unlock",className:"w-6 h-6 text-blue-500"}),$&&n.jsx(L,{name:"check-circle",className:"w-6 h-6 text-green-500"})]}),n.jsxs("div",{className:"flex-1 min-w-0",children:[n.jsx(Xe,{href:`/decks/${v.id}?seriesId=${a.id}`,className:"text-xl font-bold text-gray-900 dark:text-gray-100 break-words hover:text-blue-500 dark:hover:text-blue-300 transition-colors",children:v.name}),n.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{children:[v.questions.length," question",v.questions.length!==1?"s":""]}),D&&A>0&&n.jsxs("span",{className:"font-semibold text-blue-500 dark:text-blue-400",children:[A," due"]})]})]})]}),n.jsx("div",{className:"mt-3 pl-14",children:n.jsx(er,{level:de})})]}),n.jsx("div",{className:"flex-shrink-0 flex items-center space-x-1",children:j?n.jsxs(n.Fragment,{children:[n.jsxs(q,{variant:"secondary",size:"sm",onClick:()=>V(v),children:[n.jsx(L,{name:"plus",className:"w-4 h-4 mr-1"})," Questions"]}),n.jsx(q,{variant:"danger",size:"sm",onClick:()=>Ne(v.id,v.name),children:n.jsx(L,{name:"trash-2",className:"w-4 h-4"})})]}):n.jsxs(n.Fragment,{children:[n.jsx(Xe,{href:`/decks/${v.id}/study?seriesId=${a.id}`,passAs:q,variant:"primary",disabled:!D||A===0&&!se,children:$?"Completed":se?"Resume":"Study"}),n.jsxs("div",{className:"relative",children:[n.jsx(q,{variant:"ghost",className:"p-2 h-auto",onClick:re=>{re.preventDefault(),re.stopPropagation(),T(Y===v.id?null:v.id)},"aria-haspopup":"true","aria-expanded":Y===v.id,"aria-label":`More options for ${v.name}`,children:n.jsx(L,{name:"more-vertical",className:"w-5 h-5"})}),Y===v.id&&n.jsxs("div",{ref:M,className:"absolute right-0 mt-2 w-56 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-10 ring-1 ring-black ring-opacity-5 animate-fade-in",style:{animationDuration:"150ms"},children:[n.jsxs("button",{onClick:re=>{re.preventDefault(),re.stopPropagation(),V(v),T(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[n.jsx(L,{name:"plus",className:"w-4 h-4 mr-3"}),"Bulk Add Questions"]}),n.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),n.jsxs("button",{onClick:re=>{re.preventDefault(),re.stopPropagation(),Ne(v.id,v.name),T(null)},className:"flex items-center w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-3"}),"Remove from Series"]})]})]})]})})]})}),j&&(te==null?void 0:te.levelIndex)===b&&te.deckIndex===k+1&&n.jsx(va,{})]},v.id)})}),j&&(te==null?void 0:te.levelIndex)===b+1&&te.deckIndex===null&&n.jsx(va,{})]},d.title+b))]}),R&&n.jsx(Fh,{isOpen:R,onClose:()=>U(!1),onAddDeck:d=>p(a.id,d)}),Q&&n.jsx(Zd,{series:a,onClose:()=>_(!1),onSave:d=>{f({...a,name:d.name,description:d.description}),_(!1)}}),H&&n.jsx(ru,{isOpen:!!H,onClose:()=>V(null),deckType:H.type,onAddItems:d=>{const b={...H,questions:[...H.questions,...d]};N(b),V(null)}})]})},Lh=({archivedDecks:a,archivedSeries:i,onUpdateDeck:c,onUpdateSeries:m,onDeleteDeck:f,onDeleteSeries:h,openConfirmModal:p})=>{const N=I=>{c({...I,archived:!1})},E=I=>{m({...I,archived:!1})},F=I=>{p({title:"Move Deck to Trash",message:`Are you sure you want to move the archived deck "${I.name}" to the trash? This will un-archive it and place it in the trash for 10 days, after which it will be permanently deleted.`,onConfirm:()=>f(I.id)})},j=I=>{p({title:"Move Series to Trash",message:`Are you sure you want to move the archived series "${I.name}" to the trash? It will be un-archived and placed in the trash for 10 days. Decks within the series will NOT be deleted.`,onConfirm:()=>h(I.id)})};return n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[n.jsx("h1",{className:"text-3xl font-bold mb-6 text-gray-900 dark:text-gray-100 border-b border-gray-200 dark:border-gray-700 pb-4",children:"Archive"}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Archived Series"}),i.length>0?n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md divide-y divide-gray-200 dark:divide-gray-700",children:i.map(I=>n.jsxs("div",{className:"p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center min-w-0",children:[n.jsx(L,{name:"list",className:"w-6 h-6 mr-4 text-purple-500 dark:text-purple-400 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-semibold truncate text-gray-900 dark:text-gray-100",children:I.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:I.description})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[n.jsxs(q,{variant:"secondary",size:"sm",onClick:()=>E(I),children:[n.jsx(L,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Unarchive"]}),n.jsxs(q,{variant:"danger",size:"sm",onClick:()=>j(I),children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Move to Trash"]})]})]},I.id))}):n.jsx("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No archived series."})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Archived Decks"}),a.length>0?n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md divide-y divide-gray-200 dark:divide-gray-700",children:a.map(I=>n.jsxs("div",{className:"p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center min-w-0",children:[n.jsx(L,{name:I.type==="quiz"?"help-circle":"laptop",className:"w-6 h-6 mr-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-semibold truncate text-gray-900 dark:text-gray-100",children:I.name}),n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:I.description})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[n.jsxs(q,{variant:"secondary",size:"sm",onClick:()=>N(I),children:[n.jsx(L,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Unarchive"]}),n.jsxs(q,{variant:"danger",size:"sm",onClick:()=>F(I),children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Move to Trash"]})]})]},I.id))}):n.jsx("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"No archived decks."})})]})]})},nu=10,Ud=a=>{const i=new Date(a),f=(new Date().getTime()-i.getTime())/(1e3*60*60*24);return Math.max(0,Math.ceil(nu-f))},_h=({trashedDecks:a,trashedSeries:i,onRestoreDeck:c,onRestoreSeries:m,onDeleteDeckPermanently:f,onDeleteSeriesPermanently:h,openConfirmModal:p})=>{const N=F=>{p({title:"Permanently Delete Deck",message:`Are you sure you want to permanently delete the deck "${F.name}"? This action cannot be undone.`,onConfirm:()=>f(F.id)})},E=F=>{const j=F.levels.reduce((I,R)=>I+R.deckIds.length,0);p({title:"Permanently Delete Series",message:`Are you sure you want to permanently delete the series "${F.name}"? All ${j} deck(s) inside it will also be permanently deleted. This action cannot be undone.`,onConfirm:()=>h(F.id)})};return n.jsxs("div",{className:"max-w-4xl mx-auto animate-fade-in space-y-8",children:[n.jsxs("div",{className:"border-b border-gray-200 dark:border-gray-700 pb-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Trash"}),n.jsxs("p",{className:"mt-2 text-gray-500 dark:text-gray-400",children:["Items in the trash will be permanently deleted after ",nu," days."]})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Trashed Series"}),i.length>0?n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md divide-y divide-gray-200 dark:divide-gray-700",children:i.map(F=>{const j=Ud(F.deletedAt);return n.jsxs("div",{className:"p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center min-w-0",children:[n.jsx(L,{name:"list",className:"w-6 h-6 mr-4 text-purple-500 dark:text-purple-400 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-semibold truncate text-gray-900 dark:text-gray-100",children:F.name}),n.jsx("p",{className:`text-sm ${j<=2?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:j>0?`${j} days left`:"Deleting soon..."})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[n.jsxs(q,{variant:"secondary",size:"sm",onClick:()=>m(F.id),children:[n.jsx(L,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Restore"]}),n.jsxs(q,{variant:"danger",size:"sm",onClick:()=>E(F),children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Delete Now"]})]})]},F.id)})}):n.jsx("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Trash is empty."})})]}),n.jsxs("section",{children:[n.jsx("h2",{className:"text-2xl font-semibold text-gray-800 dark:text-gray-200 mb-4",children:"Trashed Decks"}),a.length>0?n.jsx("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-md divide-y divide-gray-200 dark:divide-gray-700",children:a.map(F=>{const j=Ud(F.deletedAt);return n.jsxs("div",{className:"p-4 flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center min-w-0",children:[n.jsx(L,{name:F.type==="quiz"?"help-circle":"laptop",className:"w-6 h-6 mr-4 text-gray-500 dark:text-gray-400 flex-shrink-0"}),n.jsxs("div",{className:"min-w-0",children:[n.jsx("p",{className:"font-semibold truncate text-gray-900 dark:text-gray-100",children:F.name}),n.jsx("p",{className:`text-sm ${j<=2?"text-red-500":"text-gray-500 dark:text-gray-400"}`,children:j>0?`${j} days left`:"Deleting soon..."})]})]}),n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2",children:[n.jsxs(q,{variant:"secondary",size:"sm",onClick:()=>c(F.id),children:[n.jsx(L,{name:"unarchive",className:"w-4 h-4 mr-2"}),"Restore"]}),n.jsxs(q,{variant:"danger",size:"sm",onClick:()=>N(F),children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-2"}),"Delete Now"]})]})]},F.id)})}):n.jsx("div",{className:"text-center py-6 bg-gray-50 dark:bg-gray-800/50 rounded-lg",children:n.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:"Trash is empty."})})]})]})},su=({series:a,completedCount:i,dueCount:c,onStartSeriesStudy:m,masteryLevel:f})=>{const h=a.levels.reduce((N,E)=>N+E.deckIds.length,0),p=i>=h&&h>0;return n.jsx(Xe,{href:`/series/${a.id}`,className:"block bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 border border-transparent hover:border-blue-400 dark:hover:border-blue-400",children:n.jsxs("div",{className:"p-4",children:[n.jsxs("div",{className:"flex items-start justify-between",children:[n.jsxs("div",{className:"flex-1 min-w-0 mr-4",children:[n.jsxs("div",{className:"flex items-center mb-1",children:[n.jsx(L,{name:"layers",className:"w-5 h-5 mr-2 text-purple-500 dark:text-purple-400"}),n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 break-words",children:a.name})]}),a.description&&n.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1 truncate",children:a.description})]}),p&&n.jsxs("div",{className:"flex-shrink-0 flex items-center gap-2 text-green-500 dark:text-green-400 bg-green-100 dark:bg-green-900/50 px-3 py-1 rounded-full",children:[n.jsx(L,{name:"check-circle",className:"w-4 h-4"}),n.jsx("span",{className:"text-sm font-semibold",children:"Completed"})]})]}),h>0&&n.jsxs("div",{className:"mt-3 space-y-3",children:[n.jsxs("div",{children:[n.jsxs("div",{className:"flex justify-between items-center text-sm mb-1",children:[n.jsx("span",{className:"font-medium text-gray-600 dark:text-gray-300",children:"Completion"}),n.jsxs("span",{className:"font-semibold text-gray-500 dark:text-gray-400",children:[i," / ",h]})]}),n.jsx(tu,{current:i,total:h})]}),n.jsx("div",{children:n.jsx(er,{level:f})})]}),n.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-gray-700/50 flex justify-end",children:n.jsxs(q,{variant:"secondary",size:"sm",onClick:N=>{N.preventDefault(),N.stopPropagation(),m(a.id)},disabled:c===0,children:[n.jsx(L,{name:"zap",className:"w-4 h-4 mr-2"}),"Study Due (",c,")"]})})]})})},zh=a=>{const i=new Date;return i.setHours(23,59,59,999),(a.type===ke.Quiz?a.questions:a.cards).filter(m=>!m.suspended&&new Date(m.dueDate)<=i).length},Uh=a=>a&&new DOMParser().parseFromString(a,"text/html").body.textContent||"",Oo=({deck:a,sessionsToResume:i,onUpdateLastOpened:c,draggedDeckId:m,onDragStart:f,onDragEnd:h,onUpdateDeck:p,onDeleteDeck:N,openConfirmModal:E})=>{const{navigate:F}=dr(),j=zh(a),I=i.has(a.id),R=a.type===ke.Quiz?a.questions:a.cards,U=R.length,Q=a.type===ke.Quiz?U===1?"question":"questions":U===1?"card":"cards",[_,H]=x.useState(!1),V=x.useRef(null);x.useEffect(()=>{const B=W=>{V.current&&!V.current.contains(W.target)&&H(!1)};return _?document.addEventListener("mousedown",B):document.removeEventListener("mousedown",B),()=>document.removeEventListener("mousedown",B)},[_]);const X=B=>{B.target.closest("button, a")||(c(a.id),F(`/decks/${a.id}`))},Y=B=>{p({...a,archived:!0}),H(!1)},T=B=>{E({title:"Move Deck to Trash",message:`Are you sure you want to move the deck "${a.name}" to the trash? It will be permanently deleted after 10 days.`,onConfirm:()=>N(a.id)}),H(!1)},M=x.useMemo(()=>{const B=R.filter(te=>!te.suspended);return B.length===0?0:B.reduce((te,we)=>te+Zt(we),0)/B.length},[R]);return n.jsx("div",{draggable:"true",onClick:X,onDragStart:B=>{B.dataTransfer.setData("text/plain",a.id),setTimeout(()=>f(a.id),0)},onDragEnd:h,className:`bg-white dark:bg-gray-800 rounded-lg shadow-md hover:shadow-lg transition-all duration-200 group relative cursor-pointer ${m===a.id?"opacity-40 scale-95":"opacity-100"}`,children:n.jsxs("div",{className:"p-4 flex flex-col justify-between h-full space-y-3",children:[n.jsxs("div",{children:[n.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-gray-100 break-words group-hover:text-blue-500 dark:group-hover:text-blue-300 transition-colors",children:a.name}),a.description&&n.jsx("div",{className:"prose prose-sm dark:prose-invert max-w-none text-gray-500 dark:text-gray-400 mt-1 truncate",title:Uh(a.description),dangerouslySetInnerHTML:{__html:a.description}})]}),n.jsx(er,{level:M}),n.jsxs("div",{className:"flex justify-between items-center",children:[n.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500 dark:text-gray-400",children:[n.jsxs("span",{className:"flex items-center gap-1.5",children:[n.jsx(L,{name:"list",className:"w-4 h-4"}),U," ",Q]}),n.jsxs("span",{className:`flex items-center gap-1.5 font-semibold ${j>0?"text-blue-500 dark:text-blue-400":""}`,children:[n.jsx(L,{name:"zap",className:"w-4 h-4"}),j," due"]})]}),n.jsxs("div",{className:"flex items-center space-x-1",children:[n.jsx(Xe,{href:`/decks/${a.id}/study`,passAs:q,variant:"primary",size:"sm",onClick:()=>c(a.id),disabled:j===0&&!I,className:"font-semibold",children:I?"Resume":"Study"}),n.jsxs("div",{className:"relative",ref:V,children:[n.jsx(q,{variant:"ghost",size:"sm",className:"p-2 h-auto",onClick:()=>H(B=>!B),"aria-label":`More options for ${a.name}`,children:n.jsx(L,{name:"more-vertical",className:"w-5 h-5"})}),_&&n.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 rounded-md shadow-lg py-1 z-20 ring-1 ring-black ring-opacity-5 animate-fade-in",style:{animationDuration:"150ms"},children:[n.jsxs("button",{onClick:Y,className:"flex items-center w-full px-4 py-2 text-sm text-left text-gray-700 dark:text-gray-200 hover:bg-gray-100 dark:hover:bg-gray-700",children:[n.jsx(L,{name:"archive",className:"w-4 h-4 mr-3"}),"Archive"]}),n.jsx("div",{className:"border-t border-gray-100 dark:border-gray-700 my-1"}),n.jsxs("button",{onClick:T,className:"flex items-center w-full px-4 py-2 text-sm text-left text-red-600 dark:text-red-400 hover:bg-red-50 dark:hover:bg-red-900/20",children:[n.jsx(L,{name:"trash-2",className:"w-4 h-4 mr-3"}),"Move to Trash"]})]})]})]})]})]})},a.id)},$h=({recentSeries:a,recentDecks:i,totalDueQuestions:c,onStartGeneralStudy:m,sessionsToResume:f,onUpdateLastOpened:h,onUpdateDeck:p,onDeleteDeck:N,openConfirmModal:E,seriesData:F,seriesProgress:j,onStartSeriesStudy:I})=>n.jsxs("div",{className:"space-y-12",children:[c>0&&n.jsx("div",{className:"mb-6",children:n.jsxs(q,{onClick:m,variant:"primary",className:"w-full sm:w-auto text-lg py-3",children:[n.jsx(L,{name:"zap",className:"w-5 h-5 mr-2"}),"Study All Due Items (",c,")"]})}),a.length>0&&n.jsxs("section",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Series"}),n.jsxs(Xe,{href:"/series",passAs:q,variant:"ghost",children:["View all ",n.jsx(L,{name:"chevron-left",className:"w-4 h-4 ml-2 rotate-180"})]})]}),n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.map(R=>{var Q;const U=F.get(R.id)||{dueCount:0,mastery:0};return n.jsx(su,{series:R,completedCount:((Q=j.get(R.id))==null?void 0:Q.size)||0,dueCount:U.dueCount,masteryLevel:U.mastery,onStartSeriesStudy:I},R.id)})})]}),i.length>0&&n.jsxs("section",{children:[n.jsxs("div",{className:"flex justify-between items-center mb-4",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"Recent Decks"}),n.jsxs(Xe,{href:"/decks",passAs:q,variant:"ghost",children:["View all ",n.jsx(L,{name:"chevron-left",className:"w-4 h-4 ml-2 rotate-180"})]})]}),n.jsx("div",{className:"space-y-4",children:i.map(R=>n.jsx(Oo,{deck:R,sessionsToResume:f,onUpdateLastOpened:h,draggedDeckId:null,onDragStart:()=>{},onDragEnd:()=>{},onUpdateDeck:p,onDeleteDeck:N,openConfirmModal:E},R.id))})]})]}),Bh=({folder:a,decks:i,isOpen:c,onToggle:m,sessionsToResume:f,onUpdateLastOpened:h,onEditFolder:p,onDeleteFolder:N,draggedDeckId:E,onDragStart:F,onDragEnd:j,onMoveDeck:I,onUpdateDeck:R,onDeleteDeck:U,openConfirmModal:Q})=>{const[_,H]=x.useState(!1),V=T=>{T.preventDefault(),T.stopPropagation();const M=T.dataTransfer.getData("text/plain");M&&M===E&&(I(M,a.id),j()),H(!1)},X=T=>{T.preventDefault(),T.dataTransfer.dropEffect="move",H(!0)},Y=()=>{H(!1)};return n.jsxs("div",{className:`rounded-lg transition-colors ${_?"bg-blue-100 dark:bg-blue-900/30":"bg-gray-100/50 dark:bg-gray-800/20"}`,onDrop:V,onDragOver:X,onDragLeave:Y,children:[n.jsx("div",{className:"border-b border-gray-200 dark:border-gray-700/50",children:n.jsxs("button",{onClick:m,className:"w-full flex justify-between items-center text-left p-4","aria-expanded":c,children:[n.jsxs("div",{className:"flex items-center",children:[n.jsx(L,{name:"chevron-down",className:`w-5 h-5 transition-transform duration-300 mr-3 ${c?"":"-rotate-90"} text-gray-500`}),n.jsx(L,{name:"folder",className:"w-6 h-6 mr-3 text-yellow-600 dark:text-yellow-500"}),n.jsx("h3",{className:"text-xl font-bold text-gray-800 dark:text-gray-200",children:a.name})]}),n.jsxs("div",{className:"flex items-center gap-1",children:[n.jsx(q,{variant:"ghost",className:"p-2 h-auto",onClick:T=>{T.stopPropagation(),p(a)},"aria-label":`Edit folder ${a.name}`,children:n.jsx(L,{name:"edit",className:"w-4 h-4"})}),n.jsx(q,{variant:"ghost",className:"p-2 h-auto hover:text-red-500",onClick:T=>{T.stopPropagation(),N(a.id)},"aria-label":`Delete folder ${a.name}`,children:n.jsx(L,{name:"trash-2",className:"w-4 h-4"})})]})]})}),c&&n.jsx("div",{className:"p-4 space-y-4",children:i.length>0?i.map(T=>n.jsx(Oo,{deck:T,sessionsToResume:f,onUpdateLastOpened:h,draggedDeckId:E,onDragStart:F,onDragEnd:j,onUpdateDeck:R,onDeleteDeck:U,openConfirmModal:Q},T.id)):n.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-4",children:"This folder is empty. Drag a deck here to add it."})})]})},Hh=({decks:a,folders:i,sessionsToResume:c,onUpdateLastOpened:m,onEditFolder:f,onDeleteFolder:h,draggedDeckId:p,onDragStart:N,onDragEnd:E,onMoveDeck:F,openFolderIds:j,onToggleFolder:I,onUpdateDeck:R,onDeleteDeck:U,openConfirmModal:Q})=>{const{decksByFolder:_,ungroupedDecks:H}=x.useMemo(()=>{const M=new Map,B=[];return a.forEach(W=>{W.folderId&&i.some(te=>te.id===W.folderId)?(M.has(W.folderId)||M.set(W.folderId,[]),M.get(W.folderId).push(W)):B.push(W)}),{decksByFolder:M,ungroupedDecks:B}},[a,i]),[V,X]=x.useState(!1),Y=M=>{M.preventDefault();const B=M.dataTransfer.getData("text/plain");B&&B===p&&(F(B,null),E()),X(!1)},T=M=>{M.preventDefault(),M.dataTransfer.dropEffect="move",X(!0)};return n.jsxs("div",{className:"space-y-4",children:[i.map(M=>n.jsx(Bh,{folder:M,decks:_.get(M.id)||[],isOpen:j.has(M.id),onToggle:()=>I(M.id),sessionsToResume:c,onUpdateLastOpened:m,onEditFolder:f,onDeleteFolder:h,draggedDeckId:p,onDragStart:N,onDragEnd:E,onMoveDeck:F,onUpdateDeck:R,onDeleteDeck:U,openConfirmModal:Q},M.id)),n.jsx("div",{onDrop:Y,onDragOver:T,onDragLeave:()=>X(!1),className:`p-2 -m-2 rounded-lg transition-colors ${V?"bg-blue-100 dark:bg-blue-900/30":""}`,children:n.jsx("div",{className:"space-y-4",children:H.map(M=>n.jsx(Oo,{deck:M,sessionsToResume:c,onUpdateLastOpened:m,draggedDeckId:p,onDragStart:N,onDragEnd:E,onUpdateDeck:R,onDeleteDeck:U,openConfirmModal:Q},M.id))})})]})},Qh=[{key:"lastOpened",label:"Recent"},{key:"name",label:"Name"},{key:"dueCount",label:"Due"}],Io=({currentSort:a,onSortChange:i,sortOptions:c})=>{const m=c??Qh;return n.jsx("div",{className:"inline-flex rounded-md shadow-sm bg-gray-100 dark:bg-gray-800 p-1",role:"group",children:m&&m.map((f,h)=>n.jsx("button",{type:"button",onClick:()=>i(f.key),className:`px-4 py-1.5 text-sm font-medium transition-colors focus:z-10 focus:outline-none focus:ring-2 focus:ring-blue-500
            ${a===f.key?"bg-white dark:bg-gray-700 text-blue-600 dark:text-blue-300 shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-200/50 dark:hover:bg-gray-700/50"}
            ${h===0?"rounded-l-md":""}
            ${h===m.length-1?"rounded-r-md":""}
          `,"aria-pressed":a===f.key,children:f.label},f.key))})},$d=a=>{const i=new Date;return i.setHours(23,59,59,999),(a.type==="quiz"?a.questions:a.cards).filter(m=>!m.suspended&&new Date(m.dueDate)<=i).length},qh=a=>{const[i,c]=x.useState(""),m=x.useMemo(()=>{const p=a.decks.filter(N=>{var E;return N.name.toLowerCase().includes(i.toLowerCase())||((E=N.description)==null?void 0:E.toLowerCase().includes(i.toLowerCase()))});switch(a.sortPreference){case"name":return p.sort((N,E)=>N.name.localeCompare(E.name));case"dueCount":return p.sort((N,E)=>$d(E)-$d(N));case"lastOpened":default:return p.sort((N,E)=>(E.lastOpened||"").localeCompare(N.lastOpened||""))}},[a.decks,i,a.sortPreference]),f=x.useMemo(()=>[...a.folders].sort((p,N)=>p.name.localeCompare(N.name)),[a.folders]);return a.decks.length>0||a.folders.length>0?n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"All Decks"}),n.jsxs(q,{variant:"primary",onClick:a.onImportDecks,children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Create / Import Deck"]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"relative w-full md:max-w-xs",children:[n.jsx(L,{name:"search",className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search decks...",value:i,onChange:p=>c(p.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2",children:[n.jsxs(q,{variant:"ghost",onClick:a.onNewFolder,children:[n.jsx(L,{name:"folder-plus",className:"w-5 h-5 mr-2"}),n.jsx("span",{className:"hidden sm:inline",children:"New Folder"})]}),n.jsx(Io,{currentSort:a.sortPreference,onSortChange:a.onSortChange})]})]}),n.jsx(Hh,{decks:m,folders:f,...a})]}):n.jsxs("div",{className:"text-center py-20",children:[n.jsx(L,{name:"folder",className:"w-16 h-16 mx-auto text-gray-300 dark:text-gray-600"}),n.jsx("h2",{className:"mt-4 text-2xl font-bold text-gray-600 dark:text-gray-400",children:"Your deck collection is empty"}),n.jsx("p",{className:"mt-2 text-gray-500 dark:text-gray-500",children:"Create a new deck, import from a file, or try a sample deck to get started."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8",children:[n.jsxs(q,{onClick:a.onImportDecks,children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Create or Import Deck"]}),n.jsxs(q,{onClick:a.onCreateSampleDeck,variant:"secondary",children:[n.jsx(L,{name:"laptop",className:"w-5 h-5 mr-2"}),"Create Sample Deck"]})]})]})},Wh=({series:a,seriesProgress:i,seriesData:c,onStartSeriesStudy:m,onCreateNewSeries:f,onCreateSampleSeries:h})=>{const[p,N]=x.useState(""),[E,F]=x.useState("name"),[j,I]=x.useState("all"),R=x.useMemo(()=>{let _=a.filter(H=>H.name.toLowerCase().includes(p.toLowerCase())||H.description.toLowerCase().includes(p.toLowerCase()));switch(j!=="all"&&(_=_.filter(H=>{var T;const V=H.levels.reduce((M,B)=>M+B.deckIds.length,0);if(V===0)return j==="inProgress";const Y=(((T=i.get(H.id))==null?void 0:T.size)||0)>=V;return j==="completed"?Y:!Y})),E){case"progress":return _.sort((H,V)=>{var T,M;const X=(((T=i.get(H.id))==null?void 0:T.size)||0)/(H.levels.reduce((B,W)=>B+W.deckIds.length,0)||1);return(((M=i.get(V.id))==null?void 0:M.size)||0)/(V.levels.reduce((B,W)=>B+W.deckIds.length,0)||1)-X});case"mastery":return _.sort((H,V)=>{var T,M;const X=((T=c.get(H.id))==null?void 0:T.mastery)||0;return(((M=c.get(V.id))==null?void 0:M.mastery)||0)-X});case"name":default:return _.sort((H,V)=>H.name.localeCompare(V.name))}},[a,p,E,j,i,c]),U=[{key:"name",label:"Name"},{key:"progress",label:"Progress"},{key:"mastery",label:"Mastery"}],Q=[{key:"all",label:"All"},{key:"inProgress",label:"In Progress"},{key:"completed",label:"Completed"}];return n.jsxs("div",{className:"space-y-6",children:[n.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center gap-4",children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900 dark:text-gray-100",children:"All Series"}),n.jsxs(q,{variant:"primary",onClick:f,children:[n.jsx(L,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]})]}),n.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4 p-4 bg-gray-50 dark:bg-gray-800/50 rounded-lg border border-gray-200 dark:border-gray-700",children:[n.jsxs("div",{className:"relative w-full md:max-w-xs",children:[n.jsx(L,{name:"search",className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400 dark:text-gray-500"}),n.jsx("input",{type:"text",placeholder:"Search series...",value:p,onChange:_=>N(_.target.value),className:"w-full pl-10 pr-4 py-2 bg-white dark:bg-gray-900 border border-gray-300 dark:border-gray-600 rounded-md focus:ring-2 focus:ring-blue-500 focus:outline-none"})]}),n.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-4",children:[n.jsxs("div",{className:"flex items-center gap-2",children:[n.jsx(L,{name:"filter",className:"w-5 h-5 text-gray-500"}),n.jsx(Io,{currentSort:j,onSortChange:_=>I(_),sortOptions:Q})]}),n.jsx(Io,{currentSort:E,onSortChange:_=>F(_),sortOptions:U})]})]}),R.length>0?n.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:R.map(_=>{var V;const H=c.get(_.id)||{dueCount:0,mastery:0};return n.jsx(su,{series:_,completedCount:((V=i.get(_.id))==null?void 0:V.size)||0,dueCount:H.dueCount,masteryLevel:H.mastery,onStartSeriesStudy:m},_.id)})}):n.jsxs("div",{className:"text-center py-10",children:[n.jsx(L,{name:"layers",className:"w-12 h-12 mx-auto text-gray-300 dark:text-gray-600"}),n.jsx("h3",{className:"mt-2 text-xl font-medium text-gray-900 dark:text-gray-200",children:p?"No series found":"Your series collection is empty"}),n.jsx("p",{className:"mt-1 text-sm text-gray-500 dark:text-gray-400",children:p?"Try adjusting your search or filter.":"Create a new series or try a sample to get started."}),!p&&a.length===0&&n.jsx("div",{className:"mt-6",children:n.jsxs(q,{onClick:h,variant:"secondary",children:[n.jsx(L,{name:"zap",className:"w-4 h-4 mr-2"})," Create Sample Series"]})})]})]})},Bd=a=>{const i=new Date;return i.setHours(23,59,59,999),(a.type===ke.Quiz?a.questions:a.cards).filter(m=>!m.suspended&&new Date(m.dueDate)<=i).length},Vh=a=>{const{path:i}=dr(),{state:c,activeDeck:m,activeSeries:f,generalStudyDeck:h}=a,[p]=i.split("?"),{standaloneDecks:N,seriesDeckIds:E,unlockedSeriesDeckIds:F,totalDueQuestions:j,seriesData:I}=x.useMemo(()=>{const U=new Set;c.deckSeries.forEach(X=>{X.levels.forEach(Y=>Y.deckIds.forEach(T=>U.add(T)))});const Q=c.decks.filter(X=>!X.archived&&!X.deletedAt&&!U.has(X.id)),_=new Set;c.deckSeries.forEach(X=>{var Y;if(!X.archived&&!X.deletedAt){const T=((Y=a.seriesProgress.get(X.id))==null?void 0:Y.size)||0;X.levels.flatMap(B=>B.deckIds).forEach((B,W)=>{W<=T&&_.add(B)})}});const H=c.decks.filter(X=>!(X.archived||X.deletedAt||U.has(X.id)&&!_.has(X.id))).reduce((X,Y)=>X+Bd(Y),0),V=new Map;return c.deckSeries.forEach(X=>{if(X.archived||X.deletedAt){V.set(X.id,{dueCount:0,mastery:0});return}const Y=X.levels.flatMap(W=>W.deckIds).map(W=>c.decks.find(te=>te.id===W)).filter(Boolean),T=Y.reduce((W,te)=>_.has(te.id)?W+Bd(te):W,0),M=Y.flatMap(W=>W.type===ke.Flashcard?W.cards:W.questions).filter(W=>!W.suspended),B=M.length>0?M.reduce((W,te)=>W+Zt(te),0)/M.length:0;V.set(X.id,{dueCount:T,mastery:B})}),{standaloneDecks:Q,seriesDeckIds:U,unlockedSeriesDeckIds:_,totalDueQuestions:H,seriesData:V}},[c.decks,c.deckSeries,a.seriesProgress]);if(p==="/trash"){const U=c.decks.filter(_=>_.deletedAt),Q=c.deckSeries.filter(_=>_.deletedAt);return n.jsx(_h,{trashedDecks:U,trashedSeries:Q,onRestoreDeck:a.handleRestoreDeck,onRestoreSeries:a.handleRestoreSeries,onDeleteDeckPermanently:a.handleDeleteDeckPermanently,onDeleteSeriesPermanently:a.handleDeleteSeriesPermanently,openConfirmModal:a.openConfirmModal})}if(p==="/archive"){const U=c.decks.filter(_=>_.archived&&!_.deletedAt),Q=c.deckSeries.filter(_=>_.archived&&!_.deletedAt);return n.jsx(Lh,{archivedDecks:U,archivedSeries:Q,onUpdateDeck:a.handleUpdateDeck,onUpdateSeries:a.handleUpdateSeries,onDeleteDeck:a.handleDeleteDeck,onDeleteSeries:a.handleDeleteSeries,openConfirmModal:a.openConfirmModal})}if(p.startsWith("/series/")&&f){const U=f.levels.flatMap(Q=>Q.deckIds).map(Q=>c.decks.find(_=>_.id===Q)).filter(Q=>Q);return n.jsx(Oh,{series:f,decks:U,completedDeckIds:a.seriesProgress.get(f.id)||new Set,sessionsToResume:a.sessionsToResume,onUpdateSeries:a.handleUpdateSeries,onDeleteSeries:a.handleDeleteSeries,onAddDeckToSeries:a.handleAddDeckToSeries,onUpdateDeck:a.handleUpdateDeck,onStartSeriesStudy:a.handleStartSeriesStudy,openConfirmModal:a.openConfirmModal},f.id)}if(p==="/study/general"){const U=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return h&&n.jsx(ya,{deck:h,seriesId:U,onSessionEnd:Q=>a.handleSessionEnd(Q,U),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:()=>{}},"general-study")}if(p.startsWith("/decks/")&&p.endsWith("/cram")&&m){const Q=[...(m.type===ke.Flashcard?m.cards:m.questions).filter(V=>!V.suspended)].sort(()=>Math.random()-.5);let _;m.type===ke.Flashcard?_={...m,name:`${m.name} (Cram)`,cards:Q}:_={...m,name:`${m.name} (Cram)`,questions:Q};const H=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return n.jsx(ya,{deck:_,seriesId:H,onSessionEnd:V=>a.handleSessionEnd(V,H),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened,sessionKeySuffix:"_cram"},`${m.id}-cram`)}if(p.startsWith("/decks/")&&p.endsWith("/study-flip")&&m&&m.type===ke.Quiz){const U=m,Q=U.questions.filter(V=>!V.suspended).map(V=>{const X=V.options.find(T=>T.id===V.correctAnswerId),Y=`
                        <div class="text-left w-full">
                            <p class="text-xl"><b>Answer:</b> ${(X==null?void 0:X.text)||"N/A"}</p>
                            <hr class="my-4 border-gray-300 dark:border-gray-600"/>
                            <p class="text-sm font-semibold uppercase tracking-wider text-gray-500 dark:text-gray-400">Explanation</p>
                            <div class="prose prose-sm dark:prose-invert max-w-none mt-2">${V.detailedExplanation||"No detailed explanation provided."}</div>
                        </div>
                    `;return{...V,front:V.questionText,back:Y}}),_={...U,name:`${U.name} (Review)`,type:ke.Flashcard,cards:Q.sort(()=>Math.random()-.5)},H=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return n.jsx(ya,{deck:_,seriesId:H,onSessionEnd:V=>a.handleSessionEnd(V,H),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened,sessionKeySuffix:"_flip"},`${m.id}-flip`)}if(p.startsWith("/decks/")&&p.endsWith("/study")){const U=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId")||void 0;return m&&n.jsx(ya,{deck:m,seriesId:U,onSessionEnd:Q=>a.handleSessionEnd(Q,U),onItemReviewed:a.handleItemReviewed,onUpdateLastOpened:a.updateLastOpened},m.id)}if(p.startsWith("/decks/"))return m&&n.jsx(Ph,{deck:m,sessionsToResume:a.sessionsToResume,folders:c.folders,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,onUpdateLastOpened:a.updateLastOpened,openConfirmModal:a.openConfirmModal},m.id);if(p==="/settings")return n.jsx(jh,{onExport:a.handleExportData,onRestore:()=>a.openModal(a.setRestoreModalOpen),onRestoreData:a.handleRestoreData,onResetProgress:()=>a.openModal(a.setResetProgressModalOpen),onFactoryReset:a.handleFactoryReset});if(p==="/instructions/json")return n.jsx(Rh,{});if(p==="/decks")return n.jsx(qh,{decks:N,folders:c.folders,sessionsToResume:a.sessionsToResume,sortPreference:a.sortPreference,onSortChange:a.setSortPreference,onUpdateLastOpened:a.updateLastOpened,onEditFolder:U=>a.openFolderModal(U),onDeleteFolder:a.handleDeleteFolder,draggedDeckId:a.draggedDeckId,onDragStart:a.setDraggedDeckId,onDragEnd:()=>a.setDraggedDeckId(null),onMoveDeck:a.handleMoveDeck,openFolderIds:a.openFolderIds,onToggleFolder:a.onToggleFolder,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,openConfirmModal:a.openConfirmModal,onNewFolder:()=>a.openFolderModal("new"),onImportDecks:()=>a.openModal(a.setImportModalOpen),onCreateSampleDeck:a.handleCreateSampleDeck});if(p==="/series")return n.jsx(Wh,{series:c.deckSeries.filter(U=>!U.archived&&!U.deletedAt),seriesProgress:a.seriesProgress,seriesData:I,onStartSeriesStudy:a.handleStartSeriesStudy,onCreateNewSeries:a.openCreateSeriesModal,onCreateSampleSeries:a.handleCreateSampleSeries});const R=c.deckSeries.filter(U=>!U.archived&&!U.deletedAt);if(N.length>0||R.length>0){const U=[...R].sort((_,H)=>{const V=_.levels.flatMap(M=>M.deckIds).map(M=>c.decks.find(B=>B.id===M)).filter(Boolean),X=H.levels.flatMap(M=>M.deckIds).map(M=>c.decks.find(B=>B.id===M)).filter(Boolean),Y=Math.max(0,...V.map(M=>new Date(M.lastOpened||0).getTime()));return Math.max(0,...X.map(M=>new Date(M.lastOpened||0).getTime()))-Y}).slice(0,2),Q=[...N].sort((_,H)=>(H.lastOpened||"").localeCompare(_.lastOpened||"")).slice(0,2);return n.jsx($h,{recentSeries:U,recentDecks:Q,totalDueQuestions:j,onStartGeneralStudy:a.handleStartGeneralStudy,sessionsToResume:a.sessionsToResume,onUpdateLastOpened:a.updateLastOpened,onUpdateDeck:a.handleUpdateDeck,onDeleteDeck:a.handleDeleteDeck,openConfirmModal:a.openConfirmModal,seriesData:I,seriesProgress:a.seriesProgress,onStartSeriesStudy:a.handleStartSeriesStudy})}return n.jsxs("div",{className:"text-center py-20",children:[n.jsx("h2",{className:"text-3xl font-bold text-gray-600 dark:text-gray-400",children:"Welcome to CogniFlow"}),n.jsx("p",{className:"mt-4 text-gray-500 dark:text-gray-500",children:"Create decks, import content, or try a sample to get started."}),n.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center gap-4 mt-8",children:[n.jsxs(q,{onClick:()=>a.openModal(a.setImportModalOpen),children:[n.jsx(L,{name:"plus",className:"w-5 h-5 mr-2"}),"Create or Import Deck"]}),n.jsxs(q,{onClick:a.openCreateSeriesModal,variant:"secondary",children:[n.jsx(L,{name:"layers",className:"w-5 h-5 mr-2"}),"Create New Series"]}),n.jsxs(q,{onClick:a.handleCreateSampleDeck,variant:"ghost",children:[n.jsx(L,{name:"laptop",className:"w-5 h-5 mr-2"}),"Create Sample Deck"]}),n.jsxs(q,{onClick:a.handleCreateSampleSeries,variant:"ghost",children:[n.jsx(L,{name:"zap",className:"w-5 h-5 mr-2"}),"Create Sample Series"]})]})]})},Hd=a=>new DOMParser().parseFromString(a,"text/html").body.textContent||"",Jh=({isOpen:a,onClose:i,decks:c,series:m,actions:f})=>{const[h,p]=x.useState(""),[N,E]=x.useState(0),F=x.useRef(null),j=x.useRef(null),{navigate:I}=dr();Lt(F,a);const R=x.useMemo(()=>{const T=[];return f.forEach(M=>T.push({type:"action",id:M.id,label:M.label,icon:M.icon,run:M.action,keywords:M.keywords,searchableOnly:M.searchableOnly})),c.filter(M=>!M.archived&&!M.deletedAt).forEach(M=>T.push({type:"deck",id:M.id,name:M.name,itemType:M.type})),m.filter(M=>!M.archived&&!M.deletedAt).forEach(M=>T.push({type:"series",id:M.id,name:M.name})),c.filter(M=>!M.archived&&!M.deletedAt).forEach(M=>{M.type==="flashcard"?M.cards.forEach(B=>T.push({type:"card",id:B.id,deckId:M.id,deckName:M.name,front:B.front})):M.questions.forEach(B=>T.push({type:"question",id:B.id,deckId:M.id,deckName:M.name,text:B.questionText}))}),T},[f,c,m]),U=x.useMemo(()=>{if(!h.trim())return R.filter(B=>B.type==="action"&&!B.searchableOnly);const T=h.toLowerCase();return R.filter(B=>{switch(B.type){case"action":{const W=B,te=W.label.toLowerCase().includes(T),we=(W.keywords||[]).some(Ee=>Ee.toLowerCase().includes(T));return te||we}case"deck":return B.name.toLowerCase().includes(T);case"series":return B.name.toLowerCase().includes(T);case"card":return Hd(B.front).toLowerCase().includes(T);case"question":return B.text.toLowerCase().includes(T);default:return!1}}).slice(0,50)},[h,R]),Q=x.useMemo(()=>{const T={Actions:[],Series:[],Decks:[],Cards:[]};return U.forEach(M=>{M.type==="action"?T.Actions.push(M):M.type==="series"?T.Series.push(M):M.type==="deck"?T.Decks.push(M):(M.type==="card"||M.type==="question")&&T.Cards.push(M)}),Object.entries(T).filter(([,M])=>M.length>0)},[U]),_=x.useMemo(()=>Q.flatMap(([,T])=>T),[Q]),H=x.useCallback(T=>{switch(T.type){case"action":T.run();break;case"deck":I(`/decks/${T.id}`);break;case"series":I(`/series/${T.id}`);break;case"card":case"question":I(`/decks/${T.deckId}`);break}i()},[I,i]);x.useEffect(()=>{const T=M=>{if(a)if(M.key==="ArrowDown")M.preventDefault(),E(B=>(B+1)%(_.length||1));else if(M.key==="ArrowUp")M.preventDefault(),E(B=>(B-1+(_.length||1))%(_.length||1));else if(M.key==="Enter"){M.preventDefault();const B=_[N];B&&H(B)}else M.key==="Escape"&&i()};return window.addEventListener("keydown",T),()=>window.removeEventListener("keydown",T)},[a,N,_,H,i]),x.useEffect(()=>{a&&(p(""),E(0))},[a]),x.useEffect(()=>{E(0)},[h]),x.useEffect(()=>{var T;(T=document.getElementById(`cmdk-item-${N}`))==null||T.scrollIntoView({block:"nearest"})},[N]);const V=T=>{T.target===T.currentTarget&&i()};if(!a)return null;const X=(T,M)=>{let B,W="",te;switch(T.type){case"action":B=T.icon,W=T.label;break;case"deck":B=T.itemType==="quiz"?"help-circle":"laptop",W=T.name;break;case"series":B="layers",W=T.name;break;case"card":B="laptop",W=Hd(T.front),te=`In: ${T.deckName}`;break;case"question":B="help-circle",W=T.text,te=`In: ${T.deckName}`;break}return n.jsxs("li",{id:`cmdk-item-${M}`,role:"option","aria-selected":N===M,onClick:()=>H(T),className:`flex items-center gap-4 px-4 py-3 cursor-pointer rounded-md ${N===M?"bg-blue-100 dark:bg-blue-900/50":"hover:bg-gray-100 dark:hover:bg-gray-700/50"}`,children:[n.jsx(L,{name:B,className:"w-5 h-5 text-gray-500 dark:text-gray-400 flex-shrink-0"}),n.jsxs("div",{className:"flex-grow min-w-0",children:[n.jsx("p",{className:`font-medium truncate ${N===M?"text-blue-800 dark:text-blue-200":"text-gray-800 dark:text-gray-200"}`,children:W}),te&&n.jsx("p",{className:`text-sm truncate ${N===M?"text-blue-600 dark:text-blue-400":"text-gray-500 dark:text-gray-400"}`,children:te})]})]},T.id)};let Y=0;return n.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex justify-center items-start pt-4 sm:pt-[15vh] z-50 p-4",onClick:V,children:n.jsxs("div",{ref:F,role:"dialog","aria-modal":"true",className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-full max-w-2xl transform transition-all relative max-h-[70vh] flex flex-col",children:[n.jsxs("div",{className:"flex items-center gap-2 p-4 border-b border-gray-200 dark:border-gray-700",children:[n.jsx(L,{name:"search",className:"w-5 h-5 text-gray-400 dark:text-gray-500"}),n.jsx("input",{type:"text",value:h,onChange:T=>p(T.target.value),placeholder:"Search for anything or type a command...",className:"w-full bg-transparent focus:outline-none text-lg placeholder:text-gray-400 dark:placeholder:text-gray-500",autoFocus:!0}),n.jsx("div",{className:"hidden sm:block text-xs text-gray-400 dark:text-gray-500 border border-gray-300 dark:border-gray-600 rounded px-1.5 py-0.5",children:"ESC"})]}),n.jsx("div",{className:"flex-grow overflow-y-auto p-2",children:_.length>0?n.jsx("ul",{ref:j,role:"listbox",children:Q.map(([T,M])=>n.jsxs("li",{children:[n.jsx("p",{className:"px-4 py-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:T}),n.jsx("ul",{className:"space-y-1",children:M.map(B=>X(B,Y++))})]},T))}):n.jsx("div",{className:"text-center py-10 px-4",children:n.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['No results found for "',h,'".']})})}),n.jsx("div",{className:"hidden sm:flex flex-shrink-0 justify-end items-center p-2 border-t border-gray-200 dark:border-gray-700",children:n.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[n.jsx(L,{name:"terminal",className:"inline-block w-4 h-4 mr-2"}),n.jsx("kbd",{className:"font-sans",children:"Cmd+K"})," to toggle"]})})]})})},Yh=()=>{const[a,i]=Jm(),[c,m]=x.useState(!1),[f,h]=x.useState(!1),[p,N]=x.useState(!1),[E,F]=x.useState(!1),[j,I]=x.useState(!1),[R,U]=x.useState(null),[Q,_]=x.useState(null),[H,V]=x.useState({title:"",message:"",onConfirm:()=>{}}),[X,Y]=x.useState(!1),[T,M]=x.useState(new Set),[B,W]=x.useState(null),[te,we]=x.useState("lastOpened"),[Ee,ee]=x.useState(null),[J,ae]=x.useState(new Set),[ie,Ne]=x.useState(new Map),[Te,De]=Sm(),{addToast:G}=kt(),oe=x.useRef(null),{path:w,navigate:d}=dr(),b=x.useRef(!1),{pullToRefreshState:y,handleTouchStart:k,handleTouchMove:v,handleTouchEnd:D,REFRESH_THRESHOLD:$}=th(),A=be=>{oe.current=document.activeElement,be(!0)},se=be=>{V(be),A(F)},de=be=>{var je;be(!1),(je=oe.current)==null||je.focus()},re=Zm({state:a,dispatch:i,sessionsToResume:T,setSessionsToResume:M,seriesProgress:ie,setSeriesProgress:Ne,setGeneralStudyDeck:W,openConfirmModal:se,setFolderToEdit:be=>{A(U),U(be)},setSeriesToEdit:be=>{A(_),_(be)}}),{handleAddDecks:me}=re;x.useEffect(()=>{const be=je=>{if((je.metaKey||je.ctrlKey)&&je.key==="k"){je.preventDefault();const Me=je.target;!(Me.tagName==="INPUT"||Me.tagName==="TEXTAREA"||Me.isContentEditable)&&!(c||f||p||E||R!==null||Q!==null)&&A(I)}};return window.addEventListener("keydown",be),()=>window.removeEventListener("keydown",be)},[c,f,p,E,R,Q]);const ye=x.useCallback(async(be=!1)=>{be&&i({type:"SET_LOADING",payload:!0});try{const[je,Me,Se]=await Promise.all([Po(),Ro(),Fo()]);i({type:"LOAD_DATA",payload:{decks:je,folders:Me,deckSeries:Se}}),be||G("Data synced from another tab.","info")}catch(je){console.error("Failed to load data from IndexedDB",je);const Me=je instanceof Error?je.message:"Could not load your data. Please try refreshing.";G(Me,"error"),i({type:"SET_LOADING",payload:!1})}},[G,i]),he=x.useCallback(async()=>{const be=new Date;be.setDate(be.getDate()-10);const je=a.decks.filter(Se=>Se.deletedAt&&new Date(Se.deletedAt)<be),Me=a.deckSeries.filter(Se=>Se.deletedAt&&new Date(Se.deletedAt)<be);if(!(je.length===0&&Me.length===0))try{await Promise.all([...je.map(Le=>Co(Le.id)),...Me.map(Le=>Jd(Le.id))]),je.forEach(Le=>i({type:"DELETE_DECK",payload:Le.id})),Me.forEach(Le=>i({type:"DELETE_SERIES",payload:Le.id}));const Se=je.length+Me.length;G(`${Se} item(s) permanently deleted from trash.`,"info")}catch(Se){console.error("Failed to cleanup trash",Se),G("Error during automatic trash cleanup.","error")}},[a.decks,a.deckSeries,i,G]),Ie=x.useCallback(()=>{try{"serviceWorker"in navigator&&window.addEventListener("load",()=>{navigator.serviceWorker.register("/sw.js").catch(Se=>console.log("SW registration failed: ",Se))});const be=new Set;let je=new Map;for(let Se=0;Se<localStorage.length;Se++){const Le=localStorage.key(Se);if(Le&&(Le.startsWith("session_deck_")&&be.add(Le.replace("session_deck_","")),Le.startsWith("series-progress-"))){const dt=Le.replace("series-progress-","");try{je.set(dt,new Set(JSON.parse(localStorage.getItem(Le)||"[]")))}catch{console.error(`Failed to parse progress for series ${dt}`)}}}M(be),Ne(je);const Me=localStorage.getItem("cogniflow-sortPreference");Me&&["lastOpened","name","dueCount"].includes(Me)&&we(Me);try{const Se=localStorage.getItem("cogniflow-openFolders");Se&&ae(new Set(JSON.parse(Se)))}catch(Se){console.error("Could not load open folder state",Se)}}catch(be){console.error("Failed to load local settings from localStorage. This can happen if cookies/site data are disabled.",be),G("Could not load saved settings.","error")}},[G,ae,Ne,M,we]);x.useEffect(()=>{ye(!0),Ie()},[ye,Ie]),x.useEffect(()=>{!a.isLoading&&!b.current&&(he(),re.reconcileSeriesProgress(),b.current=!0)},[a.isLoading,he,re]),x.useEffect(()=>{const be=hm(()=>ye(!1)),je=()=>Ie();return window.addEventListener("storage",je),()=>{be(),window.removeEventListener("storage",je)}},[ye,Ie]),x.useEffect(()=>{const be=window.launchQueue;be&&be.setConsumer(async je=>{if(!je.files||je.files.length===0)return;const Me=je.files[0];try{const Se=await Me.getFile();if(Se.name.toLowerCase().endsWith(".apkg")){G(`Importing ${Se.name}...`,"info");const Le=await Se.arrayBuffer(),dt=await Xd(Le);dt.length>0?(await me(dt),G(`Successfully imported ${dt.length} deck(s) from ${Se.name}.`,"success")):G("No valid decks found in the Anki package.","info")}}catch(Se){console.error("Failed to process launched file:",Se),G(`An error occurred: ${Se instanceof Error?Se.message:"Unknown error"}`,"error")}})},[me,G]);const Ue=x.useCallback(be=>{ae(je=>{const Me=new Set(je);Me.has(be)?Me.delete(be):Me.add(be);try{localStorage.setItem("cogniflow-openFolders",JSON.stringify(Array.from(Me)))}catch(Se){console.error("Could not save open folder state",Se)}return Me})},[]),qe=x.useMemo(()=>{var dt;const je=(mt=>{var Et;return((Et=mt.match(/^\/decks\/([^/?]+)/))==null?void 0:Et[1])||null})(w);if(!je)return null;const Me=a.decks.find(mt=>mt.id===je);if(!Me)return null;const Le=new URLSearchParams(window.location.hash.split("?")[1]).get("seriesId");if(Le){const mt=a.deckSeries.find(Et=>Et.id===Le);if(mt){const ur=mt.levels.flatMap(Dt=>Dt.deckIds).indexOf(je);if(ur>-1){const Dt=((dt=ie.get(mt.id))==null?void 0:dt.size)||0,_t=ur>Dt;return{...Me,locked:_t}}}}return Me},[w,a.decks,a.deckSeries,ie]),Ze=x.useMemo(()=>{const je=(Me=>{var Se;return((Se=Me.match(/^\/series\/([^/?]+)/))==null?void 0:Se[1])||null})(w);return je?a.deckSeries.find(Me=>Me.id===je):null},[w,a.deckSeries]),wt=x.useMemo(()=>{const be=()=>{oe.current=document.activeElement,_("new")},je=Me=>{d("/settings"),setTimeout(()=>{var Se;(Se=document.getElementById(Me))==null||Se.scrollIntoView({behavior:"smooth",block:"center"})},100)};return[{id:"new-deck",label:"New / Import Deck",icon:"plus",action:()=>A(m)},{id:"new-series",label:"Create New Series",icon:"layers",action:be},{id:"go-decks",label:"Go to All Decks",icon:"folder",action:()=>d("/decks")},{id:"go-series",label:"Go to All Series",icon:"layers",action:()=>d("/series")},{id:"go-archive",label:"Go to Archive",icon:"archive",action:()=>d("/archive")},{id:"go-trash",label:"Go to Trash",icon:"trash-2",action:()=>d("/trash")},{id:"go-settings",label:"Go to Settings",icon:"settings",action:()=>d("/settings")},{id:"go-appearance-settings",label:"Go to Appearance Settings",icon:"sun",action:()=>je("settings-appearance"),searchableOnly:!0,keywords:["theme","dark","light","animation","haptics"]},{id:"go-local-backup",label:"Go to Local Backup",icon:"download",action:()=>je("settings-local-backup"),searchableOnly:!0,keywords:["export","import","json","file","download","data"]},{id:"go-cloud-backup",label:"Go to Cloud Backup",icon:"upload-cloud",action:()=>je("google-drive-backup"),searchableOnly:!0,keywords:["google","drive","sync","data"]},{id:"go-cache-management",label:"Go to Cache Management",icon:"broom",action:()=>je("settings-cache-management"),searchableOnly:!0,keywords:["clear","reload","refresh","storage","data","service worker"]},{id:"go-reset-progress",label:"Go to Reset Progress",icon:"refresh-ccw",action:()=>je("settings-reset-progress"),searchableOnly:!0,keywords:["srs","spaced repetition","start over","danger"]},{id:"go-factory-reset",label:"Go to Factory Reset",icon:"trash-2",action:()=>je("settings-factory-reset"),searchableOnly:!0,keywords:["delete all","wipe","clean","erase","danger"]}]},[d]);if(a.isLoading)return n.jsx("div",{className:"min-h-screen flex items-center justify-center",children:n.jsxs("h1",{className:"text-2xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:[n.jsx(xn,{size:"lg"}),"Loading CogniFlow..."]})});const et=`flex-grow transition-transform duration-300 ease-in-out ${X?"-translate-x-16 sm:-translate-x-20":""}`;return n.jsxs("div",{className:"min-h-screen text-gray-900 dark:text-gray-100 flex flex-col overflow-x-hidden",onTouchStart:k,onTouchMove:v,onTouchEnd:D,children:[n.jsx(qm,{pullDistance:y.pullDistance,isRefreshing:y.isRefreshing,threshold:$}),n.jsx(Mm,{isOpen:X,onClose:()=>de(Y),onImport:()=>{A(m),Y(!1)},onCreateSeries:()=>{Y(!1),oe.current=document.activeElement,_("new")},onInstall:Te?()=>{De(),de(Y)}:null}),n.jsxs("div",{className:"flex-grow flex flex-col",children:[n.jsx(rh,{activeDeck:qe,onOpenMenu:()=>A(Y),onOpenCommandPalette:()=>A(I)}),n.jsx("main",{className:`${et} container mx-auto px-4 sm:px-6 lg:px-8 py-8`,children:n.jsx(Vh,{state:a,sessionsToResume:T,sortPreference:te,setSortPreference:we,draggedDeckId:Ee,setDraggedDeckId:ee,openFolderIds:J,onToggleFolder:Ue,seriesProgress:ie,generalStudyDeck:B,activeDeck:qe,activeSeries:Ze,openModal:A,setImportModalOpen:m,setRestoreModalOpen:h,setResetProgressModalOpen:N,openFolderModal:be=>{oe.current=document.activeElement,U(be)},openConfirmModal:se,openCreateSeriesModal:()=>{oe.current=document.activeElement,_("new")},...re})})]}),n.jsx(Em,{}),n.jsx(Jh,{isOpen:j,onClose:()=>de(I),decks:a.decks,series:a.deckSeries,actions:wt}),c&&n.jsx($m,{isOpen:c,onClose:()=>de(m),onAddDecks:re.handleAddDecks,onAddSeriesWithDecks:re.handleAddSeriesWithDecks}),f&&n.jsx(Bm,{isOpen:f,onClose:()=>de(h),onRestore:re.handleRestoreData}),p&&n.jsx(Hm,{isOpen:p,onClose:()=>de(N),onReset:re.handleResetDeckProgress,decks:a.decks}),E&&n.jsx(Sa,{isOpen:E,onClose:()=>de(F),...H}),R!==null&&n.jsx(Qm,{folder:R==="new"?null:R,onClose:()=>U(null),onSave:re.handleSaveFolder}),Q!==null&&n.jsx(Zd,{series:Q==="new"?null:Q,onClose:()=>_(null),onSave:re.handleSaveSeries})]})};class Gh extends x.Component{constructor(){super(...arguments),this.state={hasError:!1},this.handleReload=()=>{window.location.reload()}}static getDerivedStateFromError(i){return{hasError:!0,error:i}}componentDidCatch(i,c){console.error("Uncaught error:",i,c)}render(){return this.state.hasError?n.jsx("div",{className:"min-h-screen flex items-center justify-center p-4",children:n.jsxs("div",{className:"text-center bg-white dark:bg-gray-800 p-8 rounded-lg shadow-xl max-w-md w-full",children:[n.jsx("h1",{className:"text-3xl font-bold text-red-600 dark:text-red-500 mb-4",children:"Oops! Something went wrong."}),n.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-6",children:"The application encountered an unexpected error. Please try reloading the page to continue."}),this.state.error&&n.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 text-left text-xs text-red-500 dark:text-red-400 p-4 rounded-md overflow-x-auto mb-6",children:n.jsx("code",{children:this.state.error.toString()})}),n.jsx(q,{variant:"danger",onClick:this.handleReload,children:"Reload Page"})]})}):this.props.children}}const So="cogniflow-themeMode",Kh=x.createContext(void 0),Xh=({children:a})=>{const[i,c]=x.useState(()=>{try{if(typeof window<"u"){const f=localStorage.getItem(So);if(["light","dark","system"].includes(f))return f}}catch(f){console.error("Could not access localStorage to get theme. Defaulting to 'system'.",f)}return"system"});x.useEffect(()=>{try{localStorage.setItem(So,i)}catch(N){console.error("Could not access localStorage to set theme.",N)}const f=window.document.documentElement,h=document.querySelector('meta[name="theme-color"]');let p;i==="light"?p=!1:i==="dark"?p=!0:p=window.matchMedia("(prefers-color-scheme: dark)").matches,p?f.classList.add("dark"):f.classList.remove("dark"),h==null||h.setAttribute("content",p?"#111827":"#f9fafb")},[i]),x.useEffect(()=>{const f=window.matchMedia("(prefers-color-scheme: dark)"),h=p=>{let N="system";try{N=localStorage.getItem(So)||"system"}catch{}if(N==="system"){const E=window.document.documentElement,F=document.querySelector('meta[name="theme-color"]');p.matches?(E.classList.add("dark"),F==null||F.setAttribute("content","#111827")):(E.classList.remove("dark"),F==null||F.setAttribute("content","#f9fafb"))}};return f.addEventListener("change",h),()=>{f.removeEventListener("change",h)}},[]);const m=x.useCallback(()=>{c(f=>f==="light"?"dark":f==="dark"?"system":"light")},[]);return n.jsx(Kh.Provider,{value:{themeMode:i,cycleThemeMode:m},children:a})},au=document.getElementById("root");if(!au)throw new Error("Could not find root element to mount to");const Zh=fm.createRoot(au);Zh.render(n.jsx(ja.StrictMode,{children:n.jsx(Xh,{children:n.jsx(Rm,{children:n.jsx(eh,{children:n.jsx(Im,{children:n.jsx(Gh,{children:n.jsx(Yh,{})})})})})})}))});export default ep();
