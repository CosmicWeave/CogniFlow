import{n as G,j as e,t as ee,I as t,r as x,c as se,B as r,u as ae,a as te,i as re,A as le,o as j,q as g,v as y}from"./index-Bo0ygskk.js";import{T as v}from"./ToggleSwitch-BX4tP9GD.js";const $=({theme:a,isSelected:o,onClick:p,onDelete:d})=>{const i=a.id==="system",l=a.isDark,h=a.palette,b=i?a.paletteDark:l?a.palette:null,w=`w-full h-24 rounded-lg border-2 transition-all duration-200 cursor-pointer flex flex-col justify-between p-2 text-left relative ${o?"border-primary ring-2 ring-primary ring-offset-2 ring-offset-background":"border-border hover:border-text-muted"}`,n=f=>`rgb(${f})`;return e.jsxs("div",{className:"relative group",children:[e.jsxs("button",{onClick:p,className:w,"aria-pressed":o,"aria-label":`Select ${a.name} theme`,children:[e.jsx("div",{className:"w-full h-full absolute top-0 left-0 overflow-hidden rounded-[5px]",children:i?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-1/2 h-full absolute top-0 left-0",style:{backgroundColor:n(h.surface)}}),e.jsx("div",{className:"w-1/2 h-full absolute top-0 right-0",style:{backgroundColor:n(b.surface)}})]}):e.jsx("div",{className:"w-full h-full absolute top-0 left-0",style:{backgroundColor:n(h.surface)}})}),e.jsxs("div",{className:"relative flex items-center justify-between w-full",children:[e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded-full text-xs backdrop-blur-sm",style:{backgroundColor:`rgba(${h.background.replace(/ /g,",")}, 0.6)`},children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n(h.primary)}}),e.jsx("span",{style:{color:n(h.text)},children:"Aa"})]}),o&&e.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center bg-primary",children:e.jsx(t,{name:"check-circle",className:"w-4 h-4 text-on-primary"})})]}),e.jsxs("div",{className:"relative flex items-center gap-2",children:[i&&e.jsx(e.Fragment,{children:e.jsx(t,{name:"monitor",className:"w-4 h-4",style:{color:n(h.text)}})}),!i&&l&&e.jsx(t,{name:"moon",className:"w-4 h-4",style:{color:n(h.text)}}),!i&&!l&&e.jsx(t,{name:"sun",className:"w-4 h-4",style:{color:n(h.text)}})]})]}),e.jsx("p",{className:`text-center text-sm font-medium mt-2 transition-colors ${o?"text-primary":"text-text"}`,children:a.name}),d&&e.jsx("button",{onClick:f=>{f.stopPropagation(),d()},className:"absolute -top-2 -right-2 bg-red-500 text-white rounded-full p-1 shadow-md opacity-0 group-hover:opacity-100 transition-opacity hover:bg-red-600",title:"Delete Theme",children:e.jsx(t,{name:"x",className:"w-3 h-3"})})]})},ne=({selectedTheme:a,onThemeChange:o,onOpenBuilder:p})=>{const{customThemes:d,deleteCustomTheme:i}=G();return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Preset Themes"}),e.jsx("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:ee.map(l=>e.jsx($,{theme:l,isSelected:a===l.id,onClick:()=>o(l.id)},l.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-2",children:"Custom Themes"}),e.jsxs("div",{className:"grid grid-cols-3 sm:grid-cols-4 md:grid-cols-5 gap-4",children:[d.map(l=>e.jsx($,{theme:l,isSelected:a===l.id,onClick:()=>o(l.id),onDelete:()=>i(l.id)},l.id)),e.jsxs("button",{onClick:p,className:"w-full h-24 rounded-lg border-2 border-dashed border-border hover:border-primary hover:bg-surface/50 transition-all duration-200 flex flex-col items-center justify-center text-text-muted hover:text-primary group",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-surface border border-border group-hover:border-primary flex items-center justify-center mb-2",children:e.jsx(t,{name:"plus",className:"w-5 h-5"})}),e.jsx("span",{className:"text-xs font-medium",children:"Create New"})]})]})]})]})},q="cogniflow-sync-log",ce=()=>{try{const a=localStorage.getItem(q);return a?JSON.parse(a):[]}catch(a){return console.error("Failed to read sync log",a),[]}},oe=()=>{localStorage.removeItem(q)},D=a=>{const o=parseInt(a.slice(1),16),p=o>>16&255,d=o>>8&255,i=o&255;return`${p} ${d} ${i}`},O=a=>{const o=parseInt(a.slice(1,3),16),p=parseInt(a.slice(3,5),16),d=parseInt(a.slice(5,7),16);return(o*299+p*587+d*114)/1e3>=128?"0 0 0":"255 255 255"},de=({isOpen:a,onClose:o,onSave:p})=>{const[d,i]=x.useState(""),[l,h]=x.useState(!1),[b,w]=x.useState("#3b82f6"),[n,f]=x.useState("#ffffff"),[N,k]=x.useState("#f3f4f6"),[m,C]=x.useState("#111827"),S=x.useRef(null);se(S,a),x.useEffect(()=>{l?(f("#111827"),k("#1f2937"),C("#f9fafb")):(f("#f9fafb"),k("#ffffff"),C("#111827"))},[l]);const I=u=>{if(u.preventDefault(),!d.trim())return;const B={id:`custom-${crypto.randomUUID()}`,name:d.trim(),isDark:l,metaColor:n,isCustom:!0,palette:{primary:D(b),background:D(n),surface:D(N),text:D(m),onPrimary:O(b)}};p(B),o()};return a?e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-[60] p-4",children:e.jsxs("div",{ref:S,className:"bg-surface rounded-lg shadow-xl w-full max-w-lg transform transition-all relative flex flex-col max-h-[90vh]",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 border-b border-border",children:[e.jsx("h2",{className:"text-xl font-bold text-text",children:"Create Custom Theme"}),e.jsx(r,{type:"button",variant:"ghost",onClick:o,className:"p-1 h-auto",children:e.jsx(t,{name:"x"})})]}),e.jsxs("div",{className:"p-6 overflow-y-auto space-y-6",children:[e.jsxs("div",{className:"rounded-lg border border-border overflow-hidden",style:{backgroundColor:n,color:m},children:[e.jsxs("div",{className:"p-4 border-b border-border flex justify-between items-center",style:{backgroundColor:N,borderColor:"rgba(128,128,128,0.2)"},children:[e.jsx("span",{className:"font-bold",children:"Preview"}),e.jsx("span",{className:"text-xs opacity-70",children:"10:00 AM"})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold",children:"Your Learning Journey"}),e.jsx("p",{className:"opacity-80",children:"This is how your theme will look. Adjust the colors below to find your perfect style."}),e.jsxs("div",{className:"p-4 rounded-lg shadow-sm border",style:{backgroundColor:N,borderColor:"rgba(128,128,128,0.2)"},children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("span",{className:"font-semibold",children:"Flashcard"}),e.jsx("span",{className:"text-xs",style:{color:b},children:"Due Now"})]}),e.jsx("div",{className:"h-2 rounded-full w-full opacity-20",style:{backgroundColor:m},children:e.jsx("div",{className:"h-2 rounded-full w-2/3",style:{backgroundColor:b}})})]}),e.jsx("button",{className:"px-4 py-2 rounded-md font-medium w-full",style:{backgroundColor:b,color:`rgb(${O(b)})`},children:"Primary Button"})]})]}),e.jsxs("form",{id:"theme-form",onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Theme Name"}),e.jsx("input",{type:"text",value:d,onChange:u=>i(u.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",placeholder:"e.g., Midnight Purple",required:!0})]}),e.jsx(v,{label:"Dark Mode Base",checked:l,onChange:h,description:"Adjusts browser UI elements."}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Primary Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:b,onChange:u=>w(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:b})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Background"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:n,onChange:u=>f(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:n})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Surface (Cards)"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:N,onChange:u=>k(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:N})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Text Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:m,onChange:u=>C(u.target.value),className:"h-10 w-10 p-0 border-0 rounded cursor-pointer"}),e.jsx("span",{className:"text-xs text-text-muted font-mono",children:m})]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end p-4 bg-background/50 border-t border-border gap-2",children:[e.jsx(r,{type:"button",variant:"secondary",onClick:o,children:"Cancel"}),e.jsx(r,{type:"submit",form:"theme-form",variant:"primary",disabled:!d.trim(),children:"Save Theme"})]})]})}):null},ie=a=>{switch(a){case"success":return e.jsx(t,{name:"check-circle",className:"w-4 h-4 text-green-500"});case"info":return e.jsx(t,{name:"info",className:"w-4 h-4 text-blue-500"});case"warning":return e.jsx(t,{name:"zap",className:"w-4 h-4 text-yellow-500"});case"error":return e.jsx(t,{name:"x-circle",className:"w-4 h-4 text-red-500"})}},ue=({onExport:a,onRestore:o,onResetProgress:p,onFactoryReset:d,onSync:i,onForceFetch:l,onForceUpload:h,onCreateServerBackup:b,onManageServerBackups:w,isSyncing:n,lastSyncStatus:f,isGapiReady:N,isGapiSignedIn:k,gapiUser:m,onGoogleSignIn:C,onGoogleSignOut:S,onBackupToDrive:I,onRestoreFromDrive:u,onClearAppCache:B,onClearCdnCache:z,onRevertLastFetch:H})=>{const s=ae(),{themeId:K,setThemeById:Y,addCustomTheme:J}=G(),[V,Q]=x.useState(!1),[P,F]=x.useState([]),[L,R]=x.useState(!1),[M,W]=x.useState(1),{addToast:T}=te(),E=re(),[A,Z]=x.useState(s.encryptionPassword);x.useEffect(()=>{localStorage.getItem("cogniflow-pre-fetch-backup")&&Q(!0),F(ce())},[]);const _=()=>{oe(),F([]),T("Sync log cleared.","success")},X=()=>{s.setEncryptionPassword(A),A&&A!==s.encryptionPassword&&T("Encryption password saved.","success")},U=()=>{E!=null&&E.handleShiftSchedule&&E.handleShiftSchedule(M)};return e.jsxs("div",{className:"max-w-3xl mx-auto animate-fade-in space-y-8",children:[e.jsx("h1",{className:"text-3xl font-bold text-text border-b border-border pb-4",children:"Settings"}),e.jsxs(le,{type:"multiple",defaultValue:["srs","appearance","general","cloud-sync","gdrive-backup","data-management","cache-management"],className:"w-full space-y-4",children:[e.jsxs(j,{value:"srs",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Spaced Repetition"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-2",children:"Leech Handling"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:'"Leeches" are cards you repeatedly forget. Configure how the app handles them.'}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Leech Threshold (Lapses)"}),e.jsx("input",{type:"number",min:"1",max:"99",value:s.leechThreshold,onChange:c=>s.setLeechThreshold(Math.max(1,parseInt(c.target.value)||8)),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted mb-1",children:"Action on Leech"}),e.jsxs("select",{value:s.leechAction,onChange:c=>s.setLeechAction(c.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",children:[e.jsx("option",{value:"suspend",children:"Suspend Card"}),e.jsx("option",{value:"tag",children:'Tag as "Leech"'}),e.jsx("option",{value:"warn",children:"Just Warn Me"})]})]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-base font-semibold text-text mb-2",children:"Vacation Mode / Schedule Shift"}),e.jsx("p",{className:"text-sm text-text-muted mb-4",children:"Push all due dates forward by a set number of days. Useful if you missed studying or plan to take a break."}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-sm font-medium text-text-muted",children:"Shift by:"}),e.jsx("input",{type:"number",min:"1",max:"365",value:M,onChange:c=>W(Math.max(1,parseInt(c.target.value)||1)),className:"w-20 p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none"}),e.jsx("span",{className:"text-sm text-text-muted",children:"days"}),e.jsxs(r,{variant:"secondary",onClick:U,children:[e.jsx(t,{name:"calendar",className:"w-4 h-4 mr-2"})," Shift Schedule"]})]})]})]})]}),e.jsxs(j,{value:"data-management",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Data Management"})}),e.jsxs(y,{className:"bg-surface p-6 flex flex-wrap gap-4 justify-center",children:[e.jsxs(r,{variant:"secondary",onClick:a,children:[e.jsx(t,{name:"download",className:"mr-2"})," Export All Data"]}),e.jsxs(r,{variant:"secondary",onClick:o,children:[e.jsx(t,{name:"upload-cloud",className:"mr-2"})," Restore from File"]}),e.jsxs(r,{variant:"secondary",onClick:p,children:[e.jsx(t,{name:"refresh-ccw",className:"mr-2"})," Reset Progress"]}),V&&e.jsxs(r,{variant:"secondary",onClick:H,children:[e.jsx(t,{name:"refresh-ccw",className:"mr-2"})," Revert Last Fetch"]})]})]}),e.jsxs(j,{value:"cloud-sync",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Cloud Sync"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-6",children:[e.jsx(v,{label:"Enable Cloud Sync",description:"Automatically sync your data to the server.",checked:s.backupEnabled,onChange:s.setBackupEnabled}),e.jsx(v,{label:"Sync on Cellular Data",description:"Allow auto-sync when on a mobile network.",checked:s.syncOnCellular,onChange:s.setSyncOnCellular,disabled:!s.backupEnabled}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"backup-api-key",className:"block text-sm font-medium text-text-muted mb-1",children:"Server Backup API Key"}),e.jsx("input",{id:"backup-api-key",type:"password",value:s.backupApiKey,onChange:c=>s.setBackupApiKey(c.target.value),className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",disabled:!s.backupEnabled})]}),e.jsxs("div",{className:"pt-2 border-t border-border mt-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-text-muted mb-2",children:"Encryption (Optional)"}),e.jsx("label",{htmlFor:"encryption-password",className:"block text-sm font-medium text-text-muted mb-1",children:"Encryption Password"}),e.jsx("div",{className:"flex gap-2",children:e.jsx("input",{id:"encryption-password",type:"password",value:A,onChange:c=>Z(c.target.value),onBlur:X,className:"w-full p-2 bg-background border border-border rounded-md focus:ring-2 focus:ring-primary focus:outline-none",disabled:!s.backupEnabled,placeholder:"Enter a password to encrypt your cloud backups"})}),e.jsx("p",{className:"text-xs text-text-muted mt-1",children:"If set, your data will be encrypted on your device before uploading. You MUST use the same password on all devices to decrypt your data."})]}),e.jsxs("div",{className:"pt-4 border-t border-border flex flex-col sm:flex-row gap-2 items-center justify-between",children:[e.jsx("p",{className:"text-sm text-text-muted",children:n?"Syncing...":f}),e.jsx("div",{className:"flex gap-2 flex-wrap justify-end",children:e.jsxs(r,{variant:"primary",onClick:i,disabled:!s.backupEnabled||n,children:[e.jsx(t,{name:"refresh-ccw",className:"w-4 h-4 mr-2"})," Sync Now"]})})]}),e.jsxs("div",{className:"pt-4 border-t border-border",children:[e.jsx("h3",{className:"text-lg font-semibold text-text-muted",children:"Advanced Sync Options"}),e.jsx("p",{className:"text-sm text-text-muted mt-1 mb-4",children:"Use these options to resolve sync conflicts manually. These are destructive actions and should be used with caution."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-start",children:[e.jsxs(r,{variant:"secondary",onClick:h,disabled:!s.backupEnabled||n,children:[e.jsx(t,{name:"upload-cloud",className:"w-4 h-4 mr-2"})," Force Upload to Server"]}),e.jsxs(r,{variant:"secondary",onClick:l,disabled:!s.backupEnabled||n,children:[e.jsx(t,{name:"download",className:"w-4 h-4 mr-2"})," Force Fetch from Server"]})]})]}),e.jsxs("div",{className:"pt-4 border-t border-border flex flex-wrap gap-2 justify-center",children:[e.jsxs(r,{variant:"secondary",onClick:b,disabled:!s.backupEnabled||n,children:[e.jsx(t,{name:"plus",className:"w-4 h-4 mr-2"})," Create Manual Backup"]}),e.jsxs(r,{variant:"secondary",onClick:w,disabled:!s.backupEnabled||n,children:[e.jsx(t,{name:"settings",className:"w-4 h-4 mr-2"})," Manage Backups"]})]})]})]}),e.jsxs(j,{value:"sync-history",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Sync History"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-4",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(r,{variant:"secondary",size:"sm",onClick:_,children:"Clear Log"})}),P.length>0?e.jsx("ul",{className:"space-y-2 max-h-64 overflow-y-auto bg-background p-3 rounded-md border border-border",children:P.map(c=>e.jsxs("li",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:ie(c.type)}),e.jsxs("div",{className:"flex-grow",children:[e.jsx("p",{className:"text-text",children:c.message}),e.jsx("p",{className:"text-xs text-text-muted",children:new Date(c.timestamp).toLocaleString()})]})]},c.timestamp))}):e.jsx("p",{className:"text-center text-text-muted py-4",children:"No sync history yet."})]})]}),e.jsxs(j,{value:"appearance",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Appearance"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-6",children:[e.jsx(ne,{selectedTheme:K,onThemeChange:Y,onOpenBuilder:()=>R(!0)}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-sm font-medium text-text-muted",children:"Font Style"}),e.jsx("div",{className:"flex bg-background rounded-md p-1 border border-border",children:["sans","serif","mono"].map(c=>e.jsx("button",{onClick:()=>s.setFontFamily(c),className:`flex-1 py-1.5 px-3 text-sm rounded transition-colors ${s.fontFamily===c?"bg-primary text-on-primary shadow-sm":"text-text hover:bg-border/50"}`,children:e.jsx("span",{className:`font-${c} capitalize`,children:c})},c))})]}),e.jsx(v,{label:"Disable Animations",description:"Reduces motion for a faster experience.",checked:s.disableAnimations,onChange:s.setDisableAnimations})]})]}),e.jsxs(j,{value:"general",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"General"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-6",children:[e.jsx(v,{label:"Enable Haptic Feedback",description:"Provides physical feedback on supported devices.",checked:s.hapticsEnabled,onChange:s.setHapticsEnabled}),e.jsx(v,{label:"Daily Notifications",description:"Receive local reminders when you have cards due.",checked:s.notificationsEnabled,onChange:s.setNotificationsEnabled}),e.jsx(v,{label:"Enable AI Features",description:"Allows content generation using the Gemini API.",checked:s.aiFeaturesEnabled,onChange:s.setAiFeaturesEnabled})]})]}),e.jsxs(j,{value:"gdrive-backup",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Google Drive Backup"})}),e.jsx(y,{className:"bg-surface p-6 space-y-6",children:N?k?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-3 bg-background rounded-md",children:[e.jsx("img",{src:m==null?void 0:m.picture,alt:"User profile",className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold text-text",children:m==null?void 0:m.name}),e.jsx("p",{className:"text-sm text-text-muted",children:m==null?void 0:m.email})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs(r,{variant:"secondary",onClick:I,children:[e.jsx(t,{name:"upload-cloud",className:"mr-2"})," Backup to Drive"]}),e.jsxs(r,{variant:"secondary",onClick:u,children:[e.jsx(t,{name:"download",className:"mr-2"})," Restore from Drive"]}),e.jsx(r,{variant:"danger",onClick:S,children:"Sign Out"})]})]}):e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-text-muted mb-4",children:"Sign in with your Google account to back up and restore your data to a private folder in your Google Drive."}),e.jsxs(r,{variant:"primary",onClick:C,className:"inline-flex items-center gap-2",children:[e.jsx(t,{name:"google",className:"w-5 h-5"}),"Sign in with Google"]})]}):e.jsx("p",{className:"text-text-muted text-center",children:"Loading Google Drive services..."})})]}),e.jsxs(j,{value:"cache-management",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Cache Management"})}),e.jsxs(y,{className:"bg-surface p-6 space-y-4",children:[e.jsx("p",{className:"text-sm text-text-muted text-center w-full",children:"Clearing the cache can resolve issues by forcing the app to download the latest files. This does not affect your saved data."}),e.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[e.jsxs(r,{variant:"secondary",onClick:B,children:[e.jsx(t,{name:"refresh-ccw",className:"mr-2"})," Clear App Cache"]}),e.jsxs(r,{variant:"secondary",onClick:z,children:[e.jsx(t,{name:"download",className:"mr-2"})," Clear CDN Cache"]})]})]})]}),e.jsxs(j,{value:"developer-tools",className:"border border-border rounded-lg overflow-hidden",children:[e.jsx(g,{children:e.jsx("h2",{className:"text-2xl font-semibold text-text",children:"Developer Tools"})}),e.jsx(y,{className:"bg-surface p-6 flex flex-wrap gap-4 justify-center",children:e.jsxs(r,{variant:"secondary",onClick:()=>{typeof window.runBackupServiceTests=="function"?(T("Running backup service tests... Check the console for results.","info"),window.runBackupServiceTests()):T("Test runner function not found.","error")},children:[e.jsx(t,{name:"terminal",className:"mr-2"})," Run API Tests"]})})]})]}),e.jsxs("div",{className:"bg-red-900/20 border border-red-500/30 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-red-400 dark:text-red-300",children:"Danger Zone"}),e.jsx("p",{className:"text-red-500/80 dark:text-red-300/80 mb-4",children:"This will permanently delete all your decks, folders, and progress. This action cannot be undone."}),e.jsxs(r,{variant:"danger",onClick:d,children:[e.jsx(t,{name:"broom",className:"mr-2"})," Factory Reset"]})]}),L&&e.jsx(de,{isOpen:L,onClose:()=>R(!1),onSave:J})]})};export{ue as SettingsPage};
